"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[73241],{673241:(e,n,t)=>{t.r(n);t.d(n,{default:()=>F});var r=t(785893),i=t(667294),u=t(441143),l=t.n(u),o=t(331535),a=t(670529),s=t(7046),c=t(653772),d=t(276842),f=t(272729),p=t(67416),b=t(363010),h=t(545623),g=t(959797);const v={title:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_TITLE},description:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_FINISH_SETTING_UP_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,b.e7)([h.Z],(function(){return function(e){return h.Z.getEligibleGuildsForNagActivate().includes(e.id)}}),[])}};var S=t(814709),G=t(458822),I=t(202552),y=t(997030),m=t(26080);const C={title:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_TITLE},description:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,b.e7)([I.Z],(function(){
return function(e,n){return e.isOwner(n)&&(0,m.X$)({guild:e,isOwner:!0,canManageGuildRoleSubscriptions:!0,isMonetizationWaitlistEnabledForGuild:(0,S.mG)(e.id),isGuildEligibleForRoleSubscriptions:(0,y.kT)(e.id),isExpeditedMonetizationOnboardingGuild:(0,S.Rw)(e),isUserInCreatorMonetizationEligibleCountry:(0,S.DB)(),shouldRestrictUpdatingRoleSubscriptionSettings:(0,G.n9)(e.id)})}}),[],b.pF)}};var E=t(940712);function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done);l=!0){u.push(r.value);if(n&&u.length===n)break}}catch(e){o=!0;i=e}finally{try{l||null==t.return||t.return()}finally{
if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x={"server-subscriptions-onboarding":C,"server-subscriptions-finish-setting-up":v},w={title:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_TITLE},description:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_DESCRIPTION},selectGuildCta:function(){return g.Z.Messages.GET_STARTED},createGuildDescription:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_CREATE_DESCRIPTION},createGuildCta:function(){return g.Z.Messages.CREATE_SERVER_BUTTON_CTA},
canCreateGuild:!0,useIsGuildSupported:function(){return(0,b.e7)([E.Z],(function(){return function(e){return E.Z.canAccessGuildSettings(e)}}),[],b.pF)}};function j(e){var n,t=O(i.useState(null==e?void 0:x[e]),1)[0],r=w.useIsGuildSupported(),u=null==t||null===(n=t.useIsGuildSupported)||void 0===n?void 0:n.call(t),l=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){_(e,n,t[n])}))}return e}({},w,null!=t?t:{});return{title:l.title(),description:l.description(),selectGuildCta:l.selectGuildCta(),createGuildDescription:l.createGuildDescription(),createGuildCta:l.createGuildCta(),canCreateGuild:l.canCreateGuild,isGuildSupported:function(e,n){return r(e,n)&&!1!==(null==u?void 0:u(e,n))}}}var R=t(784238),Z=t(859023);var D=t(637676),N=t.n(D)
;function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e,n,t,r,i,u,l){try{var o=e[u](l),a=o.value}catch(e){t(e);return}o.done?n(a):Promise.resolve(a).then(r,i)}function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done);l=!0){u.push(r.value);if(n&&u.length===n)break}}catch(e){o=!0;i=e}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e,n){var t,r,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(u){return function(o){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;(r=0,i)&&(u=[2&u[0],i.value]);switch(u[0]){case 0:case 1:i=u;break;case 4:l.label++;return{value:u[1],done:!1};case 5:l.label++;r=u[1];u=[0];continue;case 7:u=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){l=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){l.label=u[1];break}if(6===u[0]&&l.label<i[1]){
l.label=i[1];i=u;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(u);break}i[2]&&l.ops.pop();l.trys.pop();continue}u=n.call(e,l)}catch(e){u=[6,e];r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,o])}}};function M(e){var n=e.className,t=e.guildId,u=e.onChange,a=function(e){var n=e.isGuildIncluded,t=e.selectedGuildId,r=(0,b.e7)([R.Z],(function(){return R.Z.getFlattenedGuildIds()})),u=(0,b.e7)([c.Z],(function(){return c.Z.getGuilds()})),o=(0,b.e7)([Z.default],(function(){return Z.default.getCurrentUser()}));return{options:i.useMemo((function(){return null==o?[]:(null==n?r:r.filter((function(e){var t=u[e];l()(null!=t,"guild should not be null");return n(t,o)}))).map((function(e){var n=u[e];l()(null!=n,"guild should not be null");return{label:n.name,value:n.id}}))}),[r,u,o,n]),selectedGuild:null==t?void 0:u[t]}}({isGuildIncluded:e.isGuildIncluded}).options;return(0,r.jsx)(o.Vc,{className:n,onChange:u,value:t,options:a,placeholder:g.Z.Messages.GUILD_SELECT})
}function k(e){return new Promise((function(n){c.Z.addChangeListener((function t(){if(null!=c.Z.getGuild(e)){c.Z.removeChangeListener(t);n()}}))}))}function F(e){var n,t,u=e.transitionState,c=e.onClose,b=e.feature,h=e.section,g=e.subsection,v=(0,f.Dt)(),S=j(b),G=S.canCreateGuild,I=S.createGuildCta,y=S.createGuildDescription,m=S.selectGuildCta,C=S.title,E=S.description,T=S.isGuildSupported,_=L(i.useState(),2),O=_[0],x=_[1],w=L(i.useState(!1),2),R=w[0],Z=w[1],D=(t=(n=function(){var e;return P(this,(function(n){switch(n.label){case 0:Z(!0);return[4,new Promise((function(e){a.Z.openCreateGuildModal({onSuccess:e})}))];case 1:return[4,k(e=n.sent())];case 2:n.sent();s.Z.open(e,h,void 0,g);null==c||c();return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(r,i){var u=n.apply(e,t);function l(e){U(u,r,i,l,o,"next",e)}function o(e){U(u,r,i,l,o,"throw",e)}l(void 0)}))}),function(){return t.apply(this,arguments)});return(0,r.jsxs)(p.Y0,{transitionState:u,"aria-labelledby":v,
children:[(0,r.jsxs)(p.xB,{className:N().modalHeader,separator:!1,children:[(0,r.jsx)(o.X6,{id:v,variant:"heading-lg/medium",children:C}),(0,r.jsx)(p.ol,{onClick:c})]}),(0,r.jsxs)(p.hz,{className:N().modalContent,children:[(0,r.jsx)(o.xv,{variant:"text-md/medium",children:E}),(0,r.jsx)(d.Z,{size:16}),(0,r.jsxs)("div",{className:N().guildSelection,children:[(0,r.jsx)("div",{className:N().guildSelectorContainer,children:(0,r.jsx)(M,{guildId:O,onChange:x,isGuildIncluded:T})}),(0,r.jsx)(o.zx,{onClick:function(){l()(null!=O,"Guild ID must not be null on click");s.Z.open(O,h,void 0,g);null==c||c()},disabled:null==O,children:m})]}),G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{size:32}),(0,r.jsx)(o.xv,{variant:"text-md/medium",children:y}),(0,r.jsx)(d.Z,{size:8}),(0,r.jsx)(o.zx,{onClick:D,submitting:R,children:I})]})]})]})}}}]);
//# sourceMappingURL=81167a5d1a8ce4f7f87b.js.map