(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[87947],{489893:(e,t,n)=>{e.exports=n.p+"dea5252276408a8bfca6dda585ca5216.svg"},794649:(e,t,n)=>{e.exports=n.p+"d759f3acc6286c964cc8118d7f68b374.svg"},638657:(e,t,n)=>{"use strict";n.r(t);n.d(t,{openCreateGuildModal:()=>q,updateCreateGuildModal:()=>Q});var r=n(785893),o=n(667294),i=n(945460),l=n(415879),a=n(652591),c=n(441143),s=n.n(c),u=n(999357),f=n(634698),d=n(463473),p=n(241811),m=n(497279),_=n(88100),S=n(837201),I=n(294184),E=n.n(I),N=n(419156),v=n(973889),T=n(784426),O=n(107364),y=n(443812),b=n(308921),C=n(2590),g=n(473708),h=n(574786),A=n.n(h),w=n(489893),L=n.n(w),D=n(794649),j=n.n(D);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){a=!0;o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R="hTKzmak",G=(0,y.hQ)();var P=function(){var e=window.GLOBAL_ENV.INVITE_HOST,t="";if(null==e){e=location.host;t=C.Z5c.INVITE("")}return"".concat(location.protocol,"//").concat(e).concat(t,"/")
}(),k=[R,"".concat(P).concat(R),"".concat(P).concat("cool-people")],Z=function(e){var t=e.onClick;return(0,r.jsxs)(i.Clickable,{className:A().rowContainer,onClick:function(){t();(0,T.uL)(C.Z5c.GUILD_DISCOVERY)},children:[(0,r.jsx)("img",{width:40,height:40,className:A().rowIcon,alt:"",src:j()}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Heading,{className:A().rowText,variant:"heading-md/semibold",children:g.Z.Messages.DISCOVERY_UPSELL_HEADER}),(0,r.jsx)(i.Text,{className:A().rowText,variant:"text-xs/normal",children:g.Z.Messages.DISCOVERY_UPSELL_DESCRIPTION})]}),(0,r.jsx)("img",{className:A().rowArrow,alt:"",src:L()})]})};function F(e){var t=e.onBack,n=e.onClose,l=e.isSlideReady,a=x(o.useState(""),2),c=a[0],s=a[1],u=x(o.useState(!1),2),f=u[0],d=u[1],p=x(o.useState(null),2),m=p[0],_=p[1],S=o.useRef(null);o.useEffect((function(){var e;l&&(null===(e=S.current)||void 0===e||e.focus())}),[l]);var I=function(e){e.preventDefault();var t=c.trim();if(""!==t){_(null);d(!0)
;var r=t.split("/"),o=r[r.length-1];N.Z.resolveInvite(o,"Join Guild",{inputValue:t}).then((function(e){var t=e.invite;d(!1);if(null!=t){if(null!=t.channel){var r=N.Z.getInviteContext("Join Guild",t);N.Z.acceptInvite({inviteKey:t.code,context:r,callback:function(e){n();N.Z.transitionToInvite(e)}}).then((function(){}),(function(e){if(e instanceof v.Z){var t=(0,b.O)(e.code);_(t)}else _(g.Z.Messages.INVITE_MODAL_ERROR_DEFAULT)}))}}else _(g.Z.Messages.INSTANT_INVITE_EXPIRED)}),(function(e){d(!1);var t=new v.Z(e),n=(0,b.O)(t.code);_(n)}))}else _(g.Z.Messages.INVALID_INVITE_LINK_ERROR)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.ModalHeader,{className:A().header,direction:O.Z.Direction.VERTICAL,separator:!1,children:[(0,r.jsx)(i.Heading,{className:A().title,variant:"heading-xl/semibold",children:g.Z.Messages.JOIN_SERVER_TITLE}),(0,r.jsx)(i.Text,{color:"header-secondary",variant:"text-sm/normal",children:g.Z.Messages.JOIN_SERVER_DESCRIPTION_NUF}),(0,r.jsx)(i.ModalCloseButton,{
className:A().closeButton,onClick:n})]}),(0,r.jsxs)(i.ModalContent,{className:A().content,children:[(0,r.jsx)("form",{onSubmit:I,className:A().inputForm,children:(0,r.jsxs)(i.FormItem,{children:[(0,r.jsx)(i.FormTitle,{id:G,error:m,className:E()(A().formTitle,U({},A().error,null!=m)),required:!0,children:g.Z.Messages.FORM_LABEL_INVITE_LINK}),(0,r.jsx)(i.TextInput,{value:c,onChange:s,className:A().input,inputClassName:A().inputInner,placeholder:"".concat(P).concat(R),inputRef:S,required:!0,"aria-labelledby":G})]})}),(0,r.jsx)(i.FormItem,{title:g.Z.Messages.JOIN_SERVER_INVITE_EXAMPLES_HEADER,titleClassName:A().formTitle,className:A().examplesForm,children:k.map((function(e){return(0,r.jsx)(i.Clickable,{className:A().sampleLink,onClick:function(){return s(e)},children:e},e)}))}),(0,r.jsx)(Z,{onClick:n})]}),(0,r.jsxs)(i.ModalFooter,{className:A().footer,children:[(0,r.jsx)(i.Button,{color:i.Button.Colors.BRAND,submitting:f,onClick:I,children:g.Z.Messages.NUF_JOIN_SERVER_BUTTON}),(0,
r.jsx)(i.Button,{color:i.Button.Colors.PRIMARY,look:i.Button.Looks.LINK,size:i.Button.Sizes.MIN,onClick:t,children:g.Z.Messages.BACK})]})]})}var B=n(416625),K=n(225888),V=n.n(K);function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){a=!0;o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e){var t=e.transitionState,n=e.initialSlide,l=void 0===n?B._.GUILD_TEMPLATES:n,c=e.onSuccess,I=e.onClose,E=e.onSlideChange,N=e.hasJoinButton,v=H(o.useState(l),2),T=v[0],O=v[1],y=(0,f.Z)(T),b=H(o.useState(null),2),g=b[0],h=b[1],A=H(o.useState(null),2),w=A[0],L=A[1],D=H(o.useState(null),2),j=D[0],M=D[1],U=H(o.useState(!1),2),x=U[0],R=U[1];o.useEffect((function(){O(l)}),[O,l]);o.useEffect((function(){T!==y&&E(T)}),[E,T,y]);var G=o.useCallback((function(e){O(B._.CREATION_INTENT);L(e);a.default.track(C.rMx.GUILD_TEMPLATE_SELECTED,{template_name:e.id,template_code:e.code})}),[]),P=o.useCallback((function(e){R(e);O(B._.CUSTOMIZE_GUILD)}),[]),k=o.useCallback((function(){return O(B._.JOIN_GUILD)}),[O]),Z=o.useCallback((function(){if(T!==B._.CUSTOMIZE_GUILD){O(B._.GUILD_TEMPLATES);L(null)}else O(B._.CREATION_INTENT)
}),[T]),K=o.useCallback((function(e){M(e);c(e)}),[c,M]),J=o.useCallback((function(){s()(null!=j,"handleSuccess called before onGuildCreated");c(j)}),[c,j]),z={impression_group:u.AG.GUILD_ADD_FLOW};return(0,r.jsx)("div",{className:(0,d.Q)(C.BRd.LIGHT),children:(0,r.jsx)(i.ModalRoot,{transitionState:t,disableTrack:!0,children:(0,r.jsx)("div",{className:V().container,children:(0,r.jsxs)(i.Slides,{activeSlide:T,width:440,onSlideReady:function(e){return h(e)},children:[(0,r.jsx)(i.Slide,{id:B._.GUILD_TEMPLATES,impressionName:u.zs.GUILD_ADD_LANDING,impressionProperties:z,children:(0,r.jsx)(S.Z,{isNewUser:!1,onJoin:N?k:void 0,onChooseTemplate:G,onClose:I})}),(0,r.jsx)(i.Slide,{id:B._.CREATION_INTENT,impressionName:u.zs.GUILD_ADD_INTENT_SELECTION,impressionProperties:z,children:(0,r.jsx)(m.Z,{onClose:I,onBack:Z,onCreationIntentChosen:P})}),(0,r.jsx)(i.Slide,{id:B._.CUSTOMIZE_GUILD,impressionName:u.zs.GUILD_ADD_CUSTOMIZE,impressionProperties:z,children:(0,r.jsx)(_.Z,{guildTemplate:w,
onGuildCreated:K,onClose:I,onBack:Z,isSlideReady:g===B._.CUSTOMIZE_GUILD,isCommunity:x})}),(0,r.jsx)(i.Slide,{id:B._.CHANNEL_PROMPT,impressionName:u.zs.GUILD_ADD_CHANNEL_PROMPT,impressionProperties:z,children:(0,r.jsx)(p.Z,{createdGuildId:j,onClose:I,onChannelPromptCompleted:J,isSlideReady:g===B._.CHANNEL_PROMPT})}),(0,r.jsx)(i.Slide,{id:B._.JOIN_GUILD,impressionName:u.zs.GUILD_ADD_JOIN,impressionProperties:z,children:(0,r.jsx)(F,{onBack:Z,onClose:I,isSlideReady:g===B._.JOIN_GUILD})})]})})})})}var X=n(571680);function W(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Y(e,t,n,o){return(0,r.jsx)(z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){W(e,t,n[t])}))}return e
}({onSuccess:function(t){l.Z.flowStep(X.MK.CREATE_GUILD,X.X2.SUCCESS);e.onClose();null==o||o(t)},onSlideChange:function(e){return function(e,t){switch(e){case B._.GUILD_TEMPLATES:l.Z.flowStepOrStart(X.MK.CREATE_GUILD,X.X2.GUILD_TEMPLATES);a.default.track(C.rMx.OPEN_MODAL,{type:"Create Guild Templates",location:t});break;case B._.CUSTOMIZE_GUILD:l.Z.flowStep(X.MK.CREATE_GUILD,X.X2.GUILD_CREATE);a.default.track(C.rMx.OPEN_MODAL,{type:"Create Guild Step 2",location:t});break;case B._.CREATION_INTENT:a.default.track(C.rMx.OPEN_MODAL,{type:"Server Intent Discovery",location:t});break;case B._.JOIN_GUILD:l.Z.flowStep(X.MK.CREATE_GUILD,X.X2.JOIN_GUILD);a.default.track(C.rMx.OPEN_MODAL,{type:"Join Guild",location:t})}}(e,n)},initialSlide:t,hasJoinButton:!0},e))}var q=function(e){var t=e.initialSlide,n=e.location,r=e.onSuccess;(0,i.openModal)((function(e){return Y(e,t,n,r)}),{modalKey:B.P})},Q=function(e){var t=e.slide,n=e.location;(0,i.updateModal)(B.P,(function(e){return Y(e,t,n)}))}},
571680:(e,t,n)=>{"use strict";n.d(t,{MK:()=>r,FF:()=>o,mx:()=>i,X2:()=>l,EW:()=>a});var r,o,i,l,a;!function(e){e.UNKNOWN="unknown";e.ANY="any";e.INVITE="invite";e.ORGANIC="organic_registration";e.ORGANIC_MARKETING="organic_marketing";e.ORGANIC_GUILD_TEMPLATES="organic_guild_template";e.CREATE_GUILD="create_guild"}(r||(r={}));!function(e){e.AGE_GATE="age_gate";e.AGE_GATE_UNDERAGE="age_gate_underage"}(o||(o={}));!function(e){e.CLAIM_ACCOUNT="claim_account";e.CLAIM_ACCOUNT_SUCCESS="claim_account_success"}(i||(i={}));!function(e){e.GUILD_TEMPLATES="guild_templates";e.GUILD_CREATE="guild_create";e.CREATION_INTENT="creation_intent";e.CHANNEL_PROMPT="channel_prompt";e.JOIN_GUILD="join_guild";e.SUCCESS="create_success"}(l||(l={}));!function(e){e.NUF_STARTED="nuf_started";e.AGE_GATE="age_gate";e.NUF_COMPLETE="nuf_complete";e.HUB_CONNECTION="hub_connection"}(a||(a={}))},415879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(38736),o=n(630631),i=n(296602),l=n(652591),a=n(571680),c=n(2590)
;function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{}
;var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function p(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_="UserFlowAnalyticsStore_current",S="UserFlowAnalyticsStore";new i.Z("UserFlowAnalytics");function I(e){if(e===a.MK.UNKNOWN)return null;var t=o.Z.get("".concat(S,"-").concat(e));if(null==t)return null;var n=t.version,r=d(t,["version"]);return 1!==n?null:r}var E=(0,
r.Z)((function(e,t){return s({flows:{},currentFlow:null},"activeFlow",(function(){var e,n=null!==(e=t().currentFlow)&&void 0!==e?e:o.Z.get(_);if(null==n)return null;var r=t().flows[n],i=null!=r?r:I(n);return null!=(null==i?void 0:i.currentStep)?n:null}))}));E.subscribe((function(e){var t;if(null!=e){!function(e){if(e.type!==a.MK.UNKNOWN){var t="".concat(S,"-").concat(e.type);if(e.ended){o.Z.remove(t);o.Z.remove(_)}else{o.Z.set("".concat(S,"-").concat(e.type),f(u({},e),{version:1}));o.Z.set(_,e.type)}}}(e);l.default.track(c.rMx.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0});if(e.ended){var n=u({},E.getState().flows);delete n[e.type];E.setState({flows:n,currentFlow:null})}}}),(function(e){return null!=e.currentFlow?e.flows[e.currentFlow]:void 0}));function N(e,t){
var n=E.getState().flows,r=n[e],o=d(n,[e].map(p)),i=null!=r?r:I(e);if(null!=(null==i?void 0:i.currentStep)){if(i.currentStep===t)return;0}E.setState({flows:f(u({},o),s({},e,{type:e,lastStep:null,lastTimestamp:null,currentStep:t,currentTimestamp:new Date,skipped:!1})),currentFlow:e})}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;if(e===a.MK.ANY){var o;r=null!==(o=E.getState().activeFlow())&&void 0!==o?o:a.MK.UNKNOWN}var i=E.getState().flows,l=i[r],c=d(i,[r].map(p)),m=null!=l?l:I(r);null!=m&&null!=m.currentStep&&m.currentStep!==t&&E.setState({flows:f(u({},c),s({},r,f(u({},m),{lastStep:m.currentStep,lastTimestamp:m.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:n}))),currentFlow:r})}function T(){return null!=E.getState().activeFlow()}const O={flowStart:N,flowStepOrStart:function(e,t){T()?v(e,t):N(e,t)},flowStep:v,hasActiveFlow:T}}}]);
//# sourceMappingURL=9e685c8c84e2810c6f0d.js.map