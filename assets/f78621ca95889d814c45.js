"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[25934],{425934:(e,n,t)=>{t.r(n);t.d(n,{default:()=>A});var r=t(785893),o=t(667294),a=t(294184),s=t.n(a),i=t(441143),l=t.n(i),u=t(23279),c=t.n(u),d=t(202351),f=t(945460),m=t(579194),p=t(450383),h=t(473903),v=t(98265),E=t(850841),S=t(2590),b=t(473708),y=t(195345),N=t.n(y),M=t(103468),x=t.n(M);function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){t(e);return}i.done?n(l):Promise.resolve(l).then(r,o)}function _(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function s(e){I(a,r,o,s,i,"next",e)}function i(e){I(a,r,o,s,i,"throw",e)}s(void 0)}))}}function g(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],s=!0,i=!1;try{for(t=t.call(e);!(s=(r=t.next()).done);s=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{s||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){
return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:s.label++;return{value:a[1],done:!1};case 5:s.label++;r=a[1];a=[0];continue;case 7:a=s.ops.pop();s.trys.pop();continue;default:if(!(o=s.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1];o=a;break}if(o&&s.label<o[2]){s.label=o[2];s.ops.push(a);break}o[2]&&s.ops.pop();s.trys.pop();continue}a=n.call(e,s)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function A(e){var n,t,a=e.transitionState,i=e.onClose,u=(0,d.e7)([h.default],(function(){var e=h.default.getCurrentUser()
;l()(null!=e,"ChangeUsernameModal: currentUser cannot be undefined");return e})),y=o.useMemo((function(){return E.ZP.canEditDiscriminator(u)&&!u.isPomelo()}),[u]),M=R(o.useState(!1),2),C=M[0],I=M[1],A=R(o.useState(u.username),2),w=A[0],j=A[1],U=R(o.useState(u.discriminator),2),P=U[0],Z=U[1],B=R(o.useState(""),2),L=B[0],k=B[1],O=R(o.useState(!1),2),D=O[0],G=O[1],F=(0,d.e7)([p.Z],(function(){return p.Z.getErrors()})),H=o.useRef(null),z=o.useMemo((function(){var e,n;return null!==(t=null==F||null===(e=F.username)||void 0===e?void 0:e[0])&&void 0!==t?t:null==F||null===(n=F.discriminator)||void 0===n?void 0:n[0]}),[F]);o.useEffect((function(){if(a===f.ModalTransitionState.ENTERED){var e;null===(e=H.current)||void 0===e||e.focus()}}),[a]);var K=P!==u.discriminator;function W(){return(W=_((function(e){var n;return T(this,(function(t){switch(t.label){case 0:e.preventDefault();G(!0);return[4,(0,m.Mn)({username:w,discriminator:y?P:void 0,password:L})];case 1:n=t.sent();G(!1)
;(null==n?void 0:n.ok)&&i();return[2]}}))}))).apply(this,arguments)}var Y,$=o.useMemo((function(){return c()(I,50)}),[]);return(0,r.jsxs)(f.ModalRoot,{transitionState:a,children:[(0,r.jsxs)(f.ModalHeader,{separator:!1,className:N().header,children:[(0,r.jsx)(v.Z,{color:v.Z.Colors.HEADER_PRIMARY,size:v.Z.Sizes.SIZE_24,className:N().title,children:b.Z.Messages.USER_SETTINGS_ACCOUNT_CHANGE_USERNAME_TITLE_DESKTOP}),(0,r.jsx)(f.Text,{color:"header-secondary",variant:"text-md/normal",className:N().subtitle,children:b.Z.Messages.USER_SETTINGS_ACCOUNT_CHANGE_USERNAME_PROMPT_DESKTOP}),(0,r.jsx)(f.ModalCloseButton,{onClick:i,className:N().modalCloseButton})]}),(0,r.jsxs)("form",{onSubmit:function(e){return W.apply(this,arguments)},children:[(0,r.jsxs)(f.ModalContent,{className:N().content,children:[(0,r.jsx)(f.FormItem,{title:b.Z.Messages.FORM_LABEL_USERNAME,error:z,children:(0,r.jsxs)("div",{className:s()(x().input,N().multiInput,(Y={},g(Y,x().error,null!=z),g(Y,x().focused,C),Y)),children:[(0,
r.jsx)(f.TextInput,{name:"username","aria-label":b.Z.Messages.USER_SETTINGS_LABEL_USERNAME,value:w,maxLength:S.l$U,onChange:j,onFocus:function(){return $(!0)},onBlur:function(){return $(!1)},inputRef:H,className:N().multiInputFirst,inputClassName:s()(N().multiInputField,g({},N().lowercase,u.isPomelo()))}),!u.isPomelo()&&(0,r.jsx)(f.TextInput,{name:"discriminator","aria-label":b.Z.Messages.USER_SETTINGS_LABEL_DISCRIMINATOR,maxLength:4,value:P,onChange:Z,onFocus:function(){return $(!0)},onBlur:function(){return $(!1)},inputPrefix:"#",disabled:!y,className:N().multiInputLast,inputClassName:N().multiInputField})]})}),K?(0,r.jsx)(f.Text,{variant:"text-xs/normal",color:"header-secondary",className:N().discriminatorChangeWarning,children:b.Z.Messages.PREMIUM_CHANGE_DISCRIMINATOR_WARNING}):null,(0,r.jsx)(f.FormItem,{className:N().password,title:b.Z.Messages.USER_SETTINGS_LABEL_CURRENT_PASSWORD,error:null==F||null===(n=F.password)||void 0===n?void 0:n[0],children:(0,r.jsx)(f.TextInput,{
type:"password",value:L,onChange:k})})]}),(0,r.jsxs)(f.ModalFooter,{children:[(0,r.jsx)(f.Button,{type:"submit",color:f.Button.Colors.BRAND,size:f.Button.Sizes.MEDIUM,submitting:D,children:b.Z.Messages.DONE}),(0,r.jsx)(f.Button,{className:N().cancel,look:f.Button.Looks.LINK,color:f.Button.Colors.PRIMARY,onClick:i,children:b.Z.Messages.CANCEL})]})]})]})}}}]);
//# sourceMappingURL=f78621ca95889d814c45.js.map