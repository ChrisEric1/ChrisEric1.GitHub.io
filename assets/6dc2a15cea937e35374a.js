"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[1513],{48509:(e,r,t)=>{t.d(r,{Z:()=>g});var n=t(785893),o=t(667294),l=t(294184),s=t.n(l),c=t(331535),a=t(67416),i=t(959797),u=t(949095),d=t.n(u);function f(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function h(e,r){return!r||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function b(e,r){b=Object.setPrototypeOf||function(e,r){e.__proto__=r;return e};return b(e,r)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0
;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,n=p(e);if(r){var o=p(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return h(this,t)}}var v=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}});r&&b(e,r)}(t,e);var r=m(t);function t(){f(this,t);var e;(e=r.apply(this,arguments)).state={code:"",errorMessage:"",retrySuccess:!1};e.setRef=function(r){e._input=r};e.getLabelText=function(){var r;return null!==(r=e.props.label)&&void 0!==r?r:e.props.disallowBackupCodes?i.Z.Messages.TWO_FA_ENTER_TOKEN_NO_BACKUP_LABEL:i.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL};e.getSupportedCodeTypes=function(){return e.props.disallowBackupCodes?i.Z.Messages.TWO_FA_AUTH_CODE_NO_BACKUP:i.Z.Messages.TWO_FA_AUTH_CODE}
;e.getPlaceholder=function(){return e.props.forceNoPlaceholder?null:null!==(r=e.props.placeholder)&&void 0!==r?r:e.getSupportedCodeTypes();var r};e.errorPresent=function(){return null!=e.props.error&&""!==e.props.error||null!=e.state.errorMessage&&""!==e.state.errorMessage};e.handleRetry=function(){var r=e.props.onRetry;null==r||r().then((function(){return e.setState({retrySuccess:!0})}))};e.handleSubmit=function(r){r.preventDefault();var t=e.props,n=t.handleSubmit,o=t.onError;n(e.state.code).catch((function(r){if(null!=r.body){null==o||o(r.body);r.body.message&&e.setState({errorMessage:r.body.message})}}))};e.handleCancel=function(){var r=e.props,t=r.onClose,n=r.handleEarlyClose;t();null==n||n()};e.handleCodeChange=function(r){e.setState({code:r})};return e}t.prototype.render=function(){
var e,r=this.props,t=r.title,l=r.actionText,u=r.children,f=r.error,p=r.isLoading,h=r.maxLength,b=r.transitionState,y=r.helpMessage,m=r.retryPrompt,v=r.retrySuccessMessage,g=this.state,O=g.code,j=g.errorMessage,x=g.retrySuccess,C=o.Children.count(u)>0?(0,n.jsx)(c.Zb,{type:c.Zb.Types.WARNING,className:d().card,children:(0,n.jsx)(c.xv,{variant:"text-md/normal",children:u})}):null,P=null!=m?(0,n.jsxs)(c.xv,{className:s()(d().submitText,d().spacing),variant:"text-sm/normal",children:[(0,n.jsx)("br",{}),(0,n.jsx)(c.P3,{className:s()(d().spacing,d().link),onClick:this.handleRetry,children:(0,n.jsx)(c.ee,{children:m})})]}):null,w=x?(0,n.jsx)(c.Zb,{type:c.Zb.Types.SUCCESS,className:d().card,children:(0,n.jsx)(c.xv,{variant:"text-md/normal",children:v})}):null;return(0,n.jsx)(a.Y0,{transitionState:b,children:(0,n.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,n.jsx)(a.xB,{separator:!1,children:(0,n.jsx)(c.X6,{variant:"heading-lg/semibold",children:t})}),(0,n.jsxs)(a.hz,{
children:[null!=y?(0,n.jsx)(c.xv,{color:"text-normal",variant:"text-md/normal",className:d().spacing,children:y}):null,C,w,(0,n.jsxs)(c.xJ,{title:this.getLabelText(),className:d().spacing,children:[(0,n.jsx)(c.oi,{inputRef:this.setRef,onChange:this.handleCodeChange,placeholder:null!==(e=this.getPlaceholder())&&void 0!==e?e:void 0,maxLength:null!=h?h:10,value:O,autoComplete:"one-time-code",autoFocus:!0}),this.errorPresent()?(0,n.jsx)(c.xv,{color:"text-danger",variant:"text-xs/normal",className:d().error,children:null!=f?f:j}):null,P]})]}),(0,n.jsxs)(a.mz,{children:[(0,n.jsx)(c.zx,{type:"submit",disabled:p||0===O.length,children:null!=l?l:i.Z.Messages.CONFIRM}),(0,n.jsx)(c.zx,{onClick:this.handleCancel,disabled:p,look:c.zx.Looks.LINK,color:c.zx.Colors.PRIMARY,children:i.Z.Messages.CANCEL})]})]})})};return t}(o.PureComponent);v.defaultProps={btnClass:"",isLoading:!1,disallowBackupCodes:!1,error:null,forceNoPlaceholder:!1};const g=v},301513:(e,r,t)=>{t.d(r,{Z:()=>m});const n=(0,
t(553494).B)({kind:"user",id:"2023-01_mfa_v2",label:"New MFA",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var o=t(859023),l=t(496486),s=function(e){return"function"==typeof e?e():e};t.n(l)().curry((function(e,r,t){return s(r)?e(t):t({})}));function c(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t;return e}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));n.forEach((function(r){c(e,r,t[r])}))}return e}function i(e,r){r=null!=r?r:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){
return Object.getOwnPropertyDescriptor(e,r).enumerable})));t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}));return e}function u(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++){t=l[n];r.indexOf(t)>=0||(o[t]=e[t])}return o}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++){t=l[n];r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}var d,f,p=function(){throw new Error("updateModal has not been implemented.")},h=t(988518);d=h.showModal;p=h.updateModalProps;f=t(897576).Mr;function b(e){var r=e.promiseFn,t=e.resolve,n=e.reject,o=e.modalProps,l=void 0===o?{}:o,s=e.hooks,c=(void 0===s?{}:s).onEarlyClose,u=function(){null==c||c()},h=function(e){f(v);t(e)},b=function(e){f(v);n(e)},m=function(e){var r=e.res;p(v,g,u,i(a({},l),{error:r.body.message}))}
;if(null!=d)var v=d(g,u,l);else null==c||c();function g(e){p(v,g,u,i(a({},l),{isLoading:!0}));return y({promiseFn:r,resolve:h,reject:b,code:e,mfaCodeHandler:m,isModalOpen:!0})}}function y(e){var r=e.promiseFn,t=e.resolve,n=e.reject,o=e.code,l=e.mfaCodeHandler,s=void 0===l?b:l,c=e.isModalOpen,i=void 0!==c&&c,d=u(e,["promiseFn","resolve","reject","code","mfaCodeHandler","isModalOpen"]);return r(null!=o?{code:o}:{}).then(t,(function(e){if(function(e,r){return e.body&&60008===e.body.code||r&&429===e.status}(e,i))return s(a({promiseFn:r,resolve:t,reject:n,res:e},d));n(e)}))}function m(e,r){if(n.getCurrentConfig({}).enabled)return e({});var t,l,c=null!=r?r:{},i=c.checkEnabled,d=void 0===i?null!==(l=null===(t=o.default.getCurrentUser())||void 0===t?void 0:t.mfaEnabled)&&void 0!==l&&l:i,f=u(c,["checkEnabled"]);return new Promise((function(r,t){(s(d)?b:y)(a({promiseFn:e,resolve:r,reject:t},f))}))}},988518:(e,r,t)=>{t.r(r);t.d(r,{showModal:()=>a,updateModalProps:()=>i})
;var n=t(785893),o=(t(667294),t(48509)),l=t(897576);function s(e,r,t){r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t;return e}var c=function(e,r,t){return function(l){return(0,n.jsx)(o.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));n.forEach((function(r){s(e,r,t[r])}))}return e}({handleSubmit:e,handleEarlyClose:r},t,l))}};function a(e,r,t){return(0,l.h7)(c(e,r,t))}function i(e,r,t,n){return(0,l.o)(e,c(r,t,n))}}}]);
//# sourceMappingURL=6dc2a15cea937e35374a.js.map