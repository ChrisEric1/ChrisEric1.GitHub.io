(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[54407],{707839:(e,t,n)=>{e.exports=n.p+"7d94f3993be7043f4b9131b10ca5c7d9.svg"},840008:(e,t,n)=>{e.exports=n.p+"fd134fab56c496d554b4eb36d3e92289.svg"},17589:(e,t,n)=>{e.exports=n.p+"513f881c80a414c9f58190184516189b.svg"},491373:(e,t,n)=>{e.exports=n.p+"f481c34c9e3bc1fb3afaeb2cbc23d085.png"},284549:(e,t,n)=>{e.exports=n.p+"751cd78d367cdcd9194001b6804583d3.png"},500832:(e,t,n)=>{e.exports=n.p+"6cacd5c22d17a2830e68876eecca48b2.png"},785528:(e,t,n)=>{e.exports=n.p+"693bad183292b4401b6a1bb3eab7dbe2.png"},354621:(e,t,n)=>{"use strict";n.d(t,{KV:()=>s,E$:()=>l});var r=n(940060),i=n(1477),a=n(563135);function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var s=function(e){return null==e.roles?[]:Object.values(e.roles).sort(i.W).map((function(e){return(0,i.X0)(e)}))},l=function(e,t,n){return Object.values(e.roles).filter((function(e){return(0,
i.GJ)(e)||function(e,t,n){if(null==e.id)return!1;var i=a.ZP.computePermissionsForRoles({forceRoles:o({},e.id,e),context:n});return r.Z.has(i,t)}(e,n,t)}))}},154407:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>Fs});var r=n(785893),i=n(667294),a=n(294184),o=n.n(a),s=n(781629),l=n.n(s),c=n(503528),u=n(798159),d=n(457217),f=n(247346),h=n(797186),m=n(125776),g=n(202351),p=n(418705),v=n(575945),b=n(945460),y=n(87127),O=n(341305),x=n(677681),C=n(74535),S=n(316878),j=n(773011),E=n(627342),_=n(872017),N=n(920803),T=n(582906),A=n(337710),w=n(517285),I=n(451458),M=n(536945),P=n(431611),R=n(225386),L=n(367406),Z=n(620597),D=n(804185),k=n(61209),H=n(284610),F=n(746477),U=n(255592),B=n(901654),G=n(377463),V=n(58838),z=n(76768),W=n(265367),K=n(194212),q=n(234503),Y=n(372518),X=n(866893),$=n(621862),Q=n(358969),J=n(575978),ee=n(980204);const te={useForumChannelSeenManager:function(e){var t=e.guildId,n=e.channelId,r=i.useRef(null),a=(0,J.UU)(),o=!B.Z.isFocused(a);i.useLayoutEffect((function(){
if(null==r.current){r.current=new ee.ZP({guildId:t,channelId:n,isPaused:o,windowId:a});r.current.initialize()}return function(){var e;null===(e=r.current)||void 0===e||e.terminate();r.current=null}}),[n,t,o,a]);return r.current}};var ne=n(854602),re=n(883069),ie=n(730381),ae=n.n(ie),oe=n(248088),se=n(517586),le=n(940060),ce=n(842227),ue=n(461884),de=n(296916),fe=n(1477),he=n(793998),me=n(703790),ge=n(567403),pe=n(709189),ve=n(223430),be=n(921122),ye=n(189865),Oe=n(386991),xe=n(824456),Ce=n(786170);function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}
}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ee={mass:1,tension:250,friction:18,clamp:!0},_e=n(696047),Ne=n(2590),Te=n(473708),Ae=n(530149),we=n.n(Ae),Ie=n(491373),Me=n.n(Ie),Pe=n(284549),Re=n.n(Pe),Le=n(500832),Ze=n.n(Le),De=n(785528),ke=n.n(De);function He(e){var t=e.handleHide;return(0,r.jsx)(b.Clickable,{onClick:t,className:we().closeButton,"aria-label":Te.Z.Messages.DISMISS,children:(0,r.jsx)(ye.Z,{className:we().closeIcon})})}function Fe(e){
var t=e.username,n=e.title,i=e.videoSrc,a=e.messageCount,s=e.reaction,l=e.reactionCount,c=e.classname;return(0,r.jsxs)("div",{className:o()(we().videoPreview,c),children:[(0,r.jsx)("div",{className:we().authorRow,children:(0,r.jsxs)("div",{className:we().rowGroup,children:[(0,r.jsx)(b.Text,{tag:"span",className:we().author,variant:"text-sm/semibold",children:t}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"header-secondary",className:we().postCreationTimestamp,children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_TIMESTAMP})]})}),(0,r.jsx)(b.Heading,{variant:"heading-md/extrabold",className:we().title,color:"header-primary","aria-hidden":!0,children:n}),(0,r.jsx)(ve.Z,{size:10}),(0,r.jsx)(Ce.Z,{className:we().video,src:i,autoPlay:!0,loop:!0,muted:!0}),(0,r.jsx)(ve.Z,{size:10}),(0,r.jsx)("div",{className:we().footer,children:(0,r.jsxs)("div",{className:we().forumPostControls,children:[(0,r.jsxs)("div",{className:we().messageCountBox,children:[(0,r.jsx)("span",{
className:we().messageCountIcon,children:(0,r.jsx)(be.Z,{width:16,height:16})}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"interactive-normal",children:a})]}),(0,r.jsxs)("div",{className:we().reactionBox,children:[(0,r.jsx)("span",{role:"img","aria-label":"",children:s}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"interactive-normal",children:l})]})]})})]})}const Ue=function(e){var t=e.channel,n=(0,C.ZP)(),a=(0,v.wj)(n),s=(0,g.e7)([ge.Z],(function(){return ge.Z.getGuild(t.guild_id)})),l=(0,g.e7)([S.Z],(function(){return S.Z.useReducedMotion})),c=(0,g.e7)([q.Z],(function(){return q.Z.hasHidden(t.id)})),u=function(e){var t=je(i.useState(!0),2),n=t[0],r=t[1],a=(0,oe.useTransition)(n,{keys:function(e){return e?"shown":"hidden"},config:Ee,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0,immediate:e});return{transitions:a,setVisible:r}}(l),d=u.transitions,f=u.setVisible,h=i.useCallback((function(){f(!1);Y.Z.hideAdminOnboarding(t.id,!0)}),[t,f])
;i.useEffect((function(){(0,he.c)(t.id)||f(!c)}),[t,f,c]);var m,p=i.useMemo((function(){return[Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_BEHIND_THE_SCENES_TAG,Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_EXCLUSIVE_ART_TAG,Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PRERELEASES_TAG,Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_TUTORIALS_TAG]}),[]),y=function(){me.Z.open(t.guild_id,Ne.pNK.ROLE_SUBSCRIPTIONS)},O=null!==(m=null==s?void 0:s.hasFeature(Ne.oNc.ROLE_SUBSCRIPTIONS_AVAILABLE_FOR_PURCHASE))&&void 0!==m&&m?Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_HAS_TIERS_CTA:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_NO_TIERS_CTA;return(0,r.jsx)(r.Fragment,{children:d((function(e,t){return t?(0,r.jsxs)(oe.animated.div,{style:e,className:we().container,children:[(0,r.jsxs)("div",{className:o()(we().wrapper,we().headerRow),children:[(0,r.jsxs)(b.Text,{variant:"text-xs/normal",className:we().visibilityInfo,children:[(0,r.jsx)(Oe.Z,{width:12,height:12,className:we().icon
}),Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_VISIBILITY]}),(0,r.jsx)(He,{handleHide:h})]}),(0,r.jsxs)("div",{className:we().contentContainer,children:[(0,r.jsxs)("div",{className:o()(we().contentRow,we().contentRowOne),children:[(0,r.jsx)("div",{className:o()(we().contentMediaContainer),children:(0,r.jsxs)("div",{className:we().contentImageContainer,children:[(0,r.jsx)("img",{src:a?Ze():ke(),alt:"",className:o()(we().previewEmbedImage,we().secondaryImage)}),(0,r.jsx)("img",{src:a?Me():Re(),alt:"",className:we().previewEmbedImage})]})}),(0,r.jsxs)("article",{className:we().contentTextContainer,children:[(0,r.jsxs)(b.Text,{variant:"text-xxs/bold",className:we().serverSubPill,children:[Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_SERVER_SUB_PILL," ",(0,r.jsx)("span",{role:"img","aria-label":"",children:"ðŸ”¥"})]}),(0,r.jsx)(ve.Z,{size:10}),(0,r.jsx)(b.Heading,{variant:"heading-lg/semibold",color:"header-primary",children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_SHARE_TITLE}),(0,r.jsx)(ve.Z,{size:8
}),(0,r.jsx)(b.Text,{variant:"text-md/normal",color:"text-muted",children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_SHARE_SUBTITLE}),(0,r.jsx)(ve.Z,{size:24}),(0,r.jsx)(pe.C,{size:b.Button.Sizes.MEDIUM,pauseAnimation:l,onClick:y,className:we().addChannelButton,color:b.Button.Colors.CUSTOM,children:O})]})]}),(0,r.jsxs)("div",{className:o()(we().contentRow,we().contentRowTwo),children:[(0,r.jsx)("div",{className:o()(we().contentMediaContainer),children:(0,r.jsxs)("div",{className:we().contentVideoContainer,children:[(0,r.jsx)(Fe,{username:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_USERNAME_ONE,videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_discord_birthday.mp4",title:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_TITLE_ONE,messageCount:"34",reaction:"âš¡ï¸",reactionCount:"724",classname:we().backgroundVideo}),(0,r.jsx)(Fe,{username:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_USERNAME_TWO,
videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_wumpus_onboarding.mp4",title:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_TITLE_TWO,messageCount:"34",reactionCount:"84",reaction:"ðŸ’ž",classname:o()(we().backgroundVideo,we().secondaryVideo)}),(0,r.jsx)(Fe,{username:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_USERNAME_THREE,videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_scientist_wumpus.mp4",title:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_PREVIEW_TITLE_THREE,messageCount:"7,103",reaction:"âš¡ï¸",reactionCount:"724",classname:we().highlightVideo})]})}),(0,r.jsxs)("article",{className:we().contentTextContainer,children:[(0,r.jsx)(b.Heading,{variant:"heading-lg/semibold",color:"header-primary",children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_HELP_TITLE}),(0,r.jsx)(ve.Z,{size:8}),(0,r.jsx)(b.Text,{variant:"text-md/normal",color:"text-muted",children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_HELP_SUBTITLE}),(0,r.jsx)(ve.Z,{size:16}),(0,
r.jsxs)(b.Clickable,{onClick:function(){return open(_e.S)},className:we().helpCenterLink,children:[(0,r.jsx)(b.Text,{variant:"text-sm/medium",color:"text-link",className:we().helpCenterLinkText,children:Te.Z.Messages.MEDIA_POST_ADMIN_EDUCATION_HELP_CENTER}),(0,r.jsx)(xe.Z,{width:16,height:16,className:we().helpCenterLinkIcon})]}),(0,r.jsx)(ve.Z,{size:16}),(0,r.jsx)("div",{className:we().mediaChannelTagsContainer,children:p.map((function(e){return(0,r.jsx)(b.Text,{variant:"text-sm/medium",color:"text-normal",className:we().mediaChannelTag,children:e},e)}))})]})]})]})]}):null}))})};var Be=n(621329),Ge=n(633878);function Ve(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ze(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function We(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Ke(e){var t=e.width,n=void 0===t?16:t,i=e.height,a=void 0===i?16:i,o=e.color,s=void 0===o?"currentColor":o,l=e.foreground,c=We(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",ze(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ve(e,t,n[t])}))}return e}({},(0,Ge.Z)(c)),{width:n,height:a,viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{className:l,fill:s,d:"M6.78802 8.60547H2.54555C2.211 8.60547 1.93949 8.87699 1.93949 9.21154C1.93949 9.54608 2.211 9.8176 2.54555 9.8176H5.32498L1.511 13.6316C1.27433 13.8682 1.27433 14.2519 1.511 14.4886C1.62918 14.607 1.78433 14.6661 1.93949 14.6661C2.09464 14.6661 2.24979 14.607 2.36798 14.4886L6.18195 10.6746V13.454C6.18195 13.7886 6.45347 14.0601 6.78802 14.0601C7.12257 14.0601 7.39409 13.7886 7.39409 13.454V9.21154C7.39409 8.87699 7.12257 8.60547 6.78802 8.60547Z"}),(0,r.jsx)("path",{className:l,fill:s,
d:"M14.4891 1.50953C14.2524 1.27286 13.8687 1.27286 13.6321 1.50953L9.81809 5.32351V2.54409C9.81809 2.20954 9.54657 1.93802 9.21202 1.93802C8.87748 1.93802 8.60596 2.20954 8.60596 2.54409V6.78655C8.60596 7.1211 8.87748 7.39262 9.21202 7.39262H13.4545C13.789 7.39262 14.0606 7.1211 14.0606 6.78655C14.0606 6.45201 13.789 6.18049 13.4545 6.18049H10.6751L14.4891 2.36651C14.7257 2.12984 14.7257 1.7462 14.4891 1.50953Z"})]}))}function qe(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ye(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e
}function Xe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function $e(e){var t=e.width,n=void 0===t?16:t,i=e.height,a=void 0===i?16:i,o=e.color,s=void 0===o?"currentColor":o,l=e.foreground,c=Xe(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",Ye(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){qe(e,t,n[t])}))}return e}({},(0,Ge.Z)(c)),{width:n,height:a,viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{
className:l,fill:s,d:"M1.93944 14.6655H6.18191C6.51646 14.6655 6.78797 14.394 6.78797 14.0594C6.78797 13.7249 6.51646 13.4534 6.18191 13.4534H3.40249L7.21646 9.63937C7.45313 9.40271 7.45313 9.01906 7.21646 8.7824C7.09828 8.66391 6.94313 8.60482 6.78797 8.60482C6.63282 8.60482 6.47767 8.66391 6.35948 8.7824L2.54551 12.5964V9.81695C2.54551 9.4824 2.27399 9.21089 1.93944 9.21089C1.60489 9.21089 1.33337 9.4824 1.33337 9.81695V14.0594C1.33337 14.394 1.60489 14.6655 1.93944 14.6655Z"}),(0,r.jsx)("path",{className:l,fill:s,d:"M8.78362 7.21512C9.02029 7.45179 9.40393 7.45179 9.6406 7.21512L13.4546 3.40114V6.18056C13.4546 6.51511 13.7261 6.78663 14.0606 6.78663C14.3952 6.78663 14.6667 6.51511 14.6667 6.18056V1.9381C14.6667 1.60355 14.3952 1.33203 14.0606 1.33203L9.81818 1.33203C9.48363 1.33203 9.21211 1.60355 9.21211 1.9381C9.21211 2.27265 9.48363 2.54416 9.81818 2.54416H12.5976L8.78362 6.35814C8.54695 6.59481 8.54695 6.97845 8.78362 7.21512Z"})]}))}
var Qe=n(748322),Je=n(136317),et=n(531441),tt=n(930948),nt=n(354621),rt=n(143901),it=n(465637),at=n(540365),ot=n.n(at);function st(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){st(a,r,i,o,s,"next",e)}function s(e){st(a,r,i,o,s,"throw",e)}o(void 0)}))}}function ct(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ut(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))
}));return e}var dt=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0
}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function ft(e){var t=e.channelName,a=e.guildId,o=e.tagFilter,s=e.channel,l=(0,Q.r_)(s),c=(0,R.cD)(s),u=s.isMediaChannel(),d=i.useCallback((function(){(0,ne.qz)();(0,b.openModalLazy)(lt((function(){var e,t;return dt(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(74562)]).then(n.bind(n,274562))];case 1:e=i.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,ut(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){ct(e,t,n[t])}))}return e}({},e),{guildId:a}))}]}}))})))}),[a]),f=o.size>0,h=c||l,m=!f&&l&&!u,g=i.useCallback((function(){return m?d():c?void tt.S.dispatch(Ne.CkL.FOCUS_COMPOSER_TITLE):(0,Ne.VqG)()}),[d,m,c])
;return(0,r.jsxs)("div",{className:ot().container,children:[(0,r.jsxs)("div",{className:ot().iconContainer,children:[(0,r.jsx)("div",{className:ot().icon,children:(0,r.jsx)(rt.Z,{width:30,height:30})}),(0,r.jsx)(it.Z,{className:ot().stars})]}),(0,r.jsx)(b.Heading,{className:ot().header,variant:"heading-md/semibold",children:f?Te.Z.Messages.FORUM_NO_POST_WITH_TAG_TITLE.format({numTags:o.size}):Te.Z.Messages.FORUM_EMPTY_STATE_TITLE}),(0,r.jsx)(b.Text,{color:"header-secondary",variant:"text-sm/normal",children:f?Te.Z.Messages.FORUM_NO_POST_WITH_TAG_DESCRIPTION.format({numTags:o.size}):Te.Z.Messages.FORUM_EMPTY_STATE_DESCRIPTION.format({channelName:t})}),h&&(0,r.jsxs)(b.Button,{look:b.Button.Looks.BLANK,size:b.Button.Sizes.MIN,color:b.Button.Colors.GREEN,onClick:g,className:ot().cta,innerClassName:ot().button,children:[m?Te.Z.Messages.FORUM_EMPTY_STATE_CTA:Te.Z.Messages.FORUM_EMPTY_STATE_CREATE_POST_CTA,(0,r.jsx)(Je.Z,{width:12})]})]})}var ht=n(503871),mt=n(508778),gt=n(183408),pt=n.n(gt)
;function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function yt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){bt(a,r,i,o,s,"next",e)}function s(e){bt(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Ot(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ot(e,t,n[t])}))}return e}function Ct(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jt=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,
i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Et={width:28,height:28},_t={width:20,height:20,borderRadius:10},Nt=function(e){(0,ne.e5)({onboardingCTA:e})},Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.currentIndex=0;this.steps=[];this.completedSteps=0}var t=e.prototype;t.addStep=function(e){++this.currentIndex;this.steps.push(xt({index:this.currentIndex},e));e.isDone&&this.completedSteps++};t.getSteps=function(){return this.steps};t.isAllDone=function(){return this.steps.every((function(e){return e.isDone}))};return e}(),At=function(e,t,a,o){
return i.useMemo((function(){var i=new Tt,s=!0===(null==t?void 0:t.isMediaChannel());null==e||null==t||s||i.addStep(function(e,t,i){var a=(0,de.Z)(t)?le.Z.combine(Ne.Plq.VIEW_CHANNEL,Ne.Plq.SEND_MESSAGES):Ne.Plq.SEND_MESSAGES,o=null!=e?(0,nt.E$)(e,t,a).filter((function(n){return t.permissionOverwrites.hasOwnProperty(n.id)||(0,fe.pM)(e.id,n.id)})):[],s=o.length>0,l=o.some((function(t){return(0,fe.pM)(e.id,t.id)}));return{name:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_TITLE,description:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_PERMISSION_DESCRIPTION,isDone:s&&l,shouldWarn:s&&!l,children:s?(0,r.jsx)(wt,{guild:e,roles:o}):null,clickHandler:function(){Nt(mt.ZI.PERMISSIONS);(0,b.openModalLazy)(yt((function(){var s,l;return jt(this,(function(c){switch(c.label){case 0:return[4,Promise.all([n.e(40532),n.e(43470)]).then(n.bind(n,843470))];case 1:s=c.sent(),l=s.default;i(!0);return[2,function(n){return(0,r.jsx)(l,Ct(xt({},n),{channel:t,guild:e,permission:a,
currentSelectedRoles:o}))}]}}))})),{modalKey:"SEND_MESSAGE_ROLE_PERMISSION_FIX_MODAL_KEY",onCloseRequest:Ne.VqG,onCloseCallback:function(){return i(!1)}})}}}(e,t,o));s||i.addStep(function(e){var t=null!=e.topic&&e.topic.length>0;return{name:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_TITLE,description:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_GUIDELINES_DESCRIPTION,clickHandler:function(){Nt(mt.ZI.GUIDELINES);y.ZP.open(e.id,void 0,Ne.ZfP.TOPIC)},isDone:t}}(t));i.addStep(function(e){var t=null!=e.availableTags&&e.availableTags.length>0;return{name:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_TAGS_TITLE,description:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_TAGS_DESCRIPTION,clickHandler:function(){Nt(mt.ZI.TAGS);y.ZP.open(e.id);(0,b.openModalLazy)(yt((function(){var t,i;return jt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(62389)]).then(n.bind(n,762389))];case 1:t=a.sent(),i=t.default;return[2,function(t){return(0,
r.jsx)(i,Ct(xt({},t),{channelId:e.id,guildId:e.guild_id}))}]}}))})))},isDone:t}}(t));i.addStep(function(e){var t=null!=e.defaultReactionEmoji;return{name:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_DEFAULT_REACTION_TITLE,description:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_DEFAULT_REACTION_DESCRIPTION,clickHandler:function(){Nt(mt.ZI.DEFAULT_REACTION);(0,b.openModalLazy)(yt((function(){var t,i;return jt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(19595)]).then(n.bind(n,119595))];case 1:t=a.sent(),i=t.default;return[2,function(t){return(0,r.jsx)(i,Ct(xt({},t),{channel:e}))}]}}))})))},isDone:t}}(t));i.addStep(function(e,t,i){return{name:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_TITLE,description:t?Te.Z.Messages.MEDIA_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_DESCRIPTION:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_CHECKLIST_FIRST_POST_DESCRIPTION.format({onClick:function(e){if(null!=i){e.preventDefault();e.stopPropagation();(0,
ne.qz)();(0,b.openModalLazy)(yt((function(){var e,t;return jt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(74562)]).then(n.bind(n,274562))];case 1:e=a.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,Ct(xt({},e),{guildId:i}))}]}}))})))}}}),clickHandler:function(){Nt(mt.ZI.CREATE_POST);tt.S.dispatch(Ne.CkL.FOCUS_COMPOSER_TITLE)},isDone:e}}(a,s,null==e?void 0:e.id));return i}),[t,e,a,o])},wt=function(e){var t=e.guild,n=e.roles;return(0,r.jsx)("div",{className:pt().rolesList,"aria-label":Te.Z.Messages.ROLES_LIST.format({numRoles:n.length}),children:n.map((function(e){return(0,r.jsx)(ue.U,{role:e,canRemove:!1,onRemove:Ne.VqG,guildId:t.id,className:pt().rolePill},e.id)}))})},It={mass:1,tension:250,friction:18,clamp:!0},Mt=function(e){var t,n,r=e.guild,a=e.channel,o=e.hasAnyThread,s=e.handleHide,l=St(i.useState(!1),2),c=l[0],u=l[1],d=(0,he.c)(a.id),f=(0,g.e7)([q.Z],(function(){return q.Z.hasHidden(a.id)})),h=At(r,a,o,u),m=h.isAllDone()
;!function(e,t,n,r){var a=i.useRef(0);i.useEffect((function(){n||!e||t?clearTimeout(a.current):a.current=setTimeout((function(){r()}),6e4);return function(){return clearTimeout(a.current)}}),[e,t,r,n])}(m,d||f||!(t=a.id,n=ce.default.extractTimestamp(t),ae()().isBefore(ae()(n).add(ae().duration(15,"days")))),c,s);return{onboardingSteps:h,isHidden:f,isDismissed:d,isAllDone:m}},Pt=function(e){var t=e.handleHide;return(0,r.jsx)(b.Clickable,{onClick:t,className:pt().closeButton,"aria-label":Te.Z.Messages.DISMISS,children:(0,r.jsx)(ye.Z,{className:pt().closeIcon})})},Rt=function(e){var t=e.expanded,n=e.onClick;return(0,r.jsx)(b.Clickable,{onClick:n,className:pt().closeButton,"aria-label":t?Te.Z.Messages.COLLAPSE:Te.Z.Messages.EXPAND,children:t?(0,r.jsx)(Ke,{className:pt().closeIcon}):(0,r.jsx)($e,{className:pt().closeIcon})})};const Lt=function(e){var t=e.hasAnyThread,n=e.channel,a=(0,ht.xH)((function(e){return{onboardingExpanded:e.onboardingExpanded}})),s=a.onboardingExpanded,l=(0,
$.H)(n.id).tagFilter,c=(0,g.e7)([ge.Z],(function(){return ge.Z.getGuild(n.getGuildId())})),u=(0,Q.r_)(n),d=function(){var e=St(i.useState(!0),2),t=e[0],n=e[1],r=(0,g.e7)([S.Z],(function(){return S.Z.useReducedMotion})),a=(0,oe.useTransition)(t,{keys:function(e){return e?"shown":"hidden"},config:It,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0,immediate:r});return{transitions:a,setVisible:n}}(),f=d.transitions,h=d.setVisible,m=function(e){var t=(0,g.e7)([S.Z],(function(){return S.Z.useReducedMotion}));return(0,oe.useTransition)(e,{from:{maxHeight:0},enter:{maxHeight:500},leave:{maxHeight:0},config:{duration:200},immediate:t})}(s),p=i.useCallback((function(e){var t;null===(t=e.clickHandler)||void 0===t||t.call(e)}),[]),v=function(e,t){return i.useCallback((function(){t(!1);return Y.Z.hideAdminOnboarding(e,!0)}),[e,t])}(n.id,h),y=Mt({guild:c,channel:n,hasAnyThread:t,handleHide:v}),O=y.onboardingSteps,x=y.isDismissed,C=y.isHidden,j=y.isAllDone,E=!C&&!x,_=(0,
ht.AF)(),N=n.isMediaChannel(),T=function(e){return _.getState().setOnboardingExpanded(e)};!function(e,t,n){i.useEffect((function(){e&&t&&n()}),[])}(j,E,v);!function(e){var t=e.isAllDone,n=e.isVisible,r=e.canManageChannel,a=e.guild,o=e.channel,s=i.useCallback((function(){tt.S.dispatch(Ne.CkL.REMEASURE_TARGET)}),[]);i.useEffect((function(){s()}),[s,t,n,r,null==a?void 0:a.roles,o.id,o.permissionOverwrites])}({isAllDone:j,isVisible:E,canManageChannel:u,guild:c,channel:n});!function(e,t,n){i.useEffect((function(){e||n(!t)}),[e,n,t])}(x,C,h);i.useEffect((function(){t&&E||T(!0)}),[]);return null==c?null:E&&u?N?t?null:(0,r.jsx)(Ue,{channel:n}):(0,r.jsx)(r.Fragment,{children:f((function(e,t){return t?(0,r.jsx)(oe.animated.div,{style:e,className:pt().container,children:(0,r.jsxs)("div",{className:pt().wrapper,children:[(0,r.jsx)("div",{className:pt().headerRow,children:(0,r.jsxs)(b.HeadingLevel,{component:(0,r.jsx)(b.Heading,{variant:"heading-md/semibold",children:Te.Z.Messages.GET_STARTED}),
children:[(0,r.jsx)(b.Heading,{variant:"heading-md/medium",className:pt().header,children:Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_COMPLETED_COUNT.format({numCompleted:O.completedSteps.toString(),numSteps:O.steps.length.toString()})}),(0,r.jsxs)(b.Text,{variant:"text-xs/normal",className:pt().visibilityInfo,children:[(0,r.jsx)(Oe.Z,{width:12,height:12,className:pt().icon}),Te.Z.Messages.FORUM_CHANNEL_ONBOARDING_VISIBILITY]}),(0,r.jsx)(Rt,{expanded:s,onClick:function(){return T(!s)}}),(0,r.jsx)(Pt,{handleHide:v})]})}),m((function(e,t){return t?(0,r.jsx)(oe.animated.div,{style:e,className:pt().listContainer,children:(0,r.jsx)("ol",{className:pt().checklist,children:O.getSteps().map((function(e){return(0,r.jsxs)(b.Clickable,{tag:"li","aria-label":e.name,onClick:function(){return p(e)},className:o()(pt().stepContainer,Ot({},pt().completed,e.isDone)),children:[e.shouldWarn?(0,r.jsx)(W.Z,{color:se.Z.STATUS_DANGER,className:pt().stepStatus}):e.isDone?(0,r.jsx)(et.G2,{
color:se.Z.STATUS_POSITIVE_BACKGROUND,icon:Be.Z,style:_t,className:pt().stepStatus}):(0,r.jsx)(et.G2,{disableColor:!0,icon:Qe.Z,style:Et,className:o()(pt().stepStatus,pt().completed)}),(0,r.jsxs)("div",{className:pt().step,children:[(0,r.jsx)(b.Text,{variant:"text-md/medium",color:e.isDone?"header-secondary":"header-primary",className:pt().stepName,children:e.name}),(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"header-secondary",className:pt().stepDescription,children:e.description}),e.children]}),(0,r.jsx)(Je.Z,{width:12,className:pt().stepStatus})]},"onboard-step-".concat(e.index))}))})}):null}))]})}):null}))}):t?null:(0,r.jsx)(ft,{channelName:n.name,guildId:n.guild_id,tagFilter:l,channel:n})};var Zt=n(883064),Dt=n(120491),kt=n(472034),Ht=n(325326),Ft=n.n(Ht),Ut=n(913198),Bt=n.n(Ut);function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vt(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}
s.done?t(l):Promise.resolve(l).then(r,i)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Vt(a,r,i,o,s,"next",e)}function s(e){Vt(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Wt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Kt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){
var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yt=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){
if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const Xt=i.memo((function(e){var t=e.channel,a=e.onChange,s=(0,ht.AF)(),l=(0,ht.xH)((function(e){return{guidelinesOpen:e.guidelinesOpen}})).guidelinesOpen,c=(0,
Q.r_)(t),u=qt(i.useState(!1),2),d=u[0],f=u[1],h=i.useCallback((function(e){if(null!=e){var t=e.clientHeight>=220;t!==d&&f(t)}}),[d]);i.useLayoutEffect((function(){setTimeout(a,350)}),[l,a]);var m=(0,g.e7)([S.Z],(function(){return S.Z.useReducedMotion})),p=qt(i.useState(!l),2),v=p[0],O=p[1],x=(0,oe.useSpring)({opacity:l?1:0,maxHeight:l?500:0,config:{duration:300},immediate:m,onRest:function(){return O(!l)}});return null!=t.topic&&t.topic.length>0?(0,r.jsx)(oe.animated.div,{style:x,className:v?Ft().hiddenVisually:void 0,children:(0,r.jsxs)("div",{className:Ft().container,children:[(0,r.jsxs)("div",{className:Ft().headerContainer,children:[(0,r.jsxs)(b.Heading,{variant:"heading-lg/semibold",className:Ft().guidelinesHeader,children:[(0,r.jsx)(Dt.Z,{width:20,height:20}),Te.Z.Messages.FORUM_POST_GUIDELINES_TITLE,c&&(0,r.jsx)(b.Clickable,{onClick:function(){y.ZP.open(t.id,void 0,Ne.ZfP.TOPIC)},tag:"span",className:Ft().clickable,children:(0,r.jsx)(kt.Z,{width:16,height:16})})]}),(0,
r.jsx)(b.Clickable,{"aria-label":Te.Z.Messages.CLOSE,className:Ft().clickable,onClick:function(){s.getState().setGuidelinesOpen(!1)},children:(0,r.jsx)(ye.Z,{width:16,height:16})})]}),(0,r.jsxs)("div",{className:Ft().descriptionContainer,children:[(0,r.jsx)(b.Text,{selectable:!0,variant:"text-sm/normal",color:"header-secondary",style:{maxHeight:220},className:o()(Ft().guidelines,Bt().markup),children:(0,r.jsx)("div",{ref:h,children:Zt.Z.parseForumPostGuidelines(t.topic,!0,{channelId:t.id,allowHeading:!0,allowList:!0})})}),d&&(0,r.jsxs)("div",{className:Ft().showMore,children:[(0,r.jsx)("div",{className:Ft().gradient}),(0,r.jsx)("div",{className:Ft().linkContainer,children:(0,r.jsx)(b.Clickable,{className:Ft().showMoreLink,onClick:function(){(0,b.openModalLazy)(zt((function(){var e,i;return Yt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(51691)]).then(n.bind(n,551691))];case 1:e=a.sent(),i=e.default;return[2,function(e){return(0,r.jsx)(i,Kt(function(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Wt(e,t,n[t])}))}return e}({},e),{channel:t}))}]}}))})))},children:(0,r.jsxs)(b.Text,{variant:"text-sm/semibold",color:"text-brand",className:Ft().showMoreText,children:[Te.Z.Messages.FORUM_CHANNEL_TOPIC_VIEW_ALL,(0,r.jsx)($e,{className:Ft().showMoreIcon})]})})})]})]})]})}):null}));var $t=n(336117),Qt=n(895724),Jt=n(219785),en=n(458947),tn=n(681018),nn=n.n(tn),rn=n(48909),an=n.n(rn),on=n(384803),sn=n.n(on),ln=n(17589),cn=n.n(ln);function un(e){var t=e.onDismiss;return(0,r.jsxs)(b.Clickable,{onClick:function(){open(mt.V8);(0,ne.GX)({readGuideCta:!0})},className:o()(sn().container,an().container,nn().mainCard),children:[(0,r.jsxs)("div",{className:an().inline,children:[(0,r.jsxs)("div",{
className:an().author,children:[(0,r.jsx)($t.Z,{className:an().discordIcon}),(0,r.jsx)(b.Text,{variant:"text-sm/semibold",color:"header-primary",children:Te.Z.Messages.DISCORD_NAME}),(0,r.jsxs)("div",{className:an().notice,children:[(0,r.jsx)(Qt.Z,{className:an().infoIcon}),(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"header-secondary",children:Te.Z.Messages.FORUM_HELPER_CARD_NOTICE})]})]}),(0,r.jsx)(b.Clickable,{onClick:function(e){e.stopPropagation();t(en.L.DISMISS);(0,ne.GX)({readGuideCta:!1})},children:(0,r.jsx)(ye.Z,{className:an().closeIcon,width:16,height:16})})]}),(0,r.jsx)("hr",{className:an().separator}),(0,r.jsxs)("div",{className:an().inline,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b.Heading,{className:o()(sn().channelName,an().title),variant:"heading-lg/semibold",color:"header-primary",children:Te.Z.Messages.FORUM_HELPER_CARD_TITLE}),(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"header-secondary",children:Te.Z.Messages.FORUM_HELPER_CARD_BODY})]}),(0,
r.jsx)("img",{src:cn(),alt:Te.Z.Messages.FORUM_HELPER_CARD_ALT_TEXT,width:Jt.TJ,height:Jt.TJ})]})]})}var dn=n(441143),fn=n.n(dn),hn=n(943469),mn=n(567867),gn=n(281808),pn=n(58495),vn=n(656823),bn=n(510472),yn=n(73948),On=n(318715),xn=n(974771);var Cn=n(873506),Sn=n(115549),jn=n(557617);function En(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function _n(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Nn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){
n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Tn(e){var t=e.width,n=void 0===t?24:t,i=e.height,a=void 0===i?24:i,o=e.color,s=void 0===o?"currentColor":o,l=e.foreground,c=Nn(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",_n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){En(e,t,n[t])}))}return e}({},(0,Ge.Z)(c)),{width:n,height:a,viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",className:l,
d:"M13.2899 2H6C3.79086 2 2 3.79086 2 6V18C2 20.2091 3.79086 22 6 22H18C20.2091 22 22 20.2091 22 18V10.7101C21.3663 10.8987 20.695 11 20 11C16.134 11 13 7.86599 13 4C13 3.30503 13.1013 2.63371 13.2899 2ZM8 6C9.1032 6 10 6.8952 10 8C10 9.1056 9.1032 10 8 10C6.8944 10 6 9.1056 6 8C6 6.8952 6.8944 6 8 6ZM6 18L9 14L11 16L15 11L18 18H6Z",fill:s}),(0,r.jsx)("path",{d:"M21 0V3H24V5H21V8H19V5H16V3H19V0H21Z",fill:s})]}))}var An=n(15084),wn=n(949984),In=n.n(wn);function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return
;if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Rn={scale:.95,opacity:0},Ln={scale:1,opacity:1},Zn={scale:1,opacity:1},Dn={tension:2400,friction:52};function kn(e){var t=e.channelId,n=e.onClick,a=e.onClose,o=e.onMouseEnter,s=i.useRef(null),l=(0,g.e7)([k.Z],(function(){return k.Z.getChannel(t)}),[t]);fn()(null!=l,"Forum Channel is null");return(0,r.jsxs)(b.Clickable,{className:In().uploadInput,onMouseEnter:o,onClick:function(){(0,ne.N3)({isMobile:!1});null==n||n()},children:[(0,r.jsx)(jn.Z,{className:In().fileInput,ref:s,onChange:function(e){null==a||a();(0,
An.d)(e.currentTarget.files,l,H.d.FirstThreadMessage,{requireConfirm:!0});tt.S.dispatch(Ne.CkL.TEXTAREA_FOCUS);e.currentTarget.value=null},multiple:l.rateLimitPerUser<=0,tabIndex:-1,"aria-hidden":!0}),(0,r.jsx)(Tn,{width:28,height:28,className:In().uploadIcon})]})}function Hn(e){var t=e.channelId,n=e.closePopout,a=Pn(i.useState(!1),2),o=a[0],s=a[1],l=i.useContext(b.AccessibilityPreferencesContext).reducedMotion,c=(0,oe.useSpring)({from:l.enabled?Ln:Rn,to:Zn,config:Dn}),u=(0,g.e7)([S.Z],(function(){return S.Z.keyboardModeEnabled})),d=(0,g.e7)([U.Z],(function(){return U.Z.getUploads(t,gn.I.CREATE_FORUM_POST.drafts.type)}));return(0,r.jsx)(oe.animated.div,{className:In().popoutContainer,onMouseLeave:function(){o||n()},style:c,children:(0,r.jsxs)(b.ScrollerThin,{orientation:"horizontal",className:In().popout,paddingFix:!1,fade:!0,children:[(0,r.jsx)(kn,{channelId:t,onClick:function(){s(!0)},onClose:function(){s(!1);n()}}),(0,r.jsx)("div",{className:In().uploads,children:d.map((function(e){
return(0,r.jsx)(Sn.Z,{channelId:t,draftType:gn.I.CREATE_FORUM_POST.drafts.type,upload:e,keyboardModeEnabled:u,hideFileName:!0,size:Cn.q.SMALL},e.id)}))})]})})}function Fn(e){var t=e.channelId,n=Pn(i.useState(!1),2),a=n[0],o=n[1],s=(0,g.e7)([U.Z],(function(){return U.Z.getUploads(t,gn.I.CREATE_FORUM_POST.drafts.type)})),l=s.length,c=l>0;i.useEffect((function(){a&&!c&&o(!1)}),[a,c]);var u=function(){c&&o(!0)};return(0,r.jsxs)("div",{className:In().container,children:[c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Sn.r,{upload:s[0],size:Cn.q.SMALL,onMouseEnter:u}),!a&&(0,r.jsx)("div",{className:In().badge,children:l})]}):(0,r.jsx)(kn,{onMouseEnter:u,channelId:t}),a&&(0,r.jsx)(Hn,{channelId:t,closePopout:function(){o(!1)}})]})}var Un=n(568384),Bn=n.n(Un);function Gn(e){var t=e.parentChannel,n=(0,On.ZP)([U.Z],(function(){return U.Z.getUploads(t.id,gn.I.CREATE_FORUM_POST.drafts.type)}));return(0,r.jsxs)("div",{className:Bn().container,children:[(0,r.jsx)(b.Text,{variant:"text-md/semibold",
color:"text-muted",children:Te.Z.Messages.MEDIA_CHANNEL_ATTACHMENTS_SECTION_TITLE}),(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"text-muted",children:Te.Z.Messages.MEDIA_CHANNEL_ATTACHMENTS_SECTION_DESCRIPTION}),(0,r.jsx)("div",{children:(0,r.jsx)(b.ScrollerThin,{className:Bn().uploadsContainer,orientation:"horizontal",paddingFix:!1,fade:!0,children:(0,r.jsxs)("div",{className:Bn().uploads,children:[n.map((function(e){return(0,r.jsx)(Sn.Z,{channelId:t.id,draftType:gn.I.CREATE_FORUM_POST.drafts.type,upload:e,keyboardModeEnabled:!0,hideFileName:!0,size:Cn.q.SMALL},e.id)})),(0,r.jsx)(kn,{channelId:t.id})]})})})]})}function Vn(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function zn(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
;t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Wn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Kn(e){var t=e.width,n=void 0===t?39:t,i=e.height,a=void 0===i?27:i,o=e.color,s=void 0===o?"currentColor":o,l=e.foreground,c=Wn(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",zn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Vn(e,t,n[t])}))}return e}({},(0,Ge.Z)(c)),{width:n,height:a,viewBox:"0 0 39 27",fill:s,children:[(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",className:l,d:"M26.4909 2.76514H5.78906C3.20886 2.76514 1.11719 4.79342 1.11719 7.29544V20.8863C1.11719 23.3884 3.20886 25.4167 5.78906 25.4167H31.9922C34.5724 25.4167 36.6641 23.3884 36.6641 20.8863V12.63C35.9239 12.8436 35.1398 12.9583 34.3281 12.9583C29.8128 12.9583 26.1523 9.40882 26.1523 5.03029C26.1523 4.24318 26.2706 3.48286 26.4909 2.76514ZM13 7.29544C14.2885 7.29544 15.3359 8.30932 15.3359 9.56059C15.3359 10.8128 14.2885 11.8257 13 11.8257C11.7087 11.8257 10.6641 10.8128 10.6641 9.56059C10.6641 8.30932 11.7087 7.29544 13 7.29544ZM10.6641 20.8863L14.168 16.356L16.5039 18.6212L21.1758 12.9583L24.6797 20.8863H17.6719H10.6641Z",
fill:s}),(0,r.jsx)("path",{d:"M35.4961 0.5V3.89773H39V6.16288H35.4961V9.56061H33.1602V6.16288H29.6562V3.89773H33.1602V0.5H35.4961Z",fill:s})]}))}var qn=n(496486),Yn=n(585622),Xn=n(449353);function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qn(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var er=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,
i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function tr(e,t){var n=Jn(i.useState(null),2),r=n[0],a=n[1],o=Jn(i.useState(null),2),s=o[0],l=o[1],c=i.useMemo((function(){return qn.debounce((t=(e=function(e,t,n){var r,i,o;return er(this,(function(s){switch(s.label){case 0:if(null==n||e)return[2];if(null==(r=n.match(Yn.Z.URL_REGEX))){a(null);l(null);return[2]}if((i=r[0])===t)return[2];l(i);s.label=1;case 1:s.trys.push([1,3,,4]);return[4,Xn.V6([i])];case 2:o=s.sent();a(o.embeds[0]);return[3,4];case 3:s.sent();a(null);return[3,4];case 4:return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){
Qn(a,r,i,o,s,"next",e)}function s(e){Qn(a,r,i,o,s,"throw",e)}o(void 0)}))}),function(e,n,r){return t.apply(this,arguments)}),1e3);var e,t}),[]);i.useEffect((function(){c(e,s,t)}),[c,t,e,s]);return{embed:r}}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){var n=function(e){var t,n=rr(i.useState(),2),r=n[0],a=n[1],o=(0,On.Wu)([U.Z],(function(){return U.Z.getUploads(e.id,gn.I.CREATE_FORUM_POST.drafts.type)})),s=i.useMemo((function(){return o.find((function(e){return e.isImage}))}),[o]);i.useEffect((function(){var e,t=null==s||null===(e=s.item)||void 0===e?void 0:e.file;if(null!=t){var n=URL.createObjectURL(t);a(n);return function(){a(void 0);URL.revokeObjectURL(n)}}}),[null==s||null===(t=s.item)||void 0===t?void 0:t.file]);return{uploadImageUrl:r,uploadImageDescription:null==s?void 0:s.description}}(e),r=n.uploadImageUrl,a=n.uploadImageDescription,o=tr(null!=r,t).embed,s=null!=r?r:function(e){if(null!=e){var t=e.thumbnail,n=e.image;if(null!=t){var r
;return null!==(r=t.proxy_url)&&void 0!==r?r:t.url}if(null!=n){var i;return null!==(i=n.proxy_url)&&void 0!==i?i:n.url}}}(o);return{imageURL:s,description:null!=a?a:null==o?void 0:o.description}}var ar,or=n(33416),sr=n.n(or),lr=function(e){var t,n=e.parentChannel,i=(0,ht.xH)((function(e){return{textAreaState:e.textAreaState}})).textAreaState,a=ir(n,null===(t=i.textValue)||void 0===t?void 0:t.trim()),o=a.imageURL,s=a.description;return(0,r.jsx)("div",{className:sr().thumbnailContainer,children:null==o?(0,r.jsxs)(b.Clickable,{className:sr().uploadThumbnailContainer,children:[(0,r.jsx)(jn.Z,{onChange:function(e){(0,An.d)(e.currentTarget.files,n,gn.I.CREATE_FORUM_POST.drafts.type,{requireConfirm:!0});e.currentTarget.value=null},multiple:!1,"aria-hidden":!0}),(0,r.jsx)(Kn,{className:sr().uploadIcon}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"text-muted",children:Te.Z.Messages.MEDIA_CHANNEL_UPLOAD_THUMBNAIL_LABEL})]}):(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:o,
className:sr().thumbnail,"aria-hidden":!0,alt:null!=s?s:""})})})},cr=n(30027),ur=n(852077),dr=n(840598),fr=n(323483),hr=n(593005),mr=n(682776),gr=n(539273),pr=n(473903),vr=n(127661),br=n(361674),yr=n(29169),Or=n(476770),xr=n(201891);!function(e){e[e.EmptyContent=0]="EmptyContent";e[e.AutomodViolation=1]="AutomodViolation";e[e.EmptyTags=2]="EmptyTags"}(ar||(ar={}));function Cr(e,t){return{type:e,message:null!=t?t:null}}function Sr(e){return Cr(ar.EmptyContent,e)}function jr(e,t){return Cr(ar.AutomodViolation,(0,xr.$q)(e,null==t?void 0:t.id))}function Er(e,t){return null==e||e.type===ar.EmptyContent&&null!=t.content&&t.content.trim().length>0||e.type===ar.EmptyTags&&null!=t.tags&&t.tags.length>0?null:null!==(n=e.message)&&void 0!==n?n:null;var n}var _r=n(201033),Nr=n(824390),Tr=n.n(Nr),Ar=n(77413),wr=n(489617),Ir=n(94003),Mr=n.n(Ir),Pr=function(e){var t=e.tag,n=t.id,i=t.name,a=t.emojiId,o=t.emojiName,s=(0,g.e7)([wr.Z],(function(){return null!=a?wr.Z.getUsableCustomEmojiById(a):null
})),l=null!=a||null!=o;return(0,r.jsx)(b.ComboboxItem,{value:n,children:(0,r.jsx)(b.ComboboxItem.Label,{children:(0,r.jsxs)("div",{className:Mr().row,children:[l?(0,r.jsx)(Ar.Z,{className:Mr().emoji,emojiId:a,emojiName:o,animated:Boolean(null==s?void 0:s.animated)}):(0,r.jsx)(yr.Z,{className:Mr().emoji}),(0,r.jsx)(b.Text,{variant:"text-md/semibold",color:"header-secondary",children:i})]})})},n)};function Rr(e){var t=e.parentChannel,n=e.appliedTags,i=e.maxTagsApplied,a=e.onSelectTag,o=e.onClose,s=(0,Q.Vm)(t);return(0,r.jsx)(b.ComboboxPopout,{showScrollbar:!0,value:n,onChange:function(e){if(!i||n.has(e)){a(e);o()}},placeholder:Te.Z.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER,"aria-label":Te.Z.Messages.FORUM_TAG_POST_SEARCH_PLACEHOLDER,children:function(e){return function(e,t){return t.filter((function(t){return Tr()(e.toLowerCase(),t.name.toLowerCase())}))}(e,s).map((function(e){return(0,r.jsx)(Pr,{tag:e},e.id)}))}})}var Lr=n(727081),Zr=n(570662),Dr=n(593111),kr=n.n(Dr)
;function Hr(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Fr(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}const Ur=function(e){var t=e.rateLimitPerUser,n=e.slowmodeCooldownGuess,i=e.isBypassSlowmode,a=e.leadingIcon,s=void 0!==a&&a,l="",c="";if(t>=Ne.UF9.HOUR){var u=Math.floor(t/Ne.UF9.HOUR),d=Math.floor((t-u*Ne.UF9.HOUR)/Ne.UF9.MINUTE),f=t-u*Ne.UF9.HOUR-d*Ne.UF9.MINUTE;c=Te.Z.Messages.FORUM_SLOWMODE_DESC_HOURS.format({hours:u,minutes:d,seconds:f})}else if(t>=60){var h=Math.floor(t/60),m=t-60*h
;c=Te.Z.Messages.FORUM_SLOWMODE_DESC_MINUTES.format({minutes:h,seconds:m})}else c=Te.Z.Messages.FORUM_SLOWMODE_DESC.format({seconds:t});if(!i&&n>0){var g=ae().duration(n);if(n>1e3*Ne.UF9.HOUR){var p="".concat(g.minutes()).padStart(2,"0"),v="".concat(g.seconds()).padStart(2,"0");l="".concat(g.hours(),":").concat(p,":").concat(v)}else{var y="".concat(g.seconds()).padStart(2,"0");l="".concat(g.minutes(),":").concat(y)}}else l=i?Te.Z.Messages.CHANNEL_SLOWMODE_DESC_IMMUNE:Te.Z.Messages.CHANNEL_SLOWMODE_DESC_SHORT;var O=(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"text-muted",children:l}),x=(0,r.jsx)(Zr.Z,{className:o()(kr().slowModeIcon,Hr({},kr().leadingIcon,s))});return(0,r.jsx)(b.Tooltip,{text:c,children:function(e){return(0,r.jsx)("div",Fr(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Hr(e,t,n[t])}))}return e}({className:kr().cooldownWrapper},e),{children:s?(0,r.jsxs)(r.Fragment,{children:[x,O]}):(0,r.jsxs)(r.Fragment,{children:[O,x]})}))}})};var Br=n(753274);function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zr="undefined"==typeof ResizeObserver?Br.d:ResizeObserver,Wr=new Map,Kr=new zr((function(e){e.forEach((function(e){var t,n=e.target;null===(t=Wr.get(n))||void 0===t||t(e)}))}));const qr=function(){var e=i.useRef(null),t=Vr(i.useState(400),2),n=t[0],r=t[1],a=i.useCallback((function(){null!==e.current&&r(e.current.clientWidth)}),[r,e]);(0,b.useResizeObserverSubscription)({ref:e,key:"forum-container",onUpdate:a,resizeObserver:Kr,listenerMap:Wr});return{containerRef:e,containerWidth:n}};var Yr=n(897196),Xr=n(422673),$r=n.n(Xr);function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jr(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}
s.done?t(l):Promise.resolve(l).then(r,i)}function ei(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){ei(e,t,n[t])}))}return e}function ni(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ri(e,t){if(null==e)return{}
;var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ai=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,
i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},oi=gn.I.CREATE_FORUM_POST;function si(e){var t,n,a,s,l=e.parentChannel,u=e.isSearchLoading,d=e.onChange,f=e.canCreatePost,h=e.inputRef,m=(0,ht.xH)((function(e){return{textAreaState:e.textAreaState,formOpen:e.formOpen}}),c.Z),p=m.textAreaState,v=m.formOpen,y=ii(i.useState(null),2),O=y[0],x=y[1],C=i.useContext(K.oo),S=i.useCallback((function(){C.bumpDispatchPriority()}),[C]),j=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.ATTACH_FILES,l)})),E=(0,g.Wu)([U.Z],(function(){return U.Z.getUploads(l.id,H.d.FirstThreadMessage)})),_=v&&j&&f,N=(t=l,n=(0,On.ZP)([ge.Z],(function(){
return ge.Z.getGuild(null==t?void 0:t.getGuildId())})),a=(0,xn.Ui)(n),s=!0===(null==t?void 0:t.isMediaChannel()),a&&s),T=function(e,t){var n=(0,ht.AF)(),r=(0,Q.ql)(e),a=i.useCallback((function(){var i=n.getState(),a=i.formOpen,o=i.setFormOpenFromUserAction,s=i.name,l=i.textAreaState,c=i.hasClickedForm;if(!a){setTimeout((function(){if(t.current instanceof b.TextAreaAutosize){var e,n,r,i;null===(e=t.current)||void 0===e||null===(n=e._textArea)||void 0===n||n.setSelectionRange(s.length,s.length);null===(r=t.current)||void 0===r||null===(i=r._textArea)||void 0===i||i.focus()}}),0);(c&&s.length>0||l.textValue.trim().length>0&&l.textValue.trim()!==r||U.Z.getUploads(e.id,H.d.FirstThreadMessage).length>0)&&o()}}),[n,e.id,r,t]);return a}(l,h),A=function(e){var t=(0,ht.xH)((function(e){return{formOpen:e.formOpen}}),c.Z).formOpen,n=(0,ht.AF)(),r=(0,hr.r)({parentChannel:e});i.useEffect((function(){var e=n.getState(),t=e.setNameError,r=e.setMessageError;t(null);r(null)}),[t,n])
;var a=i.useCallback((function(t,r,i){var a=n.getState(),o=a.name,s=a.textAreaState;null==t&&(t=s.textValue);t=t.trim();t=cr.ZP.parse(e,t).content;if(null==r||0===r.length){var l;r=null===(l=ur.Z.getStickerPreview(e.id,oi.drafts.type))||void 0===l?void 0:l.map((function(e){return e.id}))}null!=i&&0!==i.length||(i=U.Z.getUploads(e.id,H.d.FirstThreadMessage));return{content:t,stickers:r,uploads:i,hasNameError:0===o.length,hasMessageError:!(null!=t&&0!==t.length||null!=r&&0!==r.length||0!==i.length)}}),[e,n]);return i.useCallback((s=(o=function(t,i,o){var s,l,c,u,d,f,h,m,g,p,v,b,y,O,x,C,S,j,E,_;return ai(this,(function(N){switch(N.label){case 0:s=n.getState(),l=s.setNameError,c=s.setMessageError,u=s.setSubmitting,d=s.resetFormState,f=s.formOpen,h=s.setFormOpen,m=s.setFormOpenFromUserAction,g=s.setGuidelinesOpen;p=_r.Z.hasSeen(e.id);if(!f){(0,ne.P_)({guildId:e.guild_id,channelId:e.id});p||n.getState().setGuidelinesOpen(!0);m();return[2,{shouldClear:!1,shouldRefocus:!1}]}v=a(t,i,o),
b=v.content,y=v.stickers,O=v.uploads,x=v.hasNameError,C=v.hasMessageError;l(x?Sr(Te.Z.Messages.FORUM_POST_EMPTY_TITLE_ERROR):null);c(C?Sr(Te.Z.Messages.FORUM_POST_EMPTY_MESSAGE_ERROR):null);if(x||C)return[2,{shouldClear:!1,shouldRefocus:!0}];N.label=1;case 1:N.trys.push([1,4,5,6]);u(!0);return[4,(0,Or.v)({content:b,stickers:y,uploads:O,type:oi,channel:e})];case 2:return N.sent().valid?[4,r(b,y,O)]:[2,{shouldClear:!1,shouldRefocus:!0}];case 3:S=N.sent();(0,L.ok)(S);Y.Z.resort(e.id);(0,dr.qB)(e.id,oi.drafts.type);d();h(!1);_r.Z.markAsSeen(e.id);g(!1);return[2,{shouldClear:!0,shouldRefocus:!1}];case 4:j=N.sent();(null===(E=j.body)||void 0===E?void 0:E.code)===Ne.evJ.AUTOMOD_TITLE_BLOCKED?l(jr(j.body,e)):(null===(_=j.body)||void 0===_?void 0:_.code)===Ne.evJ.AUTOMOD_MESSAGE_BLOCKED&&c(jr(j.body,e));return[2,{shouldClear:!1,shouldRefocus:!0}];case 5:u(!1);return[7];case 6:return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){
Jr(i,n,r,a,s,"next",e)}function s(e){Jr(i,n,r,a,s,"throw",e)}a(void 0)}))}),function(e,t,n){return s.apply(this,arguments)}),[r,a,e,n]);var o,s}(l);i.useLayoutEffect(d,[v,p,E,d]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{"aria-label":f?Te.Z.Messages.NEW_FORUM_POST:Te.Z.Messages.SEARCH,className:o()($r().container,ei({},$r().collapsed,!v)),onClick:!v&&f?T:void 0,children:(0,r.jsxs)("form",{onMouseDown:S,onFocus:S,onSubmit:function(e){e.preventDefault();f&&A()},children:[(0,r.jsxs)("div",{className:$r().formContainer,children:[(0,r.jsxs)("div",{className:$r().form,children:[(0,r.jsx)(li,{editorRef:O,parentChannel:l,isSearchLoading:u,inputRef:h,canCreatePost:f}),v&&(0,r.jsx)(ui,{editorRef:O,setEditorRef:x,parentChannel:l,submit:A,disabled:!f})]}),_&&(N?(0,r.jsx)(lr,{parentChannel:l}):(0,r.jsx)(Fn,{channelId:l.id}))]}),(0,r.jsxs)("div",{className:$r().form,children:[_&&N&&(0,r.jsx)(Gn,{parentChannel:l}),v&&(0,r.jsx)(di,{className:$r().horizontalPadding,parentChannel:l,
canCreatePost:f})]})]})})})}var li=i.memo((function(e){var t=e.parentChannel,n=e.isSearchLoading,a=e.inputRef,o=e.canCreatePost,s=e.editorRef,l=(0,ht.xH)((function(e){return{formOpen:e.formOpen,nameError:e.nameError,name:e.name,textAreaState:e.textAreaState,hasClickedForm:e.hasClickedForm,submitting:e.submitting}}),c.Z),u=l.formOpen,d=l.nameError,f=l.name,h=l.textAreaState,m=l.hasClickedForm,p=l.submitting,v=(0,ht.AF)(),y=null!=t.topic&&0!==t.topic.length,O=_r.Z.hasSeen(t.id),x=(0,Q.ql)(t),C=(0,g.e7)([pr.default],(function(){return pr.default.getCurrentUser()}));fn()(null!=C,"current user cannot be null");(0,K.yp)({event:Ne.CkL.FOCUS_COMPOSER_TITLE,handler:function(){var e,t=a.current instanceof b.TextAreaAutosize?null===(e=a.current)||void 0===e?void 0:e._textArea:a.current;null==t||t.focus();v.getState().setTitleFocused(!0);v.getState().setFormOpen(!0);v.getState().setHasClickedForm(!0)}});var S=i.useCallback((function(){var e;v.getState().resetFormState()
;hn.Z.clearDraft(t.id,H.d.ThreadSettings);hn.Z.clearDraft(t.id,H.d.FirstThreadMessage);mn.Z.clearAll(t.id,H.d.FirstThreadMessage);v.getState().setFormOpen(!1);v.getState().setBodyFocused(!1);v.getState().setTitleFocused(!1);v.getState().setHasClickedForm(!1);null===(e=a.current)||void 0===e||e.blur();(0,ne.Oq)({guildId:t.guild_id,channelId:t.id})}),[v,t.id,t.guild_id,a]),j=i.useMemo((function(){return n&&!u?(0,r.jsx)(gi,{}):n||u||0!==h.textValue.trim().length&&h.textValue.trim()!==x?!u&&(f.trim().length>0||h.textValue.trim().length>0&&h.textValue.trim()!==x||U.Z.getUploads(t.id,H.d.FirstThreadMessage).length>0)&&m?(0,r.jsx)(kt.Z,{className:$r().pencilIcon,width:24,height:24}):p?(0,r.jsx)(vr.Z,{className:$r().closeIconDisabled,width:24,height:24}):(0,r.jsx)(b.Clickable,{onClick:S,children:(0,r.jsx)(b.Tooltip,{text:Te.Z.Messages.FORUM_CLEAR_ALL,children:function(e){return(0,r.jsx)(vr.Z,ni(ti({},e),{className:$r().closeIcon,width:24,height:24}))}})}):(0,r.jsx)(br.Z,{
className:$r().searchIcon,width:24,height:24})}),[n,u,m,f,h.textValue,S,t.id,x,p]),E=i.useCallback((function(e){var n=e.clipboardData.files[0];if(null!=n&&n.type.startsWith("image/")){e.preventDefault();(0,An.d)([n],t,H.d.FirstThreadMessage);v.getState().setFormOpenFromUserAction()}}),[t,v]),_=Er(d,{content:f});return(0,r.jsxs)("div",{className:$r().titleContainer,onPaste:E,children:[(0,r.jsx)("div",{className:$r().prefixElement,children:j}),(0,r.jsx)(b.TextArea,{value:f,placeholder:o?u||h.textValue.length>0&&h.textValue.trim()!==x?Te.Z.Messages.FORUM_POST_TITLE_PLACEHOLDER_FOCUSED:Te.Z.Messages.FORUM_POST_TITLE_PLACEHOLDER_SEARCH:Te.Z.Messages.SEARCH,flex:!0,autosize:u,rows:1,showCharacterCount:!1,showRemainingCharacterCount:!1,maxLength:Ne.HN8,onChange:function(e){var n=(0,fr.Z)(e,!1);v.getState().setName(n);var r=0===n.trim().length,i=0===h.textValue.trim().length,a=h.textValue.trim()===x;r&&(i||a)&&v.getState().setHasClickedForm(!1);u||Y.Z.updateForumSearchQuery(t.id,n)},
onFocus:function(){v.getState().setTitleFocused(!0);v.getState().setBodyFocused(!1)},onBlur:function(){v.getState().setTitleFocused(!1);var e=(0,fr.Z)(f,!0);if(e!==f){v.getState().setName(e);u||Y.Z.updateForumSearchQuery(t.id,e)}},onKeyDown:function(e){var n;if("Enter"===e.key){e.preventDefault();e.stopPropagation();if(u&&f.length>0)null==s||s.focus();else if(o&&e.shiftKey){(0,ne.nH)({guildId:t.guild_id,channelId:t.id});y&&!O&&v.getState().setGuidelinesOpen(!0);v.getState().setFormOpenFromUserAction();if(f.trim().length>0){v.getState().setBodyFocused(!0);null==s||s.focus()}}}var r=a.current instanceof b.TextAreaAutosize?null===(n=a.current)||void 0===n?void 0:n._textArea:a.current;if("Home"===e.key||"End"===e.key){if(null==r)return;e.preventDefault();e.stopPropagation();if("Home"===e.key)r.setSelectionRange(0,0);else{var i=f.length;r.setSelectionRange(i,i)}}if("Escape"===e.key&&!v.getState().submitting){var l;null===(l=a.current)||void 0===l||l.blur();v.getState().setFormOpen(!1)
;v.getState().setTitleFocused(!1);v.getState().setBodyFocused(!1)}},error:_,className:$r().title,inputRef:a}),u?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ci,{parentChannel:t}),(0,r.jsx)(fi,{parentChannel:t,canCreatePost:o})]})]})}));function ci(e){var t=e.parentChannel,n=(0,ht.xH)((function(e){return{guidelinesOpen:e.guidelinesOpen}})).guidelinesOpen,i=(0,ht.AF)(),a=null!=t.topic&&0!==t.topic.length,s=function(){i.getState().setGuidelinesOpen(!n)};return a?(0,r.jsx)(b.Tooltip,{text:Te.Z.Messages.FORUM_POST_GUIDELINES_TITLE,children:function(e){return(0,r.jsx)(b.Clickable,ni(ti({},e),{onClick:s,className:o()($r().guidelinesButton,ei({},$r().guidelinesOpen,n)),children:(0,r.jsx)(Dt.Z,ni(ti({},e),{width:24,height:24}))}))}}):null}var ui=i.memo((function(e){var t=e.parentChannel,n=e.submit,a=e.disabled,s=void 0!==a&&a,l=e.editorRef,u=e.setEditorRef,d=(0,g.e7)([pr.default],(function(){return pr.default.getCurrentUser()}));fn()(null!=d,"current user cannot be null");var f=(0,
ht.xH)((function(e){return{messageError:e.messageError,textAreaState:e.textAreaState,bodyFocused:e.bodyFocused,formOpen:e.formOpen}}),c.Z),h=f.messageError,m=f.textAreaState,p=f.bodyFocused,v=f.formOpen,y=(0,ht.AF)();i.useEffect((function(){return function(){return(0,ne.Vn)({guildId:t.guild_id,channelId:t.id})}}),[t.guild_id,t.id]);var O=i.useCallback((function(){y.getState().setBodyFocused(!0)}),[y]),x=i.useCallback((function(){y.getState().setBodyFocused(!1)}),[y]),C=i.useCallback((function(e,t,n){(0,y.getState().setTextAreaState)({textValue:t,richValue:n})}),[y]),S=i.useCallback((function(e){var t=e.value,r=e.uploads,i=e.stickers;return n(t,i,r)}),[n]);(0,K.yp)({event:Ne.CkL.TEXTAREA_FOCUS,handler:O});(0,K.yp)({event:Ne.CkL.TEXTAREA_BLUR,handler:x});var j=Er(h,{content:m.textValue});return(0,r.jsx)("div",{className:$r().bodyContainer,children:(0,r.jsxs)("div",{className:$r().contentContainer,children:[(0,r.jsx)("div",{onClick:O,children:(0,r.jsx)(vn.Z,{type:oi,setEditorRef:u,
channel:t,placeholder:Te.Z.Messages.FORUM_POST_MESSAGE_PLACEHOLDER,textValue:m.textValue,richValue:m.richValue,focused:p,className:$r().channelTextArea,innerClassName:o()($r().channelTextAreaInner,ei({},$r().channelTextAreaInnerError,null!=j)),onChange:C,onSubmit:S,promptToUpload:An.d,disabled:s,onKeyDown:function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.stopPropagation();if("Home"===e.key||"End"===e.key){if(null==l)return;e.preventDefault();e.stopPropagation();var t=l.getSlateEditor();if(null==t)return;"Home"===e.key?yn.Q.resetSelectionToStart(t):yn.Q.resetSelectionToEnd(t)}if(v&&"Escape"===e.key&&!y.getState().submitting){null==l||l.blur();y.getState().setFormOpen(!1);y.getState().setTitleFocused(!1);y.getState().setBodyFocused(!1)}},autoCompletePosition:"bottom"})}),(0,r.jsx)(b.InputError,{error:j})]})})})),di=i.memo((function(e){var t=e.parentChannel,n=e.canCreatePost,a=e.className,o=(0,ht.xH)((function(e){return{textAreaState:e.textAreaState,appliedTags:e.appliedTags,
name:e.name}})),s=o.textAreaState,l=o.appliedTags,c=o.name,u=t.rateLimitPerUser,d=u>0,f=(0,g.e7)([gr.Z],(function(){return gr.Z.getSlowmodeCooldownGuess(t.id,gr.S.CreateThread)})),h=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.MANAGE_THREADS,t)||mr.Z.can(Ne.Plq.MANAGE_CHANNELS,t)})),m=t.hasFlag(Yr.zZ.REQUIRE_TAG)&&0===l.size&&c.length>0&&s.textValue.length>0,p=(0,ht.AF)(),v=i.useCallback((function(){p.getState().setBodyFocused(!1)}),[p]);return(0,r.jsxs)("div",{className:a,children:[(0,r.jsx)(mi,{parentChannel:t}),(0,r.jsx)("div",{className:$r().tagsDivider}),(0,r.jsxs)("div",{className:$r().controlsContainer,children:[(0,r.jsxs)("div",{className:$r().controls,children:[(0,r.jsxs)("div",{className:$r().wrappedControls,children:[m&&(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"text-danger",children:Te.Z.Messages.FORUM_POST_TAG_REQUIRED_ERROR}),(0,r.jsx)(bn.Z,{type:oi,textValue:s.textValue,className:$r().characterCount}),d&&(0,r.jsx)(Ur,{rateLimitPerUser:u,
slowmodeCooldownGuess:f,isBypassSlowmode:h,leadingIcon:!0})]}),(0,r.jsx)(ci,{parentChannel:t}),(0,r.jsx)(fi,{parentChannel:t,disableIfInvalid:!0,canCreatePost:n,disabled:d&&!h&&f>0})]}),(0,r.jsx)(pn.Z,{type:oi,className:$r().expressionPicker,onClick:v},"expression")]})]})}));function fi(e){var t=e.parentChannel,n=e.canCreatePost,i=e.disabled,a=e.disableIfInvalid,o=void 0!==a&&a,s=(0,ht.xH)((function(e){return{submitting:e.submitting,textAreaState:e.textAreaState,name:e.name,appliedTags:e.appliedTags,formOpen:e.formOpen}})),l=s.submitting,c=s.textAreaState,u=s.name,d=s.appliedTags,f=s.formOpen,h=t.hasFlag(Yr.zZ.REQUIRE_TAG)&&0===d.size&&u.length>0&&c.textValue.length>0,m=(0,g.Wu)([U.Z],(function(){return U.Z.getUploads(t.id,H.d.FirstThreadMessage)})),p=c.textValue.trim().length>0||m.length>0,v=!h&&p&&u.trim().length>0;if(__OVERLAY__)return null;var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsxs)(b.Button,ni(ti({},e),{
size:b.Button.Sizes.SMALL,className:$r().submitButton,innerClassName:$r().submitButtonInner,type:"submit",submitting:l,disabled:o&&!v||i||!n,children:[(0,r.jsx)(rt.Z,{className:$r().submitIcon,width:16,height:16}),(0,r.jsx)(b.Text,{variant:"text-md/semibold",color:"none",children:f?Te.Z.Messages.SUBMIT_POST:Te.Z.Messages.NEW_FORUM_POST_NEW})]}))};return n?y():(0,r.jsx)(b.Tooltip,{text:Te.Z.Messages.FORUM_NO_POST_PERMISSION_HELP,children:function(e){return y(e)}})}function hi(){return Promise.resolve()}function mi(e){var t=e.parentChannel,n=(0,ht.xH)((function(e){return{appliedTags:e.appliedTags,toggleAppliedTag:e.toggleAppliedTag,setPopoutOpen:e.setPopoutOpen}}),c.Z),a=n.appliedTags,s=n.toggleAppliedTag,l=n.setPopoutOpen,h=a.size>=mt.Cn,m=(0,u.ZP)({id:"".concat(t.id,"-post-form-tags-navigator"),isEnabled:!0,wrap:!0,scrollToStart:hi,scrollToEnd:hi,orientation:f.hy.HORIZONTAL}),g=qr(),p=g.containerRef,v=g.containerWidth,y=i.useRef(null),O=ii(i.useState(!0),2),x=O[0],C=O[1],S=(0,
Q.Vm)(t),j=ii(i.useState(0),2),E=j[0],_=j[1];i.useLayoutEffect((function(){var e,t=y.current,n=null==t||null===(e=t.children)||void 0===e?void 0:e[0],r=null==t||null==n||n.clientHeight>t.clientHeight;r!==x&&C(r);if(r&&null!=p.current&&null!=n&&null!=n.children){var i=p.current.getBoundingClientRect(),a=i.left,o=i.top,s=0,l=!0,c=!1,u=void 0;try{for(var d,f=n.children[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value.getBoundingClientRect(),m=h.right;if(h.top-o>h.height)break;m-a>s&&(s=m-a)}}catch(e){c=!0;u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}_(s)}}),[S,x,p,v]);return 0===S.length?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:$r().tagsContainer,ref:p,children:[(0,r.jsx)(yr.Z,{className:$r().tagsIcon,width:16,height:16}),(0,r.jsx)("div",{className:$r().tagList,ref:y,children:(0,r.jsx)(d.bG,{navigator:m,children:(0,r.jsx)(d.SJ,{children:function(e){var t=e.ref,n=ri(e,["ref"]);return(0,r.jsx)("div",ni(ti({
className:$r().tagListInner,ref:t},n),{children:S.map((function(e){return(0,r.jsx)(Lr.ZP,{ariaLabel:Te.Z.Messages.FORUM_TAG_A11Y_ADD_TAG.format({tagName:e.name}),tag:e,onClick:h&&!a.has(e.id)?void 0:function(){return s(e.id)},disabled:!a.has(e.id)&&a.size>=mt.Cn,selected:a.has(e.id),size:Lr.ZP.Sizes.SMALL},e.id)}))}))}})})}),x&&(0,r.jsx)(b.Popout,{onRequestOpen:function(){return l(!0)},onRequestClose:function(){return l(!1)},renderPopout:function(e){var n=e.closePopout;return(0,r.jsx)(Rr,{parentChannel:t,appliedTags:a,maxTagsApplied:h,onSelectTag:s,onClose:n})},position:"bottom",align:"center",children:function(e){return(0,r.jsxs)(b.Button,ni(ti({},e),{size:b.Button.Sizes.TINY,className:$r().tagsButton,innerClassName:$r().tagsButtonInner,style:{left:E},look:b.Button.Looks.LINK,"aria-label":Te.Z.Messages.ADD_TAG_FORUM_POST,children:[Te.Z.Messages.FORUM_TAG_SEE_MORE_A11Y_LABEL,(0,r.jsx)(G.Z,{width:16})]}))}}),(0,r.jsxs)(b.Button,{size:b.Button.Sizes.TINY,
className:o()($r().tagsButton,$r().tagsButtonPlaceholder),innerClassName:$r().tagsButtonInner,look:b.Button.Looks.LINK,"aria-label":Te.Z.Messages.ADD_TAG_FORUM_POST,children:[Te.Z.Messages.FORUM_TAG_SEE_MORE_A11Y_LABEL,(0,r.jsx)(G.Z,{width:16})]})]})})}function gi(e){var t=e.style,n=e.className;return(0,r.jsx)("div",{className:n,style:t,children:(0,r.jsx)("div",{className:$r().loader})})}var pi,vi=n(920883),bi=n(336194),yi=n(531304),Oi=n(916286),xi=n(386364),Ci=n(968449),Si=n(439610),ji=n(331448),Ei=n(816240),_i=n(701190),Ni=n(413297),Ti=n(723876),Ai=n(234798),wi=n(99440),Ii=n(260561),Mi=n(5387),Pi=n.n(Mi),Ri="absolute";!function(e){e[e.COVER=1]="COVER";e[e.CONTAIN=2]="CONTAIN";e[e.CONTAIN_STRETCHED=3]="CONTAIN_STRETCHED"}(pi||(pi={}));var Li=function(e,t,n,r){if(0===n)return[];if(1===n)return[{width:e,height:t,top:0,left:0,position:Ri}];if(2===n){var i=Math.ceil((e-r)/2);return[{top:0,left:0,position:Ri,width:i,height:t},{top:0,left:i+r,position:Ri,width:i,height:t}]}if(3===n){
var a=Math.ceil((e-r)/2),o=Math.ceil((t-r)/2);return[{top:0,left:0,position:Ri,width:a,height:t},{top:0,left:a+r,position:Ri,width:a,height:o},{top:o+r,left:a+r,position:Ri,width:a,height:o}]}var s=Math.ceil((e-r)/2),l=Math.ceil((t-r)/2);return[{top:0,left:0,position:Ri,width:s,height:l},{top:l+r,left:0,position:Ri,width:s,height:l},{top:0,left:s+r,position:Ri,width:s,height:l},{top:l+r,left:s+r,position:Ri,width:s,height:l}]};var Zi=new(Pi())({max:100});function Di(e){var t=e.numAttachments,n=e.containerWidth,r=e.containerHeight;return i.useMemo((function(){return function(e){var t=e.numAttachments,n=e.containerWidth,r=e.containerHeight,i=function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}(t,n,r),a=Zi.get(i);if(null!=a)return a;var o=Li(n,r,t,4);Zi.set(i,o);return o}({numAttachments:t,containerWidth:n,containerHeight:r})}),[t,n,r])}function ki(e){return e.map((function(t,n){return{minWidth:2*e[n].width,minHeight:2*e[n].height,maxWidth:2*e[n].width,maxHeight:2*e[n].height}
}))}const Hi=(0,Ii.B)({kind:"user",id:"2022-11_grid_view_image_fitting_strategy",label:"Grid View Media Fitting Strategy",defaultConfig:{strategy:pi.COVER},treatments:[{id:1,label:"CONTAIN",config:{strategy:pi.CONTAIN}},{id:2,label:"CONTAIN_STRETCHED",config:{strategy:pi.CONTAIN_STRETCHED}}]});var Fi=function(){function e(t){var n=t.minWidth,r=t.maxWidth,i=t.gap;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);fn()(n<r,"minWidth needs to be smaller than maxWidth");this.minWidth=n;this.maxWidth=r;this.gap=i}var t=e.prototype;t.getWidth=function(e){return this.getRenderOptions(e).columnWidth};t.getRenderOptions=function(e){if(e<=this.minWidth)return{columns:1,columnWidth:this.minWidth};var t=e/this.maxWidth,n=e/this.minWidth,r=Math.max(Math.floor(t+(n-t)/2),1);return{columns:r,columnWidth:(e-this.gap*(r-1))/r}};return e}(),Ui={columns:1,columnWidth:450},Bi=function(e){var t=e-2;return[t,Math.ceil(.6666666666666666*t)]},Gi=function(e){
return 60+Bi(e-24)[1]+24+36},Vi=n(16896),zi=n(589519),Wi=n(433505),Ki=n(707558);function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Xi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qi(e,t)
}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var $i="data-grid-item-id",Qi="data-grid-section",Ji="data-grid-prev-section-boundary",ea=new Set([f.R8.UP,f.R8.DOWN,f.R8.LEFT,f.R8.RIGHT]);function ta(e){var t=e.section,n=e.column,r=e.row,i="[".concat(Qi,'="').concat(t,'"]'),a="[".concat("aria-colindex",'="').concat(n,'"]'),o="[".concat("aria-rowindex",'="').concat(r,'"]');return"".concat(i).concat(a).concat(o)}var na={id:"NO_LIST",setFocus:function(){}},ra={id:"NO_LIST",onKeyDown:function(){},ref:i.createRef(),tabIndex:-1},ia=i.createContext(na),aa=i.createContext(ra);function oa(e){var t=e.children,n=e.navigator,a=n.id,o=n.setFocus,s=n.containerProps,l=s.onKeyDown,c=s.ref,u=s.tabIndex,d=i.useMemo((function(){return{id:a,setFocus:o}}),[a,o]),f=i.useMemo((function(){return{onKeyDown:l,ref:c,id:a,tabIndex:u}}),[l,c,a,u]);return(0,r.jsx)(aa.Provider,{
value:f,children:(0,r.jsx)(ia.Provider,{value:d,children:t})})}var sa=n(630097),la=n(225479),ca=n.n(la);function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function da(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){da(e,t,n[t])}))}return e}function ha(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)
}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ma(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ua(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const pa=i.memo((function(e){var t=e.id,n=e.threadId,i=e.goToThread,a=e.overrideMedia,o=e.className,s=e.coords,l=e.gridCoords,c=e.gridSectionBoundaries,u=e.observePostVisibilityAnalytics,d=(0,g.e7)([k.Z],(function(){return k.Z.getChannel(n)}));return null==d?null:(0,r.jsx)(va,{id:t,channel:d,goToThread:i,overrideMedia:a,className:o,coords:s,gridCoords:l,observePostVisibilityAnalytics:u,gridSectionBoundaries:c})}));function va(e){
var t,n,a=e.id,s=e.channel,l=e.goToThread,c=e.overrideMedia,u=e.className,d=e.coords,f=e.gridCoords,h=e.gridSectionBoundaries,m=e.observePostVisibilityAnalytics,p=(0,g.e7)([k.Z],(function(){return k.Z.getChannel(s.parent_id)})),v=s.id,y=i.useRef(null),O=(0,g.e7)([D.ZP],(function(){return D.ZP.getCurrentSidebarChannelId(s.parent_id)===s.id})),x=(0,Ai.cl)(s),C=x.firstMessage,S=x.loaded,j=(0,Q.mX)({firstMessage:C,formatInline:!1,noStyleAndInteraction:!1}).firstMedia,E=null!=c?c:j,_=(0,Q.nP)(s).messageCountText,N=(0,Q.J$)(s),T=N.isNew,A=N.hasUnreads,w=i.useRef(null),I=(0,sa.Z)({facepileRef:w,goToThread:l,channel:s}),M=I.handleLeftClick,P=I.handleRightClick;i.useEffect((function(){null==m||m(y.current,v)}),[m,v]);var R=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.MANAGE_MESSAGES,s)})),L=Ci.QK.useSetting(),Z=Ci.cC.useSetting(),H=(0,Oi.Z)(Z,R),F=(0,wi.aU)(C,p,!1),U=ga(Bi(d.width-24),2),B=U[0],G=U[1],V=(0,Q.xw)(s,vi.z.CREATION_DATE,mt.R6.POSTED_DURATION_AGO),z=(0,
Jt.NN)(s),W=(null==C?void 0:C.blocked)||null==E,K=A?"header-primary":"text-muted",q=function(e){var t,n=e.id,r=e.section,a=e.row,o=e.column,s=e.boundaries,l=Xi(i.useState(0===a&&0===o?0:-1),2),c=l[0],u=l[1],d=i.useContext(ia),f=d.id,h=d.setFocus,m=i.useCallback((function(){return h(n)}),[n,h]);i.useLayoutEffect((function(){return(0,Wi.N)(f,(function(e){u(e===n?0:-1)}))}),[n,f]);return Yi(t={},$i,(0,Ki.jb)(f,n)),Yi(t,Qi,r),Yi(t,Ji,s[r]),Yi(t,"role","gridcell"),Yi(t,"aria-rowindex",a),Yi(t,"aria-colindex",o),Yi(t,"tabIndex",c),Yi(t,"onFocus",m),t}({id:a,row:f.row,column:f.column,section:f.section,boundaries:h}),Y=q.onFocus,X=ma(q,["onFocus"]),$=!0===(null==p?void 0:p.isMediaChannel())&&(null===(t=F[0])||void 0===t?void 0:t.height)>=(null===(n=F[0])||void 0===n?void 0:n.width);return(0,r.jsxs)("li",{ref:y,onClick:M,onFocus:Y,onContextMenu:P,className:o()(ca().container,u,da({},ca().isOpen,O)),style:fa({},d),children:[(0,r.jsx)(b.Clickable,fa({onClick:M,focusProps:{ringTarget:y},
onContextMenu:P,"aria-label":Te.Z.Messages.FORUM_POST_ARIA_LABEL.format({title:s.name,count:_}),className:ca().focusTarget},X)),(0,r.jsxs)("div",{className:ca().header,children:[(0,r.jsxs)("div",{className:ca().authorRow,children:[(0,r.jsxs)("div",{className:ca().rowGroup,children:[(0,r.jsx)(Vi.Z,{channel:s,message:C}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"header-secondary",className:ca().postCreationTimestamp,children:V})]}),T?(0,r.jsx)(et.IG,{className:o()(ca().newBadge),color:bi.Z.unsafe_rawColors.BRAND_260.css,text:Te.Z.Messages.NEW}):null]}),(0,r.jsx)(b.HeadingLevel,{children:(0,r.jsx)(b.Heading,{variant:"heading-md/extrabold",className:ca().title,color:K,style:{width:"".concat(d.width-24,"px")},children:z})})]}),(0,r.jsx)("div",{className:ca().postBody,children:(0,r.jsx)(b.FocusBlock,{children:W?(0,r.jsx)(Sa,{channel:s,firstMessage:C,isFirstMessageLoaded:S,containerWidth:d.width,hasUnreads:A}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(xa,{mediaAttachments:F,
globalSpoilerRenderSetting:H,containerWidth:B,containerHeight:G,canAutoPlay:L,shouldContainWithBackground:$}),(0,r.jsx)("div",{className:ca().tagsRow,children:(0,r.jsx)(zi.ZP,{channel:s,tagsClassName:ca().tagPill})})]})})}),(0,r.jsx)("div",{className:ca().footer,children:(0,r.jsx)(b.FocusBlock,{children:(0,r.jsx)(ba,{channel:s,firstMessage:C,facepileRef:w})})})]})}function ba(e){var t=e.channel,n=e.facepileRef,i=e.firstMessage,a=(0,Q.Q)(t),o=null!=(null==i?void 0:i.reactions)&&i.reactions.length>0;return(0,r.jsxs)("div",{className:ca().forumPostControls,children:[(0,r.jsxs)("div",{className:ca().controlsGroup,children:[(0,r.jsx)("div",{className:ca().messageCountContainer,children:(0,r.jsx)(Jt.m9,{channel:t,iconSize:16,showReadState:!0})}),a.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:ca().bullet,children:"â€¢"}),(0,r.jsxs)("div",{className:ca().typing,children:[(0,r.jsx)(Jt.og,{channel:t,userIds:a,facepileRef:n}),(0,r.jsx)("div",{className:ca().dots,
children:(0,r.jsx)(b.Dots,{themed:!0,dotRadius:2})}),(0,r.jsx)(yi.Z,{channel:t,className:ca().typingUsers,renderDots:!1})]})]}):null]}),(0,r.jsxs)("div",{className:ca().controlsGroup,children:[o||null==i?null:(0,r.jsx)(Jt.kZ,{firstMessage:i,channel:t}),null==i?null:(0,r.jsx)(Jt.au,{firstMessage:i,channel:t})]})]})}var ya=function(e){return e.preventDefault()},Oa=i.memo((function(e){return(0,r.jsx)(r.Fragment,{children:(0,xi.Yi)(e)})})),xa=i.memo((function(e){var t=e.mediaAttachments,n=e.globalSpoilerRenderSetting,a=e.containerWidth,s=e.containerHeight,l=e.canAutoPlay,c=e.shouldContainWithBackground,u=void 0!==c&&c,d=i.useMemo((function(){return(0,wi.cp)(t)}),[t]),f=d.containsVideo,h=d.containsGif,m=Hi.useExperiment({},{autoTrackExposure:!1}).strategy,g=i.useMemo((function(){return t.slice(0,4)}),[t]),p=Di({numAttachments:g.length,containerWidth:a,containerHeight:s}),v=function(e){
var t=e.imageContainerStyles,n=e.containerWidth,r=e.containerHeight,a=i.useRef(ki(t)),o=i.useRef(n),s=i.useRef(r),l=n>o.current+100,c=r>s.current+100;(l||c)&&(a.current=ki(t));return a.current}({imageContainerStyles:p,containerWidth:a,containerHeight:s}),b=i.useMemo((function(){if(u)return ca().imageContain;switch(m){case pi.CONTAIN:return ca().imageContain;case pi.CONTAIN_STRETCHED:return ca().imageContainStretched;default:return ca().imageCover}}),[m,u]),y=i.useMemo((function(){return g.map((function(e,t){var i=e.spoiler&&!n,a=ha(fa({},v[t]),{src:e.src,width:e.width,height:e.height,alt:null!=e.alt&&i?Te.Z.Messages.SPOILER_HIDDEN_A11Y_LABEL:e.alt,onClick:ya,shouldRenderAccessory:!h&&!f,imageContainerStyle:u?{background:"linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url(".concat(e.src,")"),backgroundPosition:"center",filter:i?"blur(20px)":"none"}:void 0});return(0,r.jsxs)("div",{className:ca().bodyMediaFrame,style:p[t],children:[e.src.startsWith("data:")?(0,
r.jsx)(Si.Z,ha(fa({},a),{className:ca().mediaContainer,imageClassName:o()(ca().thumbnailOverride,da({},ca().spoiler,i))})):(0,r.jsx)(Oa,ha(fa({},a),{autoPlay:l,containerClassName:ca().mosaicMediaContainer,imageClassName:o()(b,da({},ca().spoiler,i)),responsive:!0})),i&&(0,r.jsx)("div",{className:ca().spoilerTagContainer,children:(0,r.jsx)(Ni.Z,{className:ca().spoilerTag})})]},e.src)}))}),[l,h,f,n,p,v,b,g,u]);return(0,r.jsxs)("div",{className:ca().bodyMedia,style:{width:a,height:s},children:[(0,r.jsx)(r.Fragment,{children:y}),(h||f)&&(0,r.jsxs)("div",{className:ca().mediaIconsRow,children:[f&&(0,r.jsx)(_i.Z,{width:"22px",height:"22px",className:ca().mediaIcon}),h&&(0,r.jsx)(ji.Z,{className:ca().mediaIcon})]}),t.length>4&&(0,r.jsx)(Ca,{text:(t.length-4).toString(),icon:Ei.Z,pillClassName:ca().moreImagesPill,iconClassName:ca().moreImagesPillIcon,textClassName:ca().moreImagesPillText})]})}));function Ca(e){var t=e.text,n=e.icon,i=e.pillClassName,a=e.iconClassName,o=e.textClassName;return(0,
r.jsxs)("div",{className:i,children:[(0,r.jsx)(n,{className:a}),(0,r.jsxs)(b.Text,{variant:"text-xs/medium",className:o,children:["+",t]})]})}function Sa(e){var t=e.channel,n=e.firstMessage,a=e.isFirstMessageLoaded,s=e.containerWidth,l=e.hasUnreads,c=ga(Bi(s-24),2),u=c[0],d=c[1],f=(0,Q.mX)({firstMessage:n,formatInline:!1,noStyleAndInteraction:!0}).content,h=(0,zi.DM)({channel:t,isNew:!1}).shouldRenderTagsRow,m=i.useMemo((function(){return{width:u,height:d}}),[u,d]),g=l?ca().textContentUnread:ca().textContentRead;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:ca().contentPreview,style:m,children:[(0,r.jsxs)("div",{className:ca().content,children:[a&&null==n&&(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:l?"header-secondary":"text-muted",children:Te.Z.Messages.REPLY_QUOTE_MESSAGE_DELETED}),a&&null!=n&&(0,r.jsx)(Ti.ZP,{message:n,content:f,className:g})]}),(0,r.jsx)("div",{className:o()(ca().textContentFooter,da({},ca().noTags,!h)),children:h?(0,r.jsx)(zi.ZP,{
channel:t,tagsClassName:ca().tagPill,className:ca().row}):null})]})})}var ja=n(976160),Ea=n.n(ja);function _a(){return(0,r.jsx)("div",{className:Ea().bodyMedia})}function Na(){return(0,r.jsxs)("div",{className:Ea().content,children:[(0,r.jsxs)("div",{className:Ea().titleAndMessage,children:[(0,r.jsxs)("div",{className:Ea().header,children:[(0,r.jsxs)("div",{className:Ea().tags,children:[(0,r.jsx)("div",{className:Ea().tag}),(0,r.jsx)("div",{className:Ea().tag}),(0,r.jsx)("div",{className:Ea().tag})]}),(0,r.jsx)("div",{className:Ea().seperator})]}),(0,r.jsx)("div",{className:Ea().time}),(0,r.jsx)("div",{className:Ea().title}),(0,r.jsx)("div",{className:Ea().firstMessage})]}),(0,r.jsxs)("div",{className:Ea().engagement,children:[(0,r.jsx)("div",{className:Ea().reactions}),(0,r.jsx)("div",{className:Ea().replies})]})]})}function Ta(){return(0,r.jsx)("div",{className:Ea().card,children:(0,r.jsxs)("div",{className:Ea().body,children:[(0,r.jsx)(Na,{}),(0,r.jsx)(_a,{})]})})}
var Aa=n(749183),wa=n.n(Aa);function Ia(e){var t=e.channel,n=e.closePopout,i=(0,$.H)(t.id),a=i.sortOrder,o=i.layoutType,s=(0,$.v)(),l=t.isMediaChannel(),c=function(e){(0,ne.KR)({guildId:t.guild_id,channelId:t.id,sortOrder:e});s.getState().setSortOrder(t.id,e);n()},u=function(e){(0,ne.Do)({guildId:t.guild_id,channelId:t.id,forumLayout:e});s.getState().setLayoutType(t.id,e);n()};return(0,r.jsx)("div",{className:wa().container,children:(0,r.jsxs)(b.Menu,{navId:"sort-and-view","aria-label":l?Te.Z.Messages.MEDIA_CHANNEL_SORT_A11Y_LABEL:Te.Z.Messages.FORUM_SORT_AND_VIEW_AY11_LABEL,hideScroller:!0,onClose:n,onSelect:n,children:[(0,r.jsxs)(b.MenuGroup,{label:Te.Z.Messages.FORUM_CHANNEL_SORT_BY,children:[(0,r.jsx)(b.MenuRadioItem,{id:"sort-by-recent-activity",group:"sort-by",label:Te.Z.Messages.FORUM_CHANNEL_SORT_BY_RECENTLY_ACTIVE,action:function(){return c(vi.z.LATEST_ACTIVITY)},checked:a===vi.z.LATEST_ACTIVITY}),(0,r.jsx)(b.MenuRadioItem,{id:"sort-by-date-posted",group:"sort-by",
label:Te.Z.Messages.FORUM_CHANNEL_SORT_BY_DATE_POSTED,action:function(){return c(vi.z.CREATION_DATE)},checked:a===vi.z.CREATION_DATE})]}),!t.isMediaChannel()&&(0,r.jsxs)(b.MenuGroup,{label:Te.Z.Messages.FORUM_CHANNEL_VIEW_AS,children:[(0,r.jsx)(b.MenuRadioItem,{id:"view-as-list",group:"view-as",label:Te.Z.Messages.FORUM_CHANNEL_VIEW_AS_LIST,action:function(){return u(h.X.LIST)},checked:o===h.X.LIST}),(0,r.jsx)(b.MenuRadioItem,{id:"view-as-grid",group:"view-as",label:Te.Z.Messages.FORUM_CHANNEL_VIEW_AS_GRID,action:function(){return u(h.X.GRID)},checked:o===h.X.GRID})]}),(0,r.jsx)(b.MenuGroup,{children:(0,r.jsx)(b.MenuItem,{id:"reset-all",className:wa().clearText,label:(0,r.jsx)(b.Text,{variant:"text-sm/medium",color:"none",children:Te.Z.Messages.FORUM_CHANNEL_RESET_ALL}),action:function(){c(t.getDefaultSortOrder());u(t.getDefaultLayout())}})})]})})}
var Ma=n(516217),Pa=n(840474),Ra=n(833589),La=n(841150),Za=n(791707),Da=n(804808),ka=n(550131),Ha=n(30778),Fa=n(103295),Ua=n(652900),Ba=n(203244),Ga=n(952273),Va=n(190624),za=n(841800),Wa=n(717091),Ka=n(840922),qa=n(579722),Ya=n(159689),Xa=n(776009),$a=n(507488),Qa=n(715173),Ja=n(763536),eo=n(70145),to=n(674301),no=n(524600),ro=n(926578);var io=n(661076),ao=n(493254),oo=n(379364),so=n(939198),lo=n(531179),co=n.n(lo),uo=n(710978),fo=n.n(uo);function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mo(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function go(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){go(e,t,n[t])}))}return e}function vo(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function bo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ho(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Oo=function(e,t){var n,r,i,a,o={
label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{
value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};var xo,Co,So=(Co=(xo=function(){return Oo(this,(function(e){switch(e.label){case 0:return[4,n.e(61029).then(n.t.bind(n,640002,19))];case 1:return[2,e.sent().default]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var i=xo.apply(e,t);function a(e){mo(i,n,r,a,o,"next",e)}function o(e){mo(i,n,r,a,o,"throw",e)}a(void 0)}))}),function(){return Co.apply(this,arguments)});function jo(e){var t=e.shouldAnimate,n=void 0!==t&&t,i=(0,g.e7)([S.Z],(function(){return S.Z.useReducedMotion}));return(0,r.jsxs)("div",{className:co().startTheConversation,children:[(0,r.jsx)(Xa.Z,{importData:So,shouldAnimate:n&&!i,className:co().wavingHand}),(0,r.jsx)(b.Text,{variant:"text-sm/normal",color:"text-muted",children:Te.Z.Messages.FORUM_START_THE_CONVERSATION_HEADER})]})}const Eo=i.memo((function(e){var t=e.className,n=e.threadId,a=e.goToThread,s=e.observePostVisibilityAnalytics,l=i.useRef(null),c=function(e){var t=e.threadId,n=(0,
g.e7)([k.Z],(function(){return k.Z.getChannel(t)}));fn()(null!=n,"the thread should not be null here, a store must have missed an update");var r=(0,g.e7)([D.ZP],(function(){return D.ZP.getCurrentSidebarChannelId(n.parent_id)===n.id})),i=(0,Ai.cl)(n),a=i.loaded,o=i.firstMessage,s=(0,Q.mX)({firstMessage:o}),l=s.content,c=s.firstMedia,u=s.firstMediaIsEmbed,d=(0,Q.nP)(n),f=d.messageCount,h=d.unreadCount;return{channel:n,isOpen:r,messageCount:f,unreadCount:h,firstMessage:o,firstMessageLoaded:a,firstMedia:c,firstMediaIsEmbed:u,content:l}}({threadId:n}),u=c.channel,f=c.isOpen,h=c.messageCount,m=c.unreadCount,p=c.firstMessage,v=c.firstMessageLoaded,y=c.firstMedia,O=c.firstMediaIsEmbed,C=(0,g.e7)([k.Z],(function(){return k.Z.getChannel(u.parent_id)})),S=(0,x.Z)(),j=S.ref,E=S.height,_=(0,ht.xH)((function(e){return e.setCardHeight})),N=yo(i.useState(162),2),T=N[0],A=N[1];i.useEffect((function(){if(null!=E){_(n,E+26);A(E)}}),[j,E,_,n,A,v]);i.useEffect((function(){null==s||s(l.current,n)}),[s,n,v])
;var w=i.useRef(null),I=(0,sa.Z)({facepileRef:w,goToThread:a,channel:u}),M=I.handleLeftClick,P=I.handleRightClick,R=(0,d.JA)(n),L=(R.role,R.onFocus),Z=bo(R,["role","onFocus"]),H=(0,io.Z)(L),F=H.handleFocus,U=H.handleBlur;return(0,r.jsxs)("div",{ref:l,"data-item-id":n,onClick:M,onContextMenu:P,className:o()(co().container,t,go({},co().isOpen,f)),children:[(0,r.jsx)(b.Clickable,po({onClick:M,focusProps:{ringTarget:l},onContextMenu:P,"aria-label":Te.Z.Messages.FORUM_POST_ARIA_LABEL.format({title:u.name,count:h}),className:co().focusTarget,onFocus:F,onBlur:U},Z)),(0,r.jsxs)("div",{className:co().body,children:[(0,r.jsx)("div",{ref:j,className:co().contentContainer,children:v?(0,r.jsx)(_o,{parentChannel:C,channel:u,firstMessage:p,messageCount:h,unreadCount:m,facepileRef:w,onClick:M}):(0,r.jsx)(Na,{})}),v?(null==p?void 0:p.blocked)||null==y?null:(0,r.jsx)(Do,{channel:u,firstMedia:y,firstMessage:p,isEmbed:O,contentHeight:T}):(0,r.jsx)(_a,{})]})]})}));function _o(e){
var t=e.parentChannel,n=e.channel,i=e.firstMessage,a=e.messageCount,o=e.unreadCount,s=e.facepileRef,l=e.onClick,c=(0,Q.J$)(n).isNew,u=(0,zi.DM)({channel:n,isNew:c}).forumPostContainsTags;return(0,r.jsxs)("div",{className:co().content,children:[(0,r.jsxs)("div",{className:co().titleAndMessage,children:[u&&(0,r.jsx)(zi.f6,{channel:n,className:co().tagsRow,tagsClassName:co().tags}),u&&(0,r.jsx)("hr",{className:co().separator}),(0,r.jsx)(Zo,{channel:n,firstMessage:i,isNew:c,containsTags:u}),(0,r.jsx)(b.HeadingLevel,{children:(0,r.jsx)(wo,{channel:n,onClick:l})}),null!=i&&(0,r.jsx)(No,{firstMessage:i})]}),(0,r.jsxs)("div",{className:co().engagement,children:[null!=i&&(0,r.jsx)(Po,{channel:n,firstMessage:i}),(0,r.jsx)(To,{parentChannel:t,channel:n,messageCount:a,unreadCount:o,facepileRef:s})]})]})}function No(e){var t=e.firstMessage,n=(0,g.e7)([Ka.Z],(function(){return null!=t&&Ka.Z.isBlocked(t.author.id)})),a=i.useMemo((function(){return null!=(null==t?void 0:t.content)&&""!==t.content?(0,
Da.ZP)(t,{formatInline:!0,noStyleAndInteraction:!0,allowHeading:!0,allowList:!0}):{content:null}}),[t]).content;return(0,r.jsx)(b.FocusBlock,{"aria-hidden":!0,className:co().firstMessageContent,children:n?Te.Z.Messages.FORUM_POST_BLOCKED_FIRST_MESSAGE:null==a?Te.Z.Messages.REPLY_QUOTE_MESSAGE_DELETED:a})}function To(e){var t,n=e.parentChannel,i=e.channel,a=e.messageCount,s=e.unreadCount,l=e.facepileRef,c=(0,Q.Q)(i),u=(0,Ai.ZK)(n,i).mostRecentMessage,d=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.SEND_MESSAGES_IN_THREADS,i)})),f=(0,Q.J$)(i).hasUnreads,h=(0,g.e7)([X.Z],(function(){return X.Z.getFirstNoReplyThreadId()})),m=(0,R.Gu)(i),p=(0,ka.Uj)(u);if(a>0){var v;return(0,r.jsxs)(b.Clickable,{onClick:function(e){if(null!=u&&null!=i.parent_id){e.stopPropagation();(0,ne.B5)({guildId:i.guild_id,channelId:i.parent_id,postId:i.id,location:{page:Ne.ZY5.GUILD_CHANNEL,section:Ne.jXE.FORUM_CHANNEL_POST}});e.shiftKey?(0,I.gt)(i,u.id,oo.on.BROWSER):Va.Z.openThreadAsSidebar({guildId:i.guild_id,
channelId:i.id,baseChannelId:i.parent_id,flash:!0,details:{type:za.F.THREAD,initialMessageId:u.id}})}},children:[(0,r.jsxs)(b.HiddenVisually,{children:["Latest message:",null!=p?null!==(v=p.nick)&&void 0!==v?v:Te.Z.Messages.UNKNOWN_USER:null," ",(t=null==u?void 0:u.content,null==t?"":t.length>120?"".concat(t.substring(0,120),"..."):t)]}),(0,r.jsxs)(b.FocusBlock,{className:co().replies,children:[(0,r.jsx)(Ro,{messageCount:a,unreadCount:s,iconSize:16}),c.length>0?(0,r.jsx)(Ao,{channel:i,typingUserIds:c,facepileRef:l}):(0,r.jsx)(Mo,{channel:i,mostRecentMessage:u,hasUnreads:f})]})]})}return m?(0,r.jsx)("div",{className:co().replies,children:(0,r.jsx)(b.Text,{variant:"text-sm/semibold",color:"text-muted",className:o()(co().mostRecentMessageContent,co().nonUserMessage,co().lockedMessage),children:Te.Z.Messages.THREAD_HEADER_NOTICE_ACTIVE_LOCKED})}):d&&0===a?(0,r.jsx)(b.FocusBlock,{"aria-hidden":!0,className:co().replies,children:c.length>0?(0,r.jsx)(Ao,{channel:i,typingUserIds:c,
facepileRef:l}):(0,r.jsx)(jo,{shouldAnimate:h===i.id})}):null}function Ao(e){var t=e.channel,n=e.typingUserIds,i=e.facepileRef;return(0,r.jsxs)("div",{className:co().typing,children:[(0,r.jsx)(Jt.og,{channel:t,userIds:n,facepileRef:i}),(0,r.jsx)("div",{className:co().dots,children:(0,r.jsx)(b.Dots,{themed:!0,dotRadius:2})}),(0,r.jsx)(yi.Z,{channel:t,className:co().typingUsers,renderDots:!1})]})}function wo(e){var t=e.channel,n=e.onClick,a=(0,Q.J$)(t).hasUnreads,o=function(e){var t=(0,g.e7)([no.Z],(function(){return no.Z.getHasSearchResults()})),n=(0,g.e7)([no.Z],(function(){return no.Z.getSearchQuery(e.parent_id)})),r=i.useMemo((function(){return(0,Pa.nC)(t&&null!=n?n:"")}),[t,n]);return i.useMemo((function(){return(0,Da.ZP)({content:e.name,embeds:[]},{postProcessor:r}).content}),[e.name,r])}(t);return(0,r.jsx)(b.Heading,{variant:"heading-lg/semibold",color:a?"header-primary":"text-muted",className:co().title,children:(0,r.jsx)(b.Clickable,{onClick:n,children:o})})}function Io(e){
var t,n=e.channel,a=e.mostRecentMessage,s=e.hasUnreads,l=(0,ka.Uj)(a),c=(0,g.e7)([Ka.Z],(function(){return null!=a&&Ka.Z.isBlocked(a.author.id)})),u=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.MANAGE_MESSAGES,n)})),d=Ci.cC.useSetting(),f=function(e){var t,n=(0,g.e7)([ro.Z],(function(){return ro.Z.getMessageState(e.id)})),r=n.loaded,i=n.message;return r&&(null!==(t=e.messageCount)&&void 0!==t?t:0)>0&&null==i}(n),h=i.useMemo((function(){return null!=(null==a?void 0:a.content)&&""!==a.content?(0,Da.ZP)(a,{formatInline:!0,noStyleAndInteraction:!0}):{content:null}}),[a]).content,m=null!=a&&(0,Za.Z)(a),p=null;if(c)p=(0,r.jsx)(b.Text,{className:co().nonUserMessage,variant:"text-sm/medium",color:"text-muted",children:Te.Z.Messages.FORUM_POST_BLOCKED_MOST_RECENT_MESSAGE});else{var v=null==a?{contentPlaceholder:null,renderedContent:null}:m?{contentPlaceholder:null,renderedContent:to.Z.stringify(a,n)}:(0,Ja.f)(a,h,c,o()(co().mostRecentMessageContent,Bt().inlineFormat,Bt().smallFontSize),{
iconClass:co().messageContentIcon,iconSize:so.WW}),y=v.contentPlaceholder,O=v.renderedContent;p=null!=O?(0,r.jsx)(b.Text,{variant:"text-sm/semibold",color:s?"header-secondary":"text-muted",className:co().mostRecentMessageContent,children:O}):null!=y?(0,r.jsx)(b.Text,{variant:"text-sm/semibold",color:s?"header-secondary":"text-muted",className:co().mostRecentMessageContent,children:y}):f?(0,r.jsx)(b.Text,{variant:"text-sm/semibold",color:s?"header-secondary":"text-muted",className:o()(co().mostRecentMessageContent,co().nonUserMessage),children:Te.Z.Messages.FORUM_CHANNEL_MOST_RECENT_MESSAGE_DELETED}):null}var x=null!=l?null!==(t=l.nick)&&void 0!==t?t:Te.Z.Messages.UNKNOWN_USER:null,C=(0,Ga.l)(null==a?void 0:a.author,n.id,n.guild_id,!0)(null!=l?l:void 0)((0,r.jsxs)(r.Fragment,{children:[null!=x?x:"",null!=a?":":""]}),n.id);return(0,r.jsx)($a.a.Provider,{value:(0,Oi.Z)(d,u),children:(0,r.jsxs)("div",{className:co().mostRecentMessage,children:[null==x||m?null:(0,r.jsx)("div",{
className:co().mostRecentMessageAuthor,children:(0,r.jsx)(b.Text,{tag:"span",variant:"text-sm/semibold",children:C})}),(0,r.jsx)(b.FocusBlock,{children:p})]})})}var Mo=i.memo(Io);function Po(e){var t=e.channel,n=e.firstMessage,a=(0,g.e7)([k.Z],(function(){return k.Z.getChannel(t.parent_id)})),s=(0,Q.Bs)(a),l=(0,Ha.Z)(t),c=l.disableReactionUpdates,u=l.disableReactionCreates,d=l.isLurking,f=l.isPendingMember,h=!((0,Ua.w)(n.reactions,s)>=0)&&!u,m=(0,Ma.Qd)(t.guild_id),p=m.enabled,v=m.hasTwoButtonEntryPoint,b=(0,g.e7)([Ra.Z],(function(){return Ra.Z.remainingBurstCurrency})),y=(0,x.Z)(),O=y.ref,C=y.width,S=yo(i.useState(10),2),j=S[0],E=S[1],_=yo(i.useState(!0),2),N=_[0],T=_[1];i.useEffect((function(){if(null!=C){var e=Math.floor((C-78)/66);E(e);T(!1)}}),[C,n.reactions,s]);return(0,r.jsxs)("div",{className:o()(co().reactionRow,go({},co().loading,N)),ref:O,children:[h&&null!=s?(0,r.jsx)(Ba.le,{className:co().defaultReaction,message:n,readOnly:!1,useChatFontScaling:!0,isLurking:d,
isPendingMember:f,emoji:s,type:La.O.NORMAL,hideCount:!0,count:0,me:!1,burst_count:0,me_burst:!1}):null,(0,r.jsx)(Ua.Z,{message:n,channel:t,disableReactionCreates:u,disableReactionUpdates:c,useChatFontScaling:!0,className:co().messageReactions,reactionClassName:co().reaction,hoistReaction:s,forceHideReactionCreates:!0,maxReactions:j}),(0,r.jsxs)("div",{className:co().addReactionContainer,children:[!u&&(0,r.jsx)(Fa.X,{type:La.O.NORMAL,message:n,channel:t,useChatFontScaling:!0,className:co().addReactButton,isForumToolbar:!1}),!u&&p&&v&&(0,r.jsx)(Fa.X,{type:La.O.BURST,remainingBurstCurrency:b,message:n,channel:t,useChatFontScaling:!0,isForumToolbar:!1,className:co().addReactButton})]})]})}function Ro(e){var t=e.messageCount,n=e.unreadCount,i=e.iconSize;return(0,r.jsxs)("div",{className:co().messageCountBox,children:[(0,r.jsx)("span",{className:co().messageCountIcon,children:(0,r.jsx)(be.Z,{width:i,height:i})}),"number"==typeof t?(0,r.jsx)(qa.Z,{value:t,className:co().messageCountText}):(0,
r.jsx)("div",{className:co().messageCountText,children:t}),null==n?null:(0,r.jsx)(b.Text,{className:co().unreadMessagesCount,variant:"text-sm/semibold",color:"text-brand",children:Te.Z.Messages.FORUM_POST_MESSAGE_COUNT_SHORT_PARENTHETICAL.format({count:n})})]})}function Lo(e){var t,n=e.channel,i=(0,$.H)(n.parent_id).sortOrder,a=(0,Q.xw)(n,i),o=(0,g.e7)([Wa.ZP],(function(){return Wa.ZP.lastMessageId(n.id)})),s=null!=o?ce.default.extractTimestamp(o):null,l=null===(t=n.threadMetadata)||void 0===t?void 0:t.createTimestamp,c=null==a?null:i===vi.z.CREATION_DATE?Te.Z.Messages.FORUM_POST_CREATED_AT_TOOLTIP.format({timestamp:a}):a,u=i===vi.z.CREATION_DATE&&null!=l?Te.Z.Messages.FORUM_POST_CREATED_AT_TOOLTIP.format({timestamp:(0,eo.vc)(ae()(l),"LLLL")}):null!=s?(0,eo.vc)(ae()(s),"LLLL"):null;return null==u||null==c?null:(0,r.jsx)(b.Tooltip,{text:u,tooltipClassName:co().timestampTooltip,"aria-label":Te.Z.Messages.FORUM_POST_CREATED_AT_TOOLTIP_LABEL,children:function(e){return(0,
r.jsx)(b.Text,vo(po({variant:"text-xs/medium",color:"header-secondary"},e),{children:c}))}})}function Zo(e){var t=e.channel,n=e.firstMessage,i=e.isNew,a=e.containsTags,o=t.hasFlag(Yr.zZ.PINNED),s=(0,g.e7)([Ka.Z],(function(){return null!=n&&Ka.Z.isBlocked(n.author.id)}));return(0,r.jsxs)("div",{className:co().header,children:[!a&&o&&(0,r.jsx)("div",{className:co().pinIcon,children:(0,r.jsx)(b.Tooltip,{text:Te.Z.Messages.PINNED_POST,children:function(e){return(0,r.jsx)(Qa.Z,vo(po({},e),{width:zi.qS,height:zi.qS,color:"white"}))}})}),!s&&(0,r.jsx)(Vi.Z,{channel:t,message:n}),(0,r.jsx)(Lo,{channel:t}),i&&(0,r.jsx)(et.IG,{className:co().newBadge,color:bi.Z.unsafe_rawColors.BRAND_260.css,text:Te.Z.Messages.NEW})]})}function Do(e){var t=e.channel,n=e.firstMedia,i=e.firstMessage,a=e.isEmbed,s=e.contentHeight,l=(0,g.e7)([B.Z],(function(){return B.Z.isFocused()})),c=(0,g.e7)([mr.Z],(function(){return mr.Z.can(Ne.Plq.MANAGE_MESSAGES,t)
})),u=ao.LR.test(n.src),d=Ci.QK.useSetting(),f=Ci.cC.useSetting(),h=n.src,m=n.width,p=n.height,v=n.spoiler,y=n.alt,O=v&&!(0,Oi.Z)(f,c);return(0,r.jsx)(b.FocusBlock,{enabled:!0,children:(0,r.jsxs)("div",{className:o()(co().bodyMedia,go({},fo().embedFull,a)),style:{height:s,borderColor:(0,wi.dE)(i,O)},onClick:function(e){return e.stopPropagation()},children:[h.startsWith("data:")?(0,r.jsx)(Ya.Z,{src:h,width:m,height:p,minWidth:143,minHeight:s,maxHeight:s,alt:null!=y&&O?Te.Z.Messages.SPOILER_HIDDEN_A11Y_LABEL:y,imageClassName:o()(go({},co().spoiler,O))}):(0,xi.Yi)({src:h,width:m,height:p,minWidth:143,minHeight:s,maxHeight:s,alt:null!=y&&O?Te.Z.Messages.SPOILER_HIDDEN_A11Y_LABEL:y,autoPlay:d,animated:u&&!O&&l,imageContainerClassName:o()(go({},co().spoiler,O))}),O&&(0,r.jsx)(Ni.Z,{className:co().spoilerTag})]})})}n(240025);var ko=n(151716),Ho=[];function Fo(){return Ho.join(" -> ")}var Uo=new ko.Z("Flux"),Bo=function(e){return e()},Go=function(){function e(){!function(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.changedStores=new Set;this.reactChangedStores=new Set;this.changeSentinel=0;this.isBatchEmitting=!1;this.isDispatching=!1;this.isPaused=!1;this.pauseTimer=null}var t=e.prototype;t.destroy=function(){this.changedStores.clear();this.reactChangedStores.clear();Bo=function(e){return e()}};t.injectBatchEmitChanges=function(e){Bo=e};t.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;this.isPaused=!0;null!==this.pauseTimer&&clearTimeout(this.pauseTimer);null!==e&&(this.pauseTimer=setTimeout((function(){t.pauseTimer=null;t.resume()}),e))};t.resume=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;clearTimeout(this.pauseTimer);this.pauseTimer=null;if(this.isPaused){this.isPaused=!1;e&&this.changedStores.size>0&&setImmediate((function(){return t.emit()}))}};t.batched=function(e){if(this.isPaused)return e();try{this.isPaused=!0
;return e()}finally{this.resume(!1);this.emit()}};t.emit=function(){var e=this;this.isBatchEmitting||this.isPaused||Bo((function(){try{e.isBatchEmitting=!0;e.changeSentinel++;for(var t=0;e.changedStores.size>0;){if(++t>100){Uo.error("LastFewActions",Fo());throw Error("change emit loop detected, aborting")}e.emitNonReactOnce()}for(;e.reactChangedStores.size>0;){if(++t>100){Uo.error("LastFewActions",Fo());throw Error("react change emit loop detected, aborting")}e.emitReactOnce()}}finally{e.isBatchEmitting=!1}}))};t.getChangeSentinel=function(){return this.changeSentinel};t.getIsPaused=function(){return this.isPaused};t.markChanged=function(e){e._changeCallbacks.hasAny()&&this.changedStores.add(e);e._reactChangeCallbacks.hasAny()&&this.reactChangedStores.add(e);this.isBatchEmitting||this.isDispatching||this.isPaused||this.emit()};t.emitNonReactOnce=function(){var e=this,t=Date.now(),n=this.changedStores;this.changedStores=new Set;n.forEach((function(t){0;t._changeCallbacks.invokeAll()
;e.changedStores.delete(t)}));var r=Date.now();r-t>100&&Uo.log("Slow batch emitChanges took ".concat(r-t,"ms recentActions:"),Fo())};t.emitReactOnce=function(){var e=this,t=Date.now(),n=this.reactChangedStores;this.reactChangedStores=new Set;n.forEach((function(t){0;t._reactChangeCallbacks.invokeAll();e.reactChangedStores.delete(t)}));var r=Date.now();r-t>100&&Uo.log("Slow batch emitReactChanges took ".concat(r-t,"ms recentActions:"),Fo())};return e}();const Vo=new Go;var zo=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.handleStoreChange=function(){var e=Vo.getChangeSentinel();if(r.storeVersionHandled!==e){r.changeCallback();r.storeVersionHandled=e}};this.stores=t;this.changeCallback=n}var t=e.prototype;t.attach=function(e){var t=this;this.stores.forEach((function(n,r){
if(null==n)throw new Error("".concat(e," tried to load a non-existent store. Either it isn't defined or there is a circular dependency. Loaded ").concat(r," stores before error."));n.addReactChangeListener(t.handleStoreChange)}))};t.detach=function(){var e=this;this.stores.forEach((function(t){return t.removeReactChangeListener(e.handleStoreChange)}))};return e}(),Wo=(n(559280),n(803996)),Ko=n.n(Wo),qo=n(244698);n(103539),n(850343),n(150736);new ko.Z("Flux");new Set(["APP_STATE_UPDATE","CONNECTION_CLOSED","CONNECTION_OPEN","CONNECTION_RESUMED","LOGIN_SUCCESS","LOGIN","LOGOUT","MESSAGE_SEND_FAILED","PUSH_NOTIFICATION_CLICK","RESET_CONNECTION","SESSION_START","UPLOAD_FAIL"]),new ko.Z("Flux");var Yo=n(298784),Xo=n.n(Yo),$o=n(164497);var Qo=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.listeners=new Set;this.add=function(e){t.listeners.add(e)};this.remove=function(e){t.listeners.delete(e)}
;this.addConditional=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n||!1!==e()){var r=function(){!1===e()&&t.remove(r)};t.add(r)}}}var t=e.prototype;t.has=function(e){return this.listeners.has(e)};t.hasAny=function(){return this.listeners.size>0};t.invokeAll=function(){this.listeners.forEach((function(e){return e()}))};return e}();function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e){return function(e){if(Array.isArray(e))return Jo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ts,ns=[],rs=!1,is=new Promise((function(e){ts=function(){e();ts=null}}));var as=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._changeCallbacks=new Qo;this._reactChangeCallbacks=new Qo;this._isInitialized=!1;this.addChangeListener=this._changeCallbacks.add;this.addConditionalChangeListener=this._changeCallbacks.addConditional;this.removeChangeListener=this._changeCallbacks.remove;this.addReactChangeListener=this._reactChangeCallbacks.add;this.removeReactChangeListener=this._reactChangeCallbacks.remove;this._dispatcher=t;this._dispatchToken=this._dispatcher.createToken();null!==n&&this.registerActionHandlers(null!=n?n:{},r);ns.push(this);0;rs&&this.initializeIfNeeded()}var t=e.prototype;t.registerActionHandlers=function(e,t){var n=this
;this._dispatcher.register(this.getName(),e,(function(e){if(n._changeCallbacks.hasAny()||n._reactChangeCallbacks.hasAny()){Vo.markChanged(n);Vo.getIsPaused()&&null!=n._mustEmitChanges&&n._mustEmitChanges(e)&&Vo.resume(!1)}else 0}),t,this._dispatchToken)};t.getName=function(){var e;return null!==(e=this.constructor.displayName)&&void 0!==e?e:this.constructor.name};t.initializeIfNeeded=function(){if(!this._isInitialized){var e=Date.now();this.initialize();this._isInitialized=!0;var t=Date.now()-e;t>5&&qo.Z.mark("ðŸ¦¥",this.getName()+".initialize()",t)}};t.initialize=function(){};t.syncWith=function(e,t,n){var r=this;this.waitFor.apply(this,es(e));var i=0,a=function(){if(i!==Vo.getChangeSentinel()){i=Vo.getChangeSentinel();!1!==t()&&r.emitChange()}};a=function(e,t){var n=null;return 0===e?function(){clearImmediate(n);n=setImmediate(t)}:function(){null==n&&(n=setTimeout((function(){try{t()}finally{n=null}}),e))}}(null!=n?n:0,a);e.forEach((function(e){return e.addChangeListener(a)}))}
;t.waitFor=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this,i=t.map((function(e,t){Ko()(null!=e,"Store.waitFor(...) called with null Store at index ".concat(t," for store ").concat(r.getName()));if(null!=e._dispatcher){Ko()(e._dispatcher===r._dispatcher,"Stores belong to two separate dispatchers.");return e.getDispatchToken()}return null}));this._dispatcher.addDependencies(this.getDispatchToken(),i.filter((function(e){return null!=e})))};t.emitChange=function(){Vo.markChanged(this)};t.getDispatchToken=function(){return this._dispatchToken};t.mustEmitChanges=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};this._mustEmitChanges=e};e.initialize=function(){rs=!0;ns.forEach((function(e){return e.initializeIfNeeded()}));null!=ts&&ts()};e.destroy=function(){ns.length=0;Vo.destroy()};e.getAll=function(){return ns};return e}();as.initialized=is;function os(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ss(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ls(e){ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ls(e)}function cs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&fs(e,t)}function us(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function ds(e,t){return!t||"object"!==ms(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fs(e,t){fs=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return fs(e,t)}function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return os(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ms=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function gs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ls(e);if(t){var i=ls(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ds(this,n)}}var ps={_state:void 0,_version:void 0},vs=null,bs=function(e){cs(n,e);var t=gs(n);function n(e,r){ss(this,n);var i;(i=t.call(this,e,r))._version=null==i.getClass().migrations?0:i.getClass().migrations.length;i.callback=function(e){var t=i.getClass().persistKey;i.persist();n._writePromises.delete(t)
;n._writeResolvers.delete(t);e()};i.throttledCallback=Xo().throttle((function(e){return i.callback(e)}),i.getClass().throttleDelay,{leading:!1});if("string"!=typeof i.getClass().persistKey)throw new Error("".concat(i.getClass().name," initialized without a `persistKey`. Add one so we know where to save your stuff!"));if("function"!=typeof i.initialize)throw new Error("".concat(i.getClass().name," initialized without an `initialize` method. Add one that accepts the initial cached state."));if("function"!=typeof i.getState)throw new Error("".concat(i.getClass().name," initialized without a `getState` method. Add one that returns the full state of the store for persistance to work."));i.addChangeListener((function(){return i.asyncPersist()}));return i}var r=n.prototype;r.getClass=function(){return this.constructor};r.initializeFromState=function(e){this.initialize(e)&&this.asyncPersist();if(this._isInitialized)this.emitChange();else{n.allPersistKeys.add(this.getClass().persistKey)
;this._isInitialized=!0}};r.initializeIfNeeded=function(){if(!this._isInitialized){var e=Date.now();n.allPersistKeys.add(this.getClass().persistKey);var t=n.migrateAndReadStoreState(this.getClass().persistKey,this.getClass().migrations),r=t.state,i=t.requiresPersist;this.initialize(r)&&this.asyncPersist();i&&this.asyncPersist();this._isInitialized=!0;var a=Date.now()-e;a>5&&qo.Z.mark("ðŸ¦¥",this.getName()+".initialize()",a)}};r.asyncPersist=function(){var e=this,t=this.getClass(),r=t.persistKey,i=t.disableWrite,a=t.throttleDelay;if(n.disableWrites||i)return Promise.resolve(!1);var o=n._writePromises.get(r);if(null!=o)return o;o=new Promise((function(t){var i=a>0?function(){return e.throttledCallback(t)}:function(){return e.callback(t)};n._writeResolvers.set(r,[t,requestIdleCallback(i,{timeout:500})])}));n._writePromises.set(r,o);return o};r.persist=function(){var e=this.getClass().persistKey,t=this.getState(),n=this._version;$o.Z.set(e,{_state:t,_version:n})};r.clear=function(){
var e=this.getClass().persistKey;$o.Z.remove(e)};n.clearAll=function(e){vs=e;null==n._clearAllPromise&&(n._clearAllPromise=new Promise((function(t){requestIdleCallback((function(){n.clearPersistQueue(e);n.allPersistKeys.forEach((function(t){n.shouldClear(e,t)&&$o.Z.remove(t)}));as.getAll().forEach((function(t){if(t instanceof n&&n.shouldClear(e,t.getClass().persistKey)){t._isInitialized=!1;t.initializeIfNeeded()}}));n._clearAllPromise=null;t()}),{timeout:500})})));return n._clearAllPromise};n.shouldClear=function(e,t){var r;return!(null===(r=e.omit)||void 0===r?void 0:r.includes(t))&&("all"===e.type||"user-data-only"===e.type&&!n.userAgnosticPersistKeys.has(t))};n.clearPersistQueue=function(e){n._writeResolvers.forEach((function(t,r){var i=hs(t,2),a=i[0],o=i[1];if(n.shouldClear(e,r)){n._writePromises.delete(r);n._writeResolvers.delete(r);cancelIdleCallback(o);a(!1)}}));n._writePromises.clear();n._writeResolvers.clear()};n.getAllStates=function(){
return Promise.all(Array.from(n._writePromises.values())).then((function(){var e={};n.allPersistKeys.forEach((function(t){var n;e[t]=(null!==(n=$o.Z.get(t))&&void 0!==n?n:ps)._state}));return e}))};n.initializeAll=function(e){as.getAll().forEach((function(t){if(t instanceof n){var r=t.getClass().persistKey;if(!e.hasOwnProperty(r))return;t.initializeFromState(e[r])}}))};n.destroy=function(){vs=null;as.destroy();n.clearPersistQueue({type:"all"});n.allPersistKeys.clear();n.userAgnosticPersistKeys.clear()};n.migrateAndReadStoreState=function(e,t){if(null!=vs&&n.shouldClear(vs,e)){$o.Z.remove(e);return{state:void 0,requiresPersist:!1}}var r=null!=n._clearAllPromise?null:$o.Z.get(e),i=null!=r?r:ps,a=i._state,o=i._version,s=us(i,["_state","_version"]),l=null==t?0:t.length;if(0!==l&&o!==l&&null!=t){var c=null!=o?o:0,u=a;null==o&&(u=s);for(;c<l;){u=(0,t[c])(u);c++}return{state:u,requiresPersist:!0}}return Object.values(s).length>0?{state:s,requiresPersist:!0}:{state:a,requiresPersist:!1}}
;return n}(as);bs.allPersistKeys=new Set;bs.userAgnosticPersistKeys=new Set;bs._writePromises=new Map;bs._writeResolvers=new Map;bs.disableWrites=!1;bs.disableWrite=!1;bs.throttleDelay=0;n(972880);function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ys(e,t)
}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xs(e,t){return null!=t&&e.length===t.length&&!e.some((function(e,n){return t[n]!==e}))}function Cs(e,t){return e===t}function Ss(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Cs,a=(0,i.useRef)({stores:e,areStatesEqual:r,getStateFromStores:t,prevDeps:void 0,state:void 0}),o=a.current;0;var s=o.state;null!=n&&xs(n,o.prevDeps)||(s=t());(0,i.useLayoutEffect)((function(){o.getStateFromStores=t;o.prevDeps=n;o.state=s}));var l=Os((0,i.useState)(null),2),c=l[1];(0,i.useLayoutEffect)((function(){var t=function(){var e=o.getStateFromStores();if(!r(o.state,e)){o.state=e;c({})}};t();var n=new zo(e,t);n.attach("useStateFromStores");return function(){return n.detach()}}),[]);return s}function js(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0
}):e[t]=n;return e}function Es(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function _s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function Ns(){return Promise.resolve()}function Ts(e){var t=e.channel,n=e.closePopout,a=e.setPopoutRef,o=(0,Q.Vm)(t),s=(0,$.H)(t.id).tagFilter,l=(0,
$.v)(),c=Ss([S.Z],(function(){return S.Z.keyboardModeEnabled})),f=i.useCallback((function(e){(0,ne.e7)({guildId:t.guild_id,channelId:t.id,tagId:e,filterTagIds:Array.from(s),added:!s.has(e),location:{page:Ne.ZY5.GUILD_CHANNEL,section:Ne.jXE.FORUM_CHANNEL_HEADER,object:Ne.qAy.CHANNEL_TAG}});l.getState().toggleTagFilter(t.id,e)}),[t,s,l]),h=i.useCallback((function(){l.getState().setTagFilter(t.id,new Set);c||n()}),[l,t.id,c,n]),m=(0,u.ZP)({id:"".concat(t.id,"-all-tags-dropdown-navigator"),isEnabled:!0,wrap:!0,scrollToStart:Ns,scrollToEnd:Ns}),g=i.useRef(null);i.useEffect((function(){requestAnimationFrame((function(){if(null!=g.current){var e=g.current.querySelector(".".concat(Mr().tag));null!=e&&e.focus()}}))}),[]);return(0,r.jsxs)(b.Dialog,{ref:a,"aria-label":Te.Z.Messages.FORUM_TAG_FILTER_HEADER,className:Mr().container,children:[(0,r.jsx)("div",{className:Mr().header,children:(0,r.jsxs)("div",{className:Mr().headerLeft,children:[(0,r.jsx)(b.Heading,{color:"interactive-normal",
variant:"text-xs/bold",className:Mr().headerText,children:Te.Z.Messages.FORUM_TAG_POST_SELECT}),(0,r.jsx)("div",{className:Mr().countContainer,children:(0,r.jsx)(b.Text,{className:Mr().countText,color:"none",variant:"text-xs/medium",children:s.size})})]})}),(0,r.jsx)(d.bG,{navigator:m,children:(0,r.jsx)(d.SJ,{children:function(e){var t=e.ref,n=_s(e,["ref"]);return(0,r.jsx)("div",Es(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){js(e,t,n[t])}))}return e}({ref:function(e){t.current=e;g.current=e}},n),{className:Mr().tagContainer,children:o.map((function(e){return(0,r.jsx)(Lr.ZP,{className:Mr().tag,tag:e,selected:s.has(e.id),onClick:function(){return f(e.id)}},e.id)}))}))}})}),(0,r.jsx)("div",{className:Mr().separator}),(0,
r.jsx)(b.Button,{look:b.Button.Looks.LINK,size:b.Button.Sizes.MIN,color:b.Button.Colors.CUSTOM,className:Mr().clear,"aria-label":Te.Z.Messages.FORUM_CLEAR_ALL,onClick:h,children:(0,r.jsx)(b.Text,{variant:"text-sm/medium",color:"text-link",children:Te.Z.Messages.FORUM_CLEAR_ALL})})]})}var As=n(707839),ws=n.n(As),Is=n(840008),Ms=n.n(Is);function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rs(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Rs(e,t,n[t])}))}return e}function Zs(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Ds(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){
var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){s=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hs=.5;function Fs(e){var t=e.channel,n=e.guild,i=e.sidebarState;return(0,r.jsx)(ht.oL,{createStore:function(){return(0,ht.NU)(t)},children:(0,r.jsx)(qs,{channel:t,guild:n,sidebarState:i})},t.id)}var Us=new Fi({minWidth:320,maxWidth:450,gap:16});function Bs(e){
return"forum-grid-header-section-".concat(e)}var Gs=function(e,t,n){return 0===e?0:Gi(n)};function Vs(e){var t=e.itemRole,n=e.coords,i=e.section;return(0,r.jsx)("div",{className:o()(nn().card,nn().archivedDividerRow,nn().columnsSpan),style:n,"data-item-role":t,children:(0,r.jsx)("div",{className:nn().emptyMainCard,children:(0,r.jsx)(b.Heading,{variant:"eyebrow",className:nn().archivedDivider,id:Bs(i),children:Te.Z.Messages.FORUM_SECTION_ARCHIVED})})},"section-divider")}function zs(e){var t=e.section,n=e.coords,i=e.key,a=e.isShowingSearchResult,o=e.hasActiveThreads;return function(){return 2===t&&!a&&o?(0,r.jsx)(Vs,{section:t,coords:null==n?void 0:Zs(Ls({},n),{position:"absolute"}),itemRole:"section"},i):null}}function Ws(e,t){return"card-".concat(e,"-").concat(t)}function Ks(e){if("string"==typeof e){var t=e.match(/card-{\d+}-({\d+})$/);return null==t?null:t[1]}return null}function qs(e){var t=e.channel,n=e.sidebarState,a=(0,ht.xH)((function(e){return{editorHeight:e.editorHeight,
editorAdditionRowHeight:e.editorAdditionRowHeight,listViewCardHeights:e.listViewCardHeights,formOpen:e.formOpen,cardHeightVersion:e.cardHeightVersion}}),c.Z),s=a.editorHeight,l=a.editorAdditionRowHeight,m=a.listViewCardHeights,p=a.formOpen,v=function(e){var t=(0,$.H)(e.id),n=t.sortOrder,r=t.tagFilter,i=t.layoutType,a=(0,Q.vP)({channel:e,sortOrder:n,tagFilter:r,shouldAutomaticallyAck:!0}),o=(0,g.e7)([M.Z],(function(){return!M.Z.hasLoaded(e.guild_id)})),s=(0,Q.M1)(e).gridViewUpsellLoading,l=(0,P.qQ)(e,n,r),c=l.threadIds,u=l.canLoadMore,d=l.loadMore,f=l.loading,h=(0,Q.XZ)({channelId:e.id}),m=h.searchResults,p=h.isSearchLoading,v=o||f||s||p;(0,Q.ES)(e,n,r);return{activeThreadIds:a,archivedThreadIds:c,searchResults:m,canLoadMore:u,loadMore:d,loading:v,archivedThreadsLoading:f,activeThreadsLoading:o,gridViewUpsellLoading:s,isSearchLoading:p,layoutType:i}
}(t),y=v.activeThreadIds,x=v.archivedThreadIds,C=v.searchResults,j=v.canLoadMore,E=v.loadMore,_=v.activeThreadsLoading,N=v.archivedThreadsLoading,T=v.loading,R=v.isSearchLoading,Z=v.layoutType,F=y.length>0,U=F||x.length>0,B=(0,A.Z)(t),G=(0,$.H)(t.id).tagFilter;(0,Q.ku)(t,G,p);var V=(0,Q.jR)(t),z=(0,Q.eZ)(t),W=i.useRef(null),K=function(e){var t=e.guildId,n=e.channelId,r=e.scrollerRef;te.useForumChannelSeenManager({guildId:t,channelId:n});var a=i.useRef(null),o=i.useCallback((function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,l=s.target.dataset.itemId;if(null==l)return;var c=Date.now();s.intersectionRatio>=Hs?(0,ee.rj)(e,l,c):(0,ee.Ct)(e,l,c)}}catch(e){r=!0;i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}),[]);i.useEffect((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.getScrollerNode();if(null!=t){a.current=new IntersectionObserver((function(e){return o(n,e)}),{root:t,
rootMargin:"0px 100000px 0px 100000px",threshold:Hs});return function(){var e;null===(e=a.current)||void 0===e||e.disconnect();a.current=null}}}),[n,o,r]);var s=i.useCallback((function(e,t){var r;null!=e?null===(r=a.current)||void 0===r||r.observe(e):(0,ee.Ct)(n,t,Date.now())}),[n]);return{observePostVisibilityAnalytics:s}}({scrollerRef:W,channelId:t.id,guildId:t.guild_id}).observePostVisibilityAnalytics,Y=Z===h.X.GRID,X=null!=C,J=i.useRef(null),ie=qr(),ae=ie.containerRef,oe=ie.containerWidth,se=i.useMemo((function(){return Y?Us.getRenderOptions(oe):Ui}),[Y,oe]).columns,le=i.useMemo((function(){return T?Math.round((window.innerHeight-200)/118):0}),[T]),ce=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/Gi(Us.getWidth(oe)))*se;return _?t:0}),[oe,se,_]),ue=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/Gi(Us.getWidth(oe)))*se;return N?t:0}),[oe,se,N]),de=i.useMemo((function(){var e=window.innerHeight,t=Math.ceil(e/Gi(Us.getWidth(oe)))*se;return R&&X?t:0
}),[oe,se,R,X]),fe=i.useMemo((function(){return Y?!V&&X?[1,0]:z?X?[1,C.length+de,0]:[1,y.length+ce,x.length+ue]:[1,y.length+ce,0]:!V&&X?[1,1]:z?X?[1,C.length,0,le]:[1,y.length,x.length,le]:[1,y.length,1]}),[Y,X,y.length,x.length,V,z,le,C,ce,ue,de]),he=i.useMemo((function(){return!V&&X?[[],[]]:z?X?[[],C,[],[]]:[[],y,x,[]]:[[],y,[]]}),[X,V,z,C,y,x]),me=i.useCallback((function(e,n){(0,ne.B5)({guildId:t.guild_id,channelId:t.id,postId:e.id,location:{page:Ne.ZY5.GUILD_CHANNEL,section:Ne.jXE.FORUM_CHANNEL_POST}});if(n)(0,I.ad)(e,oo.on.BROWSER);else{J.current=e.id;(0,L.ok)(e)}}),[t.guild_id,t.id,J]),ge=ks(i.useState(s+l-24),2),pe=ge[0],ve=ge[1],be=i.useCallback((function(e,n,i){return 0===e?(0,r.jsx)(Js,{channel:t,isEmpty:!F,isSearchLoading:R,numResults:null==C?void 0:C.length,coords:n,onHeightChange:ve,children:!T&&(0,r.jsx)(Lt,{channel:t,hasAnyThread:U},t.id)},"forum-channel-header"):2!==e||z?1===e&&X&&!V?(0,r.jsx)(Xs,{channel:t,coords:n},"archive-or-search-result"):i():(0,r.jsx)(Ys,{
channel:t,coords:n},"archived-missing-reading-history-perm")}),[X,z,C,V,t,F,R,T,U]),ye=(0,g.e7)([q.Z],(function(){return q.Z.hasHidden(t.id)}));i.useEffect((function(){var e,t=Y?Ae:W,n=null===(e=t.current)||void 0===e?void 0:e.getScrollerState();if(null!=n&&!ye&&n.scrollTop>s){var r;null===(r=t.current)||void 0===r||r.scrollTo({to:0})}}),[ye]);var Oe=(0,re.xz)(t.guild_id),xe=function(e){var t=e.listRef,n=e.isIncreasedActivityView,a=e.hasActiveThreads,s=e.threadIdsBySection,l=e.listViewCardHeights,c=e.editorHeight,u=e.editorAdditionRowHeight,d=e.renderSectionOrItem,f=e.goToThread,h=e.observePostVisibilityAnalytics,m=e.isShowingSearchResult,g=i.useCallback((function(e){return function(n){t.current=n;var r;e.current=null!==(r=null==n?void 0:n.getScrollerNode())&&void 0!==r?r:null}}),[t]),p=i.useCallback((function(e){return zs({section:e.section,isShowingSearchResult:m,hasActiveThreads:a})()}),[a,m]),v=i.useCallback((function(e){return d(e.section,void 0,(function(){
if(3===e.section)return __OVERLAY__?null:n?(0,r.jsx)("div",{className:nn().placeholder,children:(0,r.jsx)(Ta,{})}):(0,r.jsx)("div",{"data-item-role":"item",className:o()(nn().loadingCard,nn()["loadingCard-".concat(e.row%3)],Rs({},nn().loadingCardWithIncreasedActivity,n))},"loading-".concat(e.row));var t=s[e.section][e.row];return(0,r.jsx)("li",{className:nn().card,"data-item-role":"item",children:(0,r.jsx)(b.HeadingLevel,{children:n?(0,r.jsx)(Eo,{className:nn().increasedActivityMainCard,threadId:t,goToThread:f,observePostVisibilityAnalytics:h}):(0,r.jsx)(Jt.ZP,{className:nn().mainCard,threadId:t,goToThread:f,observePostVisibilityAnalytics:h})})},"".concat(e.section,"-").concat(t))}))}),[n,d,s,f,h]),y=i.useCallback((function(e,t){if(0===e)return c+u;var r=s[e][t],i=l[r];return null==i?8+(n?188:96):i+8}),[s,l,c,u,n]);return{updateListScrollerRef:g,renderListSection:p,renderListItem:v,getListSectionHeight:i.useCallback((function(e){return 2===e&&a?40:0}),[a]),getListItemHeight:y}}({
listRef:W,hasActiveThreads:F,threadIdsBySection:he,listViewCardHeights:m,editorHeight:s,editorAdditionRowHeight:l,renderSectionOrItem:be,goToThread:me,observePostVisibilityAnalytics:K,isShowingSearchResult:X,isIncreasedActivityView:Oe}),Ce=xe.updateListScrollerRef,Se=xe.renderListSection,je=xe.renderListItem,Ee=xe.getListSectionHeight,_e=xe.getListItemHeight,Ae=i.useRef(null),we=function(e){var t=e.masonryListScrollerRef,n=e.threadIdsBySection,a=e.goToThread,s=e.renderSectionOrItem,l=e.hasActiveThreads,c=e.isShowingSearchResult,u=e.canSearchForumPosts,d=e.canViewArchivedPosts,f=e.observePostVisibilityAnalytics,h=e.focusedThreadId,m=e.headerHeight,g=i.useRef(null),p=i.useCallback((function(e){t.current=e;g.current=null==e?void 0:e.getScrollerNode()}),[t]),v=i.useCallback((function(e,n){var r=t.current;if(null!=r){var i=document.querySelector(e);if(null!=i){var a=r.getCoordsMap()[n],o=null!=a?a.height+20:200;r.scrollIntoViewNode({node:i,padding:o,callback:function(){
requestAnimationFrame((function(){var t;null===(t=document.querySelector(e))||void 0===t||t.focus({preventScroll:!0})}))}});h.current=Ks(n)}}}),[t,h]),b=i.useCallback((function(e){var t=Ks(e);if(null!=t){var n=k.Z.getChannel(t);null!=n&&a(n,!0)}}),[a]),y=i.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===n[e].length)return"section-".concat(e,"-").concat(t);var r=n[e][t];return Ws(e,null==r?t:r)}),[n]),O=i.useCallback((function(e,t,n){return s(e,t,zs({section:e,coords:t,key:n,isShowingSearchResult:c,hasActiveThreads:l}))}),[s,l,c]),x=i.useCallback((function(e){return 0===e?{}:{role:"grid","aria-labelledby":"#".concat(Bs(e))}}),[]),C=i.useCallback((function(e,t,i,s,l){if(0===e)return null;var c=n[e][t];return null==c?__OVERLAY__?null:(0,r.jsx)("div",{style:Ls({},i),"data-item-role":"item",className:o()(nn().loadingCard,nn()["loadingCard-".concat(t%3)])},s):(0,r.jsx)(pa,{id:"".concat(s),threadId:c,className:o()(nn().card,nn().mainCard),
goToThread:a,observePostVisibilityAnalytics:f,coords:i,gridCoords:l.coordinates[s],gridSectionBoundaries:l.boundaries},s)}),[n,a,f]),S=i.useCallback((function(e){return 0===e?m-8-24:2===e?l||!d?40:0:1===e&&c&&!u?40:0}),[m,c,u,l,d]);return{updateMasonryListScrollerRef:p,masonryListContainerRef:g,focusedThreadId:h,handleGridFocus:v,handleGridSelect:b,getItemKey:y,renderGridSection:O,renderGridItem:C,getSectionProps:x,getGridSectionHeight:S}}({masonryListScrollerRef:Ae,threadIdsBySection:he,goToThread:me,renderSectionOrItem:be,hasActiveThreads:F,isShowingSearchResult:X,canSearchForumPosts:V,canViewArchivedPosts:z,observePostVisibilityAnalytics:K,focusedThreadId:J,headerHeight:pe}),Ie=we.updateMasonryListScrollerRef,Me=we.getItemKey,Pe=we.renderGridSection,Re=we.renderGridItem,Le=we.getGridSectionHeight,Ze=we.getSectionProps,De=we.handleGridFocus;!function(e){var t=e.masonryListScrollerRef,n=e.containerWidth,r=e.isGridLayout,a=e.threadIdsBySection,o=e.focusedThreadId,s=e.parentId
;i.useEffect((function(){if(r){var e=setTimeout((function(){if(null!=t.current&&null!=o.current){var e=o.current;if("string"==typeof e)if(null!=D.ZP.getSidebarState(s)){var n=a.findIndex((function(t){return t.find((function(t){return t===e}))})),r=t.current.getCoordsMap(),i=r["__section__".concat(n)],l=r[Ws(n,e)];null!=i&&null!=l&&t.current.scrollIntoViewRect({start:i.top+l.top-100,end:i.top+l.top+l.height+50})}else o.current=null}}),500);return function(){return clearTimeout(e)}}}),[s,n,r,a,o,t])}({masonryListScrollerRef:Ae,containerWidth:oe,isGridLayout:Y,threadIdsBySection:he,parentId:t.id,focusedThreadId:J});var ke=i.useCallback((function(){var e,n;if(!X){var r=Y?null===(e=Ae.current)||void 0===e?void 0:e.getScrollerState():null===(n=W.current)||void 0===n?void 0:n.getScrollerState();if(null!=r){(0,ne.ab)({guildId:t.guild_id,channelId:t.id});var i=r.scrollTop+r.offsetHeight;r.scrollHeight-i<(Y?Math.max(200,Gi(oe)):200)&&E()}}}),[X,Y,t.guild_id,t.id,oe,E]),He=(0,
g.e7)([S.Z],(function(){return S.Z.keyboardModeEnabled})),Fe=function(e){var t=e.id,n=e.isEnabled,r=e.setFocus,a=i.useRef(null),o=i.useRef(!1),s=i.useRef(null),l=i.useRef(n);i.useLayoutEffect((function(){l.current=n}),[n]);var c=i.useCallback((function(e){var t;return(null!==(t=s.current)&&void 0!==t?t:document).querySelector(e)}),[]),u=i.useCallback((function(e,t){l.current&&r(e,t)}),[r]),d=i.useCallback((function(e){if(l.current){var t;null===(t=document.querySelector(e))||void 0===t||t.focus()}}),[]),h=i.useCallback((function(e){a.current=e;var n=(0,Ki.P1)(e,$i),r=(0,Ki.x3)(e);u(n,r);(0,Wi.h)(t,r,!0)}),[t,u]),m=Xi(i.useState(!1),2),g=m[0],p=m[1],v=i.useRef(g);i.useLayoutEffect((function(){v.current=g}),[g]);i.useLayoutEffect((function(){var e=function(){p(!0)},n=function(e){if(!e.currentTarget.contains(e.relatedTarget)){p(!1);requestAnimationFrame((function(){var e=a.current;if(null!==e){var n=(0,Ki.P1)(e,$i);null==c(n)&&d((0,Ki.P1)(t,"data-grid-id"))}}))}},r=function(){s.current,
v.current},i=function(){o.current=!0},l=s.current;if(null!=l){l.addEventListener("focusin",e);l.addEventListener("focusout",n);l.addEventListener("focus",r);l.addEventListener("scroll",i,{passive:!0});return function(){l.removeEventListener("focusin",e);l.removeEventListener("focusout",n);l.removeEventListener("focus",r);l.removeEventListener("scroll",i)}}}),[t,u,d,h,c]);var b=i.useCallback((function(e){if(l.current){var t=a.current,n=s.current;if(null!=t){var r=(0,Ki.P1)(t,$i),i=null==n?void 0:n.querySelector(r);if(null!=i){var o,u=parseInt(null!==(o=i.getAttribute("data-grid-section"))&&void 0!==o?o:""),d=parseInt(i.getAttribute("aria-rowindex")),m=parseInt(i.getAttribute("aria-colindex"));if(ea.has(e.key)){e.stopPropagation();e.preventDefault()}switch(e.key){case f.R8.RIGHT:var g=c(ta({section:u,row:d,column:m+1}));if(null!=g){var p=g.getAttribute($i);null!=p&&h(p)}return;case f.R8.LEFT:var v=c(ta({section:u,row:d,column:m-1}));if(null!=v){var b=v.getAttribute($i);null!=b&&h(b)}
return;case f.R8.DOWN:var y=c(ta({section:u,row:d+1,column:m}));null==y&&(y=c(ta({section:u+1,row:0,column:m})));if(null!=y){var O=y.getAttribute($i);null!=O&&h(O)}return;case f.R8.UP:var x;if(0===d){var C=parseInt(i.getAttribute(Ji));null==(x=c(ta({section:u-1,row:C,column:m})))&&(x=c(ta({section:u-1,row:C-1,column:m})))}else x=c(ta({section:u,row:d-1,column:m}));if(null!=x){var S=x.getAttribute($i);null!=S&&h(S)}return;case f.R8.SPACE:case f.R8.ENTER:if(e.repeat)return;var j=a.current;if(null!=j){var E,_=(0,Ki.P1)(j,$i),N=c(_),T=N===(null!==(E=null==N?void 0:N.ownerDocument)&&void 0!==E?E:document).activeElement;if(null!=N&&T){e.preventDefault();e.stopPropagation();null==N||N.click()}}}}}}}),[c,h]),y=i.useCallback((function(e){var n=null!=e?(0,Ki.jb)(t,e):null;a.current=n}),[t]);return i.useMemo((function(){return{id:t,containerProps:{onKeyDown:b,ref:s,tabIndex:g?-1:0,role:"grid"},setFocus:y}}),[t,b,g,y])}({id:"forum-grid-view",isEnabled:Y&&He,setFocus:De}),Ue=function(e){
var t=e.listRef,n=e.padding,r=e.channel,a=e.isEnabled,o=i.useCallback((function(e){var r=t.current,i=document.querySelector(e);null!=i&&(null==r||r.scrollIntoViewNode({node:i,padding:n,callback:function(){var t;null===(t=document.querySelector(e))||void 0===t||t.focus({preventScroll:!0})}}))}),[n]),s=i.useCallback((function(){return new Promise((function(e){var n=t.current;null==n||n.scrollToTop({callback:function(){return requestAnimationFrame(e)}})}))}),[]),l=i.useCallback((function(){return new Promise((function(e){var n=t.current;null==n||n.scrollToBottom({callback:function(){return requestAnimationFrame(e)}})}))}),[]);return(0,u.ZP)({id:"forum-channel-list-".concat(r.id),isEnabled:a,scrollToStart:s,scrollToEnd:l,setFocus:o})}({listRef:W,padding:96,isEnabled:!Y&&He,channel:t}),Be=Fe.containerProps,Ge=Be.ref,Ve=Ds(Be,["ref"]),ze=D.ZP.getSidebarState(t.id),We=null!=ze&&(0,D.D5)(ze);return(0,r.jsx)("div",{className:nn().container,ref:ae,children:(0,r.jsx)(b.FocusJumpSection,{
children:function(e){return(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(O.Z,{channel:t,draftType:H.d.FirstThreadMessage,className:nn().uploadArea,style:{right:We&&(null==n?void 0:n.isThreadSidebarFloating)?n.threadSidebarWidth:0}}),(0,r.jsx)($s,{channel:t}),(0,r.jsx)(b.HiddenVisually,{children:(0,r.jsx)(b.H,{children:Te.Z.Messages.THREADS})}),B?(0,r.jsx)("div",{className:nn().optInNotice,children:(0,r.jsx)(w.Z,{channel:t})}):null,Y?(0,r.jsx)(oa,{navigator:Fe,children:(0,r.jsx)(b.MasonryList,Ls({ref:function(e){var t;Ge.current=null!==(t=null==e?void 0:e.getScrollerNode())&&void 0!==t?t:null;Ie(e)},itemGutter:16,padding:24,className:nn().grid,columns:se,sections:fe,getItemKey:Me,getSectionHeight:Le,getItemHeight:Gs,renderSection:Pe,renderItem:Re,getSectionProps:Ze,onScroll:j?ke:void 0,chunkSize:350},Ve,e),Z)}):(0,r.jsx)(d.bG,{navigator:Ue,children:(0,r.jsx)(d.SJ,{children:function(t){var n=t.ref,i=Ds(t,["ref"]);return(0,r.jsx)(b.ListAuto,Zs(Ls({ref:Ce(n),className:nn().list,
sections:fe,sectionHeight:Ee,rowHeight:_e,renderRow:je,renderSection:Se,chunkSize:150,onScroll:j?ke:void 0,paddingBottom:24},i,e),{innerRole:"list"}),Z)}})})]})}})})}function Ys(e){var t=e.channel,n=e.coords,i=(0,j.ZP)(t);return(0,r.jsx)("div",{className:o()(nn().missingReadHistoryPermission,nn().columnsSpan),style:n,children:(0,r.jsx)(b.Text,{color:"text-muted",variant:"text-md/normal",children:Te.Z.Messages.FORUM_CHANNEL_NO_POST_HISTORY.format({channelName:i})})})}function Xs(e){var t=e.channel,n=e.coords,i=(0,j.ZP)(t);return(0,r.jsx)("div",{className:o()(nn().missingReadHistoryPermission,nn().columnsSpan),style:n,children:(0,r.jsx)(b.Text,{color:"text-muted",variant:"text-md/normal",children:Te.Z.Messages.FORUM_CHANNEL_NO_SEARCH_POST_HISTORY.format({channelName:i})})})}function $s(e){var t=e.channel,n=i.useCallback((function(){Y.Z.resort(t.id)}),[t]),a=(0,g.e7)([X.Z],(function(){return X.Z.getNewThreadCount()}));return 0===a?null:(0,r.jsx)(b.Clickable,{className:nn().newPostsButton,
onClick:n,children:(0,r.jsx)(b.Text,{color:"text-brand",variant:"text-md/medium",children:Te.Z.Messages.NEW_FORUM_POST_COUNT.format({count:a})})})}function Qs(){return Promise.resolve()}function Js(e){var t,n,a,s=e.channel,m=e.isEmpty,v=e.isSearchLoading,y=e.numResults,O=e.children,C=e.coords,j=e.onHeightChange,T=(0,ht.xH)((function(e){return{name:e.name,formOpen:e.formOpen,titleFocused:e.titleFocused,hasClickedForm:e.hasClickedForm,textAreaState:e.textAreaState,onboardingExpanded:e.onboardingExpanded,setEditorAdditionRowHeight:e.setEditorAdditionRowHeight}}),c.Z),A=T.name,w=T.formOpen,I=T.titleFocused,M=T.hasClickedForm,P=T.textAreaState,L=T.onboardingExpanded,Z=T.setEditorAdditionRowHeight,D=(0,$.H)(s.id),k=D.tagFilter,z=D.layoutType,q=(0,ht.AF)(),X=(0,$.v)(),J=(0,g.e7)([F.Z],(function(){return F.Z.canChatInGuild(s.guild_id)})),ee=(0,Q.r_)(s),te=(0,R.cD)(s),re=ks(i.useState(te),2),ie=re[0],ae=re[1],oe=ks((0,
_.AB)(null!==(a=s.getGuildId())&&void 0!==a?a:void 0),2)[1],se=J&&(te||ie&&oe),le=s.isMediaChannel();i.useEffect((function(){te&&ae(!0)}),[te]);var ce=(0,x.Z)(),ue=ce.ref,de=ce.height;i.useEffect((function(){null!=de&&j(de)}),[j,de]);var fe=i.useCallback((function(){l()((function(){null!=ue.current&&q.getState().setEditorHeight(ue.current.offsetHeight)}))}),[ue,q]);i.useLayoutEffect(fe,[fe,m,se,L]);(0,K.yp)({event:Ne.CkL.REMEASURE_TARGET,handler:fe});var he=(0,g.e7)([U.Z],(function(){return U.Z.getUploads(s.id,H.d.FirstThreadMessage)})),me=(0,Q.ql)(s),ge=i.useRef(null),pe=i.useRef(null),ve=ks(i.useState(0),2),be=ve[0],ye=ve[1],Oe=(0,g.e7)([B.Z],(function(){return B.Z.windowSize()})).width,xe=null===(n=null===(t=ge.current)||void 0===t?void 0:t.getBoundingClientRect())||void 0===n?void 0:n.width,Ce=i.useRef(null),Se=(0,Q.Vm)(s);i.useLayoutEffect((function(){var e,t=pe.current,n=null==t||null===(e=t.children)||void 0===e?void 0:e[0];if(null!=ge.current&&null!=n&&null!=n.children){
var r=ge.current.getBoundingClientRect(),i=r.left,a=r.top,o=0,s=!0,l=!1,c=void 0;try{for(var u,d=n.children[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value.getBoundingClientRect(),h=f.right;if(f.top-a>f.height)break;h-i>o&&(o=h-i)}}catch(e){l=!0;c=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}ye(o)}}),[Se,Oe,xe,k]);var je=A.length>0&&!w&&(v||null!=y),Ee=!__OVERLAY__&&!M&&!w&&I&&(0===P.textValue.trim().length||P.textValue.trim()===me)&&0===he.length;i.useLayoutEffect((function(){var e=je||Ee;if(!e)return Z(0);null!=Ce.current&&Z(e?Ce.current.clientHeight:0)}),[Z,je,Ee,Ce]);var _e=(0,u.ZP)({id:"".concat(s.id,"-tags-navigator"),isEnabled:!0,wrap:!0,scrollToStart:Qs,scrollToEnd:Qs,orientation:f.hy.HORIZONTAL}),Ae=(0,d.JA)("forum-channel-header"),we=(Ae.role,Ae.onFocus),Ie=Ds(Ae,["role","onFocus"]),Me=i.useRef(null),Pe=function(){var e=i.useRef(!1),t=(0,g.e7)([S.Z],(function(){return S.Z.keyboardModeEnabled})),n=i.useCallback((function(t){
e.current=t.shiftKey}),[e]);i.useLayoutEffect((function(){t?window.addEventListener("keydown",n):window.removeEventListener("keydown",n);return function(){return window.removeEventListener("keydown",n)}}),[t,n]);return e}(),Re=i.useCallback((function(e){we(e);if(e.target===ue.current&&!Pe.current){var t;null===(t=Me.current)||void 0===t||t.focus()}}),[we,ue,Pe]);return(0,r.jsx)("div",Zs(Ls({className:o()(nn().card,nn().headerRow,nn().columnsSpan),ref:ue,onFocus:Re},Ie),{style:Zs(Ls({},C),{position:"static",height:"auto"}),children:(0,r.jsxs)(K.I3,{children:[null!=s.guild_id?(0,r.jsx)(N.Z,{className:o()(nn().newMemberBanner,Rs({},nn().gridViewBanner,z===h.X.GRID)),guildId:s.guild_id,channel:s}):null,(0,r.jsx)("div",{className:o()(nn().mainCard,nn().header,Rs({},nn().headerWithMatchingPosts,je||Ee)),children:(0,r.jsx)(si,{parentChannel:s,onChange:fe,isSearchLoading:v,canCreatePost:se,inputRef:Me})}),(je||Ee)&&(0,r.jsxs)("div",{className:nn().matchingPostsRow,ref:Ce,children:[je&&(0,
r.jsxs)("div",{className:nn().matchingPosts,children:[(0,r.jsx)(b.Heading,{variant:"text-xs/normal",color:"text-normal",children:v?Te.Z.Messages.FORUM_SEARCHING:0===y?Te.Z.Messages.FORUM_SEARCH_NO_MATCHING_POSTS:Te.Z.Messages.FORUM_SEARCH_MATCHING_POSTS_ALT.format({numPosts:y,query:A})}),!v&&(0,r.jsx)(b.Clickable,{onClick:function(){(0,ne.zI)({guildId:s.guild_id,channelId:s.id});Y.Z.clearForumSearch(s.id);q.getState().setName("")},children:(0,r.jsx)(b.Text,{variant:"text-xs/semibold",color:"text-brand",className:nn().clear,children:Te.Z.Messages.CLEAR})})]}),(0,r.jsx)("div",{className:nn().tagsSpacer}),Ee?se?(0,r.jsxs)("div",{className:nn().startPostHelp,children:[(0,r.jsx)(b.KeyCombo,{shortcut:"SHIFT",className:nn().keyboardShortcut}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"text-normal",children:"+"}),(0,r.jsx)(b.KeyCombo,{shortcut:"ENTER",className:nn().keyboardShortcut}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"text-normal",
children:Te.Z.Messages.FORUM_ENTER_TO_START_POST})]}):(0,r.jsxs)("div",{className:nn().startPostHelp,children:[(0,r.jsx)(W.Z,{height:14,width:14,className:nn().warnIcon}),(0,r.jsx)(b.Text,{variant:"text-xs/normal",color:"text-normal",children:Te.Z.Messages.FORUM_NO_POST_PERMISSION_HELP})]}):null]}),(0,r.jsx)(Xt,{channel:s,onChange:fe}),(0,r.jsxs)("div",{className:nn().tagsContainer,ref:ge,children:[(0,r.jsx)(el,{channel:s}),Se.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:nn().divider}),(0,r.jsx)("div",{className:nn().tagList,ref:pe,children:(0,r.jsx)(d.bG,{navigator:_e,children:(0,r.jsx)(d.SJ,{children:function(e){var t=e.ref,n=Ds(e,["ref"]);return(0,r.jsx)("div",Zs(Ls({className:nn().tagListInner,ref:t},n),{children:Se.map((function(e){return(0,r.jsx)(Lr.ZP,{className:nn().tag,tag:e,onClick:function(){return function(e){(0,ne.e7)({guildId:s.guild_id,channelId:s.id,tagId:e,filterTagIds:Array.from(k),added:!k.has(e),location:{page:Ne.ZY5.GUILD_CHANNEL,
section:Ne.jXE.FORUM_CHANNEL_HEADER,object:Ne.qAy.CHANNEL_TAG}});X.getState().toggleTagFilter(s.id,e)}(e.id)},selected:k.has(e.id)},e.id)}))}))}})})}),(0,r.jsx)(b.Popout,{renderPopout:function(e){var t=e.closePopout,n=e.setPopoutRef;return(0,r.jsx)(Ts,{channel:s,closePopout:t,setPopoutRef:n})},position:"bottom",align:"right",children:function(e,t){var n=t.isShown;return(0,r.jsxs)(b.Button,Zs(Ls({},e),{size:b.Button.Sizes.MIN,color:b.Button.Colors.CUSTOM,className:o()(nn().tagsButton,Rs({},nn().tagsButtonWithCount,k.size>0)),style:{left:be},innerClassName:nn().tagsButtonInner,"aria-label":k.size>0?Te.Z.Messages.FORUM_TAG_SEE_MORE_A11Y_LABEL:Te.Z.Messages.FORUM_TAG_ALL_A11Y_LABEL,children:[k.size>0?(0,r.jsx)("div",{className:nn().countContainer,children:(0,r.jsx)(b.Text,{className:nn().countText,color:"none",variant:"text-xs/medium",children:k.size})}):Te.Z.Messages.FORUM_TAG_ALL,n?(0,r.jsx)(V.Z,{width:20}):(0,r.jsx)(G.Z,{width:20})]}))}}),(0,r.jsxs)(b.Button,{size:b.Button.Sizes.MIN,
color:b.Button.Colors.CUSTOM,className:o()(nn().tagsButton,nn().tagsButtonPlaceholder),innerClassName:nn().tagsButtonInner,"aria-label":Te.Z.Messages.FORUM_TAG_SEE_MORE_A11Y_LABEL,children:[k.size>0?(0,r.jsx)("div",{className:nn().countContainer,children:(0,r.jsx)(b.Text,{className:nn().countText,color:"none",variant:"text-xs/medium",children:k.size})}):null,(0,r.jsx)(V.Z,{width:24})]})]}):null]}),O,ee&&!le&&(0,r.jsx)(E.Z,{contentTypes:[p.z$.FORUM_CHANNEL_HELPER_CARD],children:function(e){var t=e.visibleContent,n=e.markAsDismissed;return t===p.z$.FORUM_CHANNEL_HELPER_CARD?(0,r.jsx)(un,{onDismiss:n}):null}})]})}),"create-form")}function el(e){var t=e.channel,n=(0,$.v)(),a=(0,C.ZP)(),o=i.useMemo((function(){return(0,v.ap)(a)?Ms():ws()}),[a]),s=i.useRef(!0),l=(0,Q.M1)(t),c=l.showGridViewUpsell,u=l.gridViewUpsellLoading,d=l.shouldAutoEnableGridView,f=i.useCallback((function(e){(0,ne.X0)({channelId:t.id,guildId:t.guild_id,gridViewAutoEnabled:e})}),[t.guild_id,t.id])
;i.useLayoutEffect((function(){if(c&&!u){if(s.current&&d){n.getState().setLayoutType(t.id,h.X.GRID);y.ZP.saveChannel(t.id,{defaultForumLayout:h.X.GRID});T.Z.increment({name:m.V.FORUM_CHANNEL_GRID_AUTO_ENABLED},!0)}s.current=!1}}),[t.guild_id,t.id,u,d,c,n]);var g=i.useCallback((function(){var e=t.isMediaChannel();return(0,r.jsx)(b.Popout,{renderPopout:function(e){var n=e.closePopout;return(0,r.jsx)(Ia,{channel:t,closePopout:n})},position:"bottom",align:"left",children:function(t,n){var i=n.isShown;return(0,r.jsxs)(b.Button,Zs(Ls({},t),{size:b.Button.Sizes.MIN,color:b.Button.Colors.CUSTOM,className:nn().sortDropdown,innerClassName:nn().sortDropdownInner,"aria-label":e?Te.Z.Messages.MEDIA_CHANNEL_SORT:Te.Z.Messages.FORUM_CHANNEL_SORT_AND_VIEW,children:[(0,r.jsx)(z.Z,{}),(0,r.jsx)(b.Text,{className:nn().sortDropdownText,variant:"text-sm/medium",color:"interactive-normal",children:e?Te.Z.Messages.MEDIA_CHANNEL_SORT:Te.Z.Messages.FORUM_CHANNEL_SORT_AND_VIEW}),i?(0,r.jsx)(V.Z,{width:20}):(0,
r.jsx)(G.Z,{width:20})]}))}})}),[t]);return(0,r.jsx)(E.Z,{contentTypes:[p.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL],children:function(e){var i=e.visibleContent,a=e.markAsDismissed;return i===p.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL?d?(0,r.jsx)(b.Popout,{renderPopout:function(){return(0,r.jsx)(Z.ZP,{className:nn().gridUpsellContainer,header:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_TITLE,asset:(0,r.jsx)("img",{className:nn().gridUpsellAsset,src:o,alt:""}),content:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_DESCRIPTION,buttonCTA:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_CONFIRM,secondaryButtonCTA:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_AUTO_CANCEL,onSecondaryClick:function(){y.ZP.open(t.id)},onClick:Ne.dG4,markAsDismissed:a,onComponentMount:function(){return f(!0)}})},position:"bottom",align:"center",animation:b.Popout.Animation.TRANSLATE,shouldShow:!0,children:function(){return g()}}):(0,r.jsx)(b.Popout,{renderPopout:function(){return(0,r.jsx)(Z.ZP,{className:nn().gridUpsellContainer,
header:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_TITLE,asset:(0,r.jsx)("img",{className:nn().gridUpsellAsset,src:o,alt:""}),content:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_DESCRIPTION,buttonCTA:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_CONFIRM,secondaryButtonCTA:Te.Z.Messages.FORUM_CHANNEL_GRID_UPSELL_MANUAL_CANCEL,onSecondaryClick:a,onClick:function(){n.getState().setLayoutType(t.id,h.X.GRID)},markAsDismissed:a,onComponentMount:function(){return f(!1)}})},position:"bottom",align:"center",animation:b.Popout.Animation.TRANSLATE,shouldShow:!0,children:function(){return g()}}):(0,r.jsx)(r.Fragment,{children:g()})}})}},331448:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(785893),i=(n(667294),n(633878));function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function o(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){
var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function l(e){var t=e.width,n=void 0===t?29:t,l=e.height,c=void 0===l?22:l,u=e.color,d=void 0===u?"currentColor":u,f=e.backgroundColor,h=s(e,["width","height","color","backgroundColor"]);return(0,r.jsx)("svg",o(function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}({},(0,i.Z)(h)),{width:n,height:c,viewBox:"0 0 29 22",children:(0,r.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,r.jsx)("rect",{width:n,height:c,fill:f,fillOpacity:".8",rx:"3"}),(0,r.jsx)("path",{
d:"M8.01725 16.7054C7.17625 16.7054 6.43191 16.4879 5.78425 16.0529C5.13658 15.6179 4.63391 15.0089 4.27625 14.2259C3.91858 13.4333 3.73975 12.5246 3.73975 11.4999C3.73975 10.4849 3.92825 9.58593 4.30525 8.80293C4.69191 8.01993 5.24775 7.4061 5.97275 6.96143C6.70741 6.51677 7.58225 6.29443 8.59725 6.29443C9.45758 6.29443 10.2261 6.4781 10.9027 6.84543C11.5891 7.21277 12.1062 7.72993 12.4542 8.39693L10.8157 9.57143C10.3227 8.66277 9.58808 8.20843 8.61175 8.20843C7.72241 8.20843 7.04091 8.49843 6.56725 9.07843C6.09358 9.64877 5.85675 10.4559 5.85675 11.4999C5.85675 12.5536 6.09358 13.3656 6.56725 13.9359C7.04091 14.5063 7.72241 14.7914 8.61175 14.7914C9.00808 14.7914 9.37058 14.7189 9.69925 14.5739C10.0376 14.4193 10.2986 14.2114 10.4822 13.9504V12.7034H8.17675V10.8184H12.5412V16.5024H10.8302L10.5547 15.5454C9.98441 16.3188 9.13858 16.7054 8.01725 16.7054Z",fill:d}),(0,r.jsx)("path",{d:"M16.5444 16.5024H14.4274V6.49743H16.5444V16.5024Z",fill:d}),(0,r.jsx)("path",{
d:"M20.6933 16.5024H18.5763V6.49743H25.2608V8.41143H20.6933V10.7894H24.4053V12.7034H20.6933V16.5024Z",fill:d})]})}))}},76768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(785893),i=(n(667294),n(633878));function a(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function o(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){
var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function l(e){var t=e.width,n=void 0===t?16:t,l=e.height,c=void 0===l?16:l,u=e.color,d=void 0===u?"currentColor":u,f=e.foreground,h=s(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){a(e,t,n[t])}))}return e}({},(0,i.Z)(h)),{width:n,height:c,viewBox:"0 0 16 16",fill:"none",children:[(0,r.jsx)("path",{className:f,fill:d,d:"M12.1803 4.66659L12.1803 14.6666H10.4701L10.4701 4.66659L8.53289 6.63325L7.33329 5.40825L11.3292 1.33325L15.3333 5.40825L14.1337 6.65825L12.1803 4.66659Z"}),(0,r.jsx)("path",{className:f,fill:d,
d:"M3.81962 11.3333L3.81962 1.33325L5.52983 1.33325L5.52985 11.3333L7.46703 9.36658L8.66663 10.5916L4.67068 14.6666L0.666626 10.5916L1.86622 9.34158L3.81962 11.3333Z"})]}))}}}]);
//# sourceMappingURL=3912b9e3f49864e4b442.js.map