"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[41661],{841661:(n,e,r)=>{r.r(e);r.d(e,{default:()=>W});var t=r(785893),i=r(667294),a=r(496486),o=r.n(a),l=r(363010),s=r(331535),u=r(737325),c=r(361417),f=r(859169),d=r(64833),p=r(124966),m=r(212658),I=r(582421),y=r(852097),S=r(794057),h=r(939042),v=r(125313),C=r(112508),b=r(814071),N=r(916957),E=r(720897),g=r(487502),x=r(67416),A=r(74030),_=r(56435),j=r(447172),R=r(298716),M=r(375650),P=r(959797),T=r(67793),Z=r.n(T);function L(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function w(n,e,r,t,i,a,o){try{var l=n[a](o),s=l.value}catch(n){r(n);return}l.done?e(s):Promise.resolve(s).then(t,i)}function U(n){return function(){var e=this,r=arguments;return new Promise((function(t,i){var a=n.apply(e,r);function o(n){w(a,t,i,o,l,"next",n)}function l(n){w(a,t,i,o,l,"throw",n)}o(void 0)}))}}function O(n,e){return function(n){if(Array.isArray(n))return n
}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,a=[],o=!0,l=!1;try{for(r=r.call(n);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(e&&a.length===e)break}}catch(n){l=!0;i=n}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return L(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B,G=function(n,e){var r,t,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},
"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;(t=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;t=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=e.call(n,o)}catch(n){a=[6,n];t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};!function(n){n[n.START=1]="START";n[n.PREVIEW=2]="PREVIEW";n[n.CONFIRM=3]="CONFIRM"
}(B||(B={}));function k(n){var e=n.premiumSubscription,r=n.isInventory,i=n.onNext,a=n.onClose,o=p.Z.getCurrentConfig({}).enabled,l=(0,y.Z)(),u=o&&"PL"===l;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.xB,{separator:!1,children:[(0,t.jsx)(s.vw,{tag:s.RB.H4,children:r?P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_TITLE_INVENTORY:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_TITLE_GUILD}),(0,t.jsx)(x.ol,{onClick:a})]}),(0,t.jsxs)(x.hz,{className:Z().body,children:[(0,t.jsx)("div",{className:Z().cancelImage}),(0,t.jsx)("div",{children:e.isPurchasedExternally&&null!=e.paymentGateway?P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_EXTERNAL.format({paymentGatewayName:M.Vz[e.paymentGateway],subscriptionManagementLink:(0,A.JE)(e.paymentGateway,"SUBSCRIPTION_MANAGEMENT")}):r?P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_INVENTORY.format({endDate:e.currentPeriodEnd}):P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BODY_GUILD.format({endDate:e.currentPeriodEnd})}),u&&(0,
t.jsx)(S.Z,{fromBoostCancelModal:!0})]}),e.isPurchasedExternally?null:(0,t.jsxs)(x.mz,{justify:g.Z.Justify.START,children:[(0,t.jsx)(s.zx,{onClick:i,children:P.Z.Messages.NEXT}),(0,t.jsx)(s.zx,{look:s.zx.Looks.LINK,onClick:a,children:P.Z.Messages.CANCEL})]})]})}function D(){var n=Object.values(b.Z.boostSlots),e=o().sortBy(n.filter((function(n){return!n.canceled})),(function(n){return[null!=n.premiumGuildSubscription,null!=n.cooldownEndsAt?new Date(n.cooldownEndsAt):null]}))[0];return null!=e?e.id:null}function z(n,e,r,t){return F.apply(this,arguments)}function F(){return(F=U((function(n,e,r,t){var i;return G(this,(function(a){switch(a.label){case 0:if(null==(i=null!=t?t:D()))throw new Error("No slot to cancel");return[4,(0,c.pD)(i)];case 1:a.sent();return[4,(0,u.Mg)(n,{items:(0,A.MY)(n,e)},r)];case 2:a.sent();return[2]}}))}))).apply(this,arguments)}function Y(n){
var e,r,a=n.premiumSubscription,o=n.guildBoostSlotId,u=n.onBack,c=n.onNext,f=n.onClose,p=O(i.useState(!1),2),y=p[0],S=p[1],b=O(i.useMemo((function(){try{return[(0,I.g)(a,-1),!1]}catch(n){return[[],!0]}}),[a]),2),E=b[0],M=b[1];i.useEffect((function(){M&&f()}),[M]);var T,L=(0,l.cj)([N.Z],(function(){var n=N.Z.get(a.planId);return{premiumSubscriptionPlan:n,premiumGuildPlan:null!=n?N.Z.getForSkuAndInterval(R.Si.GUILD,n.interval,n.intervalCount):null}})),w=L.premiumSubscriptionPlan,B=L.premiumGuildPlan,k=O((0,m.ED)({subscriptionId:a.id,renewal:!0,currency:a.currency,paymentSourceId:a.paymentSourceId}),1)[0],D=O((0,m.ED)({subscriptionId:a.id,items:null!=B?(0,A.Zx)(a,null!==(T=null===(e=E[0])||void 0===e?void 0:e.quantity)&&void 0!==T?T:0,B.id):null,renewal:!0}),1)[0],F=(0,d.Z)().analyticsLocations;if(null==D||null==w||null==B||null==k)return(0,t.jsx)(s.$j,{});var Y=a.items.some((function(n){var e=n.planId;return!R.Z1.has(e)
})),V=Y&&null==a.renewalMutations||null!=(null===(r=a.renewalMutations)||void 0===r?void 0:r.items.find((function(n){var e=n.planId;return!R.Z1.has(e)}))),W=E.some((function(n){var e=n.planId;return R.Z1.has(e)})),$=V||W?D.total-k.total:-k.total,K=w.interval,q=w.intervalCount;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{onClose:f}),(0,t.jsxs)(x.hz,{className:Z().body,children:[(0,t.jsx)("div",{children:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_PREVIEW.format({endDate:D.subscriptionPeriodStart})}),(0,t.jsxs)(h.PO,{className:Z().invoiceTable,children:[(0,t.jsx)(h.q9,{children:P.Z.Messages.PREMIUM_SUBSCRIPTION_UPDATES}),(0,t.jsx)(h.R$,{label:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_INVOICE_SUBSCRIPTION_CANCELLED.format({subscriptionCount:1}),value:(0,_.og)((0,_.T4)($,a.currency),K,q),className:Z().invoiceCancelRow}),(0,t.jsx)(h.KU,{}),(0,t.jsx)(C.nd,{premiumSubscription:a,renewalInvoice:D,isUpdate:!0})]})]}),(0,t.jsxs)(x.mz,{align:g.Z.Align.CENTER,
justify:g.Z.Justify.BETWEEN,children:[(0,t.jsx)(s.zx,{color:s.zx.Colors.RED,disabled:y,onClick:U((function(){return G(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);S(!0);return[4,z(a,E,F,o)];case 1:n.sent();c();return[3,3];case 2:n.sent();S(!1);return[3,3];case 3:return[2]}}))})),children:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CANCEL_BUTTON}),(0,t.jsx)(v.Z,{onClick:u})]})]})}function V(n){var e=n.premiumSubscription,r=n.onClose;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.xB,{separator:!1,children:[(0,t.jsx)(s.vw,{tag:s.RB.H4,children:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CONFIRM_TITLE}),(0,t.jsx)(x.ol,{onClick:r})]}),(0,t.jsxs)(x.hz,{className:Z().body,children:[(0,t.jsx)("div",{className:Z().cancelImage}),(0,t.jsx)("div",{children:P.Z.Messages.PREMIUM_GUILD_SUBSCRIPTION_CONFIRM_BODY.format({endDate:e.currentPeriodEnd})})]}),(0,t.jsx)(x.mz,{children:(0,t.jsx)(s.zx,{onClick:r,children:P.Z.Messages.OKAY})})]})}function W(n){
var e=n.guildBoostSlot,r=n.transitionState,a=n.onClose;i.useEffect((function(){E.Z.hasFetchedSubscriptions()||(0,u.jg)()}),[]);var o,c=(0,l.e7)([E.Z],(function(){return E.Z.getPremiumTypeSubscription()})),p=O(i.useState(B.START),2),m=p[0],I=p[1],y=(0,d.Z)(f.Z.GUILD_BOOST_CANCELLATION_MODAL).AnalyticsLocationProvider;if(null==c)o=(0,t.jsx)(x.hz,{children:(0,t.jsx)(s.$j,{})});else switch(m){case B.START:o=(0,t.jsx)(k,{premiumSubscription:c,isInventory:null==e.premiumGuildSubscription,onNext:function(){return I(B.PREVIEW)},onClose:a});break;case B.PREVIEW:o=(0,t.jsx)(Y,{premiumSubscription:c,guildBoostSlotId:e.id,onBack:function(){return I(B.START)},onNext:function(){return I(B.CONFIRM)},onClose:a});break;case B.CONFIRM:o=(0,t.jsx)(V,{premiumSubscription:c,onClose:a});break;default:throw new Error("Unexpected step: ".concat(m))}return(0,t.jsx)(y,{children:(0,t.jsx)(x.Y0,{transitionState:r,children:o})})}},447172:(n,e,r)=>{r.d(e,{Z:()=>m});var t=r(785893),i=(r(667294),
r(363010)),a=r(730189),o=r(409091),l=r(487502),s=r(384469),u=r(67416),c=r(728531),f=r.n(c);function d(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function p(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,a=[],o=!0,l=!1;try{for(r=r.call(n);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(e&&a.length===e)break}}catch(n){l=!0;i=n}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return d(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(n,e)}(n,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(n){var e=n.purchaseState,r=n.currentStep,c=n.onClose,d=p((0,o.z)({purchaseState:e,currentStep:r,initialScene:s.fe.Scenes.ENTRY,purchaseScene:s.fe.Scenes.STARS,errorScene:s.fe.Scenes.ERROR,successScene:s.fe.Scenes.SUCCESS}),2),m=d[0],I=d[1],y=(0,i.e7)([a.Z],(function(){return a.Z.useReducedMotion}));return(0,t.jsxs)(u.xB,{align:l.Z.Align.START,className:f().header,separator:!1,children:[(0,t.jsx)(s.fe,{className:f().animation,nextScene:m,onScenePlay:function(n){return I(s.fe.getNextScene(n))},pauseWhileUnfocused:!1,pause:y}),(0,t.jsx)("div",{className:f().headerTitle}),(0,t.jsx)(u.ol,{onClick:c,className:f().closeButton})]})}},124966:(n,e,r)=>{r.d(e,{Z:()=>t});const t=(0,r(553494).B)({kind:"user",id:"2022-12_localized_pricing_poland_notice",label:"Localized Pricing Poland Notice",defaultConfig:{enabled:!1},
treatments:[{id:1,label:"Enable Poland Notice",config:{enabled:!0}}]})},582421:(n,e,r)=>{r.d(e,{g:()=>c});var t=r(441143),i=r.n(t),a=r(916957),o=r(74030),l=r(298716);function s(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function u(n){return function(n){if(Array.isArray(n))return s(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return s(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e){var r=a.Z.get(n.planId)
;i()(null!=r,"missing premium subscription plan");var t=a.Z.getForSkuAndInterval(l.Si.GUILD,r.interval,r.intervalCount);i()(null!=t,"missing premium guild plan");var s=null!=n.renewalMutations?n.renewalMutations.additionalPlans:n.additionalPlans,c=(0,o.uV)(s)+e,f=s.filter((function(n){return n.planId!==t.id}));if(c<0)throw new Error("Invalid adjustment");return 0===c?f:u(f).concat([{planId:t.id,quantity:c}])}},852097:(n,e,r)=>{r.d(e,{Z:()=>o});var t=r(363010),i=r(707955),a=r(720897);function o(){var n=(0,t.e7)([a.Z],(function(){return a.Z.getPremiumTypeSubscription()}));return(0,t.e7)([i.Z],(function(){var e;return null!=(null==n?void 0:n.paymentSourceId)?null===(e=i.Z.getPaymentSource(n.paymentSourceId))||void 0===e?void 0:e.country:null}))}},794057:(n,e,r)=>{r.d(e,{Z:()=>d});var t=r(785893),i=(r(667294),r(294184)),a=r.n(i),o=r(81951),l=r(95467),s=r(461061),u=r(959797),c=r(516178),f=r.n(c);const d=function(n){var e=n.fromBoostCancelModal,r=n.className;return(0,t.jsxs)("div",{
className:a()(f().noticeRoot,r),children:[(0,t.jsx)("div",{className:f().iconContainer,children:(0,t.jsx)(o.Z,{className:f().infoIcon})}),(0,t.jsx)("div",{className:f().text,children:(e?u.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_BOOST_WARNING:u.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_WARNING).format({helpCenterLink:l.Z.getArticleURL(s.BhN.LOCALIZED_PRICING)})})]})}},409091:(n,e,r)=>{r.d(e,{z:()=>s});var t=r(667294),i=r(390599),a=r(154765);function o(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function l(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var t,i,a=[],o=!0,l=!1;try{for(r=r.call(n);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(e&&a.length===e)break}}catch(n){l=!0;i=n}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(n,e)||function(n,e){if(!n)return
;if("string"==typeof n)return o(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n){var e=n.purchaseState,r=n.currentStep,o=n.initialScene,s=n.purchaseScene,u=n.errorScene,c=n.successScene,f=l((0,t.useState)(o),2),d=f[0],p=f[1];(0,t.useEffect)((function(){e===a.A.PURCHASING?p(s):e===a.A.FAIL&&p(u)}),[e,s,u]);(0,t.useEffect)((function(){r===i.h8.CONFIRM&&p(c)}),[r,c]);return[d,p]}},125313:(n,e,r)=>{r.d(e,{Z:()=>s});var t=r(785893),i=(r(667294),r(331535)),a=r(959797),o=r(241387),l=r.n(o);const s=function(n){var e=n.onClick;return(0,t.jsx)(i.ee,{onClick:e,className:l().link,children:a.Z.Messages.BACK})}}}]);
//# sourceMappingURL=5401984a9f67befd0461.js.map