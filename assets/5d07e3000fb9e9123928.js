"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[3870],{35145:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,l=G(a(67294)),r=w(a(23855)),o=a(55558),i=w(a(36211)),u=G(a(18760)),s=G(a(21868)),d=w(a(6118)),f=w(a(62441)),c=w(a(76806)),p=w(a(68286)),v=G(a(84455)),m=G(a(9378)),S=w(a(74257)),h=w(a(65281)),g=w(a(79950)),y=w(a(30977)),b=a(85677),_=w(a(41908)),E=w(a(92974)),I=w(a(31055)),k=w(a(85974)),A=a(39855),M=w(a(88785)),O=w(a(76601)),C=w(a(81061)),T=w(a(86750)),D=w(a(86460)),P=w(a(43973)),L=w(a(58350)),N=w(a(69245)),R=a(70348),U=a(34596),F=w(a(69236));function w(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(j=function(e){return e?a:t})(e)}function G(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e)
;var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e;a&&a.set(e,n);return n}function V(e,t,a,l){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;t||0===o||(t={children:void 0});if(1===o)t.children=l;else if(o>1){for(var i=new Array(o),u=0;u<o;u++)i[u]=arguments[u+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var B=V(h.default,{value:!1,id:"availableDisabled",disabled:!0}),W=V(M.default,{}),K=V(O.default,{name:"legal_notice",maxLength:R.MAXIMUM_SKU_LEGAL_NOTICE_LENGTH}),H=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;x(e,t)}(t,e);function t(){for(var t,a,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(n=e.call.apply(e,[this].concat(o))||this).formRef=l.createRef();n.state={appIcon:null,hasSubmitted:!1,hasSubmissionError:!1,hasUnsavedChanges:!1,isSubmitting:!1,resetKey:0,selectedAccessType:null===(t=n.props.sku)||void 0===t?void 0:t.access_type,selectedDependentSkuId:null===(a=n.props.sku)||void 0===a?void 0:a.dependent_sku_id};n.setDefaultTextAreaValue=function(){var e=n.props,t=e.setLocalizedFieldValues,a=e.sku;null!=(null==a?void 0:a.legal_notice)&&t("legal_notice",a.legal_notice)};n.handleFormChange=function(){var e=n.state,t=e.hasSubmitted,a=e.hasUnsavedChanges;!t&&a||n.setState({hasSubmitted:!1,hasUnsavedChanges:!0})};n.handleFormReset=function(){var e=n.props.sku;null!=n.formRef.current&&n.formRef.current.resetForm();n.setDefaultTextAreaValue();n.setState((function(t){return{hasSubmissionError:!1,
hasSubmitted:!1,hasUnsavedChanges:!1,selectedAccessType:null==e?void 0:e.access_type,resetKey:t.resetKey+1}}))};n.handleFormSubmit=function(e){var t=n.props.match.params,a=t.id,l=t.skuId,r=n.props,o=r.getLocalizedFieldValues,i=r.sku,d=r.storeListing,f=n.state,c=f.selectedDependentSkuId,p=f.selectedAccessType,v={name:{default:e.name},release_date:e.release_date,dependent_sku_id:c,legal_notice:o("legal_notice")};null!=p&&(v.access_type=p);if(null!=e.available){var m,S;v.flags=e.available?(0,b.addFlag)(null!==(m=null==i?void 0:i.flags)&&void 0!==m?m:0,R.SkuFlags.AVAILABLE):(0,b.removeFlag)(null!==(S=null==i?void 0:i.flags)&&void 0!==S?S:0,R.SkuFlags.AVAILABLE)}var h=e.published;delete e.published;n.setState({isSubmitting:!0},(function(){u.updateSku(a,l,v).then((function(){return null==d||d.published===h?Promise.resolve():s.updateStoreListing(d.id,{published:h})})).then((function(){n.setState({isSubmitting:!1,hasSubmissionError:!1,hasSubmitted:!0,hasUnsavedChanges:!1})
})).catch((function(){n.setState({isSubmitting:!1,hasSubmissionError:!0,hasSubmitted:!1})}))}))};n.handleAccessTypeChange=function(e){n.setState({selectedAccessType:e.value},n.handleFormChange)};n.handleDependentSkuChange=function(e){n.setState({selectedDependentSkuId:null!=e?e.value:null},n.handleFormChange)};return n}var a=t.prototype;a.componentDidMount=function(){this.setDefaultTextAreaValue()};a.getAccessTypeOptions=function(){var e=(0,R.getSkuAccessTypeLabels)();return Object.keys(R.SkuAccessTypes).map((function(t){var a=R.SkuAccessTypes[t];return{label:e[a],value:a}}))};a.getDependentSkuOptions=function(){var e=this.props,t=e.sku,a=e.skus;return null==a?[]:a.filter((function(e){return e.id!==(null==t?void 0:t.id)})).map((function(e){return{label:e.name.default,value:e.id}}))};a.renderAvailabilityToggle=function(){var e,t=this.state.resetKey,a=this.props,n=a.sku,r=a.application
;return null==r||r.store_application_state!==R.StoreApplicationApprovalStates.APPROVED?V(l.Fragment,{},void 0,V("div",{className:F.default.labelWithIcon},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.AVAILABLE),V(y.default,{text:U.Messages.SkuInformation.DISABLED_UNTIL_APPROVED,position:y.default.Positions.TOP},void 0,V(m.default,{className:F.default.questionIcon,name:m.IconNames.QUESTION_MARK_CIRCLE}))),B):V(l.Fragment,{},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.AVAILABLE),V(h.default,{defaultValue:(0,b.hasFlag)(null!==(e=null==n?void 0:n.flags)&&void 0!==e?e:0,R.SkuFlags.AVAILABLE),id:"available",name:"available"},t))};a.renderPublishedToggle=function(){var e=this.state.resetKey,t=this.props.storeListing;return null==t?null:V(v.GridChild,{columnSpread:3,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,V("div",{className:F.default.labelWithIcon},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.PUBLISHED),V(y.default,{
text:U.Messages.SkuInformation.PUBLISHED_INFO,position:y.default.Positions.TOP},void 0,V(m.default,{className:F.default.questionIcon,name:m.IconNames.QUESTION_MARK_CIRCLE}))),V(h.default,{defaultValue:t.published,id:"published",name:"published"},e))};a.renderFormStatus=function(){var e=this.state,t=e.hasSubmissionError,a=e.hasSubmitted;return t?V(I.default,{type:I.default.Types.ERROR},void 0,U.Messages.SkuInformation.SUBMISSION_ERROR):a?V(I.default,{type:I.default.Types.SUCCESS},void 0,U.Messages.Alerts.SUCCESS_CHANGES_SAVED):null};a.renderSkuDistributionTypes=function(){var e,t=this.props.sku;return(0,b.hasFlag)(null!==(e=null==t?void 0:t.flags)&&void 0!==e?e:0,R.SkuFlags.PREMIUM_AND_DISTRIBUTION)?U.Messages.SkuInformation.PREMIUM_AND_DISTRIBUTION:(null==t?void 0:t.premium)?U.Messages.SkuInformation.PREMIUM:U.Messages.SkuInformation.DISTRIBUTION};a.render=function(){
var e=this.props.sku,t=this.state,a=t.selectedAccessType,n=t.selectedDependentSkuId,o=t.hasUnsavedChanges,i=t.resetKey,u=t.isSubmitting,s=(0,R.getSkuTypeLabels)();return l.createElement(_.default,{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit,ref:this.formRef},V(T.default,{},void 0,V(C.default,{},void 0,U.Messages.SkuInformation.HEADING),V(L.default,{isFlush:!0},void 0,U.Messages.SkuInformation.SUBHEADING),this.renderFormStatus()),V(T.default,{},void 0,V(v.default,{},void 0,V(v.GridSection,{},void 0,V(v.GridChild,{columnSpread:12},void 0,V(E.default,{isRequired:!0},void 0,U.Messages.SkuInformation.TITLE),V(g.default,{maxLength:R.MAXIMUM_SKU_NAME_LENGTH,name:"name",defaultValue:null==e?void 0:e.name.default}))),V(v.GridSection,{},void 0,V(v.GridChild,{columnSpread:6,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,V(E.default,{isRequired:!0},void 0,U.Messages.SkuInformation.RELEASE_TYPE),V(S.default,{clearable:!1,searchable:!1,onChange:this.handleAccessTypeChange,
options:this.getAccessTypeOptions(),value:a})),V(v.GridChild,{columnSpread:6,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.RELEASE_DATE.format({dateFormat:R.DATE_FORMAT.toUpperCase()})),V(p.default,{name:"release_date",dateFormat:R.DATE_FORMAT,defaultValue:null!=(null==e?void 0:e.release_date)?(0,r.default)(e.release_date):null,onChange:this.handleFormChange},i))),V(v.GridSection,{},void 0,V(v.GridChild,{columnSpread:3,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,this.renderAvailabilityToggle()),this.renderPublishedToggle(),V(v.GridChild,{columnSpread:3,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.SKU_TYPE),V(k.default,{},void 0,s[e.type])),V(v.GridChild,{columnSpread:3,columnSpreadExtraSmall:12,columnSpreadSmall:12
},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.DISTRIBUTION_TYPE),V(k.default,{},void 0,this.renderSkuDistributionTypes()))))),V(T.default,{},void 0,V(D.default,{},void 0,U.Messages.SkuInformation.DEPENDENT_SKU_HEADING),V(P.default,{},void 0,U.Messages.SkuInformation.DEPENDENT_SKU_SUBHEADING),V(v.default,{},void 0,V(v.GridSection,{},void 0,V(v.GridChild,{columnSpread:6,columnSpreadExtraSmall:12,columnSpreadSmall:12},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.SELECT_DEPENDENT_SKU),V(k.default,{},void 0,V(S.default,{clearable:!0,searchable:!0,onChange:this.handleDependentSkuChange,options:this.getDependentSkuOptions(),value:n})))))),V(T.default,{isFlush:!0},void 0,V(D.default,{},void 0,U.Messages.SkuInformation.LEGAL_NOTICE),V(P.default,{},void 0,U.Messages.SkuInformation.LEGAL_NOTICE_SUBHEADING),V(v.default,{},void 0,V(v.GridSection,{},void 0,V(v.GridChild,{columnSpread:3,columnSpreadMedium:4,columnSpreadSmallMedium:5,columnSpreadSmall:8,columnSpreadExtraSmall:10
},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.LEGAL_NOTICE_CHOOSE_LOCALE),W),V(v.GridChild,{columnSpread:12},void 0,V(E.default,{},void 0,U.Messages.SkuInformation.LEGAL_NOTICE),K)))),V(N.default,{isVisible:o,actionCopy:U.Messages.Actions.PUBLISH_CHANGES,onReset:this.handleFormReset,submitting:u}))};return t}(l.Component);H.displayName="SkuInformation";var z=(0,o.withRouter)(i.default.connectStores([d.default,f.default,c.default],(function(e){var t=e.match.params,a=t.id,n=t.skuId;return{application:d.default.getApplication(a),sku:f.default.getSku(n),skus:f.default.getSkus(a),storeListing:c.default.getCurrentStoreListing(n)}}))((0,A.withLocalizedFormProvider)((0,A.withLocalizedFormConsumer)(H))));t.default=z},85974:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e)
;var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=l?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e;a&&a.set(e,n)}(a(67294));var n,l,r=(n=a(45758))&&n.__esModule?n:{default:n};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function i(e,t,a,n){l||(l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;t||0===o||(t={children:void 0});if(1===o)t.children=n;else if(o>1){for(var i=new Array(o),u=0;u<o;u++)i[u]=arguments[u+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:l,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}var u=function(e){var t=e.children,a=e.className,n=e.tag,l=void 0===n?"label":n;return i(r.default,{
className:a,color:r.default.Colors.PRIMARY_300,size:r.default.Sizes.MEDIUM,tag:l},void 0,t)};u.displayName="FormValue";var s=u;t.default=s},43973:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e;a&&a.set(e,n)}(a(67294));var n,l=i(a(94184)),r=i(a(45758)),o=i(a(43256));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function s(e,t,a,l){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var r=e&&e.defaultProps,o=arguments.length-3;t||0===o||(t={children:void 0});if(1===o)t.children=l;else if(o>1){for(var i=new Array(o),u=0;u<o;u++)i[u]=arguments[u+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}var d=function(e){var t,a=e.children,n=e.className,i=e.isFlush,u=void 0!==i&&i,d=e.tag,f=void 0===d?"p":d;return s(r.default,{className:(0,l.default)(o.default.heading,(t={},t[o.default.flush]=u,t),n),color:r.default.Colors.PRIMARY_300,size:r.default.Sizes.MEDIUM,tag:f,weight:r.default.Weights.NORMAL},void 0,a)};d.displayName="PageSectionSubheading";var f=d;t.default=f},65281:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e)
;var n={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=l?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e;a&&a.set(e,n)}(a(67294));var n,l=i(a(94184)),r=a(73336),o=i(a(93401));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function s(e,t,a,l){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;t||0===o||(t={children:void 0});if(1===o)t.children=l;else if(o>1){for(var i=new Array(o),u=0;u<o;u++)i[u]=arguments[u+3];t.children=i}if(t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function d(){return(d=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var f={DEFAULT:o.default.themeDefault,CLEAR:o.default.themeClear},c={DEFAULT:o.default.sizeDefault,MINI:o.default.sizeMini},p="enabled",v="disabled",m=function(e){var t=e.id,a=e.onChange,n=e.value,i=e.defaultValue,u=e.fill,m=e.theme,S=void 0===m?f.DEFAULT:m,h=e.disabled,g=e.className,y=e.size,b=void 0===y?c.DEFAULT:y,_=e.style,E=e.name,I=h?v:p;null!=u&&n&&(_=d({},_,{backgroundColor:u}));return s("div",{className:(0,l.default)(g,(0,r.getClass)(o.default,"switch",I),b,S),style:_},void 0,s("input",{id:t,className:(0,l.default)(o.default.input,(0,r.getClass)(o.default,"checkbox",I)),type:"checkbox",disabled:h,onChange:a,checked:n,defaultChecked:i,name:E}),s("div",{className:o.default.indicator}))};m.displayName="Switch";m.Themes=f;m.Sizes=c;var S=m;t.default=S}}]);
//# sourceMappingURL=5d07e3000fb9e9123928.js.map