"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[54602],{265494:(t,e,n)=>{n.d(e,{Z:()=>r});const r=(0,n(260561).B)({kind:"user",id:"2022-12_forum_activity",label:"Increased activity view for Forums, per user",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},419951:(t,e,n)=>{n.d(e,{Z:()=>r});const r=(0,n(260561).B)({kind:"guild",id:"2023-01_forums_activity_2_guild",label:"Increased activity view for Forums, per guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},914716:(t,e,n)=>{n.d(e,{Z:()=>a});n(701456);var r=n(744564);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){
o.push(r.value);if(e&&o.length===e)break}}catch(t){u=!0;i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.initializedCount=0;this.actions={};this.stores=new Map}var e=t.prototype;e.initialize=function(){this.initializedCount++;if(!(this.initializedCount>1)){this._initialize();Object.entries(this.actions).forEach((function(t){
var e=o(t,2),n=e[0],i=e[1];r.Z.subscribe(n,"function"==typeof i?i:i.callback)}));this.stores.forEach((function(t,e){e.addChangeListener(t);t()}))}};e.terminate=function(t){if(!(this.initializedCount<=0)){t?this.initializedCount=0:this.initializedCount--;if(0===this.initializedCount){this._terminate();Object.entries(this.actions).forEach((function(t){var e=o(t,2),n=e[0],i=e[1];r.Z.unsubscribe(n,"function"==typeof i?i:i.callback)}))}}};e._initialize=function(){};e._terminate=function(){};return t}()},168024:(t,e,n)=>{n.d(e,{dj:()=>u,KV:()=>s,ZP:()=>c});var r=n(496486),i=n.n(r),o=n(5387),a=n.n(o);var u=100,s=[[0,u-1]];function l(t){var e={};t.forEach((function(t,n){e[n]=t}));return e}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._onChange=e}var e=t.prototype;e.reset=function(){this._subscriptions={}};e.get=function(t){return l(this._get(t))};e._get=function(t){var e
;return null!==(e=this._subscriptions[t])&&void 0!==e?e:new(a())({max:5})};e.clear=function(t){delete this._subscriptions[t]};e.subscribe=function(t,e,n){var r=this._get(t);if(i().isEqual(r.get(e),n))return!1;r.set(e,n);this._subscriptions[t]=r;this._onChange(t,l(r));return!0};return t}()},805907:(t,e,n)=>{n.d(e,{K:()=>c});var r=n(784426),i=n(666613),o=n(591684),a=n(382060),u=n(682776),s=n(102921),l=n(2590);function c(t){var e,n,c,f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==t||!a.Ec.has(t.type))return null;var d,h,_=f?(0,r.At)():void 0;return{location:_,thread_approximate_member_count:i.Z.getMemberCount(t.id),thread_approximate_message_count:o.Z.getCount(t.id),thread_archived:!0===(null===(e=t.threadMetadata)||void 0===e?void 0:e.archived),thread_locked:null!==(d=null===(n=t.threadMetadata)||void 0===n?void 0:n.locked)&&void 0!==d&&d,
thread_auto_archive_duration_minutes:null!==(h=null===(c=t.threadMetadata)||void 0===c?void 0:c.autoArchiveDuration)&&void 0!==h?h:0,thread_approximate_creation_date:s.Z.extractTimestamp(t.id),can_send_message:u.Z.can(l.Plq.SEND_MESSAGES,t),parent_channel_type:t.parentChannelThreadType}}},779354:(t,e,n)=>{n.d(e,{r:()=>o});var r=n(265494),i=n(419951);function o(t){var e=i.Z.getCurrentConfig({guildId:null!=t?t:""}),n=r.Z.getCurrentConfig({},{autoTrackExposure:!1});return e.enabled||n.enabled}},572615:(t,e,n)=>{n.d(e,{Z:()=>O});var r=n(202351),i=n(744564),o=n(649536),a=n(512291),u=n(473903);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function c(t){c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return c(t)}function f(t){for(var e=1;e<arguments.length;e++){
var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){l(t,e,n[e])}))}return t}function d(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function h(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t,e){_=Object.setPrototypeOf||function(t,e){t.__proto__=e
;return t};return _(t,e)}var p=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var g={};function b(t){var e=t.threads,n=t.firstMessages;if(null==n)return!1;var r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;g[s.id]={loaded:!0,firstMessage:null}}}catch(t){i=!0;o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var l=!0,c=!1,f=void 0;try{for(var d,h=n[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var _=d.value;y(_.channel_id,_)}}catch(t){c=!0;f=t}finally{try{
l||null==h.return||h.return()}finally{if(c)throw f}}}function y(t,e){var n=null==e?null:(0,o.e5)(e);g[t]={loaded:!0,firstMessage:n}}function E(t){var e=t.type,n=t.channelId,r=t.messageId,i=t.userId,o=t.emoji,a=t.optimistic,s=t.burst,l=g[n];if(null==l||null==l.firstMessage)return!1;if(r!==l.firstMessage.id)return!1;var c=u.default.getCurrentUser(),d=null!=c&&c.id===i;if(a&&!d)return!1;g[n]=f({},l);if("MESSAGE_REACTION_ADD"===e){var h=t.colors;g[n].firstMessage=l.firstMessage.addReaction(o,d,i,h,s)}else g[n].firstMessage=l.firstMessage.removeReaction(o,d,s)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&_(t,e)}(n,t);var e=v(n);function n(){s(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(a.Z,u.default)};r.isLoading=function(t){var e
;return!0!==(null===(e=g[t])||void 0===e?void 0:e.loaded)};r.getMessage=function(t){t in g||(g[t]={loaded:!1,firstMessage:null});return g[t]};r.__getLocalVars=function(){return{state:g}};return n}(r.ZP.Store);m.displayName="ForumPostMessagesStore";const O=new m(i.Z,{CONNECTION_OPEN:function(){g={}},MESSAGE_CREATE:function(t){if(t.isPushNotification)return!1;if(t.message.id!==t.message.channel_id)return!1;y(t.message.channel_id,t.message)},MESSAGE_UPDATE:function(t){if(t.message.id!==t.message.channel_id)return!1;var e=g[t.message.id];if(null==e)return!1;if(null==e.firstMessage)return!1;g[t.message.id]=d(f({},e),{firstMessage:(0,o.wi)(e.firstMessage,t.message)})},MESSAGE_DELETE:function(t){if(t.id!==t.channelId)return!1;g[t.channelId]={loaded:!0,firstMessage:null}},THREAD_CREATE:function(t){if(null!=g[t.channel.id])return!1;if(!a.Z.isSubscribedToThreads(t.channel.guild_id))return!1;g[t.channel.id]={loaded:!0,firstMessage:null}},MESSAGE_REACTION_ADD:E,MESSAGE_REACTION_REMOVE:E,
MESSAGE_REACTION_REMOVE_ALL:function(t){var e=t.channelId,n=t.messageId,r=g[e];if(null==r||null==r.firstMessage)return!1;if(n!==r.firstMessage.id)return!1;g[e]=d(f({},r),{firstMessage:r.firstMessage.set("reactions",[])})},MESSAGE_REACTION_REMOVE_EMOJI:function(t){var e=t.channelId,n=t.messageId,r=t.emoji,i=g[e];if(null==i||null==i.firstMessage)return!1;if(n!==i.firstMessage.id)return!1;g[e]=d(f({},i),{firstMessage:i.firstMessage.removeReactionsForEmoji(r)})},LOAD_FORUM_POSTS:function(t){var e=t.threads;for(var n in e)y(n,e[n].first_message)},LOAD_THREADS_SUCCESS:b,LOAD_ARCHIVED_THREADS_SUCCESS:b,LOAD_MESSAGES_SUCCESS:function(t){var e=t.channelId,n=t.messages,r=n[n.length-1];null!=r&&r.id===e&&(g[e]={loaded:!0,firstMessage:(0,o.e5)(r)})}})},524600:(t,e,n)=>{n.d(e,{Z:()=>b});var r=n(202351),i=n(744564);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){
return t.__proto__||Object.getPrototypeOf(t)};return a(t)}function u(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e){s=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return s(t,e)}var l=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var f=null,d=!1,h=null,_=null;function p(){f=null;h=null;d=!1;_=null}function v(t){if(_!==t){_=t;p()}}var g=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&s(t,e)}(n,t);var e=c(n);function n(){o(this,n);return e.apply(this,arguments)}var r=n.prototype;r.getSearchQuery=function(t){v(t);return f};r.getSearchLoading=function(t){v(t);return d};r.getSearchResults=function(t){v(t);return h};r.getHasSearchResults=function(){return null!=h&&0!==h.length};r.__getLocalVars=function(){return{searchQuery:f,searchLoading:d,searchResults:h,selectedChannelId:_}};return n}(r.ZP.Store);g.displayName="ForumSearchStore";const b=new g(i.Z,{CONNECTION_OPEN:p,THREAD_DELETE:function(t){var e=t.channel;if(null==h)return!1;h=h.filter((function(t){return e.id!==t}))},CHANNEL_DELETE:function(t){if(t.channel.id===_){p();return!0}return!1},FORUM_SEARCH_QUERY_UPDATED:function(t){var e=t.channelId,n=t.query;v(e);f=n;_=e;null!=n&&""!==n||(h=null)},
FORUM_SEARCH_START:function(t){t.channelId===_&&(d=!0)},FORUM_SEARCH_SUCCESS:function(t){var e=t.channelId,n=t.threadIds;if(e===_){d=!1;h=n}},FORUM_SEARCH_FAILURE:function(t){if(t.channelId===_){d=!1;h=[]}},FORUM_SEARCH_CLEAR:function(t){if(t.channelId===_){h=null;f=null;d=!1}}})},474167:(t,e,n)=>{n.d(e,{FS:()=>d,nC:()=>h,Uw:()=>p,nU:()=>v,yv:()=>g});var r=n(920883),i=n(61209),o=n(567403),a=n(717091),u=n(508778),s=n(897196),l=n(473708);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(e&&o.length===e)break}}catch(t){u=!0;i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e)
;var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){var n=f(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[a.ZP],1),r=n[0];return{isNew:!t.isArchivedThread()&&r.isNewForumThread(t.id,t.parent_id,e),hasUnreads:!t.isArchivedThread()&&r.isForumPostUnread(t.id)}}function h(t){var e=f(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[i.Z,o.Z,a.ZP],3),n=e[0],r=e[1],u=e[2],s=n.getChannel(t);if(null==s)return null;var l=r.getGuild(s.guild_id);return null==l?null:d(s,l,[u])}var _=function(){return{minutes:l.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_MINUTES,
hours:l.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_HOURS,days:l.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_DAYS,month:l.Z.Messages.FORM_POST_CREATED_AGO_TIMESTAMP_MORE_THAN_MONTH}};function p(t,e){if(e===u.R6.POSTED_DURATION_AGO&&t===r.z.CREATION_DATE)return _}function v(t,e){var n=f(e,1)[0],r=n.hasTrackedUnread(t),i=n.hasOpenedThread(t),o=null!=n.getTrackedAckMessageId(t);return r&&i&&o}function g(t){var e;return!0===(null===(e=i.Z.getChannel(t))||void 0===e?void 0:e.hasFlag(s.zZ.PINNED))}},583507:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(797186),i=n(61209),o=n(883069);const a=new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.filterTagIds=null;this.sortOrder=null;this.layout=null;this.setFilterTagIds=function(t){e.filterTagIds=t};this.setSortOrder=function(t){e.sortOrder=t};this.setLayout=function(t){e.layout=t};this.getFilterTagIdsAnalytics=function(){
return null!=e.filterTagIds?Array.from(e.filterTagIds):[]};this.getSortOrderAnalytics=function(t){var n,r;return null!==(r=e.sortOrder)&&void 0!==r?r:null===(n=i.Z.getChannel(t))||void 0===n?void 0:n.getDefaultSortOrder()};this.getLayoutAnalytics=function(t){var n,a=i.Z.getChannel(t),u=null!==(n=e.layout)&&void 0!==n?n:null==a?void 0:a.getDefaultLayout();return(0,o.rA)(null==a?void 0:a.guild_id)&&u===r.X.LIST?o.Rs:u}}},782912:(t,e,n)=>{n.d(e,{Z:()=>_});var r=n(914716),i=n(536945),o=n(736818),a=n(61209),u=n(474167);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t){l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return l(t)}function c(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){f=Object.setPrototypeOf||function(t,e){
t.__proto__=e;return t};return f(t,e)}var d=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}const _=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&f(t,e)}(n,t);var e=h(n);function n(){s(this,n);var t;(t=e.apply(this,arguments)).readStateSnapshots={};t.actions={CHANNEL_SELECT:function(e){return t.handleChannelSelect(e)},
THREAD_CREATE:function(e){return t.handleThreadCreate(e)}};t.handleChannelSelect=function(e){var n=e.channelId;if(null!=n){var r=a.Z.getChannel(n);if(null!=r&&r.isForumLikeChannel()){t.readStateSnapshots={};t.processForumChannel(r.guild_id,n)}}};t.processForumChannel=function(e,n){var r=i.Z.getThreadsForParent(e,n);Object.keys(r).forEach((function(e){var n=(0,u.nC)(e);null!=n&&(t.readStateSnapshots[e]=n)}))};t.getReadStateSnapshotAnalytics=function(e){return t.readStateSnapshots[e]};return t}var r=n.prototype;r.handleThreadCreate=function(t){var e=t.channel;if(e.isForumPost()){var n=e.ownerId===o.default.getId();this.readStateSnapshots[e.id]={isNew:!n,hasUnreads:!n}}};r.__getLocalVars=function(){return{}};return n}(r.Z))},854602:(t,e,n)=>{n.d(e,{qs:()=>y,Js:()=>E,zI:()=>m,e7:()=>O,P_:()=>S,nH:()=>I,Vn:()=>C,Oq:()=>R,Je:()=>T,ab:()=>M,X0:()=>A,Hr:()=>w,B5:()=>P,KR:()=>D,Do:()=>L,B:()=>N,e5:()=>Z,ws:()=>j,xI:()=>U,GX:()=>F,N3:()=>x,MO:()=>H,lN:()=>k,qz:()=>G,HR:()=>W})
;var r=n(797186),i=n(396043),o=n(805907),a=n(61209),u=n(284610),s=n(652591),l=n(120415),c=n(779354),f=n(572615),d=n(524600),h=n(883069),_=n(734901),p=n(2590);function v(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){v(t,e,n[e])}))}return t}function b(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){
Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function y(t){var e=t.guildId,n=t.channelId,r=t.sessionId,o=t.postIds,a=t.additionalTimes;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_SEEN_BATCH,b(g({},(0,_.xl)({channelId:n,sessionId:r})),{guild_id:e,channel_id:n,post_ids:o,additional_seen_time_millis:a}))}function E(t){var e=t.guildId,n=t.channelId,r=t.numSearchResults;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_SEARCHED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,num_search_results:r}))}function m(t){var e=t.guildId,n=t.channelId;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_SEARCH_CLEARED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n}))}function O(t){var e=t.guildId,n=t.channelId,r=t.tagId,o=t.filterTagIds,a=t.added,u=t.location;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_TAG_FILTER_CLICKED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,tag_id:r,filter_tag_ids:o,added:a,location:u}))}function S(t){var e=t.guildId,n=t.channelId
;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_CREATE_NEW_POST_CLICKED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n}))}function I(t){var e=t.guildId,n=t.channelId;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_CREATE_NEW_POST_KEYBIND_USED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n}))}function C(t){var e,n,r,o,s=t.guildId,l=t.channelId,c=a.Z.getChannel(l);if(null!=c){var f=u.Z.getThreadSettings(l),d=null===(e=c.template)||void 0===e?void 0:e.trim(),h=u.Z.getDraft(l,u.d.FirstThreadMessage),v=null==h||0===h.length||(null==h?void 0:h.trim())===d,y=null==(null==f?void 0:f.appliedTags)||0===(null==f||null===(n=f.appliedTags)||void 0===n?void 0:n.size),E=null==(null==f?void 0:f.name)||0===(null===(o=null==f||null===(r=f.name)||void 0===r?void 0:r.trim())||void 0===o?void 0:o.length);v&&y&&E||i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_NEW_POST_DRAFT_CREATED,b(g({},(0,_.xl)({channelId:l})),{guild_id:s,channel_id:l,applied_tag_ids:(0,_.q8)(l),num_attachments:(0,_.RR)(l)}))}}
function R(t){var e=t.guildId,n=t.channelId;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_NEW_POST_DRAFT_CLEARED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n}))}function T(t){var e=t.guildId,n=t.channelId,r=t.postId,o=function(){i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_POST_CREATED,b(g({},(0,_.n4)({channelId:r})),{guild_id:e,channel_id:n}))};f.Z.isLoading(r)?f.Z.addConditionalChangeListener((function(){if(f.Z.isLoading(r))return!0;o();return!1})):o()}function M(t){var e=t.guildId,n=t.channelId;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_SCROLLED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n}))}function A(t){var e=t.guildId,n=t.channelId,r=t.gridViewAutoEnabled;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_GRID_UPSELL_VIEWED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,grid_view_auto_enabled:r}))}function w(t){var e=t.guildId,n=t.channelId,r=t.numArchivedThreads,o=t.hasMoreThreads,u=t.filterTagIds,l=t.sortOrder
;s.default.track(p.rMx.FORUM_CHANNEL_MORE_POSTS_LOADED,b(g({},(0,i.hH)(e),(0,i.v_)(a.Z.getChannel(n)),(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,num_archived_threads:r,num_active_threads:(0,_.bE)(e,n),has_more_threads:o,filter_tag_ids:u,sort_order:l}))}function P(t){var e=t.guildId,n=t.channelId,r=t.postId,o=t.location;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_POST_CLICKED,b(g({},(0,_.n4)({channelId:r})),{guild_id:e,channel_id:n,is_search_result:null!=d.Z.getSearchResults(n),location:o}))}function D(t){var e=t.guildId,n=t.channelId,r=t.sortOrder;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_POSTS_SORTED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,sort_type:(0,_.t$)(r),sort_order:r,forum_channel_sort_order:r}))}function L(t){var e=t.guildId,n=t.channelId,o=t.forumLayout,a=(0,c.r)(e)&&o===r.X.LIST?h.Rs:o;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_LAYOUT_UPDATED,b(g({},(0,_.xl)({channelId:n})),{guild_id:e,channel_id:n,forum_channel_layout:a}))}function N(t){
var e=t.postId,n=t.location;i.ZP.trackWithMetadata(p.rMx.FORUM_POST_LINK_COPIED,{forum_post_id:e,location:n})}function Z(t){var e=t.onboardingCTA;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_ONBOARDING_CLICKED,{onboarding_cta_type:e})}function j(t){var e=t.forumDemoId;i.ZP.trackWithMetadata(p.rMx.FORUM_UPSELL_MODAL_CLICKED,{forum_demo_id:e})}function U(t){var e=t.added;i.ZP.trackWithMetadata(p.rMx.FORUM_ADD_MEDIA_TO_ORIGINAL_POST_CLICKED,{added:e})}function F(t){var e=t.readGuideCta;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_HELPER_CARD_CLICKED,{read_guide_cta:e})}function x(t){var e=t.isMobile;i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_MEDIA_UPLOADER_CLICKED,{is_mobile:e})}function H(){i.ZP.trackWithMetadata(p.rMx.FORUM_CHANNEL_ENABLE_AUTOMOD_CLICKED)}function k(t){i.ZP.trackWithMetadata(p.rMx.CHANNEL_OPENED,b(g({},(0,i.hH)(t.guild_id),(0,i.v_)(t),(0,o.K)(t,!0)),{channel_id:t.id,guild_id:t.guild_id,parent_id:t.parent_id,parent_channel_type:t.parentChannelThreadType,
channel_view:"Split View",platform:(0,l.Xf)()}))}function G(){i.ZP.trackWithMetadata(p.rMx.OPEN_MODAL,{type:"Forum Channel Upsell Modal",location:{section:p.jXE.CHANNEL_WELCOME_CTA}})}function W(t){var e=t.guildId,n=t.channelId;i.ZP.trackWithMetadata(p.rMx.THREAD_CREATION_STARTED,b(g({},(0,o.K)(a.Z.getChannel(n))),{channel_id:n,guild_id:e}))}},734901:(t,e,n)=>{n.d(e,{xl:()=>Z,n4:()=>j,t$:()=>R,WW:()=>C,q8:()=>M,RR:()=>T,bE:()=>A});var r=n(920883),i=n(842227),o=n(536945),a=n(487685),u=n(666613),s=n(591684),l=n(61209),c=n(284610),f=n(682776),d=n(255592),h=n(572615),_=n(583507),p=n(782912),v=n(468811),g=n.n(v);function b(t){return{channelId:t,sessionId:g().v4()}}const y=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}t.prototype.getForumChannelSessionId=function(t){null==this.session&&(this.session=b(t));this.session.channelId!==t&&(this.session=b(t));return this.session.sessionId};return t}())
;var E=n(2590),m=n(897196),O=n(379364);function S(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function I(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function C(t){return y.getForumChannelSessionId(t)}function R(t){switch(t){case r.z.CREATION_DATE:return O.SX.CREATION_DATE;case r.z.LATEST_ACTIVITY:return O.SX.LATEST_ACTIVITY;default:throw new Error("Unexpected sort order ".concat(t))}}function T(t){return d.Z.getUploads(t,c.d.FirstThreadMessage).length}function M(t){var e,n=l.Z.getChannel(t);if(null==n)return[]
;var r,i=l.Z.getChannel(n.parent_id),o=null==i?void 0:i.availableTags;if(null==i||null==o)return[];var a=null!==(r=null===(e=c.Z.getThreadSettings(t))||void 0===e?void 0:e.appliedTags)&&void 0!==r?r:new Set,u=new Set(o.map((function(t){return t.id})));return Array.from(a).filter((function(t){return u.has(t)}))}function A(t,e){return Object.keys(o.Z.getThreadsForParent(t,e)).length}function w(t){var e=h.Z.getMessage(t),n=e.loaded,r=e.firstMessage;return n?r:null}function P(t){var e=w(t);return null==e?0:e.reactions.length}function D(t){var e=w(t);return null==e?0:e.reactions.reduce((function(t,e){return t+e.count}),0)}function L(t){var e,n=l.Z.getChannel(t);if(null==n)return[];var r=l.Z.getChannel(n.parent_id),i=null==r?void 0:r.availableTags;if(null==r||null==i)return[];var o,a=new Set(i.map((function(t){return t.id})));return null!==(o=null===(e=n.appliedTags)||void 0===e?void 0:e.filter((function(t){return a.has(t)})))&&void 0!==o?o:[]}function N(t){var e,n=w(t)
;return null==n?[]:n.attachments.map((function(t){return null!==(e=t.content_type)&&void 0!==e?e:"unknown"}))}function Z(t){var e,n,r,i,o=t.channelId,a=t.sessionId,u=l.Z.getChannel(o);return null!=u&&u.isForumLikeChannel()?{forum_channel_has_guidelines:null!=u.topic&&u.topic.trim().length>0,forum_channel_default_emoji_reaction_id:null===(e=u.defaultReactionEmoji)||void 0===e?void 0:e.emojiId,forum_channel_default_emoji_reaction_name:null===(n=u.defaultReactionEmoji)||void 0===n?void 0:n.emojiName,forum_channel_available_tag_ids:null!==(i=null===(r=u.availableTags)||void 0===r?void 0:r.map((function(t){return t.id})))&&void 0!==i?i:[],forum_channel_tag_required:u.hasFlag(m.zZ.REQUIRE_TAG),forum_channel_can_create_post:f.Z.can(E.Plq.SEND_MESSAGES,u),forum_channel_filter_tag_ids:_.Z.getFilterTagIdsAnalytics(),forum_channel_sort_order:_.Z.getSortOrderAnalytics(u.id),forum_channel_session_id:null!=a?a:C(u.id),forum_channel_layout:_.Z.getLayoutAnalytics(u.id),
forum_channel_default_sort_order:u.defaultSortOrder,forum_channel_default_layout:u.defaultForumLayout}:null}function j(t){var e,n,r,o,c,f=t.channelId,d=t.sessionId,h=l.Z.getChannel(f);if(null==h||!h.isForumPost())return null;var _,v,g=l.Z.getChannel(h.parent_id);return null!=g&&g.isForumLikeChannel()?I(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){S(t,e,n[e])}))}return t}({},Z({channelId:g.id,sessionId:d})),{thread_approximate_member_count:u.Z.getMemberCount(f),thread_approximate_message_count:s.Z.getCount(f),thread_archived:!0===(null===(e=h.threadMetadata)||void 0===e?void 0:e.archived),thread_locked:null!==(_=null===(n=h.threadMetadata)||void 0===n?void 0:n.locked)&&void 0!==_&&_,
thread_auto_archive_duration_minutes:null!==(v=null===(r=h.threadMetadata)||void 0===r?void 0:r.autoArchiveDuration)&&void 0!==v?v:0,thread_approximate_creation_date:i.default.extractTimestamp(f),forum_post_id:h.id,forum_post_first_message_id:h.id,forum_post_num_reactions:D(h.id),forum_post_num_unique_reactions:P(h.id),forum_post_applied_tag_ids:L(h.id),forum_post_is_pinned:h.hasFlag(m.zZ.PINNED),forum_post_is_new:null===(o=p.Z.getReadStateSnapshotAnalytics(h.id))||void 0===o?void 0:o.isNew,forum_post_is_unread:null===(c=p.Z.getReadStateSnapshotAnalytics(h.id))||void 0===c?void 0:c.hasUnreads,forum_post_is_following:a.Z.hasJoined(h.id),forum_post_attachment_mimetypes:N(h.id)}):null}},883069:(t,e,n)=>{n.d(e,{Rs:()=>o,xz:()=>a,rA:()=>u});var r=n(265494),i=n(419951),o=3;function a(t){var e=i.Z.useExperiment({guildId:null!=t?t:""}),n=r.Z.useExperiment({},{autoTrackExposure:!1});return e.enabled||n.enabled}function u(t){var e=i.Z.getCurrentConfig({guildId:null!=t?t:""
}),n=r.Z.getCurrentConfig({},{autoTrackExposure:!1});return e.enabled||n.enabled}},666613:(t,e,n)=>{n.d(e,{Z:()=>I});var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(659436),s=n(382060),l=n(61209);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function d(t){d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return d(t)}function h(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t,e){_=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return _(t,e)}var p=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function v(t){var e=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var g={};function b(t){var e;null===(e=t.threads)||void 0===e||e.forEach(y)}function y(t){if(!s.AW.has(t.type))return!1;var e=function(t){if(!(t.id in g)){var e,n;g[t.id]={guildId:t.guild_id,parentId:t.parent_id,memberCount:null!==(e=t.memberCount)&&void 0!==e?e:0,memberIdsPreview:null!==(n=t.memberIdsPreview)&&void 0!==n?n:[]}}return g[t.id]}(t);null!=t.memberCount&&(e.memberCount=t.memberCount);null!=t.memberIdsPreview&&(e.memberIdsPreview=t.memberIdsPreview)}function E(t){return y(t.channel)}function m(t){t.threads.forEach(O)}function O(t){if(null!=t&&!(t.id in g)){var e=l.Z.getChannel(t.id)
;if(null!=e){y(e);return!0}}return!1}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&_(t,e)}(n,t);var e=v(n);function n(){c(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(l.Z)};r.getMemberCount=function(t){var e,n;return null!==(n=null===(e=g[t])||void 0===e?void 0:e.memberCount)&&void 0!==n?n:null};r.getMemberIdsPreview=function(t){var e,n;return null!==(n=null===(e=g[t])||void 0===e?void 0:e.memberIdsPreview)&&void 0!==n?n:null};r.getInitialOverlayState=function(){return g};r.__getLocalVars=function(){return{threads:g}};return n}(o.ZP.Store);S.displayName="ThreadMembersStore";const I=new S(a.Z,{CONNECTION_OPEN:function(t){g={};t.guilds.forEach(b)},OVERLAY_INITIALIZE:function(t){var e=t.threadMembers;g=function(t){for(var e=1;e<arguments.length;e++){
var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){f(t,e,n[e])}))}return t}({},e)},GUILD_CREATE:function(t){b(t.guild)},GUILD_DELETE:function(t){var e,n=t.guild;e=n.id,g=i().omitBy(g,(function(t){return t.guildId===e}))},CHANNEL_DELETE:function(t){var e,n=t.channel;e=n.id,g=i().omitBy(g,(function(t){return t.parentId===e}))},THREAD_CREATE:E,THREAD_UPDATE:E,THREAD_LIST_SYNC:function(t){t.threads.forEach(y)},THREAD_MEMBERS_UPDATE:function(t){var e=g[t.id];if(null==e)return!1;null!=t.memberIdsPreview&&(e.memberIdsPreview=t.memberIdsPreview);e.memberCount=t.memberCount},SEARCH_FINISH:function(t){var e=!1,n=!0,r=!1,i=void 0;try{for(var o,a=t.messages[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=!0,l=!1,c=void 0;try{
for(var f,d=u[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var h=f.value;e=O(h.thread)||e}}catch(t){l=!0;c=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw c}}}}catch(t){r=!0;i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.threads.forEach((function(t){e=O(t)||e}));return e},LOAD_THREADS_SUCCESS:m,LOAD_ARCHIVED_THREADS_SUCCESS:m,THREAD_DELETE:function(t){var e=t.channel;delete g[e.id]},LOAD_MESSAGES_SUCCESS:function(t){var e=!1,n=!0,r=!1,i=void 0;try{for(var o,a=t.messages[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){e=O(o.value.thread)||e}}catch(t){r=!0;i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},GUILD_FEED_FETCH_SUCCESS:function(t){var e=t.data,n=!1,r=!0,i=!1,o=void 0;try{for(var a,s=(0,u.J)(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){n=O(a.value)||n}}catch(t){i=!0;o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}})},591684:(t,e,n)=>{n.d(e,{Z:()=>j})
;var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(659436),s=n(649536),l=n(382060),c=n(4798),f=n(722406),d=n(61209),h=n(352980),_=n(379364),p=n(2590);function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function b(t){b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return b(t)}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){g(t,e,n[e])}))}return t}function E(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function m(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t,e){O=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return O(t,e)}var S=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){
var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}var C=new Set,R={},T={};function M(t,e){l.AW.has(t.type)&&A(function(t){if(!(t.id in R)){var e;R[t.id]={guildId:t.guild_id,parentId:t.parent_id,count:null!==(e=t.messageCount)&&void 0!==e?e:0,mostRecentRawMessage:null,mostRecentMessage:null}}return R[t.id]}(t),e)}function A(t,e){var n,r=(null!==(n=T[t.parentId])&&void 0!==n?n:0)+1;T[t.parentId]=r;e(t)}function w(t){var e;null===(e=t.threads)||void 0===e||e.forEach(P)}function P(t){M(t,(function(e){null!=t.messageCount&&(e.count=t.messageCount);var n,r=null!==(n=e.mostRecentRawMessage)&&void 0!==n?n:e.mostRecentMessage;if(null!=t.lastMessageId&&(null==r?void 0:r.id)!==t.lastMessageId){e.mostRecentRawMessage=null;e.mostRecentMessage=null}}))}function D(t){if(null!=t&&!(t.id in R)){var e=d.Z.getChannel(t.id);if(null!=e){P(e);return!0}}return!1}function L(t){P(t.channel)}function N(t){t.threads.forEach(D)}var Z=function(t){
!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&O(t,e)}(n,t);var e=I(n);function n(){v(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(d.Z,h.Z)};r.getCount=function(t){var e,n;return null!==(n=null===(e=R[t])||void 0===e?void 0:e.count)&&void 0!==n?n:null};r.getMostRecentMessage=function(t){var e,n=R[t];if(null==n)return null;if(null==n.mostRecentMessage&&null!=n.mostRecentRawMessage){var r;n.mostRecentMessage=null!==(r=h.Z.getMessage(t,n.mostRecentRawMessage.id))&&void 0!==r?r:(0,s.e5)(n.mostRecentRawMessage);n.mostRecentRawMessage=null}return null!==(e=n.mostRecentMessage)&&void 0!==e?e:null};r.getChannelThreadsVersion=function(t){return T[t]};r.getInitialOverlayState=function(){return R};r.__getLocalVars=function(){return{recentDeletedMessages:C,threads:R,
channelThreadsVersion:T}};return n}(o.ZP.Store);Z.displayName="ThreadMessageStore";const j=new Z(a.Z,{CONNECTION_OPEN:function(t){T={};C.clear();t.guilds.forEach(w)},OVERLAY_INITIALIZE:function(t){var e=t.threadMessages;R=y({},e);for(var n in R){var r=e[n].mostRecentMessage;null!=r&&(e[n].mostRecentMessage=new c.Z(E(y({},r),{author:new f.Z(r.author)})))}},GUILD_CREATE:function(t){w(t.guild)},GUILD_DELETE:function(t){var e,n=t.guild;e=n.id,R=i().omitBy(R,(function(t){var n=t.guildId===e;n&&delete T[t.parentId];return n}))},THREAD_CREATE:L,THREAD_UPDATE:L,THREAD_LIST_SYNC:function(t){var e=t.threads,n=t.mostRecentMessages;e.forEach(P);null==n||n.forEach((function(t){var e=d.Z.getChannel(t.channel_id);null!=e&&t.type!==p.uaV.THREAD_STARTER_MESSAGE&&M(e,(function(e){e.mostRecentRawMessage=t;e.mostRecentMessage=null}))}))},LOAD_THREADS_SUCCESS:N,LOAD_ARCHIVED_THREADS_SUCCESS:N,SEARCH_FINISH:function(t){var e=t.messages,n=t.threads,r=!0,i=!1,o=void 0;try{
for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=!0,c=!1,f=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){D(d.value.thread)}}catch(t){c=!0;f=t}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}}catch(t){i=!0;o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}n.forEach(D)},THREAD_DELETE:function(t){var e=t.channel;delete R[e.id]},CHANNEL_DELETE:function(t){!function(t){R=i().omitBy(R,(function(e){return e.parentId===t}));delete T[t]}(t.channel.id)},MESSAGE_CREATE:function(t){var e=t.message,n=t.optimistic,r=t.isPushNotification,i=t.sendMessageOptions;if(n||r||null!=i)return!1;var o=d.Z.getChannel(e.channel_id);if(null==o||!l.Ec.has(o.type))return!1;if(!function(t,e){return e.type!==p.uaV.THREAD_STARTER_MESSAGE&&(!t.isForumPost()||e.id!==t.id)}(o,e))return!1;M(o,(function(t){t.count=Math.min(t.count+1,_.M3);t.mostRecentRawMessage=e;t.mostRecentMessage=null}))},MESSAGE_UPDATE:function(t){
var e,n=t.message,r=R[n.channel_id],i=null!==(e=null==r?void 0:r.mostRecentRawMessage)&&void 0!==e?e:null==r?void 0:r.mostRecentMessage;if(null==r||null==i||i.id!==n.id)return!1;A(r,(function(t){null!=t.mostRecentMessage&&(t.mostRecentMessage=(0,s.wi)(t.mostRecentMessage,n));null!=t.mostRecentRawMessage&&(t.mostRecentRawMessage=(0,s.gx)(t.mostRecentRawMessage,n))}))},MESSAGE_DELETE:function(t){var e=t.id,n=t.channelId,r=R[n];if(null==r)return!1;var i=n!==e,o=!C.has(e);A(r,(function(t){var n,r=null!==(n=t.mostRecentRawMessage)&&void 0!==n?n:t.mostRecentMessage;if(null!=r&&r.id===e){t.mostRecentMessage=null;t.mostRecentRawMessage=null}t.count=i&&o?Math.max(t.count-1,0):t.count;C.add(e)}))},MESSAGE_DELETE_BULK:function(t){var e=t.ids,n=t.channelId,r=R[n];if(null==r)return!1;var i=e.filter((function(t){var e=n!==t,r=!C.has(t);return e&&r})).length;i>0&&A(r,(function(t){var n,r=null!==(n=t.mostRecentRawMessage)&&void 0!==n?n:t.mostRecentMessage;if(null!=r&&e.includes(r.id)){
t.mostRecentMessage=null;t.mostRecentRawMessage=null}t.count-=i;e.forEach((function(t){return C.add(t)}))}))},LOAD_MESSAGES_SUCCESS:function(t){var e=!1,n=!0,r=!1,i=void 0;try{for(var o,a=t.messages[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){e=D(o.value.thread)||e}}catch(t){r=!0;i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}if(t.isAfter||t.isBefore||t.hasMoreAfter)return e;var u=d.Z.getChannel(t.channelId);if(null==u||!l.Ec.has(u.type))return e;M(u,(function(e){if(0===t.messages.length){e.mostRecentRawMessage=null;e.mostRecentMessage=null;e.count=0}else{var n,r=null!==(n=t.messages[0])&&void 0!==n?n:null;e.count=t.messages.length>=_.M3?_.M3:e.count;if((null==r?void 0:r.type)!==p.uaV.THREAD_STARTER_MESSAGE){e.mostRecentRawMessage=r;e.mostRecentMessage=null}}}))},GUILD_FEED_FETCH_SUCCESS:function(t){var e=t.data,n=!1,r=!0,i=!1,o=void 0;try{for(var a,s=(0,u.J)(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){n=D(a.value)||n}}catch(t){i=!0;o=t}finally{try{
r||null==s.return||s.return()}finally{if(i)throw o}}return n}})},512291:(t,e,n)=>{n.d(e,{Z:()=>K});var r=n(202351),i=n(744564),o=n(496486),a=n.n(o),u=n(513328),s=n(168024),l=n(296602);var c=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._unsubscriptions={};this._unsubscribe=new u.sW(6e4,(function(){return n.flushUnsubscriptions()}));this._onChange=e}var e=t.prototype;e.reset=function(){this._subscriptions={};this._unsubscriptions={};this._unsubscribe.cancel()};e.get=function(t){var e,n=null!==(e=this._subscriptions[t])&&void 0!==e?e:{};return a().keys(n)};e.clear=function(t){delete this._subscriptions[t];delete this._unsubscriptions[t]};e.subscribe=function(t,e){var n,r,i=null!==(n=this._subscriptions[t])&&void 0!==n?n:{};i[e]=(null!==(r=i[e])&&void 0!==r?r:0)+1;this._subscriptions[t]=i;1===i[e]&&this._onChange(t,this.get(t));this.checkForLeaks(t,e)}
;e.isSubscribed=function(t,e){return null!=this._subscriptions[t]&&null!=this._subscriptions[t][e]};e.unsubscribe=function(t,e){if(this.isSubscribed(t,e)){var n,r,i=null!==(n=this._unsubscriptions[t])&&void 0!==n?n:{};i[e]=(null!==(r=i[e])&&void 0!==r?r:0)+1;this._unsubscriptions[t]=i;1===i[e]&&this._unsubscribe.delay(!1)}};e.checkForLeaks=function(t,e){var n,r,i,o,a=(null!==(i=null===(n=this._subscriptions[t])||void 0===n?void 0:n[e])&&void 0!==i?i:0)-(null!==(o=null===(r=this._unsubscriptions[t])||void 0===r?void 0:r[e])&&void 0!==o?o:0);a>5&&new l.Z("GuildMemberSubscriptions").warn("GuildMemberSubscriptions.subscribe(...): Potential reference leak! (".concat(a," subscriptions)"))};e.flushUnsubscriptions=function(){var t=this;if(!a().isEmpty(this._unsubscriptions)){a().forEach(this._unsubscriptions,(function(e,n){var r=t._subscriptions[n];a().forEach(e,(function(t,e){var n;r[e]=(null!==(n=r[e])&&void 0!==n?n:0)-t;r[e]<=0&&delete r[e]}));a().isEmpty(r)&&delete t._subscriptions[n]
;t._onChange(n,t.get(n))}));this._unsubscriptions={}}};return t}(),f=n(5387),d=n.n(f);var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._subscriptions={};this._onChange=e}var e=t.prototype;e.reset=function(){this._subscriptions={}};e.get=function(t){return this._get(t).keys()};e.getSubscribedThreadIds=function(){var t=new Set;for(var e in this._subscriptions){var n=!0,r=!1,i=void 0;try{for(var o,a=this._subscriptions[e].keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;t.add(u)}}catch(t){r=!0;i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}return t};e._get=function(t){var e;return null!==(e=this._subscriptions[t])&&void 0!==e?e:new(d())({max:3,updateAgeOnGet:!0})};e.clear=function(t){if(t in this._subscriptions){delete this._subscriptions[t];this._onChange(t,[])}};e.subscribe=function(t,e,n){var r=this._get(t);if(r.has(e)){r.set(e,Date.now());return!1}
null!=n&&r.has(n)&&r.set(n,Date.now());r.set(e,Date.now());this._subscriptions[t]=r;this._onChange(t,r.keys());return!0};e.unsubscribe=function(t,e){if(!(t in this._subscriptions))return!1;var n=this._subscriptions[t];if(n.has(e)){n.del(e);this._onChange(t,n.keys());return!0}return!1};return t}(),_=n(2590);function p(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function v(t){return null!=t&&"null"!==t&&t!==_.ME&&"undefined"!==t&&t!==_.I_8}var g=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this._members=new c((function(t,e){return n._enqueue(t,{members:e})}));this._channels=new s.ZP((function(t,e){return n._enqueue(t,{channels:e})}));this._threadMemberLists=new h((function(t,e){return n._enqueue(t,{thread_member_lists:e})}));this._typing=new Set;this._threads=new Set;this._activities=new Set;this._subscribed=new Set;this._pending={}
;this._flush=new u.sW(0,(function(){return n.flush()}));this._onChange=e}var e=t.prototype;e._enqueue=function(t,e){this._pending[t]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){p(t,e,n[e])}))}return t}({},this._pending[t],e);this._flush.delay()};e.reset=function(){this._subscribed.clear();this._pending={};this._members.reset();this._channels.reset();this._threadMemberLists.reset();this._typing.clear();this._threads.clear();this._activities.clear()};e.get=function(t){return{typing:this._typing.has(t),threads:this._threads.has(t),activities:this._activities.has(t),members:this._members.get(t),channels:this._channels.get(t),thread_member_lists:this._threadMemberLists.get(t)}};e.getSubscribedThreadIds=function(){
return this._threadMemberLists.getSubscribedThreadIds()};e.isSubscribedToThreads=function(t){return this._threads.has(t)};e.forEach=function(t){this._subscribed.forEach(t)};e.clearWithoutFlushing=function(t,e){!e&&this._threads.has(t)||this._subscribed.delete(t);delete this._pending[t];this._members.clear(t);this._channels.clear(t);this._threadMemberLists.clear(t);this._typing.delete(t);e&&this._threads.delete(t);this._activities.delete(t)};e.flush=function(){var t=this;a().forEach(this._pending,(function(e,n){t._subscribed.add(n);t._onChange(n,e)}));this._pending={}};e.subscribeUser=function(t,e){v(t)&&this._members.subscribe(t,e)};e.unsubscribeUser=function(t,e){v(t)&&this._members.unsubscribe(t,e)};e.subscribeChannel=function(t,e,n){return!!v(t)&&this._channels.subscribe(t,e,n)};e.subscribeThreadMemberList=function(t,e,n){return!!v(t)&&this._threadMemberLists.subscribe(t,e,n)};e.unsubscribeThreadMemberList=function(t,e){return!!v(t)&&this._threadMemberLists.unsubscribe(t,e)}
;e.subscribeToGuild=function(t){this._subscribeToFeature(t,this._typing,{typing:!0});this._subscribeToFeature(t,this._activities,{activities:!0});this._subscribeToFeature(t,this._threads,{threads:!0})};e._subscribeToFeature=function(t,e,n){if(v(t)&&!e.has(t)){e.add(t);this._enqueue(t,n)}};return t}(),b=n(73727),y=n(736818),E=n(804185),m=n(61209),O=n(837067),S=n(21372),I=n(567403),C=n(69085),R=n(840922),T=n(715107),M=n(464187);function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t){P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return P(t)}function D(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t,e){
L=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return L(t,e)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(e&&o.length===e)break}}catch(t){u=!0;i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z,j=function(t){
return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}var F=new g((function(t,e){(null!=I.Z.getGuild(t)||O.Z.isUnavailable(t))&&i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:t,subscriptions:e})}));function x(t,e){F.forEach((function(n){var r;if(n!==M.Z.getGuildId()&&n!==C.Z.getGuildId()&&n!==(null===(r=m.Z.getChannel(T.Z.getChannelId()))||void 0===r?void 0:r.getGuildId())&&(null==Z||Z.guildId!==n)){F.clearWithoutFlushing(n,t);e&&i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:n,subscriptions:F.get(n)})}}))}function H(t,e){
F.subscribeToGuild(t);return null!=e&&E.ZP.getSection(e)===_.ULH.MEMBERS&&k(t,e,s.KV)}function k(t,e,n){var r=m.Z.getChannel(e);if(null==r)return!1;var i=r.getGuildId();i!==t&&t===_.I_8&&F.subscribeToGuild(i);return(null==r?void 0:r.isThread())?r.type===_.d4z.ANNOUNCEMENT_THREAD?F.subscribeChannel(i,r.parent_id,n):!!r.isActiveThread()&&F.subscribeThreadMemberList(i,e,T.Z.getChannelId()):F.subscribeChannel(i,e,n)}function G(t){"CONNECTION_OPEN"===t.type&&x(!0,!1);var e=M.Z.getGuildId();null!=e&&H(e,T.Z.getChannelId(e));F.forEach((function(t){null==I.Z.getGuild(t)?F.clearWithoutFlushing(t,!0):i.Z.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",guildId:t,subscriptions:F.get(t)})}))}function W(t){var e=t.guildId,n=t.channelId;return!O.Z.isUnavailable(e)&&H(e,n)}function B(){return H(M.Z.getGuildId(),T.Z.getChannelId())}function V(){var t=b.Z.getSyncingWith();if(null==t){if(null!=Z){F.unsubscribeUser(Z.guildId,Z.userId);Z=null}}else{var e=t.userId;if(null!=Z&&Z.userId===e)return!1
;if(R.Z.isFriend(e))return!1;var n=S.ZP.memberOf(e);if(0===n.length)return!1;var r=N(n,1)[0];Z={guildId:r,userId:e};F.subscribeUser(r,e)}return!1}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&L(t,e)}(n,t);var e=U(n);function n(){w(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(m.Z,I.Z,M.Z,T.Z,C.Z,y.default,E.ZP);this.syncWith([b.Z],V);this.syncWith([E.ZP],B)};r.getSubscribedThreadIds=function(){return F.getSubscribedThreadIds()};r.isSubscribedToThreads=function(t){return F.isSubscribedToThreads(t)};r.__getLocalVars=function(){return{syncingWith:Z,subscriptions:F}};return n}(r.ZP.Store);z.displayName="GuildSubscriptionsStore";const K=new z(i.Z,{CONNECTION_OPEN:G,CONNECTION_RESUMED:G,CONNECTION_CLOSED:function(){x(!1,!1)},IDLE:function(t){
if(!t.idle)return!1;x(!1,!0)},LOGOUT:function(){F.reset()},VOICE_CHANNEL_SELECT:W,CHANNEL_SELECT:W,GUILD_CREATE:function(t){t.guild.id===M.Z.getGuildId()&&B()},GUILD_DELETE:function(t){var e=t.guild;F.clearWithoutFlushing(e.id,!0)},GUILD_SUBSCRIPTIONS_MEMBERS_ADD:function(t){var e=t.guildId;t.userIds.forEach((function(t){t!==y.default.getId()&&F.subscribeUser(e,t)}));return!1},GUILD_SUBSCRIPTIONS_MEMBERS_REMOVE:function(t){var e=t.guildId;t.userIds.forEach((function(t){F.unsubscribeUser(e,t)}));return!1},GUILD_SUBSCRIPTIONS_CHANNEL:function(t){return k(t.guildId,t.channelId,t.ranges)},GUILD_SUBSCRIPTIONS:function(t){var e=t.guildId;return F.subscribeToGuild(e)},CHANNEL_PRELOAD:function(t){return H(t.guildId,t.channelId)},INBOX_OPEN:function(t){var e=t.guildIds,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;null!=u&&F.subscribeToGuild(u)}}catch(t){r=!0;i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!1},
THREAD_UPDATE:function(t){var e=t.channel;if(e.isArchivedThread())return F.unsubscribeThreadMemberList(e.guild_id,e.id);if(!e.isActiveThread()||T.Z.getChannelId()!==e.id)return!1;F.subscribeThreadMemberList(e.guild_id,e.id,T.Z.getChannelId())},THREAD_DELETE:function(t){var e=t.channel;return F.unsubscribeThreadMemberList(e.guild_id,e.id)},THREAD_LIST_SYNC:B})}}]);
//# sourceMappingURL=0ba10a36e0c9e5667ed0.js.map