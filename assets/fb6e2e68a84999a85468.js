"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[51388],{130671:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(281110),o=n(744564),c=n(694444),u=n(488110),i=n(2590),a=n(473708);function f(e,t,n,r,o,c,u){try{var i=e[c](u),a=i.value}catch(e){n(e);return}i.done?t(a):Promise.resolve(a).then(r,o)}var s=function(e,t){var n,r,o,c,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;(r=0,o)&&(c=[2&c[0],o.value]);switch(c[0]){case 0:case 1:o=c;break;case 4:u.label++;return{value:c[1],done:!1};case 5:u.label++;r=c[1];c=[0];continue;case 7:c=u.ops.pop();u.trys.pop();continue;default:if(!(o=u.trys,
o=o.length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){u=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1];o=c;break}if(o&&u.label<o[2]){u.label=o[2];u.ops.push(c);break}o[2]&&u.ops.pop();u.trys.pop();continue}c=t.call(e,u)}catch(e){c=[6,e];r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};function l(e,t){o.Z.dispatch({type:"MFA_SMS_TOGGLE"});return r.Z.post({url:e,body:{password:t},oldFormErrors:!0}).then((function(e){o.Z.dispatch({type:"MFA_SMS_TOGGLE_COMPLETE"});return e}),(function(e){o.Z.dispatch({type:"MFA_SMS_TOGGLE_COMPLETE"});throw e}))}const p={enableMFAStart:function(e){return(t=function(){return s(this,(function(t){switch(t.label){case 0:return[4,r.Z.post({url:i.ANM.MFA_TOTP_ENABLE,body:{password:e},oldFormErrors:!0})];case 1:return[2,t.sent().body]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var c=t.apply(e,n);function u(e){f(c,r,o,u,i,"next",e)}
function i(e){f(c,r,o,u,i,"throw",e)}u(void 0)}))})();var t},enable:function(e){var t=e.password,n=e.code,c=e.secret;return r.Z.post({url:i.ANM.MFA_TOTP_ENABLE,body:{code:n,secret:c,password:t},oldFormErrors:!0}).then((function(e){return o.Z.dispatch({type:"MFA_ENABLE_SUCCESS",token:e.body.token,codes:e.body.backup_codes})}))},disable:function(){(0,u.Z)((function(e){return r.Z.post({url:i.ANM.MFA_TOTP_DISABLE,body:e,oldFormErrors:!0})}),{checkEnabled:!0,modalProps:{title:a.Z.Messages.TWO_FA_DISABLE,actionText:a.Z.Messages.TWO_FA_REMOVE}}).then((function(e){var t=e.body.token;return o.Z.dispatch({type:"MFA_DISABLE_SUCCESS",token:t})}))},enableSMS:function(e){return l(i.ANM.MFA_SMS_ENABLE,e)},disableSMS:function(e){return l(i.ANM.MFA_SMS_DISABLE,e)},sendMFABackupCodesVerificationKeyEmail:function(e){return r.Z.post({url:i.ANM.MFA_SEND_VERIFICATION_KEY,body:{password:e},oldFormErrors:!0}).then((function(e){return o.Z.dispatch({type:"MFA_SEND_VERIFICATION_KEY",nonces:{
viewNonce:e.body.nonce,regenerateNonce:e.body.regenerate_nonce}})}),(function(e){throw e}))},confirmViewBackupCodes:function(e,t){var n=c.Z.getNonces(),u=n.viewNonce,a=n.regenerateNonce,f=t?a:u;return r.Z.post({url:i.ANM.MFA_CODES_VERIFICATION,body:{key:e,nonce:f,regenerate:t},oldFormErrors:!0}).then((function(t){return o.Z.dispatch({type:"MFA_VIEW_BACKUP_CODES",codes:t.body.backup_codes,key:e})}),(function(e){throw e}))},clearBackupCodes:function(){o.Z.dispatch({type:"MFA_CLEAR_BACKUP_CODES"})}}},751388:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(785893),o=n(667294),c=n(165695),u=n(945460),i=n(130671),a=n(2590),f=n(473708);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,o,c,u){try{var i=e[c](u),a=i.value}catch(e){n(e);return}i.done?t(a):Promise.resolve(a).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function u(e){l(c,r,o,u,i,"next",e)}
function i(e){l(c,r,o,u,i,"throw",e)}u(void 0)}))}}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return!0}catch(e){return!1}}function b(e,t,n){b=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));n&&O(o,n.prototype);return o};return b.apply(null,arguments)}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){d(e,t,n[t])}))}return e}function _(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function w(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++){n=c[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++){n=c[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function E(e,t){
return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){c.push(r.value);if(t&&c.length===t)break}}catch(e){i=!0;o=e}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t="function"==typeof Map?new Map:void 0;m=function(e){if(null===e||!(n=e,-1!==Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,h(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return O(r,e)};return m(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}var M=function(e,t){var n,r,o,c,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;(r=0,o)&&(c=[2&c[0],o.value]);switch(c[0]){case 0:case 1:o=c;break;case 4:u.label++;return{value:c[1],done:!1};case 5:u.label++;r=c[1];c=[0];continue;case 7:c=u.ops.pop();u.trys.pop();continue;default:if(!(o=u.trys,o=o.length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){u=0;continue}
if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1];o=c;break}if(o&&u.label<o[2]){u.label=o[2];u.ops.push(c);break}o[2]&&u.ops.pop();u.trys.pop();continue}c=t.call(e,u)}catch(e){c=[6,e];r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=g(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);return t.call(this,null!=e?e:"Canceled")}return n}(m(Error));function P(e){var t=e.onError,n=e.onSuccess,u=e.PasswordConfirm,s=w(e,["onError","onSuccess","PasswordConfirm"]),l=S(o.useState(""),2),p=l[0],y=l[1];return(0,r.jsx)(u,_(v({},s),{handleSubmit:function(e){return i.Z.enableMFAStart(e)},
onError:function(e){if(function(e){return"object"==typeof e&&null!=e&&(0,c.nr)(e,"code")&&"number"==typeof e.code?e.code:0}(e)===a.evJ.MFA_INVALID_SECRET){n(p);s.onClose()}else t(e)},onPasswordChange:y,title:f.Z.Messages.TWO_FA_ENABLE,actionText:f.Z.Messages.CONTINUE}))}function F(){return new Promise((function(e,t){(0,u.openModalLazy)(p((function(){var o,c;return M(this,(function(u){switch(u.label){case 0:return[4,Promise.all([n.e(40532),n.e(75651)]).then(n.bind(n,975651))];case 1:o=u.sent(),c=o.default;return[2,function(n){return(0,r.jsx)(P,_(v({},n),{onSuccess:e,onError:t,PasswordConfirm:c}))}]}}))})),{onCloseCallback:function(){t(new C)}})}))}function j(e){return new Promise((function(t,o){(0,u.openModalLazy)(p((function(){var o,c;return M(this,(function(u){switch(u.label){case 0:return[4,Promise.all([n.e(40532),n.e(1653),n.e(73356)]).then(n.bind(n,173356))];case 1:o=u.sent(),c=o.default;return[2,function(n){return(0,r.jsx)(c,_(v({},n),{password:e,handleEnableMFASuccess:t}))}]}}))
})),{onCloseCallback:function(){o(new C)}})}))}function k(){return new Promise((function(e){(0,u.openModalLazy)(p((function(){var e,t;return M(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(11177),n.e(86651)]).then(n.bind(n,286651))];case 1:e=o.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,v({},e))}]}}))})),{onCloseCallback:e,onCloseRequest:a.VqG})}))}function T(){return(T=p((function(){return M(this,(function(e){switch(e.label){case 0:return[4,F()];case 1:return[4,j(e.sent())];case 2:e.sent();return[4,k()];case 3:e.sent();return[2]}}))}))).apply(this,arguments)}const N={enableMFA:function(){return T.apply(this,arguments)}}},694444:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(496486),o=n.n(r),c=n(541554),u=n(202351),i=n(744564);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0)
;Object.defineProperty(e,r.key,r)}}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}var d=!1,h=[],v="",_={
viewNonce:"",regenerateNonce:""};var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=b(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getVerificationKey=function(){return v};r.getBackupCodes=function(){return h};r.getNonces=function(){return _};r.__getLocalVars=function(){return{togglingSMS:d,backupCodes:h,verificationKey:v,backupCodesNonces:_}};!function(e,t,n){t&&f(e.prototype,t);n&&f(e,n)}(n,[{key:"togglingSMS",get:function(){return d}}]);return n}(u.ZP.Store);w.displayName="MFAStore";const E=new w(i.Z,{MFA_ENABLE_SUCCESS:function(e){var t=e.token,n=e.codes;c.Z.setToken(t);h=n},MFA_DISABLE_SUCCESS:function(e){var t=e.token;c.Z.setToken(t)},MFA_SMS_TOGGLE:function(){d=!0},MFA_SMS_TOGGLE_COMPLETE:function(){d=!1},MFA_CLEAR_BACKUP_CODES:function(){h=[]},
MFA_VIEW_BACKUP_CODES:function(e){var t=e.codes,n=e.key;h=o().sortBy(t,"code");v=n},MFA_SEND_VERIFICATION_KEY:function(e){var t=e.nonces;_=t}})}}]);
//# sourceMappingURL=fb6e2e68a84999a85468.js.map