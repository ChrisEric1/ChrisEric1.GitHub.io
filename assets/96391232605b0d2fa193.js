(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[35751],{475772:(e,n,r)=>{e.exports=r.p+"e61bfff1a364621603633d99d2f29f9d.svg"},473958:(e,n,r)=>{e.exports=r.p+"e9b7e8263689da11886b9b9c9fc9aef1.svg"},34837:(e,n,r)=>{e.exports=r.p+"f3b288c47e9e1de44dd734bb7611c1e4.svg"},293714:(e,n,r)=>{e.exports=r.p+"01f1ebdffe8444d968a146d41d5dc2fc.svg"},140914:(e,n,r)=>{e.exports=r.p+"94aef594b95ade8d06e7352d12f46305.svg"},11371:(e,n,r)=>{e.exports=r.p+"0451500560abfa448183f0e8449e16f0.svg"},452004:(e,n,r)=>{e.exports=r.p+"ad0f83d2caba179082a0b279f60736d0.svg"},79388:(e,n,r)=>{e.exports=r.p+"30e68910bd70527f2074a0df0779206f.svg"},381511:(e,n,r)=>{e.exports=r.p+"4478068f751e2049708b077226c4c2dc.svg"},561418:(e,n,r)=>{e.exports=r.p+"223cd9663ce71bcb429e286b4eaed049.svg"},190555:(e,n,r)=>{e.exports=r.p+"074e77dd9b5f48195fd402d5a04cb3ce.svg"},902954:(e,n,r)=>{"use strict";r.d(n,{Z:()=>s});var t=r(202351),i=r(711531),a=r(536392);function s(){var e=(0,t.e7)([a.Z],(function(){
return a.Z.getPremiumTypeSubscription()}));return(0,t.e7)([i.Z],(function(){var n;return null!=(null==e?void 0:e.paymentSourceId)?null===(n=i.Z.getPaymentSource(e.paymentSourceId))||void 0===n?void 0:n.country:null}))}},668900:(e,n,r)=>{"use strict";r.d(n,{Z:()=>M,U:()=>N});var t=r(785893),i=(r(667294),r(294184)),a=r.n(i),s=r(441143),o=r.n(s),l=r(265367),u=r(348592),c=r(260561);const d=(0,c.B)({kind:"user",id:"2022-12_localized_pricing_poland_notice",label:"Localized Pricing Poland Notice",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable Poland Notice",config:{enabled:!0}}]}),I=(0,c.B)({kind:"user",id:"2023-05_localized_pricing_turkey_notice",label:"Localized Pricing Turkey Notice",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable Turkey Notice",config:{enabled:!0}}]});var _=r(902954),m=r(2590),p=r(473708),f=r(407156),E=r.n(f);function N(){var e=(0,_.Z)(),n=d.useExperiment({},{autoTrackExposure:!1}).enabled,r=I.useExperiment({},{autoTrackExposure:!1}).enabled
;return null!=e&&("PL"===e?n:"TR"===e&&r)}function T(e,n){return"PL"===e?n?p.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_BOOST_WARNING:p.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_WARNING:"TR"===e?n?p.Z.Messages.LOCALIZED_PRICING_TRY_LEGACY_PRICING_BOOST_WARNING:p.Z.Messages.LOCALIZED_PRICING_TRY_LEGACY_PRICING_WARNING:n?p.Z.Messages.LOCALIZED_PRICING_LEGACY_PRICING_BOOST_WARNING:p.Z.Messages.LOCALIZED_PRICING_LEGACY_PRICING_WARNING}const M=function(e){var n=e.fromBoostCancelModal,r=e.className,i=(0,_.Z)();if(!N())return null;o()(null!=i,"Subscription billing country should not be null");return(0,t.jsxs)("div",{className:a()(E().noticeRoot,r),children:[(0,t.jsx)("div",{className:E().iconContainer,children:(0,t.jsx)(l.Z,{className:E().infoIcon})}),(0,t.jsx)("div",{className:E().text,children:T(i,n).format({helpCenterLink:u.Z.getArticleURL(m.BhN.LOCALIZED_PRICING)})})]})}},16703:(e,n,r)=>{"use strict";r.d(n,{PO:()=>I,q9:()=>_,R$:()=>m,i$:()=>p,KU:()=>f,Ji:()=>E,HE:()=>N})
;var t=r(785893),i=(r(667294),r(294184)),a=r.n(i),s=r(73904),o=r(249052),l=r(473708),u=r(884092),c=r.n(u);function d(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function I(e){var n=e.children,r=e.className;return(0,t.jsx)("div",{className:a()(c().table,r),children:n})}function _(e){var n=e.children;return(0,t.jsx)("div",{className:c().header,children:n})}function m(e){var n=e.label,r=e.value,i=e.className;return(0,t.jsxs)("div",{className:a()(c().row,i),children:[(0,t.jsx)("div",{className:c().rowLabel,children:n}),(0,t.jsx)("div",{className:c().rowAmount,children:r})]})}function p(e){var n=e.label,r=e.value,i=e.discounts,a=e.originalAmount,u=e.interval,d=e.currency,I=e.className,_=e.intervalCount,p=function(e){return null!=i?i.find((function(n){return n.type===e})):null},f=p(s.eW.SUBSCRIPTION_PLAN),E=p(s.eW.ENTITLEMENT),N=null!=f?Math.floor(f.amount/a*100):null,T=(0,o.T4)(a,d);return(0,t.jsxs)(t.Fragment,{children:[(0,
t.jsx)(m,{label:n,value:(0,t.jsxs)(t.Fragment,{children:[r,null!=N?(0,t.jsxs)("div",{className:c().rowPercentDiscount,children:["-",N,"%"]}):null]}),className:I}),null!=N?(0,t.jsxs)("div",{className:c().rowDiscountOriginalPrice,children:["(",null!=u&&null!=_?(0,o.og)(T,u,_):T,")"]}):null,null!=E?(0,t.jsx)("div",{className:c().entitlementDiscountRow,children:l.Z.Messages.BILLING_INVOICE_SUBSCRIPTION_CREDIT_APPLIED}):null]})}function f(e){var n,r=e.extended,i=void 0!==r&&r,s=e.negativeMarginTop,o=void 0!==s&&s;return(0,t.jsx)("div",{className:a()(c().divider,(n={},d(n,c().dividerExtended,i),d(n,c().negativeMarginTop,o),n))})}function E(e){var n=e.label,r=e.value,i=e.className;return(0,t.jsxs)("div",{className:a()(c().totalRow,i),children:[(0,t.jsx)("div",{className:c().totalLabel,children:n}),(0,t.jsx)("div",{className:c().totalAmount,children:r})]})}function N(e){var n=e.children,r=e.className;return(0,t.jsx)("div",{className:a()(c().finePrint,r),children:n})}},35751:(e,n,r)=>{
"use strict";r.r(n);r.d(n,{Steps:()=>k,default:()=>q});var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),o=r(441143),l=r.n(o),u=r(202351),c=r(575945),d=r(945460),I=r(673679),_=r(74535),m=r(153686),p=r(19585),f=r(387099),E=r(551778),N=r(107364),T=r(652591),M=r(348592),v=r(850841),C=r(249052),P=r(100749),L=r(16703),R=r(396546),O=r(509897),b=r(646875),A=r(301162),y=r(111090),g=r(203600),S=r(2590),h=r(473708),x=r(688067),U=r.n(x);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function Z(e,n,r,t,i,a,s){try{var o=e[a](s),l=o.value}catch(e){r(e);return}o.done?n(l):Promise.resolve(l).then(t,i)}function w(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var a=e.apply(n,r);function s(e){Z(a,t,i,s,o,"next",e)}function o(e){Z(a,t,i,s,o,"throw",e)}s(void 0)}))}}function D(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function B(e){
for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){D(e,n,r[n])}))}return e}function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){o=!0;i=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return j(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k,Y,W=function(e,n){var r,t,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;(t=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:s.label++;return{value:a[1],done:!1};case 5:s.label++;t=a[1];a=[0];continue;case 7:a=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,
i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1];i=a;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(a);break}i[2]&&s.ops.pop();s.trys.pop();continue}a=n.call(e,s)}catch(e){a=[6,e];t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};!function(e){e[e.WHAT_YOU_LOSE=1]="WHAT_YOU_LOSE";e[e.CONFIRM=2]="CONFIRM";e[e.PREVIEW=3]="PREVIEW"}(k||(k={}));function H(e){return F.apply(this,arguments)}function F(){return(F=w((function(e){var n,r,t,i,a,s,o,l,u,c;return W(this,(function(d){switch(d.label){case 0:n=e.premiumSubscription,r=e.onClose,t=e.setHasError,i=e.setIsCancelling,a=e.analyticsLocations,s=e.analyticsLocation;d.label=1;case 1:d.trys.push([1,6,,7]);i(!0);t(!1);return n.status!==S.O0b.PAST_DUE?[3,3]:[4,(0,I.EO)(n.id,a,s)];case 2:d.sent();return[3,5];case 3:
u=null!==(l=null===(o=n.renewalMutations)||void 0===o?void 0:o.items)&&void 0!==l?l:n.items;return[4,(0,I.Mg)(n,{items:(0,v.Ue)(u)},a,s)];case 4:d.sent();d.label=5;case 5:r();null!=(c=v.ZP.getPremiumType(n.planId))&&$({premiumType:c});return[3,7];case 6:d.sent();t(!0);i(!1);return[3,7];case 7:return[2]}}))}))).apply(this,arguments)}function V(e){var n,r=e.premiumSubscription,a=e.premiumType,s=e.setStep,o=e.onClose,l=e.whatYouLoseExperienceEnabled,u=e.analyticsLocation,I=(0,f.Q)(),m=G(i.useState(!1),2),E=m[0],T=m[1],C=G(i.useState(!1),2),P=C[0],L=C[1],R=(0,_.ZP)(),O=(0,p.Z)().analyticsLocations,b=null;b=r.status===S.O0b.PAST_DUE?h.Z.Messages.PREMIUM_CANCEL_PAST_DUE_CONFIRM_BODY:a===g.p9.TIER_0?I?h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_0_PAYMENT_BLOCKED_RUSSIA.format({date:r.currentPeriodEnd,helpdeskArticle:M.Z.getArticleURL(S.BhN.BLOCKED_PAYMENTS)}):h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_0.format({date:r.currentPeriodEnd
}):a===g.p9.TIER_1?I?h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_1_PAYMENT_BLOCKED_RUSSIA.format({date:r.currentPeriodEnd,helpdeskArticle:M.Z.getArticleURL(S.BhN.BLOCKED_PAYMENTS)}):h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_1.format({date:r.currentPeriodEnd}):I?h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_2_PAYMENT_BLOCKED_RUSSIA.format({date:r.currentPeriodEnd,helpdeskArticle:M.Z.getArticleURL(S.BhN.BLOCKED_PAYMENTS)}):h.Z.Messages.PREMIUM_CANCEL_CONFIRM_BODY_TIER_2.format({date:r.currentPeriodEnd});var y=r.items.some((function(e){var n=e.planId;return!g.dJ.has(n)})),x=y&&null==r.renewalMutations||null!=(null===(n=r.renewalMutations)||void 0===n?void 0:n.items.find((function(e){var n=e.planId;return!g.dJ.has(n)}))),j=x?(0,t.jsx)(d.Button,{onClick:function(){return s(k.PREVIEW)},children:h.Z.Messages.NEXT}):(0,t.jsx)(d.Button,{color:d.Button.Colors.RED,disabled:E,onClick:w((function(){return W(this,(function(e){switch(e.label){case 0:return[4,H({setHasError:L,onClose:o,
premiumSubscription:r,setIsCancelling:T,analyticsLocations:O,analyticsLocation:u})];case 1:e.sent();return[2]}}))})),children:l?h.Z.Messages.CONFIRM:h.Z.Messages.PREMIUM_CANCEL_CONFIRM_NEW.format({planPremiumType:v.ZP.getDisplayPremiumType(r.planId)})}),Z=(0,t.jsx)(d.Button,{look:d.Button.Looks.LINK,color:(0,c.ap)(R)?d.Button.Colors.PRIMARY:d.Button.Colors.WHITE,onClick:o,children:l?h.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_BACK:h.Z.Messages.CANCEL});return(0,t.jsxs)(t.Fragment,{children:[l?(0,t.jsx)(A.Z,{premiumType:a,className:U().cancellationHeader,onClose:o}):(0,t.jsxs)(d.ModalHeader,{separator:!1,children:[(0,t.jsx)(d.FormTitle,{tag:d.FormTitleTags.H4,children:h.Z.Messages.PREMIUM_CANCEL_CONFIRM_TITLE.format({planPremiumType:v.ZP.getDisplayPremiumType(r.planId)})}),(0,t.jsx)(d.ModalCloseButton,{onClick:o})]}),(0,t.jsxs)(d.ModalContent,{className:U().body,children:[P?(0,t.jsx)(d.FormErrorBlock,{className:U().errorBlock,children:h.Z.Messages.BILLING_ERROR_GENERIC}):null,(0,
t.jsx)("div",{className:U().cancelImage}),(0,t.jsx)("div",{children:b})]}),(0,t.jsxs)(d.ModalFooter,{justify:N.Z.Justify.START,children:[j,Z]})]})}function K(e){var n,r,i=e.premiumSubscription,a=G((0,P.ED)({subscriptionId:i.id,items:(0,v.Ue)(null!==(r=null===(n=i.renewalMutations)||void 0===n?void 0:n.items)&&void 0!==r?r:i.items),renewal:!0}),1)[0],s=(0,u.e7)([E.Z],(function(){return E.Z.get(i.planId)}));if(null==a||null==s)return(0,t.jsx)(d.Spinner,{className:U().loading});var o=v.ZP.getIntervalForInvoice(a),l=o.intervalType,c=o.intervalCount;return(0,t.jsxs)("div",{className:U().bodyText,children:[(0,t.jsx)("div",{className:U().renewalInvoiceDate,children:0!==a.total?h.Z.Messages.BILLING_SWITCH_PLAN_CHANGE_DATE_WITH_CHARGE.format({renewalDate:a.subscriptionPeriodStart,rate:(0,C.og)((0,C.T4)(a.total,a.currency),l,c)}):h.Z.Messages.BILLING_SWITCH_PLAN_CHANGE_DATE.format({renewalDate:a.subscriptionPeriodStart})}),(0,t.jsxs)(L.PO,{children:[(0,t.jsx)(L.q9,{
children:h.Z.Messages.PREMIUM_SUBSCRIPTION_UPDATES}),(0,t.jsx)(L.R$,{label:h.Z.Messages.PREMIUM_SUBSCRIPTION_CANCELLED.format({planName:v.ZP.getDisplayName(s.id)}),value:(0,v.PK)(s),className:U().invoiceCancelRow}),(0,t.jsx)(L.KU,{}),(0,t.jsx)(b.nd,{premiumSubscription:i,renewalInvoice:a,isUpdate:!0})]})]})}function X(e){var n=e.premiumSubscription,r=e.premiumType,a=e.onBack,o=e.onClose,l=e.analyticsLocation,u=G(i.useState(!1),2),c=u[0],I=u[1],_=G(i.useState(!1),2),m=_[0],f=_[1],E=(0,p.Z)().analyticsLocations;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{premiumType:r,onClose:o}),(0,t.jsxs)(d.ModalContent,{className:s()(U().previewStep,U().body),children:[m?(0,t.jsx)(d.FormErrorBlock,{className:U().errorBlock,children:h.Z.Messages.BILLING_ERROR_GENERIC}):null,(0,t.jsx)(K,{premiumSubscription:n})]}),(0,t.jsxs)(d.ModalFooter,{align:N.Z.Align.CENTER,justify:N.Z.Justify.BETWEEN,children:[(0,t.jsx)(d.Button,{color:d.Button.Colors.RED,disabled:c,onClick:w((function(){
return W(this,(function(e){switch(e.label){case 0:return[4,H({setHasError:f,onClose:o,premiumSubscription:n,setIsCancelling:I,analyticsLocations:E,analyticsLocation:l})];case 1:e.sent();return[2]}}))})),children:h.Z.Messages.PREMIUM_CANCEL_CONFIRM_NEW.format({planPremiumType:v.ZP.getDisplayPremiumType(n.planId)})}),(0,t.jsx)(O.Z,{onClick:a})]})]})}function z(e){var n;return{subscription_id:e.id,subscription_type:e.type,subscription_plan_id:null===(n=(0,v.Af)(e))||void 0===n?void 0:n.id,subscription_plan_gateway_plan_id:e.paymentGatewayPlanId}}var J=(D(Y={},k.WHAT_YOU_LOSE,"What You're Losing"),D(Y,k.CONFIRM,"Confirm Cancellation"),D(Y,k.PREVIEW,"Preview Updated Subscription"),Y);function q(e){var n,r=e.premiumSubscription,a=e.transitionState,s=e.onClose,o=e.analyticsLocations,u=e.analyticsLocation,I=null===(n=(0,v.Af)(r))||void 0===n?void 0:n.planId,f=null!=I?v.ZP.getPremiumType(I):null;l()(null!=f,"Should not be cancelling Nitro without premiumType");var E=(0,_.ZP)()
;i.useEffect((function(){T.default.track(S.rMx.CANCELLATION_FLOW_STARTED,z(r))}),[r]);var N=f===g.p9.TIER_0||f===g.p9.TIER_1||f===g.p9.TIER_2,M=N?k.WHAT_YOU_LOSE:k.CONFIRM,C=(0,p.Z)(o,m.Z.PREMIUM_SUBSCRIPTION_CANCELLATION_MODAL).AnalyticsLocationProvider,P=G(function(e,n,r){var t=G(i.useState(e),2),a=t[0],s=t[1],o=G(i.useState(Date.now()),2),l=o[0],u=o[1],c=G(i.useState(Date.now()),1)[0],d=i.useCallback((function(e){T.default.track(S.rMx.CANCELLATION_FLOW_STEP,B({from_step:J[a],to_step:J[e],step_duration_ms:Date.now()-l,flow_duration_ms:Date.now()-c,location_stack:r},z(n)));s(e);u(Date.now())}),[r,c,l,a,n]);return[a,d,l,c]}(M,r,o),4),L=P[0],O=P[1],b=P[2],A=P[3];(0,y.w)(r,s,!1);var x,j=function(e){s();T.default.track(S.rMx.CANCELLATION_FLOW_STEP,B({from_step:J[e],to_step:null,step_duration_ms:Date.now()-b,flow_duration_ms:Date.now()-A,location_stack:o},z(r)))};switch(L){case k.WHAT_YOU_LOSE:x=(0,t.jsx)(R.Z,{premiumType:f,titleText:h.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_TITLE,
subtitleText:h.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_SUBTITLE.format(),footer:(0,t.jsxs)("div",{className:U().whatYouLoseButtonContainer,children:[(0,t.jsx)(d.Button,{onClick:function(){return O(k.CONFIRM)},children:h.Z.Messages.CONTINUE}),(0,t.jsx)(d.Button,{look:d.Button.Looks.LINK,color:(0,c.wj)(E)?d.Button.Colors.WHITE:d.Button.Colors.PRIMARY,onClick:function(){return j(L)},children:h.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_BACK})]}),onClose:function(){return j(L)}});break;case k.CONFIRM:x=(0,t.jsx)(V,{premiumSubscription:r,premiumType:f,setStep:O,onClose:function(){return j(L)},whatYouLoseExperienceEnabled:N,analyticsLocation:u});break;case k.PREVIEW:x=(0,t.jsx)(X,{premiumSubscription:r,premiumType:f,onBack:function(){return O(k.CONFIRM)},onClose:function(){return j(L)},analyticsLocation:u});break;default:throw new Error("Unexpected step: ".concat(L))}return(0,t.jsx)(C,{children:(0,t.jsx)(d.ModalRoot,{transitionState:a,children:x})})}function $(e){
T.default.track(S.rMx.OPEN_MODAL,{type:"Nitro Churn Survey"});return(0,d.openModalLazy)(w((function(){var n,i;return W(this,(function(a){switch(a.label){case 0:return[4,Promise.all([r.e(40532),r.e(92145)]).then(r.bind(r,892145))];case 1:n=a.sent(),i=n.default;return[2,function(n){return(0,t.jsx)(i,B({},n,e))}]}}))})))}},396546:(e,n,r)=>{"use strict";r.d(n,{Z:()=>Ze})
;var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),o=r(441143),l=r.n(o),u=r(496486),c=r.n(u),d=r(611345),I=r(202351),_=r(575945),m=r(945460),p=r(744564),f=r(653224),E=r(734691),N=r(74535),T=r(316878),M=r(795470),v=r(589503),C=r(420881),P=r(166232),L=r(600277),R=r(736626),O=r(679741),b=r(76834),A=r(485552),y=r(567403),g=r(473903),S=r(775506),h=r(124251),x=r(535083),U=r(217674),j=r(95891),Z=r(98265),w=r(652591),D=r(775173),B=r(348592),G=r(310126),k=r(902954),Y=r(668900),W=r(301162),H=r(203600),F=r(2590),V=r(960412),K=r(473708),X=r(986703),z=r.n(X),J=r(475772),q=r.n(J),$=r(473958),Q=r.n($),ee=r(34837),ne=r.n(ee),re=r(293714),te=r.n(re),ie=r(140914),ae=r.n(ie),se=r(11371),oe=r.n(se),le=r(452004),ue=r.n(le),ce=r(79388),de=r.n(ce),Ie=r(381511),_e=r.n(Ie),me=r(561418),pe=r.n(me),fe=r(190555),Ee=r.n(fe);function Ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function Te(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,
configurable:!0,writable:!0}):e[n]=r;return e}function Me(){Me=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};return Me.apply(this,arguments)}function ve(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function Ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){a.push(t.value)
;if(n&&a.length===n)break}}catch(e){o=!0;i=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Ne(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pe=G.default.getEnableHardwareAcceleration()?m.AnimatedAvatar:m.Avatar,Le={boostItemVisual:ae(),emojiStickersVisual:oe(),screenShareItemVisual:pe(),uploadsMessagesItemVisual:ue(),uploadsMessagesItemVisualV2:de(),PL:_e(),TR:Ee()},Re={boostItemVisual:q(),emojiStickersVisual:Q(),screenShareItemVisual:pe(),uploadsMessagesItemVisual:ne(),uploadsMessagesItemVisualV2:te(),PL:_e(),TR:Ee()}
;function Oe(){var e=(0,N.ZP)();return(0,_.wj)(e)?Re:Le}function be(e){var n=e.description,r=e.onLearnMore,i=e.renderVisual;return(0,t.jsxs)("div",{className:z().whatYouLoseItem,children:[(0,t.jsxs)("div",{className:z().whatYouLoseItemLeftColumn,children:[(0,t.jsx)(m.Text,{variant:"text-md/normal",children:n}),(0,t.jsx)(m.Button,{look:m.Button.Looks.LINK,color:m.Button.Colors.LINK,size:m.Button.Sizes.NONE,className:z().whatYouLoseItemLearnMore,onClick:r,children:K.Z.Messages.LEARN_MORE})]}),(0,t.jsx)("div",{className:z().whatYouLoseItemRightColumn,children:i()})]})}function Ae(e){var n=Me({},e),r=(0,N.ZP)(),a=i.useContext(A.f).profileTheme,s=(0,M.O0)(F.tPk.INTERACTIVE_ACTIVE,null!=a?a:r);return(0,t.jsx)(j.Z,ve(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))))
;t.forEach((function(n){Te(e,n,r[n])}))}return e}({},n),{color:s.hex}))}function ye(e){var n=e.currentUser,r=e.premiumType,i=e.onClose,a=(0,O.Z)(n.id),s=(0,I.e7)([T.Z],(function(){return T.Z.useReducedMotion})),o=r===H.p9.TIER_1,l=(0,d.EQ)(null==a?void 0:a.premiumType).with(H.p9.TIER_2,(function(){return(0,t.jsxs)(A.Z,{forceShowPremium:!0,user:n,profileType:V.y0.CANCEL_MODAL,className:z().profileCard,children:[(0,t.jsx)("div",{className:z().profileBanner,children:(0,t.jsx)(b.Z,{displayProfile:a,user:n,allowEdit:!1,profileType:V.y0.CANCEL_MODAL})}),(0,t.jsx)(Pe,{className:z().profileAvatar,src:n.getAvatarURL(void 0,(0,m.getAvatarSize)(m.AvatarSizes.SIZE_56),!s),size:m.AvatarSizes.SIZE_56,"aria-label":n.username}),(0,t.jsx)(A.Z.Inner,{className:z().profileInner,children:(0,t.jsxs)("div",{className:z().profileUserInfo,children:[(0,t.jsx)(x.Z,{className:z().profileNameTag,usernameClass:z().profileNameTagUsername,name:n.toString()}),(0,t.jsx)(Ae,{className:z().profilePremiumIcon})]})})]})
})).otherwise((function(){return(0,t.jsxs)("div",{className:z().profileCardTier1,children:[(0,t.jsx)(Pe,{className:z().profileAvatarTier1,src:n.getAvatarURL(void 0,(0,m.getAvatarSize)(m.AvatarSizes.SIZE_56),!s),size:m.AvatarSizes.SIZE_56,"aria-label":n.username}),(0,t.jsxs)("div",{className:z().profileUserInfoTier1,children:[(0,t.jsx)(x.Z,{className:z().profileNameTag,usernameClass:z().profileNameTagUsername,name:n.toString()}),(0,t.jsx)(j.Z,{className:z().profilePremiumIcon})]})]})}));return(0,t.jsx)(be,{description:o?K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_PROFILE_TIER_1.format():K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_PROFILE.format(),onLearnMore:function(){i();E.Z.open(F.oAB.PROFILE_CUSTOMIZATION);w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"user_profile_customization"})},renderVisual:function(){return l}},"profile-item")}function ge(e){var n=e.premiumType,r=(0,I.e7)([T.Z],(function(){return T.Z.useReducedMotion})),i=(0,v.wC)(null).filter((function(e){
return e.type===C.B.GUILD&&(e.animated||null!=e.guildId)})).slice(0,3),a=(0,I.Wu)([P.Z],(function(){return P.Z.stickerFrecencyWithoutFetchingLatest.frequently.slice(0,3-i.length)})),s=Oe().emojiStickersVisual,o=n===H.p9.TIER_1;return(0,t.jsx)(be,{description:o?K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_EMOJI_STICKERS_TIER_1.format():K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_EMOJI_STICKERS.format(),onLearnMore:function(){window.open(B.Z.getArticleURL(F.BhN.PREMIUM_DETAILS));w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"emojis_stickers"})},renderVisual:function(){return null!=i&&i.length>0||!o&&null!=a&&a.length>0?(0,t.jsxs)("div",{className:z().emojiStickersPersonalizedContainer,children:[i.map((function(e){return null==e.id?e.url:D.ZP.getEmojiURL({id:e.id,animated:!r&&e.animated,size:58})})).map((function(e){return null!=e?(0,t.jsx)("img",{className:z().personalizedEmoji,alt:"",src:e}):null})),o?null:a.map((function(e){return(0,t.jsx)(L.ZP,{disableAnimation:r,
sticker:e,size:58,withLoadingIndicator:!1},e.id)}))]}):(0,t.jsx)("img",{className:z().nonPersonalizedGraphic,alt:"",src:s})}},"emoji-stickers-item")}function Se(e){var n=e.premiumType,r=e.onClose;i.useEffect((function(){return p.Z.wait((function(){return(0,f.X8)()}))}),[]);var a=(0,I.e7)([T.Z],(function(){return T.Z.useReducedMotion})),o=Ce((0,I.Wu)([S.Z,y.Z],(function(){var e=S.Z.boostSlots,n=new Map;c()(e).map("premiumGuildSubscription").map("guildId").forEach((function(e){if(null!=y.Z.getGuild(e)){var r,t=null!==(r=n.get(e))&&void 0!==r?r:0;n.set(e,t+1)}}));var r=null,t=0;if(n.size>0){var i;r=(i=Ce(Array.from(n.entries()).reduce((function(e,n){return n[1]>e[1]?n:e})),2))[0],t=i[1]}return[y.Z.getGuild(r),t]})),2),l=o[0],u=o[1],d=null!=l&&u>0,_=Oe().boostItemVisual;return(0,t.jsx)(be,{description:n===H.p9.TIER_1?K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_BOOSTS_TIER_1.format():K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_BOOSTS.format(),onLearnMore:function(){r()
;E.Z.open(F.oAB.GUILD_BOOSTING);w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"boosts"})},renderVisual:function(){return d?(0,t.jsx)("div",{className:z().boostCardContainer,children:(0,t.jsxs)("div",{className:z().boostCard,children:[(0,t.jsx)(h.Z,{guild:l,size:h.Z.Sizes.MEDIUM,animate:!a,className:z().boostCardIcon}),(0,t.jsxs)("div",{className:z().boostCardInfo,children:[(0,t.jsx)(m.Text,{variant:"text-md/normal",className:s()(z().textSingleLineEllipsis,z().boostCardTitle),children:l.name}),(0,t.jsxs)("div",{className:z().boostCardSubtitle,children:[(0,t.jsx)(U.Z,{className:z().boostCardGem}),(0,t.jsx)(m.Text,{variant:"text-xs/normal",className:s()(z().textSingleLineEllipsis,z().boostCardCount),children:K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_BOOSTS_APPLIED.format({boostCount:u})})]})]})]})}):(0,t.jsx)("img",{alt:"",src:_})}},"boost-item")}var he=function(){var e=Oe().screenShareItemVisual;return(0,t.jsx)(be,{
description:K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_SCREENSHARE.format(),onLearnMore:function(){window.open(B.Z.getArticleURL(F.BhN.STREAM_QUALITY_SETTINGS));w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"screen_share"})},renderVisual:function(){return(0,t.jsx)("img",{alt:"",src:e})}},"screen-share-item")};function xe(e){var n=e.premiumType,r=Oe().uploadsMessagesItemVisual;return(0,t.jsx)(be,{description:n===H.p9.TIER_2?K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_UPLOADS_MESSAGES.format():K.Z.Messages.PREMIUM_CANCEL_WHAT_YOU_LOSE_UPLOADS_MESSAGES_TIER_1.format(),onLearnMore:function(){window.open(B.Z.getArticleURL(F.BhN.PREMIUM_DETAILS));w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"msgs_uploads"})},renderVisual:function(){return(0,t.jsx)("img",{alt:"",src:r})}},"uploads-item")}var Ue=function(e){var n=e.country,r=Oe(),i="PL"===n?r.PL:r.TR;return(0,t.jsx)(be,{
description:("PL"===n?K.Z.Messages.LOCALIZED_PRICING_PLN_LEGACY_PRICING_WARNING_NO_HELP_CENTER_LINK:K.Z.Messages.LOCALIZED_PRICING_TRY_LEGACY_PRICING_WARNING_NO_HELP_CENTER_LINK).format(),onLearnMore:function(){window.open(B.Z.getArticleURL(F.BhN.LOCALIZED_PRICING));w.default.track(F.rMx.PREMIUM_UNCANCEL_WINBACK_CTA_CLICKED,{action:"grandfathered_prices"})},renderVisual:function(){return(0,t.jsx)("img",{alt:"",src:i})}},"grandfathered-prices-item")};function je(e){var n=e.currentUser,r=e.premiumType,a=e.onClose,s=e.isDowngrade,o=void 0!==s&&s,u=(0,k.Z)(),c=(0,Y.U)(),d=i.useMemo((function(){var e=[];if(c){l()(null!=u,"Subscription billing country should not be null");e.push((0,t.jsx)(Ue,{country:u}))}switch(r){case H.p9.TIER_0:e.push((0,t.jsx)(ge,{premiumType:r}),(0,t.jsx)(xe,{premiumType:r}));break;case H.p9.TIER_1:o?e.push((0,t.jsx)(ye,{currentUser:n,premiumType:r,onClose:a}),(0,t.jsx)(he,{}),(0,t.jsx)(Se,{premiumType:r,onClose:a})):e.push((0,t.jsx)(ye,{currentUser:n,premiumType:r,
onClose:a}),(0,t.jsx)(ge,{premiumType:r}),(0,t.jsx)(he,{}),(0,t.jsx)(xe,{premiumType:r}),(0,t.jsx)(Se,{premiumType:r,onClose:a}));break;case H.p9.TIER_2:o?e.push((0,t.jsx)(ye,{currentUser:n,premiumType:r,onClose:a}),(0,t.jsx)(Se,{premiumType:r,onClose:a}),(0,t.jsx)(he,{})):e.push((0,t.jsx)(ye,{currentUser:n,premiumType:r,onClose:a}),(0,t.jsx)(ge,{premiumType:r}),(0,t.jsx)(Se,{premiumType:r,onClose:a}),(0,t.jsx)(he,{}),(0,t.jsx)(xe,{premiumType:r}))}return e}),[r,n,a,o,c,u]);return(0,t.jsx)("div",{className:z().whatYouLoseItemContainer,children:d})}const Ze=function(e){var n=e.premiumType,r=e.titleText,a=e.subtitleText,s=e.footer,o=e.stickyFooter,u=e.onClose,c=e.isDowngrade,d=void 0!==c&&c,_=(0,I.e7)([g.default],(function(){var e=g.default.getCurrentUser();l()(null!=e,"ProfileItem: currentUser cannot be undefined");return e}));i.useEffect((function(){(0,R.Z)(_.id,_.getAvatarURL(null,80))}),[_]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.Z,{premiumType:n,onClose:u}),(0,
t.jsxs)(m.ModalContent,{className:z().body,children:[(0,t.jsx)(Z.Z,{size:Z.Z.Sizes.SIZE_24,className:z().title,children:r}),(0,t.jsx)(m.Text,{variant:"text-md/normal",className:z().subtitle,children:a}),(0,t.jsx)(je,{currentUser:_,premiumType:n,onClose:u,isDowngrade:d}),!o&&s]}),o&&(0,t.jsx)(m.ModalFooter,{children:s})]})}},524450:(e,n,r)=>{"use strict";r.d(n,{Z:()=>o});var t=r(785893),i=(r(667294),r(249052)),a=r(16703),s=r(473708);function o(e){var n=e.invoice;return n.taxInclusive||n.tax<=0?null:(0,t.jsx)(a.R$,{label:s.Z.Messages.ESTIMATED_TAX_LABEL,value:(0,i.T4)(n.tax,n.currency)})}},509897:(e,n,r)=>{"use strict";r.d(n,{Z:()=>l});var t=r(785893),i=(r(667294),r(945460)),a=r(473708),s=r(362601),o=r.n(s);const l=function(e){var n=e.onClick;return(0,t.jsx)(i.Anchor,{onClick:n,className:o().link,children:a.Z.Messages.BACK})}},646875:(e,n,r)=>{"use strict";r.d(n,{As:()=>j,By:()=>Z,Lu:()=>w,hG:()=>G,nd:()=>W,e9:()=>H,yT:()=>F})
;var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),o=r(441143),l=r.n(o),u=r(202351),c=r(945460),d=r(73904),I=r(551778),_=r(718831),m=r(771966),p=r(348592),f=r(850841),E=r(249052),N=r(100749),T=r(71103),M=r(717035),v=r(16703),C=r(524450),P=r(203600),L=r(2590),R=r(473708),O=r(154342),b=r.n(O);function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function y(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function g(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){y(e,n,r[n])}))}return e}function S(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){
var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){o=!0;i=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return A(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e,n){var r;return!!(null===(r=e.discounts)||void 0===r?void 0:r.some((function(e){return e.type===n})))};function U(e){var n,r=e.invoiceItem,i=e.overrideAmount,a=e.showGuildSubscriptionAdjustmentTooltip,s=e.currency,o=e.className,_=e.isPrepaidPaymentSource,p=e.referralTrialOfferId,N=(0,u.e7)([I.Z],(function(){return I.Z.get(r.subscriptionPlanId)})),T=null===(n=(0,M.N)(p))||void 0===n?void 0:n.subscription_trial;l()(null!=N,"Missing subscriptionPlan");var C=(0,f.if)({intervalType:null==T?void 0:T.interval,intervalCount:null==T?void 0:T.interval_count}),L=function(e,n,r,t){var i=x(e,d.eW.PREMIUM_TRIAL);switch(e.subscriptionPlanId){case P.Xh.PREMIUM_MONTH_LEGACY:case P.Xh.PREMIUM_YEAR_LEGACY:
case P.Xh.PREMIUM_MONTH_TIER_0:case P.Xh.PREMIUM_YEAR_TIER_0:case P.Xh.PREMIUM_MONTH_TIER_1:case P.Xh.PREMIUM_YEAR_TIER_1:case P.Xh.PREMIUM_MONTH_TIER_2:case P.Xh.PREMIUM_YEAR_TIER_2:case P.Xh.PREMIUM_3_MONTH_TIER_2:case P.Xh.PREMIUM_6_MONTH_TIER_2:return(0,f.Gf)(e.subscriptionPlanId,i,r,t);case P.Xh.PREMIUM_3_MONTH_GUILD:case P.Xh.PREMIUM_6_MONTH_GUILD:return R.Z.Messages.PREMIUM_GUILD_NUM_MULTI_MONTHS_GUILD_SUBSCRIPTIONS.format({num:e.quantity,intervalCount:n.intervalCount});case P.Xh.PREMIUM_MONTH_GUILD:return R.Z.Messages.PREMIUM_GUILD_NUM_MONTH_GUILD_SUBSCRIPTIONS.format({num:e.quantity});case P.Xh.PREMIUM_YEAR_GUILD:return R.Z.Messages.PREMIUM_GUILD_NUM_YEAR_GUILD_SUBSCRIPTIONS.format({num:e.quantity})}switch(n.interval){case P.rV.MONTH:return 1===n.intervalCount?R.Z.Messages.MONTHLY_GUILD_SUBSCRIPTION.format({planName:n.name}):R.Z.Messages.MULTI_MONTHS_GUILD_SUBSCRIPTION.format({planName:n.name,intervalCount:n.intervalCount});case P.rV.YEAR:
return R.Z.Messages.YEARLY_GUILD_SUBSCRIPTION.format({planName:n.name})}throw new Error("Unexpected invoice plan: ".concat(e.subscriptionPlanId))}(r,N,_,C);!0===a&&(L=(0,t.jsxs)("div",{className:b().invoiceItemLabelWithIcon,children:[(0,t.jsxs)("div",{children:[L," "]}),(0,t.jsx)(c.Tooltip,{text:R.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TOOLTIP.format(),"aria-label":R.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TEXT,tooltipClassName:b().invoiceItemTooltip,children:function(e){return(0,t.jsx)(m.Z,S(g({},e),{className:b().invoiceItemLabelIcon}))}})]}));var O=(0,E.T4)(null!=i?i:r.amount,s),A=_?O:(0,E.og)(O,N.interval,N.intervalCount);return(0,t.jsx)(v.i$,{label:L,value:A,originalAmount:r.subscriptionPlanPrice*r.quantity,discounts:r.discounts,interval:N.interval,intervalCount:N.intervalCount,currency:s,className:o})}function j(e){var n=e.label,r=e.tooltipText,i=e.tooltipAriaLabel;return(0,t.jsxs)("div",{className:b().invoiceItemLabelWithIcon,
children:[n,(0,t.jsx)(c.Tooltip,{clickableOnMobile:!0,text:r,"aria-label":i,tooltipClassName:b().invoiceItemTooltip,children:function(e){return(0,t.jsx)(m.Z,S(g({},e),{className:b().invoiceItemLabelIcon}))}})]})}function Z(e){var n=e.invoice,r=e.isPrepaidPaymentSource,i=(0,T.j)(n.invoiceItems),a=i.find((function(e){return!(0,f.eh)(e.subscriptionPlanId)&&e.amount>=0})),s=i.find((function(e){return(0,f.eh)(e.subscriptionPlanId)&&e.amount>=0})),o=(0,u.e7)([I.Z],(function(){return null!=s?I.Z.get(s.subscriptionPlanId):null})),l=null!=s?s.amount:0,c=(0,E.T4)(l,n.currency),d=null!=o?(0,E.og)(c,o.interval,o.intervalCount):0;return(0,t.jsxs)(t.Fragment,{children:[null!=a?(0,t.jsx)(U,{invoiceItem:a,currency:n.currency,isPrepaidPaymentSource:r}):null,0!==l&&null!=s&&null!=o?(0,t.jsx)(v.R$,{label:R.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_INVOICE_ROW_CONTENT.format({numGuildSubscriptions:s.quantity,planName:(0,f.Gf)(o.id,!1,r)}),value:r?c:d}):null,(0,t.jsx)(C.Z,{invoice:n}),(0,
t.jsx)(v.KU,{}),(0,t.jsx)(v.Ji,{label:(n.taxInclusive?r?R.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:R.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:R.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:n.currency===L.pKx.USD?(0,E.T4)(n.total,n.currency):"".concat((0,E.T4)(n.total,n.currency),"*")})]})}function w(e){var n=e.invoice,r=e.newPlan,i=e.isPrepaidPaymentSource,a=e.referralTrialOfferId,s=(0,T.j)(n.invoiceItems),o=s.find((function(e){return e.subscriptionPlanId===r.id}));l()(null!=o,"Expected newPlanInvoiceItem");var u=s.find((function(e){return!(0,f.eh)(e.subscriptionPlanId)&&e.amount<0})),c=s.find((function(e){return null==e.subscriptionPlanId&&null!=e.discounts&&e.discounts.find((function(e){return e.type===d.eW.PREMIUM_LEGACY_UPGRADE_PROMOTION}))})),I=x(o,d.eW.PREMIUM_TRIAL),_=o.quantity*o.subscriptionPlanPrice,m=o.amount+(null!=u?u.amount:0)-_+(null!=c?c.amount:0),p=s.filter((function(e){
return e.subscriptionPlanId===P.Xh.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_YEAR_GUILD})).reduce((function(e,n){return e+n.amount}),0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{invoiceItem:o,currency:n.currency,overrideAmount:_,isPrepaidPaymentSource:i,referralTrialOfferId:a}),0===m||I?null:(0,t.jsx)(v.R$,{label:(0,t.jsx)(j,{label:R.Z.Messages.PREMIUM_SUBSCRIPTION_PLAN_ADJUSTMENT.format({planName:(0,f.PV)(r.id)?(0,f.aq)(r.id):r.name}),tooltipText:R.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,E.T4)(m,n.currency)}),0!==p?(0,t.jsx)(v.R$,{label:(0,t.jsx)(j,{label:R.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT,tooltipText:R.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TOOLTIP.format(),tooltipAriaLabel:R.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TEXT}),value:(0,E.T4)(p,n.currency)}):null,(0,t.jsx)(C.Z,{invoice:n}),(0,t.jsx)(v.KU,{}),(0,t.jsx)(v.Ji,{
label:(n.taxInclusive?i?R.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:R.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:R.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:n.currency===L.pKx.USD?(0,E.T4)(n.total,n.currency):"".concat((0,E.T4)(n.total,n.currency),"*")})]})}function D(e){var n=e.slice();n.sort((function(e,n){var r=(0,f.uZ)(e.subscriptionPlanId),t=(0,f.uZ)(n.subscriptionPlanId);return r&&!t?-1:!r&&t?1:0}));return n}function B(e){return e.filter((function(e){var n=e.subscriptionPlanId;return n!==P.Xh.NONE_MONTH&&n!==P.Xh.NONE_YEAR}))}function G(e){var n=e.proratedInvoice,r=e.renewalInvoice,i=(0,f.dn)(n),a=i.intervalType,s=i.intervalCount,o=(0,f.dn)(r),l=o.intervalType,u=o.intervalCount;return a!==l||s!==u||n.subscriptionPeriodEnd.getTime()===r.subscriptionPeriodStart.getTime()?null:(0,t.jsx)("div",{className:b().subscriptionPeriodResetNotice,children:R.Z.Messages.PREMIUM_SUBSCRIPTION_PERIOD_RESET_NOTICE.format({renewalDate:n.subscriptionPeriodEnd})})}
function k(e){var n=e.isUpdate,r=e.currentInvoice,i=e.newInvoice,a=null!=r?(0,T.j)(r.invoiceItems):null,o=null!=r?(0,f.dn)(r):null,l=(0,f.dn)(i),u=l.intervalType,c=l.intervalCount,d=null!=o&&(o.intervalType!==u||o.intervalCount!==c);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.KU,{extended:!0}),null!=r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.q9,{children:R.Z.Messages.PREMIUM_SUBSCRIPTION_CURRENT_LABEL}),B(D((0,T.j)(r.invoiceItems))).map((function(e){return(0,t.jsx)(U,{invoiceItem:e,currency:r.currency},e.id)})),(0,t.jsx)(v.KU,{extended:!0})]}):null,(0,t.jsx)(v.q9,{children:R.Z.Messages.PREMIUM_SUBSCRIPTION_NEW_LABEL}),B(D((0,T.j)(i.invoiceItems))).map((function(e){var r=null!=a&&!a.some((function(n){return n.subscriptionPlanId===e.subscriptionPlanId&&n.quantity===e.quantity}));return(0,t.jsx)(U,{invoiceItem:e,currency:i.currency,
showGuildSubscriptionAdjustmentTooltip:d&&(e.subscriptionPlanId===P.Xh.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_YEAR_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_3_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_6_MONTH_GUILD),className:s()(y({},b().subscriptionAddedInvoiceItem,!n||r))},e.id)})),(0,t.jsx)(C.Z,{invoice:i}),(0,t.jsx)(v.KU,{}),(0,t.jsx)(v.R$,{label:R.Z.Messages.PREMIUM_SUBSCRIPTION_NEW_TOTAL,value:(0,E.og)((0,E.T4)(i.total,i.currency),u,c),className:b().subscriptionCostRow})]})}function Y(e){var n,r=e.proratedInvoice,i=e.renewalInvoice,a=e.isTrial,s=e.isUpdate,o=e.overrideRenewalDate,l=e.trialFooterMessageOverride,u=null===(n=(0,M.N)())||void 0===n?void 0:n.subscription_trial,c=(0,f.dn)(i),d=c.intervalType,I=c.intervalCount;if(a){var _=(0,f.if)({intervalType:null==u?void 0:u.interval,intervalCount:null==u?void 0:u.interval_count}),m=(null==u?void 0:u.interval)===P.rV.DAY&&(null==u?void 0:u.interval_count)<28?2:7;return(0,t.jsx)(t.Fragment,{
children:null!=l?l:R.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER_TRIAL_DURATION.format({duration:_,days:m,contactLink:L.EYA.CONTACT,helpdeskArticle:p.Z.getArticleURL(L.BhN.PREMIUM_TRIAL)})})}var N=i.taxInclusive?R.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER:R.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER_TAX_EXCLUSIVE;return(0,t.jsx)(t.Fragment,{children:N.format({rate:(0,E.og)((0,E.T4)(i.subtotal,i.currency),d,I),renewalDate:null!=o?o:s?null!=r?r.subscriptionPeriodEnd:i.subscriptionPeriodStart:i.subscriptionPeriodEnd,contactLink:L.EYA.CONTACT,helpdeskArticle:p.Z.getArticleURL(L.BhN.BILLING)})})}function W(e){var n=e.premiumSubscription,r=e.proratedInvoice,a=e.renewalInvoice,s=e.overrideRenewalDate,o=e.isUpdate,l=void 0!==o&&o,u=e.isTrial,d=void 0!==u&&u,I=e.priceOptions,m=void 0===I?void 0:I,p=e.isPrepaidPaymentSource,f=void 0!==p&&p,E=e.trialFooterMessageOverride,T=e.hideSubscriptionDetails,M=void 0!==T&&T,C=g({subscriptionId:null==n?void 0:n.id,renewal:!0,preventFetch:!l
},m),P=h((0,N.ED)(C),1)[0],L=h(i.useState(!1),2),O=L[0],A=L[1];return(0,t.jsxs)(t.Fragment,{children:[f?null:(0,t.jsx)(v.HE,{children:(0,t.jsx)(Y,{proratedInvoice:r,renewalInvoice:a,isTrial:d,isUpdate:l,overrideRenewalDate:s,trialFooterMessageOverride:E})}),!M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Clickable,{onClick:function(){return A((function(e){return!e}))},className:b().subscriptionDetailsToggle,children:[O?R.Z.Messages.PREMIUM_SUBSCRIPTION_HIDE_DETAILS:R.Z.Messages.PREMIUM_SUBSCRIPTION_SHOW_DETAILS,(0,t.jsx)(_.Z,{direction:O?_.Z.Directions.UP:_.Z.Directions.DOWN,className:b().subscriptionDetailsToggleCaret})]}),O?(0,t.jsx)(k,{isUpdate:l,currentInvoice:P,newInvoice:a}):null]})]})}function H(e){var n=e.plan,r=e.className,i=e.paymentSourceId,a=e.isPrepaidPaymentSource,s=void 0!==a&&a,o=(0,f.aS)(n.id,!1,!0,{paymentSourceId:i});return(0,t.jsx)(v.PO,{className:r,children:(0,t.jsx)(v.R$,{label:R.Z.Messages.BILLING_INVOICE_GIFT_PLAN.format({planName:(0,f.Gf)(n.id,!1,s)}),
value:(0,E.T4)(o.amount,o.currency),className:b().subscriptionCostRow})})}function F(e){var n=e.invoice,r=e.plan,i=(0,T.j)(n.invoiceItems).find((function(e){return e.subscriptionPlanId===r.id}));l()(null!=i,"newPlanInvoiceItem can not be null");if(r.interval===P.rV.MONTH)return(0,t.jsx)(c.Text,{variant:"text-md/normal",children:R.Z.Messages.BILLING_TRIAL_MONTHLY_PRICE_AFTER_TRIAL.format({price:(0,E.T4)(i.subscriptionPlanPrice,n.currency)})});if(r.interval===P.rV.YEAR)return(0,t.jsx)(c.Text,{variant:"text-md/normal",children:R.Z.Messages.BILLING_TRIAL_YEARLY_PRICE_AFTER_TRIAL.format({price:(0,E.T4)(i.subscriptionPlanPrice,n.currency)})});l()(!1,"Invalid interval type")}},111090:(e,n,r)=>{"use strict";r.d(n,{w:()=>d,H:()=>_});var t=r(667294),i=r(202351),a=r(105783),s=r(551778),o=r(151367),l=r(850841),u=r(520453),c=r(473708);function d(e,n,r){t.useEffect((function(){if(null!=e&&e.isPurchasedExternally&&null!=e.paymentGateway&&!r){a.Z.show({
title:c.Z.Messages.BILLING_EXTERNAL_HEADER.format({paymentGatewayName:u.Vz[e.paymentGateway]}),body:c.Z.Messages.BILLING_EXTERNAL_MANAGE_ELSEWHERE.format({paymentGatewayName:u.Vz[e.paymentGateway],subscriptionManagementLink:(0,l.JE)(e.paymentGateway,"SUBSCRIPTION_MANAGEMENT")}),confirmText:c.Z.Messages.OKAY});n()}}),[e])}var I=[];function _(e,n){var r=(0,i.e7)([s.Z],(function(){return s.Z.get(e)})),a=(0,i.e7)([o.Z],(function(){var e;return null!=r&&null!==(e=o.Z.getForSku(r.skuId))&&void 0!==e?e:I})),u=t.useMemo((function(){return Array.from(a).filter((function(e){var n=e.parentId,r=e.consumed;return null!=n&&!r}))}),[a]);return{hasEntitlements:!n&&null!=r&&null!=u&&u.length>=l.ZP.getIntervalMonths(r.interval,r.intervalCount),entitlements:u}}}}]);
//# sourceMappingURL=96391232605b0d2fa193.js.map