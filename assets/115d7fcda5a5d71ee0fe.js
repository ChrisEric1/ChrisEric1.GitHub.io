"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[18652],{859980:(e,t,n)=>{n.d(t,{Z_:()=>u,hY:()=>c,sd:()=>l});var r=n(281110),i=n(744564),o=n(491260),a=n(2590);function u(e,t){i.Z.dispatch({type:"ACTIVITY_SYNC",activity:e,userId:t})}function c(e,t){l(e,t).then((function(n){return i.Z.dispatch({type:"ACTIVITY_PLAY",activity:e,userId:t,metadata:n})})).catch((function(){return i.Z.dispatch({type:"ACTIVITY_PLAY",activity:e,userId:t})}))}function l(e,t){var n=e.metadata;if(null!=n)return Promise.resolve(n);var u=o.Z.getActivityMetadata(t);return null!=u?Promise.resolve(u):null==e.session_id?Promise.reject(new Error("null/undefined session_id")):r.Z.get({url:a.ANM.USER_ACTIVITY_METADATA(t,e.session_id,e.application_id),oldFormErrors:!0}).then((function(e){var n=e.body;i.Z.dispatch({type:"ACTIVITY_METADATA_UPDATE",metadata:n,userId:t});return n}))}},213276:(e,t,n)=>{n.d(t,{Z:()=>I})
;var r=n(785893),i=n(667294),o=n(468811),a=n.n(o),u=n(652591),c=n(295652),l=n(2590);function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=E(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e))._loadId=null;r._loadDate=r.props.root?Date.now():null;r.getLocation=(0,c.oH)((function(e,t,n,r){var i={};null!=e&&(i.page=e);null!=t&&(i.section=t);null!=n&&(i.object=n);null!=r&&(i.objectType=r);return i}));r.mergeLocation=(0,c.oH)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}({},e,t)}));r.getContext=(0,c.oH)((function(e,t,n){return{location:e,loadDate:t,loadId:n}}));null!=e.loadId?r._loadId=e.loadId:e.root&&(r._loadId=a().v4());return r}var i=n.prototype;i.renderProvider=function(e){var t,n,i=this.props,o=i.section,a=i.page,c=i.object,l=i.objectType,s=i.children,f=this.mergeLocation(e.location,this.getLocation(a,o,c,l)),d=this.getContext(f,null!==(t=this._loadDate)&&void 0!==t?t:e.loadDate,null!==(n=this._loadId)&&void 0!==n?n:e.loadId);return(0,r.jsx)(u.AnalyticsContext.Provider,{value:d,children:s})};i.render=function(){var e=this,t=this.props.context;return null!=t?this.renderProvider(t):(0,r.jsx)(u.AnalyticsContext.Consumer,{children:function(t){return e.renderProvider(t)}})};return n}(i.Component);I.Pages=l.ZY5;I.Sections=l.jXE
;I.Objects=l.qAy;I.ObjectTypes=l.Qqv;I.defaultProps={root:!1}},579581:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(667294),i=n(652591),o=function(){return r.useContext(i.AnalyticsContext)}},469141:(e,t,n)=>{n.d(t,{C:()=>d});var r=n(785893),i=(n(667294),n(945460)),o=n(63509),a=n(2590);function u(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,c,"next",e)}function c(e){u(o,r,i,a,c,"throw",e)}a(void 0)}))}}function l(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var f=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function d(e){var t=e.application,u=e.onAgree,d=e.onDisagree,p=o.Z.getWindowOpen(a.KJ3.CHANNEL_CALL_POPOUT)?i.POPOUT_MODAL_CONTEXT:i.DEFAULT_MODAL_CONTEXT;(0,i.openModalLazy)(c((function(){var e;return f(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(2461)]).then(n.bind(n,502461))];case 1:e=i.sent().ActivityAgeGateModal;return[2,function(n){return(0,r.jsx)(e,s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){l(e,t,n[t])}))}return e}({},n),{
application:t,onAgree:u,onDisagree:d}))}]}}))})),{modalKey:"activity-age-gate",contextKey:p});return Promise.resolve()}},771514:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(105783),i=n(473708);function o(e,t,n,o){var a,u;r.Z.show({title:i.Z.Messages.EMBEDDED_ACTIVITY_CHANGE_CONFIRM_TITLE,cancelText:i.Z.Messages.CANCEL,confirmText:i.Z.Messages.CONFIRM,onConfirm:n,onCancel:o,body:i.Z.Messages.EMBEDDED_ACTIVITY_CHANGE_CONFIRM_BODY.format({currentApplicationName:null!==(a=null==e?void 0:e.name)&&void 0!==a?a:i.Z.Messages.EMBEDDED_ACTIVITY_CURRENT_APPLICATION_DEFAULT,targetApplicationName:null!==(u=null==t?void 0:t.name)&&void 0!==u?u:i.Z.Messages.EMBEDDED_ACTIVITY_TARGET_APPLICATION_DEFAULT})})}},255627:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(959207),i=n(144153),o=n(515209);function a(e){var t,n=e.applicationId,a=e.activityConfigs,u=e.bundleItems,c=e.applications;if((0,i.qH)()){var l,s=null!==(l=null==c?void 0:c.find((function(e){return e.id===n})))&&void 0!==l?l:r.Z.getGame(n),f=a.find((function(e){
return e.application_id===n}));return null==f||null==s?null:{activity:f,application:s}}var d=null!==(t=null==c?void 0:c.find((function(e){return e.id===n})))&&void 0!==t?t:r.Z.getGame(n),p=u.find((function(e){return e.application_id===n}));return null==p||null==d?null:{activity:(0,o.s7)(p,d),application:d}}},61040:(e,t,n)=>{n.d(t,{Z:()=>T});var r=n(875700),i=n(451936),o=n(61209),a=n(959207),u=n(715107),c=n(473903),l=n(582762),s=n(469141),f=n(771514),d=n(624889),p=n(375342),_=n(765524),E=n(2590);function I(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,u,"next",e)}function u(e){I(o,r,i,a,u,"throw",e)}a(void 0)}))}}var v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function y(e,t,n,r,i){return A.apply(this,arguments)}function A(){
return(A=h((function(e,t,n,r,i){var a,u,s;return v(this,(function(f){switch(f.label){case 0:a=o.Z.getChannel(t);u=null==a?void 0:a.getGuildId();s=c.default.getCurrentUser();return null==a||null==t||null==u&&!a.isPrivate()||null==s?[2,!1]:[4,(0,d.Z)({channelId:a.id,bypassChangeModal:i})];case 1:if(!f.sent())return[2,!1];(0,_.Z)(u,t);(0,l.J$)(t,{application_id:e.application_id},r);(0,p.Z)({type:E.q5t.JOIN,userId:s.id,applicationId:e.application_id,locationObject:n,analyticsLocations:r});return[2,!0]}}))}))).apply(this,arguments)}function T(e){var t=e.activity,n=e.currentEmbeddedApplication,l=e.activityChannelId,d=e.locationObject,p=e.embeddedActivitiesManager,E=e.analyticsLocations,I=o.Z.getChannel(l),A=null==I?void 0:I.getGuildId(),T=null==A||""===A,O=c.default.getCurrentUser();if(null==I||T&&!I.isPrivate()||null==l)return Promise.resolve(!1);if(u.Z.getVoiceChannelId()===l&&(null==n?void 0:n.id)===t.application_id){(0,_.Z)(A,l);return Promise.resolve(!0)}var b,C=(b=h((function(){
var e,n,o,u,c,f,p=arguments;return v(this,(function(_){switch(_.label){case 0:e=(p.length>0&&void 0!==p[0]?p[0]:{bypassChangeVcModal:!1}).bypassChangeVcModal;if(null!=(null==O?void 0:O.nsfwAllowed))return[3,4];if(null===(o=a.Z.getGame(t.application_id))||void 0===o)return[3,1];c=o;return[3,3];case 1:f=i.Z.createFromServer;return[4,r.Z.fetchApplication(t.application_id)];case 2:c=f.apply(i.Z,[_.sent()]);_.label=3;case 3:if(!0===(null===(n=(u=c).embeddedActivityConfig)||void 0===n?void 0:n.requires_age_gate))return[2,new Promise((function(n){(0,s.C)({application:u,onAgree:function(){n(y(t,l,d,E,e))},onDisagree:function(){return n(!1)}})}))];_.label=4;case 4:return[2,y(t,l,d,E,e)]}}))})),function(){return b.apply(this,arguments)});return null!=n?new Promise((function(e){(0,f.Z)(n,t,(function(){p.leaveActivity({channelId:l,applicationId:n.id});C({bypassChangeVcModal:!0})}),(function(){return e(!0)}))})):C()}},718482:(e,t,n)=>{n.d(t,{Z:()=>M})
;var r=n(565909),i=n(61209),o=n(567403),a=n(682776),u=n(473903),c=n(930948),l=n(850841),s=n(582762),f=n(469141),d=n(771514),p=n(945460),_=n(63509),E=n(691648),I=n(88067),h=n(2590);function v(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,u,"next",e)}function u(e){v(o,r,i,a,u,"throw",e)}a(void 0)}))}}var A=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){
case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function T(e){return O.apply(this,arguments)}function O(){return(O=y((function(e){var t,n,r,o,a,u,c,l,s,f;return A(this,(function(d){switch(d.label){case 0:t=e.analyticsLocations,n=e.channelId,r=e.guildId,o=e.locationObject,a=e.initialSlide,u=void 0===a?I.ag.DIRECTORY:a,c=e.initialSelectedApplicationId,l=void 0===c?void 0:c;if((0,p.hasModalOpen)(I.AC))return[2];s=i.Z.getChannel(n);f=_.Z.getWindowOpen(h.KJ3.CHANNEL_CALL_POPOUT)
;return[4,(0,E.Z)({analyticsLocations:t,channel:s,guildId:r,openInPopout:f,initialSlide:u,initialSelectedApplicationId:l,locationObject:null!=o?o:{}})];case 1:d.sent();return[2]}}))}))).apply(this,arguments)}var b=n(59732),C=n(599055),N=n(624889),S=n(375342),m=n(765524),g=n(436771),L=n(203600);function P(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){P(o,r,i,a,u,"next",e)}function u(e){P(o,r,i,a,u,"throw",e)}a(void 0)}))}}var D=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,
r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function M(e){return w.apply(this,arguments)}function w(){w=R((function(e){var t,n,s,p,_,E,v,y,A,O,N,S,m;return D(this,(function(P){switch(P.label){case 0:t=e.activityItem,n=e.currentActivity,s=e.locationObject,p=e.channelId,_=e.guildId,E=e.embeddedActivitiesManager,v=e.analyticsLocations
;y=o.Z.getGuild(_);A=u.default.getCurrentUser();if(null==y&&!(0,g.I)(p)||null==A||null==t)return[2,!1];O=t.application,N=t.activity;return null==O?[2,!1]:null==N||(0,C.Z)(N)||(0,l.M5)(A,L.p9.TIER_2)?[3,2]:[4,T({analyticsLocations:v,channelId:p,guildId:_,locationObject:s,initialSlide:I.ag.UPSELL,initialSelectedApplicationId:O.id})];case 1:P.sent();c.S.dispatch(h.CkL.SHOW_ACTIVITIES_UPSELL,{activityItem:t});return[2,!1];case 2:if(null==p){c.S.dispatch(h.CkL.SHOW_ACTIVITIES_CHANNEL_SELECTOR,{applicationId:O.id});return[2,!1]}if((S=null!=p?(0,b.e4)({channelId:p,ChannelStore:i.Z,GuildStore:o.Z,PermissionStore:a.Z}):b.jy.NO_CHANNEL)!==b.jy.CAN_LAUNCH){S===b.jy.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION&&(0,r.w)();return[2,!1]}m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bypassChangeVcModal:!1}).bypassChangeVcModal,t=N.requires_age_gate&&null==A.nsfwAllowed;return t?new Promise((function(t){(0,f.C)({application:O,onAgree:function(){return t(U({channelId:p,
guildId:null==y?void 0:y.id,locationObject:s,application:O,analyticsLocations:v,bypassChangeVcModal:e}))},onDisagree:function(){return t(!1)}})})):U({channelId:p,guildId:null==y?void 0:y.id,locationObject:s,application:O,analyticsLocations:v,bypassChangeVcModal:e})};return null!=n?[2,new Promise((function(e){(0,d.Z)(n,O,(function(){E.leaveActivity({channelId:p,applicationId:n.id});e(m({bypassChangeVcModal:!0}))}),(function(){return e(!1)}))}))]:[2,m()]}}))}));return w.apply(this,arguments)}function U(e){return Z.apply(this,arguments)}function Z(){return(Z=R((function(e){var t,n,r,o,a,c,l,f;return D(this,(function(d){switch(d.label){case 0:t=e.channelId,n=e.guildId,r=e.locationObject,o=e.application,a=e.analyticsLocations,c=e.bypassChangeVcModal;l=u.default.getCurrentUser();f=i.Z.getChannel(t);return null==l||null==f?[2,!1]:[4,(0,N.Z)({channelId:t,bypassChangeModal:c})];case 1:if(!d.sent())return[2,!1];s.J$(t,{application_id:o.id,name:o.name},a);(0,m.Z)(n,t);(0,S.Z)({type:h.q5t.LAUNCH,
userId:l.id,applicationId:o.id,locationObject:r,analyticsLocations:a});return[2,!0]}}))}))).apply(this,arguments)}},120819:(e,t,n)=>{n.d(t,{z:()=>o,a:()=>a});var r=n(289283);function i(){return!r.tq&&!r.Em}function o(){return i()}function a(){return i()}},774189:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(120415),i=n(120819),o=n(322422),a=n(545580),u=n(2590);function c(e){var t=e.user,n=e.activity,c=e.application,l=e.channelId,s=e.currentUser,f=e.isEmbedded,d=e.ChannelStore,p=e.GuildStore,_=e.GuildMemberCountStore,E=e.RelationshipStore,I=e.SelectedChannelStore,h=e.VoiceStateStore,v=e.PermissionStore,y=(0,i.a)();if(null==t)return!1;if(f)return(0,o.ZP)({userId:t.id,activity:n,channelId:l,currentUser:s,application:c,isActivitiesEnabledForCurrentPlatform:y,ChannelStore:d,VoiceStateStore:h,PermissionStore:v,GuildStore:p})===o.Fw.CAN_JOIN;if(!(0,r.nI)())return!1;if((0,a.Z)(n,u.xjy.PARTY_PRIVACY_FRIENDS)&&E.isFriend(t.id))return!0;if((0,a.Z)(n,u.xjy.PARTY_PRIVACY_VOICE_CHANNEL)){
var A=d.getChannel(I.getVoiceChannelId());if(null==A||!h.isInChannel(A.id,t.id))return!1;switch(A.type){case u.d4z.DM:case u.d4z.GROUP_DM:return!0}var T=p.getGuild(A.getGuildId());if(null==T||T.hasFeature(u.oNc.COMMUNITY))return!1;var O=_.getMemberCount(T.id);return null!=O&&O<100}return!1}},322422:(e,t,n)=>{n.d(t,{Fw:()=>r,ZP:()=>_,s5:()=>E});var r,i=n(202351),o=n(61209),a=n(567403),u=n(682776),c=n(473903),l=n(407561),s=n(176758),f=n(120819),d=n(235819),p=n(2590);!function(e){e[e.CAN_JOIN=0]="CAN_JOIN";e[e.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION=1]="NO_USE_EMBEDDED_ACTIVITIES_PERMISSION";e[e.NO_CHANNEL_CONNECT_PERMISSION=2]="NO_CHANNEL_CONNECT_PERMISSION";e[e.CHANNEL_FULL=3]="CHANNEL_FULL";e[e.NO_CHANNEL=4]="NO_CHANNEL";e[e.ACTIVITIES_FEATURE_NOT_ENABLED_FOR_OS=5]="ACTIVITIES_FEATURE_NOT_ENABLED_FOR_OS";e[e.ACTIVITY_NOT_SUPPORTED_ON_OS=6]="ACTIVITY_NOT_SUPPORTED_ON_OS";e[e.ACTIVITY_AGE_GATED=7]="ACTIVITY_AGE_GATED";e[e.NO_USER=8]="NO_USER";e[e.IS_AFK_CHANNEL=9]="IS_AFK_CHANNEL"
;e[e.NO_GUILD=10]="NO_GUILD"}(r||(r={}));function _(e){var t,n,i,o=e.userId,a=e.activity,u=e.application,c=e.channelId,l=e.currentUser,f=e.isActivitiesEnabledForCurrentPlatform,_=e.ChannelStore,E=e.VoiceStateStore,I=e.PermissionStore,h=e.GuildStore;if(null==o)return r.NO_USER;if(!1===(null==l?void 0:l.nsfwAllowed)&&!0===(null==u||null===(t=u.embeddedActivityConfig)||void 0===t?void 0:t.requires_age_gate))return r.ACTIVITY_AGE_GATED;if(!f)return r.ACTIVITIES_FEATURE_NOT_ENABLED_FOR_OS;if(!(0,d.Z)(null==u||null===(n=u.embeddedActivityConfig)||void 0===n?void 0:n.supported_platforms))return r.ACTIVITY_NOT_SUPPORTED_ON_OS;var v=null!=c?c:null===(i=E.getVoiceStateForSession(o,null==a?void 0:a.session_id))||void 0===i?void 0:i.channelId;if(null==v)return r.NO_CHANNEL;var y=_.getChannel(c);if(null==y)return r.NO_CHANNEL;var A=y.getGuildId();if(!y.isPrivate()){if(null==A)return r.NO_GUILD;var T=h.getGuild(A);if((null==T?void 0:T.afkChannelId)===y.id)return r.IS_AFK_CHANNEL
;var O=E.getCurrentClientVoiceChannelId(y.getGuildId())===v,b=(0,s.rY)(y,E,h),C=I.can(p.Plq.CONNECT,y);if(!I.can(p.Plq.USE_EMBEDDED_ACTIVITIES,y))return r.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION;if(!O){if(b)return r.CHANNEL_FULL;if(!C)return r.NO_CHANNEL_CONNECT_PERMISSION}}return r.CAN_JOIN}function E(e){var t=e.userId,n=e.activity,r=e.channelId,s=e.application,d=(0,f.z)(),p=(0,i.e7)([c.default],(function(){return c.default.getCurrentUser()}));return(0,i.e7)([o.Z,l.Z,u.Z,a.Z],(function(){return _({userId:t,activity:n,application:s,channelId:r,currentUser:p,isActivitiesEnabledForCurrentPlatform:d,ChannelStore:o.Z,VoiceStateStore:l.Z,PermissionStore:u.Z,GuildStore:a.Z})}),[n,s,r,p,d,t])}},59732:(e,t,n)=>{n.d(t,{jy:()=>r,e4:()=>f,KF:()=>d,g5:()=>p});var r,i=n(202351),o=n(61209),a=n(567403),u=n(682776),c=n(436771),l=n(2590),s=n(473708);!function(e){e[e.CAN_LAUNCH=0]="CAN_LAUNCH";e[e.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION=1]="NO_USE_EMBEDDED_ACTIVITIES_PERMISSION"
;e[e.NO_CHANNEL_CONNECT_PERMISSION=2]="NO_CHANNEL_CONNECT_PERMISSION";e[e.NO_CHANNEL=3]="NO_CHANNEL";e[e.NO_GUILD=4]="NO_GUILD";e[e.IS_AFK_CHANNEL=5]="IS_AFK_CHANNEL"}(r||(r={}));function f(e){var t=e.channelId,n=e.ChannelStore,i=e.GuildStore,o=e.PermissionStore,a=n.getChannel(t);if(null==a)return r.NO_CHANNEL;if(!(0,c.I)(a.id)){var u=a.getGuildId();if(null==u)return r.NO_GUILD;var s=i.getGuild(u);if((null==s?void 0:s.afkChannelId)===a.id)return r.IS_AFK_CHANNEL;if(!o.can(l.Plq.CONNECT,a))return r.NO_CHANNEL_CONNECT_PERMISSION;if(!o.can(l.Plq.USE_EMBEDDED_ACTIVITIES,a))return r.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION}return r.CAN_LAUNCH}function d(e){return(0,i.e7)([o.Z,a.Z,u.Z],(function(){return f({channelId:e,ChannelStore:o.Z,GuildStore:a.Z,PermissionStore:u.Z})}),[e])}function p(e){switch(e){case r.CAN_LAUNCH:return s.Z.Messages.EMBEDDED_ACTIVITIES_START_AN_ACTIVITY;case r.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION:return s.Z.Messages.EMBEDDED_ACTIVITIES_INVALID_PERMISSIONS;default:
return s.Z.Messages.EMBEDDED_ACTIVITIES_INVALID_CHANNEL}}},101604:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(88067);function i(e){if(null!=e&&null!=e.url&&r.Fr.test(e.url))return e.url}},545580:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2590);function i(e,t){return t!==r.xjy.INSTANCE&&(null!=e&&null!=e.flags&&Boolean(e.flags&t))}},599055:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(312242);function i(e){return null==e.premium_tier_requirement||(0,r.Z)(e)}},235819:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(73904),i=n(120415);function o(e){var t,n;t=(0,i.gn)()?r.C3.IOS:(0,i.Dt)()?r.C3.ANDROID:r.C3.WEB;return null!==(n=null==e?void 0:e.includes(t))&&void 0!==n&&n}},71854:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(545580),i=n(2590);function o(e){return(0,r.Z)(e,i.xjy.EMBEDDED)}},624889:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(747820),i=n(14096),o=n(414306),a=n(61209),u=n(682776),c=n(715107),l=n(407561);function s(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function f(e){
return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return!0}catch(e){return!1}}function _(e,t,n){_=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));n&&h(i,n.prototype);return i};return _.apply(null,arguments)}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return E(e)}function I(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t="function"==typeof Map?new Map:void 0;y=function(e){if(null===e||!(n=e,-1!==Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _(e,arguments,E(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return h(r,e)};return y(e)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}var T=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=A(n);function n(){d(this,n);return t.apply(this,arguments)}return n}(y(Error));function b(e){return C.apply(this,arguments)}function C(){return(C=f((function(e){var t,n,s,f,d,p,_,E;return T(this,(function(I){switch(I.label){case 0:t=e.channelId,n=e.timeoutMs,s=void 0===n?1e4:n,f=e.bypassChangeModal,d=void 0!==f&&f;return null==(p=a.Z.getChannel(t))?[2,!1]:[4,i.Z.handleVoiceConnect({bypassGuildIdCheck:!0,
bypassChangeModal:d,channel:p,connected:l.Z.isInChannel(t),needSubscriptionToAccess:(0,o.$)(t,a.Z,r.Z,u.Z).needSubscriptionToAccess})];case 1:if(!I.sent())return[2,!1];_=new Promise((function(e,n){var r=setTimeout((function(){n(new O("Joining voice channel has timed out."))}),s);c.Z.addConditionalChangeListener((function(){if(c.Z.getVoiceChannelId()===t){clearTimeout(r);e();return!1}return!0}))}));I.label=2;case 2:I.trys.push([2,4,,5]);return[4,_];case 3:I.sent();return[3,5];case 4:if((E=I.sent())instanceof O)return[2,!1];throw E;case 5:return[2,!0]}}))}))).apply(this,arguments)}},375342:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(652591),i=n(2590);function o(e){var t=e.type,n=e.source,o=e.userId,a=e.applicationId,u=e.partyId,c=e.messageId,l=e.locationObject,s=e.analyticsLocations;r.default.track(i.rMx.APPLICATION_OPENED,{type:t,source:n,application_id:a,party_id:null!=u?u:void 0,other_user_id:o,message_id:c,location:l,location_stack:s})}},765524:(e,t,n)=>{n.d(t,{Z:()=>u})
;var r=n(979197),i=n(625797),o=n(784426),a=n(2590);function u(e,t){r.Z.getWindowOpen(a.KJ3.CHANNEL_CALL_POPOUT)?(0,i.Z)(a.KJ3.CHANNEL_CALL_POPOUT):(0,o.uL)(a.Z5c.CHANNEL(e,t))}},195034:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(202351),i=n(715107),o=n(258104);function a(){return(0,r.e7)([o.ZP,i.Z],(function(){var e=i.Z.getVoiceChannelId();if(null!=e){var t;return null!==(t=o.ZP.getSelfEmbeddedActivityForChannel(e))&&void 0!==t?t:void 0}}))}},483535:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(28661),i=n(195034);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}
}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e=(0,i.Z)(),t=a((0,r.Z)(null==e?[]:[e.application_id]),1)[0];return null!=t?t:void 0}},436771:(e,t,n)=>{n.d(t,{Z:()=>a,I:()=>u});var r=n(318715),i=n(61209),o=n(609145);function a(e){var t,n=(0,o.g$)(),a=(0,r.ZP)([i.Z],(function(){return i.Z.getChannel(e)})),u=null!==(t=null==a?void 0:a.isPrivate())&&void 0!==t&&t;return n&&u}function u(e){if(null==e)return!1;var t,n=i.Z.getChannel(e),r=null!==(t=null==n?void 0:n.isPrivate())&&void 0!==t&&t;return o.tF.getCurrentConfig({},{
autoTrackExposure:!1}).isActivitiesInGdmEnabled&&r}},595258:(e,t,n)=>{n.d(t,{Z:()=>Le});var r=n(785893),i=(n(667294),n(945460)),o=n(744564),a=n(895303),u=n(63509),c=n(61209),l=n(715107),s=n(582762),f=n(247250),d=n(875700),p=n(301928),_=n(566706),E=n(705711),I=n(736818),h=n(959207),v=n(69085),y=n(473903),A=n(652591),T=n(120415),O=n(850841),b=n(258104),C=n(255627),N=n(105783),S=n(565909),m=n(451936),g=n(567403),L=n(682776),P=n(407561),R=n(61040),D=n(322422),M=n(473708);function w(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,u,"next",e)}function u(e){w(o,r,i,a,u,"throw",e)}a(void 0)}))}}var Z=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function G(e){var t=e.embeddedActivityJoinability,n=e.handleCanJoin;switch(t){case D.Fw.CAN_JOIN:n();break
;case D.Fw.NO_USE_EMBEDDED_ACTIVITIES_PERMISSION:(0,S.w)();break;case D.Fw.ACTIVITIES_FEATURE_NOT_ENABLED_FOR_OS:N.Z.show({title:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAILURE,body:M.Z.Messages.EMBEDDED_ACTIVITIES_NOT_AVAILABLE_ON_OS,hideActionSheet:!1});break;case D.Fw.ACTIVITY_NOT_SUPPORTED_ON_OS:N.Z.show({title:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAILURE,body:M.Z.Messages.EMBEDDED_ACTIVITIES_APPLICATION_UNSUPPORTED_OS,hideActionSheet:!1});break;case D.Fw.ACTIVITY_AGE_GATED:N.Z.show({title:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAILURE,body:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_AGE_GATE,hideActionSheet:!1});break;case D.Fw.NO_CHANNEL_CONNECT_PERMISSION:case D.Fw.CHANNEL_FULL:case D.Fw.NO_CHANNEL:case D.Fw.NO_USER:N.Z.show({title:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAILURE,body:M.Z.Messages.ACTIVITIES_GENERIC_LAUNCH_FAILURE_DIALOG_BODY,hideActionSheet:!1})}}function V(e){return k.apply(this,arguments)}function k(){k=U((function(e){var t,n,r,i,o,a,u,l,s,f,p,_,E,I,v,A
;function T(){return O.apply(this,arguments)}function O(){return(O=U((function(){return Z(this,(function(e){switch(e.label){case 0:return null==l?[2]:[4,(0,R.Z)({activity:l,currentEmbeddedApplication:A,activityChannelId:t,locationObject:{},embeddedActivitiesManager:a,analyticsLocations:o})];case 1:e.sent();return[2]}}))}))).apply(this,arguments)}return Z(this,(function(O){switch(O.label){case 0:t=e.channelId,n=e.applicationId,r=e.activityId,i=e.inputApplication,o=e.analyticsLocations,a=e.embeddedActivitiesManager;u=b.ZP.getEmbeddedActivitiesForChannel(t);l=u.find((function(e){return e.application_id===n&&(null==r||e.activity_id===r)}));return null!=(s=i)?[3,2]:[4,d.Z.fetchApplication(n)];case 1:f=O.sent();s=m.Z.createFromServer(f);O.label=2;case 2:if(null==l||null==s)return[2];p=y.default.getCurrentUser();_=(0,D.ZP)({userId:null==p?void 0:p.id,activity:l,application:s,channelId:t,currentUser:p,isActivitiesEnabledForCurrentPlatform:!0,ChannelStore:c.Z,VoiceStateStore:P.Z,
PermissionStore:L.Z,GuildStore:g.Z});E=b.ZP.getSelfEmbeddedActivityForChannel(t);I=null==E?void 0:E.application_id;A=null!=I&&null!==(v=h.Z.getGame(I))&&void 0!==v?v:void 0;G({embeddedActivityJoinability:_,handleCanJoin:T});return[2]}}))}));return k.apply(this,arguments)}var j=n(718482),F=n(120819),H=n(838733),B=n(599055),Y=n(312242),x=n(235819),K=n(88067),J=n(2590),W=n(203600);function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){z(o,r,i,a,u,"next",e)}function u(e){z(o,r,i,a,u,"throw",e)}a(void 0)}))}}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e){Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return Q(e)}function ee(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?q(e):t}function te(e,t){te=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return te(e,t)}var ne=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var i=Q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ee(this,n)}}var ie=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){
return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},oe={},ae={};function ue(e){var t;return{isPremiumActivity:null!=(null==e?void 0:e.activity)?!(0,B.Z)(null==e?void 0:e.activity):void 0,
isFreePeriod:null!=(null==e?void 0:e.activity)?(0,Y.Z)(null==e?void 0:e.activity):void 0,releasePhase:null==e||null===(t=e.activity)||void 0===t?void 0:t.client_platform_config[(0,H.Z)((0,T.Ij)())].release_phase}}function ce(e){return le.apply(this,arguments)}function le(){return(le=X((function(e){var t,n,r,i,o,a,u,l,s,f,d,p,I,h,v,T;return ie(this,(function(O){switch(O.label){case 0:t=e.channelId,n=e.embeddedActivity,r=e.analyticsLocations;i=n.application_id;o=c.Z.getChannel(t);a=null==o?void 0:o.getGuildId();u=y.default.getCurrentUser();if(null==o||null==u)return[2];l=b.ZP.getBundleItems(a);s=b.ZP.getShelfActivities(a);f=0===b.ZP.getEmbeddedActivitiesForChannel(t).filter((function(e){return e.application_id===i})).length;d=(0,C.Z)({applicationId:i,activityConfigs:s,bundleItems:l});p=ue(d),I=p.isPremiumActivity,h=p.isFreePeriod,v=p.releasePhase;return[4,(0,E.Z)()];case 1:T=O.sent();ae[i]=function(e){var t;oe[i]=e;A.default.track(J.rMx.ACTIVITY_SESSION_JOINED,{channel_id:o.id,
guild_id:o.getGuildId(),media_session_id:e.mediaSessionId,activity_session_id:e.activitySessionId,application_id:i,location_stack:r,user_premium_tier:u.premiumType,is_premium_activity:I,is_free_period:h,raw_thermal_state:T,n_participants:_.Z.getUserParticipantCount(o.id),is_activity_start:f,release_phase:v,activity_premium_tier_requirement:null==d||null===(t=d.activity)||void 0===t?void 0:t.premium_tier_requirement})};return[2]}}))}))).apply(this,arguments)}function se(e){return null==e?void 0:e.activity_id}function fe(e){return de.apply(this,arguments)}function de(){return(de=X((function(e){var t,n,r,i,o,a,u,l,s,f,d,p,_,I,h,v;return ie(this,(function(T){switch(T.label){case 0:t=e.channelId,n=e.applicationId;i=oe[n];o=c.Z.getChannel(t);a=b.ZP.getEmbeddedActivityDurationMs(t,n);u=y.default.getCurrentUser();l=null==o?void 0:o.getGuildId();if(null==i||null==o||null==u)return[2];s=b.ZP.getBundleItems(l);f=b.ZP.getShelfActivities(l);d=(0,C.Z)({applicationId:n,activityConfigs:f,bundleItems:s
});p=ue(d),_=p.isPremiumActivity,I=p.isFreePeriod,h=p.releasePhase;return[4,(0,E.Z)()];case 1:v=T.sent();A.default.track(J.rMx.ACTIVITY_SESSION_LEFT,{channel_id:o.id,guild_id:o.getGuildId(),media_session_id:i.mediaSessionId,activity_session_id:i.activitySessionId,application_id:n,duration_ms:a,user_premium_tier:u.premiumType,is_premium_activity:_,is_free_period:I,raw_thermal_state:v,release_phase:h,activity_premium_tier_requirement:null==d||null===(r=d.activity)||void 0===r?void 0:r.premium_tier_requirement});delete ae[n];delete oe[n];return[2]}}))}))).apply(this,arguments)}function pe(e){var t,n,r=e.channelId,i=e.embeddedActivity,o=e.connections,a=e.updateCode,u=I.default.getId(),l=b.ZP.getEmbeddedActivitiesForChannel(r),s=c.Z.getChannel(r);a===K.m2.ACTIVITY_STARTED&&null!==(n=null==s?void 0:s.isPrivate())&&void 0!==n&&n&&l.length<=1&&void 0===o.find((function(e){return e.user_id===u}))&&f.Z.selectParticipant(r,null);if(o.some((function(e){return e.user_id===u}))){
var d=v.Z.getMediaSessionId(),p=i.application_id,_=se(i);if(null!=p&&null!=_&&null!=d){null===(t=ae[p])||void 0===t||t.call(ae,{mediaSessionId:d,activitySessionId:_});delete ae[p]}}}function _e(e){var t=e.mediaSessionId,n=v.Z.getChannelId();if(null!=t&&null!=n){var r=b.ZP.getSelfEmbeddedActivityForChannel(n),i=null==r?void 0:r.application_id,o=se(r);if(null!=i&&null!=t&&null!=o){var a;null===(a=ae[i])||void 0===a||a.call(ae,{mediaSessionId:t,activitySessionId:o});delete ae[i]}}}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&te(e,t)}(n,e);var t=re(n);function n(){$(this,n);var e;(e=t.apply(this,arguments)).handleSelectedChannelUpdate=function(){var t=l.Z.getVoiceChannelId(),n=!0,r=!1,i=void 0;try{for(var o,a=b.ZP.getSelfEmbeddedActivities().values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){
var u=o.value,c=u.channelId,f=u.application_id;c!==t&&e.leaveActivity({channelId:c,applicationId:f})}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}if(null!=t){var d=b.ZP.getEmbeddedActivitiesForChannel(t),p=I.default.getId();d.forEach((function(e){if(e.connections.has(p)){null==b.ZP.getSelfEmbeddedActivityForChannel(e.channelId)&&(0,s.rp)(e.channelId,e.application_id)}}))}};var r,i=q(e);e.handleActivityLaunchFail=(r=X((function(e){var t,n,r,o,a,u,c,l;return ie(this,(function(f){switch(f.label){case 0:t=e.error,n=e.applicationId;return null==(r=e.guildId)?[2]:[4,(0,s.w1)({guildId:r})];case 1:o=f.sent(),a=o.items,u=o.activityConfigs,c=o.applications;if(null!=(0,C.Z)({applicationId:n,bundleItems:a,activityConfigs:u,applications:c})&&t.code===J.evJ.INVALID_ACTIVITY_LAUNCH_PREMIUM_TIER)i.showUpsellModal(n);else{l=M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_GENERIC;switch(t.code){case J.evJ.INVALID_ACTIVITY_LAUNCH_NO_ACCESS:
l=M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_ACCESS;break;case J.evJ.INVALID_ACTIVITY_LAUNCH_PREMIUM_TIER:l=M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_PREMIUM;break;case J.evJ.INVALID_ACTIVITY_LAUNCH_CONCURRENT_ACTIVITIES:l=M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_CONCURRENT;break;case J.evJ.INVALID_PERMISSIONS:l=M.Z.Messages.EMBEDDED_ACTIVITIES_INVALID_PERMISSIONS;break;case J.evJ.INVALID_ACTIVITY_LAUNCH_AFK_CHANNEL:l=M.Z.Messages.EMBEDDED_ACTIVITIES_INVALID_CHANNEL;break;case J.evJ.INVALID_ACTIVITY_LAUNCH_AGE_GATED:l=M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAIL_AGE_GATE}i.showLaunchErrorModal(l)}return[2]}}))})),function(e){return r.apply(this,arguments)});e.superHandleRPCDisconnect=function(t){var n=t.reason,r=t.application.id;if(null!=r&&null!=n){var i=!0,a=!1,u=void 0;try{for(var c,l=function(){var e=c.value,t=e.application_id,n=e.channelId;t===r&&o.Z.wait((function(){return(0,s.mW)({channelId:n,applicationId:r})}))
},f=b.ZP.getSelfEmbeddedActivities().values()[Symbol.iterator]();!(i=(c=f.next()).done);i=!0)l()}catch(e){a=!0;u=e}finally{try{i||null==f.return||f.return()}finally{if(a)throw u}}n.code!==J.$VG.CLOSE_NORMAL&&e.showErrorModal(n,r)}};e.handleCurrentUserUpdate=function(){var e=X((function(e){var t,n;return ie(this,(function(e){switch(e.label){case 0:t=y.default.getCurrentUser();if(!O.ZP.canUsePremiumActivities(t))return[2];n=b.ZP.getSelfEmbeddedActivities();return[4,Promise.all(Array.from(n.values()).map(function(){var e=X((function(e){return ie(this,(function(t){switch(t.label){case 0:return e.connectedPremiumType===W.p9.TIER_2?[3,2]:[4,(0,s.oy)(e.channelId)];case 1:t.sent();e.connectedPremiumType=W.p9.TIER_2;t.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:e.sent();return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var a=q(e);e.handleDeferredOpen=function(){var e=X((function(e){
var t,n,r,i,o,u,f,p,_,E,I,v,y,A,T,O,N,S,m,g,L;return ie(this,(function(P){switch(P.label){case 0:t=e.channelId,n=e.applicationId,r=e.analyticsLocations;return l.Z.getVoiceChannelId()!==t||(null==(u=b.ZP.getSelfEmbeddedActivityForChannel(t))?void 0:u.application_id)===n?[2]:[4,d.Z.fetchApplication(n)];case 1:f=P.sent();if(!(0,F.a)()){a.showLaunchErrorModal(M.Z.Messages.EMBEDDED_ACTIVITIES_NOT_AVAILABLE_ON_OS);return[2]}if(!(0,x.Z)(null==f||null===(i=f.embedded_activity_config)||void 0===i?void 0:i.supported_platforms)){a.showLaunchErrorModal(M.Z.Messages.EMBEDDED_ACTIVITIES_APPLICATION_UNSUPPORTED_OS);return[2]}p=null==u?void 0:u.application_id;_=void 0;return null==p?[3,3]:[4,d.Z.fetchApplication(p)];case 2:P.sent();_=h.Z.getGame(p);P.label=3;case 3:E=c.Z.getChannel(t);v=null!==(I=null==E?void 0:E.getGuildId())&&void 0!==I?I:void 0;return[4,(0,s.w1)({guildId:v})];case 4:y=P.sent(),A=y.items,T=y.activityConfigs,O=y.applications;return null!=(N=(0,C.Z)({applicationId:n,activityConfigs:T,
bundleItems:A,applications:O}))?[3,6]:[4,(0,s.w1)({guildId:v,force:!0})];case 5:S=P.sent();N=(0,C.Z)({applicationId:n,activityConfigs:S.activityConfigs,bundleItems:S.items,applications:S.applications});P.label=6;case 6:m=b.ZP.getEmbeddedActivitiesForChannel(t).find((function(e){return e.application_id===n}));L=null!==(g=null==m||null===(o=m.connections)||void 0===o?void 0:o.size)&&void 0!==g?g:0;if(!(L>0))return[3,7];V({channelId:t,applicationId:n,activityId:null,inputApplication:null,analyticsLocations:r,embeddedActivitiesManager:a});return[3,9];case 7:return[4,(0,j.Z)({activityItem:N,currentActivity:_,channelId:t,guildId:v,embeddedActivitiesManager:a,analyticsLocations:r})];case 8:P.sent();P.label=9;case 9:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return e}var r=n.prototype;r._initialize=function(){l.Z.addChangeListener(this.handleSelectedChannelUpdate);o.Z.subscribe("CURRENT_USER_UPDATE",this.handleCurrentUserUpdate)
;o.Z.subscribe("EMBEDDED_ACTIVITY_LAUNCH_FAIL",this.handleActivityLaunchFail);o.Z.subscribe("EMBEDDED_ACTIVITY_OPEN",ce);o.Z.subscribe("EMBEDDED_ACTIVITY_CLOSE",fe);o.Z.subscribe("EMBEDDED_ACTIVITY_INBOUND_UPDATE",pe);o.Z.subscribe("EMBEDDED_ACTIVITY_DEFERRED_OPEN",this.handleDeferredOpen);o.Z.subscribe("RPC_APP_DISCONNECTED",this.handleRPCDisconnect);o.Z.subscribe("MEDIA_SESSION_JOINED",_e)};r._terminate=function(){l.Z.removeChangeListener(this.handleSelectedChannelUpdate);o.Z.unsubscribe("CURRENT_USER_UPDATE",this.handleCurrentUserUpdate);o.Z.unsubscribe("EMBEDDED_ACTIVITY_LAUNCH_FAIL",this.handleActivityLaunchFail);o.Z.unsubscribe("EMBEDDED_ACTIVITY_OPEN",ce);o.Z.unsubscribe("EMBEDDED_ACTIVITY_CLOSE",fe);o.Z.unsubscribe("EMBEDDED_ACTIVITY_INBOUND_UPDATE",pe);o.Z.unsubscribe("EMBEDDED_ACTIVITY_DEFERRED_OPEN",this.handleDeferredOpen);o.Z.unsubscribe("RPC_APP_DISCONNECTED",this.handleRPCDisconnect);o.Z.unsubscribe("MEDIA_SESSION_JOINED",_e)};return n}(p.Z),Ie=n(691648)
;function he(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){he(o,r,i,a,u,"next",e)}function u(e){he(o,r,i,a,u,"throw",e)}a(void 0)}))}}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Te(e){Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Te(e)}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ae(e,t,n[t])}))}return e}
function be(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e,t){Ce=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Ce(e,t)}var Ne=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var i=Te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return be(this,n)}}var me=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},ge=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Ce(e,t)}(n,e);var t=Se(n);function n(){ye(this,n);var e;(e=t.apply(this,arguments)).handleRPCDisconnect=function(t){var n=t.reason,r=t.application;e.superHandleRPCDisconnect({reason:n,application:r})};return e}var f=n.prototype;f.showErrorModal=function(e){var t=e.code,n=e.message;(0,i.openModalLazy)(ve((function(){return me(this,(function(e){return[2,function(e){return(0,r.jsx)(a.default,Oe({title:M.Z.Messages.EMBEDDED_ACTIVITIES_ERROR_TITLE.format({code:t}),body:n},e))}]}))})))};f.showLaunchErrorModal=function(e){(0,i.openModalLazy)(ve((function(){return me(this,(function(t){return[2,function(t){return(0,r.jsx)(a.default,Oe({title:M.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCH_FAILURE,body:e},t))}]}))})))};f.showUpsellModal=function(e){var t=c.Z.getChannel(l.Z.getChannelId());if(null!=t){
var n=u.Z.getWindowOpen(J.KJ3.CHANNEL_CALL_POPOUT),r={section:J.jXE.EMBEDDED_ACTIVITY_LAUNCH_FAIL};(0,Ie.Z)({channel:t,guildId:t.guild_id,locationObject:r,openInPopout:n,initialSelectedApplicationId:e,initialSlide:K.ag.UPSELL,analyticsLocations:[]})}};f.leaveActivity=function(e){var t=e.channelId,n=e.applicationId;o.Z.wait((function(){return(0,s.mW)({channelId:t,applicationId:n})}))};return n}(Ee);const Le=new ge},691648:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(785893),i=(n(667294),n(945460)),o=n(625797),a=n(88067),u=n(2590);function c(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,u,"next",e)}function u(e){c(o,r,i,a,u,"throw",e)}a(void 0)}))}}function s(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var d=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1
};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function p(e){var t=e.channel,c=e.guildId,p=e.locationObject,_=e.openInPopout,E=e.initialSelectedApplicationId,I=e.initialSlide,h=void 0===I?a.ag.DIRECTORY:I,v=e.enableSelectedTextChannelInvite,y=void 0!==v&&v,A=e.analyticsLocations;_&&(0,o.Z)(u.KJ3.CHANNEL_CALL_POPOUT);var T=_?i.POPOUT_MODAL_CONTEXT:i.DEFAULT_MODAL_CONTEXT;return(0,i.openModalLazy)(l((function(){var e,i;return d(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(40056),n.e(71784),n.e(96259),n.e(85227),n.e(85725),n.e(24251),n.e(3790),n.e(6254),n.e(94302),n.e(76294),n.e(42212),n.e(93666),n.e(33404),n.e(56356),n.e(27913),n.e(49096),n.e(39813),n.e(95357),n.e(28283),n.e(24501),n.e(25978),n.e(67783),n.e(97045),n.e(48198)]).then(n.bind(n,948198))];case 1:e=o.sent(),i=e.default;return[2,function(e){return(0,r.jsx)(i,f(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){s(e,t,n[t])}))}return e}({},e),{channel:t,guildId:c,locationObject:p,initialSlide:h,initialSelectedApplicationId:E,enableSelectedTextChannelInvite:y,analyticsLocations:A}))}]}}))})),{modalKey:a.AC,contextKey:T})}},153686:(e,t,n)=>{n.d(t,{Z:()=>i});var r;!function(e){e.POPOUT_WINDOW="popout window"
;e.OVERLAY="overlay";e.NOTICE="notice";e.PREMIUM_UPSELL_TOOLTIP="premium upsell tooltip";e.BADGE="badge";e.USER_SETTINGS="user settings";e.USER_SETTINGS_MENU="user settings menu";e.ACCOUNT="account";e.TEXT_AND_IMAGES="text and images";e.GUILD_SETTINGS="guild settings";e.OVERVIEW="overview";e.STICKERS="stickers";e.VANITY_URL="vanity url";e.PREMIUM_MARKETING="premium marketing";e.PREMIUM_MARKETING_PLAN_COMPARISON="premium marketing plan comparison";e.PREMIUM_PAYMENT_MODAL="premium payment modal";e.PREMIUM_UPSELL_ALERT="premium upsell alert";e.PREMIUM_UPSELL_MODAL="premium upsell modal";e.PAYMENT_FLOW_TEST_PAGE="payment flow test page";e.PREMIUM_PAYMENT_ACTION_SHEET="premium payment action sheet";e.CHANNEL_CALL="channel call";e.CHANNEL_CALL_CONNECTING_SCREEN="channel call connecting screen";e.RTC_PANEL="rtc panel";e.SOUNDBOARD_BUTTON="soundboard button";e.SOUNDBOARD_POPOUT="soundboard popout";e.SOUNDBOARD_WHEEL="soundboard wheel";e.GIFT_BUTTON="gift button"
;e.EXPRESSION_SUGGESTIONS="expression suggestions";e.EMOJI_PICKER="emoji picker";e.STICKER_PICKER="sticker picker";e.STICKER_POPOUT="sticker popout";e.PREMIUM_UPSELL="premium upsell";e.EMPTY_STATE="empty state";e.SUBSCRIPTION_DETAILS="subscription details";e.SUBSCRIPTION_HEADER="subscription header";e.ACCOUNT_CREDIT_BANNER="account credit banner";e.PREMIUM_UNCANCEL_MODAL="premium uncancel modal";e.PAST_DUE_ONE_TIME_PAYMENT_METHOD_BANNER="past due one time payment method banner";e.STREAM_QUALITY_INDICATOR="stream quality indicator";e.PREMIUM_TIER_0_TRIAL_ENDING_NOTICE="premium tier 0 trial ending notice";e.PREMIUM_TIER_2_TRIAL_ENDING_NOTICE="premium tier 2 trial ending notice";e.BOOSTED_GUILD_PERKS_MODAL="boosted guild perks modal";e.GUILD_BOOSTING_PREMIUM_UPSELL="guild boosting premium upsell";e.RPC="rpc";e.BILLING_STANDALONE="billing standalone";e.GUILD_CHANNEL_LIST="guild channel list";e.GUILD_CHANNEL_LIST_FOOTER="guild channel list footer";e.STICKER_MESSAGE="sticker message"
;e.CHANNEL_TEXT_AREA="channel text area";e.HEADER_BAR="header bar";e.GUILD_ROLE_SUBSCRIPTION_CANCELLATION_MODAL="guild role subscription cancellation modal";e.GUILD_ROLE_SUBSCRIPTION_PURCHASE_SYSTEM_MESSAGE="guild role subscription purchase system message";e.GUILD_ROLE_SUBSCRIPTION_EMOJI_PICKER_UPSELL="guild role subscription emoji picker upsell";e.GUILD_ROLE_SUBSCRIPTION_EMOJI_TEXT_POPOVER_UPSELL="guild role subscription emoji text popover upsell";e.PREMIUM_SUBSCRIPTION_CANCELLATION_MODAL="premium subscription cancellation modal";e.APPLICATION_SUBSCRIPTION_CANCELLATION_MODAL="application subscription cancellation modal";e.PENDING_PLAN_CHANGE_NOTICE="pending plan change notice";e.SUBSCRIPTION_CANCEL_DOWNGRADE_MODAL="subscription cancel downgrade modal";e.GUILD_HEADER="guild header";e.GUILD_BANNER="guild banner";e.GUILD_BANNER_NOTICE="guild banner notice";e.GUILD_BOOST_PURCHASE_MODAL="guild boost purchase modal";e.GUILD_BOOST_CANCELLATION_MODAL="guild boost cancellation modal"
;e.GUILD_BOOST_UNCANCELLATION_MODAL="guild boost uncancellation modal";e.GUILD_BOOSTING_PROGRESS_BAR="guild boosting progress bar";e.GUILD_BOOSTING_TIER_NONE="guild boosting tier none";e.GUILD_BOOSTING_TIER_1="guild boosting tier 1";e.GUILD_BOOSTING_TIER_2="guild boosting tier 2";e.GUILD_BOOSTING_TIER_3="guild boosting tier 3";e.GUILD_BOOSTING_UPSELL_BANNER="guild boosting upsell banner";e.GUILD_BOOSTING_SIDEBAR_DISPLAY="guild boosting sidebar display";e.ACTIVITY_CHANNEL_SELECTOR="activity channel selector";e.ACTIVITY_DIRECTORY="activity directory";e.ACTIVITY_TILE="activity tile";e.ACTIVITY_UPSELL="activity upsell";e.ACTIVITY_VOICE_CONTROLS_TOGGLE="activity voice controls toggle";e.INSTANT_INVITE_MODAL="instant invite modal";e.IMAGE_CROPPING_MODAL="image cropping modal";e.GIF_PICKER="gif picker";e.EXTERNAL_INVITE_LINK_MODAL="external invite link modal";e.INVITE_MODAL="invite modal";e.INVITE_EMBED="invite embed";e.NEW_GUILD_BUTTON="new guild button";e.CHARACTER_COUNT="character count"
;e.DM_CHANNEL="dm channel";e.GUILD_CHANNEL="guild channel";e.FORUM_CHANNEL="forum channel";e.FILE_UPLOAD_POPOUT="file upload popout";e.EMOJI="emoji";e.PROFILE="profile";e.PROFILE_MODAL="profile modal";e.PROFILE_POPOUT="profile popout";e.GUILD_PROFILE="guild profile";e.EDIT_AVATAR="edit avatar";e.EDIT_BANNER="edit banner";e.CHAT_INPUT="chat input";e.CREATE_THREAD="create thread";e.PREMIUM_PREVIEW_UPSELL_HEADER="premium preview upsell header";e.PREMIUM_UPSELL_OVERLAY="premium upsell overlay";e.SELECT_IMAGE_MODAL="select image modal";e.VIDEO_BACKGROUND_OPTIONS="video background options";e.VIDEO_BACKGROUND_IMAGE_OPTION="video background image option";e.VIDEO_BACKGROUND_CUSTOM_UPSELL="video background custom upsell";e.CAMERA_PREVIEW="camera preview";e.HOME_PAGE_PREMIUM_TAB="home page premium tab";e.PREMIUM_MARKETING_SURFACE="premium marketing surface";e.PREMIUM_MARKETING_HERO_CTA="premium marketing hero cta";e.PREMIUM_MARKETING_TIER_1_CTA="premium marketing tier 1 cta"
;e.PREMIUM_MARKETING_TIER_2_CTA="premium marketing tier 2 cta";e.PREMIUM_MARKETING_LOCALIZED_PRICING_TIER_2_CTA="premium marketing localized pricing tier 2 cta";e.PREMIUM_MARKETING_SURFACE_HERO_CTA="premium marketing surface hero cta";e.PREMIUM_MARKETING_SURFACE_TIER_2_CTA="premium marketing surface tier 2 cta";e.PREMIUM_MARKETING_SURFACE_TIER_1_CTA="premium marketing surface tier 1 cta";e.PREMIUM_MARKETING_TIER_CARD="premium marketing tier card";e.PREMIUM_MARKETING_PERK_CARD="premium marketing perk card";e.PREMIUM_MARKETING_FEATURE="premium marketing feature";e.PREMIUM_MARKETING_COMPARISON_TABLE="premium marketing comparison table";e.PREMIUM_MARKETING_FOOTER="premium marketing footer";e.CHANNEL_CALL_ACTION_BAR="channel call action bar";e.AGGREGATE_PREMIUM_UPSELL_MODAL_FEATURE_EMOJI="aggregate premium upsell modal emoji";e.AGGREGATE_PREMIUM_UPSELL_MODAL_FEATURE_PROFILE_CUSTOMIZATION="aggregate premium upsell modal profile customization"
;e.AGGREGATE_PREMIUM_UPSELL_MODAL_FEATURE_HD_STREAMING="aggregate premium upsell modal hd streaming";e.AGGREGATE_PREMIUM_UPSELL_MODAL_FEATURE_LARGER_FILE_UPLOADS="aggregate premium upsell modal larger file uploads";e.AGGREGATE_PREMIUM_UPSELL_MODAL_FEATURE_BOGO="aggregate premium upsell modal bogo";e.CHANNEL_EXPANDED_CONTROLS="channel expanded controls";e.VOICE_CONTROL_TRAY="voice control tray";e.ACTIVE_NOW_COLUMN="active now column";e.CONTEXT_MENU="context menu";e.CHANNEL_ACTIVITY_FEED_VOICE_MENU="channel activity feed voice menu";e.CHANNEL_AUDIT_LOG_MENU="channel audit log menu";e.CHANNEL_CATEGORY_MENU="channel category menu";e.CHANNEL_LIST_DIRECTORY_CHANNEL_MENU="channel list menu";e.CHANNEL_LIST_STORE_CHANNEL_MENU="channel list store channel menu";e.CHANNEL_LIST_TEXT_CHANNEL_MENU="channel list text channel menu";e.CHANNEL_LIST_THREAD_MENU="channel list thread menu";e.CHANNEL_LIST_VOICE_CHANNEL_MENU="channel list voice channel menu";e.CHANNEL_TITLE_MENU="channel title menu"
;e.GROUP_DM_MENU="group dm menu";e.AUDIT_LOG_USER_MENU="audit log user menu";e.BANNED_USER_MENU="banned user menu";e.DM_USER_MENU="dm user menu";e.GROUP_DM_USER_MENU="group dm user menu";e.GUILD_CHANNEL_USER_MENU="guild channel user menu";e.GUILD_MODERATION_USER_MENU="guild moderation user menu";e.GUILD_MODERATION_RAID_MENU="guild moderation raid menu";e.GUILD_SETTINGS_USER_MENU="guild settings user menu";e.GUILD_USER_MENU="guild user menu";e.THREAD_USER_MENU="thread user menu";e.USER_GENERIC_MENU="user generic menu";e.USER_PROFILE_ACTIONS_MENU="user profile actions menu";e.VOICE_ACTION_SHEET="voice action sheet";e.FOCUSED_VOICE_CONTROLS="focused voice controls";e.MASKED_LINK="masked link";e.LAST_NITRO_HOST_ACTION_SHEET="last nitro host action sheet";e.LAST_NITRO_HOST_LEFT_ACTION_SHEET="last nitro host left action sheet";e.PREMIUM_TIER_0_ANNOUNCEMENT_ACTION_SHEET="premium tier 0 announcement action sheet";e.PS_VOICE_CONNECT_UPSELL="ps voice connect upsell"
;e.PROFILE_THEME_UPSELL_MODAL="profile theme upsell modal";e.EDIT_AVATAR_DECORATION_MODAL="edit avatar decoration modal";e.EDIT_AVATAR_DECORATION_SHEET="edit avatar decoration sheet";e.PREMIUM_MARKETING_PAGE_AVATAR_DECORATIONS_BANNER="premium marketing page avatar decorations banner";e.ACCOUNT_PROFILE_POPOUT="account profile popout";e.CHANNEL_CALL_OVERFLOW_ACTION_SHEET="channel_call_overflow_action_sheet";e.USER_SETTINGS_TRY_OUT_PREMIUM="user settings try out premium";e.ACTIVITY_COACH_MARK_NITRO="activity coach mark nitro";e.ACTIVITY_COACH_MARK_BOOSTING="activity coach mark boosting";e.ACTIVITY_COACH_MARK_HALLOWEEN_2022="activity coach mark halloween 2022";e.PREMIUM_TRIAL_TUTORIAL_COACHMARK="premium trial tutorial coachmark";e.PREMIUM_TRIAL_TUTORIAL_TOOLTIP="premium trial tutorial tooltip";e.ACTIVITY_COACH_MARK_BASH_OUT="activity coach mark bash out";e.ACTIVITY_COACH_MARK_POKER="activity coach mark poker";e.ACTIVITY_COACH_MARK_GARTIC_PHONE="activity coach mark gartic phone"
;e.ACTIVITIES_COACH_MARK_GAME_NIGHT="activities coach mark game night";e.STAGE_VIDEO_LIMIT="stage video limit";e.ACTIVITIES_MINI_SHELF="activities mini shelf";e.VC_TILE_ACTIVITY_INVITE="vc tile activity invite";e.VC_TILE_ACTIVITY_SUGGESTION="vc tile activity suggestion";e.VC_TILE_ACTIVITY_SHELF_BUTTON="vc tile activity shelf button";e.BURST_REACTION_TUTORIAL_COACHMARK="super reaction tutorial coachmark";e.CLIENT_THEMES_EDITOR="client themes editor";e.CLIENT_THEMES_THEME_SELECTOR="client themes theme selector";e.AUTOMOD_PROFILE_QUARANTINE_ALERT="automod profile quarantine alert";e.SHARE_NITRO_EMBED="share nitro embed";e.EMBEDDED_ACTIVITY_MESSAGE="embedded activity message";e.REFERRAL_TRIALS_COMPOSER_BUTTON="referral trials composer button";e.REFERRAL_TRIALS_POPOUT="referral trials popout";e.PREMIUM_MARKETING_ANNOUNCEMENT_MODAL="premium marketing announcement modal";e.PREMIUM_MARKETING_PAGE_BANNER="premium marketing page banner";e.ACTIVITY_BOOKMARK="activity bookmark"
;e.ACTIVITY_BOOKMARK_LAUNCHER="activity bookmark launcher";e.ACTIVITY_DETAIL_PAGE="activity detail page";e.ACTIVITIES_PAGE="activities page";e.ACTIVITIES_PAGE_NOTIFICATION_DOT="activities page cta";e.ACTIVITIES_PAGE_WHATS_NEW_TILE="activities page whats new tile";e.VOICE_PANEL_PRE_JOIN="voice panel pre-join content";e.ACTIVITIES_IM_FEELING_LUCKY="activities im feeling lucky";e.ACTIVITIES_HAPPENING_NOW="activities happening now";e.MEDIA_VIEWER="media viewer";e.MESSAGE_LONG_PRESS_MENU="message long press menu";e.COLLECTIBLE_INFO_ACTION_SHEET="collectible info action sheet"}(r||(r={}));const i=r},28661:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(667294),i=n(202351),o=n(199731),a=n(875700),u=n(959207);function c(e,t){return e.length===t.length&&!e.some((function(e,n){return!(0,o.Z)(t[n],e)}))}function l(e){r.useEffect((function(){a.Z.fetchApplications(e,!1)}),[e]);var t=(0,i.e7)([u.Z],(function(){return e.map((function(e){return{id:e,application:u.Z.getGame(e),fetching:u.Z.isFetching(e),
failed:u.Z.didFetchingFail(e)}}))}),[e],c);return r.useMemo((function(){return t.map((function(e){return e.application}))}),[t])}},14096:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(785893),i=(n(667294),n(945460)),o=n(116404),a=n(409125),u=n(784426),c=n(487685),l=n(671293),s=n(736818),f=n(715107),d=n(407561),p=n(728998),_=n(2590);function E(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,u,"next",e)}function u(e){E(o,r,i,a,u,"throw",e)}a(void 0)}))}}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){
return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};const y={handleVoiceConnect:function(e){
var t=e.channel,E=e.connected,y=e.needSubscriptionToAccess,A=e.locked,T=void 0!==A&&A,O=e.routeDirectlyToChannel,b=void 0!==O&&O,C=e.bypassChangeModal,N=e.bypassGuildIdCheck,S=void 0!==N&&N;return I((function(){var e,A,O,N,m;return v(this,(function(g){switch(g.label){case 0:e=this;return t.isThread()?[4,l.Z.unarchiveThreadIfNecessary(t.id)]:[3,3];case 1:g.sent();return c.Z.hasJoined(t.id)?[3,3]:[4,l.Z.joinThread(t,"Join Voice")];case 2:g.sent();g.label=3;case 3:A=a.Z.getRemoteSessionId();O=d.Z.getVoiceStateForSession(s.default.getId(),A);N=(null==O?void 0:O.channelId)===t.id;m=N||f.Z.getChannelId()===d.Z.getCurrentClientVoiceChannelId(t.guild_id);if(!C&&!T&&(0,p._)(t))return[2,new Promise((function(o){var a=e;(0,i.openModalLazy)(I((function(){var e,i;return v(this,(function(u){switch(u.label){case 0:return[4,n.e(51562).then(n.bind(n,851562))];case 1:e=u.sent(),i=e.default;return[2,function(e){return(0,r.jsx)(i,function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){h(e,t,n[t])}))}return e}({channel:t,onConfirm:function(){return o(a.handleVoiceConnect({channel:t,connected:E,needSubscriptionToAccess:y,routeDirectlyToChannel:b,locked:T,bypassChangeModal:!0}))}},e))}]}}))})))}))];if(!T&&!E){o.default.maybeClearChannelTopic();o.default.selectVoiceChannel(t.id)}!__OVERLAY__&&(E||m||y||b)&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getGuildId();if(null==n&&!t)throw new Error("VoiceChannel, transitionTo: Channel does not have a guildId");(0,u.uL)(_.Z5c.CHANNEL(n,e.id))}(t,S);return[2,!0]}}))})).apply(this)}}},497842:(e,t,n)=>{n.d(t,{Z:()=>P,H:()=>g});var r=n(579344),i=n(785893),o=(n(667294),n(945460));function a(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e)
;return}u.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,c,"next",e)}function c(e){a(o,r,i,u,c,"throw",e)}u(void 0)}))}}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop()
;a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function s(e){(0,o.openModalLazy)(u((function(){var t,r;return l(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(71784),n.e(93666),n.e(63548),n.e(70462)]).then(n.bind(n,170462))];case 1:t=o.sent(),r=t.default;return[2,function(t){return(0,i.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){c(e,t,n[t])}))}return e}({analyticsLocation:e},t))}]}}))})))}function f(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,u,"next",e)}function u(e){f(o,r,i,a,u,"throw",e)}a(void 0)}))}}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var _=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,
i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function E(e,t){(0,o.openModalLazy)(d((function(){var r,o;return _(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(71784),n.e(93666),n.e(63548),n.e(75309)]).then(n.bind(n,775309))];case 1:r=a.sent(),o=r.default;return[2,function(n){return(0,i.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){p(e,t,n[t])}))}return e}({analyticsLocation:e,platformType:t},n))}]}}))})))}function I(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,u,"next",e)}function u(e){I(o,r,i,a,u,"throw",e)}a(void 0)}))}}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var y=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function A(e){(0,o.openModalLazy)(h((function(){var t,r;return y(this,(function(o){switch(o.label){case 0:
return[4,Promise.all([n.e(40532),n.e(71784),n.e(1653),n.e(93666),n.e(63548),n.e(70245)]).then(n.bind(n,670245))];case 1:t=o.sent(),r=t.default;return[2,function(t){return(0,i.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){v(e,t,n[t])}))}return e}({analyticsLocation:e},t))}]}}))})))}var T=n(955121),O=n(120415),b=n(678005),C=n(2590);function N(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){N(o,r,i,a,u,"next",e)}function u(e){N(o,r,i,a,u,"throw",e)}a(void 0)}))}}var m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},
trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function g(e){
return L.apply(this,arguments)}function L(){L=S((function(e){var t,n,i,o,a,u,c,l,s,f,d,p=arguments;return m(this,(function(_){switch(_.label){case 0:t=p.length>1&&void 0!==p[1]?p[1]:{},n=t.location,i=t.twoWayLinkType,o=p.length>2?p[2]:void 0;a=700;u=640;c=Math.round(screen.width/2-a/2);l=screen.height>u?Math.round(screen.height/2-u/2):0;s=null;(0,O.nI)()||(s=window.open("".concat(window.location.protocol,"//").concat(window.location.host).concat(C.Z5c.CONNECTIONS(e),"?loading=true"),"authorize","scrollbars=yes,resizable=yes,toolbar=no,location=yes,top=".concat(l,",left=").concat(c,",width=").concat(a,",height=").concat(u)));return null!=(f=o)||e===b.Kt?[3,2]:[4,r.Z.authorize(e,{location:n,twoWayLinkType:i})];case 1:d=_.sent().body;f=d.url;_.label=2;case 2:if(null==f)return[2];null!=s?s.location.href=f:window.open(f);return[2,f]}}))}));return L.apply(this,arguments)}function P(e,t,n){e===C.ABu.LEAGUE_OF_LEGENDS&&(e=C.ABu.RIOT_GAMES)
;e!==C.ABu.CRUNCHYROLL?e!==C.ABu.XBOX?e!==C.ABu.PLAYSTATION&&e!==C.ABu.PLAYSTATION_STAGING?null==n?g(e,{location:t}):(0,T.q)({shouldConfirm:!0,href:n,onConfirm:function(){g(e,{location:t},n)}}):E([null!=t?t:"unknown"],e):A([null!=t?t:"unknown"]):s([null!=t?t:"unknown"])}},414306:(e,t,n)=>{n.d(t,{Z:()=>l,$:()=>s});var r=n(202351),i=n(747820),o=n(61209),a=n(682776),u=n(2590),c={needSubscriptionToAccess:!1,isSubscriptionGated:!1};function l(e){return(0,r.cj)([o.Z,i.Z,a.Z],(function(){return s(e,o.Z,i.Z,a.Z)}),[e])}function s(e,t,n,r){var i=t.getChannel(e);return(null==i?void 0:i.isRoleSubscriptionTemplatePreviewChannel())?{isSubscriptionGated:!0,needSubscriptionToAccess:!0}:null!=i&&n.isChannelGated(i.guild_id,i.id)?{isSubscriptionGated:!0,needSubscriptionToAccess:i.isGuildVocal()?!r.can(u.Plq.CONNECT,i):!r.can(u.Plq.VIEW_CHANNEL,i)}:c}},979197:(e,t,n)=>{n.d(t,{Z:()=>r.Z});var r=n(63509)},625797:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(120415),i=n(310126),o=n(63509);function a(e){
var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o.Z.getWindow(e);null==n||n.closed||(r.FB?i.default.focus(e,t):n.focus())}},517019:(e,t,n)=>{n.d(t,{PY:()=>s,KV:()=>f,Wo:()=>d,yp:()=>p});var r=n(265688),i=n(671723),o=n(597287),a=n(972725),u=n(73727),c=n(966334),l=n(2590);function s(e){return null!=e.getActiveSocketAndDevice()||a.Z.isProtocolRegistered()}function f(){var e=u.Z.getActiveSocketAndDevice();if(null!=e)return Promise.resolve(e);if(!a.Z.isProtocolRegistered())return Promise.reject(new Error("protocol is not registered"));var t=u.Z.getPlayableComputerDevices();if(i.ZP.isObservedAppRunning(r.Z.get(l.ABu.SPOTIFY).name)&&t.length>0){var n=t[0],s=n.socket,f=n.device;(0,o.Tu)(s.accountId,f.id);return Promise.resolve({socket:s,device:f})}return new Promise((function(e,n){var r=setTimeout((function(){u.Z.removeChangeListener(i);n(new Error("timeout launching spotify"))}),3e4),i=function(){var n=u.Z.getPlayableComputerDevices(),a=!0,c=!1,l=void 0;try{
for(var s,f=function(){var n=s.value,a=n.socket,c=n.device;if(null==t.find((function(e){return e.device.id===c.id}))){clearTimeout(r);u.Z.removeChangeListener(i);setImmediate((function(){(0,o.Tu)(a.accountId,c.id);e({socket:a,device:c})}))}},d=n[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)f()}catch(e){c=!0;l=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw l}}};u.Z.addChangeListener(i);window.open("".concat(c.M5,":"))}))}function d(){var e=u.Z.getActiveSocketAndDevice();return null==e?null:e.socket.isPremium}function p(){var e=u.Z.getActiveSocketAndDevice();if(null==e)return Promise.reject(new Error("no active profile"));var t=e.socket;return t.isPremium?Promise.resolve():(0,o.Ai)(t.accountId,t.accessToken).then((function(){if(!t.isPremium)return Promise.reject(new Error("spotify account is not premium"))}))}},511720:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(652591),i=n(517019),o=n(966334),a=n(2590),u=[o.kG.USER_ACTIVITY_SYNC,o.kG.EMBED_SYNC];function c(e,t,n,o){
r.default.track(a.rMx.SPOTIFY_BUTTON_CLICKED,{type:e,source:o,is_premium:(0,i.Wo)(),party_id:u.includes(e)&&null!=(null==n?void 0:n.party)?n.party.id:null,other_user_id:t.id})}},572080:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(497842),i=n(2590);function o(e){if(e)return!0;(0,r.Z)(i.ABu.SPOTIFY,"Spotify Button");return!1}},598007:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(966334),i=n(473708);function o(e,t){switch(t){case r.kG.USER_ACTIVITY_PLAY:return e.hasSpotifyAccount?i.Z.Messages.USER_ACTIVITY_PLAY_ON_PLATFORM.format({platform:r.ai}):i.Z.Messages.USER_ACTIVITY_CONNECT_PLATFORM.format({platform:r.ai});case r.kG.EMBED_SYNC:return e.hasSpotifyAccount?e.syncingWithUser||e.syncingWithParty?i.Z.Messages.INVITE_EMBED_JOINED:i.Z.Messages.JOIN:i.Z.Messages.USER_ACTIVITY_CONNECT_PLATFORM.format({platform:r.ai});case r.kG.USER_ACTIVITY_SYNC:default:return}}},557162:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(749565),i=n(966334),o=n(473708);function a(e,t,n){switch(t){case i.kG.USER_ACTIVITY_PLAY:
return e.isCurrentUser?o.Z.Messages.USER_ACTIVITY_CANNOT_PLAY_SELF:e.playingSameTrack?o.Z.Messages.USER_ACTIVITY_ALREADY_PLAYING:e.notPlayable?o.Z.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:i.ai}):void 0;case i.kG.USER_ACTIVITY_SYNC:return e.isCurrentUser?o.Z.Messages.USER_ACTIVITY_CANNOT_SYNC_SELF:e.syncingWithUser||e.syncingWithParty?o.Z.Messages.USER_ACTIVITY_ALREADY_SYNCING:o.Z.Messages.USER_ACTIVITY_LISTEN_ALONG_DESCRIPTION.format({name:null!=n?n:r.ZP.getName(e.user)});case i.kG.EMBED_SYNC:return e.isCurrentUser?o.Z.Messages.USER_ACTIVITY_CANNOT_SYNC_SELF:e.syncingWithUser||e.syncingWithParty?o.Z.Messages.USER_ACTIVITY_ALREADY_SYNCING:e.notPlayable?o.Z.Messages.USER_ACTIVITY_NOT_DETECTED.format({name:i.ai}):void 0;default:return}}},47038:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(517019);function i(e,t,n,i){var o,a,u,c=e.hasConnectedAccount(),l=(0,
r.PY)(e),s=e.getTrack(),f=e.getSyncingWith(),d=e.getActivity(),p=null!==(u=null!==(a=null==s?void 0:s.id)&&void 0!==a?a:null==d?void 0:d.sync_id)&&void 0!==u?u:e.getLastPlayedTrackId();return{user:n,activity:i,hasSpotifyAccount:c,canPlaySpotify:l,notPlayable:c&&!l,syncingWithParty:null!=(null==d?void 0:d.party)&&(null==i||null===(o=i.party)||void 0===o?void 0:o.id)===d.party.id,syncingWithUser:null!=(null==f?void 0:f.userId)&&(null==f?void 0:f.userId)===n.id,isCurrentUser:n.id===t.getId(),currentUserTrackId:p,playingSameTrack:null!=p&&p===(null==i?void 0:i.sync_id)}}},304493:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(785893),i=(n(667294),n(945460)),o=n(859980),a=n(517019),u=n(511720),c=n(572080);function l(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,u,"next",e)}function u(e){l(o,r,i,a,u,"throw",e)}
a(void 0)}))}}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}var p=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break
;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function _(e,t,n){return E.apply(this,arguments)}function E(){return(E=s((function(e,t,l){var f,_,E;return p(this,(function(I){switch(I.label){case 0:f=e.hasSpotifyAccount,_=e.activity,E=e.user;return(0,c.Z)(f)&&null!=_&&null!=_.sync_id?[4,(0,a.KV)()]:[2];case 1:I.sent();return[4,(0,a.yp)().catch((function(e){(0,i.openModalLazy)(s((function(){var e,t;return p(this,(function(i){switch(i.label){case 0:
return[4,Promise.all([n.e(40532),n.e(89938)]).then(n.bind(n,789938))];case 1:e=i.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,d({},e))}]}}))})));return Promise.reject(e)}))];case 2:I.sent();o.Z_(_,E.id);(0,u.Z)(t,E,_,l);return[2]}}))}))).apply(this,arguments)}},979965:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(859980),i=n(517019),o=n(511720),a=n(572080);function u(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,c,"next",e)}function c(e){u(o,r,i,a,c,"throw",e)}a(void 0)}))}}var l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function s(e,t,n){return f.apply(this,arguments)}function f(){return(f=c((function(e,t,n){var u,c,s;return l(this,(function(l){switch(l.label){case 0:u=e.hasSpotifyAccount,c=e.activity,s=e.user;return(0,
a.Z)(u)&&null!=c&&null!=c.sync_id?[4,(0,i.KV)()]:[2];case 1:l.sent();r.hY(c,s.id);(0,o.Z)(t,s,c,n);return[2]}}))}))).apply(this,arguments)}},960412:(e,t,n)=>{n.d(t,{oh:()=>r,y0:()=>i,jC:()=>a});var r,i,o=n(2590);!function(e){e.USER_INFO="USER_INFO";e.USER_INFO_CONNECTIONS="USER_INFO_CONNECTIONS";e.ACTIVITY="ACTIVITY";e.MUTUAL_GUILDS="MUTUAL_GUILDS";e.MUTUAL_FRIENDS="MUTUAL_FRIENDS";e.BOT_DATA_ACCESS="BOT_DATA_ACCESS"}(r||(r={}));!function(e){e.POPOUT="POPOUT";e.MODAL="MODAL";e.SETTINGS="SETTINGS";e.PANEL="PANEL";e.CARD="CARD";e.POMELO_POPOUT="POMELO_POPOUT";e.CANCEL_MODAL="CANCEL_MODAL"}(i||(i={}));function a(e){var t=window.GLOBAL_ENV,n=t.API_ENDPOINT,r=t.CDN_HOST;return null!=r?"".concat(location.protocol,"//").concat(r,"/badge-icons/").concat(e,".png"):"".concat(location.protocol).concat(n).concat(o.ANM.BADGE_ICON(e))}},942492:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(667294),i=n(202351),o=n(281110),a=n(744564),u=n(279812),c=n(2590);function l(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value
}catch(e){n(e);return}u.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,u,"next",e)}function u(e){l(o,r,i,a,u,"throw",e)}a(void 0)}))}}var f=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function d(e){var t=(0,i.e7)([u.Z],(function(){return u.Z.getNote(e)}));r.useEffect((function(){null==t&&function(e){p.apply(this,arguments)}(e)}),[t,e]);return null!=t?t:{loading:!0,note:null}}function p(){return(p=s((function(e){var t,n;return f(this,(function(r){switch(r.label){case 0:a.Z.dispatch({type:"USER_NOTE_LOAD_START",userId:e});r.label=1;case 1:r.trys.push([1,3,,4]);return[4,o.Z.get({url:c.ANM.NOTE(e),oldFormErrors:!0})];case 2:t=r.sent(),n=t.body;a.Z.dispatch({type:"USER_NOTE_LOADED",userId:e,note:n});return[3,4];case 3:r.sent();a.Z.dispatch({type:"USER_NOTE_LOADED",userId:e});return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},
924417:(e,t,n)=>{n.d(t,{m:()=>c});var r=n(744564),i=n(285991),o=n(473903),a=n(736626),u=n(2590);function c(e){var t=e.userId,n=e.section,c=e.guildId,l=void 0===c?u.ME:c,s=e.channelId,f=e.friendToken,d=e.autoFocusNote,p=e.analyticsLocation,_=o.default.getUser(t),E=l!==u.ME?l:void 0;if(null==_)return(0,i.In)(t,{friendToken:f,guildId:E}).then((function(){r.Z.dispatch({type:"USER_PROFILE_MODAL_OPEN",userId:t,section:n,guildId:l,channelId:s,friendToken:f,autoFocusNote:d,analyticsLocation:p})}));(0,a.Z)(t,_.getAvatarURL(void 0,80),{withMutualGuilds:!0,friendToken:f,guildId:E});r.Z.dispatch({type:"USER_PROFILE_MODAL_OPEN",userId:t,section:n,guildId:l,channelId:s,friendToken:f,autoFocusNote:d,analyticsLocation:p})}},565909:(e,t,n)=>{n.d(t,{w:()=>o});var r=n(105783),i=n(473708),o=function(){r.Z.show({title:i.Z.Messages.NO_EMBEDDED_ACTIVITY_PERMISSION_DIALOG_TITLE,body:i.Z.Messages.NO_EMBEDDED_ACTIVITY_PERMISSION_DIALOG_BODY,hideActionSheet:!1})}},279812:(e,t,n)=>{n.d(t,{Z:()=>_})
;var r=n(202351),i=n(744564);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var f={};function d(){f={}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=s(n);function n(){o(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getNote=function(e){return f[e]};r.__getLocalVars=function(){return{notes:f}};return n}(r.ZP.Store);p.displayName="NoteStore";const _=new p(i.Z,{CONNECTION_OPEN:d,OVERLAY_INITIALIZE:d,USER_NOTE_UPDATE:function(e){f[e.id]={loading:!1,note:e.note}},USER_NOTE_LOAD_START:function(e){var t=e.userId;f[t]={loading:!0,note:null}},USER_NOTE_LOADED:function(e){var t=e.userId,n=e.note;f[t]={loading:!1,note:null==n?void 0:n.note}}})},453007:(e,t,n)=>{n.d(t,{Z:()=>A});var r=n(202351),i=n(513328),o=n(744564),a=n(2590);function u(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function s(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var _={},E={},I=12e4;function h(e,t,n){var r,u=n.applicationId,c=null!==(r=_[u])&&void 0!==r?r:{};c[t]=e;_[u]=c;if(!__OVERLAY__&&e===a.OcF.FAILED){null!=E[u]&&E[u].stop();var l=new i.V7;l.start(I,(function(){return o.Z.dispatch({type:"ACTIVITY_LAUNCH_FAIL",applicationId:u,activityType:t})}));E[u]=l}}function v(e){return h(a.OcF.COMPLETE,a.mFx.JOIN,e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(n,e);var t=p(n);function n(){u(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getState=function(e,t){var n=_[e];return null==n?void 0:n[t]};r.getStates=function(){return _};r.__getLocalVars=function(){return{states:_,clearTimeouts:E,
CLEAR_LAUNCH_TIME:I}};return n}(r.ZP.Store);y.displayName="ActivityLauncherStore";const A=new y(o.Z,{OVERLAY_INITIALIZE:function(e){var t=e.activityLauncherStates;_=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}({},t)},ACTIVITY_JOIN_LOADING:function(e){return h(a.OcF.LOADING,a.mFx.JOIN,e)},ACTIVITY_JOIN_FAILED:function(e){return h(a.OcF.FAILED,a.mFx.JOIN,e)},ACTIVITY_JOIN:v,EMBEDDED_ACTIVITY_CLOSE:v,ACTIVITY_LAUNCH_FAIL:function(e){var t=e.applicationId,n=e.activityType,r=_[t];if(null==r||r[n]!==a.OcF.FAILED)return!1;delete r[n]}})}}]);
//# sourceMappingURL=115d7fcda5a5d71ee0fe.js.map