"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[94601],{494601:(e,n,t)=>{t.r(n);t.d(n,{default:()=>O});var a=t(785893),r=t(667294),i=t(506884),s=t(363010),l=t(856864),o=t(331535),u=t(780921),c=t(743175),d=t(218276),E=t(20157),C=t(53551),N=t(384995),p=t(487502),h=t(272729),m=t(414597),f=t(976703),v=t(932291),_=t(915306),A=t(806008),x=t(67416),b=t(268333),y=t(890889),g=t(666492),L=t(461061),I=t(375650),T=t(959797),j=t(302142),M=t.n(j);function Z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i=[],s=!0,l=!1;try{for(t=t.call(e);!(s=(a=t.next()).done);s=!0){i.push(a.value);if(n&&i.length===n)break}}catch(e){l=!0;r=e}finally{try{s||null==t.return||t.return()}finally{if(l)throw r}}return i}}(e,n)||function(e,n){if(!e)return
;if("string"==typeof e)return Z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){var n,t,j=e.guildId,Z=e.transitionState,O=e.onSubmit,D=e.onClose,R=(0,h.Dt)(),H=(0,h.Dt)(),P=(0,h.Dt)(),k=(0,h.Dt)(),G=S(r.useState("null"),2),z=G[0],U=G[1],F=S(r.useState(L.d4z.GUILD_TEXT),2),Y=F[0],w=F[1],B=S(r.useState(""),2),V=B[0],W=B[1],X=S(r.useState(!1),2),J=X[0],q=X[1],K=(0,E.m)(j),$=(0,c.W3)(j),Q=r.useMemo((function(){return function(e){var n=e.canCreateStageChannel,t=e.canCreateForumChannel,r=[{icon:f.Z,label:T.Z.Messages.TEXT_CHANNEL_TYPE,value:L.d4z.GUILD_TEXT,
description:T.Z.Messages.CREATE_TEXT_CHANNEL_DESCRIPTION},{icon:_.Z,label:T.Z.Messages.VOICE_CHANNEL_TYPE,value:L.d4z.GUILD_VOICE,description:T.Z.Messages.CREATE_VOICE_CHANNEL_DESCRIPTION}];n&&r.push({icon:A.Z,label:T.Z.Messages.STAGE_VOICE_CHANNEL_TYPE,value:L.d4z.GUILD_STAGE_VOICE,description:T.Z.Messages.CREATE_STAGE_CHANNEL_DESCRIPTION});t&&r.push({icon:v.Z,label:T.Z.Messages.FORUM_CHANNEL_TYPE,value:L.d4z.GUILD_FORUM,description:T.Z.Messages.FORUM_CHANNEL_DESCRIPTION});return r.map((function(e){var n=e.icon,t=e.label,r=e.value,i=e.description;return{name:(0,a.jsxs)("div",{className:M().channelOptionWrapper,children:[(0,a.jsx)(n,{className:M().icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.xv,{variant:"text-md/normal",color:"header-primary",children:t}),(0,a.jsx)(o.xv,{variant:"text-xs/normal",color:"header-secondary",children:i})]})]}),value:r,channelIcon:n}}))}({canCreateStageChannel:K,canCreateForumChannel:$})}),[K,$]),ee=(0,s.e7)([N.Z],(function(){
return N.Z.getCategories(j)._categories}),[j]),ne=r.useMemo((function(){return ee.map((function(e){var n=e.channel;return{value:n.id,label:n.name}}))}),[ee]),te=null!==(t=null===(n=Q.find((function(e){return e.value===Y})))||void 0===n?void 0:n.channelIcon)&&void 0!==t?t:I.Vq,ae=""!==V;return(0,a.jsx)("form",{onSubmit:function(e){e.preventDefault();if(ae){q(!0);var n={type:Y,name:V,parent_id:"null"!==z?z:void 0,permission_overwrites:[{id:j,type:u.BN.ROLE,allow:y.ZP.NONE,deny:L.Plq.VIEW_CHANNEL}]};g.Z.post({url:L.ANM.GUILD_CHANNELS(j),body:n,oldFormErrors:!0,trackedActionData:{event:i.a9.CHANNEL_CREATE,properties:function(e){var n,t;return(0,l.iG)({is_private:!0,channel_id:null==e||null===(n=e.body)||void 0===n?void 0:n.id,channel_type:null==e||null===(t=e.body)||void 0===t?void 0:t.type})}}}).then((function(e){d.Z.checkGuildTemplateDirty(j);O(e.body.id);D()}),(function(e){})).finally((function(){q(!1)}))}},children:(0,a.jsxs)(x.Y0,{transitionState:Z,"aria-labelledby":R,children:[(0,
a.jsxs)(x.xB,{children:[(0,a.jsx)(o.X6,{id:R,variant:"heading-md/semibold",children:T.Z.Messages.CREATE_CHANNEL}),(0,a.jsx)(x.ol,{className:M().closeButton,onClick:D})]}),(0,a.jsxs)(x.hz,{className:M().modalContent,children:[(0,a.jsx)(o.xJ,{title:T.Z.Messages.CATEGORY,titleId:H,children:(0,a.jsx)(o.q4,{placeholder:T.Z.Messages.CREATE_CHANNEL_MODAL_CATEGORY_PLACEHOLDER,value:z,options:ne,onChange:function(e){return U(e)},"aria-labelledby":H})}),(0,a.jsx)("div",{className:M().spacer}),(0,a.jsx)(o.xJ,{title:T.Z.Messages.CHANNEL_TYPE,titleId:P,children:(0,a.jsx)(o.Ee,{options:Q,value:Y,onChange:function(e){var n=e.value;return w(n)},"aria-labelledby":P})}),(0,a.jsx)("div",{className:M().spacer}),(0,a.jsx)(o.xJ,{title:T.Z.Messages.FORM_LABEL_CHANNEL_NAME,titleId:k,children:(0,a.jsx)(o.oi,{value:V,onChange:function(e){(0,C.zi)(Y)&&(e=(0,b.Nj)(e));W(e)},maxLength:L.HN8,placeholder:T.Z.Messages.CHANNEL_NAME_PLACEHOLDER,className:M().inputWrapper,inputClassName:M().inputInner,prefixElement:(0,
a.jsx)(te,{className:M().inputPrefix,"aria-hidden":!0}),"aria-labelledby":k,autoFocus:!0})})]}),(0,a.jsxs)(x.mz,{justify:p.Z.Justify.BETWEEN,children:[(0,a.jsx)(o.zx,{type:"submit",submitting:J,disabled:!ae,children:T.Z.Messages.SAVE}),(0,a.jsxs)(o.zx,{look:o.zx.Looks.LINK,color:o.zx.Colors.PRIMARY,className:M().backButton,innerClassName:M().backButtonInner,onClick:D,children:[(0,a.jsx)(m.Z,{direction:m.Z.Directions.LEFT}),T.Z.Messages.BACK]})]})]})})}}}]);
//# sourceMappingURL=e9722e05f2fd7a1c3177.js.map