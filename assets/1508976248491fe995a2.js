"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[39915],{287194:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(785893),o=t(667294),l=t(441394),i=t(570187),a=t.n(i);function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function s(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){l.push(r.value);if(n&&l.length===n)break}}catch(e){a=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw o}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){var n=e.hasSetEmoji,t=e.onClick,i=e.children,u=s(o.useState(!1),2),c=u[0],d=u[1];return(0,r.jsxs)("div",{className:a().container,onMouseEnter:function(){d(!!n)},onMouseLeave:function(){d(!1)},children:[i,n&&c&&(0,r.jsx)(l.Z,{onClick:t,className:a().removeButton})]})}},276327:(e,n,t)=>{t.d(n,{_:()=>r,S:()=>o});var r="Guild Welcome Screen",o="hasClickedWelcomeEmojiPicker"},939915:(e,n,t)=>{t.r(n);t.d(n,{default:()=>w});var r=t(785893),o=t(667294),l=t(202351),i=t(630631),a=t(945460),u=t(77413),s=t(213276),c=t(773011),d=t(239813),f=t(748308),m=t(287194),h=t(489617),p=t(61209),j=t(5544),C=t(840922),E=t(473903),v=t(847197),S=t(107364),y=t(443812),b=t(436622),g=t(563135),_=t(102909),N=t(734294),O=t(276327),I=t(2590),x=t(473708),L=t(398885),P=t.n(L);function T(e,n){(null==n||n>e.length)&&(n=e.length)
;for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function M(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){M(e,n,t[n])}))}return e}function A(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function k(e,n){return function(e){
if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){l.push(r.value);if(n&&l.length===n)break}}catch(e){a=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw o}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const w=function(e){var n,t,L=e.guildId,T=e.welcomeChannel,M=e.transitionState,w=e.onSave,B=e.onClose,D=(0,
y.Dt)(),U=k(o.useState(null!=T?T.channel_id:null),2),G=U[0],R=U[1],W=k(o.useState(null!=T?T.description:""),2),H=W[0],F=W[1],K=k(o.useState(null!=T?{id:T.emoji_id,name:T.emoji_name}:null),2),z=K[0],J=K[1],V=k(o.useState(!1),2),Y=V[0],q=V[1],$=(0,l.e7)([h.Z],(function(){return null!=(null==z?void 0:z.id)?h.Z.getUsableCustomEmojiById(z.id):null})),X=(0,l.e7)([j.ZP],(function(){return j.ZP.getChannels(L)[j.sH]}),[L]),Q=(0,l.e7)([_.Z],(function(){return _.Z.get(L)})),ee=null!==(t=null==Q||null===(n=Q.welcome_channels)||void 0===n?void 0:n.map((function(e){return e.channel_id})))&&void 0!==t?t:[],ne=k(o.useState(!1),2),te=ne[0],re=ne[1];o.useEffect((function(){i.Z.get(O.S)||setTimeout((function(){return re(!0)}),300)}),[]);var oe=[];X.forEach((function(e){var n=e.channel;!g.ZP.canEveryoneRole(I.Plq.VIEW_CHANNEL,n)||(null==T?void 0:T.channel_id)!==n.id&&ee.includes(n.id)||oe.push({value:n.id,label:(0,c.F6)(n,E.default,C.Z)})}));var le=function(){re(!1);B()},ie=o.useCallback((function(e){
return F(e)}),[]),ae=function(e){if(null!=e){var n,t,r;J(null!=e.id?{id:null!==(n=e.id)&&void 0!==n?n:null,name:null!==(t=e.name)&&void 0!==t?t:null}:{id:null,name:null!==(r=e.optionallyDiverseSequence)&&void 0!==r?r:null})}else J(null)},ue=o.useCallback((function(){i.Z.set(O.S,!0);re(!1)}),[]);return(0,r.jsx)(s.Z,{page:I.ZY5.CHANNEL_WELCOME_CREATE_MODAL,children:(0,r.jsxs)(a.ModalRoot,{transitionState:M,"aria-labelledby":D,children:[(0,r.jsxs)("div",{className:P().modalContents,children:[(0,r.jsx)(a.ModalCloseButton,{onClick:le,className:P().closeButton}),(0,r.jsx)(a.Heading,{variant:"heading-md/semibold",className:P().headerText,id:D,children:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SELECT_A_CHANNEL}),(0,r.jsxs)(a.FormSection,{className:P().formGroup,children:[(0,r.jsx)(a.SearchableSelect,{options:oe,onChange:function(e){return R(e)},value:G,renderOptionPrefix:function(e){if(null===e)return null;var n,t=e.value,o=p.Z.getChannel(t),l=null!==(n=(0,d.KS)(o))&&void 0!==n?n:b.Z
;return(0,r.jsx)(l,{className:P().channelTitleIcon,width:16,height:16})}}),(0,r.jsx)(a.Text,{variant:"text-xs/normal",color:"text-muted",className:P().formDescription,children:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_ONLY_VIEWABLE_CHANNELS})]}),(0,r.jsx)(a.FormDivider,{}),(0,r.jsx)(a.Heading,{variant:"heading-md/semibold",className:P().headerText,children:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_SET_DESCRIPTION}),(0,r.jsx)(a.FormSection,{className:P().formGroup,children:(0,r.jsx)(a.TextInput,{maxLength:42,value:H,inputClassName:P().input,placeholder:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_CHANNEL_DESCRIPTION_PLACEHOLDER,onChange:ie})}),(0,r.jsx)(a.FormDivider,{}),(0,r.jsx)(a.FormSection,{className:P().formGroup,children:(0,r.jsxs)("div",{className:P().emojiSectionContainer,children:[(0,r.jsxs)("div",{className:P().emojiTitleContainer,children:[(0,r.jsx)(a.Heading,{variant:"heading-md/semibold",children:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_PICK_EMOJI}),(0,r.jsx)(a.Text,{
variant:"text-xs/normal",color:"text-muted",children:x.Z.Messages.GUILD_SETTINGS_PUBLIC_WELCOME_PICK_EMOJI_UPSELL})]}),(0,r.jsx)(m.Z,{hasSetEmoji:null!=z,onClick:ae,children:(0,r.jsx)(a.Popout,{renderPopout:function(e){var n=e.closePopout,t=j.ZP.getDefaultChannel(L);return(0,r.jsx)(f.Z,{guildId:L,closePopout:n,onSelectEmoji:function(e,t){ae(e);if(t){n();null==e&&le()}},pickerIntention:I.HzX.COMMUNITY_CONTENT,onNavigateAway:le,channel:t})},position:"left",animation:a.Popout.Animation.NONE,align:"bottom",children:function(e,n){var t=n.isShown;return(0,r.jsx)(a.TooltipContainer,{color:a.TooltipColors.BRAND,tooltipClassName:P().tooltip,position:"left",text:te?x.Z.Messages.WELCOME_CHANNEL_EMOJI_PICKER_TOOLTIP:null,forceOpen:te,children:(0,r.jsx)(v.Z,A(Z({},e),{onClick:function(n){var t;ue();null===(t=e.onClick)||void 0===t||t.call(e,n)},active:t,className:P().emojiButton,tabIndex:0,renderButtonContents:null==z||null==z.id&&null==z.name?null:function(){return(0,r.jsx)(u.Z,{
className:P().emoji,emojiId:z.id,emojiName:z.name,animated:Boolean(null==$?void 0:$.animated)})}}))})}})})]})})]}),(0,r.jsxs)(a.ModalFooter,{className:P().footer,justify:S.Z.Justify.BETWEEN,children:[(0,r.jsxs)(S.Z,{grow:0,align:S.Z.Align.CENTER,children:[(0,r.jsx)(a.Button,{onClick:le,size:a.Button.Sizes.SMALL,look:a.Button.Looks.LINK,color:a.Button.Colors.PRIMARY,children:x.Z.Messages.CANCEL}),(0,r.jsx)(a.Button,{onClick:function(){null!=G&&H.length>0&&w({channel_id:G,description:H,emoji_id:null==z?void 0:z.id,emoji_name:null==z?void 0:z.name});le()},disabled:null==G||0===H.length,children:x.Z.Messages.SAVE})]}),null!=T&&(0,r.jsx)(a.Button,{onClick:function(){q(!0)},size:a.Button.Sizes.MIN,look:a.Button.Looks.LINK,color:a.Button.Colors.RED,children:x.Z.Messages.REMOVE})]}),Y&&(0,r.jsx)(N.Z,{onConfirm:function(){w();le()},onCancel:function(){return q(!1)},channelId:G})]})})}}}]);
//# sourceMappingURL=1508976248491fe995a2.js.map