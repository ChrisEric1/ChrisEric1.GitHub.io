"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[92447],{92447:(e,t,r)=>{r.r(t);r.d(t,{default:()=>he});var n=r(785893),o=r(667294),i=r(611345),s=r(363010),a=r(331535),c=r(579220),u=r(395951),l=r(859169),f=r(64833),p=r(716421),d=r(655695),y=r(493925),b=r(859023),h=r(732031),v=r(67416),m=r(932847),O=r(74030),j=r(811778),S=r(962564),w=r(766936),g=r(588641),A=r(366236),x=r(959797),E=r(579174),P=r.n(E),I=g.default.getEnableHardwareAcceleration()?w.Xo:w.ZP,_=[{size:w.u8.SIZE_40,showStatus:!1},{size:w.u8.SIZE_32,showStatus:!1},{size:w.u8.SIZE_40,showStatus:!0},{size:w.u8.SIZE_32,showStatus:!0}],D=function(e){var t=e.user,r=e.size,o=e.status,i=e.pendingAvatarDecoration,s=A.H8[r].size,a=(0,j.w)({user:t,size:s,showPending:!0,animateOnHover:!0}),c=a.avatarSrc,u=a.eventHandlers;return(0,n.jsx)("div",{className:P().smallDecorationPreview,children:(0,n.jsx)(I,{src:c,size:r,onMouseEnter:u.onMouseEnter,onMouseLeave:u.onMouseLeave,status:o,avatarDecoration:i,
"aria-hidden":!0})})};const C=function(e){var t,r=e.user,o=e.selectedDecoration,i=(0,s.e7)([S.Z],(function(){return S.Z.getStatus(r.id)})),c=(0,j.w)({user:r,showPending:!0,size:A.H8[w.u8.SIZE_120].size}).avatarSrc,u=null!==(t=null==o?void 0:o.data)&&void 0!==t?t:null==o?void 0:o.asset;return(0,n.jsxs)("section",{children:[(0,n.jsx)(a.vw,{children:x.Z.Messages.AVATAR_DECORATION_MODAL_HEADER_PREVIEW_SECTION}),(0,n.jsxs)("div",{className:P().previewSections,children:[(0,n.jsx)("div",{className:P().decorationPreview,children:(0,n.jsx)(I,{avatarDecoration:u,src:c,size:w.u8.SIZE_120,"aria-label":x.Z.Messages.USER_SETTINGS_AVATAR})}),(0,n.jsx)("div",{className:P().smallDecorationPreviewsContainer,children:_.map((function(e,t){var o=e.size,s=e.showStatus;return(0,n.jsx)(D,{user:r,size:o,pendingAvatarDecoration:u,status:s?i:void 0},t)}))})]})]})};var N=r(294184),T=r.n(N),R=r(566223),Z=r(730189),M=r(52074),L=r(735614),k=r(801763),z=r(567895),U=r(897576),G=r(476154);function V(e,t,r,n,o,i,s){try{
var a=e[i](s),c=a.value}catch(e){r(e);return}a.done?t(c):Promise.resolve(c).then(n,o)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){V(i,n,o,s,a,"next",e)}function a(e){V(i,n,o,s,a,"throw",e)}s(void 0)}))}}function B(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var K=function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;(n=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;n=i[1]
;i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(o=s.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1];o=i;break}if(o&&s.label<o[2]){s.label=o[2];s.ops.push(i);break}o[2]&&s.ops.pop();s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e];n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const Y=function(e){var t=e.onSelect;return(0,n.jsx)(z.ZP,{onChange:function(e,o){(0,U.ZD)(H((function(){var i,s;return K(this,(function(a){switch(a.label){case 0:return[4,Promise.all([r.e(40532),r.e(22852),r.e(96378)]).then(r.bind(r,122852))];case 1:i=a.sent(),s=i.default;return[2,function(r){return(0,n.jsx)(s,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r)
;"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){B(e,t,r[t])}))}return e}({imgURI:e,file:o,onCrop:function(r){return t({asset:e,data:r})},uploadType:G.pC.AVATAR_DECORATION},r))}]}}))})))}})};var $=r(249350),F=r(158504),Q=r.n(F);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){X(e,t,r[t])}))}return e}function J(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done);s=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){a=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(){return 80},re=function(e){var t=e.preset,r=e.itemKey,c=e.coords,u=e.isSelected,l=e.onSelect,f=ee(o.useState(null==t.asset),2),p=f[0],d=f[1],y=(0,s.e7)([Z.Z],(function(){return Z.Z.useReducedMotion})),b=o.useRef(null),h=(0,R.Z)(b),v=y&&!h;o.useEffect((function(){if(!p&&null!=t.asset){var e=new Image;e.src=t.asset;e.onload=function(){return d(!0)}}}),[p,t.asset]);return(0,n.jsx)(a.P3,{innerRef:b,style:q({},c),onClick:function(){return l(t)},className:T()(Q().decorationGridItem,X({},Q().selected,u)),children:p?(0,i.EQ)(t).with({name:$.ee.NONE},(function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{className:Q().notAllowedIcon}),(0,n.jsx)(a.xv,{
variant:"text-xs/normal",color:"header-primary",children:e.descriptor()})]})})).with({name:$.ee.UPLOAD},(function(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.Z,{className:Q().uploadIcon}),(0,n.jsx)(Y,{onSelect:function(t){var r=t.asset,n=t.data;return l(J(q({},e),{asset:r,data:n}))}}),(0,n.jsx)(a.xv,{variant:"text-xs/normal",color:"header-primary",children:e.descriptor()})]})})).otherwise((function(e){return(0,n.jsx)("img",{className:Q().presetDecorationImg,src:v&&null!=e.staticAsset?e.staticAsset:e.asset,alt:e.descriptor()})})):(0,n.jsx)(a.$j,{className:Q().spinner,type:a.$j.Type.SPINNING_CIRCLE})},r)};const ne=function(e){var t=e.selectedDecoration,r=e.onSelect,o=e.presets;return(0,n.jsxs)("section",{children:[(0,n.jsx)(a.vw,{children:x.Z.Messages.AVATAR_DECORATION_MODAL_DECORATION_SECTION}),(0,n.jsx)(k.ZP,{fade:!0,itemGutter:12,paddingVertical:0,className:Q().list,columns:3,sections:[o.length+1],getItemKey:function(e,t){var r
;return null===(r=o[t])||void 0===r?void 0:r.name},renderItem:function(e,i,s,a){var c=o[i];return(0,n.jsx)(re,{preset:o[i],itemKey:a,coords:s,isSelected:(null==t?void 0:t.name)===c.name,onSelect:r})},getItemHeight:te,removeEdgeItemGutters:!0})]})};var oe=r(879022),ie=r(461061),se=r(298716),ae=r(163096),ce=r.n(ae);function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){r(e);return}a.done?t(c):Promise.resolve(c).then(n,o)}function fe(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function pe(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}
return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done);s=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){a=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
var ye=function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;(n=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;n=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(o=s.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1];o=i;break}if(o&&s.label<o[2]){s.label=o[2];s.ops.push(i);break}o[2]&&s.ops.pop();s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e];n=0}finally{r=o=0}
if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function be(e){var t=e.onApply,r=e.onClose,o=e.user,i=e.disableApplyButton,u=O.ZP.canUsePremiumProfileCustomization(o),l=(0,s.e7)([y.Z],(function(){return y.Z.showNotice()}));if(u)return(0,n.jsxs)(v.mz,{children:[(0,n.jsx)(a.zx,{onClick:t,disabled:i,children:x.Z.Messages.AVATAR_DECORATION_MODAL_APPLY}),(0,n.jsx)(a.zx,{look:a.zx.Looks.LINK,color:a.zx.Colors.PRIMARY,onClick:r,children:x.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_CANCEL})]});var f=O.ZP.isPremium(o)?x.Z.Messages.USER_SETTINGS_CUSTOMIZATION_UPGRADE_UPSELL:x.Z.Messages.USER_SETTINGS_CUSTOMIZATION_UPSELL;return(0,n.jsxs)(v.mz,{className:ce().subscribeFooter,children:[(0,n.jsxs)("div",{className:ce().buttonsRight,children:[(0,n.jsx)(a.zx,{look:a.zx.Looks.LINK,color:a.zx.Colors.PRIMARY,onClick:r,children:x.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_CANCEL}),(0,n.jsx)(p.Z,{buttonText:f,subscriptionTier:se.Si.TIER_2})]}),!l&&(0,n.jsx)(a.zx,{
onClick:function(e){e.preventDefault();(0,d.uL)(ie.Z5c.APPLICATION_STORE);(0,c.xf)();r()},look:a.zx.Looks.LINK,color:a.zx.Colors.LINK,children:x.Z.Messages.AVATAR_DECORATION_MODAL_DISCOVER_MORE_PERKS})]})}function he(e){var t=e.transitionState,r=e.onClose,c=e.analyticsLocations,p=(0,f.Z)(c,l.Z.EDIT_AVATAR_DECORATION_MODAL).AnalyticsLocationProvider,d=(0,s.e7)([b.default],(function(){return b.default.getCurrentUser()})),y=(0,i.EQ)(d).when((function(e){return null==e?void 0:e.isStaff()}),(function(){return $.Ln})).when((function(e){return O.ZP.canUsePremiumProfileCustomization(e)}),(function(){return $.sG})).otherwise((function(){return $.Hm})),j=de(o.useState(y[0]),2),S=j[0],w=j[1],g=S.name,A=S.asset,E=S.isCustom,P=S.data,I=E&&void 0===P;o.useEffect((function(){var e,t,r=(t=(e=function(){var e;return ye(this,(function(t){switch(t.label){case 0:return[4,(0,oe.T)({name:g,asset:A,isCustom:E})];case 1:if(null===(e=t.sent())||e===A)return[2];w((function(t){return pe(function(e){
for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){fe(e,t,r[t])}))}return e}({},t),{data:e})}));return[2]}}))},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function s(e){le(i,n,o,s,a,"next",e)}function a(e){le(i,n,o,s,a,"throw",e)}s(void 0)}))}),function(){return t.apply(this,arguments)});r()}),[A,g,E]);o.useEffect((function(){m.default.track(ie.rMx.OPEN_MODAL,{type:"Edit Avatar Decoration Modal"})}),[]);return null==d?null:(0,n.jsx)(p,{children:(0,n.jsxs)(v.Y0,{transitionState:t,size:v.Cg.DYNAMIC,children:[(0,n.jsxs)(v.xB,{separator:!1,children:[(0,n.jsxs)(a.vw,{tag:a.RB.H1,className:ce().modalTitle,children:[(0,n.jsx)(h.Z,{className:ce().premiumIcon}),x.Z.Messages.AVATAR_DECORATION_MODAL_HEADER]}),(0,
n.jsx)(v.ol,{onClick:r})]}),(0,n.jsxs)(v.hz,{className:ce().modalContent,children:[(0,n.jsx)(ne,{selectedDecoration:S,onSelect:w,presets:y}),(0,n.jsx)(C,{selectedDecoration:S,user:d})]}),(0,n.jsx)(be,{onApply:function(){if(!I){(0,u.cV)(null===S.asset?null:S);r()}},onClose:r,user:d,disableApplyButton:I})]})})}}}]);
//# sourceMappingURL=93f6008715120a3d901a.js.map