(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66150],{457890:(e,n,t)=>{e.exports=t.p+"cf3e2e7f108d20c8d804a13c9067f5a6.svg"},966150:(e,n,t)=>{"use strict";t.r(n);t.d(n,{InviteCopyInputConnected:()=>Mn,InviteRow:()=>Sn,default:()=>Rn});var r,i=t(785893),s=t(667294),a=t(294184),o=t.n(a),l=t(441143),u=t.n(l),c=t(496486),d=t.n(c),h=t(506884);!function(e){e[e.IS_GUEST_INVITE=1]="IS_GUEST_INVITE"}(r||(r={}));new Set([1]);var f=t(363010),g=t(365523),p=t(331535),v=t(671018),I=t(173436),E=t(662322);var _=t(642400),m=t(549425),y=t(832691),N=t(356004),S=t(897268);function x(e){x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return x(e)}function T(e,n){return!n||"object"!==C(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function M(e,n){M=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return M(e,n)}
var C=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=x(e);if(n){var i=x(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return T(this,t)}}var A;!function(e){e[e.GROUP_DM=0]="GROUP_DM";e[e.USER=1]="USER"}(A||(A={}));var O=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&M(e,n)}(t,e);var n=R(t);function t(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)
;return n.call(this,new y.Z("InviteQueue"),1010)}var r=t.prototype;r._sendInvite=function(e,n,t,r,i){m.Z.sendInvite(e.id,n,t,r).then((function(){return i(null,!0)}),(function(){return i(null,!1)}))};r.drain=function(e,n){var t=this,r=e.location,i=e.suggested;switch(e.type){case A.GROUP_DM:this._sendInvite(e.channel,e.inviteKey,r,i,n);break;case A.USER:_.Z.ensurePrivateChannel(e.user.id).then((function(s){var a=N.Z.getChannel(s);null!=a&&t._sendInvite(a,e.inviteKey,r,i,n)}),(function(){return n(null,!1)}))}};return t}(S.Z);const b=new O;var Z=t(859169),L=t(64833),w=t(125628),j=t(485923),V=t(53211),U=t(808525),D=t(832010),P=t(573643),B=t(190422),G=t(553494),k=(0,G.B)({kind:"guild",id:"2023-02_guest_voice_invites",label:"Guest Voice Invites",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Allow creation of guest voice invites",config:{enabled:!0}}]}),F=(0,G.B)({kind:"guild",id:"2023-02_temporary_invite_discoverability",label:"Temporary Invite Discoverability",defaultConfig:{enabled:!1
},treatments:[{id:1,label:"Increased Visibility of Temporary Invite Toggle",config:{enabled:!0}}]}),H=t(714523),z=t(7046),K=t(46323),Y=t(272889);const q=(0,G.B)({kind:"guild",id:"2022-05_vanity_url_target",label:"Vanity URL Targeting",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var W=t(108268),X=t(756328),J=t(80635),Q=t(18416),$=t(992141),ee=t(1812),ne=t(287452),te=t(142348),re=t(105405),ie=t(630206),se=t(461061);function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function oe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function le(e){le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return le(e)}function ue(e,n){return!n||"object"!==he(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}
function ce(e,n){ce=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return ce(e,n)}function de(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var he=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function fe(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=le(e);if(n){var i=le(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ue(this,t)}}var ge,pe,ve,Ie,Ee=new Set,_e=[],me=new Map;function ye(e){var n=new Set,t=null==Ie?void 0:Ie.id,r=(0,te.rh)(Ee,t);null==r||re.Z.isBlocked(r.id)||n.add(r.id);var i=!0,s=!1,a=void 0;try{for(var o,l=ie.Z.getUserAffinitiesUserIds()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;n.add(u)}}catch(e){s=!0;a=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw a}}return(0,te.an)(e,Ee,n,100,t)}function Ne(e){_e=e;me=new Map;e.forEach((function(e,n){me.set(e,{index:n})}))}var Se=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,
writable:!0,configurable:!0}});n&&ce(e,n)}(t,e);var n=fe(t);function t(){oe(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(re.Z,ie.Z)};r.getInviteSuggestionRows=function(){return _e};r.getTotalSuggestionsCount=function(){return pe};r.getInitialCounts=function(){return ge};r.getSelectedInviteMetadata=function(e){var n=me.get(e),t=ie.Z.getUserAffinitiesUserIds();return null!=n?{rowNum:n.index,isAffinitySuggestion:e.isSuggested,numTotal:_e.length,numAffinityConnections:t.size,isFiltered:ve}:null};r.__getLocalVars=function(){return{MAX_INVITE_SUGGESTION_COUNT:100,userIdsToOmit:Ee,inviteSuggestions:_e,inviteSuggestionsMap:me,initialCounts:ge,totalCount:pe,isFiltered:ve,currentGuild:Ie}};return t}(f.ZP.Store);Se.displayName="InviteSuggestionsStore";const xe=new Se(I.Z,{LOAD_INVITE_SUGGESTIONS:function(e){var n=e.omitUserIds,t=e.guild,r=e.channel;Ie=null!=r?t:null;var i=re.Z.getRelationships(),s=Object.keys(i).filter((function(e){
return i[e]===se.OGo.BLOCKED}));Ee=new Set(de(n).concat(de(s)));ve=!1;var a=ye(""),o=a.rows,l=a.counts;Ne(o);ge=l;pe=_e.length},INVITE_SUGGESTIONS_SEARCH:function(e){var n=e.query;ve=""!==n;Ne(ye(n).rows)}});var Te=t(940712),Me=t(962564),Ce=t(379822),Re=t(971738),Ae=t(893321),Oe=t(859023),be=t(645897),Ze=t(246887),Le=t(487502),we=t(31165),je=t(757987),Ve=t(73393),Ue=t(106027),De=t(81951),Pe=t(67416),Be=t(766936),Ge=t(932847),ke=t(726283),Fe=t(418674),He=t(964199),ze=t(35236),Ke=t(830504),Ye=t(848545),qe=t(959797),We=t(12977),Xe=t.n(We),Je=t(229481),Qe=t.n(Je),$e=t(3066),en=t.n($e),nn=t(380203),tn=t.n(nn),rn=t(234532),sn=t.n(rn),an=t(457890),on=t.n(an);function ln(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function un(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function cn(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function dn(e){
dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return dn(e)}function hn(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&gn(e,n)}function fn(e,n){return!n||"object"!==vn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function gn(e,n){gn=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return gn(e,n)}function pn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,s=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done);a=!0){s.push(r.value);if(n&&s.length===n)break}}catch(e){o=!0;i=e}finally{try{a||null==t.return||t.return()}finally{
if(o)throw i}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ln(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ln(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function In(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=dn(e);if(n){var i=dn(this).constructor;t=Reflect.construct(r,arguments,i)
}else t=r.apply(this,arguments);return fn(this,t)}}var En=te.ZP.getMaxAgeOptions,_n=te.ZP.getMaxUsesOptions,mn=te.ZP.INVITE_OPTIONS_FOREVER,yn=te.ZP.INVITE_OPTIONS_7_DAYS,Nn=te.ZP.INVITE_OPTIONS_UNLIMITED,Sn=function(e){hn(t,e);var n=In(t);function t(){un(this,t);var e;(e=n.apply(this,arguments)).state={sending:!1,invited:!1,hovered:!1};e.handleMouseEnter=function(){e.setState({hovered:!0})};e.handleMouseLeave=function(){e.setState({hovered:!1})};e.getSuggestedProps=function(){var n,t=e.props.row;return null!==(n=null!=t?xe.getSelectedInviteMetadata(t):null)&&void 0!==n?n:null};e.handleClickInvite=function(){var n=e.props,t=n.user,r=n.channel,i=n.inviteKey,s=n.location;if(null!=i)if(null!=r){e.setState({sending:!0});b.enqueue({type:A.GROUP_DM,channel:r,inviteKey:i,location:s,suggested:e.getSuggestedProps()},(function(n){e.setState({sending:!1,invited:n})}))}else if(null!=t){e.setState({sending:!0});b.enqueue({type:A.USER,user:t,inviteKey:i,location:s,suggested:e.getSuggestedProps()
},(function(n){e.setState({sending:!1,invited:n})}))}};return e}var r=t.prototype;r.shouldComponentUpdate=function(e,n){return this.state.sending!==n.sending||this.state.invited!==n.invited||this.state.hovered!==n.hovered||this.props.user!==e.user||this.props.channel!==e.channel};r.renderUserOrChannel=function(){var e,n,t=this.props,r=t.user,s=t.channel;if(null!=r){e=r.getAvatarURL(null==s?void 0:s.guild_id,32);n=r.username}else if(null!=s){e=(0,w.x)(s);n=(0,V.F6)(s,Oe.default,re.Z)}return null==e||null==n?null:(0,i.jsx)(Be.ZP,{src:e,"aria-label":n,size:Be.u8.SIZE_32,className:Xe().inviteRowAvatar})};r.render=function(){var e,n=this.props,t=n.user,r=n.channel,s=this.state,a=s.sending,o=s.invited,l=s.hovered;e=o?(0,i.jsx)(p.zx,{look:p.zx.Looks.LINK,size:p.zx.Sizes.SMALL,disabled:!0,color:J.Z.theme===se.BRd.DARK?p.zx.Colors.WHITE:p.zx.Colors.BLACK,children:qe.Z.Messages.INVITE_FRIEND_MODAL_SENT}):(0,i.jsx)(p.zx,{color:p.zx.Colors.GREEN,look:l?p.zx.Looks.FILLED:p.zx.Looks.OUTLINED,
className:Xe().inviteRowButton,size:p.zx.Sizes.SMALL,submitting:a,onClick:this.handleClickInvite,children:qe.Z.Messages.INVITE_FRIEND_MODAL_INVITE});return(0,i.jsxs)("div",{className:Xe().inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,i.jsxs)("div",{className:Xe().inviteRowInfo,children:[this.renderUserOrChannel(),(0,i.jsxs)("div",{className:Xe().inviteRowName,children:[He.ZP.getName(t),null!=r?(0,V.F6)(r,Oe.default,re.Z):null]})]}),e]})};return t}(s.Component),xn=function(e){hn(t,e);var n=In(t);function t(){un(this,t);var e;(e=n.apply(this,arguments)).state={focused:!1,copied:!1};e._unsetCopiedState=new g.sW(1e3,(function(){return e.setState({copied:!1})}));e.handleCopy=function(){var n=e.props,t=n.value,r=n.onCopy;e.setState({copied:!0});e._unsetCopiedState.delay();r(t)};return e}var r=t.prototype;r.componentWillUnmount=function(){this._unsetCopiedState.cancel()};r.render=function(){
var e,n=this,t=this.props,r=t.value,s=t.autoFocus,a=t.hideValue,l=this.state,u=l.focused,c=l.copied;return(0,i.jsxs)("div",{className:o()(Qe().input,en().flexJustifyBetween,en().flexCenter,(e={},cn(e,Qe().success,c),cn(e,Qe().focused,u),e)),children:[(0,i.jsx)(p.oi,{className:Xe().copyInput,name:"invite",value:a?qe.Z.Messages.INSTANT_INVITE_HIDDEN:r,editable:!1,inputClassName:Xe().noBorder,autoFocus:s,onFocus:function(){return s?n.setState({focused:!0}):null},onBlur:function(){return s?n.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()},"aria-label":qe.Z.Messages.FORM_LABEL_INVITE_LINK}),ke.wS?(0,i.jsx)(p.zx,{size:p.zx.Sizes.SMALL,color:c?p.zx.Colors.GREEN:p.zx.Colors.BRAND,className:Xe().copyButton,onClick:this.handleCopy,children:c?qe.Z.Messages.INVITE_COPIED:qe.Z.Messages.COPY}):null]})};return t}(s.PureComponent);function Tn(e){var n=e.guild,t=e.error,r=e.onClose,a=n.id,o=s.useCallback((function(){r()
;z.Z.open(a,se.pNK.INSTANT_INVITES)}),[a,r]),l=s.useCallback((function(e){return(0,i.jsx)(p.P3,{className:Xe().errorLink,onClick:o,children:(0,i.jsx)(p.xv,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})})}),[o]),u=s.useCallback((function(e){return(0,i.jsx)(p.ee,{href:se.EYA.INVITES_HELP,target:"_blank",children:(0,i.jsx)(p.xv,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})})}),[]);return t.code===se.evJ.TOO_MANY_INVITES?Te.Z.can(se.Plq.MANAGE_GUILD,n)?(0,i.jsx)(p.xv,{className:Xe().errorMessage,variant:"text-xs/normal",color:"text-danger",children:qe.Z.Messages.TOO_MANY_INVITES_ERROR.format({inviteListHook:l,inviteHelpHook:u})}):(0,i.jsx)(p.xv,{className:Xe().errorMessage,variant:"text-xs/normal",color:"text-danger",children:qe.Z.Messages.TOO_MANY_INVITES_ERROR_MEMBER}):(0,i.jsx)(p.xv,{className:Xe().errorMessage,variant:"text-xs/normal",color:"text-danger",children:t.getAnyErrorMessage()})}var Mn=f.ZP.connectStores([Ae.Z],(function(){return{
hideValue:Ae.Z.hideInstantInvites}}))(xn),Cn=function(e){hn(t,e);var n=In(t);function t(e){un(this,t);var s;(s=n.call(this,e))._scroller=null;s._headerId=d().uniqueId();s.handleGenerateNewLink=function(){var e=s.props,n=e.inviteChannel,t=e.source,r=e.canShowVanityURL,i=s.state,a=i.maxAge,o=i.maxUses,l=i.temporary,u=i.savedMaxAge,c=i.flags,d=null==n?void 0:n.id;if(0===o&&0===a&&!l&&r)s.setState({networkError:void 0,showVanityURL:!0});else if(null!=d){s.setState({networkError:void 0,showVanityURL:!1});v.Z.createInvite(d,{max_age:a,max_uses:o,temporary:l,flags:c},t).catch((function(e){return s.setState({networkError:e,showVanityURL:r})}))}a===mn.value||u===mn.value?s.setState({settingsOpen:!1}):s.setState({settingsOpen:!1,savedMaxAge:mn.value})};s.handleCopy=function(e){var n=s.props,t=n.inviteChannel,r=n.source,i=n.code,a=n.guildScheduledEvent;(0,ke.JG)(e);Ge.default.track(se.rMx.COPY_INSTANT_INVITE,{server:Re.Z.getGuildId(),channel:null==t?void 0:t.id,channel_type:null==t?void 0:t.type,
location:r,code:i,guild_scheduled_event_id:null==a?void 0:a.id})};s.openSettings=function(){s.setState({settingsOpen:!0})};s.handleSelectMaxAge=function(e){s.setState({maxAge:e,savedMaxAge:s.state.maxAge})};s.handleSelectMaxUses=function(e){s.setState({maxUses:e})};s.handleToggleTemporary=function(e,n){s.setState({temporary:e},n)};s.handleToggleGuest=function(e,n){var t=s.state.flags;s.setState({flags:(0,Fe.mB)(t,r.IS_GUEST_INVITE,e)},n)};s.handleQueryChange=function(e){var n;null===(n=s._scroller)||void 0===n||n.scrollTo({to:0});!function(e){I.Z.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})}(e);s.setState({query:e})};s.handleClearSearch=function(){s.handleQueryChange("")};s.handleToggleMaxAge=function(){s.setState({maxAge:s.state.savedMaxAge,savedMaxAge:s.state.maxAge},s.handleGenerateNewLink)};s.handleDone=function(){var e=s.props,n=e.onDone,t=e.onClose;s.state.settingsOpen?s.setState({settingsOpen:!1}):t();null==n||n()};s.getRowHeight=function(e,n){if(e>0)return 0
;switch(s.props.rows[n].type){case te.bm.GROUP_DM:case te.bm.DM:case te.bm.FRIEND:return 44;default:return 0}};s.renderRow=function(e){var n=e.section,t=e.row;if(n>0)return null;var r=s.props.analyticsLocation,a=s.getInviteKey(),o=s.props.rows[t],l="".concat(o.type,"-").concat(o.item.id);switch(o.type){case te.bm.GROUP_DM:return(0,i.jsx)(Sn,{row:o,channel:o.item,inviteKey:a,location:r},l);case te.bm.DM:case te.bm.FRIEND:return(0,i.jsx)(Sn,{row:o,user:o.item,inviteKey:a,location:r},l);default:return null}};var a=e.maxAge,o=e.maxUses,l=e.temporary,u=e.flags,c=e.forceSettings,h=e.guild,f=e.canShowVanityURL,g=h.hasFeature(se.oNc.HUB)?mn:yn;s.state={query:"",settingsOpen:!0===c,maxAge:null!=a?a:g.value,savedMaxAge:a===mn.value?g.value:mn.value,maxUses:null!=o&&0!==o?o:Nn.value,temporary:null!=l&&l,networkError:void 0,showVanityURL:f,flags:null!=u?u:0};return s}var a=t.prototype;a.componentDidMount=function(){
var e=this,n=this.props,t=n.inviteChannel,r=n.code,i=n.guild,s=n.source,a=n.canCreateInvites,o=n.analyticsLocation,l=n.streamUserId,u=n.targetType,c=n.targetUserId,d=n.applicationId,h=n.initialCounts,f=n.rows,g=n.showFriends,p=this.state,I=p.maxAge,E=p.maxUses,_=p.temporary;if(a){var m=null==t?void 0:t.id;if(null==m)return;this.setState({networkError:void 0});v.Z.createInvite(m,{validate:null!=r?r:null,max_age:I,max_uses:E,target_user_id:c,target_type:u,target_application_id:d,temporary:_},s).catch((function(n){return e.setState({networkError:n})}))}g&&Ge.default.track(se.rMx.INVITE_SUGGESTION_OPENED,{location:s,num_suggestions:f.length,num_friends:h.numFriends,num_dms:h.numDms,num_group_dms:h.numGroupDms,guild_id:i.id});q.trackExposure({guildId:null==i?void 0:i.id});if(null!=l){var y=Q.Z.getStreamForUser(l,i.id),N=(0,P.L2)(y,Me.Z);Ge.default.track(se.rMx.OPEN_MODAL,{type:"Send Stream Invite",source:s,location:o,other_user_id:l,application_id:null!=N?N.id:null,
application_name:null!=N?N.name:null,game_id:null!=N?N.id:null})}else null!=d||Ge.default.track(se.rMx.OPEN_MODAL,{type:"Instant Invite Modal",source:s,location:o})};a.getInviteKey=function(){var e=this.props,n=e.code,t=e.vanityURLCode,r=e.guildScheduledEvent,i=this.state.showVanityURL?t:null!=n?n:t;return null==i?i:(0,K.tV)({baseCode:i,guildScheduledEventId:null==r?void 0:r.id})};a.renderChannelWarning=function(){var e=this.props.inviteChannel;return(0,j.Z)(e)?(0,i.jsxs)("div",{className:Xe().warningContainer,children:[(0,i.jsx)(De.Z,{className:Xe().warningIcon,color:(0,D.Lq)(se.Ilk.YELLOW_300),width:12}),(0,i.jsx)(p.xv,{variant:"text-xs/normal",color:"header-secondary",children:qe.Z.Messages.INVITE_PRIVATE_CHANNEL_WARNING})]}):null};a.renderTemporaryMembershipToggle=function(){var e=this,n=this.props,t=n.temporaryMembershipIncreasedVisibility,s=n.isGuestInviteCreationEnabled,a=this.state,o=a.temporary,l=a.flags;return s?(0,i.jsx)("div",{
className:Xe().temporaryMembershipContainerBackground,children:(0,i.jsx)(p.j7,{className:Xe().temporaryMembershipContainer,value:(0,Fe.yE)(l,r.IS_GUEST_INVITE),onChange:function(n){return e.handleToggleGuest(n,e.handleGenerateNewLink)},note:qe.Z.Messages.GUEST_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:qe.Z.Messages.GRANT_GUEST_MEMBERSHIP})}):t?(0,i.jsx)("div",{className:Xe().temporaryMembershipContainerBackground,children:(0,i.jsx)(p.j7,{className:Xe().temporaryMembershipContainer,value:o,onChange:function(n){return e.handleToggleTemporary(n,e.handleGenerateNewLink)},note:qe.Z.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:qe.Z.Messages.GRANT_TEMPORARY_MEMBERSHIP})}):null};a.renderCopyInput=function(){var e,n=this.props,t=n.guild,r=n.noInvitesAvailable,a=n.showFriends,l=n.onClose,u=this.state,c=u.maxAge,d=u.maxUses,h=u.networkError,f=u.showVanityURL,g=(0,W.Z)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");return(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(Mn,{
value:g,autoFocus:a,onCopy:this.handleCopy}),this.renderTemporaryMembershipToggle(),r||f?null:(0,i.jsxs)(p.xv,{variant:"text-xs/normal",className:o()(tn().marginTop8,Xe().footerText),children:[(0,te.Vg)(c,d)," ",a?(0,i.jsx)(p.ee,{onClick:this.openSettings,children:qe.Z.Messages.INVITE_EDIT_LINK}):null]}),!r&&a&&f?(0,i.jsxs)(p.xv,{variant:"text-xs/normal",className:o()(tn().marginTop8,Xe().footerText),children:[qe.Z.Messages.INVITE_VANITY_USED," ",(0,i.jsx)(p.ee,{onClick:this.openSettings,children:qe.Z.Messages.INVITE_EDIT_LINK})]}):null,null!=h?(0,i.jsx)(Tn,{guild:t,error:h,onClose:l}):null]})};a.renderHeader=function(){var e,n=this.props,t=n.guild,r=n.showFriends,s=n.guildScheduledEvent,a=n.streamUserId,l=n.applicationId,u=n.welcomeToServer,c=n.inviteChannel,d=this.state,h=d.query,f=d.settingsOpen,g=null,v=null
;e=u?null:null!=a?qe.Z.Messages.INVITE_STREAM_HEADER:null!=l?qe.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_TO_ACTIVITY:null!=s?qe.Z.Messages.GUILD_EVENT_INVITE_MODAL_TITLE:(null==c?void 0:c.isGuildStageVoice())?qe.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_HEADER:qe.Z.Messages.INVITE_TO_SERVER_NAME.format({name:t.toString()});if(null!=c){var I=(0,U.KS)(c,t);null!=I&&(v=(0,i.jsxs)("div",{className:Xe().headerChannelContainer,children:[(0,i.jsx)(I,{className:Xe().channelIcon}),(0,i.jsx)(p.xv,{color:"interactive-normal",variant:"text-md/normal",children:c.name})]}))}g=f?(0,i.jsx)(p.vw,{id:this._headerId,tag:"h2",className:o()(tn().marginReset,Xe().headerCloseButtonSpacing,Xe().headerText),children:qe.Z.Messages.INVITE_SETTINGS_TITLE}):t.hasFeature(se.oNc.HUB)?(0,i.jsxs)("div",{className:Xe().hubHeader,children:[(0,i.jsx)(p.X6,{className:o()(Xe().hubInviteTitle,Xe().headerCloseButtonSpacing),id:this._headerId,variant:"heading-xl/semibold",color:"header-primary",
children:qe.Z.Messages.HUB_INVITE_HEADER}),(0,i.jsx)(p.xv,{color:"header-secondary",variant:"text-md/normal",children:qe.Z.Messages.HUB_INVITE_SUBHEADER}),r&&(0,i.jsx)(we.Z,{query:h,className:Xe().hubFriendSearch,onChange:this.handleQueryChange,placeholder:qe.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,"aria-label":qe.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})]}):r?(0,i.jsxs)("div",{className:Xe().header,children:[(0,i.jsx)(p.vw,{id:this._headerId,tag:"h2",className:o()(tn().marginBottom4,Xe().headerCloseButtonSpacing,Xe().headerText),children:e}),v,(0,i.jsx)(we.Z,{query:h,className:Xe().searchBar,onChange:this.handleQueryChange,placeholder:qe.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch}),(0,i.jsx)("div",{className:tn().marginTop8,children:this.renderChannelWarning()})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.vw,{id:this._headerId,tag:"h2",
className:o()(tn().marginReset,Xe().headerCloseButtonSpacing,Xe().headerText),children:e}),v,this.renderChannelWarning()]});return(0,i.jsxs)(Pe.xB,{separator:r&&!f,children:[(0,i.jsx)(Pe.ol,{className:Xe().closeButton,onClick:this.handleDone}),(0,i.jsxs)("div",{className:Xe().headerContainer,children:[u&&!f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:Xe().welcomeImage,src:on(),alt:""}),(0,i.jsx)(p.H,{className:Xe().welcomeHeading,children:qe.Z.Messages.INVITE_WELCOME_HEADING}),(0,i.jsx)("p",{className:Xe().welcomeSubheading,children:qe.Z.Messages.INVITE_WELCOME_SUBHEADING})]}),null!=a?(0,i.jsx)(B.Z,{}):null,g]})]})};a.renderSettingsBody=function(){var e=this,n=this.props.temporaryMembershipIncreasedVisibility,t=this.state,r=t.maxAge,s=t.maxUses,a=t.temporary,l=En.find((function(e){return e.value===r})),u=_n.find((function(e){return e.value===s}));return(0,i.jsx)(Pe.hz,{className:Xe().settingsContent,children:(0,i.jsxs)("form",{onSubmit:this.handleGenerateNewLink,
children:[(0,i.jsx)(p.xJ,{title:qe.Z.Messages.EXPIRE_AFTER,className:tn().marginTop20,children:(0,i.jsx)(p.q4,{value:null==l?void 0:l.value,options:En,onChange:this.handleSelectMaxAge})}),(0,i.jsx)(p.xJ,{title:qe.Z.Messages.MAX_NUMBER_OF_USES,className:o()(tn().marginTop20,tn().marginBottom4),children:(0,i.jsx)(p.q4,{value:null==u?void 0:u.value,options:_n,onChange:this.handleSelectMaxUses})}),n?(0,i.jsx)("div",{className:tn().marginTop20}):(0,i.jsx)(p.xJ,{className:o()(tn().marginTop20,Xe().switch),children:(0,i.jsx)(p.j7,{value:a,onChange:function(n){return e.handleToggleTemporary(n)},note:qe.Z.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:(0,i.jsx)(p.xv,{variant:"text-sm/normal",children:qe.Z.Messages.GRANT_TEMPORARY_MEMBERSHIP})})})]})})};a.renderFriendsBody=function(){var e=this.props.rows,n=this.getInviteKey();return 0===e.length?(0,i.jsx)(Pe.hz,{className:o()(tn().marginBottom20,tn().marginTop20),children:(0,i.jsx)(Ze.OZ,{
children:qe.Z.Messages.INVITE_FRIEND_MODAL_NO_RESULTS})}):null==n?(0,i.jsx)(Pe.hz,{className:o()(tn().marginBottom20,tn().marginTop20),children:(0,i.jsx)(Ze.OZ,{children:qe.Z.Messages.INVITE_FRIEND_MODAL_LOADING})}):(0,i.jsx)(Pe.YA,{className:Xe().scroller,sections:[e.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})};a.renderSection=function(){return null};a.renderBody=function(){var e=this.props,n=e.guild,t=e.showFriends,r=e.streamUserId,s=e.applicationId;if(this.state.settingsOpen)return this.renderSettingsBody();if(t)return this.renderFriendsBody();var a=Oe.default.getCurrentUser();u()(null!=a,"InstantInviteModal: user cannot be undefined");var o=n.isOwner(a)?qe.Z.Messages.INVITE_SHARE_LINK_OWN_SERVER:qe.Z.Messages.SHARE_INVITE_LINK_FOR_ACCESS;null!=r?o=qe.Z.Messages.INVITE_SHARE_LINK_TO_STREAM:null!=s&&(o=qe.Z.Messages.EMBEDDED_ACTIVITIES_SHARE_LINK_TO_ACTIVITY);return(0,i.jsx)(Pe.hz,{
className:Xe().noScroll,children:(0,i.jsxs)(Le.Z,{direction:Le.Z.Direction.VERTICAL,className:tn().marginBottom20,children:[(0,i.jsx)(p.xv,{className:Xe().subText,variant:"text-sm/normal",children:o}),this.renderCopyInput()]})})};a.renderFooter=function(){var e,n=this,t=this.props,r=t.noInvitesAvailable,a=t.showFriends,l=t.guildScheduledEvent,u=t.streamUserId,c=t.applicationId,d=t.inviteChannel,h=this.state,f=h.settingsOpen,g=h.maxAge,v=J.Z.theme,I=null,E=this.renderBannerUpsell();if(f)I=(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(p.zx,{onClick:this.handleGenerateNewLink,children:qe.Z.Messages.GENERATE_A_NEW_LINK}),(0,i.jsx)(p.zx,{look:p.zx.Looks.LINK,color:v===se.BRd.LIGHT?p.zx.Colors.PRIMARY:p.zx.Colors.WHITE,onClick:this.handleDone,children:qe.Z.Messages.CANCEL})]});else if(a){var _=qe.Z.Messages.INVITE_FOOTER_LINK_HEADER
;null!=u?_=qe.Z.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:null!=c?_=qe.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_ACTIVITY_FOOTER_LINK_HEADER:null!=l?_=qe.Z.Messages.GUILD_EVENT_INVITE_MODAL_FOOTER:(null==d?void 0:d.isGuildStageVoice())&&(_=qe.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_FOOTER);I=(0,i.jsxs)(Le.Z,{direction:Le.Z.Direction.VERTICAL,className:Xe().content,children:[(0,i.jsx)(p.vw,{tag:"h5",className:tn().marginBottom8,children:_}),this.renderCopyInput(),E]})}else r||(I=(0,i.jsxs)(Le.Z,{justify:Le.Z.Justify.BETWEEN,className:tn().marginTop20,children:[(0,i.jsx)(p.XZ,{size:18,type:p.XZ.Types.INVERTED,value:g===mn.value,onChange:this.handleToggleMaxAge,children:(0,i.jsx)(p.xv,{className:Xe().checkBoxLabel,variant:"text-sm/normal",children:qe.Z.Messages.SET_INVITE_LINK_NEVER_EXPIRE})}),(0,i.jsx)(je.ZP,{text:qe.Z.Messages.LINK_SETTINGS,children:function(e){var t=e.onMouseEnter,r=e.onMouseLeave;return(0,i.jsx)(p.P3,{onClick:n.openSettings,onMouseEnter:t,onMouseLeave:r,
className:sn().cursorPointer,children:(0,i.jsx)(Ve.Z,{width:18,height:18,color:(0,D.Lq)(se.Ilk.PRIMARY_400)})})}})]}));return null!=I?(0,i.jsx)(Pe.mz,{className:f?Xe().settingsFooter:o()((e={},cn(e,Xe().noPadding,!a),cn(e,Xe().footer,a),e)),children:I}):null};a.renderBannerUpsell=function(){var e=this.props,n=e.guild,t=e.analyticsLocations;return(null==n?void 0:n.hasFeature(se.oNc.INVITE_SPLASH))?null:(0,i.jsxs)(Le.Z,{align:Le.Z.Align.CENTER,className:Xe().inviteBannerUpsell,children:[(0,i.jsx)(Ue.Z,{className:Xe().premiumIcon}),(0,i.jsx)(p.xv,{variant:"text-sm/normal",children:qe.Z.Messages.INVITE_FRIEND_MODAL_BOOSTING_UPSELL}),(0,i.jsx)(p.ee,{className:Xe().inviteLink,onClick:function(){return(0,H.Z)({analyticsLocations:t,analyticsSourceLocation:{section:se.jXE.INVITE_LINK,object:se.qAy.LEARN_MORE},guild:n,perks:(0,Ke.il)(),upsellType:Ke.Cg.GUILD_BANNER_INVITE})},children:qe.Z.Messages.LEARN_MORE})]})};a.render=function(){
var e=this.props,n=e.transitionState,t=e.inviteChannel,r=e.guild;return(0,i.jsx)("div",{className:this.props.showFriends?Xe().wrapper:void 0,children:(0,i.jsxs)(Pe.Y0,{impressionName:h.zs.GUILD_INVITE,impressionProperties:{invite_channel_id:null==t?void 0:t.id,invite_guild_id:r.id},"aria-labelledby":this._headerId,transitionState:n,className:Xe().modal,children:[this.renderHeader(),this.renderBody(),this.renderFooter()]})})};return t}(s.PureComponent);Cn.defaultProps={analyticsLocation:se.Sbl.GUILD_CREATE_INVITE_SUGGESTION};const Rn=s.forwardRef((function(e,n){var t=e.channel,r=e.guild,a=e.source,o=e.guildScheduledEvent,l=e.streamUserId,u=e.applicationId,c=e.transitionState,d=e.onClose,h=e.welcomeToServer,g=e.forceSettings,p=e.analyticsLocation,v=(0,L.Z)(Z.Z.INSTANT_INVITE_MODAL),_=v.AnalyticsLocationProvider,m=v.analyticsLocations,y=(0,f.e7)([Ce.Z,N.Z,ee.ZP],(function(){if(null!=t)return t;var e=Ce.Z.getChannelId(),n=null==e||(0,ze.AB)(e)?void 0:N.Z.getChannel(e)
;(null==n?void 0:n.isThread())&&(n=N.Z.getChannel(n.parent_id));return null!=n?n:ee.ZP.getDefaultChannel(r.id)}),[t,r.id]),S=null;null!=l?S=Ye.Iq.STREAM:null!=u&&(S=Ye.Iq.EMBEDDED_APPLICATION);var x=l,T=u,M=null!=t?t.getGuildId():null!=r?r.id:null,C=(0,f.e7)([ne.Z],(function(){var e=null!=y?y.id:null;return null==e?null:ne.Z.getInvite(e,{targetType:S,targetUserId:x,targetApplicationId:T})}),[y,S,x,T]),R=pn((0,f.Wu)([xe,be.ZP,$.ZP],(function(){var e=null!=y?y.id:null;return[xe.getInviteSuggestionRows(),xe.getTotalSuggestionsCount()>=1,xe.getInitialCounts(),null!=t&&null!=y?be.ZP.getVoiceStatesForChannel(y):null,null!=M?$.ZP.getProps(M,e):null]}),[y,S,x,M]),5),A=R[0],O=R[1],b=R[2],w=R[3],j=R[4],V=(0,f.e7)([Te.Z],(function(){return null!=y&&Te.Z.can(se.Plq.CREATE_INSTANT_INVITE,y)}),[y]),U=null===C||!V,D=pn(s.useState((function(){var e=new Set;null!=l&&null!=w?w.forEach((function(n){var t=n.user;e.add(t.id)})):null!=M&&null!=j&&j.rows.forEach((function(n){
n.type===$.so.MEMBER&&e.add(n.userId)}));return e})),1),P=D[0],B=null==t?void 0:t.id,G=(0,f.e7)([X.Z],(function(){return X.Z.getStageInstanceByChannel(B)}),[B]);s.useEffect((function(){(function(e,n,t){return(0,E.W)().then((function(){I.Z.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=e?e:new Set,guild:n,channel:t})}))})(P,r,t).catch(se.VqG)}),[P,t,r]);var H,z,K,q=null!=C?C.code:void 0,W=null!=C?C.maxAge:void 0,J=null!=C?C.maxUses:void 0,Q=null!=C?C.temporary:void 0,te=null!=C?C.flags:void 0,re=r.vanityURLCode,ie=null!=re&&re.length>0,ae=Y.Z.useExperiment({guildId:null!==(K=null!==(z=null!==(H=r.id)&&void 0!==H?H:null==C?void 0:C.guild.id)&&void 0!==z?z:M)&&void 0!==K?K:""},{autoTrackExposure:ie}).enabled&&!(null==y?void 0:y.isGuildVocal())&&ie,oe=(null==y?void 0:y.type)===se.d4z.GUILD_VOICE;V||null==(null==G?void 0:G.invite_code)||(q=G.invite_code);var le=oe&&!ae&&!U,ue=k.useExperiment({guildId:null==r?void 0:r.id},{autoTrackExposure:le
}).enabled,ce=!ue&&!ae&&!U,de=F.useExperiment({guildId:null==r?void 0:r.id},{autoTrackExposure:ce}).enabled;return(0,i.jsx)(_,{children:(0,i.jsx)(Cn,{ref:n,canCreateInvites:V,noInvitesAvailable:U,inviteChannel:y,guild:r,guildScheduledEvent:o,streamUserId:l,vanityURLCode:re,targetType:S,targetUserId:x,applicationId:u,rows:A,showFriends:O,initialCounts:b,code:q,maxAge:W,maxUses:J,temporary:Q,flags:te,source:a,welcomeToServer:h,forceSettings:g,analyticsLocations:m,analyticsLocation:p,transitionState:c,onClose:d,canShowVanityURL:ae,temporaryMembershipIncreasedVisibility:de&&ce,isGuestInviteCreationEnabled:ue&&le})})}))},190422:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(667294),i=t(953143),s=t(742269),a=t(959797);function o(){r.useEffect((function(){s.FB||(0,i.EM)({messages:[a.Z.Messages.GO_LIVE_HEY,a.Z.Messages.GO_LIVE_LOOK,a.Z.Messages.GO_LIVE_LISTEN],interval:600,count:20,onlyWhenBlurred:!0})}),[]);return null}},272889:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});const r=(0,
t(553494).B)({kind:"guild",id:"2022-11_default_to_server_vanity_v2",label:"Default To Server Vanity v2",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})}}]);
//# sourceMappingURL=e554fdbd1624efd89d11.js.map