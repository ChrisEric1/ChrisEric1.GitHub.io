(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[76169],{757044:(e,t,r)=>{e.exports=r.p+"ec41899e6dd79783a4d7094b5a8225da.png"},620212:(e,t,r)=>{e.exports=r.p+"dc65b0e36248cc9ca5c880caa2abd8c5.png"},700193:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(785893),o=(r(667294),r(336194)),i=r(633878);function a(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function s(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{}
;var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function l(e){var t=e.width,r=void 0===t?24:t,l=e.height,c=void 0===l?24:l,f=e.color,d=void 0===f?o.Z.unsafe_rawColors.WHITE_500.css:f,y=e.backgroundColor,m=void 0===y?o.Z.unsafe_rawColors.BRAND_500.css:y,O=u(e,["width","height","color","backgroundColor"]);return(0,n.jsxs)("svg",s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){a(e,t,r[t])}))}return e}({},(0,i.Z)(O)),{width:r,height:c,viewBox:"0 0 14 14",children:[(0,n.jsx)("path",{fill:m,
d:"M7.02799 0.333252C3.346 0.333252 0.361328 3.31792 0.361328 6.99992C0.361328 10.6819 3.346 13.6666 7.02799 13.6666C10.71 13.6666 13.6947 10.6819 13.6947 6.99992C13.6947 3.31792 10.7093 0.333252 7.02799 0.333252ZM10.166"}),(0,n.jsx)("path",{d:"M6.5,10.3L3.4,8l0.9-1.2l1.8,1.4l3.3-4.3l1.2,0.9L6.5,10.3z",fill:d})]}))}},476169:(e,t,r)=>{"use strict";r.r(t);r.d(t,{default:()=>It});var n=r(785893),o=r(667294),i=r(441143),a=r.n(i),s=r(999357),u=r(318715),l=r(945460),c=r(285991),f=r(579194),d=r(539381),y=r(736626),m=r(473903),O=r(189865),p=r(652591),h=r(749565),b=r(281110),E=r(744564),g=r(347365),v=r(571690),_=r(801809),S=r(260561),I=(0,S.B)({kind:"user",label:"Pomelo Attempt",id:"2023-04_pomelo_attempt",defaultConfig:{enabled:!1},treatments:[{id:1,label:"enabled",config:{enabled:!0}}]}),P=function(){return I.getCurrentConfig({},{autoTrackExposure:!1}).enabled},T=(0,S.B)({kind:"user",label:"Pomelo Suggestions",id:"2023-04_pomelo_suggestions",defaultConfig:{enabled:!1},treatments:[{id:1,
label:"enabled",config:{enabled:!0}}]}),j=r(2590),M=r(473708),N=r(5387),x=r.n(N),L=r(202351);function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return C(e)}function R(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){A=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return A(e,t)}var D=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){
var r,n=C(e);if(t){var o=C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}var k={taken:null,error:void 0,rateLimited:!0},W={validations:new(x())({max:100,maxAge:6e4}),suggestions:{username:void 0},suggestionsFetched:!1,retryAfterTime:null};var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&A(e,t)}(r,e);var t=Z(r);function r(){w(this,r);return t.apply(this,arguments)}var n=r.prototype;n.isRateLimited=function(){return null!=W.retryAfterTime&&Date.now()<W.retryAfterTime};n.validate=function(e){var t=W.validations.get(e);return this.isRateLimited()&&(null==t||t.rateLimited)?k:this.isRateLimited()||null==t||!t.rateLimited?t:void 0};n.usernameSuggestion=function(){return W.suggestions.username};n.wasSuggestionsFetched=function(){
return W.suggestionsFetched};n.__getLocalVars=function(){return{TTL:6e4,RATE_LIMITED_VALIDATION:k,state:W}};return r}(L.ZP.Store);F.displayName="PomeloStore";const U=new F(E.Z,{POMELO_ATTEMPT_SUCCESS:function(e){var t=e.username,r=e.taken;W.validations.set(t,{taken:r})},POMELO_ATTEMPT_FAILURE:function(e){var t=e.username,r=e.error,n=e.statusCode,o=e.retryAfter;429===n?W.validations.set(t,{taken:null,error:r,rateLimited:!0},1e3*(null!=o?o:7)):W.validations.set(t,{taken:null,error:r});null!=o&&(W.retryAfterTime=Date.now()+1e3*o)},POMELO_SUGGESTIONS_RESET:function(){W.suggestions={username:void 0};W.suggestionsFetched=!1},POMELO_SUGGESTIONS_SUCCESS:function(e){var t=e.suggestions;W.suggestions=t;W.suggestionsFetched=!0}});function B(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){r(e);return}s.done?t(u):Promise.resolve(u).then(n,o)}function G(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){B(i,n,o,a,s,"next",e)}
function s(e){B(i,n,o,a,s,"throw",e)}a(void 0)}))}}function q(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){q(e,t,r[t])}))}return e}var V=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;(n=0,o)&&(i=[2&i[0],o.value])
;switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;n=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function X(e){return!1===/^[A-Za-z0-9_.]*$/.test(e)?M.Z.Messages.POMELO_EXISTING_FLOW_ERROR_INVALID:e.includes("..")?M.Z.Messages.POMELO_EXISTING_FLOW_ERROR_DOT_DOT:e.length<2||e.length>32?M.Z.Messages.POMELO_EXISTING_FLOW_ERROR_LIMIT.format({maxNum:32,minNum:2}):void 0}const z=function(){return E.Z.dispatch({type:"POMELO_SUGGESTIONS_RESET"})},Y=function(){return G((function(){var e,t;return V(this,(function(r){
switch(r.label){case 0:if(!T.getCurrentConfig({},{autoTrackExposure:!1}).enabled)return[2];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,b.Z.get({url:j.ANM.POMELO_SUGGESTIONS})];case 2:return(t=r.sent()).ok&&null!=(null===(e=t.body)||void 0===e?void 0:e.username)?[2,E.Z.dispatch({type:"POMELO_SUGGESTIONS_SUCCESS",suggestions:t.body})]:[3,4];case 3:r.sent();return[2];case 4:return[2]}}))}))()},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal";return G((function(){var r,n,o,i,a,u;return V(this,(function(l){switch(l.label){case 0:if(null!=(r=X(e))){p.default.track(j.rMx.POMELO_ERRORS,{reason:r,username_error:!0,location:t});return[2,E.Z.dispatch({type:"POMELO_ATTEMPT_FAILURE",username:e,error:r})]}if(!P())return[2];l.label=1;case 1:l.trys.push([1,3,,4]);return[4,_.Z.post({url:j.ANM.POMELO_ATTEMPT,body:{username:e},trackedActionData:{event:s.a9.POMELO_ATTEMPT,properties:{requested_username:e}}})];case 2:n=l.sent();E.Z.dispatch({
type:"POMELO_ATTEMPT_SUCCESS",username:e,taken:n.body.taken});return[3,4];case 3:o=l.sent();i=new g.Hx(o);u=null!==(a=i.getAnyErrorMessage())&&void 0!==a?a:void 0;p.default.track(j.rMx.POMELO_ERRORS,{reason:u,username_error:!0,location:t});E.Z.dispatch({username:e,type:"POMELO_ATTEMPT_FAILURE",error:null!=i.status&&i.status<500?u:void 0,statusCode:i.status,retryAfter:i.retryAfter});return[3,4];case 4:return[2]}}))}))()},$=function(e){return G((function(){var t;return V(this,(function(r){switch(r.label){case 0:return[4,(0,v.withCaptchaInterceptor)((function(t){return _.Z.post({body:H({},e,t),url:j.ANM.POMELO_CREATE,trackedActionData:{event:s.a9.POMELO_CREATE}})}))];case 1:t=r.sent();E.Z.dispatch({type:"CURRENT_USER_UPDATE",user:t.body});return[2,t.body]}}))}))()};var Q=r(730381),J=r.n(Q),ee=r(775173),te=r(102921),re=r(421281),ne=r(705090);function oe(e){var t=(0,re._I)(e.username).replace(ne.RN,"").replace(ne.iF,".").toLowerCase()
;return"".concat(t).concat(e.discriminator).substring(0,32)}var ie=["@","#",":"],ae=["```","discord","hypesquad","system message","system mesage","sustem message","sustem mesage","clyde"],se=["discordtag","everyone","here","discord nitro","discord","snowsgiving"];function ue(e){var t=e.username.toLowerCase(),r=!0,n=!1,o=void 0;try{for(var i,a=ie[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;if(t.includes(s))return!0}}catch(e){n=!0;o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}var u=!0,l=!1,c=void 0;try{for(var f,d=se[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){if(t===f.value.toLowerCase())return!0}}catch(e){l=!0;c=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}var y=!0,m=!1,O=void 0;try{for(var p,h=ae[Symbol.iterator]();!(y=(p=h.next()).done);y=!0){var b=p.value;if(t.includes(b.toLowerCase()))return!0}}catch(e){m=!0;O=e}finally{try{y||null==h.return||h.return()}finally{if(m)throw O}}return!1}function le(e){
return e.toLowerCase().replace(/\s/g,"").replace("@","")}function ce(e){var t=te.Z.extractTimestamp(e);try{return J()(new Date(t)).format("MMM DD, YYYY")}catch(e){}return null}var fe=r(248088),de=r(734691),ye=r(679741),me=r(294184),Oe=r.n(me),pe=r(316878),he=r(255875),be=r(76834),Ee=r(239639),ge=r(611345),ve=r(336194),_e=r(700193),Se=r(127661),Ie=r(572765),Pe=r.n(Ie);function Te(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}var je=function(){return(0,n.jsx)(_e.Z,{width:13,height:13,backgroundColor:ve.Z.colors.TEXT_POSITIVE.css})},Me=function(){return(0,n.jsx)(Se.Z,{width:13,height:13,color:ve.Z.colors.TEXT_DANGER.css})},Ne=function(){return(0,n.jsx)(Se.Z,{width:13,height:13,color:ve.Z.colors.TEXT_WARNING.css})};function xe(e){var t,r=(0,ge.EQ)(e.type).with("info",(function(){return(0,n.jsx)(Ne,{})})).with("error",(function(){return(0,n.jsx)(Me,{})})).with("success",(function(){return(0,n.jsx)(je,{})
})).otherwise((function(){return null}));return(0,n.jsxs)(n.Fragment,{children:[r,(0,n.jsx)(l.Text,{variant:"text-sm/medium",className:Oe()(Pe().formMessage,(t={},Te(t,Pe().formMessageNegative,"error"===e.type),Te(t,Pe().formMessagePositive,"success"===e.type),t)),children:e.children})]})}var Le=r(496486),we=(0,S.B)({kind:"user",label:"Pomelo Debounce Delay",id:"2023-03_pomelo_debounce_delay",defaultConfig:{delay:600},treatments:[{id:1,label:"600ms",config:{delay:600}},{id:2,label:"700ms",config:{delay:700}},{id:3,label:"800ms",config:{delay:800}},{id:4,label:"900ms",config:{delay:900}},{id:5,label:"1000ms",config:{delay:1e3}}]}),Ce=function(e){var t=(0,u.ZP)([U],(function(){return U.validate(e)}),[e]),r=(0,u.ZP)([U],(function(){return U.isRateLimited()})),n=we.useExperiment({},{autoTrackExposure:!1}).delay,i=o.useMemo((function(){return(0,Le.debounce)((function(e){return K(e)}),n)}),[n]);o.useEffect((function(){r||null!=t||i(e)}),[r,t,e,i]);return t};function Re(e){
var t=Ce(le(e.username));return null==t?null:t.rateLimited?(0,n.jsx)(xe,{type:"info",children:M.Z.Messages.APPLICATION_STORE_LISTING_PURCHASE_RATE_LIMIT_ERROR_SHORT}):null!=t.error?(0,n.jsx)(xe,{type:"error",children:t.error}):!0===t.taken?(0,n.jsx)(xe,{type:"error",children:M.Z.Messages.POMELO_EXISTING_FLOW_ERROR_UNAVAILABLE}):!1===t.taken?(0,n.jsx)(xe,{type:"success",children:M.Z.Messages.POMELO_EXISTING_FLOW_AVAILABLE}):null}var Ae=r(960412),De=r(757044),Ze=r.n(De);function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function We(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function Fe(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Be=o.forwardRef((function(e,t){var r=e.style,o=e.value,i=e.placeholder,a=e.maxLength,s=e.onFocus,u=e.onChange;return(0,n.jsx)(l.TextArea,{className:Oe()(Pe().userCardInput,r),autosize:!0,error:null,showCharacterCount:!1,spellCheck:!1,showRemainingCharacterCount:!1,value:o,placeholder:i,rows:1,maxLength:a,onChange:u,onFocus:s,onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},inputRef:t})}));function Ge(e,t){var r=e.user,i=e.error,a=e.formValues,s=e.displayProfile,c=e.onChangeFormValue,f=e.onFocusDisplayName,d=e.onFocusUsername,y=e.editState,m=e.usernameSuggestion,O=a.username,p=a.globalName,b=o.useRef(null),E=o.useRef(null),g=o.useMemo((function(){return r.merge({discriminator:"0000"})}),[r]),v=Ue((0,fe.useSpring)((function(){return{opacity:0,y:5}})),2),_=v[0],S=v[1];o.useEffect((function(){S({y:0,opacity:1,
from:{y:5,opacity:0}})}),[S,y]);o.useImperativeHandle(t,(function(){return{focusDisplayName:function(){var e,t,r;null===(e=E.current)||void 0===e||e.setSelection(0,null===(t=E.current)||void 0===t?void 0:t.value.length);null===(r=E.current)||void 0===r||r.focus()},focusUsername:function(){var e,t,r;null===(e=b.current)||void 0===e||e.setSelection(0,null===(t=b.current)||void 0===t?void 0:t.value.length);null===(r=b.current)||void 0===r||r.focus()}}}),[]);var I=(0,u.ZP)([pe.Z],(function(){return pe.Z.useReducedMotion})),P=o.useContext(he.E).createMultipleConfettiAt,T=null==s?void 0:s.getLegacyUsername();o.useEffect((function(){if(!I&&y===ne.Wq.PREVIEW&&(r.username.includes(ne.nA)||r.username===m)){var e=setInterval((function(){P(window.innerWidth/2+150,0,{velocity:{type:"static-random",minValue:{x:0,y:-180},maxValue:{x:500,y:180}}},15);P(window.innerWidth/2-150,0,{velocity:{type:"static-random",minValue:{x:-500,y:-180},maxValue:{x:0,y:180}}},15)}),1500);return function(){
return clearInterval(e)}}}),[P,y,r,m,I]);return(0,n.jsxs)("div",{className:Oe()(Pe().userCardContainer,We({},Pe().shinyCard,y===ne.Wq.PREVIEW)),children:[(0,n.jsxs)("div",{className:Pe().profileCard,children:[(0,n.jsx)(be.Z,{displayProfile:s,user:g,allowEdit:!1,guildId:void 0,profileType:Ae.y0.POMELO_POPOUT,showPremiumBadgeUpsell:!1}),(0,n.jsx)(Ee.tZ,{user:g,displayProfile:s,isMobile:!1,status:null,onClose:void 0,disableUserProfileLink:!0,hasBanner:!1,profileType:Ae.y0.POMELO_POPOUT,animateOnHover:!1}),y===ne.Wq.PREVIEW&&null!=T&&(0,n.jsx)("div",{className:Pe().legacyUsernameBadgeContainer,children:(0,n.jsx)(l.Tooltip,{position:"top",text:M.Z.Messages.ORIGINALLY_KNOWN_AS.format({legacyUsername:T}),spacing:12,children:function(e){return(0,n.jsx)(l.Anchor,Fe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){
return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){We(e,t,r[t])}))}return e}({},e),{onClick:e.onClick,children:(0,n.jsx)("img",{className:Pe().legacyUsernameBadge,alt:"",src:Ze()})}))}})})]}),y!==ne.Wq.PREVIEW&&(0,n.jsxs)(fe.animated.div,{style:{opacity:_.opacity,y:_.y},className:Pe().inputContainer,children:[y===ne.Wq.EDIT_DISPLAY_NAME&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Text,{className:Pe().textPadding,color:"text-muted",variant:"text-sm/semibold",children:M.Z.Messages.DISPLAY_NAME}),(0,n.jsx)(Be,{style:Oe()(Pe().displayNameHeight,Pe()["heading-xl/bold"]),value:null!=p?p:"",placeholder:h.ZP.getName(r),maxLength:ne.hy,onChange:function(e){return c({globalName:e})},onFocus:f,ref:E})]}),y===ne.Wq.EDIT_USERNAME&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Text,{className:Pe().textPadding,color:"text-muted",variant:"text-sm/semibold",children:M.Z.Messages.USERNAME}),(0,n.jsx)(Be,{
style:Oe()(Pe().userCardHeight,Pe().lowercaseUsername,Pe()["heading-lg/medium"]),value:null!=O?O:"",placeholder:r.username,maxLength:ne.hy,onChange:function(e){return c({username:e.replace("@","")})},onFocus:d,ref:b})]}),(0,n.jsxs)("div",{className:Pe().messageContainer,children:[null!=i&&(0,n.jsx)(xe,{type:"error",children:i}),null!=e.footerNotice&&(0,n.jsx)(l.Text,{variant:"text-sm/normal",children:e.footerNotice}),null==e.footerNotice&&null==i&&y===ne.Wq.EDIT_USERNAME&&(0,n.jsx)(Re,{username:O})]})]}),y===ne.Wq.PREVIEW&&(0,n.jsxs)("div",{className:Pe().userCard,children:[(0,n.jsx)(l.Heading,{color:"header-primary",variant:"heading-xl/bold",children:h.ZP.getName(r)}),(0,n.jsx)(l.Heading,{color:"text-normal",variant:"heading-lg/medium",children:r.username}),(0,n.jsx)(l.Text,{className:Pe().memberText,color:"text-muted",variant:"text-sm/medium",children:M.Z.Messages.CONNECTIONS_PROFILE_MEMBER_SINCE.format({date:ce(r.id)})})]})]})}const qe=o.forwardRef(Ge);function He(e,t){
(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){Ve(e,t,r[t])}))}return e}function ze(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}
function Ye(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e){var t=e.userRef,r=Ye(e,["userRef"]),i=r.user,a=r.editState,s=r.onClose,u=(0,ye.Z)(i.id),c=function(e,t,r){switch(e){case ne.Wq.EDIT_USERNAME:return{header:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_2_TITLE,subtitle:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_2_SUBTITLE};case ne.Wq.EDIT_DISPLAY_NAME:return{header:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_1_TITLE,subtitle:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_1_SUBTITLE};case ne.Wq.PREVIEW:return{header:M.Z.Messages.POMELO_EXISTING_FLOW_COMPLETION_TITLE.format({displayName:t}),subtitle:M.Z.Messages.POMELO_EXISTING_FLOW_REMINDER_BODY_2.format({onClick:function(){r();de.Z.open(j.oAB.ACCOUNT)}})};default:return{header:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_2_TITLE,
subtitle:M.Z.Messages.POMELO_EXISTING_FLOW_STEP_2_SUBTITLE}}}(a,h.ZP.getName(i),s),f=Ke((0,fe.useSpring)((function(){return{opacity:0,y:10}})),2),d=f[0],y=f[1];o.useEffect((function(){y({y:0,opacity:1,from:{y:10,opacity:0}})}),[y,a]);return(0,n.jsxs)("div",{className:Pe().displayNameContainer,children:[(0,n.jsxs)(fe.animated.div,{style:{opacity:d.opacity,y:d.y},children:[(0,n.jsx)(l.Heading,{className:Pe().title,color:"header-primary",variant:"heading-xl/extrabold",children:c.header}),(0,n.jsx)(l.Heading,{className:Pe().subtitle,color:"header-secondary",variant:"heading-sm/medium",children:c.subtitle})]}),(0,n.jsx)(qe,ze(Xe({},r),{displayProfile:u,ref:t}))]})}function Qe(e){var t=e.onClose;return(0,n.jsxs)("div",{className:Pe().infoContainer,children:[(0,n.jsx)(l.Heading,{className:Pe().finishTitle,color:"header-primary",variant:"heading-xl/bold",children:M.Z.Messages.POMELO_EXISTING_FLOW_REMINDER_TITLE}),(0,n.jsx)(l.Text,{className:Pe().subtitleFinish,color:"header-secondary",
variant:"text-md/medium",children:M.Z.Messages.POMELO_EXISTING_FLOW_REMINDER_BODY_1}),(0,n.jsx)(l.Text,{className:Pe().promptFinish,color:"header-secondary",variant:"text-md/medium",children:M.Z.Messages.POMELO_EXISTING_FLOW_REMINDER_BODY_2.format({onClick:function(){t();de.Z.open(j.oAB.ACCOUNT)}})}),(0,n.jsx)(l.Button,{className:Pe().button,type:"button",size:l.Button.Sizes.SMALL,onClick:t,children:M.Z.Messages.INVITES_DISABLED_CONFIRMATION})]})}var Je=r(491275),et=r(348592),tt=r(633878);function rt(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function nt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){
Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function ot(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function it(e){var t=e.width,r=void 0===t?16:t,o=e.height,i=void 0===o?16:o,a=e.color,s=void 0===a?"currentColor":a,u=e.foreground,l=ot(e,["width","height","color","foreground"]);return(0,n.jsxs)("svg",nt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){rt(e,t,r[t])}))}return e}({},(0,
tt.Z)(l)),{width:r,height:i,viewBox:"0 0 24 24",children:[(0,n.jsx)("g",{clipPath:"url(#clip0_3283_145261)",children:(0,n.jsx)("path",{d:"M3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3H5C3.89 3 3 3.9 3 5ZM15 9C15 10.66 13.66 12 12 12C10.34 12 9 10.66 9 9C9 7.34 10.34 6 12 6C13.66 6 15 7.34 15 9ZM6 17C6 15 10 13.9 12 13.9C14 13.9 18 15 18 17V18H6V17Z",fill:s,className:u})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_3283_145261",children:(0,n.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}))}function at(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function st(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function ut(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function lt(e){var t=e.width,r=void 0===t?16:t,o=e.height,i=void 0===o?16:o,a=e.color,s=void 0===a?"currentColor":a,u=e.foreground,l=ut(e,["width","height","color","foreground"]);return(0,n.jsx)("svg",st(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))))
;n.forEach((function(t){at(e,t,r[t])}))}return e}({},(0,tt.Z)(l)),{width:r,height:i,viewBox:"0 0 23 23",children:(0,n.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",
d:"M11.5 23C17.8513 23 23 17.8513 23 11.5C23 5.14873 17.8513 0 11.5 0C5.14873 0 0 5.14873 0 11.5C0 17.8513 5.14873 23 11.5 23ZM10.0284 5.58634C10.5187 5.66805 10.8499 6.13176 10.7682 6.62205L10.4697 8.41282H13.7544L14.1022 6.32613C14.1839 5.83584 14.6476 5.50462 15.1379 5.58634C15.6282 5.66805 15.9594 6.13176 15.8777 6.62205L15.5792 8.41282H16.6933C17.1903 8.41282 17.5933 8.81577 17.5933 9.31282C17.5933 9.80988 17.1903 10.2128 16.6933 10.2128H15.2792L14.8223 12.9547H16.1256C16.6226 12.9547 17.0256 13.3577 17.0256 13.8547C17.0256 14.3518 16.6226 14.7547 16.1256 14.7547H14.5223L14.1745 16.8414C14.0928 17.3317 13.6291 17.6629 13.1388 17.5812C12.6485 17.4995 12.3173 17.0358 12.399 16.5455L12.6974 14.7547H9.41273L9.06495 16.8414C8.98324 17.3317 8.51953 17.6629 8.02924 17.5812C7.53895 17.4995 7.20773 17.0358 7.28944 16.5455L7.5879 14.7547H6.47395C5.97689 14.7547 5.57395 14.3518 5.57395 13.8547C5.57395 13.3577 5.97689 12.9547 6.47395 12.9547H7.8879L8.34489 10.2128H7.04168C6.54462 10.2128 6.14168 9.80988 6.14168 9.31282C6.14168 8.81577 6.54462 8.41282 7.04168 8.41282H8.64489L8.99267 6.32613C9.07438 5.83584 9.53809 5.50462 10.0284 5.58634ZM13.4544 10.2128L12.9974 12.9547H9.71273L10.1697 10.2128H13.4544Z",
fill:s,className:u})}))}var ct,ft=r(620212),dt=r.n(ft);function yt(e){var t=e.user;return(0,n.jsxs)("div",{className:Pe().infoContainer,children:[(0,n.jsx)("img",{className:Pe().infoPicture,alt:"",src:dt()}),(0,n.jsx)(l.Heading,{className:Pe().title,color:"header-primary",variant:"heading-xl/bold",children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_TITLE.format({n:t.tag})}),(0,n.jsx)(l.Text,{className:Pe().subtitleInfo,color:"header-secondary",variant:"text-md/medium",children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_BODY_1.format()}),(0,n.jsx)(l.Text,{className:Pe().prompt,color:"header-secondary",variant:"text-sm/medium",children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_BODY_2.format({helpdeskArticle:et.Z.getArticleURL(j.BhN.POMELO_FAQ)})}),(0,n.jsxs)("div",{className:Oe()([Pe().infoItem,Pe().infoItemSpacing]),children:[(0,n.jsx)("div",{className:Pe().infoIcon,children:(0,n.jsx)(Je.Z,{width:20,height:20})}),(0,n.jsx)(l.Text,{color:"header-secondary",variant:"text-sm/medium",
children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_ITEM_1.format()})]}),(0,n.jsxs)("div",{className:Oe()([Pe().infoItem,Pe().infoItemSpacing]),children:[(0,n.jsx)("div",{className:Pe().infoIcon,children:(0,n.jsx)(it,{width:20,height:20})}),(0,n.jsx)(l.Text,{color:"header-secondary",variant:"text-sm/medium",children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_ITEM_2.format()})]}),(0,n.jsxs)("div",{className:Pe().infoItem,children:[(0,n.jsx)("div",{className:Pe().infoIcon,children:(0,n.jsx)(lt,{width:20,height:20})}),(0,n.jsx)(l.Text,{color:"header-secondary",variant:"text-sm/medium",children:M.Z.Messages.UNIQUE_USERNAME_EXISTING_FLOW_PROMPT_ITEM_3.format({username:t.tag})})]})]})}!function(e){e[e.INFO=0]="INFO";e[e.EDIT_SCREEN=1]="EDIT_SCREEN";e[e.FINISH_LATER=2]="FINISH_LATER"}(ct||(ct={}));var mt=r(204103),Ot=r.n(mt);function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ht(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){
r(e);return}s.done?t(u):Promise.resolve(u).then(n,o)}function bt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ht(i,n,o,a,s,"next",e)}function s(e){ht(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Et(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){Et(e,t,r[t])}))}return e}function vt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var St=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;(n=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;n=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){
a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function It(e){var t=e.source,r=e.transitionState,i=e.onClose,b=_t(o.useState(ct.INFO),2),E=b[0],g=b[1],v=_t(o.useState(!1),2),_=v[0],S=v[1],I=_t(o.useState(null),2),P=I[0],T=I[1],N=_t(o.useState(ne.Wq.NONE),2),x=N[0],L=N[1],w=_t(o.useState(!1),2),C=w[0],R=w[1],A=_t(o.useState(!1),2),D=A[0],Z=A[1],k=o.useRef(null),W=(0,u.ZP)([U],(function(){return U.usernameSuggestion()})),F=(0,u.ZP)([m.default],(function(){var e=m.default.getCurrentUser();a()(null!=e,"PomeloModal: user cannot be undefined");return e}));o.useEffect((function(){U.wasSuggestionsFetched()||Y();return function(){z()}}),[]);o.useEffect((function(){x===ne.Wq.EDIT_USERNAME&&Z(!0);p.default.track(j.rMx.POMELO_EDIT_STEP_VIEWED,{source:t,step:x})}),[x,t]);o.useEffect((function(){
!D&&null!=W&&W.length>0&&H((function(e){return vt(gt({},e),{username:W})}))}),[W,D]);var B,G=_t(o.useState({username:oe(F),globalName:h.ZP.getName(F)}),2),q=G[0],H=G[1],V=o.useMemo((function(){return[{slideId:ct.INFO,next:ct.EDIT_SCREEN,footerButtons:["REMIND_ME_LATER","GET_STARTED"]},{slideId:ct.EDIT_SCREEN,next:ct.FINISH_LATER,back:ct.INFO,footerButtons:[x===ne.Wq.PREVIEW?"GOT_IT":"BACK",x===ne.Wq.PREVIEW?"GOT_IT":x===ne.Wq.EDIT_USERNAME?"SUBMIT":"NEXT"]},{slideId:ct.FINISH_LATER,back:ct.EDIT_SCREEN},{slideId:ct.FINISH_LATER}]}),[x]),X=V.length,K=o.useCallback(bt((function(){var e,t,r,n;return St(this,(function(o){switch(o.label){case 0:if(q.globalName.length<=0){e=M.Z.Messages.POMELO_EXISTING_FLOW_ERROR_LIMIT.format({minNum:1,maxNum:32});T(e);p.default.track(j.rMx.POMELO_ERRORS,{reason:e,display_name_error:!0,location:"modal"});return[2]}if(h.ZP.getGlobalName(F)===q.globalName){L(ne.Wq.EDIT_USERNAME);return[2]}o.label=1;case 1:o.trys.push([1,3,4,5]);T(null);S(!0);return[4,(0,f.S2)({
global_name:q.globalName})];case 2:o.sent();L(ne.Wq.EDIT_USERNAME);return[3,5];case 3:t=o.sent();r=new d.Z(t);n=r.getAnyErrorMessage();p.default.track(j.rMx.POMELO_ERRORS,{reason:n,display_name_error:!0,location:"modal"});T(n);return[3,5];case 4:S(!1);return[7];case 5:return[2]}}))})),[F,q]),Q=o.useCallback(bt((function(){var e,t,r;return St(this,(function(n){switch(n.label){case 0:n.trys.push([0,3,4,5]);T(null);S(!0);return[4,$({username:le(q.username)})];case 1:n.sent();return[4,(0,c.In)(F.id)];case 2:n.sent();L(ne.Wq.PREVIEW);return[3,5];case 3:e=n.sent();t=new d.Z(e);r=null!=(null==t?void 0:t.status)&&t.status>=400&&t.status<500?t.getAnyErrorMessage():M.Z.Messages.ERROR_GENERIC_TITLE;T(r);p.default.track(j.rMx.POMELO_ERRORS,{reason:r,username_error:!0,location:"modal"});return[3,5];case 4:S(!1);return[7];case 5:return[2]}}))})),[q,F.id]),J=o.useCallback((function(){L(ue(F)?ne.Wq.EDIT_USERNAME:ne.Wq.EDIT_DISPLAY_NAME);g(V[Math.min(X-1,E+1)].slideId)
}),[F,E,V,X]),te=o.useCallback((function(){T(null);if(E===ct.EDIT_SCREEN)if(x===ne.Wq.EDIT_USERNAME)if(ue(F)){L(ne.Wq.NONE);g(V[Math.max(0,E-1)].slideId)}else L(ne.Wq.EDIT_DISPLAY_NAME);else if(x===ne.Wq.EDIT_DISPLAY_NAME){L(ne.Wq.NONE);g(V[Math.max(0,E-1)].slideId)}else x===ne.Wq.PREVIEW&&L(ne.Wq.EDIT_USERNAME);else g(V[Math.max(0,E-1)].slideId)}),[F,V,E,x]),re=o.useCallback((function(){g(ct.FINISH_LATER)}),[]),ie=o.useMemo((function(){return E===ct.EDIT_SCREEN&&x===ne.Wq.EDIT_DISPLAY_NAME?K:E===ct.EDIT_SCREEN&&x===ne.Wq.EDIT_USERNAME?Q:J}),[E,x,K,Q,J]),ae=o.useMemo((function(){var e;return Pt(null!==(B=null===(e=V.find((function(e){return e.slideId===E})))||void 0===e?void 0:e.footerButtons)&&void 0!==B?B:[],{handleNext:ie,handleBack:te,handleRemindMeLater:re,onClose:i},_)}),[te,re,ie,i,V,E,_]),se=o.useMemo((function(){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ee.ZP.getUserAvatarURL({id:e.id,avatar:e.avatar,bot:e.bot,
discriminator:"0000"},t,80)}(F)}),[F]);o.useLayoutEffect((function(){(0,y.Z)(F.id,se)}),[F,se]);o.useEffect((function(){switch(x){case ne.Wq.EDIT_DISPLAY_NAME:var e;null===(e=k.current)||void 0===e||e.focusDisplayName();break;case ne.Wq.EDIT_USERNAME:var t;null===(t=k.current)||void 0===t||t.focusUsername()}}),[x]);var ce=C||null!=P||x!==ne.Wq.EDIT_USERNAME?void 0:M.Z.Messages.POMELO_SUGGESTION_ORIGIN_NOTICE.format({source:F.username});return(0,n.jsxs)(l.ModalRoot,{className:Ot().modalRoot,impressionName:s.zs.POMELO_LANDING,impressionProperties:{source:t,impression_group:s.AG.POMELO_FLOW},transitionState:r,size:l.ModalSize.DYNAMIC,children:[(0,n.jsx)(l.Button,{onClick:i,size:l.Button.Sizes.MIN,look:l.Button.Looks.BLANK,className:Ot().closeContainer,"aria-label":M.Z.Messages.CLOSE,children:(0,n.jsx)(O.Z,{width:15,height:15,className:Ot().close})}),(0,n.jsx)(l.ModalContent,{className:Ot().contentContainer,children:(0,n.jsxs)(l.Slides,{activeSlide:E,width:480,children:[(0,n.jsx)(l.Slide,{
id:ct.INFO,children:(0,n.jsx)(yt,{user:F})}),(0,n.jsx)(l.Slide,{id:ct.EDIT_SCREEN,children:(0,n.jsx)($e,{user:F,error:P,editState:x,userRef:k,formValues:q,footerNotice:ce,usernameSuggestion:W,onChangeFormValue:function(e){T(null);null!=e.username&&R(!0);H((function(t){return gt({},t,e)}))},onFocusUsername:function(){return L(ne.Wq.EDIT_USERNAME)},onFocusDisplayName:function(){return L(ne.Wq.EDIT_DISPLAY_NAME)},onClose:i})}),(0,n.jsx)(l.Slide,{id:ct.FINISH_LATER,children:(0,n.jsx)(Qe,{onClose:i})})]})}),ae]})}var Pt=function(e,t,r){return 0===e.length?null:(0,n.jsxs)(l.ModalFooter,{className:Ot().footer,children:[(0,n.jsxs)("div",{className:Ot().inline,children:[e.includes("REMIND_ME_LATER")&&(0,n.jsx)(l.Button,{className:Ot().unfilledButton,type:"button",size:l.Button.Sizes.SMALL,look:l.Button.Looks.BLANK,color:l.Button.Colors.CUSTOM,onClick:t.handleRemindMeLater,children:M.Z.Messages.POMELO_EXISTING_FLOW_PROMPT_SKIP_CTA}),e.includes("NEXT")&&(0,n.jsx)(l.Button,{type:"button",
size:l.Button.Sizes.SMALL,submitting:r,onClick:t.handleNext,children:M.Z.Messages.NEXT}),e.includes("SUBMIT")&&(0,n.jsx)(l.Button,{type:"button",size:l.Button.Sizes.SMALL,submitting:r,onClick:t.handleNext,children:M.Z.Messages.SUBMIT}),e.includes("GET_STARTED")&&(0,n.jsx)(l.Button,{type:"button",size:l.Button.Sizes.SMALL,onClick:t.handleNext,children:M.Z.Messages.GET_STARTED}),e.includes("GOT_IT")&&(0,n.jsx)(l.Button,{type:"button",size:l.Button.Sizes.SMALL,onClick:t.onClose,children:M.Z.Messages.GOT_IT})]}),e.includes("BACK")&&(0,n.jsx)(l.Button,{className:Ot().unfilledButton,type:"button",size:l.Button.Sizes.SMALL,look:l.Button.Looks.BLANK,color:l.Button.Colors.CUSTOM,onClick:t.handleBack,children:M.Z.Messages.BACK})]})}}}]);
//# sourceMappingURL=10b88d7f7488397d0bf2.js.map