"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[64644],{662912:(e,n,t)=>{t.d(n,{Z:()=>E});var r=t(363010),l=t(173436),o=t(742269),i=t(588641),a=new Set(["nvidia"]);var s=t(236625),u=t.n(s);var c=function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}({},o.AB.WINDOWS,{nvidia:">=397.93.0"});function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function h(e,n){return!n||"object"!==v(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function m(e,n){
m=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return m(e,n)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=p(e);if(n){var l=p(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return h(this,t)}}var S=!1,b=!0;var y=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&m(e,n)}(t,e);var n=g(t);function t(){f(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){var e=this
;o.FB&&!__OVERLAY__&&i.default.getGPUDriverVersions().then((function(n){S=function(e){var n=c[(0,o.Xf)()];if(null==n)return!1;var t,r,l,i=!0,a=!1,s=void 0;try{for(var f,d=Object.keys(e)[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var p=f.value,h=e[p],m=n[p];if(null!=h&&null!=m&&null==h.error){var v=(r=void 0,l=void 0,"".concat(null!==(r=(t=h).major)&&void 0!==r?r:0,".").concat(null!==(l=t.minor)&&void 0!==l?l:0,".0"));if(!u().satisfies(v,m))return!0}}}catch(e){a=!0;s=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw s}}return!1}(n);b=function(e){var n=!0,t=!1,r=void 0;try{for(var l,o=Object.keys(e)[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value,s=e[i];if(null!=s&&null==s.error&&a.has(i))return!0}}catch(e){t=!0;r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(n);e.emitChange()}))};r.getState=function(){return{GPUDriversOutdated:S,canUseHardwareAcceleration:b}};r.__getLocalVars=function(){return{GPUDriversOutdated:S,
canUseHardwareAcceleration:b}};!function(e,n,t){n&&d(e.prototype,n);t&&d(e,t)}(t,[{key:"GPUDriversOutdated",get:function(){return S}},{key:"canUseHardwareAcceleration",get:function(){return b}}]);return t}(r.ZP.Store);y.displayName="StreamingCapabilitiesStore";const E=new y(l.Z,{OVERLAY_INITIALIZE:function(e){var n=e.streamingCapabilitiesStoreState;S=n.GPUDriversOutdated;b=n.canUseHardwareAcceleration}})},464644:(e,n,t)=>{t.r(n);t.d(n,{default:()=>Nt});var r=t(785893),l=t(667294),o=t(441143),i=t.n(o),a=t(248088),s=t(363010),u=t(331535),c=t(992497),f=t(804626),d=t(370442),p=t(239396),h=t(242651),m=t(497802),v=t(356004),g=t(367124),S=t(653772),b=t(934714),y=t(73462),E=t(379822),O=t(859023),C=t(343435),x=t(487502),j=t(954766),_=t(272729),N=t(30741),R=t(67416),Z=t(897576),I=t(932847),P=t(742269),T=t(588641),w=t(59770),M=t(664637);function A(e,n,t){var r=M.no[e],l=!0,o=!1,i=void 0;try{for(var a,s=r[Symbol.iterator]();!(l=(a=s.next()).done);l=!0){var u=a.value;if((0,
w.Z)(e,u.resolution,u.fps,n,t))return[u.resolution,u.fps]}}catch(e){o=!0;i=e}finally{try{l||null==s.return||s.return()}finally{if(o)throw i}}return null}var L=t(127949),D=t(294184),U=t.n(D),k=t(956345),G=t(304856),V=t(409271),F=t(95350),B=t(693518),z=t(969225),H=t(71284),W=t(81951),Y=t(240243);function J(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function X(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function K(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},o=Object.keys(e)
;for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||(l[t]=e[t])}return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}}return l}function q(e){var n=e.width,t=void 0===n?24:n,l=e.height,o=void 0===l?24:l,i=e.color,a=void 0===i?"currentColor":i,s=e.foreground,u=K(e,["width","height","color","foreground"]);return(0,r.jsxs)("svg",X(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){J(e,n,t[n])}))}return e}({},(0,Y.Z)(u)),{width:t,height:o,viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{className:s,fill:a,
d:"M22 7.002V5C22 3.898 21.104 3 20 3H4C2.897 3 2 3.898 2 5V7.002H22ZM8 4C8.553 4 9 4.448 9 5C9 5.553 8.553 6 8 6C7.447 6 7 5.553 7 5C7 4.448 7.447 4 8 4ZM5 4C5.553 4 6 4.448 6 5C6 5.553 5.553 6 5 6C4.447 6 4 5.553 4 5C4 4.448 4.447 4 5 4Z"}),(0,r.jsx)("path",{fill:a,d:"M2 8.00201V19C2 20.103 2.897 21 4 21H20C21.104 21 22 20.103 22 19V8.00201H2Z"})]}))}var Q=t(90816),$=t(662912),ee=t(236625),ne=t.n(ee),te=t(901991),re=t(891153),le=t(855846),oe=t(866452),ie=t(959797);var ae=t(1812),se=t(940712),ue=t(645897),ce=t(337160),fe=t(53211),de=t(987928),pe=t(757987),he=t(436053),me=t(570992),ve=t(366873),ge=t.n(ve);function Se(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function be(e){var n=e.channel,t=e.users,l=e.selected,o=void 0!==l&&l,i=(0,fe.ZP)(n),a=null;if(null!=t&&t.length>0){a=(0,r.jsx)(he.Z,{guildId:n.guild_id,className:ge().voiceUserList,users:t,renderUser:function(e){if(null==e)return null
;var t=me.Z.getName(n.guild_id,n.id,e),l=e.getAvatarURL(n.guild_id,24);return(0,r.jsx)(pe.DY,{text:t,children:(0,r.jsx)("img",{src:null!=l?l:void 0,"aria-label":e.username,alt:"",className:ge().avatar})})},renderMoreUsers:function(e){var l=function(e,n){var t=n.id,r=n.guild_id;return e.length<=1?null:2===e.length?ie.Z.Messages.GO_LIVE_MODAL_OVERFLOW_TWO_USERS.format({nickname0:me.Z.getName(r,t,e[0]),nickname1:me.Z.getName(r,t,e[1])}):3===e.length?ie.Z.Messages.GO_LIVE_MODAL_OVERFLOW_THREE_USERS.format({nickname0:me.Z.getName(r,t,e[0]),nickname1:me.Z.getName(r,t,e[1]),nickname2:me.Z.getName(r,t,e[2])}):ie.Z.Messages.GO_LIVE_MODAL_OVERFLOW_FOUR_OR_MORE_USERS.format({nickname0:me.Z.getName(r,t,e[0]),nickname1:me.Z.getName(r,t,e[1]),remainingCount:e.length-2})}(t.slice(4),n);return(0,r.jsx)("div",{children:(0,r.jsx)(pe.DY,{text:l,children:(0,r.jsx)("div",{className:ge().userListOverflow,children:e})})})},max:5,showUserPopout:!1})}var s=(0,de.Z)(n);return(0,r.jsxs)("div",{
className:U()(ge().channelInfo,Se({},ge().selected,o)),children:[(0,r.jsx)(s,{className:ge().channelIcon}),(0,r.jsx)("div",{className:ge().channelName,children:i}),a]})}var ye=t(318937),Ee=t(227993),Oe=t.n(Ee);function Ce(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function xe(e){var n=e.separator,t=void 0!==n&&n;return(0,r.jsx)("div",{className:U()(Oe().divider,Ce({},Oe().separator,t))})}var je=t(903803),_e=t.n(je),Ne=t(559221),Re=t.n(Ne);function Ze(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ie(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Pe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){
o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Ze(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ze(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e){var n=e.title,t=e.scrollerClassName,o=e.scrollerInnerClassName,i=e.children,a=l.useRef(null),s=Pe(l.useState(!1),2),c=s[0],f=s[1],d=Pe(l.useState(!1),2),p=d[0],h=d[1],m=l.useCallback((function(){var e=a.current;if(null!=e){f(!e.isScrolledToTop());h(!e.isScrolledToBottom())}}),[]);l.useLayoutEffect((function(){return m()}),[]);return(0,r.jsxs)(r.Fragment,{
children:[(0,r.jsxs)("div",{className:U()(Re().title,Re().scrollWrapper),children:[(0,r.jsx)(u.vw,{className:_e().formItemTitle,children:n}),(0,r.jsx)(xe,{separator:c})]}),(0,r.jsx)("div",{className:t,children:(0,r.jsx)(ye.ZP,{ref:a,className:U()(Re().scrollerInner,o,Ie({},Re().bottomSeparator,p)),onScroll:m,children:i})})]})}var we=t(426314),Me=t.n(we);function Ae(e){var n=e.selectedChannelId,t=e.guildId,l=e.onChangeSelectedChannelId,o=(0,s.e7)([O.default],(function(){return O.default.getCurrentUser()})),i=(0,s.e7)([S.Z,ae.ZP,se.Z],(function(){return(0,ce.h_)(ae.ZP.getChannels(t),S.Z,se.Z)})),a=(0,s.e7)([ue.ZP],(function(){return ue.ZP.getVoiceStates(t)})),c=i.map((function(e){var t;return{name:(0,r.jsx)(be,{channel:e,users:null===(t=a[e.id])||void 0===t?void 0:t.filter((function(e){return e.user.id!==(null==o?void 0:o.id)})).map((function(e){return e.user})),selected:e.id===n}),value:e.id}}));return(0,r.jsx)(Te,{title:ie.Z.Messages.GO_LIVE_MODAL_SELECT_CHANNEL_FORM_TITLE,
scrollerInnerClassName:Me().channelSelectScrollerInner,children:(0,r.jsx)(u.Ee,{options:c,value:n,itemInfoClassName:Me().channelInfoWrapper,itemTitleClassName:Me().channelTitleWrapper,onChange:function(e){var n=e.value;return l(n)}})})}var Le=t(631134),De=t(815208),Ue=t.n(De);function ke(e){var n=e.children;return(0,r.jsx)("div",{className:Ue().card,children:n})}function Ge(e){var n=e.channel,t=(0,s.e7)([Le.default],(function(){return Le.default.getId()})),l=(0,s.e7)([ue.ZP],(function(){return ue.ZP.getVoiceStatesForChannel(n)}),[n]);return(0,r.jsx)(u.xJ,{title:ie.Z.Messages.GO_LIVE_MODAL_CURRENT_CHANNEL_FORM_TITLE,className:_e().modalContent,titleClassName:_e().formItemTitle,children:(0,r.jsx)(ke,{children:(0,r.jsx)(be,{channel:n,users:l.filter((function(e){return e.user.id!==t})).map((function(e){return e.user}))})})})}var Ve=t(842592),Fe=t(553494),Be=(0,Fe.B)({kind:"user",id:"2023-01_nitro_basic_hd_streaming_upsell",label:"Nitro Basic HD Streaming Upsell",defaultConfig:{enabled:!1},
treatments:[{id:1,label:"Enable upsell",config:{enabled:!0}}]}),ze=t(617781),He=t(732031),We=t(74030),Ye=t(64833),Je=t(224292);const Xe=(0,Fe.B)({kind:"user",id:"2022-06_inline_streaming_premium_upsell_behavior",label:"Inline Streaming Premium Upsell Behavior",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var Ke=t(461061),qe=t(298716),Qe=t(207511),$e=t.n(Qe);function en(e){var n=e.message,t=e.onClose,l=e.openStreamUpsellModal,o=Xe.useExperiment({}),i=(0,Ye.Z)().analyticsLocations,a={section:Ke.jXE.STREAM_SETTINGS,object:Ke.qAy.PREMIUM_UPSELL_BANNER,objectType:Ke.Qqv.BUY};return(0,r.jsxs)(u.P3,{onClick:function(){!function(){Xe.trackExposure({});o.enabled?(0,Je.Z)({initialPlanId:null,subscriptionTier:qe.Si.TIER_2,analyticsLocations:i,analyticsObject:a}):l({analyticsLocation:a,onClose:t})}()},className:U()($e().upsellBanner,$e().gradientBackground),children:[(0,r.jsxs)("div",{className:$e().iconTextContainer,children:[(0,r.jsx)(He.Z,{
className:$e().iconColor}),(0,r.jsx)(u.xv,{variant:"text-sm/medium",className:$e().upsellText,children:null!=n?n:ie.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER})]}),(0,r.jsx)(u.xv,{variant:"text-sm/medium",className:$e().textLink,children:ie.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER_CTA})]})}var nn=t(324407),tn=t.n(nn),rn=t(380203),ln=t.n(rn);function on(e,n,t,r,l,o,i){try{var a=e[o](i),s=a.value}catch(e){t(e);return}a.done?n(s):Promise.resolve(s).then(r,l)}function an(e){return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){on(o,r,l,i,a,"next",e)}function a(e){on(o,r,l,i,a,"throw",e)}i(void 0)}))}}function sn(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){
return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){sn(e,n,t[n])}))}return e}function cn(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}var fn=function(e,n){var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),
0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function dn(e){var n=e.analyticsLocation,l=e.onClose;(0,Z.ZD)(an((function(){var e,o;return fn(this,(function(i){switch(i.label){case 0:return[4,t.e(69224).then(t.bind(t,69224))];case 1:e=i.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,cn(un({},e),{onCloseParent:l,analyticsSource:n}))}]}}))})))}function pn(){return(0,r.jsxs)("div",{
className:tn().toolTipTextContainer,children:[(0,r.jsx)(He.Z,{className:U()(tn().premiumIcon,tn().premiumIconColor)}),(0,r.jsx)(u.xv,{className:tn().upsellText,variant:"text-sm/medium",children:ie.Z.Messages.STREAM_QUALITY_DISCORD_NITRO_UNLOCK})]})}function hn(e){var n,t,l=e.type,o=e.selected,i=e.needsPremium,a=e.analyticsLocation,s=e.onClick,c=e.onClose,f=l.value,d=l.label;if(i){n=(0,r.jsx)(pe.DY,{tooltipClassName:tn().tooltip,spacing:12,"aria-label":ie.Z.Messages.STREAM_QUALITY_DISCORD_NITRO_UNLOCK,text:(0,r.jsx)(pn,{}),children:(0,r.jsx)(x.Z,{align:x.Z.Align.CENTER,children:(0,r.jsx)(u.xv,{variant:"text-xs/bold",className:tn().selectorNitroText,children:d})})});t=function(){return dn({analyticsLocation:a,onClose:c})}}else{n=(0,r.jsx)(u.xv,{variant:"text-xs/normal",className:o?tn().selectorTextSelected:tn().selectorText,children:d});t=function(){return s(f)}}return{content:n,className:U()(o?tn().selectorButtonSelected:tn().selectorButton,sn({},tn().selectorButtonPremiumRequired,i)),
onClick:t}}function mn(e){var n=e.onClose,t=e.selectedPreset,l=e.selectedResolution,o=e.selectedFPS,a=e.onResolutionChange,c=e.onFPSChange,f=e.onPresetChange,d=e.guildId,h=(0,s.e7)([O.default],(function(){var e=O.default.getCurrentUser();i()(null!=e,"StreamSettings: user cannot be undefined");return e})),m=We.ZP.isPremiumExactly(h,qe.p9.TIER_0),v=We.ZP.isPremium(h),g=(0,s.e7)([S.Z],(function(){var e;return null===(e=S.Z.getGuild(d))||void 0===e?void 0:e.premiumTier})),b=(0,Ve.O)().location,y=Be.useExperiment({},{autoTrackExposure:m,disable:!m}).enabled||!v,E=cn(un({},b),{section:Ke.jXE.STREAM_SETTINGS}),C=(0,r.jsx)(ze.Z,{buttons:M.WC.map((function(e){return hn({type:e,selected:e.value===l,needsPremium:!(0,w.Z)(t,e.value,o,h,g),analyticsLocation:E,onClick:function(){return a(e.value)},onClose:n})}))}),j=(0,r.jsx)(ze.Z,{buttons:M.k0.map((function(e){return hn({type:e,selected:e.value===o,needsPremium:!(0,w.Z)(t,l,e.value,h,g),analyticsLocation:E,onClick:function(){return c(e.value)},
onClose:n})}))}),_=[{value:M.tI.PRESET_VIDEO,label:ie.Z.Messages.STREAM_PRESET_VIDEO},{value:M.tI.PRESET_DOCUMENTS,label:ie.Z.Messages.STREAM_PRESET_DOCUMENTS},{value:M.tI.PRESET_CUSTOM,label:ie.Z.Messages.STREAM_PRESET_CUSTOM}],N=t===M.tI.PRESET_DOCUMENTS?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{children:(0,r.jsx)(u.xJ,{title:ie.Z.Messages.STREAM_RESOLUTION,titleClassName:_e().formItemTitleSlim,className:tn().documentModeGroup,children:(0,r.jsx)(u.xv,{variant:"text-xs/normal",children:ie.Z.Messages.STREAM_PRESET_DOCUMENTS_DESCRIPTION_NITRO.format({fps:o})})})}),y?(0,r.jsx)(en,{message:ie.Z.Messages.STREAM_PREMIUM_UPSELL_BANNER_PRESET_DOCUMENTS,onClose:n,openStreamUpsellModal:dn}):null]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(u.xJ,{title:ie.Z.Messages.STREAM_RESOLUTION,className:tn().settingsGroup,titleClassName:_e().formItemTitleSlim,children:C}),(0,r.jsx)(u.xJ,{title:ie.Z.Messages.SCREENSHARE_FRAME_RATE,className:tn().settingsGroup,
titleClassName:_e().formItemTitleSlim,children:j})]}),y?(0,r.jsx)(en,{onClose:n,openStreamUpsellModal:dn}):null]});return(0,r.jsx)(p.Z,cn(un({},E),{children:(0,r.jsx)(u.xJ,{title:ie.Z.Messages.STREAM_QUALITY,titleClassName:_e().formItemTitle,className:_e().modalContent,children:(0,r.jsxs)("div",{className:tn().qualitySettingsContainer,children:[(0,r.jsx)(u.q4,{value:t,className:ln().marginTop8,options:_,onChange:function(e){return f(e)}}),N]})})}))}var vn=t(231835);function gn(e,n,t){return null==n?e:t.find((function(e){return(0,vn.Z)(n.id,e.windowHandle)}))}var Sn=t(190564),bn=t.n(Sn);function yn(e){var n=e.selectedSource,t=e.selectSource,l=e.sourceChanged,o=e.onChangeSource,i=(0,s.e7)([y.ZP,C.Z],(function(){return(0,P.ED)()?(0,L.Z)(y.ZP,C.Z):null})),a=(0,s.e7)([g.Z],(function(){return null!=(null==i?void 0:i.id)?g.Z.getGame(i.id):null})),c=(0,s.e7)([y.ZP],(function(){return y.ZP.getRunningGames()})),f=(0,s.e7)([g.Z],(function(){return c.map((function(e){
return null!=e.id?g.Z.getGame(e.id):null})).filter(Q.lm)}),[c]),d=null;null!=n?d=n.name:null!=i&&(d=i.name);if(null==d)return null;var p=gn(i,n,c),h=l?f.find((function(e){return e.id===(null==p?void 0:p.id)})):a,m=null!=n&&n.id.startsWith("screen")?H.Z:q;return(0,r.jsx)(u.xJ,{title:ie.Z.Messages.GO_LIVE_MODAL_APPLICATION_FORM_TITLE,className:_e().modalContent,titleClassName:_e().formItemTitleVerySlim,children:(0,r.jsxs)(ke,{children:[null!=h?(0,r.jsx)(B.Z,{game:h,size:B.Z.Sizes.XSMALL,className:bn().selectedIcon}):(0,r.jsx)(m,{className:bn().selectedIcon}),(0,r.jsx)("span",{className:bn().ellipsisText,children:d}),t?(0,r.jsx)(u.zx,{className:bn().changeButton,color:u.zx.Colors.PRIMARY,size:u.zx.Sizes.SMALL,onClick:o,children:ie.Z.Messages.CHANGE}):null]})})}function En(e){var n=e.onChange,t=e.guildId,l=(0,s.e7)([S.Z],(function(){return S.Z.getGuild(t)}));if(null==l){n();return null}return(0,r.jsx)(u.xJ,{title:ie.Z.Messages.GO_LIVE_MODAL_GUILD_FORM_TITLE,className:_e().modalContent,
titleClassName:_e().formItemTitle,children:(0,r.jsxs)(ke,{children:[(0,r.jsx)(z.Z,{guild:l,size:z.Z.Sizes.SMALLER,className:bn().selectedIcon}),(0,r.jsx)("span",{className:bn().ellipsisText,children:l.toString()}),(0,r.jsx)(u.zx,{className:bn().changeButton,color:u.zx.Colors.PRIMARY,size:u.zx.Sizes.SMALL,onClick:n,children:ie.Z.Messages.CHANGE})]})})}function On(e){var n=e.text;return(0,r.jsxs)(x.Z,{align:x.Z.Align.CENTER,className:bn().warning,children:[(0,r.jsx)(W.Z,{className:bn().warningIcon}),(0,r.jsx)(u.xv,{color:"none",variant:"text-xs/normal",children:n})]})}function Cn(e){var n,t=e.guildId,o=(0,s.e7)([F.Z],(function(){return null!==(n=F.Z.getMemberCount(t))&&void 0!==n?n:0})),i=V.eo.useSetting(),a=l.useCallback((function(e,n){V.eo.updateSetting(n);I.default.track(Ke.rMx.NOTIFY_STREAM_SETTING_UPDATE,{value:n})}),[]);return o>=2&&o<=le.tB?(0,r.jsx)(u.xJ,{className:U()(_e().modalContent,bn().checkboxRow),children:(0,r.jsx)(u.XZ,{value:!!i,type:u.XZ.Types.INVERTED,onChange:a,
children:(0,r.jsx)(u.xv,{variant:"text-sm/normal",children:ie.Z.Messages.GO_LIVE_MODAL_NOTIFY_FRIENDS_CHECKBOX_LABEL})})}):null}function xn(e){var n=e.selectedSource,t=e.selectedFPS,o=e.selectedChannelId,i=e.selectedPreset,a=e.selectedResolution,u=e.sourceChanged,c=e.guildId,f=e.selectSource,d=e.selectGuild,p=e.onClose,h=e.onChangeSelectedFPS,m=e.onChangeSelectedResolution,g=e.onChangeSelectedPreset,S=e.onChangeSelectedChannelId,y=e.onChangeSource,C=e.onChangeGuild,x=(0,s.e7)([E.Z,v.Z],(function(){return v.Z.getChannel(E.Z.getVoiceChannelId())})),j=(0,s.e7)([$.Z],(function(){return $.Z.GPUDriversOutdated})),_=(0,s.e7)([b.Z],(function(){return b.Z.getSoundshareEnabled()})),N=(0,s.e7)([O.default],(function(){return O.default.getCurrentUser()})),R=b.Z.supports(oe.AN.SOUNDSHARE)?(0,P.ED)()&&!ne().satisfies(null===re.Z||void 0===re.Z?void 0:re.Z.os.release,le.I9)?ie.Z.Messages.GO_LIVE_SCREENSHARE_UPDATE_WINDOWS_FOR_SOUNDSHARE:(0,
P.id)()&&!ne().satisfies(null===re.Z||void 0===re.Z?void 0:re.Z.os.release,le.Ec)?ie.Z.Messages.GO_LIVE_SCREENSHARE_UPDATE_MACOS_FOR_SOUNDSHARE:null:te.GO_LIVE_SCREENSHARE_NO_SOUND;null!=n&&n.id.startsWith("screen")?R=ie.Z.Messages.GO_LIVE_SCREENSHARE_NO_SOUND:null==R&&b.Z.supportsEnableSoundshare()&&_!==Ke.rtk.ENABLED&&(R=ie.Z.Messages.GO_LIVE_SCREENSHARE_ENABLE_FOR_SOUNDSHARE.format({onVoiceSettingsClick:function(){p();k.Z.open(Ke.oAB.VOICE)}}));var Z=null!=N&&N.verified&&!N.bot,I=null!=x&&!(0,G.Yk)(x),T=Z&&I;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(yn,{selectSource:f,sourceChanged:u,onChangeSource:y,selectedSource:n}),null!=R?(0,r.jsx)(On,{text:R}):null,d&&null!=c?(0,r.jsx)(En,{guildId:c,onChange:C}):null,null!=x?(0,r.jsx)(Ge,{channel:x}):(0,r.jsx)(Ae,{guildId:c,selectedChannelId:o,onChangeSelectedChannelId:S}),null!=c&&T?(0,r.jsx)(Cn,{guildId:c}):null,j?(0,r.jsx)(On,{text:ie.Z.Messages.GO_LIVE_VIDEO_DRIVERS_OUTDATED}):null,(0,r.jsx)(mn,{selectedPreset:i,selectedFPS:t,
selectedResolution:a,guildId:c,onClose:p,onFPSChange:h,onResolutionChange:m,onPresetChange:g})]})}var jn=t(496486),_n=t.n(jn),Nn=t(784238),Rn=t(414597),Zn=t(540837),In=t.n(Zn);function Pn(e){var n=e.guildId,t=e.onClick,l=(0,s.e7)([S.Z],(function(){return S.Z.getGuild(n)})),o=(0,s.e7)([ae.ZP,S.Z,se.Z],(function(){return ae.ZP.getChannels(n)[ae.Zb].some((function(e){var n=e.channel;return(0,ce.JL)(n,S.Z,se.Z)}))}));return null!=l&&o?(0,r.jsxs)(u.P3,{onClick:function(){return t(n)},className:In().guildRow,children:[(0,r.jsx)(z.Z,{guild:l,size:z.Z.Sizes.SMALL,className:In().guildIcon}),(0,r.jsx)(u.xv,{variant:"text-md/normal",className:In().guildName,children:l.toString()}),(0,r.jsx)(Rn.Z,{direction:Rn.Z.Directions.RIGHT,className:In().guildArrow})]}):null}function Tn(e){var n=e.onSelectGuild,t=(0,s.e7)([Nn.Z],(function(){return Nn.Z.guildFolders}));return(0,r.jsx)(Te,{title:ie.Z.Messages.GO_LIVE_MODAL_SELECT_GUILD_FORM_TITLE,scrollerClassName:U()(In().guildScroller,_e().marginBottom),
children:_n().flatMap(t,(function(e){return e.guildIds.map((function(e){return(0,r.jsx)(Pn,{guildId:e,onClick:n},e)}))}))})}var wn=t(244735),Mn=t(137680),An=t(365523),Ln=t(883518),Dn=t.n(Ln);function Un(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function kn(e){kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return kn(e)}function Gn(e,n){return!n||"object"!==Bn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Vn(e,n){Vn=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return Vn(e,n)}var Fn,Bn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function zn(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=kn(e);if(n){var l=kn(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return Gn(this,t)}}!function(e){e.WRAP="wrap";e.STACK="stack"}(Fn||(Fn={}));var Hn=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&Vn(e,n)}(t,e);var n=zn(t);function t(){Un(this,t);return n.apply(this,arguments)}var l=t.prototype;l.renderChildren=function(){var e,n=this.props,t=n.children,l=n.layout,o=n.columns;switch(l){case Fn.STACK:e="100%";break;case Fn.WRAP:e="".concat(1/o*100,"%")}return t.map((function(n,t){return(0,r.jsx)(x.Z.Child,{className:Dn().tile,basis:e,grow:0,children:n},t)}))};l.render=function(){var e=this.props.className;return(0,r.jsx)(x.Z,{
className:U()(e,Dn().grid),wrap:x.Z.Wrap.WRAP,children:this.renderChildren()})};return t}(l.PureComponent);Hn.Layout=Fn;Hn.defaultProps={children:[],layout:Fn.WRAP,columns:4};const Wn=Hn;var Yn=t(944053),Jn=t.n(Yn);function Xn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Kn(e){Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Kn(e)}function qn(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&$n(e,n)}function Qn(e,n){return!n||"object"!==et(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function $n(e,n){$n=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return $n(e,n)}var et=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function nt(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=Kn(e);if(n){var l=Kn(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return Qn(this,t)}}var tt=function(e){qn(t,e);var n=nt(t);function t(){Xn(this,t);var e;(e=n.apply(this,arguments)).handleClick=function(n){var t=e.props.onClick;return null==t?void 0:t(e.props.option,n)};return e}t.prototype.render=function(){var e=this.props,n=e.selected,t=e.className,l=e.selectedClassName,o=this.props.option.name,i=function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}({},Jn().selected,n);null!=l&&(i[l]=n);return(0,
r.jsx)(u.P3,{className:U()(Jn().item,t,i),onClick:this.handleClick,children:o})};return t}(l.PureComponent),rt=function(e){qn(t,e);var n=nt(t);function t(){Xn(this,t);return n.apply(this,arguments)}var l=t.prototype;l.renderItem=function(e){var n=this.props,t=n.value,l=n.optionClassName,o=n.selectedOptionClassName,i=t===e.value;return(0,r.jsx)(tt,{selected:i,option:e,onClick:this.props.onChange,className:l,selectedClassName:o},e.value)};l.render=function(){var e=this.props.className;return(0,r.jsx)(x.Z,{className:U()(Jn().container,e),shrink:0,children:this.props.options.map(this.renderItem,this)})};return t}(l.PureComponent);rt.defaultProps={options:[],onChange:Ke.dG4,value:null};const lt=rt;var ot=t(583711),it=t.n(ot);function at(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function st(e,n,t,r,l,o,i){try{var a=e[o](i),s=a.value}catch(e){t(e);return}a.done?n(s):Promise.resolve(s).then(r,l)}function ut(e){return function(){
var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){st(o,r,l,i,a,"next",e)}function a(e){st(o,r,l,i,a,"throw",e)}i(void 0)}))}}function ct(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ft(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return at(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return at(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=function(e,n){var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){
i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function pt(){return(0,Mn.Z)(b.Z.getMediaEngine(),[wn.v.WINDOW,wn.v.SCREEN],{width:176,height:99}).then((function(e){var n=e.filter((function(e){return e.id.startsWith(wn.v.SCREEN)}));return{windowSources:e.filter((function(e){return e.id.startsWith(wn.v.WINDOW)})).sort((function(e,n){return ht(n)-ht(e)})),screenSources:n}}))}function ht(e){var n=(0,P.ED)()?(0,L.Z)(y.ZP,C.Z):null,t=y.ZP.getRunningGames();return null!=n&&(0,vn.Z)(e.id,n.windowHandle)?2:null!=t.find((function(n){return(0,vn.Z)(e.id,n.windowHandle)}))?1:0}function mt(e){
var n=e.selectedSource,t=e.onChangeSelectedSource,o=ft(l.useState(null),2),i=o[0],a=o[1],s=ft(l.useState(null),2),c=s[0],f=s[1],d=ft(l.useState(wn.v.WINDOW),2),p=d[0],h=d[1],m=ft(l.useState(!1),2),v=m[0],g=m[1],S=l.useRef(null),b=l.useRef(new An.Xp);l.useEffect((function(){var e=b.current;pt().then((function(n){var t=n.screenSources,r=n.windowSources;a(t);f(r);e.start(1e3,ut((function(){var e,n,t;return dt(this,(function(r){switch(r.label){case 0:return[4,pt()];case 1:e=r.sent(),n=e.screenSources,t=e.windowSources;a(n);f(t);return[2]}}))})))}));return function(){e.stop()}}),[]);var y=l.useCallback((function(e){if(null!==e){S.current=e;var n;g(null!==(n=!e.isScrolledToTop())&&void 0!==n&&n)}}),[]),E=p===wn.v.WINDOW?c:i;if(null==E)return(0,r.jsx)(x.Z,{className:it().spinner,justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:(0,r.jsx)(u.$j,{})});var O=E.map((function(e){var l=e.id,o=e.name,i=e.url,a=(null==n?void 0:n.id)===l;return(0,r.jsx)(u.P3,{
className:U()(it().tile,ct({},it().selected,a)),onClick:function(){return t(e)},children:(0,r.jsxs)(x.Z,{direction:x.Z.Direction.VERTICAL,justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:[(0,r.jsx)(x.Z,{justify:x.Z.Justify.CENTER,align:x.Z.Align.CENTER,children:(0,r.jsx)("div",{style:{backgroundImage:"url(".concat(i,")")},className:U()(it().sourceThumbnail,ct({},it().selected,a))})}),(0,r.jsx)(u.xv,{className:U()(it().sourceName,ct({},it().selected,a)),variant:"text-sm/normal",children:o})]})},l)}));return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("div",{className:it().segmentContainer,children:[(0,r.jsx)(xe,{separator:v}),(0,r.jsx)(lt,{options:[{name:ie.Z.Messages.GO_LIVE_MODAL_APPLICATIONS,value:wn.v.WINDOW},{name:ie.Z.Messages.GO_LIVE_MODAL_SCREENS,value:wn.v.SCREEN}],value:p,onChange:function(e){var n=e.value;return h(n)},className:it().segmentControl,optionClassName:it().segmentControlOption})]}),(0,r.jsx)(ye.ZP,{ref:y,className:it().sourceScroller,onScroll:function(){
var e=S.current;null!=e&&g(!e.isScrolledToTop())},children:(0,r.jsx)(Wn,{layout:Wn.Layout.WRAP,columns:2,className:it().sourceContainer,children:O})})]})}var vt=t(754804);function gt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function St(e,n,t,r,l,o,i){try{var a=e[o](i),s=a.value}catch(e){t(e);return}a.done?n(s):Promise.resolve(s).then(r,l)}function bt(e){return function(){var n=this,t=arguments;return new Promise((function(r,l){var o=e.apply(n,t);function i(e){St(o,r,l,i,a,"next",e)}function a(e){St(o,r,l,i,a,"throw",e)}i(void 0)}))}}function yt(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Et(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))))
;r.forEach((function(n){yt(e,n,t[n])}))}return e}function Ot(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function Ct(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){a=!0;l=e}finally{try{i||null==t.return||t.return()}finally{if(a)throw l}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return gt(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xt,jt=function(e,n){var t,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;(r=0,l)&&(o=[2&o[0],l.value]);switch(o[0]){case 0:case 1:l=o;break;case 4:i.label++;return{value:o[1],done:!1}
;case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1];l=o;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(o);break}l[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(e){e[e.GUILD=0]="GUILD";e[e.SOURCE=1]="SOURCE";e[e.CONFIRM=2]="CONFIRM"}(xt||(xt={}));function _t(e,n){I.default.track(Ke.rMx.SCREENSHARE_FAILED,{source_id:e,screens:n.length})}function Nt(e){var n,o=e.selectGuild,D=void 0!==o&&o,U=e.selectSource,k=void 0===U||U,G=e.guildId,V=e.analyticsLocation,F=e.onClose,B=e.transitionState,z=function(){!function(){i()(null!=q||null!=ve,"got nothing to stream");var e,n=null!==(e=null==K?void 0:K.id)&&void 0!==e?e:pe
;i()(null!=n,"Received null target channel ID");var t,r=v.Z.getChannel(n),l=null!==(t=null==r?void 0:r.getGuildId())&&void 0!==t?t:G;null==K&&f.default.selectVoiceChannel(n);var o=be,a=Oe,s=je;if(!(0,w.Z)(o,a,s,Q,$)){o=M.tI.PRESET_VIDEO;a=M.LY.RESOLUTION_720;s=M.ws.FPS_30}(0,d.Rc)({preset:o,resolution:a,frameRate:s});var u=gn(q,ve,y.ZP.getRunningGames()),p=(0,P.ED)()&&null!=u&&null!=u?u.pid:null;(0,d.WH)(l,n,{pid:p,sourceId:null==p&&null!=ve?ve.id:null,sourceName:null==p&&null!=ve?ve.name:null});bt((function(){return jt(this,(function(e){switch(e.label){case 0:return[4,h.Z.hasPermission(vt.Eu.SCREEN_RECORDING,{showAuthorizationError:!1})];case 1:e.sent()||c.Z.show({title:ie.Z.Messages.WARNING_SCREEN_RECORDING_PERMISSION_TITLE,body:ie.Z.Messages.WARNING_SCREEN_RECORDING_PERMISSION_BODY});return[2]}}))}))()}();F()},H=function(){var e,n=null!==(e=null==q?void 0:q.pid)&&void 0!==e?e:null;(0,Z.ZD)(bt((function(){var e,l;return jt(this,(function(o){switch(o.label){case 0:
return[4,t.e(74918).then(t.bind(t,474918))];case 1:e=o.sent(),l=e.default;return[2,function(e){return(0,r.jsx)(l,Ot(Et({},e),{handleStream:z,pid:n}))}]}}))})))},W=(0,s.e7)([m.Z],(function(){return m.Z.getState()})),Y=W.preset,J=W.resolution,X=W.fps,K=(0,s.e7)([E.Z,v.Z],(function(){return v.Z.getChannel(E.Z.getVoiceChannelId())})),q=(0,s.e7)([y.ZP,C.Z],(function(){return(0,P.ED)()?(0,L.Z)(y.ZP,C.Z):null})),Q=(0,s.e7)([O.default],(function(){var e=O.default.getCurrentUser();i()(null!=e,"GoLiveModal: user cannot be undefined");return e})),$=(0,s.e7)([S.Z],(function(){var e;return null===(e=S.Z.getGuild(G))||void 0===e?void 0:e.premiumTier})),ee=Ct(null!==(n=A(Y,Q,$))&&void 0!==n?n:[M.LY.RESOLUTION_720,M.ws.FPS_30],2),ne=ee[0],te=ee[1];if(Y!==M.tI.PRESET_CUSTOM){J=ne;X=te}var re,le=(0,_.Dt)(),oe=Ct(l.useState(function(e,n){return e?xt.GUILD:n?xt.SOURCE:xt.CONFIRM
}(D,k)),2),ae=oe[0],se=oe[1],ue=Ct(l.useState(!1),2),ce=ue[0],fe=ue[1],de=Ct(l.useState(null),2),pe=de[0],he=de[1],me=Ct(l.useState(null),2),ve=me[0],ge=me[1],Se=Ct(l.useState(Y),2),be=Se[0],ye=Se[1],Ee=Ct(l.useState(J),2),Oe=Ee[0],Ce=Ee[1],xe=Ct(l.useState(X),2),je=xe[0],Ne=xe[1],Re=Ct(l.useState(null!=G?G:null),2),Ze=Re[0],Ie=Re[1],Pe=null!==(re=null==K?void 0:K.id)&&void 0!==re?re:pe;l.useEffect((function(){var e=(0,P.ED)()?(0,L.Z)(y.ZP,C.Z):null,n=null!=(null==e?void 0:e.id)?g.Z.getGame(e.id):null;I.default.track(Ke.rMx.OPEN_MODAL,{type:"Go Live Modal",application_id:null==n?void 0:n.id,application_name:null==e?void 0:e.name,game_id:null==n?void 0:n.id,location_section:V})}),[V]);var Te=l.useCallback((function(e,n,t){var r=A(e,Q,$),l=Ct(null!=r?r:[n,t],2),o=l[0],i=l[1];if(e!==be){n=o;t=i}if(!(0,w.Z)(e,n,t,Q,$)){var a=Ct(A(M.tI.PRESET_VIDEO,Q,$),2);n=a[0];t=a[1]}t!==je&&Ne(t);n!==Oe&&Ce(n);o!==n||i!==t?ye(M.tI.PRESET_CUSTOM):e!==be&&ye(e)}),[Q,$,je,Oe,be]);function we(){
return(we=bt((function(e){var n,t,l,o;return jt(this,(function(i){switch(i.label){case 0:e.preventDefault();if(ae===xt.SOURCE)return[2,se(xt.CONFIRM)];n=gn(q,ve,y.ZP.getRunningGames());t=T.default.supportsFeature(Ke.eRX.ELEVATED_HOOK)&&(null==n?void 0:n.elevated);return(0,P.id)()&&null!=ve?[4,b.Z.getMediaEngine().getDesktopSources()]:[3,2];case 1:l=i.sent();if((o=ve.id).startsWith("screen")&&l.length>0&&!l.some((function(e){return e.includes(o)}))){_t(o,l);(0,Z.h7)((function(e){return(0,r.jsx)(N.default,Ot(Et({header:ie.Z.Messages.SCREENSHARE_RELAUNCH,confirmText:ie.Z.Messages.OKAY,cancelText:ie.Z.Messages.CANCEL,onConfirm:function(){return T.default.relaunch()}},e),{children:(0,r.jsx)(u.xv,{variant:"text-md/normal",children:ie.Z.Messages.SCREENSHARE_RELAUNCH_BODY})}))}));return[2]}i.label=2;case 2:t?H():z();return[2]}}))}))).apply(this,arguments)}var Me=l.useCallback((function(e){ge(e);if(null!=e){se(xt.CONFIRM);fe(!0)}}),[]),Ae=l.useCallback((function(e){Ie(e)
;se(k?xt.SOURCE:xt.CONFIRM)}),[k]),Le=function(e){switch(e){case xt.SOURCE:return ie.Z.Messages.GO_LIVE_MODAL_DESCRIPTION_SELECT_SOURCE;case xt.CONFIRM:return null;case xt.GUILD:default:return ie.Z.Messages.GO_LIVE_MODAL_DESCRIPTION_GENERIC}}(ae),De=(0,r.jsx)(R.xB,{className:_e().modalHeader,separator:!1,children:(0,r.jsxs)(x.Z,{direction:x.Z.Direction.VERTICAL,align:x.Z.Align.CENTER,className:_e().header,children:[(0,r.jsx)(u.X6,{variant:"heading-xl/semibold",id:le,className:_e().headerText,children:ie.Z.Messages.GO_LIVE_MODAL_TITLE}),null!=Le?(0,r.jsx)(u.xv,{className:_e().headerDescription,variant:"text-md/normal",color:"text-normal",children:Le}):null]})}),Ue=(0,r.jsxs)(j.My,{springConfig:Ot(Et({},a.config.stiff),{clamp:!0}),activeSlide:ae,width:480,children:[(0,r.jsx)(j.Mi,{id:xt.GUILD,children:(0,r.jsx)("div",{className:_e().modalSize,children:(0,r.jsx)(Tn,{onSelectGuild:Ae})})}),(0,r.jsx)(j.Mi,{id:xt.SOURCE,children:(0,r.jsx)("div",{className:_e().modalSize,children:(0,
r.jsx)(mt,{selectedSource:ve,onChangeSelectedSource:Me})})}),(0,r.jsx)(j.Mi,{id:xt.CONFIRM,children:(0,r.jsx)("div",{className:_e().modalSize,children:(0,r.jsx)(xn,{selectedChannelId:pe,selectedPreset:be,selectedResolution:Oe,selectedSource:ve,selectedFPS:je,sourceChanged:ce,selectSource:k,onChangeSelectedFPS:function(e){return Te(be,Oe,e)},onChangeSelectedResolution:function(e){return Te(be,e,je)},onChangeSelectedPreset:function(e){return Te(e,Oe,je)},onChangeSelectedChannelId:he,onChangeSource:function(){return se(xt.SOURCE)},onChangeGuild:function(){return se(xt.GUILD)},onClose:F,guildId:Ze,selectGuild:D})})})]}),ke=function(e,n,t,r){switch(e){case xt.SOURCE:return n?xt.GUILD:null;case xt.CONFIRM:return r?xt.SOURCE:!t&&n?xt.GUILD:null;case xt.GUILD:default:return null}}(ae,D,k,ce),Ge=ae!==xt.CONFIRM||null==ve&&null==q||null==Pe,Ve=(0,r.jsxs)(R.mz,{justify:null==ke?x.Z.Justify.START:x.Z.Justify.BETWEEN,children:[(0,r.jsx)(u.zx,{type:"submit",size:u.zx.Sizes.SMALL,disabled:Ge,
autoFocus:!0,children:ie.Z.Messages.GO_LIVE_MODAL_CTA}),null==ke?(0,r.jsx)(u.zx,{className:_e().cancelButton,look:u.zx.Looks.LINK,size:u.zx.Sizes.SMALL,color:u.Tt.PRIMARY,onClick:F,children:ie.Z.Messages.CANCEL}):(0,r.jsx)(u.zx,{size:u.zx.Sizes.SMALL,color:u.Tt.PRIMARY,onClick:function(){return se(ke)},children:ie.Z.Messages.BACK})]});return(0,r.jsx)(p.Z,{page:Ke.ZY5.GO_LIVE_MODAL,children:(0,r.jsxs)(R.Y0,{"aria-labelledby":le,transitionState:B,size:R.Cg.DYNAMIC,className:_e().modalSize,children:[(0,r.jsx)(R.ol,{onClick:F,className:_e().modalCloseButton}),(0,r.jsx)("div",{className:_e().art}),(0,r.jsxs)("form",{onSubmit:function(e){return we.apply(this,arguments)},children:[De,Ue,Ve]})]})})}},617781:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(785893),l=(t(667294),t(294184)),o=t.n(l),i=t(647446),a=t(237702),s=t.n(a),u=function(e){var n=e.data,t=e.disabled,l=n.content,a=n.className,u=n.onClick,c=n.disabled;return(0,r.jsx)(i.tE,{children:(0,r.jsx)("button",{type:"button",className:o()(s().item,a),
onClick:u,disabled:t||c,children:l})})};const c=function(e){var n=e.buttons,t=e.disabled,l=e.className;return(0,r.jsx)("div",{role:"group",className:o()(s().group,l),children:n.map((function(e,n){return(0,r.jsx)(u,{data:e,disabled:t},n)}))})}}}]);
//# sourceMappingURL=bb17f2524a0b8b55d91b.js.map