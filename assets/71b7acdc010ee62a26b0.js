(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[42212],{545292:(e,t,n)=>{e.exports=n.p+"3294183db720bd0985871f6aa43e6e28.png"},933599:(e,t,n)=>{"use strict";n.d(t,{Xt:()=>r,sn:()=>o,tt:()=>l,Ow:()=>a,fw:()=>s});var i=n(744564);function r(e){i.Z.dispatch({type:"NEW_PAYMENT_SOURCE_STRIPE_PAYMENT_REQUEST_UPDATE",stripePaymentMethod:e})}function o(e,t){i.Z.dispatch({type:"NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE",info:e,isValid:t})}function l(){i.Z.dispatch({type:"NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE",info:{name:""},isValid:!1})}function a(e,t){i.Z.dispatch({type:"NEW_PAYMENT_SOURCE_ADDRESS_INFO_UPDATE",info:e,isValid:t})}function s(){i.Z.wait((function(){return i.Z.dispatch({type:"NEW_PAYMENT_SOURCE_CLEAR_ERROR"})}))}},388007:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var i=n(744564);function r(){i.Z.dispatch({type:"BILLING_PURCHASE_TOKEN_AUTH_CLEAR_STATE"})}},589503:(e,t,n)=>{"use strict";n.d(t,{d3:()=>B,s5:()=>G,VS:()=>Q,IP:()=>V,Y1:()=>w,QJ:()=>q,J1:()=>D,Gn:()=>U,
to:()=>L,jA:()=>P,y$:()=>x,PC:()=>A,fe:()=>Z,A3:()=>R,kI:()=>j,MZ:()=>H,DV:()=>J,NJ:()=>F,wC:()=>Y,C1:()=>W,_m:()=>z,a2:()=>K});var i=n(667294),r=n(202351),o=n(396043),l=n(489617),a=n(420881),s=n(760014),u=n(833589),c=n(917019),d=n(61209),E=n(567403),f=n(715107),_=n(107218),p=n(652591),m=n(38004);const I=(0,n(260561).B)({kind:"user",id:"2023-01_emoji_discovery_backfill",label:"Emoji Hotrail Backfill",defaultConfig:{shouldBackfillEmojis:!1},treatments:[{id:1,label:"Backfills Hotrail With Emojis",config:{shouldBackfillEmojis:!0}}]});var T=n(230343),O=n(936957),b=n(2590),y=n(940581),g=n(203600),h=n(473708);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function M(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(i=n.next()).done);l=!0){o.push(i.value);if(t&&o.length===t)break}}catch(e){a=!0;r=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}var j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.getGuildId();(0,s.O)(n);var o=B(e),a=Y(n,e),u=F(n),c=z(n,e),d=c.topEmojis,f=c.newlyAddedEmojis,p=c.backfillEmojis,I=q(d,f,p),T=I.allEmojis,b=(0,r.e7)([l.Z],(function(){return l.Z.getDisambiguatedEmojiContext(n)})),y=(0,r.e7)([E.Z],(function(){var e;return null===(e=E.Z.getGuild(n))||void 0===e?void 0:e.name})),g=i.useMemo((function(){var i=_.Z.getFlattenedGuildIds(),r=b.getGroupedCustomEmoji(),s=[],c=!0,d=!1,f=void 0;try{for(var p,I=i[Symbol.iterator]();!(c=(p=I.next()).done);c=!0){var g=p.value,S=E.Z.getGuild(g);if(null!=S){var M=null==r?void 0:r[S.id];if(!(null==M||0===M.length||null!=t&&M.every((function(n){return m.ZP.isEmojiFiltered(n,t,e)})))){var v={type:O.En.GUILD,guild:S};S.id!==n?s.push(v):s.unshift(v)}}}
}catch(e){d=!0;f=e}finally{try{c||null==I.return||I.return()}finally{if(d)throw f}}return l.Z.categories.reduce((function(t,i){if(i===O.UX.TOP_GUILD_EMOJI){if(0===T.length)return t;t.push({type:O.En.TOP_GUILD_EMOJI,id:i,name:h.Z.Messages.EMOJI_CATEGORY_TOP_GUILD_EMOJI.format({guildName:y})})}else if(i===O.UX.RECENT){if(0===a.length)return t;t.push({type:O.En.RECENT,id:i,name:h.Z.Messages.EMOJI_CATEGORY_RECENT})}else if(i===O.UX.FAVORITES){if(0===u.length)return t;t.push({type:O.En.FAVORITES,id:i,name:h.Z.Messages.CATEGORY_FAVORITE})}else if(i===O.UX.CUSTOM){var r,l=s;o||(l=s.filter((function(e){return e.guild.id===n})));(r=t).push.apply(r,C(l))}else G(e)&&t.push({type:O.En.UNICODE,id:i,name:i});return t}),[])}),[b,t,n,e,T.length,y,a.length,u.length,o]);return g},R=function(e){var t=null!=(null==e?void 0:e.getGuildId());p.default.track(b.rMx.PREMIUM_PROMOTION_OPENED,{location_page:t?b.ZY5.GUILD_CHANNEL:b.ZY5.DM_CHANNEL,
location_section:null!=e?b.jXE.EMOJI_PICKER_POPOUT:b.jXE.CUSTOM_STATUS_MODAL})},A=function(e,t){o.ZP.trackWithMetadata(b.rMx.SEARCH_STARTED,{search_type:null!=t&&t===b.HzX.REACTION?b.aib.EMOJI_REACTION:b.aib.EMOJI,location:e})},P=function(e,t,n,i,r){o.ZP.trackWithMetadata(b.rMx.SEARCH_RESULT_VIEWED,{search_type:null!=r&&r===b.HzX.REACTION?b.aib.EMOJI_REACTION:b.aib.EMOJI,total_results:e,num_results_locked:t,query:i,location:n})},x=function(e,t,n,i){var r,l=null!==(r=e.uniqueName)&&void 0!==r?r:e.name;o.ZP.trackWithMetadata(b.rMx.SEARCH_RESULT_SELECTED,{search_type:null!=i&&i===b.HzX.REACTION?b.aib.EMOJI_REACTION:b.aib.EMOJI,location:t,expression_guild_id:e.type===a.B.GUILD?e.guildId:void 0,emoji_id:e.id,emoji_name:l,is_custom:null!=e.id,is_animated:e.animated,query:n})},L=function(e,t){o.ZP.trackWithMetadata(b.rMx.SEARCH_RESULT_EMPTY,{search_type:b.aib.EMOJI,query:t,location:e})},U=function(e){var t=e.emoji,n=e.subCategory,i=e.position,r=e.backfillEmoji,l=e.newlyAddedHighlight
;o.ZP.trackWithMetadata(b.rMx.EXPRESSION_PICKER_EXPRESSION_FOCUS,{expression_section:null==n?void 0:n.toString(),newly_added_highlight:l,emoji_id:t.id,emoji_name:t.name,emoji_animated:t.animated,emoji_backfilled:r,emoji_position:i})},Z=function(e){var t,n,i=e.emoji,r=e.location,l=e.pickerIntention,s=e.category,u=e.subCategory,c=void 0===u?O.t0.NONE:u,d=e.position,E=e.backfillEmoji,f=e.newlyAddedHighlight,_=e.isBurstReaction;switch(l){case b.HzX.REACTION:t=_?g.cd.EMOJI_PICKER_SUPER_REACTION_EMOJI_CLICKED:g.cd.EMOJI_PICKER_REACTION_EMOJI_CLICKED;break;case b.HzX.STATUS:t=g.cd.EMOJI_PICKER_STATUS_EMOJI_CLICKED;break;default:t=g.cd.EMOJI_PICKER_EMOJI_CLICKED}var p=null!==(n=i.uniqueName)&&void 0!==n?n:i.name;o.ZP.trackWithMetadata(b.rMx.EXPRESSION_PICKER_EXPRESSION_SELECTED,{type:t,location:r,expression_id:i.id,expression_name:p,expression_guild_id:i.type===a.B.GUILD?i.guildId:void 0,is_custom:null!=i.id,is_animated:i.animated,expression_picker_section:s,
expression_section:null==c?void 0:c.toString(),emoji_position:d,emoji_backfilled:E,newly_added_highlight:f,is_burst:_})},D=function(e){var t,n=e.emoji,i=e.location,r=null!==(t=n.uniqueName)&&void 0!==t?t:n.name;o.ZP.trackWithMetadata(b.rMx.EXPRESSION_FAVORITED,{location:i,expression_type:y.X1.EMOJI,expression_id:n.id,expression_name:r,expression_guild_id:n.type===a.B.GUILD?n.guildId:void 0,is_custom:null!=n.id,is_animated:n.animated})},k=function(e){var t=e.containerWidth,n=e.favoriteEmojis,i=e.frequentlyUsedEmoji,r=e.guildEmoji,l=e.emojisTotal,s=e.topEmojis,c=e.newlyAddedEmojis,d=e.backfillEmojis,E=e.pickerIntention,f=e.isBurstReaction,_=void 0!==f&&f,p=e.analyticsObject,m=u.Z.remainingBurstCurrency;o.ZP.trackWithMetadata(E===b.HzX.REACTION?b.rMx.REACTION_PICKER_OPENED:b.rMx.EXPRESSION_PICKER_OPENED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));i.forEach((function(t){M(e,t,n[t])}))}return e}({width:t,tab:y.X1.EMOJI,badged:!1,num_expressions_favorites:n.length,num_animated_expressions_favorites:n.filter((function(e){return null==e?void 0:e.animated})).length,num_custom_expressions_favorites:n.filter((function(e){return e.type===a.B.GUILD})).length,num_standard_expressions_favorites:n.filter((function(e){return null==e.id})).length,num_expressions_frecent:i.length,num_animated_expressions_frecent:i.filter((function(e){return null==e?void 0:e.animated})).length,num_custom_expressions_frecent:i.filter((function(e){return e.type===a.B.GUILD})).length,num_standard_expressions_frecent:i.filter((function(e){return null==e.id})).length,num_current_guild_expressions:r.length,num_custom_expressions_total:l,num_expressions_top_server:s.length,
num_animated_expressions_top_server:s.filter((function(e){return e.animated})).length,num_expressions_newly_added:c.length,num_animated_expressions_newly_added:c.filter((function(e){return e.animated})).length,num_expressions_backfilled:d.length,num_animated_expressions_backfilled:d.filter((function(e){return e.animated})).length},E===b.HzX.REACTION&&{is_burst:_,burst_reaction_balance:m},null!=p&&{location_object:p}))},w=function(e,t){switch(e){case O.UX.TOP_GUILD_EMOJI:return h.Z.Messages.EMOJI_CATEGORY_TOP_GUILD_EMOJI.format({guildName:t});case O.UX.RECENT:return h.Z.Messages.EMOJI_CATEGORY_RECENT;case O.UX.FAVORITES:return h.Z.Messages.CATEGORY_FAVORITE;case O.UX.ACTIVITY:return h.Z.Messages.EMOJI_CATEGORY_ACTIVITY;case O.UX.FLAGS:return h.Z.Messages.EMOJI_CATEGORY_FLAGS;case O.UX.FOOD:return h.Z.Messages.EMOJI_CATEGORY_FOOD;case O.UX.NATURE:return h.Z.Messages.EMOJI_CATEGORY_NATURE;case O.UX.OBJECTS:return h.Z.Messages.EMOJI_CATEGORY_OBJECTS;case O.UX.PEOPLE:
return h.Z.Messages.EMOJI_CATEGORY_PEOPLE;case O.UX.SYMBOLS:return h.Z.Messages.EMOJI_CATEGORY_SYMBOLS;case O.UX.TRAVEL:return h.Z.Messages.EMOJI_CATEGORY_TRAVEL;case O.UX.PREMIUM_UPSELL:return h.Z.Messages.EMOJI_CATEGORY_PREMIUM_UPSELL;default:return null!=t?t:e}},B=function(e){return e!==b.HzX.COMMUNITY_CONTENT&&e!==b.HzX.COMMUNITY_CONTENT_ONLY&&e!==b.HzX.GUILD_STICKER_RELATED_EMOJI&&e!==b.HzX.GUILD_ROLE_BENEFIT_EMOJI&&e!==b.HzX.SOUNDBOARD},G=function(e){return e!==b.HzX.COMMUNITY_CONTENT_ONLY};function J(e,t,n){i.useEffect((function(){c.DZ.loadIfNecessary()}),[]);var o=B(n);return(0,r.e7)([l.Z],(function(){var i=e.replace(/^:/,"").replace(/:$/,"");return""===i?null:l.Z.searchWithoutFetchingLatest({channel:t,query:i,count:0,intention:n,includeExternalGuilds:o})}),[t,n,e,o],r.pF)}function Y(e,t){i.useEffect((function(){t!==b.HzX.SOUNDBOARD&&c.DZ.loadIfNecessary()}),[t]);return(0,r.Wu)([l.Z],(function(){
return t!==b.HzX.SOUNDBOARD?l.Z.getDisambiguatedEmojiContext(e).getFrequentlyUsedEmojisWithoutFetchingLatest():[]}))}function F(e){i.useEffect((function(){c.DZ.loadIfNecessary()}),[]);return(0,r.Wu)([l.Z],(function(){return l.Z.getDisambiguatedEmojiContext(e).favoriteEmojisWithoutFetchingLatest}))}function W(e,t){i.useEffect((function(){c.DZ.loadIfNecessary()}),[]);return(0,r.e7)([l.Z],(function(){return null!=t&&l.Z.getDisambiguatedEmojiContext(e).isFavoriteEmojiWithoutFetchingLatest(t)}))}function H(e){i.useEffect((function(){c.DZ.loadIfNecessary()}),[]);return(0,r.Wu)([l.Z],(function(){return l.Z.getDisambiguatedEmojiContext(e).getEmojiInPriorityOrderWithoutFetchingLatest()}))}var X=[];function z(e,t){var n=v((0,r.Wu)([l.Z],(function(){return[l.Z.getTopEmoji(e),l.Z.getNewlyAddedEmoji(e),l.Z.getBackfillTopEmojis(e)]})),3),i=n[0],o=n[1],a=n[2],s=(0,T.R)(!0),u=s.shouldSeeNewlyAddedEmoji,c=s.shouldSeeTopEmojiBar,d=I.useExperiment({},{autoTrackExposure:!1}).shouldBackfillEmojis
;return t===b.HzX.REACTION?{topEmojis:X,newlyAddedEmojis:X,backfillEmojis:X}:{topEmojis:c?i:X,newlyAddedEmojis:u?o:X,backfillEmojis:c&&d?a:X}}function K(e){var t=e.intention,n=e.rowSize,o=e.isBurstReaction,a=e.analyticsObject,s=(0,r.Wu)([l.Z],(function(){return l.Z.emojiFrecencyWithoutFetchingLatest.frequently.slice()})),u=(0,r.e7)([l.Z],(function(){return l.Z.emojiFrecencyWithoutFetchingLatest.numFrequentlyItems})),c=(0,r.e7)([d.Z,f.Z],(function(){return d.Z.getChannel(f.Z.getChannelId())})),E=(0,r.Wu)([l.Z],(function(){return null!=c?l.Z.getDisambiguatedEmojiContext(c.getGuildId()).favoriteEmojisWithoutFetchingLatest:[]})),_=s.slice(0,u),p=(0,r.cj)([l.Z],(function(){var e;return null!==(e=l.Z.getDisambiguatedEmojiContext(null==c?void 0:c.getGuildId()).groupedCustomEmojis)&&void 0!==e?e:{}})),m=i.useMemo((function(){var e=null==c?void 0:c.getGuildId();return null!=e?l.Z.getGuildEmoji(e):[]}),[c]),I=Object.values(p).reduce((function(e,t){return e+=t.length
}),0),T=z(null==c?void 0:c.getGuildId(),t),O=q(T.topEmojis,T.newlyAddedEmojis,T.backfillEmojis,n),y=O.visibleTopEmojis,g=O.visibleNewlyAddedEmojis,h=O.visibleBackfillEmojis,S=i.useCallback((function(){k({favoriteEmojis:E,frequentlyUsedEmoji:_,guildEmoji:m,emojisTotal:I,backfillEmojis:h,topEmojis:y,newlyAddedEmojis:g,pickerIntention:t,isBurstReaction:o,analyticsObject:a})}),[E,_,m,I,h,y,g,t,o,a]);i.useEffect((function(){t===b.HzX.REACTION&&S()}),[]);return{trackOnPickerOpen:S}}function V(e,t,n){if(null==n)return O.t0.NONE;var i,r,o=e.map((function(e){return null!==(r=null!==(i=e.id)&&void 0!==i?i:e.uniqueName)&&void 0!==r?r:e.name})),l=t.map((function(e){return e.id}));return o.includes(n)?O.t0.TOP_GUILD_EMOJI:l.includes(n)?O.t0.NEWLY_ADDED_EMOJI:O.t0.NONE}function q(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O.N6,r=e.slice(0,i-t.length),o=[];r.length+t.length<i&&(o=n.slice(0,i-e.length-t.length));var l=r.concat(o).concat(t);return{visibleTopEmojis:r,
visibleNewlyAddedEmojis:t,visibleBackfillEmojis:o,allEmojis:l}}function Q(e){var t=new Set;return e.filter((function(e){if(null==e.uniqueName)return!0;if(!t.has(e.optionallyDiverseSequence)){t.add(e.optionallyDiverseSequence);return!0}}))}},953375:(e,t,n)=>{"use strict";n.d(t,{pj:()=>l,pr:()=>a,Zg:()=>s});var i=n(281110),r=n(744564),o=n(2590);function l(e){r.Z.dispatch({type:"TOP_EMOJIS_FETCH",guildId:e});i.Z.get({url:o.ANM.TOP_EMOJIS_FOR_GUILD(e),oldFormErrors:!0}).then((function(t){return r.Z.dispatch({type:"TOP_EMOJIS_FETCH_SUCCESS",guildId:e,topEmojisMetadata:t.body.items.map((function(e){return{emojiId:e.emoji_id,rank:e.emoji_rank}})).sort((function(e,t){return e.rank-t.rank}))})}),(function(){return r.Z.dispatch({type:"TOP_EMOJIS_FETCH_FAILURE",guildId:e})}))}function a(e,t){r.Z.dispatch({type:"NEWLY_ADDED_EMOJI_SEEN_UPDATED"});null!=e&&null!=t&&r.Z.dispatch({type:"NEWLY_ADDED_EMOJI_SEEN_PENDING",guildId:e,emojiId:t})}function s(e,t){null!=e&&null!=t&&r.Z.dispatch({
type:"NEWLY_ADDED_EMOJI_SEEN_ACKNOWLEDGED",guildId:e,emojiId:t})}},760014:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var i=n(230343),r=n(473903),o=n(489617),l=n(37763),a=n(953375);function s(e){if(null!=e){if(null!=r.default.getCurrentUser()){if((0,i.Y)().shouldSeeTopEmojiBar){var t=o.Z.getTopEmojisMetadata(e);if(null!=t){var n=t.topEmojisTTL;if(null==n||Date.now()<n)return}l.Z.getIsFetching(e)||(0,a.pj)(e)}}}}},276611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(785893),r=(n(667294),n(468811)),o=n.n(r),l=n(945460),a=n(933599),s=n(388007),u=n(436145),c=n(652591),d=n(930948),E=n(2590),f=n(203600);function _(e,t,n,i,r,o,l){try{var a=e[o](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(i,r)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function l(e){_(o,i,r,l,a,"next",e)}function a(e){_(o,i,r,l,a,"throw",e)}l(void 0)}))}}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}function I(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function T(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}}return r}var O=function(e,t){var n,i,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={
next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;(i=0,r)&&(o=[2&o[0],r.value]);switch(o[0]){case 0:case 1:r=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;i=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(r=l.trys,r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1];r=o;break}if(r&&l.label<r[2]){l.label=r[2];l.ops.push(o);break}r[2]&&l.ops.pop();l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e];i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function b(e){
var t=null!=e?e:{},r=t.initialPlanId,_=t.followupSKUInfo,b=t.onClose,y=t.onComplete,g=t.onSubscriptionConfirmation,h=t.analyticsLocations,S=t.analyticsObject,M=t.analyticsLocation,v=t.analyticsSourceLocation,C=t.isGift,N=void 0!==C&&C,j=t.giftMessage,R=t.subscriptionTier,A=t.trialId,P=t.postSuccessGuild,x=t.openInvoiceId,L=t.applicationId,U=t.referralTrialOfferId,Z=!1,D=o().v4();(0,l.openModalLazy)(p((function(){var e,t;return O(this,(function(o){switch(o.label){case 0:return[4,Promise.all([n.e(40532),n.e(77722),n.e(87820),n.e(28531),n.e(32052),n.e(40056),n.e(92224),n.e(85227),n.e(13586),n.e(27499),n.e(54857),n.e(17091),n.e(29223),n.e(50763),n.e(73727),n.e(36154),n.e(11944),n.e(52555),n.e(54602),n.e(61953),n.e(6565),n.e(36334),n.e(10675),n.e(24251),n.e(30027),n.e(76294),n.e(9600),n.e(27913),n.e(49096),n.e(38039),n.e(66885),n.e(44485),n.e(27059),n.e(28283),n.e(57521),n.e(5683),n.e(51934),n.e(37983),n.e(31947),n.e(50368),n.e(1514)]).then(n.bind(n,768253))];case 1:e=o.sent(),t=e.default
;return[2,function(e){var n=e.onClose,o=T(e,["onClose"]);return(0,i.jsx)(t,I(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));i.forEach((function(t){m(e,t,n[t])}))}return e}({},o),{loadId:D,subscriptionTier:R,skuId:R,isGift:N,giftMessage:j,initialPlanId:r,followupSKUInfo:_,onClose:function(e){n();null==b||b(e);e&&(null==g||g())},onComplete:function(){Z=!0;null==y||y();if(!N){(0,u.Dd)(!0);(0,u.HY)(!0)}},onSubscriptionConfirmation:g,analyticsLocations:h,analyticsObject:S,analyticsLocation:M,analyticsSourceLocation:v,trialId:A,postSuccessGuild:P,planGroup:f.Y1,openInvoiceId:x,applicationId:L,referralTrialOfferId:U}))}]}}))})),{onCloseCallback:function(){Z||c.default.track(E.rMx.PAYMENT_FLOW_CANCELED,{load_id:D,payment_type:"subscription",location:null!=M?M:S,
source:v,subscription_type:E.NYc.PREMIUM,is_gift:N,eligible_for_trial:null!=A,application_id:L,location_stack:h});(0,a.fw)();(0,s.p)();null==b||b(Z);if(Z){N||d.S.dispatch(E.CkL.PREMIUM_SUBSCRIPTION_CREATED);null==g||g()}}})}},436145:(e,t,n)=>{"use strict";n.d(t,{Lt:()=>r,XL:()=>o,Rr:()=>l,HY:()=>a,Dd:()=>s,p:()=>u});var i=n(744564),r=function(){i.Z.dispatch({type:"PREMIUM_TUTORIAL_PERSISTENT_ONBOARDING_TOGGLE_COLLAPSE"})},o=function(){i.Z.dispatch({type:"SET_HAS_COMPLETED_STEP"})},l=function(){i.Z.dispatch({type:"RESET_PREMIUM_TUTORIAL_STORE"})},a=function(e){i.Z.dispatch({type:"PREMIUM_TUTORIAL_SET_CAN_PLAY_WOW_MOMENT",value:e})},s=function(e){i.Z.dispatch({type:"PREMIUM_TUTORIAL_PERSISTENT_SET_IS_HIDDEN",value:e})},u=function(e){i.Z.dispatch({type:"PREMIUM_TUTORIAL_SET_NAVIGATED_FROM_HELPER",value:e})}},455706:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(785893),r=(n(667294),
n(294184)),o=n.n(r),l=n(202351),a=n(945460),s=n(734691),u=n(19585),c=n(589503),d=n(276611),E=n(784426),f=n(800336),_=n(473903),p=n(536392),m=n(901654),I=n(709189),T=n(799043),O=n(95891),b=n(850841),y=n(203600),g=n(2590),h=n(473708),S=n(750948),M=n.n(S);function v(e,t,n,i,r,o,l){try{var a=e[o](l),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(i,r)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function l(e){v(o,i,r,l,a,"next",e)}function a(e){v(o,i,r,l,a,"throw",e)}l(void 0)}))}}function N(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));i.forEach((function(t){N(e,t,n[t])
}))}return e}function R(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function A(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}}return r}var P=function(e,t){var n,i,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},
"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;(i=0,r)&&(o=[2&o[0],r.value]);switch(o[0]){case 0:case 1:r=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;i=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(r=l.trys,r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1];r=o;break}if(r&&l.label<r[2]){l.label=r[2];l.ops.push(o);break}r[2]&&l.ops.pop();l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e];i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};const x=function(e){var t=function(e){var t,n;return(0,i.jsxs)(I.C,R(j({disabled:ie,
onClick:Q,innerClassName:M().premiumSubscribeButton,color:S===y.Si.TIER_1?a.Button.Colors.PRIMARY:a.Button.Colors.GREEN,size:N,wrapperClassName:x,pauseAnimation:!K||Y},X,e),{children:[J&&(0,i.jsx)(O.Z,{className:M().premiumIcon}),(0,i.jsx)("span",{className:o()(M().buttonText,D),children:null!==(n=null!==(t=null==re?void 0:re.disabledButtonText)&&void 0!==t?t:Z)&&void 0!==n?n:$})]}))
},r=e.isGift,S=e.subscriptionTier,v=e.onClick,N=e.size,x=e.className,L=e.trialId,U=e.isTrialCTA,Z=e.buttonText,D=e.buttonTextClassName,k=e.postSuccessGuild,w=e.onSubscribeModalClose,B=e.premiumModalAnalyticsLocation,G=e.showIcon,J=void 0===G||G,Y=e.disableShine,F=e.applicationId,W=e.giftMessage,H=e.overrideDisabledButtonText,X=A(e,["isGift","subscriptionTier","onClick","size","className","trialId","isTrialCTA","buttonText","buttonTextClassName","postSuccessGuild","onSubscribeModalClose","premiumModalAnalyticsLocation","showIcon","disableShine","applicationId","giftMessage","overrideDisabledButtonText"]),z=(0,l.e7)([_.default],(function(){return _.default.getCurrentUser()})),K=(0,l.e7)([m.Z],(function(){return m.Z.isFocused()})),V=(0,l.e7)([p.Z],(function(){return p.Z.getPremiumTypeSubscription()})),q=(0,u.Z)().analyticsLocations,Q=function(e){e.preventDefault();if(null!=z){null==v||v(e);if((null==V?void 0:V.status)!==g.O0b.ACCOUNT_HOLD)!function(e){
var t=e.isClaimed,r=e.isVerified,o=e.isGift,l=e.subscriptionTier,s=e.trialId,u=e.postSuccessGuild,c=e.onSubscribeModalClose,E=e.analyticsLocations,f=e.premiumModalAnalyticsLocation,_=e.applicationId,p=e.giftMessage;if(t)if(r){var m=g.Qqv.BUY;null!=s?m=g.Qqv.TRIAL:o&&(m=g.Qqv.GIFT);(0,d.Z)({isGift:o,initialPlanId:null,subscriptionTier:l,analyticsLocations:E,analyticsObject:j({object:g.qAy.BUTTON_CTA,objectType:m},f),trialId:s,postSuccessGuild:u,onClose:c,applicationId:_,giftMessage:p})}else(0,a.openModalLazy)(C((function(){var e,t;return P(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.e(40532),n.e(83097),n.e(47365)]).then(n.bind(n,283097))];case 1:e=r.sent(),t=e.default;return[2,function(e){var n=e.onClose,r=A(e,["onClose"]);return(0,i.jsx)(t,R(j({},r),{onClose:n}))}]}}))})));else(0,a.openModalLazy)(C((function(){var e,t;return P(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.e(40532),n.e(90034)]).then(n.bind(n,590034))];case 1:e=r.sent(),t=e.default
;return[2,function(e){var n=e.onClose,r=A(e,["onClose"]);return(0,i.jsx)(t,R(j({},r),{onClose:n}))}]}}))})))}({isClaimed:z.isClaimed(),isVerified:z.verified,isGift:r,subscriptionTier:S,trialId:L,postSuccessGuild:k,onSubscribeModalClose:w,analyticsLocations:q,premiumModalAnalyticsLocation:B,applicationId:F,giftMessage:W});else{(0,c.A3)();s.Z.open(g.oAB.PREMIUM);null==w||w(!1)}}else(0,E.uL)(g.Z5c.LOGIN)};if(U)return(0,i.jsxs)(a.Button,R(j({size:N,className:x,innerClassName:M().premiumSubscribeButton,look:a.Button.Looks.INVERTED,onClick:Q},X),{children:[J&&(0,i.jsx)(O.Z,{className:M().premiumIcon}),(0,i.jsx)("span",{className:o()(M().buttonText,D),children:null!=Z?Z:h.Z.Messages.PREMIUM_TRIAL_CTA_BUTTON_VARIANT})]}));if(r)return(0,i.jsxs)(a.Button,R(j({size:N,className:x,innerClassName:M().giftButton,color:a.Button.Colors.PRIMARY,onClick:Q},X),{children:[(0,i.jsx)(T.Z,{className:M().giftIcon}),(0,i.jsx)("span",{className:o()(M().buttonText,D),
children:null!=Z?Z:h.Z.Messages.PREMIUM_GIFTING_BUTTON})]}));var $=h.Z.Messages.APPLICATION_STORE_GET_PREMIUM,ee=null!=V?(0,b.Af)(V):null,te=null!=ee?b.ZP.getPremiumType(ee.planId):null==z?void 0:z.premiumType,ne=S===y.Si.TIER_2&&null!=te&&[y.p9.TIER_0,y.p9.TIER_1].includes(te);ne&&($=h.Z.Messages.BILLING_SWITCH_PLAN_UPGRADE);var ie=null!=V&&V.status!==g.O0b.ACCOUNT_HOLD&&!(0,f.Q)(V.planId)&&!ne,re=ie?null!=H?H:function(e){var t=e.ctaSubscriptionSkuId,n=e.currentPremiumType,i=null,r=null;if(null!=t&&t!==y.Si.LEGACY&&t!==y.Si.TIER_0&&t!==y.Si.TIER_1&&t!==y.Si.TIER_2)return{disabledButtonText:i,disabledButtonTooltipText:r};var o=null!=t?y.y7[t]:null,l=null!=o?y.$e[o]:null,a=null!=n?y.$e[n]:null;if(null!=a&&null!=l&&l<a){i=h.Z.Messages.APPLICATION_STORE_GET_PREMIUM;r=h.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP}else if(null!=o&&null!=n&&o===n){i=h.Z.Messages.BILLING_SWITCH_PLAN_CURRENT_PLAN;r=h.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP
}else null==o&&null!=n&&n===y.p9.TIER_2&&(r=h.Z.Messages.PREMIUM_SUBSCRIPTION_BUTTON_DISABLED_MANAGE_PLAN_TOOLTIP);return{disabledButtonText:i,disabledButtonTooltipText:r}}({ctaSubscriptionSkuId:S,currentPremiumType:te}):null;return null!=(null==re?void 0:re.disabledButtonTooltipText)?(0,i.jsx)(a.Tooltip,{text:re.disabledButtonTooltipText,children:t}):t()}},70535:(e,t,n)=>{"use strict";n.d(t,{As:()=>i,dg:()=>b,dz:()=>y,ZP:()=>g});var i,r=n(785893),o=(n(667294),n(294184)),l=n.n(o),a=n(441143),s=n.n(a),u=n(945460),c=n(318586),d=n(874414),E=n(95891),f=n(850841),_=n(717035),p=n(203600),m=n(473708),I=n(42707),T=n.n(I);function O(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}!function(e){e[e.EMOJI_CUSTOM=0]="EMOJI_CUSTOM";e[e.STICKERS_IN_HOUSE=1]="STICKERS_IN_HOUSE";e[e.STICKERS_CUSTOM=2]="STICKERS_CUSTOM"}(i||(i={}));function b(e){var t,n,i,o=null===(t=(0,
_.N)())||void 0===t?void 0:t.subscription_trial,a=null!==(n=null==o?void 0:o.sku_id)&&void 0!==n?n:p.Si.TIER_2;return(0,r.jsxs)("div",{className:l()(T().gradientUpsellWrapper,(i={},O(i,T().gradientUpsellWrapperTier0,a===p.Si.TIER_0),O(i,T().gradientUpsellWrapperTier2,a===p.Si.TIER_2),O(i,T().gradientUpsellWrapperWithBottomMargin,e.withBottomMargin),i)),children:[(0,r.jsxs)("div",{className:T().logo,children:[(0,r.jsx)(E.Z,{className:T().logoIcon}),a===p.Si.TIER_0&&(0,r.jsx)(d.Z,{className:T().logoWordmark}),a===p.Si.TIER_2&&(0,r.jsx)(c.Z,{className:T().logoWordmark})]}),(0,r.jsx)(u.Text,{variant:"text-md/medium",className:T().copy,color:"none",children:e.children}),(0,r.jsx)(u.Text,{variant:"text-xs/bold",className:T().trialBadge,children:(0,r.jsx)("span",{className:T().trialBadgeInner,children:(0,f.a5)({intervalType:null==o?void 0:o.interval,intervalCount:null==o?void 0:o.interval_count})})})]})}function y(e){var t,n,i,o=null===(t=(0,
_.N)())||void 0===t?void 0:t.subscription_trial,a=null!==(n=null==o?void 0:o.sku_id)&&void 0!==n?n:p.Si.TIER_2;return(0,r.jsx)(u.Text,{variant:"text-xs/bold",className:l()(T().trialBadge,e.className,(i={},O(i,T().trialBadgeGradientTier0,a===p.Si.TIER_0),O(i,T().trialBadgeGradientTier2,a===p.Si.TIER_2),i)),color:"none",children:(0,f.a5)({intervalType:null==o?void 0:o.interval,intervalCount:null==o?void 0:o.interval_count})})}function g(e){switch(e.type){case i.STICKERS_IN_HOUSE:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Text,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",children:m.Z.Messages.STICKER_PICKER_PREMIUM_EMPTY_STATE_TITLE}),(0,r.jsx)(b,{children:m.Z.Messages.PREMIUM_TRIAL_UPSELL_STICKERS_IN_HOUSE})]});case i.STICKERS_CUSTOM:s()(null!=e.children,"You must specify children for this upsell type");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Text,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",
children:m.Z.Messages.STICKER_PICKER_PREMIUM_UPSELL_TITLE}),(0,r.jsx)(b,{children:e.children})]});case i.EMOJI_CUSTOM:s()(null!=e.children,"You must specify children for this upsell type");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Text,{className:T().heading,variant:"text-lg/semibold",color:"header-primary",children:m.Z.Messages.PREMIUM_PROMO_TITLE_SEARCH_UPSELL}),(0,r.jsx)(b,{withBottomMargin:!0,children:e.children})]});default:return null}}},442212:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(785893),r=n(667294),o=n(294184),l=n.n(o),a=n(945460),s=n(153686),u=n(19585),c=n(594302),d=n(652591),E=n(717035),f=n(455706),_=n(70535),p=n(203600),m=n(2590),I=n(473708),T=n(296024),O=n.n(T),b=n(545292),y=n.n(b);function g(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e)
;for(i=0;i<o.length;i++){n=o[i];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}}return r}function h(e){
var t,n=e.title,o=e.type,T=e.guildBoostProps,b=e.analyticsSource,h=e.analyticsLocation,S=e.body,M=e.context,v=e.glowUp,C=e.modalClassName,N=e.artContainerClassName,j=e.bodyClassName,R=e.transitionState,A=e.onClose,P=e.onSubscribeClick,x=e.onSecondaryClick,L=e.secondaryCTA,U=e.subscribeButtonText,Z=e.showNewBadge,D=void 0!==Z&&Z,k=e.enableArtBoxShadow,w=void 0===k||k,B=e.subscriptionTier,G=void 0===B?p.Si.TIER_2:B,J=e.isLoading,Y=void 0!==J&&J,F=e.hideBackButton,W=e.backButtonText,H=g(e,["title","type","guildBoostProps","analyticsSource","analyticsLocation","body","context","glowUp","modalClassName","artContainerClassName","bodyClassName","transitionState","onClose","onSubscribeClick","onSecondaryClick","secondaryCTA","subscribeButtonText","showNewBadge","enableArtBoxShadow","subscriptionTier","isLoading","hideBackButton","backButtonText"]),X=null!=T,z=(0,E.N)(),K=(null==z||null===(t=z.subscription_trial)||void 0===t?void 0:t.sku_id)===G&&!X,V=(0,
u.Z)(s.Z.PREMIUM_UPSELL_MODAL).analyticsLocations;r.useEffect((function(){Y||(X?d.default.track(m.rMx.PREMIUM_GUILD_UPSELL_VIEWED,{type:"".concat(o," - Tier ").concat(T.boostedGuildTier),guild_id:T.guild.id,channel_id:T.channelId,location:h,location_stack:V}):d.default.track(m.rMx.PREMIUM_UPSELL_VIEWED,{type:o,source:b,location_stack:V,sku_id:G}))}),[X,G,Y]);var q=w?l()(O().artContainer,O().artContainerBoxShadow,N):l()(O().artContainer,N),Q=null;Q="artURL"in H?(0,i.jsx)("img",{className:O().art,alt:"",src:H.artURL}):H.artElement;return(0,i.jsxs)(a.ModalRoot,{className:l()(O().root,C),"aria-label":n,transitionState:R,children:[(0,i.jsxs)("div",{className:q,children:[Q,D?(0,i.jsx)("img",{className:O().sparkleBadge,alt:"",src:y()}):null]}),(0,i.jsx)(a.ModalContent,{className:O().content,children:Y?(0,i.jsx)(a.Spinner,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Heading,{className:O().header,variant:"heading-xl/semibold",children:n}),K?(0,i.jsxs)(i.Fragment,{children:[null!=M&&(0,
i.jsx)(a.Text,{className:O().context,variant:"text-md/normal",children:M}),(0,i.jsx)(_.dg,{children:v})]}):(0,i.jsx)(a.Text,{variant:"text-md/normal",className:l()(j),children:S})]})}),(0,i.jsxs)(a.ModalFooter,{className:O().footer,children:[(0,i.jsxs)("div",{className:O().primaryActions,children:[null!=L?(0,i.jsx)(a.Button,{className:O().secondaryAction,onClick:x,size:a.Button.Sizes.SMALL,color:a.Button.Colors.PRIMARY,look:a.Button.Looks.LINK,children:L}):null,function(){var e;if(X)return(0,i.jsx)(c.Z,{analyticsLocation:h,guild:T.guild,onClose:A});var t=K?(null==z||null===(e=z.subscription_trial)||void 0===e?void 0:e.sku_id)===p.Si.TIER_2?I.Z.Messages.PREMIUM_TRIAL_CTA_BUTTON_VARIANT:I.Z.Messages.PREMIUM_TRIAL_TIER_0_CTA_BUTTON_VARIANT:void 0;return(0,i.jsx)(f.Z,{premiumModalAnalyticsLocation:h,subscriptionTier:G,size:a.Button.Sizes.SMALL,color:a.Button.Colors.GREEN,onClick:function(){null==P||P();A()},buttonText:null!=U?U:t})}()]}),!F&&(0,i.jsx)(a.Button,{onClick:A,
size:a.Button.Sizes.SMALL,color:a.Button.Colors.PRIMARY,look:a.Button.Looks.LINK,children:null!=W?W:I.Z.Messages.BACK})]})]})}}}]);
//# sourceMappingURL=71b7acdc010ee62a26b0.js.map