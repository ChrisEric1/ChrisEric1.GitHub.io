"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[9795],{22537:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,o=y(r(67294)),a=h(r(92974)),i=h(r(86750)),u=h(r(86460)),s=h(r(89446)),l=y(r(84455)),c=h(r(74257)),f=r(70348),p=r(34596),d=h(r(70591));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}function v(e,t,r,o){
n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}if(t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function m(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(){b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return b.apply(this,arguments)}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var R=function(e){var t;if(null==(null===(t=e.sku)||void 0===t?void 0:t.content_ratings)||null==e.sku.content_ratings[e.agency])return{rating:null,descriptors:[],ratingError:null};var r=e.sku.content_ratings[e.agency],n=r.rating,o=r.descriptors;return{descriptors:Array.from(o),rating:n,ratingError:null}},C=function(e,t){return null==e&&t.length>0?p.Messages.Forms.REQUIRED_FIELD:null},_=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;O(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=e.call.apply(e,[this].concat(n))||this).state=b({},R(t.props));t.handleCheckboxClick=function(e,r){var n=t.props.descriptorMap;if(null!=r){var o=n[r];t.setState((function(e){var t=e.descriptors,r=e.rating,n=t.includes(o)?t.filter((function(e){return e!==o})):[].concat(m(t),[o]);return{descriptors:n,ratingError:C(r,n)}}))}};t.handleSelectChange=function(e){var r=t.props.onChange;t.setState((function(t){var r=t.descriptors,n=null==e?null:e.value;return{rating:n,ratingError:C(n,r)}}));r()};t.renderCheckboxes=function(){var e=t.props.descriptorMap,r=t.state.descriptors;return Object.keys(e).map((function(n){return v(l.GridChild,{columnSpread:3,columnSpreadMedium:4,columnSpreadSmallMedium:6,columnSpreadSmall:6,columnSpreadExtraSmall:12},n,v(s.default,{onChange:t.handleCheckboxClick,value:r.includes(e[n]),name:n,
type:s.default.Types.INVERTED},void 0,p.Messages.ContentDescriptors[n]))}))};t.renderSelectOptions=function(){var e=t.props.agency,r=f.Ratings[e];return Object.keys(r).map((function(e){return{label:p.Messages.SkuRatings[e],value:r[e]}}))};t.resetRatings=function(){t.setState(b({},R(t.props)))};t.getValuesForAPI=function(){var e=t.props.agency,r=t.state,n=r.rating,o=r.descriptors;if(null!=n||o.length>0){var a;return(a={})[e]={rating:n,descriptors:o},a}return null};return t}t.prototype.render=function(){var e=this.props,t=e.heading,r=e.isFlush,n=this.state,o=n.descriptors,s=n.rating,f=n.ratingError;return v(i.default,{isFlush:r},void 0,v(u.default,{},void 0,t),v(l.default,{className:d.default.ratingContentGrid},void 0,v(l.GridSection,{},void 0,v(l.GridChild,{columnSpread:4,columnSpreadSmallMedium:6,columnSpreadSmall:8,columnSpreadExtraSmall:10},void 0,v(a.default,{isRequired:o.length>0},void 0,p.Messages.SkuRatings.RATING),v(c.default,{searchable:!1,clearable:!0,value:s,
options:this.renderSelectOptions(),onChange:this.handleSelectChange,error:f}))),v(l.GridSection,{},void 0,v(l.GridChild,{columnSpread:12},void 0,v(a.default,{},void 0,p.Messages.SkuRatings.CONTENT_DESCRIPTORS)),this.renderCheckboxes())))};return t}(o.Component);t.default=_;_.displayName="RatingSection"},8054:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,o=b(r(67294)),a=r(55558),i=m(r(36211)),u=b(r(18760)),s=m(r(41908)),l=m(r(31055)),c=m(r(81061)),f=m(r(86750)),p=m(r(58350)),d=m(r(69245)),h=m(r(62441)),g=m(r(22537)),y=r(70348),v=r(34596);function m(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}function O(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=o;else if(i>1){for(var u=new Array(i),s=0;s<i;s++)u[s]=arguments[s+3];t.children=u}if(t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function R(){R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return R.apply(this,arguments)}function C(e,t){C=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return C(e,t)}var _={hasUnsavedChanges:!1,submitting:!1,
hasSubmitted:!1,hasSubmissionError:!1},k=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;C(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).esrbRef=o.createRef();t.pegiRef=o.createRef();t.state=R({},_);t.handleFormChange=function(){t.state.hasUnsavedChanges||t.setState({hasUnsavedChanges:!0})};t.handleFormSubmit=function(){var e=t.props.match.params,r=e.id,n=e.skuId;if(null!=t.esrbRef.current){var o=t.esrbRef.current.getValuesForAPI();if(null!=t.pegiRef.current){var a={content_ratings:R({},o,{},t.pegiRef.current.getValuesForAPI())};t.setState({submitting:!0},(function(){u.updateSku(r,n,a).then((function(){t.setState({submitting:!1,hasSubmitted:!0,hasUnsavedChanges:!1,hasSubmissionError:!1})})).catch((function(){t.setState({submitting:!1,hasSubmissionError:!0,hasSubmitted:!1})}))}))}}};t.handleReset=function(){t.setState(R({},_))
;null!=t.esrbRef.current&&t.esrbRef.current.resetRatings();null!=t.pegiRef.current&&t.pegiRef.current.resetRatings()};t.renderFormStatus=function(){var e=t.state,r=e.hasSubmitted;return e.hasSubmissionError?O(l.default,{type:l.default.Types.ERROR},void 0,v.Messages.Alerts.ERROR):r?O(l.default,{type:l.default.Types.SUCCESS},void 0,v.Messages.Alerts.SUCCESS_CHANGES_SAVED):null};return t}t.prototype.render=function(){var e=this.props.sku,t=this.state,r=t.hasUnsavedChanges,n=t.submitting,a=this.renderFormStatus();return O(o.Fragment,{},void 0,O(f.default,{},void 0,O(c.default,{},void 0,v.Messages.SkuRatings.RATINGS),O(p.default,{isFlush:null==a},void 0,v.Messages.SkuRatings.RATINGS_SUBHEADING),a),O(s.default,{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit},void 0,o.createElement(g.default,{ref:this.esrbRef,agency:y.ContentRatingAgencies.ESRB,heading:v.Messages.SkuRatings.ESRB_RATING,descriptorMap:y.ESRBContentDescriptors,onChange:this.handleFormChange,sku:e
}),o.createElement(g.default,{isFlush:!0,ref:this.pegiRef,agency:y.ContentRatingAgencies.PEGI,heading:v.Messages.SkuRatings.PEGI_RATING,descriptorMap:y.PEGIContentDescriptors,onChange:this.handleFormChange,sku:e}),O(d.default,{isVisible:r,actionCopy:v.Messages.Actions.PUBLISH_CHANGES,onReset:this.handleReset,submitting:n})))};return t}(o.Component);k.displayName="SkuRatings";var j=(0,a.withRouter)(i.default.connectStores([h.default],(function(e){return{sku:h.default.getSku(e.match.params.skuId)}}))(k));t.default=j},31055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=c(r(67294)),o=s(r(94184)),a=c(r(34704)),i=s(r(49839)),u=["className"];function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t)
;if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}function f(){f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return f.apply(this,arguments)}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var d=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++){r=a[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,u)
;return n.createElement(a.default,f({},r,{className:(0,o.default)(i.default.formStatusAlert,t)}))};return t}(n.Component);t.default=d;d.displayName="FormStatusAlert";d.Types=a.AlertTypes}}]);
//# sourceMappingURL=918b40aa6e303cbd6e0e.js.map