"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[8157],{48443:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,i=R(n(67294)),s=U(n(96486)),u=n(55558),o=U(n(36211)),a=R(n(21868)),l=U(n(62441)),d=U(n(76806)),c=R(n(34704)),f=R(n(9378)),h=U(n(74257)),p=U(n(80828)),v=U(n(81061)),S=U(n(86750)),g=U(n(86460)),k=U(n(43973)),m=U(n(58350)),y=U(n(69245)),I=U(n(31536)),C=U(n(77545)),b=U(n(62103)),w=n(34596),L=U(n(99737)),_=U(n(34708)),O=["item"];function U(e){return e&&e.__esModule?e:{default:e}}function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(K=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=K(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}r.default=e;n&&n.set(e,r);return r}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++){n=s[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}function N(e,t,n,r,i,s,u){try{var o=e[s](u),a=o.value}catch(e){n(e);return}o.done?t(a):Promise.resolve(a).then(r,i)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function u(e){N(s,r,i,u,o,"next",e)}function o(e){N(s,r,i,u,o,"throw",e)}u(void 0)}))}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}function D(e,t,n,i){
r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var s=e&&e.defaultProps,u=arguments.length-3;t||0===u||(t={children:void 0});if(1===u)t.children=i;else if(u>1){for(var o=new Array(u),a=0;a<u;a++)o[a]=arguments[a+3];t.children=o}if(t&&s)for(var l in s)void 0===t[l]&&(t[l]=s[l]);else t||(t=s||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){var t=e.children;return D(c.default,{type:c.AlertTypes.ERROR},void 0,D("div",{className:_.default.flexCenter},void 0,D(f.default,{className:_.default.errorIcon,name:f.IconNames.WARNING_BOX}),t))}E.displayName="ErrorAlert";var x=D(p.default,{}),H=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;j(e,t)}(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];(t=e.call.apply(e,[this].concat(r))||this).state={childSkuIds:t.getStoreListingChildSkuIds(),submitting:!1,error:null}
;t.handleListChange=function(e){t.setState({childSkuIds:e})};t.handleSelectChange=function(e){var n=e.value,r=t.state.childSkuIds;t.setState({childSkuIds:[].concat(r,[n])})};t.handleRemoveSKU=function(e){var n=t.state.childSkuIds;t.setState({childSkuIds:n.filter((function(t){return e!==t}))})};t.handleSave=P(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=t.props.storeListing)){e.next=3;break}throw new Error("Store listing was null at time of save.");case 3:t.setState({submitting:!0,error:null});e.prev=4;e.next=7;return a.updateStoreListing(n.id,{child_sku_ids:t.state.childSkuIds});case 7:e.next=12;break;case 9:e.prev=9;e.t0=e.catch(4);t.setState({error:e.t0.message});case 12:e.prev=12;t.setState({submitting:!1});return e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])})));t.handleReset=function(){t.setState({childSkuIds:t.getStoreListingChildSkuIds(),error:null})}
;t.renderRow=function(e){var n=e.item,r=A(e,O),s=t.props.skus.find((function(e){return e.id===n}));if(null==s)throw new Error("Could not find SKU "+n);return i.createElement(b.default,M({},r,{sku:s}))};return t}var n=t.prototype;n.componentDidMount=function(){var e=this.props,t=e.storeListing,n=e.skuId;null==t&&a.fetchStoreListings(n)};n.componentDidUpdate=function(e){var t=this.props.storeListing;null==e.storeListing&&null!=t&&this.setState({childSkuIds:this.getStoreListingChildSkuIds()})};n.getAvailableSkus=function(){var e=this.props,t=e.storeListing,n=e.skus,r=e.skuId,i=this.state.childSkuIds;return null==t?[]:n.filter((function(e){return![r].concat(i).includes(e.id)}))};n.getOptions=function(){return this.getAvailableSkus().map((function(e){return{value:e.id,label:e.name.default}}))};n.getStoreListingChildSkuIds=function(){var e=this.props.storeListing;return null!=e&&null!=e.child_skus?e.child_skus.map((function(e){return e.id})):[]};n.renderAddChildSKU=function(){
return D(S.default,{},void 0,D(h.default,{className:L.default.restrictedWidth,value:null,name:"addSku",options:this.getOptions(),onChange:this.handleSelectChange}))};n.renderChildSKUList=function(){var e=this.state.childSkuIds;return D(S.default,{},void 0,D(g.default,{},void 0,w.Messages.ChildSKUs.CHILD_SKUS),D(k.default,{},void 0,w.Messages.ChildSKUs.CHILD_SKUS_DESCRIPTION),e.length>0?D(I.default,{getId:function(e){return e},onMove:this.handleListChange,onDelete:this.handleRemoveSKU,data:e,renderRow:this.renderRow}):D(C.default,{},void 0,w.Messages.ChildSKUs.NO_CHILD_SKUS))};n.render=function(){var e=this.props.storeListing,t=this.state,n=t.childSkuIds,r=t.submitting,i=t.error;if(null==e)return x;var u=!s.default.isEqual(n,this.getStoreListingChildSkuIds());return D("div",{},void 0,D(v.default,{},void 0,w.Messages.ChildSKUs.HEADING),D(m.default,{},void 0,w.Messages.ChildSKUs.SUBHEADING),null!=i?D(E,{},void 0,i):null,this.renderAddChildSKU(),this.renderChildSKUList(),D(y.default,{
isVisible:u,actionCopy:w.Messages.Actions.PUBLISH_CHANGES,onReset:this.handleReset,onSave:this.handleSave,submitting:r}))};return t}(i.Component);H.displayName="ChildSKUs";var W=(0,u.withRouter)(o.default.connectStores([l.default,d.default],(function(e){var t=e.match.params,n=t.id,r=t.skuId;return{skus:l.default.getSkus(n),skuId:r,storeListing:d.default.getCurrentStoreListing(r)}}))(H));t.default=W}}]);
//# sourceMappingURL=b5d5446635ed4c1dd5d5.js.map