"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[94859],{94859:(e,n,t)=>{t.r(n);t.d(n,{default:()=>_});var a=t(785893),r=t(667294),i=t(945460),o=t(517454),l=t(115617),s=t(652591),c=t(88067),u=t(473708);var d=t(2590);function f(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function T(e){var n=e.problem,t=e.channel,a=e.feedback,r=e.activityApplication,i=e.analyticsData,o=e.location,l=e.rating,c=void 0===l?null:l;s.default.track(d.rMx.ACTIVITY_REPORT_PROBLEM,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));a.forEach((function(n){f(e,n,t[n])}))}return e}({reason:n,guild_id:t.getGuildId(),channel_id:t.id,application_id:null==r?void 0:r.id,
application_name:null==r?void 0:r.name,location:o,rating:c,feedback:a},i))}var m=t(630670);function p(e,n,t,a,r,i,o){try{var l=e[i](o),s=l.value}catch(e){t(e);return}l.done?n(s):Promise.resolve(s).then(a,r)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var i=e.apply(n,t);function o(e){p(i,a,r,o,l,"next",e)}function l(e){p(i,a,r,o,l,"throw",e)}o(void 0)}))}}function h(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}var I=function(e,n){var t,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;(a=0,
r)&&(i=[2&i[0],r.value]);switch(i[0]){case 0:case 1:r=i;break;case 4:o.label++;return{value:i[1],done:!1};case 5:o.label++;a=i[1];i=[0];continue;case 7:i=o.ops.pop();o.trys.pop();continue;default:if(!(r=o.trys,r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1];r=i;break}if(r&&o.label<r[2]){o.label=r[2];o.ops.push(i);break}r[2]&&o.ops.pop();o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e];a=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},g=[c.K8.OTHER,c.K8.NOT_FUN];function _(e){var n,f=e.channel,p=e.activityApplication,_=e.onClose,v=e.transitionState,O=e.analyticsData;r.useEffect((function(){s.default.track(d.rMx.OPEN_MODAL,{type:"Activity Feedback Modal",application_id:p.id,application_name:p.name,game_id:p.id,source:"Activity End"})}),[p]);return(0,a.jsx)(o.Z,{header:u.Z.Messages.ACTIVITY_REPORT_POST_ACTIVITY_HEADER.format({
applicationName:p.name}),body:u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_BODY,problemTitle:u.Z.Messages.ACTIVITY_REPORT_POST_ACTIVITY_PROBLEM_TITLE,problems:(n=!0,[{value:c.K8.FAILED_LOAD,label:n?u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_END_FAILED_LOAD:u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_FAILED_LOAD},{value:c.K8.LAGGING,label:n?u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_END_LAGGING:u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_LAGGING},{value:c.K8.CONFUSING,label:n?u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_END_CONFUSING:u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_CONFUSING},{value:c.K8.NOT_FUN,label:n?u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_END_NOT_FUN:u.Z.Messages.ACTIVITY_REPORT_ACTIVITY_NOT_FUN},{value:c.K8.OTHER,label:u.Z.Messages.CALL_FEEDBACK_OPTION_OTHER}]),feedbackProblems:g,onSubmit:function(e){var n=e.rating,r=e.problem,o=e.dontShowAgain,c=e.feedback;o&&function(e){var n=e.applicationId,t=e.rating;s.default.track(d.rMx.ACTIVITY_REPORT_DONT_SHOW,{application_id:n,rating:t});(0,
l.Kw)(m.v.POST_ACTIVITY_FEEDBACK)}({rating:n,applicationId:p.id});if(null!=n){T({problem:r,channel:f,feedback:c,activityApplication:p,analyticsData:O,location:"Activity End",rating:n});null!=r&&(0,i.openModalLazy)(b((function(){var e,n;return I(this,(function(r){switch(r.label){case 0:return[4,Promise.all([t.e(40532),t.e(21786)]).then(t.bind(t,521786))];case 1:e=r.sent(),n=e.default;return[2,function(e){return(0,a.jsx)(n,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));a.forEach((function(n){h(e,n,t[n])}))}return e}({body:u.Z.Messages.ACTIVITY_REPORTED_BODY},e))}]}}))})))}},onClose:_,transitionState:v,otherKey:c.K8.OTHER})}},629438:(e,n,t)=>{t.d(n,{B:()=>i});var a=t(496486),r=t.n(a),i=function(e,n){var t=r().shuffle(e),a=t.findIndex((function(e){
return e.value===n}));if(a>-1){var i=t[a];t.splice(a,1);t.push(i)}return t}},517454:(e,n,t)=>{t.d(n,{L:()=>C,Z:()=>E});var a=t(785893),r=t(667294),i=t(294184),o=t.n(i),l=t(496486),s=t.n(l),c=t(945460),u=t(634698),d=t(441093),f=t(107364),T=t(443812),m=t(843133),p=t(348592),b=t(629438),h=t(494579),I=t(473708),g=t(424529),_=t.n(g);function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(a=t.next()).done);o=!0){i.push(a.value);if(n&&i.length===n)break}}catch(e){l=!0;r=e}finally{try{o||null==t.return||t.return()}finally{if(l)throw r}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return v(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=[{className:_().emojiSad,rating:h.aZ.BAD,classNameSelected:_().selected},{className:_().emojiNeutral,rating:h.aZ.NEUTRAL,classNameSelected:_().selected},{className:_().emojiHappy,rating:h.aZ.GOOD,classNameSelected:_().selected}];function C(e){var n=e.className,t=e.selectedRating,r=e.ratingConfigs,i=e.onChangeRating;return(0,a.jsx)(f.Z,{justify:f.Z.Justify.BETWEEN,align:f.Z.Align.CENTER,className:o()(_().ratingsSelector,n),children:(null!=r?r:y).map((function(e){var n=e.rating,r=e.className,l=e.classNameSelected;return(0,a.jsx)(c.Clickable,{onClick:function(){return i(n)},"aria-label":n,children:(0,a.jsx)("div",{className:o()(r,t===n?l:null)})},n)}))})}function A(){
return(0,a.jsx)(c.Text,{className:_().helpdeskLink,variant:"text-xs/normal",color:"text-muted",children:I.Z.Messages.FEEDBACK_NEED_MORE_HELP.format({helpdeskURL:p.Z.getSubmitRequestURL()})})}function E(e){var n=e.header,t=e.body,i=e.problemTitle,l=e.problems,p=e.transitionState,g=e.ratingConfigs,v=e.feedbackProblems,y=void 0===v?[]:v,E=e.otherKey,N=e.ratingsSelectorClassName,x=e.hideDontShowCheckbox,R=e.startRating,S=void 0===R?null:R,j=e.onSubmit,Z=e.onClose,k=(0,u.Z)(l),D=O(r.useState(!1),2),M=D[0],P=D[1],L=O(r.useState(S),2),Y=L[0],w=L[1],V=O(r.useState(null),2),B=V[0],F=V[1],G=O(r.useState(s().shuffle(l)),2),K=G[0],H=G[1],U=O(r.useState(""),2),z=U[0],W=U[1],q=(0,T.Dt)(),J=(0,m.Z)(Y),$=(0,m.Z)(M),Q=(0,m.Z)(B),X=(0,m.Z)(j),ee=(0,m.Z)(z),ne=null!=B&&y.includes(B),te=ne||!x;r.useEffect((function(){s().isEqual(k,l)||H((0,b.B)(l,E))}),[l,k,E]);r.useEffect((function(){return function(){X.current({rating:J.current,problem:Q.current,dontShowAgain:$.current,feedback:ee.current})}}),[])
;return(0,a.jsxs)(c.ModalRoot,{transitionState:p,className:_().modalRoot,"aria-labelledby":q,children:[(0,a.jsxs)(c.ModalHeader,{separator:!1,className:_().headerContainer,children:[(0,a.jsx)(c.Heading,{id:q,variant:"heading-xl/extrabold",color:"none",children:n}),(0,a.jsx)(c.Text,{variant:"text-md/normal",color:"none",className:_().ratingBody,children:t}),ne?null:(0,a.jsx)(C,{className:o()(_().emojis,N),selectedRating:Y,onChangeRating:function(e){w(e);e===h.aZ.GOOD&&Z()},ratingConfigs:g})]}),(0,a.jsxs)(c.ModalContent,{className:_().content,children:[null==Y||Y===h.aZ.GOOD||ne?null:(0,a.jsx)(c.FormItem,{title:i,className:_().problemInfo,children:(0,a.jsx)(d.Z,{options:K,onClick:function(e){var n=e.value;F(n);y.includes(n)||Z()},hideCaret:function(e){var n=e.value;return!y.includes(n)}})}),ne?(0,a.jsxs)(c.FormItem,{title:I.Z.Messages.FEEDBACK_DESCRIBE_ISSUE,className:_().problemInfo,children:[(0,a.jsx)(c.TextArea,{value:z,maxLength:h.iF,onChange:W}),(0,a.jsx)(A,{})]}):null]}),te&&(0,
a.jsx)(c.ModalFooter,{className:_().footer,direction:f.Z.Direction.HORIZONTAL,children:ne?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Button,{size:c.Button.Sizes.SMALL,look:c.Button.Looks.LINK,color:c.Button.Colors.PRIMARY,onClick:function(){F(null);W("")},children:I.Z.Messages.BACK}),(0,a.jsx)(c.Button,{size:c.Button.Sizes.SMALL,onClick:Z,children:I.Z.Messages.SUBMIT})]}):(0,a.jsx)(c.Checkbox,{type:c.Checkbox.Types.INVERTED,size:18,value:M,onChange:function(){return P(!M)},children:(0,a.jsx)(c.Text,{variant:"text-sm/normal",children:I.Z.Messages.DONT_SHOW_AGAIN})})})]})}},441093:(e,n,t)=>{t.d(n,{Z:()=>u});var a=t(785893),r=(t(667294),t(294184)),i=t.n(r),o=t(945460),l=t(718831),s=t(613067),c=t.n(s);function u(e){var n=e.options,t=e.onClick,r=e.className,s=e.optionClassName,u=e.hideCaret;return(0,a.jsx)("div",{className:i()(c().root,r),children:n.map((function(e,n){return(0,a.jsxs)(o.Clickable,{onClick:function(){return t(e)},className:i()(c().option,s),children:[(0,a.jsx)(o.Text,{
className:c().text,color:"none",variant:"text-md/normal",children:e.label}),!(null==u?void 0:u(e))&&(0,a.jsx)(l.Z,{className:c().caret,direction:l.Z.Directions.RIGHT})]},n)}))})}}}]);
//# sourceMappingURL=89b018b71f7bb7618130.js.map