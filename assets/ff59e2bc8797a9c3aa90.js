"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[9582],{509582:(e,t,n)=>{n.r(t);n.d(t,{default:()=>x});var r=n(785893),a=n(667294),i=n(945460),s=n(673679),o=n(153686),l=n(19585),u=n(379991),c=n(223430),C=n(443812),I=n(652591),_=n(243763),N=n(136082),A=n(944010),S=n(2590),d=n(473708),E=n(183153),O=n.n(E);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done);s=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){o=!0;a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=[{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_USING_ENOUGH",nameGetter:function(){return d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_USING_ENOUGH}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_TOO_EXPENSIVE",nameGetter:function(){return d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_TOO_EXPENSIVE}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_WORTH",nameGetter:function(){return d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_WORTH}},{
value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_SURE_HOW_TO_USE",nameGetter:function(){return d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_SURE_HOW_TO_USE}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER",nameGetter:function(){return d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER}}];function h(e){var t=e.application,n=e.subscriptionId,s=e.onClose,o=T(a.useState(!1),2),l=o[0],u=o[1],C=T(a.useState(null),2),_=C[0],N=C[1],E=T(a.useState(""),2),f=E[0],h=E[1],p=a.useCallback((function(){if(null!=_){I.default.track(S.rMx.PREMIUM_APP_CANCELLATION_SURVEY_SUBMITTED,{answer:_,application_id:t.id,reason:f,subscription_id:n});s()}}),[t.id,n,_,s,f]);a.useEffect((function(){A.ZP.updatedUnsyncedSettings({disableApplicationSubscriptionCancellationSurvey:l})}),[l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.ModalHeader,{className:O().headerContainer,separator:!1,children:[(0,
r.jsxs)("div",{className:O().titleContainer,children:[(0,r.jsx)(i.Text,{className:O().headerTitle,variant:"text-lg/semibold",children:d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_TITLE}),(0,r.jsx)(i.ModalCloseButton,{className:O().modalCloseButton,onClick:s})]}),(0,r.jsx)(c.Z,{size:8}),(0,r.jsx)(i.Text,{className:O().headerSubtitle,variant:"text-md/medium",children:d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_SUBTITLE})]}),(0,r.jsxs)(i.ModalContent,{children:[(0,r.jsx)("div",{className:O().answerChoicesContainer,children:(0,r.jsx)(i.RadioGroup,{value:_,options:L.map((function(e){var t=e.nameGetter,n=e.value;return{name:t(),value:n}})),onChange:function(e){return N(e.value)},withTransparentBackground:!0})}),"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER"===_&&(0,r.jsx)(i.TextInput,{autoFocus:!0,className:O().otherField,placeholder:d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_OTHER_PLACEHOLDER,value:f,onChange:h})]}),(0,
r.jsxs)(i.ModalFooter,{className:O().footer,children:[(0,r.jsx)(i.Button,{onClick:p,color:i.Button.Colors.BRAND,disabled:null==_,children:d.Z.Messages.SUBMIT}),(0,r.jsx)(i.Checkbox,{type:i.Checkbox.Types.INVERTED,value:l,onChange:function(e,t){return u(t)},size:20,className:O().checkbox,children:(0,r.jsx)(i.Text,{variant:"text-sm/medium",children:d.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_DONT_SHOW_AGAIN})})]})]})}var p=n(171899),P=n.n(p);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,a,i,s){try{var o=e[i](s),l=o.value}catch(e){n(e);return}o.done?t(l):Promise.resolve(l).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){m(i,r,a,s,o,"next",e)}function o(e){m(i,r,a,s,o,"throw",e)}s(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done);s=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){o=!0;a=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v,y=function(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;r=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1];a=i;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(i);break}a[2]&&s.ops.pop();s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};!function(e){e[e.CANCEL=0]="CANCEL";e[e.SURVEY=1]="SURVEY"}(v||(v={}));function x(e){
var t,n=e.transitionState,A=e.application,E=e.listing,O=e.subscription,f=e.guild,T=e.onClose,L=(0,C.Dt)(),p=(0,l.Z)(o.Z.APPLICATION_SUBSCRIPTION_CANCELLATION_MODAL).analyticsLocations,R=function(e){var t,n=U(a.useState(!1),2),r=n[0],i=n[1],o=U(a.useState(null),2),l=o[0],u=o[1],c=(t=b((function(t){var n;return y(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,3,4]);i(!0);return[4,s.EO(t,e)];case 1:r.sent();return[2,!0];case 2:n=r.sent();u(n);return[3,4];case 3:i(!1);return[7];case 4:return[2]}}))})),function(e){return t.apply(this,arguments)});return{cancelSubscription:c,error:l,submitting:r}}(p),m=R.cancelSubscription,x=R.error,g=R.submitting,j=U(a.useState(v.CANCEL),2),M=j[0],B=j[1],k=(t=b((function(){return y(this,(function(e){switch(e.label){case 0:return[4,m(O.id)];case 1:e.sent()&&(u.ZP.disableApplicationSubscriptionCancellationSurvey?T():B(v.SURVEY));return[2]}}))})),function(){return t.apply(this,arguments)});a.useEffect((function(){
I.default.track(S.rMx.CANCELLATION_FLOW_STARTED,{location_stack:p})}),[p]);var w=(0,_.KW)(E.sku_flags);return(0,r.jsx)(i.ModalRoot,{transitionState:n,className:P().modal,"aria-labelledby":L,children:(0,r.jsxs)(i.Slides,{activeSlide:M,width:440,children:[(0,r.jsx)(i.Slide,{id:v.CANCEL,children:(0,r.jsxs)("div",{className:P().slideContainer,children:[null!=x?(0,r.jsx)(i.FormErrorBlock,{children:x.message}):null,(0,r.jsxs)(i.ModalContent,{className:P().content,children:[(0,r.jsx)(c.Z,{size:16}),(0,r.jsxs)(N.q$,{children:[(0,r.jsx)(N.CW,{application:A}),(0,r.jsx)(N.r0,{id:L,children:d.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_TITLE_V2.format({tier:E.name})}),(0,r.jsx)(N.s$,{}),(0,r.jsx)(N.K9,{title:d.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_HEADER,description:w?d.Z.Messages.APPLICATION_CANCEL_USER_SUBSCRIPTION_MODAL_DESCRIPTION.format({timestamp:O.currentPeriodEnd.getTime()}):d.Z.Messages.APPLICATION_CANCEL_GUILD_SUBSCRIPTION_MODAL_DESCRIPTION.format({
timestamp:O.currentPeriodEnd.getTime(),guildName:null==f?void 0:f.name})}),(0,r.jsx)(N.G9,{benefits:E.sku_benefits.benefits})]})]}),(0,r.jsxs)(i.ModalFooter,{className:P().footer,children:[(0,r.jsx)(i.Button,{color:i.Button.Colors.RED,onClick:k,submitting:g,children:d.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_CANCEL_CTA}),(0,r.jsx)(i.Button,{look:i.Button.Looks.LINK,color:i.Button.Colors.PRIMARY,className:P().goBackButton,onClick:T,children:d.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_NEVERMIND_CTA})]})]})}),(0,r.jsx)(i.Slide,{id:v.SURVEY,children:(0,r.jsx)("div",{className:P().slideContainer,children:(0,r.jsx)(h,{application:A,subscriptionId:O.id,onClose:T})})})]})})}}}]);
//# sourceMappingURL=ff59e2bc8797a9c3aa90.js.map