"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[33404],{156824:(e,n,t)=>{t.d(n,{Z:()=>u});var r=t(281110),i=t(336334),o=t(2590),a=t(473708);const u={changeNickname:function(e,n,t,u){return r.Z.patch({url:o.ANM.GUILD_MEMBER_NICK(e,t),body:{nick:u},oldFormErrors:!0}).then((function(e){u=e.body.nick;i.Z.sendBotMessage(n,null!=u&&""!==u?a.Z.Messages.COMMAND_NICK_SUCCESS.plainFormat({nick:u}):a.Z.Messages.COMMAND_NICK_RESET)}),(function(e){403===e.status?i.Z.sendBotMessage(n,a.Z.Messages.COMMAND_NICK_FAILURE_PERMISSION.plainFormat()):i.Z.sendBotMessage(n,a.Z.Messages.COMMAND_NICK_FAILURE)}))}}},567867:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(744564);const i={popFirstFile:function(e){r.Z.dispatch({type:"UPLOAD_ATTACHMENT_POP_FILE",channelId:e})},addFiles:function(e){var n=e.files,t=e.channelId,i=e.showLargeMessageDialog,o=e.draftType;r.Z.dispatch({type:"UPLOAD_ATTACHMENT_ADD_FILES",channelId:t,files:n,showLargeMessageDialog:i,draftType:o})},addFile:function(e){
var n=e.file,t=e.channelId,i=e.showLargeMessageDialog,o=e.draftType;r.Z.dispatch({type:"UPLOAD_ATTACHMENT_ADD_FILES",channelId:t,files:[n],showLargeMessageDialog:i,draftType:o})},remove:function(e,n,t){r.Z.dispatch({type:"UPLOAD_ATTACHMENT_REMOVE_FILE",channelId:e,id:n,draftType:t})},removeFiles:function(e,n,t){r.Z.dispatch({type:"UPLOAD_ATTACHMENT_REMOVE_FILES",channelId:e,attachmentIds:n,draftType:t})},clearAll:function(e,n){r.Z.dispatch({type:"UPLOAD_ATTACHMENT_CLEAR_ALL_FILES",channelId:e,draftType:n})},update:function(e,n,t,i){var o=i.description,a=i.filename,u=i.spoiler;r.Z.dispatch({type:"UPLOAD_ATTACHMENT_UPDATE_FILE",channelId:e,id:n,filename:a,description:o,spoiler:u,draftType:t})},setUploads:function(e){var n=e.uploads,t=e.channelId,i=e.draftType,o=e.resetState;r.Z.dispatch({type:"UPLOAD_ATTACHMENT_SET_UPLOADS",channelId:t,uploads:o?n.map((function(e){return e.resetState()})):n,draftType:i})},setFile:function(e){var n=e.file,t=e.channelId,i=e.id,o=e.draftType;r.Z.dispatch({
type:"UPLOAD_ATTACHMENT_SET_FILE",channelId:t,id:i,file:n,draftType:o})}}},924326:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(667294);function i(){var e=r.useRef(null);null===e.current&&(e.current=new AbortController);r.useEffect((function(){return function(){var n;null===(n=e.current)||void 0===n||n.abort()}}),[]);return e.current.signal}},169898:(e,n,t)=>{t.d(n,{Tm:()=>G,Kh:()=>k});var r=t(441143),i=t.n(r),o=t(730381),a=t.n(o),u=t(210595),l=t(156824),s=t(761953),c=t(327499),d=t(336334),f=t(73904),p=t(777302),y=t(30027),_=t(596217),E=t(161283),m=t(225386),h=t(968449),T=t(61209),g=t(682776),I=t(473903),v=t(749565),O=t(272200),A=t(127624),N=t(2590),S=t(515222),C=t(473708);function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n,t,r,i,o,a){try{var u=e[o](a),l=u.value}catch(e){t(e);return}u.done?n(l):Promise.resolve(l).then(r,i)}function D(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t)
;function a(e){b(o,r,i,a,u,"next",e)}function u(e){b(o,r,i,a,u,"throw",e)}a(void 0)}))}}function R(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function P(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}var Z,w,L,U=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},H=t(418973).Z,j=function(e,n){var t;return null===(t=e.find((function(e){return e.name===n})))||void 0===t?void 0:t.value},G=(R(Z={},A.bi.BUILT_IN,{id:A.bi.BUILT_IN,type:O.Qi.BUILT_IN,get name(){
return C.Z.Messages.COMMAND_SECTION_BUILT_IN_NAME}}),R(Z,A.bi.FRECENCY,{id:A.bi.FRECENCY,type:O.Qi.BUILT_IN,get name(){return C.Z.Messages.FREQUENTLY_USED}}),Z),F=(L=H,function(e){if(Array.isArray(e))return M(e)}(L)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(L)||function(e,n){if(e){if("string"==typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}(L)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{id:"-1",name:"shrug",displayName:"shrug",type:f.yU.CHAT,inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_SHRUG_DESCRIPTION},
get displayDescription(){return C.Z.Messages.COMMAND_SHRUG_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_SHRUG_MESSAGE_DESCRIPTION}}],execute:function(e){var n,t=null!==(n=j(e,"message"))&&void 0!==n?n:"";return{content:"".concat(t," ¯\\_(ツ)_/¯").trim()}}},{id:"-2",name:"tableflip",displayName:"tableflip",type:f.yU.CHAT,inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_TABLEFLIP_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TABLEFLIP_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_TABLEFLIP_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TABLEFLIP_MESSAGE_DESCRIPTION}}],execute:function(e){var n,t=null!==(n=j(e,"message"))&&void 0!==n?n:"";return{
content:"".concat(t," (╯°□°)╯︵ ┻━┻").trim()}}},{id:"-3",name:"unflip",displayName:"unflip",type:f.yU.CHAT,inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TABLEUNFLIP_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_TABLEUNFLIP_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TABLEUNFLIP_MESSAGE_DESCRIPTION}}],execute:function(e){var n,t=null!==(n=j(e,"message"))&&void 0!==n?n:"";return{content:"".concat(t," ┬─┬ノ( º _ ºノ)").trim()}}},{id:"-4",name:"tts",displayName:"tts",type:f.yU.CHAT,inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_TTS_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TTS_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){
return C.Z.Messages.COMMAND_TTS_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TTS_MESSAGE_DESCRIPTION},required:!0}],predicate:function(e){var n=e.channel;return!n.isPrivate()&&h.OW.getSetting()&&g.Z.can(N.Plq.SEND_TTS_MESSAGES,n)},execute:function(e){var n;return{content:null!==(n=j(e,"message"))&&void 0!==n?n:"",tts:!0}}},{id:"-5",name:"me",displayName:"me",type:f.yU.CHAT,inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_ME_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_ME_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_ME_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_ME_MESSAGE_DESCRIPTION},required:!0}],execute:function(e){var n,t=null!==(n=j(e,"message"))&&void 0!==n?n:"";return{content:"_".concat(t,"_")}}},{id:"-6",name:"spoiler",displayName:"spoiler",type:f.yU.CHAT,
inputType:O.iw.BUILT_IN_TEXT,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_SPOILER_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_SPOILER_DESCRIPTION},options:[{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_SPOILER_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_SPOILER_MESSAGE_DESCRIPTION},required:!0}],execute:function(e){var n,t=null!==(n=j(e,"message"))&&void 0!==n?n:"";return{content:(0,N.XmY)(t).trim()}}},{id:"-7",name:"nick",displayName:"nick",type:f.yU.CHAT,inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_NICK_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_NICK_DESCRIPTION},options:[{name:"new_nick",displayName:"new_nick",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_NICK_NEWNICK_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_NICK_NEWNICK_DESCRIPTION}
}],predicate:function(e){var n=e.channel;return!n.isPrivate()&&(g.Z.can(N.Plq.CHANGE_NICKNAME,n)||g.Z.can(N.Plq.MANAGE_NICKNAMES,n))},execute:function(e,n){var t=n.guild,r=n.channel;if(null!=t){var i,o=null!==(i=j(e,"new_nick"))&&void 0!==i?i:"";l.Z.changeNickname(t.id,r.id,N.ME,o||"")}}},{id:"-10",name:"thread",displayName:"thread",type:f.yU.CHAT,inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_THREAD_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_THREAD_DESCRIPTION},options:[{name:"name",displayName:"name",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_THREAD_NAME_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_THREAD_NAME_DESCRIPTION},required:!0},{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_THREAD_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_THREAD_MESSAGE_DESCRIPTION},required:!0}],
predicate:function(e){var n=e.channel;return(0,m.ki)(n)},execute:(w=D((function(e,n){var t,r,i,o,a,l;return U(this,(function(s){switch(s.label){case 0:t=n.channel;i=null!==(r=j(e,"name"))&&void 0!==r?r:"";a=null!==(o=j(e,"message"))&&void 0!==o?o:"";return[4,(0,E.gK)(t,i,u.d.PUBLIC_THREAD,(0,_.WD)(t,null),"Slash Command")];case 1:l=s.sent();d.Z.sendMessage(l.id,y.ZP.parse(l,a));return[2]}}))})),function(e,n){return w.apply(this,arguments)})},{id:"-11",name:"kick",displayName:"kick",type:f.yU.CHAT,inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_KICK_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_KICK_DESCRIPTION},options:[{name:"user",displayName:"user",type:f.jw.USER,get description(){return C.Z.Messages.COMMAND_KICK_USER_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_KICK_USER_DESCRIPTION},required:!0},{name:"reason",displayName:"reason",type:f.jw.STRING,get description(){
return C.Z.Messages.COMMAND_KICK_REASON_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_KICK_REASON_DESCRIPTION},required:!1}],predicate:function(e){var n=e.guild;return g.Z.can(N.Plq.KICK_MEMBERS,n)},execute:function(e,n){var t=n.guild,r=n.channel;if(null!=t){var i,o=null!==(i=j(e,"user"))&&void 0!==i?i:"";if(g.Z.canManageUser(N.Plq.KICK_MEMBERS,o,t)){var a=function(){var n=D((function(){var n,i;return U(this,(function(a){switch(a.label){case 0:if(null==(n=I.default.getUser(o)))throw new Error;return[4,c.Z.kickUser(t.id,o,null!==(i=j(e,"reason"))&&void 0!==i?i:"")];case 1:a.sent();d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_KICK_CONFIRMATION.format({user:v.ZP.getUserTag(n)}));return[2]}}))}));return function(){return n.apply(this,arguments)}}();a().catch((function(){d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_KICK_ERROR)}))}else d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_KICK_UNABLE)}}},{id:"-12",name:"ban",displayName:"ban",type:f.yU.CHAT,
inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_BAN_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_BAN_DESCRIPTION},options:[{name:"user",displayName:"user",type:f.jw.USER,get description(){return C.Z.Messages.COMMAND_BAN_USER_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_BAN_USER_DESCRIPTION},required:!0},{name:"delete_messages",displayName:"delete_messages",type:f.jw.INTEGER,get description(){return C.Z.Messages.COMMAND_BAN_DELETE_MESSAGES_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_BAN_DELETE_MESSAGES_DESCRIPTION},required:!0,get choices(){return[{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_NONE,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_NONE,value:0},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_1HR,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_1HR,value:N.UF9.HOUR},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_6HR,
displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_6HR,value:6*N.UF9.HOUR},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_12HR,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_12HR,value:12*N.UF9.HOUR},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_24HR,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_24HR,value:N.UF9.DAY},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_3D,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_3D,value:3*N.UF9.DAY},{name:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_7D,displayName:C.Z.Messages.DELETE_MESSAGE_HISTORY_OPTION_7D,value:7*N.UF9.DAY}]}},{name:"reason",displayName:"reason",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_BAN_REASON_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_BAN_REASON_DESCRIPTION},required:!1}],predicate:function(e){var n=e.guild;return g.Z.can(N.Plq.BAN_MEMBERS,n)},execute:function(e,n){var t=n.guild,r=n.channel;if(null!=t){var i,o=null!==(i=j(e,"user"))&&void 0!==i?i:""
;if(g.Z.canManageUser(N.Plq.BAN_MEMBERS,o,t)){var a=function(){var n=D((function(){var n,i,a,u,l;return U(this,(function(s){switch(s.label){case 0:if(""===o)throw new Error;i=null!==(n=j(e,"delete_messages"))&&void 0!==n?n:0;u=null!==(a=j(e,"reason"))&&void 0!==a?a:"";l=I.default.getUser(o);return[4,c.Z.banUser(t.id,o,i,u)];case 1:s.sent();d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_BAN_CONFIRMATION.format({user:null!=l?v.ZP.getUserTag(l):o}));return[2]}}))}));return function(){return n.apply(this,arguments)}}();a().catch((function(){d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_BAN_ERROR)}))}else d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_BAN_UNABLE)}}},{id:"-13",name:"timeout",displayName:"timeout",type:f.yU.CHAT,inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_TIMEOUT_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TIMEOUT_DESCRIPTION},options:[{name:"user",displayName:"user",type:f.jw.USER,get description(){
return C.Z.Messages.COMMAND_TIMEOUT_USER_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TIMEOUT_USER_DESCRIPTION},required:!0},{name:"duration",displayName:"duration",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_TIMEOUT_DURATION_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_TIMEOUT_DURATION_DESCRIPTION},required:!0,get choices(){return(0,S.tr)().map((function(e){return P(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){R(e,n,t[n])}))}return e}({},e),{name:e.label,displayName:e.label})}))}},{name:"reason",displayName:"reason",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_TIMEOUT_REASON_DESCRIPTION},get displayDescription(){
return C.Z.Messages.COMMAND_TIMEOUT_REASON_DESCRIPTION},required:!1}],predicate:function(e){var n=e.guild;return g.Z.can(N.Plq.MODERATE_MEMBERS,n)},execute:function(e,n){var t=n.guild,r=n.channel;if(null!=t){var i=j(e,"user");if((0,p.F)(t.id,i)){var o=function(){var n=D((function(){var n,o,u,l,s;return U(this,(function(f){switch(f.label){case 0:o=null!==(n=j(e,"duration"))&&void 0!==n?n:"";l=null!==(u=j(e,"reason"))&&void 0!==u?u:"";if(null==(s=I.default.getUser(i)))throw new Error;return[4,c.Z.setCommunicationDisabledUntil(t.id,i,a()().add(o,"s").toISOString(),o,l)];case 1:f.sent();d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_TIMEOUT_CONFIRMATION.format({user:v.ZP.getUserTag(s),duration:o}));return[2]}}))}));return function(){return n.apply(this,arguments)}}();o().catch((function(){d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_TIMEOUT_ERROR)}))}else d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_TIMEOUT_UNABLE)}}},{id:"-14",name:"msg",displayName:"msg",type:f.yU.CHAT,
inputType:O.iw.BUILT_IN,applicationId:A.bi.BUILT_IN,get description(){return C.Z.Messages.COMMAND_MSG_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_MSG_DESCRIPTION},options:[{name:"user",displayName:"user",type:f.jw.USER,get description(){return C.Z.Messages.COMMAND_MSG_USER_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_MSG_USER_DESCRIPTION},required:!0},{name:"message",displayName:"message",type:f.jw.STRING,get description(){return C.Z.Messages.COMMAND_MSG_MESSAGE_DESCRIPTION},get displayDescription(){return C.Z.Messages.COMMAND_MSG_MESSAGE_DESCRIPTION},required:!0}],execute:function(e,n){var t,r=n.channel,o=j(e,"user"),a=null!==(t=j(e,"message"))&&void 0!==t?t:"",u=function(){var e=D((function(){return U(this,(function(e){switch(e.label){case 0:return[4,s.Z.openPrivateChannel(o).then((function(e){var n=T.Z.getChannel(e);i()(null!=n,"Newly created PrivateChannel is null");d.Z.sendMessage(n.id,y.ZP.parse(n,a))}))];case 1:e.sent();return[2]}}))}))
;return function(){return e.apply(this,arguments)}}();u().catch((function(){d.Z.sendBotMessage(r.id,C.Z.Messages.COMMAND_MSG_ERROR)}))}}]),B=F.filter((function(e){return["giphy","tenor","tts","me","tableflip","unflip","shrug","spoiler","nick"].includes(e.name)})),k=function(e,n,t){var r=n?F:B;return r=r.filter((function(n){return n.type===e&&(!t||n.inputType===O.iw.BUILT_IN_TEXT||n.inputType===O.iw.BUILT_IN_INTEGRATION)}))}},485501:(e,n,t)=>{t.d(n,{JV:()=>A,LU:()=>N,ZP:()=>b});var r=t(496486),i=t.n(r),o=t(202351),a=t(744564),u=t(73904),l=t(747864),s=t(473419),c=t(127624),d=t(131559);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function y(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function _(e){_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return _(e)}function E(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function m(e,n){return!n||"object"!==g(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function h(e,n){h=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return h(e,n)}function T(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){
if(!e)return;if("string"==typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=_(e);if(n){var i=_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m(this,t)}}var v={
pendingUsages:[]},O=new l.Z({computeBonus:function(){return 1},computeWeight:function(e){return e<=3?100:e<=15?70:e<=30?50:e<=45?30:e<=80?10:0},lookupKey:function(e){return e},afterCompute:function(){},numFrequentlyItems:500});function A(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value.split(c.oQ)[0];Number(u)>0&&n.add(u);if(n.size>=c.sZ)break}}catch(e){r=!0;i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return T(n)}function N(e,n){return e.filter((function(e){return!e.includes(":")||null!=n.guild&&n.guild.id===e.split(":")[1]})).map((function(e){return e.split(":")[0]}))}function S(e,n){return Number(n.id)<0?n.id:null!=e.guild&&null!=n.guildId?"".concat(n.id,":").concat(e.guild.id):n.id}function C(){var e,n,t=null!==(n=null===(e=s.Z.frecencyWithoutFetchingLatest.applicationCommandFrecency)||void 0===e?void 0:e.applicationCommands)&&void 0!==n?n:{};O.overwriteHistory(i().mapValues(t,(function(e){
return E(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){y(e,n,t[n])}))}return e}({},e),{recentUses:e.recentUses.map(Number).filter((function(e){return e>0}))})})),v.pendingUsages)}var M=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&h(e,n)}(t,e);var n=I(t);function t(){p(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(e){null!=e&&(v=e);this.syncWith([s.Z],C)};r.getState=function(){return v};r.hasPendingUsage=function(){return v.pendingUsages.length>0};r.getCommandFrecencyWithoutLoadingLatest=function(){return O}
;r.getScoreWithoutLoadingLatest=function(e,n){var t;return null!==(t=O.getScore(S(e,n)))&&void 0!==t?t:0};r.getTopCommandsWithoutLoadingLatest=function(){return O.frequently};r.__getLocalVars=function(){return{state:v,commandFrecency:O}};return t}(o.ZP.PersistedStore);M.displayName="ApplicationCommandFrecencyStore";M.persistKey="ApplicationCommandFrecencyV2";const b=new M(a.Z,{APPLICATION_COMMAND_USED:function(e){var n=e.command,t=e.context;if(n.type!==u.yU.CHAT)return!1;var r=S(t,n);v.pendingUsages.push({key:r,timestamp:Date.now()});O.track(r);O.compute()},USER_SETTINGS_PROTO_UPDATE:function(e){var n=e.settings.type,t=e.wasSaved;if(n!==d.yP.FRECENCY_AND_FAVORITES_SETTINGS||!t)return!1;v.pendingUsages=[]}})},871339:(e,n,t)=>{t.d(n,{Z:()=>r});const r=(0,t(260561).B)({kind:"user",id:"2022-11_command_query_pagination",label:"Command Query Pagination",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},533404:(e,n,t)=>{t.d(n,{ZP:()=>le,yC:()=>W,JK:()=>de,
v1:()=>me,nM:()=>ce});var r=t(667294),i=t(23279),o=t.n(i),a=t(5387),u=t.n(a),l=t(202351),s=t(281110),c=t(744564),d=t(73904),f=t(924326),p=t(396043),y=t(861426),_=t(916675),E=t(948832),m=t(798808),h=t(917019),T=t(473419),g=t(61209),I=t(5544),v=t(567403),O=t(682776),A=t(715107),N=t(169898),S=t(485501);function C(e){r.useEffect((function(){h.DZ.loadIfNecessary()}),[]);var n=(0,l.e7)([S.ZP],(function(){return S.ZP.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){return(0,S.LU)(n,e)}),[n,e])}function M(e){r.useEffect((function(){h.DZ.loadIfNecessary()}),[]);var n=(0,l.e7)([S.ZP],(function(){return S.ZP.getTopCommandsWithoutLoadingLatest()}));return r.useMemo((function(){var t=(0,S.LU)(n,e);return(0,S.JV)(t)}),[n,e])}var b=t(871339),D=t(272200),R=t(248046),P=t(127624),Z=t(2590);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function L(e,n,t,r,i,o,a){try{var u=e[o](a),l=u.value}catch(e){t(e);return}
u.done?n(l):Promise.resolve(l).then(r,i)}function U(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){L(o,r,i,a,u,"next",e)}function u(e){L(o,r,i,a,u,"throw",e)}a(void 0)}))}}function H(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function j(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function G(e){G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return G(e)}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){j(e,n,t[n])}))}return e}function B(e,n){n=null!=n?n:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function k(e,n){return!n||"object"!==Y(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function x(e,n){x=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return x(e,n)}function q(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return w(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function V(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=G(e);if(n){var i=G(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return k(this,t)}}var K=function(e,n){var t,r,i,o,a={label:0,sent:function(){
if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}
}([o,u])}}};function W(e,n,t){var r;if(null==t?void 0:t.aborted)return Promise.resolve(null);var i={type:n.type,role_ids:null===(r=n.roleIds)||void 0===r?void 0:r.join(",")};if("applicationId"in n&&null!=n.applicationId)i.application_id=n.applicationId;else if("query"in n){i.query=n.query;i.limit=n.limit;i.cursor=n.cursor}else if("cursor"in n){i.limit=n.limit;i.cursor=n.cursor;null!=n.commandIds&&n.commandIds.length>0&&(i.command_ids=n.commandIds.join(","))}"includeApplications"in n&&(i.include_applications=n.includeApplications);"checkPermissions"in n&&(i.check_permissions=n.checkPermissions);var o,a=(o=U((function(r){return K(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e){setTimeout(e,r)}))];case 1:i.sent();return[2,W(e,n,t)]}}))})),function(e){return o.apply(this,arguments)});return s.Z.get({url:Z.ANM.APPLICATION_COMMANDS_SEARCH(e),query:i,signal:t}).then((function(e){var n,t,r;return 202===e.status?a(5e3):{applicationCommands:e.body.application_commands,
applications:e.body.applications,nextCursor:null===(n=e.body.cursor)||void 0===n?void 0:n.next,prevCursor:null===(t=e.body.cursor)||void 0===t?void 0:t.previous,repaired:null===(r=e.body.cursor)||void 0===r?void 0:r.repaired}}),(function(e){return(null==t?void 0:t.aborted)?null:429===e.status?a(1e3*e.body.retry_after):null}))}var z=function(e,n,t){var r=e.channel,i=e.guild;return null!=r?(0,N.Kh)(n,!0,t).filter((function(e){return null==e.predicate||e.predicate({channel:r,guild:i})})):[]};function Q(e,n){if(0===n.length)return e;var t=q(e),r=(0,R.nG)(n).filter((function(e){var n=t.findIndex((function(n){return n.id===e.id}));if(n>=0){t[n]=e;return!1}return!0}));return q(t).concat(q(r))}function X(e){return e.map((function(e){var n,t;return{type:D.Qi.APPLICATION,id:e.id,name:null!==(t=null==e||null===(n=e.bot)||void 0===n?void 0:n.username)&&void 0!==t?t:e.name,icon:e.icon,application:e}})).concat(N.Tm[P.bi.BUILT_IN])}var J=function(e,n){return{type:n,inputType:D.iw.PLACEHOLDER,
id:"placeholder-".concat(e),name:"",displayName:"",description:"",displayDescription:"",applicationId:""}},$=[N.Tm[P.bi.BUILT_IN]],ee=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&x(e,n)}(t,e);var n=V(t);function t(){H(this,t);var e;(e=n.apply(this,arguments)).channelStates=new(u())({max:5});e.componentIsOpen=!1;e.shouldResetAll=!1;e.shouldResetGuild=null;e.shouldResetDMs=!1;return e}var r=t.prototype;r.initialize=function(){var e=this;this.waitFor(T.Z);this.syncWith([O.Z],(function(){e.shouldResetAll=!0}));this.syncWith([T.Z],ie)};r.getChannelState=function(e,n){var t;return null===(t=ue.channelStates.get(e))||void 0===t?void 0:t[n]};r.getOrInsertChannelState=function(e,n){var t=ue.channelStates;if(!t.has(e)){var r,i=function(){return{discoveryInitialized:!1,topCursor:null,scrollDownCursor:null,
applicationSections:null,applicationCommands:null,filteredSectionId:null,pendingQueries:new Map,queries:new Map,queriedApplicationId:null,sawFrecencySection:!1}},o=(j(r={},d.yU.CHAT,i()),j(r,d.yU.MESSAGE,i()),j(r,d.yU.USER,i()),r);t.set(e,o)}return t.get(e)[n]};r.getApplicationSections=function(e,n){var t,r;return null!==(r=null===(t=this.getChannelState(e,n))||void 0===t?void 0:t.applicationSections)&&void 0!==r?r:$};r.getQueryCommands=function(e,n,t){var r,i,o,a=this.getChannelState(e,n);return null!==(o=null===(r=null==a?void 0:a.queries.get(t))||void 0===r?void 0:r.commands)&&void 0!==o?o:null===(i=null==a?void 0:a.pendingQueries.get(t))||void 0===i?void 0:i.commands};r.hasQueryResults=function(e,n,t){var r,i;return null!==(i=null===(r=this.getChannelState(e,n))||void 0===r?void 0:r.queries.has(t))&&void 0!==i&&i};r.__getLocalVars=function(){return{QUERY_LIMIT:7,getValidBuiltInCommands:z,getPlaceholderCommand:J,DEFAULT_SECTIONS:$,store:ue,getViewingAsRoleIds:se,doQuery:_e,
scrollDownQuery:Ee}};return t}(l.ZP.Store);ee.displayName="ApplicationCommandSearchStore";function ne(e){var n,t=e.guildId,r=A.Z.getChannelId();if(null!=r&&(null===(n=g.Z.getChannel(r))||void 0===n?void 0:n.guild_id)!==t)return te(t);if(ue.componentIsOpen){ue.shouldResetGuild=t;return!1}return te(t)}function te(e){var n=I.ZP.getChannels(e),t=n[I.sH].concat(n[I.Zb]),r=ue.channelStates.length,i=!0,o=!1,a=void 0;try{for(var u,l=t[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;ue.channelStates.del(s.channel.id)}}catch(e){o=!0;a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return ue.channelStates.length!==r}function re(){var e=ue.channelStates.length;ue.channelStates.keys().forEach((function(e){var n;(null===(n=g.Z.getChannel(e))||void 0===n?void 0:n.isPrivate())&&ue.channelStates.del(e)}));return ue.channelStates.length!==e}function ie(){
var e,n,t,r=null!==(t=null===(e=T.Z.settings.textAndImages)||void 0===e||null===(n=e.viewNsfwCommands)||void 0===n?void 0:n.value)&&void 0!==t&&t;if(r!==ue.viewNsfwCommands){ue.viewNsfwCommands=r;if(ue.componentIsOpen){ue.shouldResetDMs=!0;return!1}return re()}return!1}function oe(e){if(!ue.channelStates.has(e))return!1;ue.channelStates.del(e);return!0}function ae(){ue.shouldResetAll=!1;ue.shouldResetGuild=null;ue.shouldResetDMs=!1;ue.componentIsOpen=!1;ue.channelStates.reset()}var ue=new ee(c.Z,{LOGOUT:ae,CONNECTION_OPEN:ae,APPLICATION_COMMAND_SEARCH_STORE_UPDATE:function(e){var n=e.channelId,t=e.commandType,r=e.state,i=ue.channelStates.get(n);if(null!=i){var o=i[t],a=F({},o,r);i[t]=a;null==o.applicationCommands&&null!=a.applicationCommands&&a.pendingQueries.forEach((function(e,n){pe({context:e.context,commandType:e.commandType,query:n,limit:e.limit,canOnlyUseTextCommands:!1})}))}},APPLICATION_COMMAND_SEARCH_STORE_QUERY:function(e){
var n=e.context,t=e.commandType,r=e.query,i=e.limit,o=e.applicationId,a=null!=m.Z.getPendingReply(n.channel.id);pe({context:n,commandType:t,query:r,limit:i,canOnlyUseTextCommands:a,applicationId:o})||a||_e({context:n,commandType:t,query:r,limit:i,applicationId:o})},CHANNEL_UPDATES:function(e){var n=e.channels,t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;if(null!=u.guild_id&&ne({guildId:u.guild_id}))return!0}}catch(e){r=!0;i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return!1},GUILD_APPLICATION_COMMAND_INDEX_UPDATE:ne,IMPERSONATE_UPDATE:ne,IMPERSONATE_STOP:ne,APPLICATION_COMMAND_SEARCH_STORE_UI_UPDATE:function(e){var n=e.isOpen;ue.componentIsOpen=n;if(!ue.shouldResetAll){var t=!1;if(null!=ue.shouldResetGuild){t=te(ue.shouldResetGuild);ue.shouldResetGuild=null}if(ue.shouldResetDMs){t=re()||t;ue.shouldResetDMs=!1}return t}ae()},PRIVATE_CHANNEL_INTEGRATION_CREATE:function(e){return oe(e.integration.channel_id)},
PRIVATE_CHANNEL_INTEGRATION_UPDATE:function(e){return oe(e.integration.channel_id)},PRIVATE_CHANNEL_INTEGRATION_DELETE:function(e){return oe(e.channelId)},FETCH_PRIVATE_CHANNEL_INTEGRATIONS_SUCCESS:function(e){return oe(e.channelId)}});const le=ue;var se=function(e){if(null!=e){var n=y.Z.getViewingRoles(e);if(null!=n){var t=Object.keys(n);0===t.length&&t.push(e);return t}}};function ce(){r.useEffect((function(){c.Z.dispatch({type:"APPLICATION_COMMAND_SEARCH_STORE_UI_UPDATE",isOpen:!0});return function(){c.Z.dispatch({type:"APPLICATION_COMMAND_SEARCH_STORE_UI_UPDATE",isOpen:!1})}}),[])}function de(e,n,t,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=o.canOnlyUseTextCommands,u=o.canUseFrecency,s=(0,l.e7)([ue],(function(){return ue.getOrInsertChannelState(e.id,n)}),[e.id,n]),y=s.discoveryInitialized,m=s.topCursor,h=s.scrollDownCursor,T=s.applicationSections,g=s.applicationCommands,I=s.filteredSectionId,A=s.sawFrecencySection,b=r.useCallback((function(t){
c.Z.dispatch({type:"APPLICATION_COMMAND_SEARCH_STORE_UPDATE",channelId:e.id,commandType:n,state:t})}),[e.id,n]);(0,_.j)({channelId:e.id});var D=r.useRef(!1),w=(0,f.Z)(),L=r.useRef({cached:null,end:null,start:Date.now()}),U=r.useCallback((function(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!D.current){D.current=!0;var o=se(e.guild_id);W(e.id,F({type:n,roleIds:o},t),i?w:void 0).then((function(e){D.current=!1;r(e)}))}}),[e.id,e.guild_id,n,w]),H=r.useCallback((function(e){if(n===d.yU.CHAT&&(null==L.current.cached||L.current.cached===e)&&null==L.current.end){L.current.end=Date.now();(0,p.yw)(Z.rMx.APPLICATION_COMMAND_SEARCH_OPEN_TIMING,{cached:e,duration_ms:L.current.end-L.current.start})}}),[n]),j=r.useMemo((function(){return{channel:e,guild:null!=e.guild_id?v.Z.getGuild(e.guild_id):null}}),[e]),G=C(j),k=M(j),x=(0,l.e7)([O.Z,E.Z],(function(){return(0,R.oK)(O.Z,E.Z,null!=a&&a,e)}),[a,e]);r.useEffect((function(){if(y)H(!0);else{b({discoveryInitialized:!0})
;if(x)if(null!=g&&g.length>0)H(!0);else{var n=y?void 0:k,t=e.isPrivate()?{}:{limit:i,commandIds:n,cursor:null!=m?m:void 0};L.current.cached=!1;U(B(F({},t),{includeApplications:null==T}),(function(e){H(!1);if(null!=e){var n={applicationCommands:Q([],e.applicationCommands),topCursor:e.prevCursor,scrollDownCursor:e.nextCursor};if(null!=e.applications){var t;n.applicationSections=X(null!==(t=e.applications)&&void 0!==t?t:[])}b(n)}}),!1)}}}),[g,e,H,i,x,T,y,m,U,k,b]);var Y=r.useCallback((function(){null!=h&&U({limit:i,cursor:h},(function(e){if(null!=e){var n=!1===e.repaired?Q([],e.applicationCommands):Q(null!=g?g:[],e.applicationCommands);b({applicationCommands:n,scrollDownCursor:e.nextCursor})}}))}),[i,U,h,g,b]),V=r.useCallback((function(n){if(!D.current&&n!==I)if(null!=n){n in N.Tm||e.isPrivate()||U({applicationId:n},(function(e){null!=e&&b({applicationCommands:Q([],e.applicationCommands)})}));b({filteredSectionId:n,scrollDownCursor:null})}else e.isPrivate()?b({filteredSectionId:null,
discoveryInitialized:!0}):b({filteredSectionId:null,applicationCommands:null,discoveryInitialized:!1})}),[e,U,b,I]);ce();r.useEffect((function(){return function(){var t;null!=(null===(t=ue.channelStates.get(e.id))||void 0===t?void 0:t[n].filteredSectionId)&&V(null)}}),[]);var K=r.useMemo((function(){return z(j,n,a)}),[j,n,a]),$=r.useMemo((function(){return u?(x&&null!=g?g:[]).concat(K).filter((function(e){return G.includes(e.id)})).sort((function(e,n){var t=S.ZP.getScoreWithoutLoadingLatest(j,e);return S.ZP.getScoreWithoutLoadingLatest(j,n)-t})).slice(0,P.hz):[]}),[u,G,x,g,K,j]);r.useEffect((function(){!A&&$.length>0&&b({sawFrecencySection:!0})}),[b,$,A]);var ee=r.useMemo((function(){var e,n=[];($.length>0||A)&&(n=n.concat(N.Tm[P.bi.FRECENCY]));x&&null!=T&&(n=n.concat(T));(null===(e=n[n.length-1])||void 0===e?void 0:e.id)!==P.bi.BUILT_IN&&(n=n.concat(N.Tm[P.bi.BUILT_IN]));return n}),[x,T,$,A]),ne=x&&(!y||D.current||null!=h),te=r.useMemo((function(){if(!ne)return[]
;for(var e=[],r=0;r<t;r++)e.push(J(r,n));return e}),[ne,t,n]),re=r.useMemo((function(){var e=[],n=[];ee.forEach((function(t){if(null==I||t.id===I){var r;if((r=t.id===P.bi.BUILT_IN?ne?[]:q(K):t.id===P.bi.FRECENCY?q($):(null!=g?g:[]).filter((function(e){return e.applicationId===t.id}))).length>0||t.id===I){e.push(t);n.push({section:t,data:r})}}}));if(n.length>0&&te.length>0){var t;(t=n[n.length-1].data).push.apply(t,q(te))}return{activeSections:e,commandsByActiveSection:n}}),[ee,$,g,K,te,ne,I]),ie=re.activeSections,oe=re.commandsByActiveSection,ae=r.useMemo((function(){var e=[];e=e.concat($);x&&null!=g&&(e=e.concat(g));return e=e.concat(K)}),[x,$,g,K]);return{filterSection:V,scrollDown:Y,loading:D,filteredSectionId:I,hasMoreAfter:ne,commands:ae,sectionDescriptors:ee,activeSections:ie,commandsByActiveSection:oe,placeholders:te}}function fe(e,n,t,r){var i=t.name,o=t.displayName;if(i.startsWith(e))return 6;if(o.startsWith(e))return 6;if(i.startsWith(n[0])){
if(i.split(" ").slice(1).join(" ").startsWith(n.slice(1).join(" ")))return 5}if(o.startsWith(n[0])){if(o.split(" ").slice(1).join(" ").startsWith(n.slice(1).join(" ")))return 5}if(i.includes(e))return 4;if(null==o?void 0:o.includes(e))return 4;var a,u=!1,l=!0,s=!1,c=void 0;try{for(var d,f=(null!==(a=t.options)&&void 0!==a?a:[])[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,y=p.name,_=p.serverLocalizedName;if(y.startsWith(e))return 3;if("".concat(i," ").concat(y).startsWith(e))return 3;if(null!=o&&"".concat(o," ").concat(y).startsWith(e))return 2;if(null!=_){if(_.startsWith(e))return 3;if("".concat(i," ").concat(_).startsWith(e))return 3;if(null!=o&&"".concat(o," ").concat(_).startsWith(e))return 3}(y.includes(e)||(null==_?void 0:_.includes(e)))&&(u=!0)}}catch(e){s=!0;c=e}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}return u?2:(null==r?void 0:r.name.toLocaleLowerCase().startsWith(e))?1:0}function pe(e){
var n,t=e.context,r=e.commandType,i=e.query,o=e.limit,a=e.canOnlyUseTextCommands,u=e.applicationCommands,l=e.scrollDownCursor,s=e.applications,c=e.applicationId,d=void 0===c?null:c,f=ue.getOrInsertChannelState(t.channel.id,r);if(f.queriedApplicationId!==d){f.queries.clear();f.pendingQueries.clear();f.queriedApplicationId=d}else if(f.queries.has(i))return!0;null!=s&&(f.applicationSections=X(s));if(a)n=[];else{var p;n=t.channel.isPrivate()?null!==(p=f.applicationCommands)&&void 0!==p?p:[]:Q([],null!=u?u:[])}var y=z(t,r,a),_=(0,R.oK)(O.Z,E.Z,a,t.channel)&&(t.channel.isPrivate()?null==f.applicationCommands:null==u),m=[],T=!1;if(_)for(var g=i.length-1;g>0;g-=1){var I=i.slice(0,g),v=f.queries.get(I);if(null!=v){T=v.done;v.commands.forEach((function(e){null==n.find((function(n){return n.id===e.id}))&&null==y.find((function(n){return n.id===e.id}))&&m.push(e)}));break}}T&&(_=!1);var A=[],N=i.split(" ");q(n).concat(q(m),q(y)).forEach((function(e){
var n,t=null===(n=f.applicationSections)||void 0===n?void 0:n.find((function(n){return n.id===e.applicationId})),r=fe(i,N,e,t);r>0&&A.push(B(F({},e),{score:r}))}));h.DZ.loadIfNecessary();A.sort((function(e,n){if(e.score!==n.score)return n.score-e.score;var r=S.ZP.getScoreWithoutLoadingLatest(t,e),i=S.ZP.getScoreWithoutLoadingLatest(t,n);return r!==i?i-r:e.displayName.localeCompare(n.displayName)}));if(_||null!=l)for(var C=0;C<4;C+=1)A.push(B(F({},J(C,r)),{score:0}));if(_){f.pendingQueries.set(i,{context:t,commandType:r,limit:o,commands:A});f.queries.delete(i)}else{f.pendingQueries.delete(i);f.queries.set(i,{commands:A,done:T||(b.Z.getCurrentConfig({},{autoTrackExposure:!1}).enabled?null==l:n.length<o),scrollDownCursor:l})}return T}var ye,_e=o()((function(e){var n,t=e.context,r=e.commandType,i=e.query,o=e.limit,a=e.applicationId;if((0,R.oK)(O.Z,E.Z,!1,t.channel)){var u=ue.getOrInsertChannelState(t.channel.id,r)
;t.channel.isPrivate()?u.discoveryInitialized||null!=u.applicationCommands||W(t.channel.id,{type:r,includeApplications:null==u.applicationSections}).then((function(e){if(null!=e){var n,i={applicationCommands:Q([],null!==(n=e.applicationCommands)&&void 0!==n?n:[])};null!=e.applications&&(i.applicationSections=X(e.applications));c.Z.dispatch({type:"APPLICATION_COMMAND_SEARCH_STORE_UPDATE",channelId:t.channel.id,commandType:r,state:i})}})):null==(null===(n=u.queries.get(i))||void 0===n?void 0:n.scrollDownCursor)&&W(t.channel.id,{type:r,roleIds:se(t.channel.guild_id),query:i,limit:o,applicationId:a,includeApplications:!u.discoveryInitialized&&null==u.applicationSections}).then((function(e){if(null!=e&&ue.channelStates.has(t.channel.id)){pe({context:t,commandType:r,query:i,limit:o,canOnlyUseTextCommands:!1,applicationCommands:e.applicationCommands,scrollDownCursor:e.nextCursor,applications:e.applications,applicationId:a});ue.emitChange()}}))}}),250,{leading:!0,trailing:!0,maxWait:750
}),Ee=(ye=U((function(e){var n,t,r,i,o,a,u;return K(this,(function(l){switch(l.label){case 0:n=e.context,t=e.commandType,r=e.query,i=e.limit;if(!(0,R.oK)(O.Z,E.Z,!1,n.channel))return[2];a=ue.getOrInsertChannelState(n.channel.id,t);return n.channel.isPrivate()||null==(u=null===(o=a.queries.get(r))||void 0===o?void 0:o.scrollDownCursor)?[2]:[4,W(n.channel.id,{type:t,roleIds:se(n.channel.guild_id),query:r,limit:i,cursor:u,includeApplications:!a.discoveryInitialized&&null==a.applicationSections}).then((function(e){var i;if(null!=e&&ue.channelStates.has(n.channel.id)){var o,u=null!==(o=null===(i=a.queries.get(r))||void 0===i?void 0:i.commands.filter((function(e){return e.inputType!==D.iw.PLACEHOLDER})))&&void 0!==o?o:[],l=Q([],e.applicationCommands),s=[],c=r.split(" ");l.forEach((function(e){var n;if(null==u.find((function(n){return n.id===e.id}))){var t=null===(n=a.applicationSections)||void 0===n?void 0:n.find((function(n){return n.id===e.applicationId})),i=fe(r,c,e,t)
;i>0&&s.push(B(F({},e),{score:i}))}}));h.DZ.loadIfNecessary();s.sort((function(e,t){if(e.score!==t.score)return t.score-e.score;var r=S.ZP.getScoreWithoutLoadingLatest(n,e),i=S.ZP.getScoreWithoutLoadingLatest(n,t);return r!==i?i-r:e.displayName.localeCompare(t.displayName)}));var d=e.nextCursor;if(null!=d)for(var f=0;f<4;f+=1)s.push(B(F({},J(f,t)),{score:0}));a.queries.set(r,{commands:e.repaired?s:q(u).concat(q(s)),done:!0,scrollDownCursor:d});ue.emitChange()}}))];case 1:l.sent();return[2]}}))})),function(e){return ye.apply(this,arguments)});function me(e,n,t){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).applicationId;ce();var o=(0,l.cj)([ue],(function(){var r,i,o,a=ue.getOrInsertChannelState(e.id,n),u=a.queries,l=a.pendingQueries;return{applicationSections:a.applicationSections,commands:null!==(o=null===(r=u.get(t))||void 0===r?void 0:r.commands)&&void 0!==o?o:null===(i=l.get(t))||void 0===i?void 0:i.commands}}),[e.id,n,t]),a=o.commands,u=o.applicationSections
;r.useEffect((function(){c.Z.dispatch({type:"APPLICATION_COMMAND_SEARCH_STORE_QUERY",context:{channel:e,guild:null!=e.guild_id?v.Z.getGuild(e.guild_id):null},query:t,limit:7,commandType:n,applicationId:i})}),[e,n,t,i]);var s=r.useRef(!1),d=r.useCallback((function(){if(!s.current){s.current=!0;Ee({commandType:n,context:{channel:e},query:t,limit:7}).finally((function(){s.current=!1}))}}),[n,e,t]),f=null!=u?u:$;return{commands:a,sections:f,scrollDown:d}}},248046:(e,n,t)=>{t.d(n,{Z8:()=>A,nG:()=>C,BH:()=>M,Dd:()=>b,$z:()=>D,bD:()=>R,nT:()=>P,oK:()=>Z,BO:()=>w,Ft:()=>L});var r=t(224736),i=t.n(r),o=t(441143),a=t.n(o),u=t(496486),l=t.n(u),s=t(940060),c=t(73904),d=t(734394),f=t(948832),p=t(382060),y=t(682776),_=t(272200),E=t(127624),m=t(2590),h=t(520453);function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function I(e){
for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){g(e,n,t[n])}))}return e}function v(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function O(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return
;if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){var n,t=e.rootCommand,r=e.command,i=e.applicationId,o=e.subCommandPath;if(null!=t.permissions&&t.permissions.length>0){n={};t.permissions.forEach((function(e){n[e.id]=e}))}var a,u,l,d=(null!=o?o:[]).map((function(e){return e.name})),f=(null!=o?o:[]).map((function(e){return e.displayName}));return{version:t.version,guildId:t.guild_id,id:[t.id].concat(O(d)).join(E.oQ),name:[t.name].concat(O(d)).join(" "),serverLocalizedName:r.name_localized,applicationId:i,type:null!==(a=t.type)&&void 0!==a?a:c.yU.CHAT,inputType:_.iw.BOT,
description:r.description,options:N(r.options),rootCommand:t,subCommandPath:o,defaultMemberPermissions:null==t.default_member_permissions?void 0:s.Z.deserialize(t.default_member_permissions),dmPermission:t.dm_permission,permissions:n,displayName:[null!==(u=t.name_localized)&&void 0!==u?u:t.name].concat(O(f)).join(" "),displayDescription:null!==(l=r.description_localized)&&void 0!==l?l:r.description,nsfw:t.nsfw}}function N(e){return null==e?void 0:e.map((function(e){var n,t,r,i=v(I({},e),{choices:(r=e.choices,null==r?void 0:r.map((function(e){var n;return v(I({},e),{displayName:null!==(n=e.name_localized)&&void 0!==n?n:e.name})}))),options:N(e.options),serverLocalizedName:e.name_localized,displayName:null!==(n=e.name_localized)&&void 0!==n?n:e.name,displayDescription:null!==(t=e.description_localized)&&void 0!==t?t:e.description});return e.type===c.jw.CHANNEL&&"channel_types"in e?v(I({},i),{channelTypes:e.channel_types
}):e.type!==c.jw.NUMBER&&e.type!==c.jw.INTEGER||!("min_value"in e)&&!("max_value"in e)?e.type===c.jw.STRING&&("min_length"in e||"max_length"in e)?v(I({},i),{minLength:e.min_length,maxLength:e.max_length}):i:v(I({},i),{minValue:e.min_value,maxValue:e.max_value})}))}function S(e){var n=e.rootCommand,t=e.command,r=e.applicationId,i=e.subCommandPath;if(t.hasOwnProperty("id")){if(null==t.options||0===t.options.length)return[A({rootCommand:n,command:t,applicationId:r,subCommandPath:i})]}else if(t.type!==c.jw.SUB_COMMAND&&t.type!==c.jw.SUB_COMMAND_GROUP&&(null==t.options||0===t.options.length))return[A({rootCommand:n,command:t,applicationId:r,subCommandPath:i})];var o=[];if(null==t.options)return o;for(var a=t.options.filter((function(e){return e.type===c.jw.SUB_COMMAND_GROUP})),u=0;u<a.length;u++){var l,s;(l=o).push.apply(l,O(S({rootCommand:n,command:a[u],applicationId:r,subCommandPath:(null!=i?i:[]).concat([{name:a[u].name,type:c.jw.SUB_COMMAND_GROUP,
displayName:null!==(s=a[u].name_localized)&&void 0!==s?s:a[u].name}])})))}for(var d=t.options.filter((function(e){return e.type===c.jw.SUB_COMMAND})),f=0;f<d.length;f++){var p;o.push(A({rootCommand:n,command:d[f],applicationId:r,subCommandPath:(null!=i?i:[]).concat([{name:d[f].name,type:c.jw.SUB_COMMAND,displayName:null!==(p=d[f].name_localized)&&void 0!==p?p:d[f].name}])}))}0===a.length&&0===d.length&&o.push(A({rootCommand:n,command:t,applicationId:r,subCommandPath:i}));return o}function C(e){return l().flatMap(e,(function(e){a()(null!=e.id,"Missing command id");return S({rootCommand:e,command:e,applicationId:e.application_id,subCommandPath:void 0})}))}function M(e){return m.Xyh.test(e.trim())}function b(e,n,t,r){var i=[];l()(e).forEach((function(e){n.test(e.displayName)&&(null==e.predicate||e.predicate(t))&&i.push(e)}));return i.slice(0,r)}function D(e){
var n=e.type===c.jw.STRING,t=e.type===c.jw.CHANNEL,r=e.type===c.jw.USER||e.type===c.jw.MENTIONABLE,i=e.type===c.jw.ROLE||e.type===c.jw.MENTIONABLE;return{canMentionEveryone:n||i,canMentionHere:n,canMentionChannels:n||t,canMentionUsers:n||r,canMentionRoles:n||i,canMentionAnyGuildUser:r,canMentionNonMentionableRoles:i}}function R(e){return i()(e).subtract(1).toString()}function P(e,n,t,r){return!!Z(y.Z,f.Z,!1,e)&&(e.isPrivate()&&t>0||(null!==(i=null==r?void 0:r[n])&&void 0!==i?i:0)>0);var i}var Z=function(e,n,t,r){return!t&&(r.isMultiUserDM()?n.getIntegrations(r.id).length>0:r.isDM()?!r.isSystemDM()&&(null!=r.rawRecipients.find((function(e){return e.bot}))||n.getIntegrations(r.id).length>0):!r.isArchivedLockedThread()&&(!!(0,p.Em)(r.type)&&e.can(s.Z.combine(h.Pl.USE_APPLICATION_COMMANDS,h.Pl.SEND_MESSAGES),r)))},w=s.Z.deserialize(0);function L(e){var n=e.PermissionStore,t=e.guild,r=e.selfMember,i=e.applicationLevelPermissions,o=e.commandLevelPermissions,a=e.defaultMemberPermissions
;if(t.ownerId===r.userId||n.can(h.Pl.ADMINISTRATOR,t))return!0;var u=t.id;if(null!=o){var l=U(r,u,o);if("boolean"==typeof l)return l}var c=U(r,u,i);return!("boolean"==typeof c&&!c)&&(null==a||!s.Z.equals(a,w)&&n.can(a,t))}function U(e,n,t){var r=t[(0,d.rE)(e.userId,_.Kw.USER)];if(null!=r)return r.permission;var i=!1,o=!0,a=!1,u=void 0;try{for(var l,s=e.roles[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,f=t[(0,d.rE)(c,_.Kw.ROLE)];if(null!=f){i=!0;if(f.permission)return!0}}}catch(e){a=!0;u=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw u}}if(i)return!1;var p=t[(0,d.rE)(n,_.Kw.ROLE)];return null!=p?p.permission:null}},418973:(e,n,t)=>{t.d(n,{Z:()=>S});var r=t(785893),i=(t(667294),t(496486)),o=t.n(i),a=t(945460),u=t(761953),l=t(336334),s=t(73904),c=t(773011),d=t(840922),f=t(473903),p=t(272200),y=t(127624),_=t(2590),E=t(473708);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n,t,r,i,o,a){
try{var u=e[o](a),l=u.value}catch(e){t(e);return}u.done?n(l):Promise.resolve(l).then(r,i)}function T(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){h(o,r,i,a,u,"next",e)}function u(e){h(o,r,i,a,u,"throw",e)}a(void 0)}))}}function g(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function I(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}var v=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),
throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function O(e){switch(e){case _.nkL.GIPHY.title:
case _.nkL.TENOR.title:return E.Z.Messages.COMMAND_GIPHY_DESCRIPTION;default:return""}}var A,N=(A=o()(_.nkL).values().map((function(e){return{id:e.commandId,name:e.command,displayName:e.command,type:s.yU.CHAT,inputType:p.iw.BUILT_IN_INTEGRATION,applicationId:y.bi.BUILT_IN,get description(){return O(e.title)},get displayDescription(){return O(e.title)},options:e.type===_.q9n.GIF?[{name:"query",displayName:"query",type:s.jw.STRING,get description(){return E.Z.Messages.COMMAND_GIPHY_QUERY_DESCRIPTION},get displayDescription(){return E.Z.Messages.COMMAND_GIPHY_QUERY_DESCRIPTION},required:!0}]:[],integrationType:e.type,integrationTitle:e.title}})).value(),function(e){if(Array.isArray(e))return m(e)}(A)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(A)||function(e,n){if(e){if("string"==typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,n):void 0}}(A)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{id:"-15",name:"leave",displayName:"leave",type:s.yU.CHAT,inputType:p.iw.BUILT_IN,applicationId:y.bi.BUILT_IN,get description(){return E.Z.Messages.LEAVE_GROUP_DM},get displayDescription(){return E.Z.Messages.LEAVE_GROUP_DM},options:[{name:"silent",displayName:"silent",type:s.jw.BOOLEAN,get description(){return E.Z.Messages.LEAVE_GROUP_DM_SILENTLY_COMMAND_OPTION},get displayDescription(){return E.Z.Messages.LEAVE_GROUP_DM_SILENTLY},required:!1}],predicate:function(e){return e.channel.isGroupDM()},execute:function(e,n){var t,i,o=n.channel,s=(0,c.F6)(o,f.default,d.Z),p=E.Z.Messages.LEAVE_GROUP_DM_TITLE.format({name:s}),y=E.Z.Messages.LEAVE_GROUP_DM_BODY.format({name:s
}),_=null!==(i=null===(t=e.find((function(e){return"silent"===e.name})))||void 0===t?void 0:t.value)&&void 0!==i&&i;if(o.isManaged()){p=E.Z.Messages.LEAVE_GROUP_DM_MANAGED_TITLE.format({name:s});y=E.Z.Messages.LEAVE_GROUP_DM_MANAGED_BODY.format({name:s})}(0,a.openModal)((function(e){return(0,r.jsx)(a.ConfirmModal,I(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){g(e,n,t[n])}))}return e}({header:p,confirmText:E.Z.Messages.LEAVE_GROUP_DM,cancelText:E.Z.Messages.CANCEL,onConfirm:m},e),{children:(0,r.jsx)(a.Text,{variant:"text-md/normal",children:y})}))}));function m(){return h.apply(this,arguments)}function h(){return(h=T((function(){return v(this,(function(e){switch(e.label){case 0:e.trys.push([0,2,,3])
;return[4,u.Z.closePrivateChannel(o.id,void 0,_)];case 1:e.sent();return[3,3];case 2:e.sent();l.Z.sendBotMessage(o.id,E.Z.Messages.LEAVE_GROUP_DM_ERROR);return[3,3];case 3:return[2]}}))}))).apply(this,arguments)}}}]);const S=N},866893:(e,n,t)=>{t.d(n,{U:()=>x,Z:()=>V});var r=t(496486),i=t.n(r),o=t(920883),a=t(842227),u=t(202351),l=t(744564),s=t(536945),c=t(591684),d=t(736818),f=t(61209),p=t(717091),y=t(715107),_=t(72580),E=t(474167);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return T(e)}function g(e,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function I(e,n){
I=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return I(e,n)}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0
;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=T(e);if(n){var i=T(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return g(this,t)}}var N,S=[],C=null,M=null,b=new Set,D=o.z.LATEST_ACTIVITY,R=0,P=[],Z=!1,w=[],L=i().chain(S),U=i().chain(S),H=new Set,j=new Set;function G(e){var n;return null!==(n=p.ZP.lastMessageId(e))&&void 0!==n?n:e}function F(e){return function(n,t){return(0,E.yv)(n)?-1:(0,E.yv)(t)?1:e===o.z.LATEST_ACTIVITY?a.default.compare(G(t),G(n)):a.default.compare(t,n)}}function B(){P=[];N=null;M=null;b=new Set;D=o.z.LATEST_ACTIVITY;R=0;w=[];L=i().chain(S);U=i().chain(S);j.clear();H.clear()}function k(){var e,n=y.Z.getChannelId();if(null==n||!(null===(e=f.Z.getChannel(n))||void 0===e?void 0:e.isForumLikeChannel())){B();return!1}q({refreshThreadIds:!0})}function x(e){var n=f.Z.getChannel(e)
;return null==n?[]:Object.values(s.Z.getThreadsForParent(n.guild_id,n.id)).map((function(e){return e.id})).sort(F(D))}function q(e){var n=f.Z.getChannel(M);if(null!=n){if(null==e?void 0:e.refreshThreadIds){w=Object.values(s.Z.getThreadsForParent(n.guild_id,n.id)).map((function(e){return e.id}));R=0;Z=!0}if(0!==H.size){w=w.filter((function(e){return!H.has(e)}));H.clear()}if(0!==j.size){w=Array.from(new Set(v(w).concat(v(j))));j.clear()}if((null==e?void 0:e.refreshThreadIds)||(null==e?void 0:e.sortThreadIds)){U=i().chain(w).sort(F(o.z.LATEST_ACTIVITY));L=i().chain(w).sort(F(o.z.CREATION_DATE))}var t,r=(D===o.z.LATEST_ACTIVITY?U:L).value(),a=(P=0===b.size?r:r.filter((t=b,function(e){var n,r=null===(n=f.Z.getChannel(e))||void 0===n?void 0:n.appliedTags;return null!=r&&0!==r.length&&r.some((function(e){return t.has(e)}))}))).find((function(e){return function(e){var n=c.Z.getCount(e);return null===n||0===n}(e)}));N=null==a?null:a}}var Y=function(e){!function(e,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&I(e,n)}(t,e);var n=A(t);function t(){h(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(f.Z,s.Z,y.Z,p.ZP)};r.getNewThreadCount=function(){return R};r.getCanAckThreads=function(){return Z};r.getThreadIds=function(e,n,t){var r=e!==M,i=!(0,_.OL)(t,b),o=n!==D;M=e;b=t;D=n;r?q({refreshThreadIds:!0}):o?q({sortThreadIds:!0}):i&&q();return P};r.getCurrentThreadIds=function(){return P};r.getAndDeleteMostRecentUserCreatedThreadId=function(){var e=C;C=null;return e};r.getFirstNoReplyThreadId=function(){return N};r.__getLocalVars=function(){return{NO_THREAD_IDS:S,mostRecentUserCreatedThreadId:C,currentChannelId:M,currentTagFilter:b,currentSortOrder:D,newThreadCount:R,threadIds:P,firstNoReplyThreadId:N,canAckThreads:Z,_all:w,_lazySortedCreation:L,
_lazySortedActivity:U,_deleted:H,_pinned:j}};return t}(u.ZP.Store);Y.displayName="ForumActivePostStore";const V=new Y(l.Z,{CONNECTION_OPEN:k,OVERLAY_INITIALIZE:k,GUILD_CREATE:k,CHANNEL_SELECT:k,CHANNEL_DELETE:function(e){var n=e.channel;if(null==n.parent_id||n.parent_id!==M)return!1;B()},THREAD_LIST_SYNC:function(e){var n,t=e.guildId;if(null==M)return!1;if(t!==(null===(n=f.Z.getChannel(M))||void 0===n?void 0:n.guild_id))return!1;q({refreshThreadIds:!0})},THREAD_CREATE:function(e){var n=e.channel,t=e.isNewlyCreated;if(null==n.parent_id||n.parent_id!==M)return!1;if(!t)return!1;n.ownerId!==d.default.getId()?R++:C=n.id},THREAD_UPDATE:function(e){var n=e.channel;if(null==n.parent_id||n.parent_id!==M)return!1;var t=(0,E.yv)(n.id),r=j.has(n.id);if(t&&!r){j.add(n.id);q({sortThreadIds:!0})}else{if(t||!r)return!1;j.delete(n.id);q({sortThreadIds:!0})}},THREAD_DELETE:function(e){var n=e.channel;if(null==n.parent_id||n.parent_id!==M)return!1;H.add(n.id);q({sortThreadIds:!0})},
RESORT_THREADS:function(e){var n=e.channelId;if(null==n||n!==M)return!1;q({refreshThreadIds:!0})},CHANNEL_ACK:function(e){var n=e.channelId;if(null==n||n!==M)return!1;Z=!1}})},774930:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(202351),i=t(409125);function o(){return(0,r.e7)([i.Z],(function(){return null!=i.Z.getRemoteSessionId()||null!=i.Z.getAwaitingRemoteSessionInfo()}))}},777302:(e,n,t)=>{t.d(n,{F:()=>d,Z:()=>f});var r=t(202351),i=t(567403),o=t(682776),a=t(473903),u=t(563135),l=t(2590);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function c(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done);a=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){u=!0;i=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw i}}return o}}(e,n)||function(e,n){
if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){var t=c(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[a.default,i.Z,o.Z],3),r=t[0],s=t[1],d=t[2],f=s.getGuild(e),p=r.getUser(n);if(null==f||null==p)return!1;if(p.isNonUserBot())return!1;var y=f.isOwner(p)||u.ZP.can({permission:l.Plq.ADMINISTRATOR,user:p,context:f});return!y&&d.canManageUser(l.Plq.MODERATE_MEMBERS,p,f)}function f(e,n){return(0,r.e7)([a.default,i.Z,o.Z],(function(){return d(e,n,[a.default,i.Z,o.Z])}),[e,n])}},734394:(e,n,t)=>{t.d(n,{gw:()=>i,rE:()=>o});var r=t(73904);t(272200)
;function i(e,n){return e===r.yU.CHAT?"/"+n:n}function o(e,n){return"".concat(e,":").concat(n)}},564333:(e,n,t)=>{t.d(n,{Rh:()=>u,Yz:()=>l,GB:()=>s});t(608575);var r=t(281110),i=t(744564),o=(t(585622),t(948832)),a=t(2590);t(520453),t(473708);function u(){if(o.Z.getApplicationsShelfFetchState()===o.M.NOT_FETCHED){i.Z.dispatch({type:"APPLICATIONS_SHELF_FETCH_START"});r.Z.get(a.ANM.APPLICATIONS_SHELF).then((function(e){return i.Z.dispatch({type:"APPLICATIONS_SHELF_FETCH_SUCCESS",applications:e.body.applications})})).catch((function(e){return i.Z.dispatch({type:"APPLICATIONS_SHELF_FETCH_FAIL"})}))}}function l(e){i.Z.dispatch({type:"FETCH_PRIVATE_CHANNEL_INTEGRATIONS_START",channelId:e});r.Z.get(a.ANM.CHANNEL_INTEGRATIONS(e)).then((function(n){i.Z.dispatch({type:"FETCH_PRIVATE_CHANNEL_INTEGRATIONS_SUCCESS",channelId:e,integrations:n.body})})).catch((function(){i.Z.dispatch({type:"FETCH_PRIVATE_CHANNEL_INTEGRATIONS_FAIL",channelId:e})}))}function s(e,n){
return r.Z.delete(a.ANM.CHANNEL_INTEGRATION(e,n)).then((function(e){var n;if(null===(n=e.body)||void 0===n?void 0:n.message)throw new Error(e.body.message)}))}},916675:(e,n,t)=>{t.d(n,{j:()=>d});var r=t(667294),i=t(202351),o=t(318715),a=t(61209);const u=(0,t(260561).B)({kind:"user",id:"2023-03_apps_in_gdms",label:"Apps in GDMs",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Show apps in gdm",config:{enabled:!0}}]});function l(e){return null!=e&&(!!e.isMultiUserDM()||!!e.isDM()&&(!e.isSystemDM()&&null==e.rawRecipients.find((function(e){return e.bot}))))}var s=t(564333),c=t(948832);function d(e){var n=e.channelId,t=function(e){var n=(0,o.ZP)([a.Z],(function(){return a.Z.getChannel(e)}));return u.useExperiment({},{autoTrackExposure:!1}).enabled&&l(n)}(n),d=(0,i.cj)([c.Z],(function(){return{installedIntegrations:c.Z.getIntegrations(n),applicationsShelf:c.Z.getApplicationsShelf(),integrationsFetchState:c.Z.getIntegrationsFetchState(n),
applicationsShelfFetchState:c.Z.getApplicationsShelfFetchState()}})),f=d.installedIntegrations,p=d.applicationsShelf,y=d.integrationsFetchState,_=d.applicationsShelfFetchState;r.useEffect((function(){if(t){y!==c.M.NOT_FETCHED&&y!==c.M.FETCH_FAILED||(0,s.Yz)(n);_!==c.M.NOT_FETCHED&&_!==c.M.FETCH_FAILED||(0,s.Rh)()}}),[t,n,y,_]);var E=new Set(f.map((function(e){return e.application.id})));return{installedIntegrations:f,availableApplications:p.filter((function(e){return!E.has(e.id)})),applicationsShelf:p,fetched:y!==c.M.NOT_FETCHED&&y!==c.M.FETCHING&&_!==c.M.NOT_FETCHED&&_!==c.M.FETCHING,appsInGDMEnabled:t}}},948832:(e,n,t)=>{t.d(n,{M:()=>p,Z:()=>A});var r=t(202351),i=t(744564),o=t(451936),a=t(223397);function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function c(e,n){return!n||"object"!==y(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function d(e,n){d=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return d(e,n)}function f(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return u(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
}()}var p,y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return c(this,t)}}!function(e){e[e.NOT_FETCHED=0]="NOT_FETCHED";e[e.FETCHING=1]="FETCHING";e[e.FETCHED=2]="FETCHED";e[e.FETCH_FAILED=3]="FETCH_FAILED"}(p||(p={}));var E=new Map,m=new Map,h=[],T=p.NOT_FETCHED,g=[],I=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&d(e,n)}(t,e);var n=_(t);function t(){
l(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getIntegrations=function(e){var n;return null!==(n=E.get(e))&&void 0!==n?n:g};r.getAllIntegrations=function(){return E};r.getIntegrationsFetchState=function(e){var n;return null!==(n=m.get(e))&&void 0!==n?n:p.NOT_FETCHED};r.getApplicationsShelfFetchState=function(){return T};r.getApplicationsShelf=function(){return h};r.__getLocalVars=function(){return{integrationsByChannel:E,integrationsByChannelFetchState:m,applicationsShelf:h,applicationsShelfFetchState:T,EMPTY:g,store:O}};return t}(r.ZP.Store);I.displayName="PrivateChannelIntegrationStore";function v(e){return e.sort((function(e,n){return e.application.name.localeCompare(n.application.name)}))}var O=new I(i.Z,{LOGOUT:function(){E.clear()},CONNECTION_OPEN:function(){E.clear();m.clear()},CHANNEL_SELECT:function(e){var n=e.channelId;if(null==n||m.get(n)!==p.FETCH_FAILED)return!1;m.set(n,p.NOT_FETCHED)},APPLICATIONS_SHELF_FETCH_START:function(){T=p.FETCHING},
APPLICATIONS_SHELF_FETCH_SUCCESS:function(e){var n=e.applications;h=n.map(o.Z.createFromServer).sort((function(e,n){return e.name.localeCompare(n.name)}));T=p.FETCHED},APPLICATIONS_SHELF_FETCH_FAIL:function(){T=p.FETCH_FAILED},FETCH_PRIVATE_CHANNEL_INTEGRATIONS_START:function(e){var n=e.channelId;E.set(n,null);m.set(n,p.FETCHING)},FETCH_PRIVATE_CHANNEL_INTEGRATIONS_SUCCESS:function(e){var n=e.channelId,t=e.integrations;E.set(n,v(t.map(a.F)));m.set(n,p.FETCHED)},FETCH_PRIVATE_CHANNEL_INTEGRATIONS_FAIL:function(e){var n=e.channelId;m.set(n,p.FETCH_FAILED)},PRIVATE_CHANNEL_INTEGRATION_CREATE:function(e){var n=e.integration,t=E.get(n.channel_id);if(null==t)return!1;E.set(n.channel_id,v(f(t).concat([(0,a.F)(n)])))},PRIVATE_CHANNEL_INTEGRATION_UPDATE:function(e){var n=e.integration,t=E.get(n.channel_id);if(null==t)return!1;var r=(0,a.F)(n),i=t.findIndex((function(e){return e.application.id===r.application.id})),o=f(t);-1===i?o.push(r):o[i]=r;E.set(r.channel_id,v(o))},
PRIVATE_CHANNEL_INTEGRATION_DELETE:function(e){var n=e.channelId,t=e.applicationId,r=E.get(n);if(null==r)return!1;E.set(n,r.filter((function(e){return e.application.id!==t})))},CHANNEL_DELETE:function(e){var n=e.channel;return E.delete(n.id)}});const A=O},798808:(e,n,t)=>{t.d(n,{Z:()=>m});var r=t(202351),i=t(744564);function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function l(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}
return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function s(e,n){return!n||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function c(e,n){c=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return c(e,n)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)}}var p={};function y(){p={}}var _=function(e){!function(e,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&c(e,n)}(t,e);var n=f(t);function t(){o(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getPendingReply=function(e){return p[e]};r.__getLocalVars=function(){return{pendingReplies:p,instance:E}};return t}(r.ZP.Store);_.displayName="PendingReplyStore";var E=new _(i.Z,{CREATE_PENDING_REPLY:function(e){var n=e.channel,t=e.message,r=e.shouldMention,i=void 0===r||r,o=e.showMentionToggle,a=void 0===o||o;p[n.id]={channel:n,message:t,shouldMention:i,showMentionToggle:a}},SET_PENDING_REPLY_SHOULD_MENTION:function(e){var n=e.channelId,t=e.shouldMention;if(!(n in p))return!1;p[n]=l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){a(e,n,t[n])}))}return e}({},p[n]),{shouldMention:t})},DELETE_PENDING_REPLY:function(e){var n=e.channelId;delete p[n]},CONNECTION_OPEN:y,LOGOUT:y,MESSAGE_DELETE:function(e){var n,t,r=e.id,i=e.channelId;if((null===(n=p[i])||void 0===n||null===(t=n.message)||void 0===t?void 0:t.id)!==r)return!1;delete p[i]}});const m=E},596217:(e,n,t)=>{t.d(n,{nt:()=>u,WD:()=>l});var r=t(288306),i=t.n(r),o=(t(730381),t(379364)),a=t(473708);function u(){return[{label:a.Z.Messages.AUTO_ARCHIVE_DURATION_1_HOUR,value:60},{label:a.Z.Messages.AUTO_ARCHIVE_DURATION_24_HOURS,value:1440},{label:a.Z.Messages.AUTO_ARCHIVE_DURATION_3_DAYS,value:4320},{label:a.Z.Messages.AUTO_ARCHIVE_DURATION_1_WEEK,value:10080}]}i()((function(){return u().map((function(e){return e.value}))}));function l(e,n){var t
;return null!==(t=null!=n?n:null==e?void 0:e.defaultAutoArchiveDuration)&&void 0!==t?t:o.AX}},161283:(e,n,t)=>{t.d(n,{Jw:()=>N,vH:()=>C,oD:()=>M,Od:()=>b,JA:()=>D,gK:()=>R,Wj:()=>P});var r=t(667294),i=t(281110),o=t(744564),a=t(105783),u=t(943469),l=t(336334),s=t(567867),c=t(866893),d=t(854602),f=t(30027),p=t(61209),y=t(284610),_=t(352980),E=t(539273),m=t(596217),h=t(225386),T=t(323483),g=t(379364),I=t(2590),v=t(473708);function O(e,n,t,r,i,o,a){try{var u=e[o](a),l=u.value}catch(e){t(e);return}u.done?n(l):Promise.resolve(l).then(r,i)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){O(o,r,i,a,u,"next",e)}function u(e){O(o,r,i,a,u,"throw",e)}a(void 0)}))}}var N,S=function(e,n){var t,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){
return function(o){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};!function(e){e[e.Disabled=1]="Disabled";e[e.Enabled=2]="Enabled";e[e.PrivateOnly=3]="PrivateOnly"}(N||(N={}));function C(e){var n=(0,h.NE)(e);return(0,
h.Xu)(e)?n?N.Enabled:N.PrivateOnly:N.Disabled}function M(e,n){return n===N.PrivateOnly||null!==(t=e.isPrivate)&&void 0!==t&&t;var t}function b(e,n){var t,r,i,o=null==n?null:_.Z.getMessage(e.id,n),a=null!==(i=null==o||null===(t=o.embeds)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.rawTitle)&&void 0!==i?i:"";if(""!==a)return a.length>40?a.substring(0,40)+"...":a;for(var u,l=f.ZP.unparse(null!==(u=null==o?void 0:o.content)&&void 0!==u?u:"",e.id,!0),s=(0,T.Z)(l.split("\n")[0],!0).split(/(?:\s|[!@#$%^&*()_\-+={}[\]:";'<>?,./])+/),c=s[0],d=1;d<s.length;d++){var p=c+" "+s[d];if(p.length>40)break;c=p}c.length>40&&(c=c.substring(0,40)+"...");return c}function D(e){var n,t=e.parentChannel,o=e.parentMessageId,a=e.threadSettings,c=e.privateThreadMode,d=e.location,_=e.onThreadCreated,E=e.useDefaultThreadName,h=e.uploadHandler;return r.useCallback((n=A((function(e,n,r){var T,g,O,A,N,C,D,R;return S(this,(function(S){switch(S.label){case 0:T=null==o||!1;g=M(a,c)
;if(""===(A=null!==(O=a.name)&&void 0!==O?O:"")&&E){N=b(t,o);A=""!==N?N:v.Z.Messages.THREAD}C=(0,m.WD)(t);D=p.Z.getChannel(o);return[4,Z(t,(function(){var e=null!=o?I.ANM.CHANNEL_MESSAGE_THREADS(t.id,o):I.ANM.CHANNEL_THREADS(t.id);return i.Z.post({url:e,body:{name:A,type:g?I.d4z.PRIVATE_THREAD:t.type===I.d4z.GUILD_ANNOUNCEMENT?I.d4z.ANNOUNCEMENT_THREAD:I.d4z.PUBLIC_THREAD,auto_archive_duration:C,location:d}})}))];case 1:if((R=S.sent())!==D){u.Z.clearDraft(t.id,y.d.ThreadSettings);u.Z.clearDraft(t.id,y.d.FirstThreadMessage);null==_||_(R);(T||e.length>0||null!=n&&n.length>0||null!=r&&r.length>0)&&function(e,n,t,r,i){if(!(null!=i&&null!=r&&r.length>0))return null!=t&&t.length>0?l.Z.sendStickers(e.id,t,n):l.Z.sendMessage(e.id,f.ZP.parse(e,n));i(e,r,n,t)}(R,e,n,r,h)}s.Z.clearAll(t.id,y.d.FirstThreadMessage);return[2]}}))})),function(e,t,r){return n.apply(this,arguments)}),[t,o,a,_,c,d,E,h])}function R(e,n,t,r,o){return Z(e,(function(){return i.Z.post({url:I.ANM.CHANNEL_THREADS(e.id),body:{
name:n,type:t,auto_archive_duration:r,location:o}})}))}function P(e){var n,t=e.parentChannel,o=e.name,a=e.appliedTags,l=e.onThreadCreated,c=e.upload;return r.useCallback((n=A((function(e,n,r){var f,p,_,E;return S(this,(function(h){switch(h.label){case 0:f=(0,m.WD)(t,null);p=I.ANM.CHANNEL_THREADS(t.id)+"?use_nested_fields=true";_={name:o,auto_archive_duration:f,applied_tags:a,message:{content:e,sticker_ids:n}};return[4,Z(t,(function(){return null!=r&&r.length>0?c(p,_,r):i.Z.post({url:p,body:_})}))];case 1:E=h.sent();u.Z.clearDraft(t.id,y.d.ThreadSettings);u.Z.clearDraft(t.id,y.d.FirstThreadMessage);s.Z.clearAll(t.id,y.d.FirstThreadMessage);(0,d.Je)({guildId:t.guild_id,channelId:t.id,postId:E.id});null==l||l(E);return[2,E]}}))})),function(e,t,r){return n.apply(this,arguments)}),[t,o,l,a,c])}function Z(e,n){return w.apply(this,arguments)}function w(){return(w=A((function(e,n){var t,r,i,u,l,s,d,f,y,_;return S(this,(function(m){switch(m.label){case 0:r=e.isForumLikeChannel();m.label=1
;case 1:m.trys.push([1,3,,4]);return[4,n()];case 2:if(null==(t=m.sent()).body)a.Z.show({title:v.Z.Messages.ERROR,body:v.Z.Messages.ERROR_OCCURRED_TRY_AGAIN});else{o.Z.dispatch({type:"SLOWMODE_RESET_COOLDOWN",slowmodeType:E.S.CreateThread,channelId:e.id});o.Z.dispatch({type:"THREAD_CREATE_LOCAL",channelId:t.body.id})}return[3,4];case 3:i=m.sent();if((null===(u=i.body)||void 0===u?void 0:u.code)===I.evJ.TOO_MANY_THREADS)a.Z.show({title:r?v.Z.Messages.CANNOT_CREATE_FORUM_POST:v.Z.Messages.CANNOT_CREATE_THREAD,body:r?v.Z.Messages.TOO_MANY_FORUM_POSTS_MESSAGE:v.Z.Messages.TOO_MANY_THREADS_MESSAGE});else if((null===(l=i.body)||void 0===l?void 0:l.code)===I.evJ.TOO_MANY_ANNOUNCEMENT_THREADS)a.Z.show({title:v.Z.Messages.CANNOT_CREATE_THREAD,body:v.Z.Messages.TOO_MANY_ANNOUNCEMENT_THREADS_MESSAGE});else if((null===(s=i.body)||void 0===s?void 0:s.code)===I.evJ.SLOWMODE_RATE_LIMITED)(_=null!==(y=i.body.retry_after)&&void 0!==y?y:0)>0&&o.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:e.id,
slowmodeType:E.S.CreateThread,cooldownMs:1e3*_});else if(429===i.status)a.Z.show({title:r?v.Z.Messages.CANNOT_CREATE_FORUM_POST:v.Z.Messages.CANNOT_CREATE_THREAD,body:v.Z.Messages.RATE_LIMITED});else{if(g.fZ.has(null===(d=i.body)||void 0===d?void 0:d.code))throw i;if(g.RN.has(null===(f=i.body)||void 0===f?void 0:f.code))return[2,new Promise((function(e,n){null==i.body&&n();c.Z.addConditionalChangeListener((function(){var t=c.Z.getAndDeleteMostRecentUserCreatedThreadId();if(null!=t){var r=p.Z.getChannel(t);o.Z.wait((function(){null==r?n():e(r)}));return!1}}))}))];a.Z.show({title:v.Z.Messages.ERROR,body:v.Z.Messages.ERROR_OCCURRED_TRY_AGAIN})}return[3,4];case 4:return[2,new Promise((function(e,n){null==t.body&&n();p.Z.addConditionalChangeListener((function(){var n=p.Z.getChannel(t.body.id);if(null!=n){o.Z.wait((function(){e(n)}));return!1}}))}))]}}))}))).apply(this,arguments)}},225386:(e,n,t)=>{t.d(n,{tM:()=>E,NE:()=>m,ki:()=>h,Xu:()=>T,cD:()=>g,Ek:()=>v,JQ:()=>O,C7:()=>A,tc:()=>C,
$R:()=>M,RG:()=>b,xl:()=>D,Xb:()=>P,Y:()=>Z,Gu:()=>w});var r=t(496486),i=t.n(r),o=t(940060),a=t(202351),u=t(249139),l=t(774930),s=t(791707),c=t(382060),d=t(736818),f=t(61209),p=t(682776),y=t(18882),_=t(2590),E=(0,u.Z)({id:"2022-07_voice_in_threads",label:"Voice in Threads",kind:"guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"On",config:{enabled:!0}}]});function m(e,n){return I((0,a.e7)([p.Z],(function(){var n=e.isForumLikeChannel()?_.Plq.SEND_MESSAGES:o.Z.combine(_.Plq.CREATE_PUBLIC_THREADS,_.Plq.READ_MESSAGE_HISTORY);return p.Z.can(n,e)}),[e]),e,n)}function h(e,n){var t=e.isForumLikeChannel()?_.Plq.SEND_MESSAGES:o.Z.combine(_.Plq.CREATE_PUBLIC_THREADS,_.Plq.READ_MESSAGE_HISTORY);return I(p.Z.can(t,e),e,n)}function T(e){var n=(0,a.e7)([p.Z],(function(){return p.Z.can(o.Z.combine(_.Plq.CREATE_PRIVATE_THREADS),e)}),[e]);return e.type===_.d4z.GUILD_TEXT&&I(n,e)}function g(e){var n=m(e),t=T(e);return n||t}function I(e,n,t){if(__OVERLAY__)return!1;if(!e)return!1
;if(!c.uC.has(n.type))return!1;if(null!=t){if(t.hasFlag(_.iLy.HAS_THREAD))return!1;if((0,s.Z)(t))return!1}return!0}function v(e){var n=(0,a.e7)([f.Z],(function(){return f.Z.getChannel(e.id)}),[e]);return function(e,n,t){return!!n.hasFlag(_.iLy.HAS_THREAD)&&(null!=t&&!!e)}((0,a.e7)([p.Z],(function(){return p.Z.can(_.Plq.VIEW_CHANNEL,n)}),[n]),e,n)}function O(e){return(0,a.cj)([y.Z,p.Z],(function(){var n=y.Z.getActiveJoinedThreadsForParent(e.guild_id,e.id),t=y.Z.getActiveJoinedRelevantThreadsForParent(e.guild_id,e.id),r=y.Z.getActiveUnjoinedThreadsForParent(e.guild_id,e.id),o=i()(t).some((function(e){return p.Z.can(_.Plq.VIEW_CHANNEL,e.channel)})),a=i()(n).some((function(e){return!(e.channel.id in t)&&p.Z.can(_.Plq.VIEW_CHANNEL,e.channel)})),u=i()(r).some((function(e){return p.Z.can(_.Plq.VIEW_CHANNEL,e)}));return{hasActiveThreads:o||a||u,hasMoreActiveThreads:u||a}}))}function A(e){var n=(0,a.e7)([f.Z],(function(){return f.Z.getChannel(null==e?void 0:e.parent_id)})),t=(0,
a.e7)([p.Z],(function(){return null!=n&&p.Z.can(_.Plq.MANAGE_THREADS,n)}),[n]),r=(0,a.e7)([d.default],(function(){return d.default.getId()}));return null!=e&&null!=n&&(!!e.isThread()&&(!!t||!e.isLockedThread()&&e.ownerId===r))}function N(e,n){return null!=e&&n.can(_.Plq.SEND_MESSAGES_IN_THREADS,e)}function S(e,n,t){var r;return!(null==e||!e.isThread())&&((null===(r=e.threadMetadata)||void 0===r?void 0:r.locked)?t:n)}function C(e){var n=(0,a.e7)([p.Z],(function(){return N(e,p.Z)})),t=P(e);return S(e,n,t)}function M(e){var n,t=(0,a.e7)([p.Z],(function(){return null!=e&&p.Z.can(_.Plq.SEND_MESSAGES_IN_THREADS,e)}));return null!=e&&(!e.isThread()||e.isActiveThread()||e.isArchivedThread()&&!0!==(null===(n=e.threadMetadata)||void 0===n?void 0:n.locked)&&t)}function b(e){var n;return null!=e&&(!e.isThread()||e.isActiveThread()||e.isArchivedThread()&&!0!==(null===(n=e.threadMetadata)||void 0===n?void 0:n.locked)&&p.Z.can(_.Plq.SEND_MESSAGES_IN_THREADS,e))}function D(e){
var n=p.Z.can(_.Plq.MANAGE_THREADS,e);return e.isArchivedLockedThread()&&!n}function R(e,n){return null!=e&&n.can(_.Plq.MANAGE_THREADS,e)}function P(e){return(0,a.e7)([p.Z],(function(){return R(e,p.Z)}))}function Z(e){var n=(0,l.Z)(),t=(0,a.e7)([p.Z],(function(){return p.Z.can(_.Plq.CONNECT,e)})),r=M(e),i=E.useExperiment({guildId:e.guild_id},{autoTrackExposure:!1}).enabled;return!n&&e.isVocalThread()&&i&&t&&r}function w(e){var n=P(e);return e.isLockedThread()&&!n}},323483:(e,n,t)=>{t.d(n,{Z:()=>r});function r(e,n){n&&(e=e.trim());return e}}}]);
//# sourceMappingURL=6728db9b4e87870ba9ee.js.map