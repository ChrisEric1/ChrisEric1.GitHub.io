"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[1459],{201459:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(730381),i=n.n(r),o=n(575945),u=n(744564),a=n(52317),l=n(9430),c=n(171940),s=n(131559),f=n(473708);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const y={open:function(e){u.Z.dispatch({type:"NOTIFICATION_SETTINGS_MODAL_OPEN",guildId:e})},close:function(){u.Z.dispatch({type:"NOTIFICATION_SETTINGS_MODAL_CLOSE"})},updateGuildNotificationSettings:function(e,t,n){var r=(0,c.GA)(e);a.Z.saveUserGuildSettings(e,t);u.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_UPDATE",guildId:e,settings:t});(0,c.Wq)(e,t,r,n)},updateGuildAndChannelNotificationSettings:function(e,t,n){var r=Object.keys(t.channel_overrides),i=(0,c.GA)(e),o=(0,c.wK)(e,r);a.Z.saveUserGuildSettings(e,t);u.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_AND_CHANNELS_UPDATE",guildId:e,settings:t});(0,c.Wq)(e,t,i,n)
;Object.keys(t.channel_overrides).forEach((function(r){var i=o.get(r);(0,c.jz)(e,r,t.channel_overrides[r],i,n)}))},updateGuildNotificationSettingsBulk:function(e,t){var n=Object.keys(e),r=(0,c.rU)(n);a.Z.saveUserGuildSettingsBulk(e);Object.entries(e).forEach((function(e){var n=h(e,2),i=n[0],o=n[1],a=r.get(i);u.Z.dispatch({type:"USER_GUILD_SETTINGS_GUILD_UPDATE",guildId:i,settings:o});(0,c.Wq)(i,o,a,t)}))},updateChannelOverrideSettings:function(e,t,n,r){var i=(0,c.I)(e,t),l={channel_overrides:p({},t,n)};a.Z.saveUserGuildSettings(e,l);u.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:e,channelId:t,settings:n});o.uv.announce(f.Z.Messages.A11Y_ANNOUNCEMENT_CHANNEL_SETTINGS_UPDATED);(0,c.jz)(e,t,n,i,r)},updateChannelOverrideSettingsBulk:function(e,t,n){var r=Object.keys(t),i={channel_overrides:t},o=(0,c.wK)(e,r);a.Z.saveUserGuildSettings(e,i);u.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE_BULK",guildId:e,overrides:t});Object.keys(t).forEach((function(r){return(0,
c.jz)(e,r,t[r],o.get(r),n)}))},setForumThreadsCreated:function(e,t){var n=t?s.ic.NEW_FORUM_THREADS_ON:s.ic.NEW_FORUM_THREADS_OFF,r=t?s.ic.NEW_FORUM_THREADS_OFF:s.ic.NEW_FORUM_THREADS_ON,i=l.Z.getChannelFlags(e)&~r|n;this.updateChannelOverrideSettings(e.guild_id,e.id,{flags:i})},handleCheckboxChange:function(e,t,n,r){u.Z.dispatch({type:"GUILD_UPDATE_NOTIFICATION_PROFILE",guildId:r.id,profile:e,updatedSettings:p({},t,n),handleUpdate:this.updateGuildNotificationSettings})},handleSelectChange:function(e,t,n,r){u.Z.dispatch({type:"GUILD_UPDATE_NOTIFICATION_PROFILE",guildId:r.id,profile:e,updatedSettings:p({},t,n),handleUpdate:this.updateGuildNotificationSettings})},handleMuteConfigChange:function(e,t,n){var r={selected_time_window:t,end_time:t>0?i()().add(t,"second").toISOString():null};u.Z.dispatch({type:"GUILD_UPDATE_NOTIFICATION_PROFILE",guildId:n.id,profile:"MUTED",updatedSettings:p({},e,r),handleUpdate:this.updateGuildNotificationSettings})},handleHighlightsChange:function(e,t,n){
u.Z.dispatch({type:"GUILD_UPDATE_NOTIFICATION_PROFILE",guildId:n.id,profile:e,updatedSettings:{notifyHighlights:t},handleUpdate:this.updateGuildNotificationSettings})},handleProfileChange:function(e,t){u.Z.dispatch({type:"GUILD_SET_NOTIFICATION_PROFILE",guildId:t.id,profile:e.value,handleUpdate:this.updateGuildNotificationSettings})}}},52317:(e,t,n)=>{n.d(t,{Z:()=>R});var r=n(496486),i=n.n(r),o=n(281110),u=n(914716),a=n(296602),l=n(968968),c=n(61209),s=n(2590);function f(e,t,n,r,i,o,u){try{var a=e[o](u),l=a.value}catch(e){n(e);return}a.done?t(l):Promise.resolve(l).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){f(o,r,i,u,a,"next",e)}function a(e){f(o,r,i,u,a,"throw",e)}u(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}
function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){h(e,t,n[t])}))}return e}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var E=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){
return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},T={},I=new a.Z("UserGuildSettingsManager"),C=0;function N(){T=_({},l.Z.getCollapsedCategories())}function A(){if(!__OVERLAY__){clearTimeout(C);C=setTimeout((function(){return U()}),15e3)}}
function U(e,t){return G.apply(this,arguments)}function G(){return(G=d((function(e,t){return E(this,(function(n){switch(n.label){case 0:return[4,P(null!=t?h({},null!=e?e:s.ME,t):{})];case 1:n.sent();return[2]}}))}))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=d((function(e){var t,n,r,u,a,f,d;return E(this,(function(p){switch(p.label){case 0:clearTimeout(C);t=0!==Object.keys(e).length;n=l.Z.getCollapsedCategories();r=w();for(var h in r)if(null!=(u=c.Z.getChannel(h))&&null!=u.guild_id){u.guild_id in e||(e[u.guild_id]={});null==e[u.guild_id].channel_overrides&&(e[u.guild_id].channel_overrides={});e[u.guild_id].channel_overrides[u.id]=g(_({},e[u.guild_id].channel_overrides[u.id]),{collapsed:u.id in n});t=!0}if(!t)return[2];T=_({},n);a=i().map(e,(function(e,t){return{guildId:t,updates:e,attempts:0}}));p.label=1;case 1:if(!(a.length>0))return[3,8];if((f=a.shift()).guildId===s.I_8)return[3,1];p.label=2;case 2:p.trys.push([2,5,,7])
;return[4,o.Z.patch({url:s.ANM.USER_GUILD_SETTINGS(f.guildId),body:f.updates})];case 3:p.sent();return[4,m(1e3)];case 4:p.sent();return[3,7];case 5:d=p.sent();I.error(d);f.attempts+=1;f.attempts<3&&a.push(f);return[4,m(5e3)];case 6:p.sent();return[3,7];case 7:return[3,1];case 8:return[2]}}))}))).apply(this,arguments)}function w(){var e={},t=l.Z.getCollapsedCategories();for(var n in t)t[n]!==T[n]&&(e[n]=!0);for(var r in T)t[r]!==T[r]&&(e[r]=!0);return e}function m(e){return new Promise((function(t){return setTimeout(t,e+Math.ceil(e*Math.random()))}))}function D(){T=_({},l.Z.getCollapsedCategories())}const R=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=S(n);function n(){p(this,n);var e;(e=t.apply(this,arguments)).actions={CATEGORY_COLLAPSE:A,CATEGORY_EXPAND:A,
CATEGORY_COLLAPSE_ALL:A,CATEGORY_EXPAND_ALL:A,POST_CONNECTION_OPEN:N,USER_GUILD_SETTINGS_FULL_UPDATE:D};e.saveUserGuildSettings=U;e.saveUserGuildSettingsBulk=P;return e}n.prototype.__getLocalVars=function(){return{lastSavedCollapsedCategories:T,logger:I,syncTimer:C,SYNC_DELAY_MS:15e3}};return n}(u.Z))},968968:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(202351),i=n(744564),o=n(72580),u=n(61209),a=n(837067),l=n(5544),c=n(2590);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function p(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t
}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var g={},v=0;function O(){v+=1}function b(e){if(null==g[e])return!1;delete g[e]}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=_(n);function n(){s(this,n)
;return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){this.waitFor(u.Z,a.Z);this.removeChangeListener(O);this.addChangeListener(O);g=null!=e?e:{}};r.getState=function(){return g};r.isCollapsed=function(e){return!(null==e||"null"===e||!g[e])&&g[e]};r.getCollapsedCategories=function(){return g};r.__getLocalVars=function(){return{collapsedCategories:g,version:v}};!function(e,t,n){t&&f(e.prototype,t);n&&f(e,n)}(n,[{key:"version",get:function(){return v}}]);return n}(r.ZP.PersistedStore);S.displayName="CategoryCollapseStore";S.persistKey="collapsedCategories";const E=new S(i.Z,{CONNECTION_OPEN:function(e){e.userGuildSettings.partial||(g={});var t=!0,n=!1,r=void 0;try{for(var i,o=e.userGuildSettings.entries[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;if(null!=u.channel_overrides){var a=!0,l=!1,c=void 0;try{for(var s,f=u.channel_overrides[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var d=s.value;d.collapsed?g[d.channel_id]=!0:delete g[d.channel_id]}
}catch(e){l=!0;c=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}}}catch(e){n=!0;r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},USER_GUILD_SETTINGS_FULL_UPDATE:function(e){var t=e.userGuildSettings,n=new Set(t.map((function(e){return e.guild_id})).filter(o.lm));for(var r in g){var i=u.Z.getChannel(r);null!=i&&null!=i.guild_id&&n.has(i.guild_id)&&delete g[i.id]}var a=!0,l=!1,c=void 0;try{for(var s,f=t[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var d=s.value,p=!0,h=!1,y=void 0;try{for(var _,v=d.channel_overrides[Symbol.iterator]();!(p=(_=v.next()).done);p=!0){var O=_.value;O.collapsed&&(g[O.channel_id]=!0)}}catch(e){h=!0;y=e}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}}}catch(e){l=!0;c=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}},CATEGORY_COLLAPSE:function(e){var t=e.id;if(g[t])return!1;g[t]=!0},CATEGORY_EXPAND:function(e){return b(e.id)},CATEGORY_COLLAPSE_ALL:function(e){var t=e.guildId
;l.ZP.getChannels(t)[c.d4z.GUILD_CATEGORY].forEach((function(e){var t=e.channel;"null"!==t.id&&(g[t.id]=!0)}))},CATEGORY_EXPAND_ALL:function(e){var t=e.guildId;l.ZP.getChannels(t)[c.d4z.GUILD_CATEGORY].forEach((function(e){var t=e.channel;delete g[t.id]}))},CHANNEL_DELETE:function(e){return b(e.channel.id)}})}}]);
//# sourceMappingURL=e1262256533f7e2f3c76.js.map