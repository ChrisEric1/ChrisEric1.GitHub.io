"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[5201],{58818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.fetchCompanies=t.createCompany=void 0;var n=s(r(18915)),a=s(r(36602)),o=r(19290),u=s(r(16881)),i=r(70348);function s(e){return e&&e.__esModule?e:{default:e}}t.createCompany=function(e,t){return n.default.post({url:i.Endpoints.TEAM_COMPANIES(e),body:{name:t.name},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:u.default.COMPANY_CREATE_SUCCESS,company:e.body});return e.body})).catch(o.APIErrorHandler)};t.fetchCompanies=function(e){return n.default.get({url:i.Endpoints.COMPANIES,query:{name:e.name},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:u.default.COMPANY_QUERY_SUCCESS,companies:e.body});return e.body}))}},94383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,a=_(r(67294)),o=O(r(36211)),u=_(r(30887)),i=_(r(58818)),s=O(r(41908)),l=O(r(92974)),p=O(r(31055)),f=O(r(11383)),d=O(r(81061)),c=O(r(86750)),h=O(r(58350)),v=O(r(69245)),m=O(r(6118)),y=_(r(84455)),g=r(19290),b=r(85677),S=r(55047),M=r(70348),C=r(34596);function O(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function A(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),s=0;s<u;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function P(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return j(e,t)}var I="developers",w="publishers",F=(0,S.callMeMaybe)(i.fetchCompanies),N=function(e){return null!=e?e.map((function(e){return e.name})):[]},k=function(e){return e.trim().toLowerCase()},x=function(e,t){return Object.keys(e).reduce((function(r,n){var a=n.startsWith(I),o=n.startsWith(w);if(a||o){var u=e[n],s=k(u);return""===s?r:r.concat(F(s,{name:u}).then(function(e,t){return function(r){return null==r||0===r.length?i.createCompany(t,{name:e}).then((function(t){F.setResolveValue(k(e),[t]);return t})):r[0]}}(u,t)).then((function(e){return{type:a?I:w,id:e.id}})))}return r}),[])},U=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;j(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=e.call.apply(e,[this].concat(n))||this).formRef=a.createRef();t.developersRef=a.createRef();t.publishersRef=a.createRef();t.state={errorMessage:null,hasUnsavedChanges:!1,isSubmitting:!1,hasSubmitted:!1};t.handleMetadataFormChange=function(){t.state.hasUnsavedChanges||t.setState({hasUnsavedChanges:!0})};t.handleMetadataFormReset=function(){var e=t.formRef.current,r=t.publishersRef.current,n=t.developersRef.current;null!=e&&e.resetForm();null!=r&&r.resetInputFields();null!=n&&n.resetInputFields();t.setState({errorMessage:null,hasSubmitted:!1,hasUnsavedChanges:!1})};t.handleMetadataFormSubmit=function(e){var r=t.props.application;t.setState({isSubmitting:!0},(function(){Promise.all(x(e,r.owner.id)).then((function(e){var t,n=e.reduce((function(e,t){e[t.type].push(t.id);return e}),((t={}).publishers=[],t.developers=[],t))
;return u.updateApplication(r.id,{developer_ids:n.developers,publisher_ids:n.publishers})})).then((function(){t.setState({errorMessage:null,hasSubmitted:!0,hasUnsavedChanges:!1,isSubmitting:!1})})).catch((function(e){var r=(0,g.getMessageFromAPIError)(e,C.Messages.Errors.ERROR_SUBMITTING_FORM.format());t.setState({errorMessage:r,hasSubmitted:!1,isSubmitting:!1})}))}))};return t}var r=t.prototype;r.componentDidMount=function(){for(var e,t=this.props.application,r=t.developers,n=void 0===r?[]:r,a=t.publishers,o=void 0===a?[]:a,u=P(n.concat(o));!(e=u()).done;){var i=e.value;F.setResolveValue(k(i.name),[i])}};r.renderCompanyFields=function(){var e=this.props.application;return(0,b.hasFlag)(e.owner.flags,M.UserFlags.TEAM_PSEUDO_USER)?A(a.Fragment,{},void 0,A(y.GridSection,{},void 0,A(y.GridChild,{columnSpread:12,columnSpreadMedium:8,columnSpreadLarge:6,columnSpreadExtraLarge:6},void 0,A(l.default,{},void 0,C.Messages.Metadata.DEVELOPERS),a.createElement(f.default,{maxCount:5,namePrefix:I,
onChange:this.handleMetadataFormChange,type:C.Messages.Metadata.DEVELOPERS,values:N(e.developers),ref:this.developersRef}))),A(y.GridSection,{},void 0,A(y.GridChild,{columnSpread:12,columnSpreadMedium:8,columnSpreadLarge:6,columnSpreadExtraLarge:6},void 0,A(l.default,{},void 0,C.Messages.Metadata.PUBLISHERS),a.createElement(f.default,{maxCount:5,namePrefix:w,onChange:this.handleMetadataFormChange,type:C.Messages.Metadata.PUBLISHERS,values:N(e.publishers),ref:this.publishersRef})))):null};r.renderFormStatus=function(){var e=this.state,t=e.errorMessage,r=e.hasSubmitted;return null!=t?A(p.default,{type:p.default.Types.ERROR},void 0,t):r?A(p.default,{type:p.default.Types.SUCCESS},void 0,C.Messages.Alerts.SUCCESS_CHANGES_SAVED):null};r.render=function(){var e=this.state,t=e.hasUnsavedChanges,r=e.isSubmitting;return a.createElement(s.default,{onChange:this.handleMetadataFormChange,onSubmit:this.handleMetadataFormSubmit,ref:this.formRef
},A(c.default,{},void 0,A(d.default,{},void 0,C.Messages.Metadata.HEADING),A(h.default,{isFlush:!0},void 0,C.Messages.Metadata.SUBHEADING),this.renderFormStatus()),A(c.default,{isFlush:!0},void 0,A(y.default,{},void 0,this.renderCompanyFields())),A(v.default,{isVisible:t,onReset:this.handleMetadataFormReset,submitting:r}))};return t}(a.Component);U.displayName="Metadata";var D=o.default.connectStores([m.default],(function(e){var t=e.match.params.id;return{application:m.default.getApplication(t)}}))(U);t.default=D},31055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=p(r(67294)),a=s(r(94184)),o=p(r(34704)),u=s(r(49839)),i=["className"];function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t)
;if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function f(){f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return f.apply(this,arguments)}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}var c=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;d(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++){r=o[n];t.indexOf(r)>=0||(a[r]=e[r])}return a}(e,i)
;return n.createElement(o.default,f({},r,{className:(0,a.default)(u.default.formStatusAlert,t)}))};return t}(n.Component);t.default=c;c.displayName="FormStatusAlert";c.Types=o.AlertTypes},11383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=h(r(67294)),o=d(r(94184)),u=r(84721),i=h(r(56117)),s=d(r(9378)),l=d(r(79950)),p=r(34596),f=d(r(46913));function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n)
;return n}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){
for(var i=new Array(u),s=0;s<u;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function g(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;b(e,t)}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var S=function(e){g(t,e);function t(t){var r;(r=e.call(this,t)||this).hasError=function(e){var t=r.props.validator;return null!=t&&!t(e)};r.handleInputBlur=function(e,t){var n=e.currentTarget.value;r.setState({hasError:r.hasError(n)});r.props.onChange(t,n)};r.handleRemoveClick=function(){var e=r.props,t=e.name;(0,e.onRemove)(t)};r.state={hasError:r.hasError(t.value)};return r}t.prototype.render=function(){var e,t=this.state.hasError,r=this.props,n=r.name,a=r.maxLength,i=r.validator,p=r.value,d=null!=i;return y("div",{className:f.default.inputWrapper},void 0,y(l.default,{className:f.default.input,
inputClassName:(0,o.default)((e={},e[f.default.isValid]=d&&p&&!t,e[f.default.hasError]=d&&p&&t,e)),name:n,defaultValue:p,onBlur:this.handleInputBlur,maxLength:a}),y(u.FocusRing,{offset:-1},void 0,y("button",{className:f.default.removeButton,onClick:this.handleRemoveClick,tabIndex:-1,type:"button"},void 0,y(s.default,{className:f.default.removeButtonIcon,name:s.default.Names.CLOSE}))))};return t}(a.PureComponent);S.displayName="Input";var M=function(e){return{inputs:e.values}},C=function(e){var t=e.split("#")[1];return Number(t)},O=function(e){g(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state=M(t.props);t.getButtonText=function(){if(t.state.inputs.length>0)return p.Messages.MultiTextInput.ADD_ANOTHER;var e=t.props.type.substr(0,1).toUpperCase()+t.props.type.substr(1);return p.Messages.MultiTextInput.ADD_ONE.format({name:e})};t.handleAddClick=function(){
var e=t.props.onChange,r=[].concat(v(t.state.inputs),[""]);t.setState({inputs:r});null==e||e(r)};t.handleInputChange=function(e,r){var n=t.props.onChange;if(null!=e){var a=v(t.state.inputs);a[C(e)]=r;t.setState({inputs:a});null==n||n(a)}};t.handleInputRemove=function(e){if(!(t.state.inputs.length<=0)){var r=t.props.onChange,n=v(t.state.inputs);n.splice(C(e),1);t.setState({inputs:n});null==r||r(n)}};t.resetInputFields=function(){t.setState(M(t.props))};return t}var r=t.prototype;r.renderAddAction=function(){var e=this.props.maxCount,t=this.state.inputs;return null!=e&&t.length>=e?null:y(i.default,{height:i.ButtonHeight.MEDIUM,onClick:this.handleAddClick},void 0,this.getButtonText())};r.renderInputFields=function(){var e,t=this,r=this.props,n=r.maxCount,a=r.maxLength,u=r.namePrefix,i=r.type,s=r.validator,l=this.state.inputs;if(0===l.length)return null;var p=l.map((function(e,r){return y(S,{type:i,maxLength:a,name:u+"#"+r,value:e,onChange:t.handleInputChange,onRemove:t.handleInputRemove,
validator:s},e+"-"+r)}));return y("div",{className:(0,o.default)(f.default.inputsWrapper,(e={},e[f.default.inputsWrapperFlush]=null!=n&&l.length>=n,e))},void 0,p)};r.render=function(){return y("div",{},void 0,this.renderInputFields(),this.renderAddAction())};return t}(a.PureComponent);O.displayName="TextboxInputRepeater";O.defaultProps={values:[]};var E=O;t.default=E}}]);
//# sourceMappingURL=c5d7d790392eb3d391a0.js.map