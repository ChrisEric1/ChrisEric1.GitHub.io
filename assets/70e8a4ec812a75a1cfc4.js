"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[5201],{58818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.fetchCompanies=t.createCompany=void 0;var n=s(r(18915)),a=s(r(36602)),o=r(19290),u=s(r(16881)),i=r(70348);function s(e){return e&&e.__esModule?e:{default:e}}t.createCompany=function(e,t){return n.default.post({url:i.Endpoints.TEAM_COMPANIES(e),body:{name:t.name},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:u.default.COMPANY_CREATE_SUCCESS,company:e.body});return e.body})).catch(o.APIErrorHandler)};t.fetchCompanies=function(e){return n.default.get({url:i.Endpoints.COMPANIES,query:{name:e.name},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:u.default.COMPANY_QUERY_SUCCESS,companies:e.body});return e.body}))}},94383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,a=E(r(67294)),o=O(r(36211)),u=E(r(30887)),i=E(r(58818)),s=O(r(6118)),l=E(r(84455)),p=r(19290),d=r(85677),f=r(55047),c=O(r(41908)),h=O(r(92974)),v=O(r(31055)),m=O(r(11383)),y=O(r(81061)),g=O(r(86750)),b=O(r(58350)),S=O(r(69245)),M=r(70348),C=r(34596);function O(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function P(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var o=e&&e.defaultProps,u=arguments.length-3;t||0===u||(t={children:void 0});if(1===u)t.children=a;else if(u>1){for(var i=new Array(u),s=0;s<u;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var I=(0,f.callMeMaybe)(i.fetchCompanies),w=function(e){return null!=e?e.map((function(e){return e.name})):[]},F=function(e){return e.trim().toLowerCase()},N=function(e,t){return Object.keys(e).reduce((function(r,n){var a=n.startsWith("developers"),o=n.startsWith("publishers");if(a||o){var u=e[n],s=F(u);return""===s?r:r.concat(I(s,{name:u}).then(function(e,t){return function(r){return null==r||0===r.length?i.createCompany(t,{name:e}).then((function(t){I.setResolveValue(F(e),[t]);return t})):r[0]}}(u,t)).then((function(e){return{type:a?"developers":"publishers",id:e.id}})))}return r}),[])},k=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;j(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=e.call.apply(e,[this].concat(n))||this).formRef=a.createRef();t.developersRef=a.createRef();t.publishersRef=a.createRef();t.state={errorMessage:null,hasUnsavedChanges:!1,isSubmitting:!1,hasSubmitted:!1};t.handleMetadataFormChange=function(){t.state.hasUnsavedChanges||t.setState({hasUnsavedChanges:!0})};t.handleMetadataFormReset=function(){var e=t.formRef.current,r=t.publishersRef.current,n=t.developersRef.current;null!=e&&e.resetForm();null!=r&&r.resetInputFields();null!=n&&n.resetInputFields();t.setState({errorMessage:null,hasSubmitted:!1,hasUnsavedChanges:!1})};t.handleMetadataFormSubmit=function(e){var r=t.props.application;t.setState({isSubmitting:!0},(function(){Promise.all(N(e,r.owner.id)).then((function(e){var t,n=e.reduce((function(e,t){e[t.type].push(t.id);return e}),((t={}).publishers=[],t.developers=[],t))
;return u.updateApplication(r.id,{developer_ids:n.developers,publisher_ids:n.publishers})})).then((function(){t.setState({errorMessage:null,hasSubmitted:!0,hasUnsavedChanges:!1,isSubmitting:!1})})).catch((function(e){var r=(0,p.getMessageFromAPIError)(e,C.Messages.Errors.ERROR_SUBMITTING_FORM.format());t.setState({errorMessage:r,hasSubmitted:!1,isSubmitting:!1})}))}))};return t}var r=t.prototype;r.componentDidMount=function(){for(var e,t=this.props.application,r=t.developers,n=void 0===r?[]:r,a=t.publishers,o=void 0===a?[]:a,u=R(n.concat(o));!(e=u()).done;){var i=e.value;I.setResolveValue(F(i.name),[i])}};r.renderCompanyFields=function(){var e=this.props.application;return(0,d.hasFlag)(e.owner.flags,M.UserFlags.TEAM_PSEUDO_USER)?P(a.Fragment,{},void 0,P(l.GridSection,{},void 0,P(l.GridChild,{columnSpread:12,columnSpreadMedium:8,columnSpreadLarge:6,columnSpreadExtraLarge:6},void 0,P(h.default,{},void 0,C.Messages.Metadata.DEVELOPERS),a.createElement(m.default,{maxCount:5,
namePrefix:"developers",onChange:this.handleMetadataFormChange,type:C.Messages.Metadata.DEVELOPERS,values:w(e.developers),ref:this.developersRef}))),P(l.GridSection,{},void 0,P(l.GridChild,{columnSpread:12,columnSpreadMedium:8,columnSpreadLarge:6,columnSpreadExtraLarge:6},void 0,P(h.default,{},void 0,C.Messages.Metadata.PUBLISHERS),a.createElement(m.default,{maxCount:5,namePrefix:"publishers",onChange:this.handleMetadataFormChange,type:C.Messages.Metadata.PUBLISHERS,values:w(e.publishers),ref:this.publishersRef})))):null};r.renderFormStatus=function(){var e=this.state,t=e.errorMessage,r=e.hasSubmitted;return null!=t?P(v.default,{type:v.default.Types.ERROR},void 0,t):r?P(v.default,{type:v.default.Types.SUCCESS},void 0,C.Messages.Alerts.SUCCESS_CHANGES_SAVED):null};r.render=function(){var e=this.state,t=e.hasUnsavedChanges,r=e.isSubmitting;return a.createElement(c.default,{onChange:this.handleMetadataFormChange,onSubmit:this.handleMetadataFormSubmit,ref:this.formRef
},P(g.default,{},void 0,P(y.default,{},void 0,C.Messages.Metadata.HEADING),P(b.default,{isFlush:!0},void 0,C.Messages.Metadata.SUBHEADING),this.renderFormStatus()),P(g.default,{isFlush:!0},void 0,P(l.default,{},void 0,this.renderCompanyFields())),P(S.default,{isVisible:t,onReset:this.handleMetadataFormReset,submitting:r}))};return t}(a.Component);k.displayName="Metadata";var x=o.default.connectStores([s.default],(function(e){var t=e.match.params.id;return{application:s.default.getApplication(t)}}))(k);t.default=x},31055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=p(r(67294)),a=s(r(94184)),o=p(r(34704)),u=s(r(88002)),i=["className"];function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t)
;if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var c=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;f(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++){r=o[n];t.indexOf(r)>=0||(a[r]=e[r])}return a}(e,i)
;return n.createElement(o.default,d({},r,{className:(0,a.default)(u.default.formStatusAlert,t)}))};return t}(n.Component);t.default=c;c.displayName="FormStatusAlert";c.Types=o.AlertTypes},11383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=c(r(67294)),o=d(r(94184)),u=c(r(56117)),i=d(r(9378)),s=d(r(79950)),l=r(34596),p=d(r(43596));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}
function h(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;t||0===u||(t={children:void 0});if(1===u)t.children=a;else if(u>1){for(var i=new Array(u),s=0;s<u;s++)i[s]=arguments[s+3];t.children=i}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e})(e,t)}var y=function(e){v(t,e);function t(t){var r;(r=e.call(this,t)||this).hasError=function(e){var t=r.props.validator;return null!=t&&!t(e)};r.handleInputBlur=function(e,t){var n=e.currentTarget.value;r.setState({hasError:r.hasError(n)});r.props.onChange(t,n)};r.handleRemoveClick=function(){var e=r.props,t=e.name;(0,e.onRemove)(t)};r.state={hasError:r.hasError(t.value)};return r}
t.prototype.render=function(){var e,t=this.state.hasError,r=this.props,n=r.name,a=r.maxLength,u=r.validator,l=r.value,d=null!=u;return h("div",{className:p.default.inputWrapper},void 0,h(s.default,{className:p.default.input,inputClassName:(0,o.default)((e={},e[p.default.isValid]=d&&l&&!t,e[p.default.hasError]=d&&l&&t,e)),name:n,defaultValue:l,onBlur:this.handleInputBlur,maxLength:a}),h("button",{className:p.default.removeButton,onClick:this.handleRemoveClick,tabIndex:-1,type:"button"},void 0,h(i.default,{className:p.default.removeButtonIcon,name:i.default.Names.CLOSE})))};return t}(a.PureComponent);y.displayName="Input";var g=function(e){return{inputs:e.values}},b=function(e){var t=e.split("#")[1];return Number(t)},S=function(e){v(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state=g(t.props);t.getButtonText=function(){if(t.state.inputs.length>0)return l.Messages.MultiTextInput.ADD_ANOTHER
;var e=t.props.type.substr(0,1).toUpperCase()+t.props.type.substr(1);return l.Messages.MultiTextInput.ADD_ONE.format({name:e})};t.handleAddClick=function(){var e=t.props.onChange,r=[].concat(t.state.inputs,[""]);t.setState({inputs:r});e&&e(r)};t.handleInputChange=function(e,r){var n=t.props.onChange;if(null!=e){var a=[].concat(t.state.inputs);a[b(e)]=r;t.setState({inputs:a});n&&n(a)}};t.handleInputRemove=function(e){if(!(t.state.inputs.length<=0)){var r=t.props.onChange,n=[].concat(t.state.inputs);n.splice(b(e),1);t.setState({inputs:n});r&&r(n)}};t.resetInputFields=function(){t.setState(g(t.props))};return t}var r=t.prototype;r.renderAddAction=function(){var e=this.props.maxCount,t=this.state.inputs;return null!=e&&t.length>=e?null:h(u.default,{height:u.ButtonHeight.MEDIUM,onClick:this.handleAddClick},void 0,this.getButtonText())};r.renderInputFields=function(){var e,t=this,r=this.props,n=r.maxCount,a=r.maxLength,u=r.namePrefix,i=r.type,s=r.validator,l=this.state.inputs
;if(0===l.length)return null;var d=l.map((function(e,r){return h(y,{type:i,maxLength:a,name:u+"#"+r,value:e,onChange:t.handleInputChange,onRemove:t.handleInputRemove,validator:s},e+"-"+r)}));return h("div",{className:(0,o.default)(p.default.inputsWrapper,(e={},e[p.default.inputsWrapperFlush]=null!=n&&l.length>=n,e))},void 0,d)};r.render=function(){return h("div",{},void 0,this.renderInputFields(),this.renderAddAction())};return t}(a.PureComponent);S.displayName="TextboxInputRepeater";S.defaultProps={values:[]};var M=S;t.default=M}}]);
//# sourceMappingURL=70e8a4ec812a75a1cfc4.js.map