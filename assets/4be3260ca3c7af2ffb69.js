(this.webpackJsonp=this.webpackJsonp||[]).push([[77],{13236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var i,r=(i=n(13237))&&i.__esModule?i:{default:i},a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e;n&&n.set(e,i);return i}(n(13238));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function o(e,t,n,i,r,a,s){try{var o=e[a](s),u=o.value}catch(e){n(e);return}o.done?t(u):Promise.resolve(u).then(i,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){
var a=e.apply(t,n);function s(e){o(a,i,r,s,u,"next",e)}function u(e){o(a,i,r,s,u,"throw",e)}s(void 0)}))}}function c(e,t,n,i,r){return l.apply(this,arguments)}function l(){return(l=u(regeneratorRuntime.mark((function e(t,n,i,s,o){var u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(u=o)){e.next=10;break}e.next=4;return fetch(s);case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Error fetching sticker at "+s);case 7:e.next=9;return c.text();case 9:u=e.sent;case 10:if(null!=u){e.next=12;break}return e.abrupt("return",null);case 12:e.next=14;return(0,a.initialize)();case 14:l=new a.default(u);return e.abrupt("return",new r.default(l,t,n,i));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=new(function(){function e(){this.entries=[];this.referenceCounts=new Map}var t=e.prototype;t.create=function(e,t,n,i,r,a){var s=this;void 0===a&&(a=!0);return this.getCached(e).then((function(o){var u
;s.referenceCounts.set(e,(null!==(u=s.referenceCounts.get(e))&&void 0!==u?u:0)+1);if(o)return o;var l={key:e,promise:c(e,t,n,i,r)};if(a){s.entries.push(l);l.promise.then((function(t){null==t&&s.removeEntry(e);return t})).catch((function(t){return s.removeEntry(e)}));s.entries.length>50&&s.removeEntryAt(0)}return l.promise}))};t.drop=function(e){this.removeEntry(e)};t.getCached=function(e){var t=this,n=this.entries.findIndex((function(t){return t.key===e}));if(n>=0){var i=this.entries[n];this.entries.splice(n,1);this.entries.push(i);return i.promise.then((function(e){null==e&&t.removeEntryAt(n);return e}))}return Promise.resolve(null)};t.removeEntry=function(e){var t=this.entries.findIndex((function(t){return t.key===e}));if(!(t>=0))return null;this.removeEntryAt(t)};t.removeEntryAt=function(e){var t=this.entries[e],n=this.referenceCounts.get(t.key);if(null!=n&&n>1){this.referenceCounts.set(t.key,n-1);return null}this.entries.splice(e,1);this.referenceCounts.delete(t.key)
;t.promise.then((function(e){return null==e?void 0:e.drop()}));return t};return e}());t.default=h},13237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var i=function(){function e(e,t,n,i){var r=function(e,t,n){var i=Math.sqrt(n),r=Math.ceil(i);return[r,r*e,r*t]}(n,i,e.frames),a=r[0],s=r[1],o=r[2];this.key=t;this.canvas=function(e,t){if("function"==typeof OffscreenCanvas)return new OffscreenCanvas(e,t);var n=document.createElement("canvas");n.width=e;n.height=t;return n}(s,o);this.context=this.canvas.getContext("2d");this.cells=a;this.native=e;this.renderedFrames=new Set;this.frameWidth=n;this.frameHeight=i;this.frameRate=e.fps;this.frameCount=e.frames;if(null==this.context)throw new Error("couldn't create 2d canvas context.")}var t=e.prototype;t.drawInto=function(e,t,n,i){t%=this.frameCount;this.requireFrame(t);var a=r(t,this.frameWidth,this.frameHeight,this.cells),s=a[0],o=a[1],u=a[2],c=a[3];e.drawImage(this.canvas,s,o,u,c,0,0,n,i)}
;t.drop=function(){var e;null===(e=this.native)||void 0===e||e.drop();this.native=null};t.requireFrame=function(e){if(null!=this.native){if(!this.renderedFrames.has(e)){this.paint(e);this.renderedFrames.add(e)}this.renderedFrames.size===this.frameCount&&this.drop()}};t.paint=function(e){if(null!=this.native){var t,n=this.native.get_bgra(e,this.frameWidth,this.frameHeight),i=new ImageData(n,this.frameWidth,this.frameHeight),a=r(e,this.frameWidth,this.frameHeight,this.cells),s=a[0],o=a[1],u=a[2],c=a[3];null===(t=this.context)||void 0===t||t.putImageData(i,s,o,0,0,u,c)}};return e}();t.default=i;function r(e,t,n,i){return[Math.floor(e/i)*t,e%i*n,t,n]}},13238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.initialize=void 0;var i,r=(i=n(26))&&i.__esModule?i:{default:i},a=n(6663);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(e,i.key,i)}}
function o(e,t,n,i,r,a,s){try{var o=e[a](s),u=o.value}catch(e){n(e);return}o.done?t(u):Promise.resolve(u).then(i,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,u,"next",e)}function u(e){o(a,i,r,s,u,"throw",e)}s(void 0)}))}}var c,l,h,f,d,m,v,p,y,w=(0,a.createQueuedAsyncInitializer)(u(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return n.e(78).then(n.t.bind(null,13258,7));case 2:t=e.sent;e.next=5;return t.default();case 5:i=e.sent;h=i.cwrap("lottie_create","number",["string"]);f=i._lottie_destroy;d=i._lottie_draw_into_bgra;m=i._lottie_draw_into_rgba;v=i._lottie_frame_count;p=i._lottie_frame_rate;y=i._memory_create;c=i;l=y(409600);case 15:case"end":return e.stop()}}),e)}))));t.initialize=w;function g(e,t){return new Uint8ClampedArray(c.HEAPU8.buffer,l,e*t*4)}var b=function(){function e(e){this.native=h(e)
;if(0===this.native)throw new Error("couldn't create wasm lottie. potentially bad json.")}var t=e.prototype;t.get_bgra=function(e,t,n){(0,r.default)(t<=320,"width exceeds static allocation.");(0,r.default)(n<=320,"height exceeds static allocation.");d(this.native,l,e,t,n);return g(t,n)};t.get_rgba=function(e,t,n){(0,r.default)(t<=320,"width exceeds static allocation.");(0,r.default)(n<=320,"height exceeds static allocation.");m(this.native,l,e,t,n);return g(t,n)};t.drop=function(){f(this.native)};!function(e,t,n){t&&s(e.prototype,t);n&&s(e,n)}(e,[{key:"fps",get:function(){return p(this.native)}},{key:"frames",get:function(){return v(this.native)}}]);return e}();t.default=b},8758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var i=a(n(26)),r=a(n(13236));function a(e){return e&&e.__esModule?e:{default:e}}var s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o=function(){function e(e){
var t=this,n=e.canvas,a=e.id,o=e.assetUrl,u=e.assetData,c=e.isVisible,l=e.shouldAnimate,h=e.onInitialDraw,f=e.onError;this.animation=null;this.onInitialAnimationTick=function(e){t.requestAnimationFrameId=null;if((performance.now()-e<30||s)&&t.draw(0)){var n;t.resumeAnimation();null===(n=t.onInitialDraw)||void 0===n||n.call(t);t.hasInitialFrame=!0}t.scheduleOrCancelTick()};this.onAnimationTick=function(e){t.requestAnimationFrameId=null;var n=performance.now(),i=(s?n:e)-t.currentFrameTime,r=Math.floor(i/t.frameDuration);if(r>0){if(n-e<12||s){t.draw(t.currentFrame);t.currentFrame+=r}t.currentFrameTime+=r*t.frameDuration}t.scheduleOrCancelTick()};var d=n.getContext("2d");(0,i.default)(null!=d,"couldn't get canvas 2d context.");this.canvas=n;this.canvasContext=d;this.animation=null;this.dropped=!1;this.currentFrame=0;this.currentFrameTime=0;this.frameDuration=1e3;this.animate=l;this.visible=c;this.requestAnimationFrameId=null;this.hasInitialFrame=!1;this.onInitialDraw=h;this.onError=f
;this.key=a+":"+n.width+":"+n.height;r.default.create(this.key,n.width,n.height,o,u).then((function(e){if(null!=e)if(t.dropped)r.default.drop(t.key);else{t.animation=e;t.frameDuration=1e3/e.frameRate;t.scheduleOrCancelTick()}})).catch((function(e){null==f||f()}))}var t=e.prototype;t.setState=function(e,t){if(null!=t){e||t===this.currentFrame||this.draw(t);this.currentFrame=t}e&&!this.animate&&this.resumeAnimation();this.animate=e;this.scheduleOrCancelTick()};t.setVisibility=function(e){var t=this.visible;this.visible=e;this.visible&&!t&&this.resumeAnimation();this.scheduleOrCancelTick()};t.resumeAnimation=function(){this.currentFrameTime=performance.now()};t.clear=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)};t.draw=function(e){if(null!=this.animation){this.clear();this.animation.drawInto(this.canvasContext,e,this.canvas.width,this.canvas.height);return!0}return!1};t.drop=function(){this.animate=!1;this.scheduleOrCancelTick()
;r.default.drop(this.key);this.animation=null;this.dropped=!0};t.scheduleOrCancelTick=function(){this.dropped||(this.hasInitialFrame?this.requestAnimationFrame(this.animate&&this.visible?this.onAnimationTick:null):this.requestAnimationFrame(this.onInitialAnimationTick))};t.requestAnimationFrame=function(e){function t(t){return e.apply(this,arguments)}t.toString=function(){return e.toString()};return t}((function(e){null!=e&&null==this.requestAnimationFrameId&&(this.requestAnimationFrameId=requestAnimationFrame(e));if(null!=e&&null!=this.requestAnimationFrameId){cancelAnimationFrame(this.requestAnimationFrameId);this.requestAnimationFrameId=requestAnimationFrame(e)}if(null==e&&null!=this.requestAnimationFrameId){cancelAnimationFrame(this.requestAnimationFrameId);this.requestAnimationFrameId=null}}));return e}();t.default=o}}]);
//# sourceMappingURL=4be3260ca3c7af2ffb69.js.map