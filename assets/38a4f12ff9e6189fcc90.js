"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[40946],{640946:(e,n,t)=>{t.r(n);t.d(n,{default:()=>x});var r=t(785893),o=t(667294),l=t(363010),i=t(281081),u=t(354290),a=t(769672),c=t(280671),s=t(784238),f=t(897576),d=t(692976),b=t(730381),p=t.n(b),O=t(688417),g=t(592079),y=t(553494),h=t(390504),m=t(959797),j=(0,y.B)({kind:"user",id:"2022-02_guild_folder_mute",label:"Guild Folder Mute",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var E=t(461061);function v(e,n,t,r,o,l,i){try{var u=e[l](i),a=u.value}catch(e){t(e);return}u.done?n(a):Promise.resolve(a).then(r,o)}function _(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var l=e.apply(n,t);function i(e){v(l,r,o,i,u,"next",e)}function u(e){v(l,r,o,i,u,"throw",e)}i(void 0)}))}}function S(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function w(e,n){n=null!=n?n:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}var k=function(e,n){var t,r,o,l,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(l){return function(u){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;(r=0,o)&&(l=[2&l[0],o.value]);switch(l[0]){case 0:case 1:o=l;break;case 4:i.label++;return{value:l[1],done:!1
};case 5:i.label++;r=l[1];l=[0];continue;case 7:l=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1];o=l;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(l);break}o[2]&&i.ops.pop();i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e];r=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};function x(e){var n,b,y,v,x,Z,L,P=e.folderId,R=e.folderName,D=e.folderColor,N=e.unread,I=e.onSelect,M=(0,l.e7)([s.Z],(function(){return s.Z.getGuildFolderById(P)}),[P]),A=(b=null!==(n=null==M?void 0:M.guildIds)&&void 0!==n?n:[],v=j.useExperiment({}).enabled,x=(0,l.cj)([h.Z],(function(){return Object.fromEntries(b.map((function(e){return[e,h.Z.isMuted(e)]})))}),[b]),Z=o.useCallback((function(e){var n=Object.fromEntries(b.filter((function(e){return!x[e]})).map((function(n){return[n,{muted:!0,
mute_config:null!=e?{selected_time_window:e,end_time:e>0?p()().add(e,"second").toISOString():null}:void 0}]})));O.Z.updateGuildNotificationSettingsBulk(n,y)}),[b,y,x]),L=o.useCallback((function(){O.Z.updateGuildNotificationSettingsBulk(Object.fromEntries(b.filter((function(e){return x[e]})).map((function(e){return[e,{muted:!1}]}))),y)}),[b,y,x]),v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.sN,{id:"mute-folder",label:m.Z.Messages.SERVER_FOLDER_MUTE_ALL,action:function(){return Z()},children:(0,g.k)().map((function(e){var n=e.value,t=e.label;return(0,r.jsx)(a.sN,{id:"".concat(n),label:t,action:function(){return Z(n)}},n)}))}),(0,r.jsx)(a.sN,{id:"unmute-folder",label:m.Z.Messages.SERVER_FOLDER_UNMUTE_ALL,action:L})]}):null),C=(0,l.e7)([c.Z],(function(){return c.Z.getExpandedFolders().size>0}));return(0,r.jsxs)(a.ZP,{navId:"guild-context","aria-label":m.Z.Messages.GUILD_ACTIONS_MENU_LABEL,onClose:i.Zy,onSelect:I,children:[(0,r.jsx)(a.kS,{children:(0,r.jsx)(a.sN,{id:"mark-folder-read",
label:m.Z.Messages.SERVER_FOLDER_MARK_AS_READ,action:function(){if(null!=M){var e=M.guildIds;(0,d.Z)(e,E.jXE.GUILD_LIST)}},disabled:!N})}),null!=A?(0,r.jsx)(a.kS,{children:A}):null,(0,r.jsxs)(a.kS,{children:[(0,r.jsx)(a.sN,{id:"folder-settings",label:m.Z.Messages.SERVER_FOLDER_SETTINGS,action:function(){return(0,f.ZD)(_((function(){var e,n;return k(this,(function(o){switch(o.label){case 0:return[4,Promise.all([t.e(40532),t.e(36056)]).then(t.bind(t,136056))];case 1:e=o.sent(),n=e.default;return[2,function(e){return(0,r.jsx)(n,w(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){S(e,n,t[n])}))}return e}({},e),{folderId:P,folderName:R,folderColor:D}))}]}}))})))}}),C&&(0,r.jsx)(a.sN,{id:"folder-collapse",
label:m.Z.Messages.SERVER_FOLDER_COLLAPSE_ALL,action:function(){return u.Z.collapseAllFolders()}})]})]})}}}]);
//# sourceMappingURL=38a4f12ff9e6189fcc90.js.map