(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[84457],{148267:(e,t,n)=>{e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},182765:(e,t,n)=>{e.exports=n.p+"092b071c3b3141a58787415450c27857.png"},359074:(e,t,n)=>{e.exports=n.p+"375217725f8ad1df6310e6738a7306e4.svg"},396679:(e,t,n)=>{e.exports=n.p+"a5844a7e2342caa1029833d27d976e99.svg"},661807:(e,t,n)=>{e.exports=n.p+"71911dd31666b4c410a9c8cd8af361bc.svg"},149374:(e,t,n)=>{e.exports=n.p+"b4c362308f7e586b97c5155337ad2ea5.svg"},841860:(e,t,n)=>{e.exports=n.p+"9ea38b117bb11b03761dc3351f048bfa.svg"},123555:(e,t,n)=>{e.exports=n.p+"5a1a231bd56982c69c29ccc058d4b627.svg"},614040:(e,t,n)=>{e.exports=n.p+"0d893da2d50673a2eed63138225eb111.svg"},525106:(e,t,n)=>{e.exports=n.p+"771880976d58ad9ca6aee94bb06089b4.png"},100553:(e,t,n)=>{e.exports=n.p+"1e020fbfcf47d6368053524411553d1f.svg"},568534:(e,t,n)=>{e.exports=n.p+"80f97fbf531019c97bcc2661b8d41036.svg"},106952:(e,t,n)=>{e.exports=n.p+"3020e9aa04f0b2277dc30309e18ef310.svg"
},952587:(e,t,n)=>{e.exports=n.p+"987cc6d375f9396c95619acafe8fcfd5.svg"},480281:(e,t,n)=>{"use strict";n.d(t,{cK:()=>_,c2:()=>A,ZP:()=>T});var r=n(785893),s=n(667294),a=n(101653),o=n(841303),i=n.n(o);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function h(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(s[n]=e[n])}return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}}return s}function p(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var _,m,g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var s=u(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return p(this,n)}}!function(e){e.SIZE_40="SIZE_40";e.SIZE_60="SIZE_60"}(_||(_={}));var S=Object.freeze((c(m={},_.SIZE_40,"size-40"),c(m,_.SIZE_60,"size-60"),m)),I=n(182765),O=function(e){f(n,e);var t=N(n);function n(){l(this,n);return t.apply(this,arguments)}n.prototype.render=function(){var e=this.props,t=e.className,n=e.text,s=h(e,["className","text"]);return(0,r.jsx)("div",{style:{padding:8,borderRadius:4,width:s.size,height:s.size,backgroundColor:s.bgColor},className:t,children:(0,r.jsx)(a.Z,d({value:n,level:"M"},s))})};return n}(s.PureComponent);O.defaultProps={size:128,bgColor:"#ffffff",fgColor:"#000000"};var A=function(e){f(n,e);var t=N(n);function n(){l(this,n);return t.apply(this,arguments)}
n.prototype.render=function(){var e=this.props.overlaySize,t=S[null!=e?e:_.SIZE_40];return(0,r.jsxs)("div",{className:i().qrCodeContainer,children:[(0,r.jsx)(O,d({},this.props)),(0,r.jsx)("div",{className:i().qrCodeOverlay,children:(0,r.jsx)("img",{className:i()[t],src:I,alt:""})})]})};return n}(s.PureComponent);A.defaultProps={size:144,bgColor:"#ffffff",fgColor:"#000000"};const T=O},250287:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(785893),s=(n(667294),n(701614)),a=n(528180),o=n(558820),i=n(520453),l=n(473708),c=n(913957),u=n.n(c),f=n(518280),d=n.n(f);const h=function(e){var t=e.title,c=e.onVerify,f=e.authBoxClassName,h=e.captchaService,p=void 0===h?s.hP.RECAPTCHA:h,E=e.sitekey;return(0,r.jsxs)(o.ZP,{className:f,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:d().marginBottom20}),null!=t?(0,r.jsx)(o.Dx,{className:d().marginBottom8,children:t}):null,(0,r.jsx)(o.DK,{className:d().marginBottom40,children:l.Z.Messages.BEEP_BOOP}),(0,r.jsx)("div",{className:u().flexCenter,
children:(0,r.jsx)(a.Z,{onVerify:c,theme:i.BR.DARK,captchaService:p,sitekey:E})})]})}},178232:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(785893),s=n(667294),a=n(294184),o=n.n(a),i=n(202351),l=n(945460),c=n(770050),u=n(959207),f=n(473903),d=n(551778),h=n(746974),p=n(641277),E=n(558820),_=n(530562),m=n(203600),g=n(473708),N=n(581641),S=n.n(N),I=n(913957),O=n.n(I),A=n(518280),T=n.n(A);const y=i.ZP.connectStores([h.Z,u.Z,d.Z,f.default],(function(e){var t=e.giftCode,n=h.Z.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?(0,_.oE)(r):null,application:u.Z.getGame(n.applicationId),gifter:f.default.getUser(t.userId)}}))((function(e){var t=e.error,n=e.giftCode,a=e.gifter,i=e.sku,u=e.application,f=e.subscriptionPlan,d=null==a?g.Z.Messages.GIFT_CODE_AUTH_GIFTED:g.Z.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:a.username}),h=i.name
;null!=f&&(h=(f.interval===m.rV.MONTH?g.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:g.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:i.name,intervalCount:f.intervalCount}));return(0,r.jsxs)(s.Fragment,{children:[null!=n.giftStyle?(0,r.jsx)(c.Z,{giftStyle:n.giftStyle,className:S().seasonalIcon}):(0,r.jsx)(E.qE,{src:null!=a?a.getAvatarURL(void 0,100):null,size:l.AvatarSizes.DEPRECATED_SIZE_100,className:T().marginBottom20}),null!=t?(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(E.DK,{children:g.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(E.Dx,{children:t})]}):(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(E.DK,{children:d}),(0,r.jsxs)(E.Dx,{className:o()(T().marginTop8,O().flexCenter),children:[(0,r.jsx)(p.Z,{size:p.Z.Sizes.MEDIUM,className:S().applicationIcon,game:u,skuId:i.id}),h]})]})]})}))},812280:(e,t,n)=>{"use strict";n.d(t,{q3:()=>Rt,_i:()=>xt,ZP:()=>jt})
;var r=n(785893),s=n(667294),a=n(970112),o=n(294184),i=n.n(o),l=n(517563),c=n(289283),u=n(202351),f=n(945460),d=n(744564),h=n(84441),p=n(561177),E=n(110108),_=n(153081),m=n(94340),g=n(281437),N=n(97245),S=n(281110),I=n(630631),O=n(20978),A=n(736818),T=n(652591),y=n(468811),C=n.n(y),v=n(2590);function b(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){b(a,r,s,o,i,"next",e)}function i(e){b(a,r,s,o,i,"throw",e)}o(void 0)}))}}var M=function(e,t){var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,
r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;(r=0,s)&&(a=[2&a[0],s.value]);switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}s[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function R(){return(R=L((function(e){var t,n,r;return M(this,(function(s){switch(s.label){case 0:return[4,S.Z.post({url:v.ANM.HANDOFF,body:{key:e},oldFormErrors:!0,retries:1})];case 1:t=s.sent(),n=t.body;if(null!=(r=n.handoff_token))return[2,r];throw new Error("Missing handoff token!")}}))
}))).apply(this,arguments)}const x={generateNonce:function(){return C().v4()},createHandoffToken:function(e){return R.apply(this,arguments)}};var D=n(262329),j=n.n(D);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w,k="mweb_handoff_nonce",U="mweb_handoff_nonce_expiration";!function(e){e.NONCE_MISSING="nonce_missing";e.NONCE_EXPIRED="nonce_expired";e.NULL_HANDOFF_TOKEN="deep_link_failed";e.HANDOFF_EXCHANGE="handoff_exchange"}(w||(w={}));var G=new Set([w.NONCE_MISSING,w.NONCE_EXPIRED,w.HANDOFF_EXCHANGE]),F=new Set([w.NULL_HANDOFF_TOKEN]),B=function(){I.Z.remove(k);I.Z.remove(U)};const H=function(){var e=(0,u.e7)([A.default],(function(){return A.default.getFingerprint()})),t=(0,l.parse)(window.location.search),n=t.fingerprint,a=t.handoff_token,o=Array.isArray(n)?n.length>1?n[0]:null:n,i=null!=o?o:null!==e?e:void 0;s.useEffect((function(){null!==o&&e!==o&&d.Z.dispatch({type:"FINGERPRINT",fingerprint:o})}),[o,e]);var c=P(s.useState(null),2),p=c[0],E=c[1],_=s.useCallback((function(e){E(e)
;T.default.track(v.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:e,fingerprint:(0,N.K)(i)},{fingerprint:i})}),[E,i]),m=I.Z.get(k);"null"===a&&null===p&&_(w.NULL_HANDOFF_TOKEN);null!=a&&"null"!==a&&null==m&&null===p&&_(w.NONCE_MISSING);s.useEffect((function(){if(null!=m){var e=I.Z.get(U);if(null==e||Date.now()>=e){_(w.NONCE_EXPIRED);B()}}}),[m,_]);s.useEffect((function(){if(null!=a&&"null"!==a&&null!=m){if(null!=p)return;S.Z.post({url:v.ANM.HANDOFF_EXCHANGE,body:{key:m,handoff_token:a}}).then((function(e){return h.Z.loginToken(e.body.token,!1)})).then((function(){T.default.track(v.rMx.LOGIN_SUCCESSFUL,{source:v.uRl.MOBILE_WEB_HANDOFF,is_new_user:!1,fingerprint:(0,N.K)(i)});var e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("handoff_token");t.delete("fingerprint");e.search=t.toString();window.history.pushState(null,"",e)})).catch((function(){_(w.HANDOFF_EXCHANGE)})).finally((function(){B()}))}}),[a,m,p,i,_]);if(null==i)return null;var g=null==p?(0,r.jsxs)(r.Fragment,{
children:[O.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_1,(0,r.jsx)("br",{}),O.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_2]}):F.has(p)?O.MOBILE_WEB_HANDOFF_ERROR_NO_TRY_AGAIN:G.has(p)?O.MOBILE_WEB_HANDOFF_ERROR_TRY_AGAIN:void 0;return null!=p&&F.has(p)?(0,r.jsx)("div",{className:j().errorContainer,children:(0,r.jsx)(f.Text,{color:"interactive-normal",variant:"text-sm/semibold",children:g})}):(0,r.jsxs)("div",{className:j().container,children:[(0,r.jsx)(f.Text,{variant:"text-sm/semibold",children:g}),(0,r.jsx)(f.Button,{look:f.Button.Looks.INVERTED,color:f.Button.Colors.BRAND_NEW,onClick:function(){var e=x.generateNonce();I.Z.set(k,e);I.Z.set(U,Date.now()+6e4);var t=new URL(v.x0X),n=new URLSearchParams(window.location.search);n.delete("fingerprint");n.delete("handoff_token");var r=new URLSearchParams;r.set("redirect",encodeURIComponent(window.location.pathname+n.toString()));r.set("key",e);r.set("fingerprint",i);t.search=r.toString();T.default.track(v.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,
N.K)(i),source:"mobile_web_handoff",destination:v.x0X},{fingerprint:i,flush:!0});window.location.href=t.toString()},children:(0,r.jsx)(f.Text,{className:j().buttonText,variant:"text-sm/semibold",children:O.MOBILE_WEB_HANDOFF_BUTTON_TEXT})})]})};var W=n(873553),K=n(999357),z=n(674748),V=n(558820),Q=n(349979),Y=n(473708),q=n(657513),X=n.n(q);function $(e){var t=e.onDismiss;(0,z.Z)({type:K.nv.MODAL,name:K.zs.MULTI_ACCOUNT_SWITCH_LANDING});return(0,r.jsxs)(V.ZP,{className:X().chooseAccountAuthBox,children:[(0,r.jsx)(V.Dx,{children:Y.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT}),(0,r.jsx)(f.Text,{className:X().chooseAccountHelpText,variant:"text-md/normal",color:"header-secondary",children:Y.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT_HELPER}),(0,r.jsx)(Q.Z,{actionText:Y.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN,onAction:function(e){e===Q.W.LOGIN_REQUIRED&&t()}}),(0,r.jsx)("div",{className:X().actions,children:(0,r.jsx)(f.Button,{className:X().chooseAccountButton,look:f.Button.Looks.LINK,
color:f.Button.Colors.PRIMARY,onClick:t,size:f.Button.Sizes.MEDIUM,children:(0,r.jsx)(f.Text,{variant:"text-sm/normal",children:Y.Z.Messages.SWITCH_ACCOUNTS_ADD_AN_ACCOUNT_BUTTON})})})]})}var J=n(426797),ee=n(560837),te=n(78501),ne=n(686874),re=n(705429),se=n(536038),ae=n(107364),oe=n(249697),ie=n(565050),le=n(930948),ce=n(120415),ue=n(250287),fe=n(178232),de=n(308739),he=n(575494),pe=n(480281),Ee=n(385028);function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(){return"undefined"==typeof document||"visible"===document.visibilityState}var Ne=n(571690),Se=n(296602),Ie=n(441143),Oe=n.n(Ie),Ae=n(722406);function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){ye(a,r,s,o,i,"next",e)}function i(e){ye(a,r,s,o,i,"throw",e)}o(void 0)}))}}
function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){
if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}var Me=function(e,t){var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;(r=0,s)&&(a=[2&a[0],s.value]);switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){
o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}s[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function Re(e){return xe.apply(this,arguments)}function xe(){return(xe=Ce((function(e){var t,n;return Me(this,(function(r){switch(r.label){case 0:Oe()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:n=r.sent();return[2,btoa((t=String).fromCharCode.apply(t,be(new Uint8Array(n))))]}}))}))).apply(this,arguments)}function De(e){return je.apply(this,arguments)}function je(){return(je=Ce((function(e){return Me(this,(function(t){switch(t.label){case 0:Oe()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return[2,we(t.sent())]}}))
}))).apply(this,arguments)}function Ze(e){var t;return btoa((t=String).fromCharCode.apply(t,be(new Uint8Array(e)))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,"")}function Pe(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function we(e){return ke.apply(this,arguments)}function ke(){return(ke=Ce((function(e){return Me(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.digest({name:"SHA-256"},e)];case 1:return[2,Ze(t.sent())]}}))}))).apply(this,arguments)}function Ue(e,t){Oe()(null!=e.privateKey,"private key cannot be null");return window.crypto.subtle.decrypt({name:"RSA-OAEP",hash:"SHA-256"},e.privateKey,t)}function Ge(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=Ce((function(e,t){var n,r;return Me(this,(function(s){switch(s.label){case 0:n=new TextDecoder;return[4,Ue(e,Pe(t))];case 1:r=s.sent();return[2,n.decode(r)]}}))}))).apply(this,arguments)}function Be(e,t){return He.apply(this,arguments)}function He(){
return(He=Ce((function(e,t){return Me(this,(function(n){switch(n.label){case 0:return[4,Ue(e,Pe(t))];case 1:return[2,Ze(n.sent())]}}))}))).apply(this,arguments)}function We(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=Ce((function(e,t){var n,r,s,a,o,i,l;return Me(this,(function(c){switch(c.label){case 0:return[4,Ge(e,t)];case 1:t=c.sent();n=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/;if(null==(r=t.match(n)))throw new Error("Invalid encoded user record.");s=ve(r,5),a=s[1],o=s[2],i=s[3],l=s[4];return[2,new Ae.Z({id:a,discriminator:o,avatar:"0"===i?null:i,username:l})]}}))}))).apply(this,arguments)}var ze=n(749565),Ve=n(520453),Qe=n(854257),Ye=n.n(Qe),qe=n(518280),Xe=n.n(qe);function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function et(e){return function(){var t=this,n=arguments
;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){Je(a,r,s,o,i,"next",e)}function i(e){Je(a,r,s,o,i,"throw",e)}o(void 0)}))}}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nt,rt,st=function(e,t){var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;(r=0,s)&&(a=[2&a[0],s.value]);switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}
if(6===a[0]&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}s[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};!function(e){e[e.INITIALIZING=0]="INITIALIZING";e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT";e[e.PENDING_FINISH=2]="PENDING_FINISH";e[e.PENDING_TICKET=3]="PENDING_TICKET";e[e.PENDING_LOGIN=4]="PENDING_LOGIN";e[e.FINISH=5]="FINISH"}(nt||(nt={}));!function(e){e[e.QR_CODE=0]="QR_CODE";e[e.CONFIRM=1]="CONFIRM"}(rt||(rt={}));var at=n(182765),ot=new Se.Z("LoginQRSocket");function it(e){var t=tt(s.useState(0),2),n=t[0],r=t[1],a=tt(s.useState(!1),2),o=a[0],i=a[1],l=tt(s.useState({step:nt.INITIALIZING}),2),c=l[0],u=l[1],f=tt(s.useState(null),2),d=f[0],h=f[1],p=function(){var e=me((0,s.useState)(ge()),2),t=e[0],n=e[1];(0,s.useEffect)((function(){var e=function(){n(ge())};window.addEventListener("visibilitychange",e)
;return function(){window.removeEventListener("visibilitychange",e)}}),[n]);return t}(),E=s.useMemo((function(){return new he.Z(1500,3e4)}),[]),_=s.useRef();_.current=s.useCallback((function(){u({step:nt.INITIALIZING});if(p)r((function(e){return e+1}));else{ot.info("document is not visible, will defer reconnection when document becomes visible.");i(!0)}}),[p]);var m=s.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(_)()}),[_]),g=s.useCallback((function(){ot.error("Could not complete QR code login, trying to restart with a new QR code.");u({step:nt.INITIALIZING});E.pending||E.fail(m)}),[m,E]);s.useEffect((function(){if(p&&o&&c.step===nt.INITIALIZING){ot.info("reconnecting, now that document is visible");i(!1);r((function(e){return e+1}))}}),[c,p,o,i]);s.useEffect((function(){var t=function(){if(null!=i)return i;throw new Error("No key pair set")
},n=Date.now(),r="wss:".concat(window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT,"/?v=2"),s=new WebSocket(r);ot.info("[0ms] connecting to ".concat(r));var a,o=function(e){return ot.info("[".concat("".concat(Date.now()-n,"ms"),"] ").concat(e))},i=null,l=null,c=null,f=null,d=!0,p=function(){if(d){d=!1;s.send(JSON.stringify({op:"heartbeat"}))}else{o("heartbeat timeout, reconnecting.");s.close();g()}};s.onmessage=(a=et((function(n){var r,a,i,l,h,_,N,S,I,O,A,T,y;return st(this,(function(C){switch(C.label){case 0:r=n.data;switch((a=JSON.parse(r)).op){case"nonce_proof":return[3,1];case"pending_remote_init":return[3,3];case"pending_login":return[3,5];case"pending_ticket":return[3,6];case"pending_finish":return[3,8];case"finish":return[3,10];case"cancel":return[3,12];case"hello":return[3,13];case"heartbeat_ack":return[3,14]}return[3,15];case 1:i=a.encrypted_nonce;return[4,Be(t(),i)];case 2:l=C.sent();o("computed nonce proof");s.send(JSON.stringify({op:"nonce_proof",nonce:l}));return[2];case 3:E.succeed()
;le.S.dispatch(v.CkL.WAVE_EMPHASIZE);return[4,De(t())];case 4:if((h=C.sent())!==a.fingerprint)throw new Error("bad fingerprint ".concat(h," !== ").concat(a.fingerprint));o("handshake complete awaiting remote auth.");u({step:nt.PENDING_REMOTE_INIT,fingerprint:h});return[2];case 5:null==(_=a.ticket)&&g();u({step:nt.PENDING_LOGIN,ticket:_});return[2];case 6:le.S.dispatch(v.CkL.WAVE_EMPHASIZE);o("remote auth handshake started, awaiting ticket/cancel.");N=a.encrypted_user_payload;return[4,We(t(),N)];case 7:S=C.sent();u({step:nt.PENDING_TICKET,user:S});return[2];case 8:le.S.dispatch(v.CkL.WAVE_EMPHASIZE);o("remote auth handshake started, awaiting finish/cancel.");I=a.encrypted_user_payload;return[4,We(t(),I)];case 9:O=C.sent();u({step:nt.PENDING_FINISH,user:O});return[2];case 10:le.S.dispatch(v.CkL.WAVE_EMPHASIZE);o("remote auth handshake finished.");A=a.encrypted_token;u({step:nt.FINISH});return[4,Ge(t(),A)];case 11:T=C.sent();e(T);return[2];case 12:o("remote auth handshake cancelled.");m()
;return[2];case 13:o("got hello, auth timeout=".concat(a.timeout_ms,"ms"));y=a.heartbeat_interval;f=setTimeout((function(){f=null;p();c=setInterval(p,y)}),Math.floor(y*Math.random()));return[2];case 14:d=!0;C.label=15;case 15:return[2]}}))})),function(e){return a.apply(this,arguments)});s.onopen=et((function(){var e;return st(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])];case 1:return[4,Re(i=t.sent())];case 2:l=t.sent();return[4,De(i)];case 3:e=t.sent();o("connected, handshaking with fingerprint: ".concat(e));s.send(JSON.stringify({op:"init",encoded_public_key:l}));h(i);return[2]}}))}));s.onclose=function(e){o("disconnected, code: ".concat(e.code," ").concat(e.reason));g()};s.onerror=function(e){o("disconnected, error: ".concat(JSON.stringify(e)));g()};return function(){o("cleaning up");s.onopen=function(){return null};s.onmessage=function(){
return null};s.onclose=function(){return null};s.onerror=function(){return null};s.close(1e3);E.cancel();null!=f&&clearTimeout(f);null!=c&&clearInterval(c)}}),[m,e,n,E,g]);return{state:c,rsaKeyPair:d,cancel:m,handleFailure:g}}function lt(e){var t=e.text,n=void 0===t?"":t,a=at,o=tt(s.useState(!1),2),i=o[0],l=o[1];s.useEffect((function(){var e=new Image;e.src=a;e.onload=function(){return l(!0)};e.onerror=function(){return l(!0)}}),[a]);s.useEffect((function(){i&&f.AccessibilityAnnouncer.announce(Y.Z.Messages.LOGIN_WITH_QR_LOADING_FINISHED_LABEL)}),[i]);return(0,r.jsx)("div",{className:Ye().qrCodeContainer,children:""!==n&&i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.ZP,{className:Ye().qrCode,size:160,text:n}),(0,r.jsx)("div",{className:Ye().qrCodeOverlay,children:(0,r.jsx)("img",{src:a,alt:""})})]}):(0,r.jsx)("div",{className:Ye().qrCodeOverlay,"aria-label":Y.Z.Messages.LOGIN_WITH_QR_LOADING_LABEL,"aria-busy":!0,children:(0,r.jsx)(f.Spinner,{className:Ye().qrCode,
type:f.Spinner.Type.WANDERING_CUBES,"aria-hidden":!0})})})}var ct=function(e){var t=e.className,n=e.children;return(0,r.jsx)(f.Text,{variant:"text-md/normal",color:"text-danger",className:t,children:n})};function ut(e){var t=e.state,n=e.cancel,s=e.errorMessage;switch(t.step){case nt.INITIALIZING:case nt.PENDING_REMOTE_INIT:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lt,{text:t.step===nt.PENDING_REMOTE_INIT?"https://discord.com/ra/".concat(t.fingerprint):""}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.LOGIN_WITH_QR}),null!=s?(0,r.jsx)(ct,{children:s}):(0,r.jsx)(V.DK,{children:Y.Z.Messages.LOGIN_WITH_QR_DESCRIPTION.format()})]});case nt.PENDING_TICKET:case nt.PENDING_FINISH:var a=t.user;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ee.Z,{className:Ye().qrAvatar,user:a,size:f.AvatarSizes.SIZE_120,isMobile:!0,status:Ve.Sk.ONLINE}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.CONFIRM_QR_CHECK_YOUR_PHONE}),(0,r.jsx)(V.DK,{
children:Y.Z.Messages.LOGIN_AS.format({username:"".concat(ze.ZP.getUserTag(a))})}),(0,r.jsx)(f.Button,{look:f.Button.Looks.BLANK,color:f.Button.Colors.LINK,size:f.Button.Sizes.MIN,onClick:n,className:Ye().startOverButton,children:Y.Z.Messages.QR_CODE_LOGIN_START_OVER})]});case nt.PENDING_LOGIN:case nt.FINISH:return(0,r.jsx)(f.Spinner,{type:f.Spinner.Type.WANDERING_CUBES})}}function ft(e){var t=e.authTokenCallback,a=it(t),o=a.state,i=a.rsaKeyPair,l=a.cancel,c=a.handleFailure,u=tt(s.useState({}),2),d=u[0],h=u[1],p=function(e){switch(e){case nt.INITIALIZING:case nt.PENDING_REMOTE_INIT:return rt.QR_CODE;case nt.PENDING_TICKET:case nt.PENDING_FINISH:case nt.PENDING_LOGIN:case nt.FINISH:return rt.CONFIRM}}(o.step),E=tt(s.useState(null),2),_=E[0],m=E[1];o.step===nt.INITIALIZING&&Object.keys(d).length>0&&h({});s.useEffect((function(){o.step===nt.PENDING_LOGIN&&null!=o.ticket&&S.Z.post({url:v.ANM.REMOTE_AUTH_LOGIN,body:{ticket:o.ticket,captcha_key:null==d?void 0:d.captcha_key,
captcha_rqtoken:null==d?void 0:d.captcha_rqtoken},oldFormErrors:!0}).then((e=et((function(e){var n;return st(this,(function(r){switch(r.label){case 0:if(null==i)return[3,5];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,Ge(i,e.body.encrypted_token)];case 2:n=r.sent();t(n);return[3,4];case 3:r.sent();c();return[3,4];case 4:return[3,6];case 5:c();r.label=6;case 6:return[2]}}))})),function(t){return e.apply(this,arguments)})).catch((function(e){var t;if(null!=(null===(t=e.body)||void 0===t?void 0:t.captcha_key)){if(Array.isArray(e.body.captcha_key)&&e.body.captcha_key.includes("invalid-response")){m(Y.Z.Messages.LOGIN_WITH_QR_ERROR_SUBTITLE);c();return}n.e(72519).then(n.bind(n,972519)).then((function(t){t.default.showCaptchaAsync((0,Ne.extractCaptchaPropsFromResponseBody)(e.body)).then((function(e){h(e)})).catch((function(e){return c()}))}))}else c()}));var e}),[o,d,t,i,c]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:Ye().verticalSeparator}),(0,r.jsx)(f.Sequencer,{
fillParent:!0,className:Ye().qrLogin,step:p,steps:[rt.QR_CODE,rt.CONFIRM],children:(0,r.jsx)("div",{className:Ye().qrLoginInner,children:(0,r.jsx)(ut,{state:o,cancel:l,errorMessage:_})})})]})}var dt=n(247246),ht=n(335150),pt=n(271778),Et=n.n(pt);function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function Nt(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){gt(a,r,s,o,i,"next",e)}function i(e){gt(a,r,s,o,i,"throw",e)}o(void 0)}))}}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function It(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ot(e){Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Ot(e)}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){It(e,t,n[t])}))}return e}function Tt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function yt(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?mt(e):t}function Ct(e,t){Ct=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Ct(e,t)}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var s=Ot(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return yt(this,n)}}var Mt=function(e,t){var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){
if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;(r=0,s)&&(a=[2&a[0],s.value]);switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}s[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function Rt(){return(0,r.jsx)(V.ZP,{children:(0,r.jsx)(f.Spinner,{})})}function xt(e){var t=e.authBoxClassName,o=e.loginStatus,i=e.handleReset,l=vt(s.useState(!1),2),c=l[0],u=l[1];return(0,r.jsxs)(V.ZP,{
className:t,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:Xe().marginBottom20}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.TWO_FA}),(0,r.jsx)(V.DK,{children:Y.Z.Messages.TWO_FA_WEBAUTHN_BODY}),(0,r.jsxs)(V.gO,{className:Xe().marginTop40,children:[(0,r.jsx)(V.zx,{submitting:c||o===v.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){u(!0);var e=A.default.getWebAuthnChallenge();null!=e?a.U2(JSON.parse(e)).then((function(e){u(!1);h.Z.loginMFA({code:JSON.stringify(e),ticket:A.default.getMFATicket(),isWebAuthn:!0});le.S.dispatch(v.CkL.WAVE_EMPHASIZE)})).catch((function(e){u(!1);d.Z.dispatch({type:"LOGIN_MFA_FAILURE",message:e.message})})):d.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},children:Y.Z.Messages.TWO_FA_WEBAUTHN_ACTION}),(0,r.jsx)(V.zx,{look:V.zx.Looks.OUTLINED,className:Xe().marginTop8,disabled:o===v.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){d.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},
children:Y.Z.Messages.TWO_FA_WEBAUTHN_SWITCH_TOTP}),(0,r.jsx)(V.zx,{look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,className:Xe().marginTop8,onClick:i,children:Y.Z.Messages.TWO_FA_LOGIN_FOOTER})]})]})}var Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Ct(e,t)}(s,e);var t=Lt(s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n,a,o=mt(n=t.call(this,e));n.handleAuthToken=(a=Nt((function(e){return Mt(this,(function(t){switch(t.label){case 0:return[4,h.Z.loginToken(e,!1)];case 1:t.sent();T.default.track(v.rMx.LOGIN_SUCCESSFUL,{source:v.uRl.QR_CODE,login_source:o.loginSource,gift_code_sku_id:o.giftCodeSKUId,is_new_user:!1});return[2]}}))})),function(e){return a.apply(this,arguments)});n.setLoginRef=function(e){n.loginRef=e}
;n.setPasswordRef=function(e){n.passwordRef=e};n.setCodeRef=function(e){n.codeRef=e};n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};n.handleLogin=function(e){var t=n.state,r=t.password,s=t.captchaKey,a=t.undelete;null!=e&&e.preventDefault();n.setState({captchaCallback:n.handleLogin,captchaKey:null});h.Z.login({login:n.getFullLogin(),password:r,undelete:a,captchaKey:s,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId,invite:n.props.invite});le.S.dispatch(v.CkL.WAVE_EMPHASIZE)};var i=mt(n);n.handleIPAuthorize=function(){var e=Nt((function(e){var t,n,r,s,a,o,l;return Mt(this,(function(c){switch(c.label){case 0:t=i.state,n=t.password,r=t.captchaKey,s=t.undelete;i.setState({phoneVerifyError:null,captchaKey:null});a=i.getFullLogin();c.label=1;case 1:c.trys.push([1,4,,5]);return[4,J.Z.verifyPhone(a,e,!1)];case 2:o=c.sent().token
;return[4,h.Z.authorizeIPAddress(o)];case 3:c.sent();h.Z.login({login:a,password:n,undelete:s,captchaKey:r,source:i.loginSource,giftCodeSKUId:i.giftCodeSKUId});le.S.dispatch(v.CkL.WAVE_EMPHASIZE);return[3,5];case 4:null!=(l=c.sent()).body&&null!=l.body.message&&i.setState({phoneVerifyError:l.body.message});return[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var u=mt(n);n.handlePasswordReset=function(){var e=Nt((function(e){var t,n,r;return Mt(this,(function(s){switch(s.label){case 0:t=u.props.transitionTo;u.setState({phoneVerifyError:null});s.label=1;case 1:s.trys.push([1,3,,4]);return[4,J.Z.verifyPhone(u.getFullLogin(),e,!1)];case 2:n=s.sent().token;t(v.Z5c.RESET,{search:(0,l.stringify)({token:n,from_login:"true"})});return[3,4];case 3:null!=(r=s.sent()).body&&null!=r.body.message&&u.setState({phoneVerifyError:r.body.message});return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmit=function(e){
var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});le.S.dispatch(v.CkL.WAVE_EMPHASIZE)};n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.loginSMS({code:t.replace(/ /g,""),ticket:r});le.S.dispatch(v.CkL.WAVE_EMPHASIZE)};n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault();h.Z.requestSMSToken(t);le.S.dispatch(v.CkL.WAVE_EMPHASIZE)};var d=mt(n);n.handleForgotPassword=function(){var e=Nt((function(e){var t,n;return Mt(this,(function(s){switch(s.label){case 0:null!=e&&e.preventDefault();null!=d.loginRef&&d.loginRef.focus();t=d.getFullLogin();n=d.state.captchaKey;d.setState({captchaCallback:d.handleForgotPassword,captchaKey:null});s.label=1;case 1:s.trys.push([1,3,,4]);le.S.dispatch(v.CkL.WAVE_EMPHASIZE);return[4,h.Z.forgotPassword(t,n)];case 2:s.sent();(0,f.openModal)((function(e){
return(0,r.jsx)(f.ConfirmModal,Tt(At({header:Y.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:Y.Z.Messages.OKAY,confirmButtonColor:V.zx.Colors.BRAND,className:c.tq?Et().mobile:""},e),{children:(0,r.jsx)(f.Text,{variant:"text-md/normal",children:Y.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:t})})}))}));return[3,4];case 3:s.sent();return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handleResendCode=function(){J.Z.resendCode(n.getFullLogin())};n.handleReset=function(e){null!=e&&e.preventDefault();h.Z.loginReset();n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1,redirecting:!1})};n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)};n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)};n.handleGotoRegister=function(){
var e,t=n.state.login,r=n.props,s=r.invite,a=r.giftCode,o=r.guildTemplate,i=r.location,c=r.transitionTo,u=r.redirectTo,f=null!=i?(0,l.parse)(i.search):{};""!==t&&(f.email=t);if(null!=s){f.mode="register";e=v.Z5c.INVITE(s.code)}else if(null!=a){f.mode="register";e=v.Z5c.GIFT_CODE(a.code)}else if(null!=o)e=v.Z5c.GUILD_TEMPLATE(o.code);else if(null!=u){e=v.Z5c.REGISTER;f.redirect_to=u}else e=v.Z5c.REGISTER;h.Z.loginReset();c(e,{search:(0,l.stringify)(f)});le.S.dispatch(v.CkL.WAVE_EMPHASIZE)};var p,E,_=null!=e.location?(0,l.parse)(e.location.search):{};n.state={redirecting:e.authenticated,checkingHandoff:e.handoffAvailable,loginPrefix:"",login:null!==(E=null!==(p=_.email)&&void 0!==p?p:_.login)&&void 0!==E?E:"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null,dismissedChooseAccount:!1};return n}var a=s.prototype;a.componentDidMount=function(){
var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,s=e.invite,a=e.location;t&&!n?(0,p.is)():n&&this.loginOrSSO(n,a,!0);T.default.track(v.rMx.LOGIN_VIEWED,At({location:null!=s?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource,authenticated:n},null!=r?(0,m.Z)(r,!1,!1):{}),{flush:!0});h.Z.getLocationMetadata();(0,ne.e)("login")};a.componentDidUpdate=function(e){var t=this.props,n=t.authenticated,r=t.location,s=this.state.checkingHandoff;!n||e.authenticated||s||this.loginOrSSO(n,r);if(e.errors!==this.props.errors)if(this.hasError("password")){var a;null===(a=this.passwordRef)||void 0===a||a.focus()}else if(this.hasError("email")||this.hasError("login")){var o;null===(o=this.loginRef)||void 0===o||o.focus()}else if(this.hasError("code")){var i;null===(i=this.codeRef)||void 0===i||i.focus()}};a.loginOrSSO=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(e&&null!=t){this.setState({redirecting:!0})
;n?h.Z.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t)}};a.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo,s=t.replaceWith,a=null!=e?(0,l.parse)(e.search):{};delete a.redirect_to;if(null!=r)null!=s?s(r):n(r);else if(null==a.service)n(v.Z5c.APP);else{var o=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+v.ANM.SSO,i=Tt(At({},a),{token:A.default.getToken()});window.location="".concat(o,"?").concat((0,l.stringify)(i))}};a.hasError=function(e){return null!=this.props.errors[e]};a.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return(0,r.jsxs)(V.ZP,{className:e,children:[(0,r.jsx)(V.Hh,{}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.BROWSER_HANDOFF_DETECTING_TITLE}),(0,r.jsx)(V.DK,{children:Y.Z.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION})]})};a.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,s=e.authBoxClassName;return null==t?null:(0,
r.jsxs)(V.ZP,{className:s,children:[(0,r.jsx)(V.qE,{src:t.getAvatarURL(void 0,100),size:f.AvatarSizes.DEPRECATED_SIZE_100,className:Xe().marginBottom20}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})}),(0,r.jsx)(V.DK,{className:Xe().marginBottom40,children:Y.Z.Messages._BROWSER_HANDOFF_SUCCESS_BODY}),(0,r.jsxs)(V.gO,{children:[(0,r.jsx)(V.zx,{onClick:function(){return n(v.Z5c.APP)},className:Xe().marginBottom8,children:Y.Z.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})}),(0,r.jsx)(V.zx,{look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,onClick:this.handleReset,children:Y.Z.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL})]})]})};a.renderDisabledAccount=function(){
var e=this.props.authBoxClassName,t=this.props.loginStatus===v.u34.ACCOUNT_DISABLED,n=t?Y.Z.Messages.ACCOUNT_DISABLED_TITLE:Y.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,s=t?Y.Z.Messages.ACCOUNT_DISABLED_DESCRIPTION:Y.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return(0,r.jsx)(V.ZP,{tag:"form",onSubmit:this.handleReset,className:e,children:(0,r.jsxs)(f.HeadingLevel,{component:(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:n}),children:[(0,r.jsx)(V.DK,{className:Xe().marginBottom20,children:s}),(0,r.jsxs)(V.gO,{children:[(0,r.jsx)(V.zx,{color:V.zx.Colors.BRAND,type:"submit",children:Y.Z.Messages._RETURN_TO_LOGIN}),(0,r.jsx)("div",{className:i()(Xe().marginTop8,Et().needAccount),children:Y.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion})})]})]})})};a.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,s=t.country;return(0,r.jsxs)(V.ZP,{className:n,children:[(0,r.jsx)(de.R,{}),(0,r.jsxs)(V.gO,{
className:Xe().marginTop20,children:[(0,r.jsx)(te.Z,{className:Xe().marginBottom20,alpha2:s.alpha2,countryCode:s.code.split(" ")[0],label:Y.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!0,required:!0}),(0,r.jsx)(V.II,{className:Xe().marginBottom20,label:Y.Z.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password,required:!0}),(0,r.jsx)(V.zx,{className:Xe().marginBottom8,type:"submit",disabled:!0,children:Y.Z.Messages._LOGIN}),(0,r.jsx)(V.zx,{disabled:!0,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,children:Y.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(V.zx,{disabled:!0,className:Xe().marginTop4,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,
children:Y.Z.Messages.NEED_ACCOUNT})]})]})};a.renderDefaultForm=function(e){var t,n,s=this,a=this.props,o=a.invite,l=a.giftCode,c=a.loginStatus,u=a.country,d=a.showMobileWebHandoff,h=a.disableAutofocusOnDefaultForm,p=!this.hasError("email")&&this.hasError("password"),E=null!=(null==o?void 0:o.stage_instance);t=null==o||E?null!=l?(0,r.jsx)(fe.Z,{giftCode:l}):(0,r.jsxs)("div",{className:Et().header,children:[(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.LOGIN_TITLE},"title"),!1===(0,ce.eL)()?(0,r.jsx)(V.DK,{children:Y.Z.Messages.AUTH_LOGIN_BODY},"subtitle"):null]}):(0,r.jsx)(de.Z,{invite:o});return(0,r.jsxs)(ae.Z,{direction:ae.Z.Direction.HORIZONTAL,align:ae.Z.Align.CENTER,children:[(0,r.jsxs)("div",{className:Et().mainLoginContainer,children:[this.canShowChooseAccount&&this.state.dismissedChooseAccount&&(0,r.jsx)(V.zx,{onClick:function(){s.setState((function(e){return Tt(At({},e),{dismissedChooseAccount:!1})}))},look:V.zx.Looks.LINK,color:V.zx.Colors.PRIMARY,
className:Et().goBackButton,children:(0,r.jsxs)("div",{className:Et().content,children:[(0,r.jsx)(oe.Z,{width:16,height:16,className:Et().caret}),(0,r.jsx)(f.Text,{variant:"text-md/normal",children:Y.Z.Messages.AGE_GATE_GO_BACK})]})}),t,(0,r.jsx)(f.HeadingLevel,{children:(0,r.jsxs)(V.gO,{className:Xe().marginTop20,children:[(0,r.jsx)(te.Z,{alpha2:u.alpha2,countryCode:u.code.split(" ")[0],className:Xe().marginBottom20,label:Y.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(n=this.renderError("login"))&&void 0!==n?n:this.renderError("email"),onChange:function(e,t){return s.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!p&&!d&&!h,required:!0}),(0,r.jsx)(V.II,{label:Y.Z.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return s.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,
autoComplete:"off",spellCheck:"false",autoFocus:p&&!d&&!h,value:this.state.password,required:!0}),(0,r.jsx)(V.zx,{onClick:this.handleForgotPassword,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,className:i()(Xe().marginBottom20,Xe().marginTop4),children:Y.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(V.zx,{type:"submit",submitting:c===v.u34.LOGGING_IN,color:E?V.zx.Colors.GREEN:V.zx.Colors.BRAND,className:Xe().marginBottom8,children:E?Y.Z.Messages._LOGIN_STAGE:Y.Z.Messages._LOGIN}),(0,r.jsxs)("div",{className:Xe().marginTop4,children:[(0,r.jsx)("span",{className:Et().needAccount,children:Y.Z.Messages.NEED_ACCOUNT}),(0,r.jsx)(V.zx,{onClick:this.handleGotoRegister,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,className:Et().smallRegisterLink,children:Y.Z.Messages.REGISTER})]})]})})]}),(0,r.jsx)(f.HeadingLevel,{children:e?(0,r.jsx)(ft,{authTokenCallback:this.handleAuthToken}):null})]},"form-wrapper")};a.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.showMobileWebHandoff;return(0,
r.jsxs)("div",{className:Et().pageContainer,children:[(0,r.jsx)(V.ZP,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0,children:this.renderDefaultForm(!0)}),n&&(0,r.jsx)(H,{})]})};a.renderGuildTemplate=function(e){var t=this;return(0,r.jsx)(dt.Z,{onSubmit:this.handleLogin,tag:"form",className:i()(this.props.authBoxClassName,Et().horizontalAuthBox),children:function(){return[(0,r.jsx)(g.Z,{guildTemplate:e},"template"),t.renderDefaultForm(!1)]}})};a.renderMFA=function(){var e=this,t=this.props,s=t.loginStatus,a=t.mfaSMS,o=t.authBoxClassName;return(0,r.jsxs)(V.ZP,{onSubmit:this.handleTokenSubmit,tag:"form",className:o,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:Xe().marginBottom20}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.TWO_FA}),(0,r.jsx)(V.DK,{children:Y.Z.Messages.TWO_FA_ENTER_TOKEN_BODY}),(0,r.jsxs)(V.gO,{className:Xe().marginTop40,children:[(0,r.jsx)(V.II,{className:Xe().marginBottom20,error:this.renderError("code"),
setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"one-time-code",placeholder:Y.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:Y.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code,required:!0},"totpCode"),(0,r.jsx)(V.zx,{type:"submit",submitting:s===v.u34.LOGGING_IN_MFA,children:Y.Z.Messages._LOGIN}),a?(0,r.jsx)(V.zx,{onClick:this.handleToggleSMSLogin,submitting:s===v.u34.LOGGING_IN_MFA_SMS,className:Xe().marginTop8,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,children:Y.Z.Messages.MFA_SMS_RECEIVE_CODE}):null,(0,r.jsx)(V.zx,{look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,className:Xe().marginTop4,onClick:this.handleReset,children:Y.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};a.renderMFASMS=function(){var e=this,t=this.props,s=t.loginStatus,a=t.maskedPhone,o=t.authBoxClassName,i=s===v.u34.LOGGING_IN_MFA_SMS||""===a;return(0,r.jsxs)(V.ZP,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:o,children:[(0,
r.jsx)("img",{alt:"",src:n(148267),className:Xe().marginBottom20}),(0,r.jsx)(V.Dx,{className:Xe().marginBottom8,children:Y.Z.Messages.TWO_FA}),(0,r.jsx)(V.DK,{className:Xe().marginBottom8,children:i?Y.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:Y.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})}),(0,r.jsxs)(V.gO,{className:Xe().marginTop40,children:[(0,r.jsx)(V.II,{className:Xe().marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:Y.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:Y.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode,required:!0},"smsCode"),(0,r.jsx)(V.zx,{type:"submit",submitting:i,color:i?V.zx.Colors.TRANSPARENT:V.zx.Colors.BRAND,children:Y.Z.Messages._LOGIN}),i?null:(0,r.jsx)(V.zx,{onClick:this.handleToggleSMSLogin,className:Xe().marginTop8,look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,
children:Y.Z.Messages.MFA_SMS_RESEND}),(0,r.jsx)(V.zx,{look:V.zx.Looks.LINK,color:V.zx.Colors.LINK,className:Xe().marginTop4,onClick:this.handleReset,children:Y.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};a.renderMFAWebAuthn=function(){var e=this.props,t=e.authBoxClassName,n=e.loginStatus;return(0,r.jsx)(xt,{authBoxClassName:t,loginStatus:n,handleReset:this.handleReset})};a.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(V.ZP,{tag:"form",className:e,children:(0,r.jsx)(_.Z,{title:Y.Z.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:Y.Z.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:h.Z.loginReset})})};a.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(V.ZP,{tag:"form",className:e,children:(0,r.jsx)(_.Z,{title:Y.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,
subtitle:Y.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:h.Z.loginReset})})};a.renderChooseAccount=function(){var e=this;return(0,r.jsx)($,{onDismiss:function(){e.setState((function(e){return Tt(At({},e),{dismissedChooseAccount:!0})}))}})};a.render=function(){var e=this.props,t=e.authenticated,n=e.invite,s=e.guildTemplate,a=e.loginStatus,o=e.handoffAvailable,i=e.authBoxClassName,l=e.errors,c=this.state,u=c.checkingHandoff;if(c.redirecting||u)return(0,r.jsx)(Rt,{});if(this.hasError("captcha_key"))return(0,r.jsx)(ue.Z,{authBoxClassName:i,onVerify:this.handleCaptchaVerify,title:Y.Z.Messages.LOGIN_TITLE,sitekey:l.captcha_sitekey,captchaService:(0,ie.B)(l.captcha_service)});if(o)return this.renderHandOffAvailable();if(t&&u)return this.renderHandOffContinue();switch(a){case v.u34.LOGGING_IN_MFA_SMS:case v.u34.MFA_SMS_STEP:return this.renderMFASMS();case v.u34.LOGGING_IN_MFA:
case v.u34.MFA_STEP:return this.renderMFA();case v.u34.MFA_WEBAUTHN_STEP:case v.u34.LOGGING_IN_MFA_WEBAUTHN:return this.renderMFAWebAuthn();case v.u34.ACCOUNT_SCHEDULED_FOR_DELETION:case v.u34.ACCOUNT_DISABLED:return this.renderDisabledAccount();case v.u34.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case v.u34.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case v.u34.LOGGING_IN:case v.u34.NONE:default:return null!=n&&n.state===v.r2o.RESOLVING?this.renderResolving():null!=s?s.state===ht.Rj.RESOLVING?this.renderResolving():this.renderGuildTemplate(s):this.canShowChooseAccount&&!this.state.dismissedChooseAccount?this.renderChooseAccount():this.renderDefault()}};s.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};!function(e,t,n){t&&St(e.prototype,t);n&&St(e,n)}(s,[{key:"loginSource",get:function(){
var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,s=e.loginSource,a=e.redirectTo;if(null!=s)return s;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null!=a?(0,E.L)(a):null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}},{key:"canShowChooseAccount",get:function(){return this.props.hasLoggedInAccounts}}]);return s}(s.PureComponent);Dt.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const jt=function(e){var t=(0,u.cj)([re.Z,se.Z,A.default,W.Z,ee.Z],(function(){return{authenticated:A.default.isAuthenticated(),handoffAvailable:re.Z.isHandoffAvailable(),user:re.Z.user,loginStatus:A.default.getLoginStatus(),mfaTicket:A.default.getMFATicket(),mfaSMS:A.default.getMFASMS(),maskedPhone:A.default.getMaskedPhone(),errors:A.default.getErrors(),defaultRoute:se.Z.defaultRoute,
country:ee.Z.getCountryCode(),hasLoggedInAccounts:W.Z.getHasLoggedInAccounts()}}));return(0,r.jsx)(Dt,At({},e,t))}},247246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(785893),s=(n(667294),n(294184)),a=n.n(s),o=n(558820),i=n(611109),l=n.n(i);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function u(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function f(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(s[n]=e[n])}return s
}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}}return s}function d(e){var t=e.children,n=e.className,s=f(e,["children","className"]),i=t();return(0,r.jsx)(o.ZP,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}({},s),{className:a()(n,l().container),contentClassName:l().content,children:i.map((function(e,t){return(0,r.jsx)("div",{className:l().column,style:{flexBasis:"".concat(100/i.length,"%")},children:e},t)}))}))}},144936:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x})
;var r=n(785893),s=n(667294),a=n(294184),o=n.n(a),i=n(517563),l=n(289283),c=n(202351),u=n(744564),f=n(84441),d=n(645106),h=n(845882),p=n(686874),E=n(736818),_=n(558820),m=n(930948),g=n(2590),N=n(473708),S=n(518280),I=n.n(S);function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n,r,s,a,o){try{var i=e[a](o),l=i.value}catch(e){n(e);return}i.done?t(l):Promise.resolve(l).then(r,s)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){A(a,r,s,o,i,"next",e)}function i(e){A(a,r,s,o,i,"throw",e)}o(void 0)}))}}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function C(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var b=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var s=y(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return C(this,n)}}var M=function(e,t){var n,r,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;(r=0,s)&&(a=[2&a[0],s.value])
;switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}s[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};c.ZP.initialize();var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&v(e,t)}(s,e);var t=L(s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)
;var n,r,a,o=O(n=t.call(this,e));n.handleSubmit=(a=T((function(e){var t,n,r,s,a,i,l,c,h,p,E,_,S,I;return M(this,(function(O){switch(O.label){case 0:t=o.props,n=t.location,r=t.onLoginSuccess,s=t.resetToken;a=o.state,i=a.password,l=a.error;null!=e&&e.preventDefault();if(0===i.length){o.setState({error:N.Z.Messages.PASSWORD_REQUIRED});m.S.dispatch(g.CkL.WAVE_EMPHASIZE);return[2]}null!=l&&o.setState({error:null});c=s;null!=n&&(c=(0,d.Z)(n));if(null==c)return[2];o.setState({working:!0});O.label=1;case 1:O.trys.push([1,3,,4]);return[4,f.Z.resetPassword(c,i)];case 2:h=O.sent(),p=h.result,E=h.sms,_=h.webauthn,S=h.ticket,I=h.token;if(p===f.c.MFA)u.Z.dispatch({type:"LOGIN_MFA_STEP",ticket:S,sms:E,webauthn:_});else if(null!=r)r(I);else{u.Z.dispatch({type:"LOGIN_SUCCESS",token:I});o.handlePasswordChangeSuccess()}return[3,4];case 3:O.sent();return[3,4];case 4:o.setState({working:!1});return[2]}}))})),function(e){return a.apply(this,arguments)});var c=O(n);n.handleTokenSubmit=function(){
var e=T((function(e){var t,n,r,s,a,o,i,l,h,p,E;return M(this,(function(_){switch(_.label){case 0:t=c.props,n=t.location,r=t.mfaTicket,s=t.onLoginSuccess,a=t.resetToken;o=c.state,i=o.code,l=o.password,h=o.error;null!=e&&e.preventDefault();if(0===l.length){c.setState({error:N.Z.Messages.PASSWORD_REQUIRED});m.S.dispatch(g.CkL.WAVE_EMPHASIZE);return[2]}null!=h&&c.setState({error:null});p=a;null!=n&&(p=(0,d.Z)(n));if(null==p)return[2];c.setState({working:!0});_.label=1;case 1:_.trys.push([1,3,,4]);return[4,f.Z.resetPasswordMFA(i,r,l,p)];case 2:E=_.sent();if(null!=s)s(E);else{u.Z.dispatch({type:"LOGIN_SUCCESS",token:E});c.handlePasswordChangeSuccess()}return[3,4];case 3:_.sent();return[3,4];case 4:c.setState({working:!1});return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handlePasswordChangeSuccess=function(){var e=n.props.replaceWith;l.Em||l.tq?n.setState({success:!0}):e(g.Z5c.APP)};n.handleGoToLogin=function(){var e=n.props.transitionTo;f.Z.loginReset()
;e(g.Z5c.LOGIN)};n.isSubmitting=function(){var e=n.props.loginStatus;return n.state.working||e===g.u34.LOGGING_IN_MFA};n.handleOpenApp=function(){(0,h.Z)("password_reset")};n.hasError=function(e){return null!=n.props.errors[e]||null!=n.state.error};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};var p=null!=(null===(r=n.props.location)||void 0===r?void 0:r.search)&&""!==n.props.location.search?(0,i.parse)(n.props.location.search):null;n.state={password:"",code:"",error:null,hasCancel:null!=p&&null!=p.from_login,working:!1,success:!1};return n}var a=s.prototype;a.componentDidMount=function(){(0,p.e)("reset_password")};a.renderPasswordReset=function(){var e=this,t=this.state,s=t.password,a=t.error,o=t.hasCancel,i=this.isSubmitting(),l=null!=a?a:this.renderError("password");return(0,r.jsxs)(_.ZP,{onSubmit:this.handleSubmit,tag:"form",children:[(0,r.jsx)("img",{alt:"",src:n(null==l?359074:396679),
className:I().marginBottom20}),(0,r.jsx)(_.Dx,{children:N.Z.Messages.RESET_PASSWORD_TITLE}),(0,r.jsxs)(_.gO,{className:I().marginTop20,children:[(0,r.jsx)(_.II,{label:N.Z.Messages.FORM_LABEL_NEW_PASSWORD,className:I().marginBottom20,name:"password",value:s,onChange:function(t){return e.setState({password:t})},error:l,type:"password"}),(0,r.jsx)(_.zx,{type:"submit",submitting:i,children:N.Z.Messages.CHANGE_PASSWORD}),o?(0,r.jsx)(_.zx,{className:I().marginTop8,onClick:this.handleGoToLogin,submitting:i,color:_.zx.Colors.PRIMARY,children:N.Z.Messages.CANCEL}):null]})]})};a.renderMFA=function(){var e=this,t=this.state.error,s=null!=t?t:this.renderError("code");return(0,r.jsxs)(_.ZP,{onSubmit:this.handleTokenSubmit,tag:"form",children:[(0,r.jsx)("img",{alt:"",src:n(null==s?359074:396679),className:o()(I().marginBottom20,l.tq?I().marginTop20:"")}),(0,r.jsx)(_.Dx,{className:I().marginBottom8,children:N.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL}),(0,r.jsx)(_.DK,{
children:N.Z.Messages.TWO_FA_ENTER_TOKEN_BODY}),(0,r.jsxs)(_.gO,{className:I().marginTop20,children:[(0,r.jsx)(_.II,{className:I().marginBottom8,error:s,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:N.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,value:this.state.code}),(0,r.jsx)(_.zx,{type:"submit",submitting:this.isSubmitting(),children:N.Z.Messages._LOGIN})]})]})};a.renderSucceeded=function(){return(0,r.jsxs)(_.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(359074),className:o()(I().marginBottom20,l.tq?I().marginTop20:"")}),(0,r.jsx)(_.Dx,{className:I().marginBottom40,children:N.Z.Messages.RESET_PASSWORD_SUCCESS_TITLE}),(0,r.jsx)(_.zx,{onClick:this.handleOpenApp,children:N.Z.Messages.VERIFICATION_OPEN_DISCORD})]})};a.render=function(){return this.state.success?this.renderSucceeded():null!=this.props.mfaTicket&&""!==this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()};return s}(s.PureComponent);R.defaultProps={
transitionTo:function(e){return n.g.location.assign(e)},replaceWith:function(e){return n.g.location.replace(e)}};const x=c.ZP.connectStores([E.default],(function(){return{loginStatus:E.default.getLoginStatus(),mfaTicket:E.default.getMFATicket(),errors:E.default.getErrors()}}))(R)},110108:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,L:()=>i});var r,s=n(327930),a=n(2590),o=n(897196);!function(e){e.ROLE_SUBSCRIPTION="role_subscription";e.ROLE_SUBSCRIPTION_SETTING="role_subscription_setting"}(r||(r={}));function i(e){var t=decodeURIComponent(e),n=(0,s.Qj)(t);return null!=n&&n.channelId===o.oC.ROLE_SUBSCRIPTIONS?r.ROLE_SUBSCRIPTION:t===a.Z5c.SETTINGS(a.oAB.SUBSCRIPTIONS,"role-subscriptions")?r.ROLE_SUBSCRIPTION_SETTING:void 0}},645106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(517563);function s(e){var t=null!=e.hash&&""!==e.hash?(0,r.parse)(e.hash):null;if(null!=(null==t?void 0:t.token))return t.token;var n=null!=e.search&&""!==e.search?(0,r.parse)(e.search):null
;return null!=(null==n?void 0:n.token)?n.token:null}},153081:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(785893),s=(n(667294),n(945460)),a=n(836485),o=n(107364),i=n(558820),l=n(473708),c=n(810436),u=n.n(c),f=n(518280),d=n.n(f);function h(e){var t=e.title,n=e.subtitle,c=e.error,f=e.onSubmit,h=e.onCancel;return(0,r.jsxs)(o.Z,{direction:o.Z.Direction.VERTICAL,children:[(0,r.jsx)(i.Dx,{className:d().marginBottom8,children:t}),(0,r.jsx)(i.DK,{className:u().subTitle,children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Z,{inputClassName:u().codeInput,onSubmit:f}),null!=c?(0,r.jsx)(s.Text,{className:u().error,variant:"text-sm/normal",children:c}):null]}),null!=h&&(0,r.jsx)(s.Button,{className:u().button,onClick:h,color:s.Button.Colors.PRIMARY,children:l.Z.Messages.CANCEL})]})}},267342:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(335150),s=n(473708);function a(e){switch(e){case r.HQ.CLASSROOM:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CLASSROOM,
description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CLASSROOM,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CLASSROOM,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CLASSROOM,author:s.Z.Messages.DISCORD_NAME};case r.HQ.LOCAL_COMMUNITIES:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_LOCAL_COMMUNITIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LOCAL_COMMUNITIES,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_LOCAL_COMMUNITIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_LOCAL_COMMUNITIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.CREATORS_HOBBIES:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATORS_HOBBIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATORS_HOBBIES,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATORS_HOBBIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,
defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATORS_HOBBIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.GLOBAL_COMMUNITIES:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_GLOBAL_COMMUNITIES,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_GLOBAL_COMMUNITIES,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_GLOBAL_COMMUNITIES,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_GLOBAL_COMMUNITIES,author:s.Z.Messages.DISCORD_NAME};case r.HQ.FRIENDS_FAMILY:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_FRIENDS_FAMILY,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_FRIENDS_FAMILY,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_FRIENDS_FAMILY,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_FRIENDS_FAMILY,author:s.Z.Messages.DISCORD_NAME};case r.HQ.STUDY_GROUPS:return{
header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_STUDY_GROUPS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_STUDY_GROUPS,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_STUDY_GROUPS,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_STUDY_GROUPS,author:s.Z.Messages.DISCORD_NAME};case r.HQ.CREATE_FROM_SCRATCH:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CREATE_FROM_SCRATCH,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CREATE_FROM_SCRATCH,nameLabel:s.Z.Messages.GUILD_TEMPLATES_FORM_LABEL_SERVER_NAME_CREATE_FROM_SCRATCH,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CREATE_FROM_SCRATCH,author:s.Z.Messages.DISCORD_NAME};case r.HQ.CAMPUS_CLUBS:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_CAMPUS_CLUBS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_CAMPUS_CLUBS,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,
terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.GUILD_TEMPLATE_DEFAULT_SERVER_NAME_CAMPUS_CLUBS,author:s.Z.Messages.DISCORD_NAME};case r.HQ.LEAGUE_CLUBS:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_LEAGUE_CLUBS,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_LEAGUE_CLUBS,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT,author:s.Z.Messages.DISCORD_NAME};case r.HQ.GITHUB_HACKATHON:return{header:s.Z.Messages.GUILD_TEMPLATE_MODAL_TITLE_GITHUB_HACKATHON,description:s.Z.Messages.GUILD_TEMPLATE_MODAL_DESCRIPTION_GITHUB_HACKATHON,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT,author:"GitHub Education"};default:return{header:s.Z.Messages.GUILD_TEMPLATE_CREATE_DISCORD,nameLabel:s.Z.Messages.FORM_LABEL_SERVER_NAME,
terms:s.Z.Messages.CREATE_SERVER_GUIDELINES,defaultName:s.Z.Messages.CREATE_SERVER_DEFAULT_SERVER_NAME_FORMAT}}}},281437:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r,s=n(785893),a=(n(667294),n(558820)),o=n(267342),i=n(256273),l=n(335150),c=n(945381),u=n.n(c);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var d=(f(r={},l.HQ.CLASSROOM,n(149374)),f(r,l.HQ.LOCAL_COMMUNITIES,n(106952)),f(r,l.HQ.CREATORS_HOBBIES,n(123555)),f(r,l.HQ.GLOBAL_COMMUNITIES,n(100553)),f(r,l.HQ.FRIENDS_FAMILY,n(614040)),f(r,l.HQ.STUDY_GROUPS,n(952587)),f(r,l.HQ.CREATE_FROM_SCRATCH,n(841860)),f(r,l.HQ.CAMPUS_CLUBS,n(661807)),f(r,l.HQ.LEAGUE_CLUBS,n(568534)),f(r,l.HQ.GITHUB_HACKATHON,n(525106)),r);function h(e){var t=e.headerId,n=e.guildTemplate,r=n.code,c=d[r];if(null!=c){var f,h=(0,o.Z)(r),p=h.header,E=h.description,_=h.author;return(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{className:u().image,src:c,alt:""}),(0,s.jsx)(a.Dx,{
className:u().header,id:t,children:p}),(0,s.jsx)(a.DK,{children:E}),n.state===l.Rj.RESOLVED?(0,s.jsx)(i.D,{className:u().usagePill,count:null!==(f=n.usageCount)&&void 0!==f?f:0,verifiedName:_}):null]})}return(0,s.jsx)(i.Z,{pillClassName:u().usagePill,guildTemplate:n,tall:!0})}},256273:(e,t,n)=>{"use strict";n.d(t,{D:()=>N,Z:()=>S});var r=n(785893),s=(n(667294),n(294184)),a=n.n(s),o=n(945460),i=n(859917),l=n(558820),c=n(128181),u=n(267342);var f=n(335150),d=n(473708),h=n(828213),p=n.n(h),E=n(518280),_=n.n(E);function m(){return(0,r.jsx)(i.Z,{className:p().verifiedIcon,children:(0,r.jsx)("div",{className:p().verifiedCheckContainer,children:(0,r.jsx)(c.Z,{className:p().verifiedCheck})})})}function g(e){var t=e.verified,n=e.text;return t?(0,r.jsxs)("div",{className:p().verifiedNameContainer,children:[(0,r.jsx)(m,{}),n]}):(0,r.jsx)(r.Fragment,{children:n})}function N(e){var t=e.className,n=e.count,s=e.creator,o=e.verifiedName;return(0,r.jsx)("div",{
className:a()(p().usagePill,t,p().userText),children:null!=s||null!=o?d.Z.Messages.GUILD_TEMPLATE_USAGES_BY_CREATOR2.format({usageCount:n,creator:null!=o?o:s,creatorHook:function(e,t){return(0,r.jsx)(g,{text:e,verified:null!=o},t)}}):d.Z.Messages.GUILD_TEMPLATE_USAGES.format({usageCount:n})})}function S(e){var t=e.guildTemplate,n=e.error,s=e.tall,i=e.pillClassName;if(null!=n&&""!==n)return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{children:d.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(l.DK,{children:n})]});if(t.state===f.Rj.RESOLVING)return(0,r.jsx)("div",{className:p().container,children:(0,r.jsx)(o.Spinner,{})});var c,h=(0,u.Z)(t.code).header;if(s){var E;return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{className:p().title,children:h}),(0,r.jsx)(l.DK,{className:a()(p().subtitle,_().marginTop2),children:d.Z.Messages.GUILD_TEMPLATE_BASED_ON}),(0,r.jsx)(l.Dx,{className:a()(p().title,p().userText),children:t.name
}),null!=t.description&&""!==t.description&&(0,r.jsx)(l.DK,{className:a()(p().subtitle,p().userText,_().marginTop8),children:t.description}),(0,r.jsx)(N,{className:i,count:null!==(E=t.usageCount)&&void 0!==E?E:0,creator:t.creator.username,verifiedName:(c=t.code,(0,u.Z)(c).author)})]})}return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsx)(l.Dx,{className:p().title,children:h}),(0,r.jsx)(l.DK,{className:a()(p().subtitle,p().userText),children:t.name})]})}},349979:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,Z:()=>b});var r,s=n(785893),a=n(667294),o=n(294184),i=n.n(o),l=n(202351),c=n(945460),u=n(84441),f=n(971402),d=n(722406),h=n(736818),p=n(793461),E=n(473903),_=n(186440),m=n(652591),g=n(749565),N=n(196644),S=n(873553),I=n(22724),O=n(2590),A=n(473708),T=n(347277),y=n.n(T);function C(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}!function(e){e[e.LOGIN_REQUIRED=0]="LOGIN_REQUIRED";e[e.SWITCHED=1]="SWITCHED"
;e[e.REMOVED=2]="REMOVED"}(r||(r={}));function v(e){var t=e.actionText,n=e.user,a=e.onAction,o=(0,l.cj)([E.default,p.Z,h.default],(function(){return{currentUser:E.default.getCurrentUser(),hidePrivateData:p.Z.hidePersonalInformation,isAuthenticated:h.default.isAuthenticated()}})),I=o.currentUser,T=o.hidePrivateData,v=o.isAuthenticated,b=new d.Z(n),L=v&&(null==I?void 0:I.id)===b.id,M=n.tokenStatus===S.q.INVALID,R=T||b.isPomelo()?null:"#".concat(b.discriminator),x=null;L?x=(0,s.jsx)(c.Text,{variant:"text-sm/semibold",className:y().hintText,color:"text-positive",children:A.Z.Messages.SWITCH_ACCOUNTS_ACTIVE_ACCOUNT}):M&&(x=(0,s.jsx)(c.Text,{variant:"text-sm/semibold",className:y().hintText,color:"text-danger",children:A.Z.Messages.SWITCH_ACCOUNTS_INVALID_TOKEN}));return(0,s.jsx)("div",{className:y().accountCard,children:(0,s.jsxs)("div",{className:y().userDetails,children:[(0,s.jsx)(c.Avatar,{src:b.getAvatarURL(void 0,40),size:c.AvatarSizes.SIZE_40,"aria-label":n.username}),(0,
s.jsxs)("div",{className:i()(y().usernameSection,C({},y().hasActionMaxWidth,!L)),children:[(0,s.jsxs)("div",{className:y().username,children:[(0,s.jsx)(c.Text,{variant:"text-md/semibold",color:"header-primary",className:y().textOverflow,children:g.ZP.getUserTag(b,{mode:"username",identifiable:T?"never":"always"})}),(0,s.jsx)(c.Text,{color:"header-secondary",variant:"text-sm/normal",children:R})]}),x]}),(0,s.jsxs)("div",{className:y().userActions,children:[!L&&(0,s.jsx)(c.Button,{onClick:function(){if(M)a(r.LOGIN_REQUIRED,n.id);else{m.default.track(O.rMx.MULTI_ACCOUNT_SWITCH_ATTEMPT,{location:{section:O.jXE.MANAGE_ACCOUNTS_MODAL}});N.yD(n.id);a(r.SWITCHED,n.id)}},color:c.Button.Colors.PRIMARY,children:M?A.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN:t}),(0,s.jsx)(c.Button,{className:y().userActionMenu,onClick:function(e){(0,f.vq)(e,(function(e){var t=e.onSelect;return(0,s.jsx)(c.Menu,{"aria-label":A.Z.Messages.SWITCH_ACCOUNTS_MANAGE_ACCOUNT,navId:"manage-multi-account",onClose:f.Zy,
onSelect:t,children:(0,s.jsx)(c.MenuItem,{id:"remove-account",label:A.Z.Messages.SWITCH_ACCOUNTS_REMOVE_ACCOUNT,action:function(){!function(){u.Z.logout(null,n.id).finally((function(){N.Zd(n.id)}));var e={};null!=I?e.section=O.jXE.MANAGE_ACCOUNTS_MODAL:e.page=O.Usc.LOGIN;m.default.track(O.rMx.MULTI_ACCOUNT_ACCOUNT_REMOVE,{location:e});a(r.REMOVED,n.id)}();null!=t&&t()},color:"danger"})})}))},size:c.Button.Sizes.ICON,look:c.Button.Looks.BLANK,color:c.Button.Colors.WHITE,"aria-label":A.Z.Messages.MORE_OPTIONS,children:(0,s.jsx)(_.Z,{className:y().overflowMenuIcon})})]})]})})}function b(e){var t=e.actionText,n=e.onAction,r=(0,I.L)(),o=r.isLoading,i=r.multiAccountUsers;return(0,s.jsx)("div",{className:y().list,children:o?(0,s.jsx)(c.Spinner,{}):i.map((function(e,r){return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(v,{user:e,actionText:t,onAction:n},e.id),i.length-1!==r&&(0,s.jsx)("div",{role:"separator",className:y().separator})]},e.id)}))})}},53540:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>r,
o9:()=>a});var r;!function(e){e.PHONE="phone";e.EMAIL="email"}(r||(r={}));var s=/^[-() \d]+$/;function a(e,t){return e===r.PHONE?!(n=t,n.startsWith("+")):e!==r.EMAIL&&(!(t.length<3)&&s.test(t));var n}},78501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(785893),s=n(667294),a=n(294184),o=n.n(a),i=n(945460),l=n(443812),c=n(53540),u=n(248088),f=n(202351),d=n(316878),h=n(426797),p=n(376845),E=n(33031),_=n.n(E);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}function S(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){var t=e.show,n=e.alpha2,a=e.countryCode,l=(0,f.e7)([d.Z],(function(){return d.Z.useReducedMotion})),c=s.useRef(null),E=I(s.useState(0),2),m=E[0],O=E[1],A=I(s.useState(!1),2),T=A[0],y=A[1];s.useEffect((function(){var e=function(){var e,n;O(t&&null!==(n=null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==n?n:0)};e();window.addEventListener("resize",e);return function(){return window.removeEventListener("resize",e)}}),[t,n,a]);var C=(0,u.useSpring)({width:"".concat(m,"px"),immediate:l,onStart:function(){y(!0)},onRest:function(){y(!1)}});return(0,r.jsx)(i.Popout,{position:"top",renderPopout:function(e){return(0,r.jsx)(p.Z,{
className:_().popout,onClick:function(t){!function(e){h.Z.setCountryCode(e)}(t);e.closePopout()}})},children:function(e){return(0,r.jsx)("div",{className:o()(_().outerContainer,g({},_().hidden,!(t||T))),children:(0,r.jsx)(u.animated.div,{className:_().container,style:C,children:(0,r.jsxs)("div",{className:_().innerContainer,ref:c,children:[(0,r.jsxs)(i.Clickable,S(N({},e),{className:_().countryCode,children:[n," ",a]})),(0,r.jsx)("div",{className:_().separator})]})})})}})}var A=n(543505),T=n.n(A),y=n(103468),C=n.n(y);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){
a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var t,n=e.alpha2,a=e.countryCode,u=e.forceMode,f=e.label,d=e.error,h=e.className,p=e.required,E=e.value,_=e.setRef,m=e.placeholder,g=e.autoFocus,N=e.maxLength,S=e.spellCheck,I=e.autoComplete,A=e.autoCapitalize,y=e.autoCorrect,v=e.onChange,M=e.inputClassName,R=(0,l.Dt)(),x=L(s.useState(!1),2),D=x[0],j=x[1],Z=(0,c.o9)(u,E);return(0,r.jsx)(i.FormItem,{title:f,
error:d,className:h,required:p,tag:"label",htmlFor:R,children:(0,r.jsxs)("div",{className:o()(C().input,T().input,M,(t={},b(t,C().error,null!=d),b(t,C().focused,D),t)),children:[(0,r.jsx)(O,{show:Z,alpha2:n,countryCode:a}),(0,r.jsx)(i.TextInput,{id:R,name:"email",type:u===c.Nz.EMAIL?"email":"text",value:E,inputRef:_,placeholder:m,"aria-label":f,required:p,onChange:function(e){var t=(0,c.o9)(u,e)?a:"";v(e,t)},autoComplete:I,autoCapitalize:A,autoCorrect:y,autoFocus:g,maxLength:N,spellCheck:S,className:T().inputWrapper,inputClassName:T().inputField,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)}})]})})}},970112:(e,t,n)=>{"use strict";n.d(t,{Ue:()=>g,U2:()=>N});function r(e){const t="==".slice(0,(4-e.length%4)%4),n=e.replace(/-/g,"+").replace(/_/g,"/")+t,r=atob(n),s=new ArrayBuffer(r.length),a=new Uint8Array(s);for(let e=0;e<r.length;e++)a[e]=r.charCodeAt(e);return s}function s(e){const t=new Uint8Array(e);let n="";for(const e of t)n+=String.fromCharCode(e)
;return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var a="copy",o="convert";function i(e,t,n){if(t===a)return n;if(t===o)return e(n);if(t instanceof Array)return n.map((n=>i(e,t[0],n)));if(t instanceof Object){const r={};for(const[s,a]of Object.entries(t)){if(a.derive){const e=a.derive(n);void 0!==e&&(n[s]=e)}if(s in n)null!=n[s]?r[s]=i(e,a.schema,n[s]):r[s]=null;else if(a.required)throw new Error(`Missing key: ${s}`)}return r}}function l(e,t){return{required:!0,schema:e,derive:t}}function c(e){return{required:!0,schema:e}}function u(e){return{required:!1,schema:e}}var f={type:c(a),id:c(o),transports:u(a)},d={appid:u(a),appidExclude:u(a),credProps:u(a)},h={appid:u(a),appidExclude:u(a),credProps:u(a)},p={publicKey:c({rp:c(a),user:c({id:c(o),name:c(a),displayName:c(a)}),challenge:c(o),pubKeyCredParams:c(a),timeout:u(a),excludeCredentials:u([f]),authenticatorSelection:u(a),attestation:u(a),extensions:u(d)}),signal:u(a)},E={type:c(a),id:c(a),rawId:c(o),
authenticatorAttachment:u(a),response:c({clientDataJSON:c(o),attestationObject:c(o),transports:l(a,(e=>{var t;return(null==(t=e.getTransports)?void 0:t.call(e))||[]}))}),clientExtensionResults:l(h,(e=>e.getClientExtensionResults()))},_={mediation:u(a),publicKey:c({challenge:c(o),timeout:u(a),rpId:u(a),allowCredentials:u([f]),userVerification:u(a),extensions:u(d)}),signal:u(a)},m={type:c(a),id:c(a),rawId:c(o),authenticatorAttachment:u(a),response:c({clientDataJSON:c(o),authenticatorData:c(o),signature:c(o),userHandle:c(o)}),clientExtensionResults:l(h,(e=>e.getClientExtensionResults()))};async function g(e){const t=await navigator.credentials.create(function(e){return i(r,p,e)}(e));return function(e){return i(s,E,e)}(t)}async function N(e){const t=await navigator.credentials.get(function(e){return i(r,_,e)}(e));return function(e){return i(s,m,e)}(t)}}}]);
//# sourceMappingURL=378b665ccbf695624e5e.js.map