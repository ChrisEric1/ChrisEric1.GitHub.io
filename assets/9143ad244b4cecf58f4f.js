"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[11887],{211887:(e,t,n)=>{n.r(t);n.d(t,{default:()=>G});var r=n(785893),a=n(667294),o=n(331535),i=n(291035),u=n(891153),l=n(363798),c=n(109813),s=n(897576),f=n(959797),d=n(396992),p=n.n(d);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){h(o,r,a,i,u,"next",e)}function u(e){h(o,r,a,i,u,"throw",e)}i(void 0)}))}}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){
var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done);i=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e];r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function w(e){
var t,i,u,l,c=e.clip,d=b(a.useState(null===(u=null===(t=c.editMetadata)||void 0===t?void 0:t.voiceAudio)||void 0===u||u),2),v=d[0],h=d[1],w=b(a.useState(null===(l=null===(i=c.editMetadata)||void 0===i?void 0:i.applicationAudio)||void 0===l||l),2),j=w[0],x=w[1];return(0,r.jsxs)("div",{className:p().clipForm,children:[(0,r.jsxs)("div",{className:p().clipFormBody,children:[(0,r.jsx)(o.xJ,{className:p().clipFormItem,title:f.Z.Messages.CLIPS_EDIT_TITLE,children:(0,r.jsx)(o.oi,{value:c.name})}),(0,r.jsxs)("div",{className:p().clipFormSwitches,children:[(0,r.jsx)(o.j7,{onChange:x,value:j,hideBorder:!0,children:f.Z.Messages.CLIPS_EDIT_GAME_AUDIO}),(0,r.jsx)(o.j7,{onChange:h,value:v,hideBorder:!0,children:f.Z.Messages.CLIPS_EDIT_VOICE_CHANNEL_AUDIO})]})]}),(0,r.jsxs)("div",{className:p().clipFormFooter,children:[(0,r.jsx)(o.zx,{color:o.zx.Colors.PRIMARY,className:p().clipFormFooterButton,children:f.Z.Messages.CLIPS_EDIT_SAVE_CLIP}),(0,r.jsx)(o.zx,{color:o.zx.Colors.BRAND,
className:p().clipFormFooterButton,onClick:function(){(0,s.ZD)(m((function(){var e,t;return g(this,(function(a){switch(a.label){case 0:return[4,Promise.all([n.e(40532),n.e(94056)]).then(n.bind(n,894056))];case 1:e=a.sent(),t=e.default;return[2,function(e){return(0,r.jsx)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){y(e,t,n[t])}))}return e}({},e))}]}}))})))},children:f.Z.Messages.CLIPS_EDIT_SHARE_CLIP})]})]})}var j=n(294184),x=n.n(j),O=n(558128),S=n(329091),P=n.n(S);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function C(e){return function(){
var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){I(o,r,a,i,u,"next",e)}function u(e){I(o,r,a,i,u,"throw",e)}i(void 0)}))}}function A(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){A(e,t,n[t])}))}return e}function k(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done);i=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e,t){var n,r,a,o,i={label:0,
sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e];r=0}finally{n=a=0}if(5&o[0])throw o[1];return{
value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function M(e,t,n,r){return Math.min(Math.max(e.start+t/n*r,0),e.end)}function R(e,t,n,r){return Math.max(Math.min(e.end+t/n*r,r),e.start)}function _(e){var t=e.sourceURL,n=e.cropData,o=e.videoPlayerRef,i=e.setCropData,u=a.useRef(null),l=D(a.useState(null),2),s=l[0],f=l[1],d=D(a.useState(),2),p=d[0],v=d[1],h=a.useRef(null);a.useEffect((function(){var e=o.current,t=h.current;if(null!=e&&null!=t){var n=function(){t.style.left="".concat(e.currentTime/e.duration*100,"%")};e.addEventListener("timeupdate",n);return function(){e.removeEventListener("timeupdate",n)}}}),[o]);var m=(0,O.Z)(),y=m.ref,b=m.width,g=void 0===b?0:b,w=m.height,j=void 0===w?0:w,S=a.useRef(null),E=a.useRef({}),I=a.useCallback((function(e){null!=s&&null!=p&&i("start"===s?function(t){return k(N({},t),{start:M(t,e.movementX,g,p)})}:"end"===s?function(t){return k(N({},t),{end:R(t,e.movementX,g,p)})}:function(t){var n=R(t,e.movementX,g,p),r=M(t,e.movementX,g,p)
;return r===t.start||n===t.end?t:{start:r,end:n}})}),[s,g,i,p]),_=a.useCallback((function(){return f(null)}),[]);a.useEffect((function(){document.addEventListener("mousemove",I);document.addEventListener("mouseup",_);return function(){document.removeEventListener("mousemove",I);document.removeEventListener("mouseup",_)}}),[I,_]);a.useEffect((function(){function e(){e=C((function(){var e,t,n,r,a,o,i,l,c,s,f,d;return L(this,(function(v){switch(v.label){case 0:t=y.current;n=u.current;if(null==t)return[2];if(null==n)return[2];if(null==p)return[2];t.height=j;t.width=g;if(null==(r=t.getContext("2d")))return[2];r.fillStyle="#000";r.fillRect(0,0,g,j);a=n.videoWidth/n.videoHeight;o=Math.ceil(j*a);i=Math.ceil(g/o);if(null==(l=S.current))return[2];l.width=o;l.height=j;if(null==(c=null==l?void 0:l.getContext("2d")))return[2];s=E.current;if((null===(e=s[i])||void 0===e?void 0:e.length)===i){for(f=0;f<i;f++)r.putImageData(s[i][f],o*f,0);return[2]}d=0;v.label=1;case 1:
return d<i?[4,new Promise((function(e){n.onseeked=function(){r.drawImage(n,o*d,0,o,j);c.drawImage(n,0,0,o,j);var t=c.getImageData(0,0,o,j);null==s[i]&&(s[i]=[]);s[i][d]=t;e()};n.currentTime=o/g*p*d}))]:[3,4];case 2:v.sent();v.label=3;case 3:d++;return[3,1];case 4:return[2]}}))}));return e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g,j,y,p,S]);return(0,r.jsxs)("div",{className:P().timeline,children:[(0,r.jsx)("canvas",{className:P().hiddenCanvas,ref:S}),(0,r.jsx)("canvas",{className:P().timelineBackground,ref:y}),(0,r.jsx)("div",{ref:h,className:P().playhead}),(0,r.jsx)(c.Z,{preload:"auto",onLoadedMetadata:function(){var e=u.current;if(null!=e){v(e.duration);0===n.end&&i((function(t){return k(N({},t),{end:e.duration})}))}},className:P().timelineVideo,ref:u,src:t,muted:!0}),(0,r.jsxs)("div",{className:P().dragBox,style:{left:null!=p?"".concat(n.start/p*100,"%"):"0",right:null!=p?"".concat((p-n.end)/p*100,"%"):"0"},onMouseDown:function(){f("center")},children:[(0,
r.jsxs)("div",{className:x()(P().dragHandleLeft,A({},P().dragging,"start"===s)),onMouseDown:function(e){e.stopPropagation();f("start")},children:[(0,r.jsx)("div",{className:P().dragHandlePip}),(0,r.jsx)("div",{className:P().dragHandlePip}),(0,r.jsx)("div",{className:P().dragHandlePip})]}),(0,r.jsxs)("div",{className:x()(P().dragHandleRight,A({},P().dragging,"end"===s)),onMouseDown:function(e){e.stopPropagation();f("end")},children:[(0,r.jsx)("div",{className:P().dragHandlePip}),(0,r.jsx)("div",{className:P().dragHandlePip}),(0,r.jsx)("div",{className:P().dragHandlePip})]})]})]})}var T=n(731106),Z=n.n(T);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){n(e);return}u.done?t(l):Promise.resolve(l).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){H(o,r,a,i,u,"next",e)}function u(e){
H(o,r,a,i,u,"throw",e)}i(void 0)}))}}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done);i=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;a=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]
},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e];r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function G(e){
var t=e.clip,n=e.transitionState,c=e.onClose,s=U(a.useState(null),2),d=s[0],p=s[1];a.useEffect((function(){function e(){return(e=B((function(){var e;return z(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,u.Z.clips.loadClip(t.filepath)];case 1:e=n.sent();return[3,3];case 2:n.sent();c();i.Z.show({title:f.Z.Messages.CLIPS_LOAD_ERROR_TITLE,body:f.Z.Messages.CLIPS_LOAD_ERROR_BODY});return[2];case 3:p(e.data);return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.filepath,c]);return(0,r.jsx)(l.Y0,{size:l.Cg.DYNAMIC,className:Z().modalRoot,transitionState:n,children:(0,r.jsx)(l.hz,{className:Z().modalContent,children:null!=d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{clip:t,data:d}),(0,r.jsx)(w,{clip:t})]}):(0,r.jsx)(o.$j,{})})})}function V(e){var t,n,o,i,u=e.data,l=e.clip,s=a.useRef(null),f=U(a.useState({start:null!==(o=null===(t=l.editMetadata)||void 0===t?void 0:t.start)&&void 0!==o?o:0,
end:null!==(i=null===(n=l.editMetadata)||void 0===n?void 0:n.end)&&void 0!==i?i:0}),2),d=f[0],p=f[1],v=a.useMemo((function(){var e=new Blob([u]);return URL.createObjectURL(e)}),[u]);a.useEffect((function(){var e=s.current;null!=e&&(e.currentTime=d.start)}),[d]);a.useEffect((function(){var e=s.current;if(null!=e){var t=function(){e.currentTime>=d.end&&(e.currentTime=d.start)};e.addEventListener("timeupdate",t);return function(){return e.removeEventListener("timeupdate",t)}}}),[d]);return(0,r.jsxs)("div",{className:Z().editorPane,children:[(0,r.jsx)("div",{className:Z().videoSizer,children:(0,r.jsx)(c.Z,{onClick:function(){var e,t,n;return(null===(e=s.current)||void 0===e?void 0:e.paused)?null===(t=s.current)||void 0===t?void 0:t.play():null===(n=s.current)||void 0===n?void 0:n.pause()},className:Z().displayVideo,ref:s,src:v})}),(0,r.jsx)(_,{videoPlayerRef:s,cropData:d,setCropData:p,sourceURL:v})]})}}}]);
//# sourceMappingURL=9143ad244b4cecf58f4f.js.map