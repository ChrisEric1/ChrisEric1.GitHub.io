"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[88110],{919244:(e,t,r)=>{r.d(t,{Z:()=>O});var n=r(785893),o=r(667294),l=r(294184),s=r.n(l),a=r(945460),c=r(473708),i=r(775823),u=r.n(i);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function f(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(r,e);var t=y(r);function r(){d(this,r);var e;(e=t.apply(this,arguments)).state={code:"",errorMessage:"",retrySuccess:!1};e.setRef=function(t){e._input=t};e.getLabelText=function(){var t;return null!==(t=e.props.label)&&void 0!==t?t:e.props.disallowBackupCodes?c.Z.Messages.TWO_FA_ENTER_TOKEN_NO_BACKUP_LABEL:c.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL};e.getSupportedCodeTypes=function(){return e.props.disallowBackupCodes?c.Z.Messages.TWO_FA_AUTH_CODE_NO_BACKUP:c.Z.Messages.TWO_FA_AUTH_CODE}
;e.getPlaceholder=function(){return e.props.forceNoPlaceholder?null:null!==(t=e.props.placeholder)&&void 0!==t?t:e.getSupportedCodeTypes();var t};e.errorPresent=function(){return null!=e.props.error&&""!==e.props.error||null!=e.state.errorMessage&&""!==e.state.errorMessage};e.handleRetry=function(){var t=e.props.onRetry;null==t||t().then((function(){return e.setState({retrySuccess:!0})}))};e.handleSubmit=function(t){t.preventDefault();var r=e.props,n=r.handleSubmit,o=r.onError;n(e.state.code).catch((function(t){if(null!=t.body){null==o||o(t.body);t.body.message&&e.setState({errorMessage:t.body.message})}}))};e.handleCancel=function(){var t=e.props,r=t.onClose,n=t.handleEarlyClose;r();null==n||n()};e.handleCodeChange=function(t){e.setState({code:t})};return e}r.prototype.render=function(){
var e,t=this.props,r=t.title,l=t.actionText,i=t.children,d=t.error,p=t.isLoading,f=t.maxLength,h=t.transitionState,b=t.helpMessage,y=t.retryPrompt,m=t.retrySuccessMessage,O=this.state,g=O.code,v=O.errorMessage,j=O.retrySuccess,C=o.Children.count(i)>0?(0,n.jsx)(a.Card,{type:a.Card.Types.WARNING,className:u().card,children:(0,n.jsx)(a.Text,{variant:"text-md/normal",children:i})}):null,x=null!=y?(0,n.jsxs)(a.Text,{className:s()(u().submitText,u().spacing),variant:"text-sm/normal",children:[(0,n.jsx)("br",{}),(0,n.jsx)(a.Clickable,{className:s()(u().spacing,u().link),onClick:this.handleRetry,children:(0,n.jsx)(a.Anchor,{children:y})})]}):null,P=j?(0,n.jsx)(a.Card,{type:a.Card.Types.SUCCESS,className:u().card,children:(0,n.jsx)(a.Text,{variant:"text-md/normal",children:m})}):null;return(0,n.jsx)(a.ModalRoot,{transitionState:h,children:(0,n.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,n.jsx)(a.ModalHeader,{separator:!1,children:(0,n.jsx)(a.Heading,{variant:"heading-lg/semibold",
children:r})}),(0,n.jsxs)(a.ModalContent,{children:[null!=b?(0,n.jsx)(a.Text,{color:"text-normal",variant:"text-md/normal",className:u().spacing,children:b}):null,C,P,(0,n.jsxs)(a.FormItem,{title:this.getLabelText(),className:u().spacing,children:[(0,n.jsx)(a.TextInput,{inputRef:this.setRef,onChange:this.handleCodeChange,placeholder:null!==(e=this.getPlaceholder())&&void 0!==e?e:void 0,maxLength:null!=f?f:10,value:g,autoComplete:"one-time-code",autoFocus:!0}),this.errorPresent()?(0,n.jsx)(a.Text,{color:"text-danger",variant:"text-xs/normal",className:u().error,children:null!=d?d:v}):null,x]})]}),(0,n.jsxs)(a.ModalFooter,{children:[(0,n.jsx)(a.Button,{type:"submit",disabled:p||0===g.length,children:null!=l?l:c.Z.Messages.CONFIRM}),(0,n.jsx)(a.Button,{onClick:this.handleCancel,disabled:p,look:a.Button.Looks.LINK,color:a.Button.Colors.PRIMARY,children:c.Z.Messages.CANCEL})]})]})})};return r}(o.PureComponent);m.defaultProps={btnClass:"",isLoading:!1,disallowBackupCodes:!1,error:null,
forceNoPlaceholder:!1};const O=m},488110:(e,t,r)=>{r.d(t,{Z:()=>y,O:()=>h});var n=r(473903),o=r(496486),l=function(e){return"function"==typeof e?e():e};r.n(o)().curry((function(e,t,r){return l(t)?e(r):r({})}));function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){s(e,t,r[t])}))}return e}function c(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}
return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++){r=l[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++){r=l[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}var u,d,p=function(){throw new Error("updateModal has not been implemented.")},f=r(680918);u=f.showModal;p=f.updateModalProps;d=r(264817).Mr;function h(e){var t=e.promiseFn,r=e.resolve,n=e.reject,o=e.modalProps,l=void 0===o?{}:o,s=e.hooks,i=(void 0===s?{}:s).onEarlyClose,f=function(){null==i||i()},h=function(e){d(O);r(e)},y=function(e){d(O);n(e)},m=function(e){var t=e.res;p(O,g,f,c(a({},l),{error:t.body.message}))};if(null!=u)var O=u(g,f,l);else null==i||i();function g(e){p(O,g,f,c(a({},l),{
isLoading:!0}));return b({promiseFn:t,resolve:h,reject:y,code:e,mfaCodeHandler:m,isModalOpen:!0})}}function b(e){var t=e.promiseFn,r=e.resolve,n=e.reject,o=e.code,l=e.mfaCodeHandler,s=void 0===l?h:l,c=e.isModalOpen,u=void 0!==c&&c,d=i(e,["promiseFn","resolve","reject","code","mfaCodeHandler","isModalOpen"]);return t(null!=o?{code:o}:{}).then(r,(function(e){if(function(e,t){return e.body&&60008===e.body.code||t&&429===e.status}(e,u))return s(a({promiseFn:t,resolve:r,reject:n,res:e},d));n(e)}))}function y(e,t){var r,o,s=null!=t?t:{},c=s.checkEnabled,u=void 0===c?null!==(o=null===(r=n.default.getCurrentUser())||void 0===r?void 0:r.mfaEnabled)&&void 0!==o&&o:c,d=i(s,["checkEnabled"]);return new Promise((function(t,r){(l(u)?h:b)(a({promiseFn:e,resolve:t,reject:r},d))}))}},680918:(e,t,r)=>{r.r(t);r.d(t,{showModal:()=>c,updateModalProps:()=>i});var n=r(785893),o=(r(667294),r(264817)),l=r(919244);function s(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,
writable:!0}):e[t]=r;return e}var a=function(e,t,r){return function(o){return(0,n.jsx)(l.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){s(e,t,r[t])}))}return e}({handleSubmit:e,handleEarlyClose:t},r,o))}};function c(e,t,r){return(0,o.h7)(a(e,t,r),{onCloseCallback:t})}function i(e,t,r,n){return(0,o.o)(e,a(t,r,n))}}}]);
//# sourceMappingURL=133690c1dd69e59f2d25.js.map