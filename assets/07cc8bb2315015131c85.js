"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[41098],{741098:(e,t,n)=>{n.r(t);n.d(t,{default:()=>k});var r=n(785893),i=n(667294),u=n(441143),o=n.n(u),l=n(945460),a=n(454011),s=n(703790),c=n(567403),d=n(223430),f=n(443812),p=n(202351),I=n(821229),S=n(682776),b=n(142926),h=n(2590),g=n(473708);const G={title:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTION_WELCOME_TITLE},description:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_DEEPLINK_MODAL_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,p.e7)([I.Z,S.Z],(function(){return function(e){return e.hasFeature(h.oNc.ROLE_SUBSCRIPTIONS_ENABLED)&&!e.hasFeature(h.oNc.CREATOR_MONETIZABLE_RESTRICTED)&&S.Z.can(h.Plq.ADMINISTRATOR,e)&&(0,b.$F)()&&(0,b.hQ)(e.id)}}),[])}};var v=n(683323);const E={title:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_TITLE},description:function(){
return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_FINISH_SETTING_UP_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,p.e7)([v.Z],(function(){return function(e){return v.Z.getEligibleGuildsForNagActivate().includes(e.id)}}),[])}};var y=n(603927),C=n(824926),m=n(401598);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,u=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){u.push(r.value);if(t&&u.length===t)break}}catch(e){l=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R={"server-subscriptions-onboarding":{title:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_TITLE},description:function(){return g.Z.Messages.GUILD_ROLE_SUBSCRIPTIONS_ONBOARDING_DESCRIPTION},canCreateGuild:!1,useIsGuildSupported:function(){return(0,p.e7)([I.Z],(function(){return function(e,t){return e.isOwner(t)&&(0,m.X$)({guild:e,isOwner:!0,canManageGuildRoleSubscriptions:!0,isMonetizationWaitlistEnabledForGuild:(0,y.mG)(e.id),isGuildEligibleForRoleSubscriptions:(0,b.kT)(e.id),isExpeditedMonetizationOnboardingGuild:(0,y.Rw)(e),
isUserInCreatorMonetizationEligibleCountry:(0,y.DB)(),shouldRestrictUpdatingRoleSubscriptionSettings:(0,C.n9)(e.id)})}}),[],p.pF)}},"server-subscriptions-finish-setting-up":E,"server-subscriptions-create-tier-from-template":G},N={title:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_TITLE},description:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_DESCRIPTION},selectGuildCta:function(){return g.Z.Messages.GET_STARTED},createGuildDescription:function(){return g.Z.Messages.GUILD_SETTINGS_PICKER_DEFAULT_CREATE_DESCRIPTION},createGuildCta:function(){return g.Z.Messages.CREATE_SERVER_BUTTON_CTA},canCreateGuild:!0,useIsGuildSupported:function(){return(0,p.e7)([S.Z],(function(){return function(e){return S.Z.canAccessGuildSettings(e)}}),[],p.pF)}};function D(e){var t,n=O(i.useState(null==e?void 0:R[e]),1)[0],r=N.useIsGuildSupported(),u=null==n||null===(t=n.useIsGuildSupported)||void 0===t?void 0:t.call(n),o=function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}({},N,null!=n?n:{});return{title:o.title(),description:o.description(),selectGuildCta:o.selectGuildCta(),createGuildDescription:o.createGuildDescription(),createGuildCta:o.createGuildCta(),canCreateGuild:o.canCreateGuild,isGuildSupported:function(e,t){return r(e,t)&&!1!==(null==u?void 0:u(e,t))}}}var Z=n(107218),L=n(473903);var A=n(775946),w=n.n(A);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,i,u,o){try{var l=e[u](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,u=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){u.push(r.value);if(t&&u.length===t)break}}catch(e){l=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e,t){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){
return this}),u;function l(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;(r=0,i)&&(u=[2&u[0],i.value]);switch(u[0]){case 0:case 1:i=u;break;case 4:o.label++;return{value:u[1],done:!1};case 5:o.label++;r=u[1];u=[0];continue;case 7:u=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1];i=u;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(u);break}i[2]&&o.ops.pop();o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e];r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}};function U(e){var t=e.className,n=e.guildId,u=e.onChange,a=function(e){var t=e.isGuildIncluded,n=e.selectedGuildId,r=(0,
p.e7)([Z.Z],(function(){return Z.Z.getFlattenedGuildIds()})),u=(0,p.e7)([c.Z],(function(){return c.Z.getGuilds()})),l=(0,p.e7)([L.default],(function(){return L.default.getCurrentUser()}));return{options:i.useMemo((function(){return null==l?[]:(null==t?r:r.filter((function(e){var n=u[e];o()(null!=n,"guild should not be null");return t(n,l)}))).map((function(e){var t=u[e];o()(null!=t,"guild should not be null");return{label:t.name,value:t.id}}))}),[r,u,l,t]),selectedGuild:null==n?void 0:u[n]}}({isGuildIncluded:e.isGuildIncluded}).options;return(0,r.jsx)(l.SearchableSelect,{className:t,onChange:u,value:n,options:a,placeholder:g.Z.Messages.GUILD_SELECT})}function B(e){return new Promise((function(t){c.Z.addChangeListener((function n(){if(null!=c.Z.getGuild(e)){c.Z.removeChangeListener(n);t()}}))}))}function k(e){var t,n,u=e.transitionState,c=e.onClose,p=e.feature,I=e.section,S=e.subsection,b=(0,
f.Dt)(),h=D(p),g=h.canCreateGuild,G=h.createGuildCta,v=h.createGuildDescription,E=h.selectGuildCta,y=h.title,C=h.description,m=h.isGuildSupported,T=x(i.useState(),2),_=T[0],O=T[1],R=x(i.useState(!1),2),N=R[0],Z=R[1],L=(n=(t=function(){var e;return P(this,(function(t){switch(t.label){case 0:Z(!0);return[4,new Promise((function(e){a.Z.openCreateGuildModal({onSuccess:e})}))];case 1:return[4,B(e=t.sent())];case 2:t.sent();s.Z.open(e,I,void 0,S);null==c||c();return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,i){var u=t.apply(e,n);function o(e){j(u,r,i,o,l,"next",e)}function l(e){j(u,r,i,o,l,"throw",e)}o(void 0)}))}),function(){return n.apply(this,arguments)});return(0,r.jsxs)(l.ModalRoot,{transitionState:u,"aria-labelledby":b,children:[(0,r.jsxs)(l.ModalHeader,{className:w().modalHeader,separator:!1,children:[(0,r.jsx)(l.Heading,{id:b,variant:"heading-lg/medium",children:y}),(0,r.jsx)(l.ModalCloseButton,{onClick:c})]}),(0,r.jsxs)(l.ModalContent,{
className:w().modalContent,children:[(0,r.jsx)(l.Text,{variant:"text-md/medium",children:C}),(0,r.jsx)(d.Z,{size:16}),(0,r.jsxs)("div",{className:w().guildSelection,children:[(0,r.jsx)("div",{className:w().guildSelectorContainer,children:(0,r.jsx)(U,{guildId:_,onChange:O,isGuildIncluded:m})}),(0,r.jsx)(l.Button,{onClick:function(){o()(null!=_,"Guild ID must not be null on click");s.Z.open(_,I,void 0,S);null==c||c()},disabled:null==_,children:E})]}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{size:32}),(0,r.jsx)(l.Text,{variant:"text-md/medium",children:v}),(0,r.jsx)(d.Z,{size:8}),(0,r.jsx)(l.Button,{onClick:L,submitting:N,children:G})]})]})]})}}}]);
//# sourceMappingURL=07cc8bb2315015131c85.js.map