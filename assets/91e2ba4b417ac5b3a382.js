"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66767],{366767:(e,t,n)=>{n.r(t);n.d(t,{default:()=>G});var r=n(785893),o=n(667294),a=n(441143),s=n.n(a),i=n(363010),l=n(331535),u=n(152163),c=n(239396),f=n(902397),S=n(409271),p=n(651972),m=n(859023),d=n(629858),h=n(761434),O=n(523283),T=n(67416),j=n(71531),g=n(932847),y=n(964199),v=n(730381),b=n.n(v),C=36e5,_=Object.freeze({MINUTES_30:18e5,HOURS_1:1*C,HOURS_4:4*C,TODAY:"TODAY"});function A(e){if(e===_.TODAY){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime()-t.getTime()}s()("number"==typeof e,"Invalid custom status clear timeout");return e}var x=n(461061);function M(e){return null==e?null:null!=e.id?"custom":"unicode"}function U(e,t,n,r){var o=e.trim();if(o.length>0||null!=t){S.Ok.updateSetting({text:o.length>0?o:"",expiresAtMs:null!=n?String(b()().add(A(n),"ms").toDate().getTime()):"0",emojiId:null!=t&&null!=t.id?t.id:"0",emojiName:null!=t?t.name:""})
;g.default.track(x.rMx.CUSTOM_STATUS_UPDATED,{location:null!=r?r.location:null,emoji_type:M(t),text_len:o.length,clear_after:null!=n?"".concat(n):null})}else S.Ok.updateSetting(void 0)}var N=n(959797),k=n(739788),E=n.n(k);function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function D(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e){L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return L(e)}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){D(e,t,n[t])}))}return e}function w(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function R(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e,t){B=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return B(e,t)}var z=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Y(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function H(){var e=S.Ok.getSetting();return null!=e&&"0"!==e.expiresAtMs?null:_.TODAY}function F(e){return(0,r.jsxs)("div",{className:E().statusOptionItem,children:[(0,r.jsx)(j.qb,{status:e.value,size:10,className:E().statusIcon}),e.label]})}var K=[{key:1,value:j.Sk.ONLINE,label:(0,y.u5)(j.Sk.ONLINE)},{key:2,value:j.Sk.IDLE,label:(0,y.u5)(j.Sk.IDLE)},{key:3,value:j.Sk.DND,label:(0,y.u5)(j.Sk.DND)},{key:4,value:j.Sk.INVISIBLE,label:(0,y.u5)(j.Sk.INVISIBLE)}];function V(){var e=S.co.getSetting();return K.some((function(t){return t.value===e}))?e:j.Sk.ONLINE}var q=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&B(e,t)}(n,e);var t=Y(n);function n(){I(this,n);var e;(e=t.apply(this,arguments)).state={emojiInfo:null!=e.props.customStatus?e.props.customStatus.emoji:null,text:null!=e.props.customStatus&&null!=e.props.customStatus.state?e.props.customStatus.state:"",clearAfter:H(),status:V()};e.handleClearStatus=function(){e.setState({emojiInfo:null,text:""})};e.handleSubmit=function(t){t.preventDefault();e.handleSaveStatus()};e.handleStatusChange=function(t){e.setState({text:t})};e.handleEmojiChange=function(t){if(null!=t){var n=null!=t.id?{id:t.id,name:t.name,animated:t.animated}:{id:null,name:t.optionallyDiverseSequence,animated:!1};e.setState({emojiInfo:n})}};e.handleChangeClearAfter=function(t){e.setState({clearAfter:t})};e.handleChangeStatus=function(t){e.setState({status:t})}
;e.handleSaveStatus=function(){var t=e.props,n=t.sourceAnalyticsContext,r=t.onClose,o=e.state,a=o.emojiInfo,s=o.text,i=o.clearAfter,l=o.status;S.co.updateSetting(l);U(s,a,i,n);r()};e.handleKeyPress=function(t){t.which===x.yXg.ENTER&&e.handleSaveStatus()};e.renderEmojiPicker=function(t){var n=t.closePopout,o=e.props.onClose;return(0,r.jsx)(f.Z,{closePopout:n,onSelectEmoji:function(t,r){e.handleEmojiChange(t);r&&n()},pickerIntention:x.HzX.STATUS,onNavigateAway:o})};return e}var o=n.prototype;o.componentDidMount=function(){var e=this.props.sourceAnalyticsContext;g.default.track(x.rMx.OPEN_MODAL,{source:e.location,type:x.jXE.CUSTOM_STATUS_MODAL,load_id:e.loadId})};o.getEmojiButtonRenderer=function(){var e=this.state.emojiInfo;return null==e?null:function(){return(0,r.jsx)(u.Z,{className:E().emoji,emojiId:e.id,emojiName:e.name,animated:Boolean(e.animated)})}};o.renderCustomStatusInput=function(){var e=this,t=this.props.user,n=this.state,o=n.text,a=n.emojiInfo;return(0,r.jsx)(l.hj,{
className:E().formGroup,title:N.Z.Messages.CUSTOM_STATUS_MODAL_BODY.format({username:t.username}),children:(0,r.jsxs)("div",{className:E().inputContainer,children:[(0,r.jsx)("div",{className:E().emojiButtonContainer,children:(0,r.jsx)(h.ZP,{renderPopout:this.renderEmojiPicker,position:h.ZP.Positions.LEFT,animation:h.ZP.Animation.NONE,align:h.ZP.Align.BOTTOM,children:function(t,n){var o=n.isShown;return(0,r.jsx)(d.Z,w(Z({},t),{active:o,className:E().emojiButton,tabIndex:0,renderButtonContents:e.getEmojiButtonRenderer()}))}})}),(0,r.jsx)(l.oi,{maxLength:128,value:o,inputClassName:E().input,placeholder:N.Z.Messages.CUSTOM_STATUS_MODAL_PLACEHOLDER,onChange:this.handleStatusChange,onKeyPress:this.handleKeyPress,autoFocus:!0}),o.length>0||null!=a?(0,r.jsx)(l.zx,{focusProps:{offset:{top:8,bottom:8,left:-2,right:-2}},className:E().clearButton,onClick:this.handleClearStatus,look:l.zx.Looks.BLANK,size:l.zx.Sizes.NONE,children:(0,r.jsx)(O.Z,{className:E().clearIcon})}):null]})})}
;o.renderClearAfter=function(){var e=this.state.clearAfter;return(0,r.jsx)(l.hj,{className:E().formGroup,title:N.Z.Messages.CUSTOM_STATUS_CLEAR_AFTER,children:(0,r.jsx)(l.q4,{placeholder:N.Z.Messages.CUSTOM_STATUS_CLEAR_AFTER,maxVisibleItems:5,value:e,options:this.clearAfterOptions,onChange:this.handleChangeClearAfter})})};o.renderStatusInput=function(){var e=this.state.status;return(0,r.jsx)(l.hj,{className:E().formGroup,title:N.Z.Messages.CUSTOM_STATUS_STATUS_TITLE,children:(0,r.jsx)(l.q4,{maxVisibleItems:4,value:e,options:K,onChange:this.handleChangeStatus,renderOptionLabel:F})})};o.render=function(){var e=this.props,t=e.transitionState,n=e.onClose;return(0,r.jsx)(c.Z,w(Z({},this.analyticsLocation),{children:(0,r.jsxs)(T.Y0,{transitionState:t,className:E().modalRoot,"aria-label":N.Z.Messages.CUSTOM_STATUS_SET_CUSTOM_STATUS,children:[(0,r.jsxs)(T.xB,{separator:!1,className:E().headerContainer,children:[(0,r.jsx)("div",{className:E().art}),(0,r.jsx)("div",{className:E().header,
children:(0,r.jsx)(l.H,{className:E().headerText,children:N.Z.Messages.CUSTOM_STATUS_SET_CUSTOM_STATUS})}),(0,r.jsx)(T.ol,{onClick:n,className:E().modalCloseButton})]}),(0,r.jsxs)(T.hz,{children:[this.renderCustomStatusInput(),this.renderClearAfter(),(0,r.jsx)(l.$i,{className:E().formDivider}),this.renderStatusInput()]}),(0,r.jsxs)(T.mz,{children:[(0,r.jsx)(l.zx,{onClick:this.handleSubmit,children:N.Z.Messages.SAVE}),(0,r.jsx)(l.zx,{onClick:n,look:l.zx.Looks.LINK,color:E().cancelButton,children:N.Z.Messages.CANCEL})]})]})}))};!function(e,t,n){t&&P(e.prototype,t);n&&P(e,n)}(n,[{key:"clearAfterOptions",get:function(){return[{key:1,value:_.TODAY,label:N.Z.Messages.CUSTOM_STATUS_TODAY},{key:2,value:_.HOURS_4,label:N.Z.Messages.CUSTOM_STATUS_HOURS.format({hours:4})},{key:3,value:_.HOURS_1,label:N.Z.Messages.CUSTOM_STATUS_HOURS.format({hours:1})},{key:4,value:_.MINUTES_30,label:N.Z.Messages.CUSTOM_STATUS_MINUTES.format({minutes:30})},{key:5,value:null,
label:N.Z.Messages.CUSTOM_STATUS_DONT_CLEAR}]}},{key:"analyticsLocation",get:function(){return{page:x.ZY5.CUSTOM_STATUS_MODAL}}}]);return n}(o.PureComponent);const G=i.ZP.connectStores([p.Z,m.default],(function(){var e=m.default.getCurrentUser();s()(null!=e,"CustomStatusModal: user cannot be null");return{customStatus:p.Z.getCustomStatusActivity(),user:e}}),{forwardRef:!0})(q)}}]);
//# sourceMappingURL=91e2ba4b417ac5b3a382.js.map