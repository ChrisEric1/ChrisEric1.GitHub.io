(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[46208,70949],{637849:(e,t,n)=>{e.exports=n.p+"62fc691d2860dbf7dea5582aba20f051.svg"},837307:(e,t,n)=>{e.exports=n.p+"0ee88820de68e9856408ac765a57198d.svg"},697694:(e,t,n)=>{e.exports=n.p+"87f8416faec0691b96525d0bb3027809.svg"},709989:(e,t,n)=>{e.exports=n.p+"e878f2c37767692b3936e707df01c1a4.svg"},955568:(e,t,n)=>{e.exports=n.p+"bf852fd03dee12cf7ba1392884138f27.svg"},230978:(e,t,n)=>{e.exports=n.p+"21c1c5faf97abcc71bf3bde30e57bf14.svg"},182765:(e,t,n)=>{e.exports=n.p+"092b071c3b3141a58787415450c27857.png"},100539:(e,t,n)=>{e.exports=n.p+"17192d3fe939ecf404e8cdd64b340469.svg"},639915:(e,t,n)=>{e.exports=n.p+"1a06a76c7ea3e0facf0d6635e10c5898.svg"},143613:(e,t,n)=>{e.exports=n.p+"ab4f6c12a1ced9de8b5d279056f21334.svg"},819361:(e,t,n)=>{e.exports=n.p+"14271875289ea86971326d281f681a64.svg"},882253:(e,t,n)=>{e.exports=n.p+"0eeb095cd923afdf420687347dc673ff.svg"},154637:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f})
;var r=n(506884),o=n(856864),i=n(173436),a=n(666492),s=n(461061);function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}var l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:
i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const f={signup:function(e,t){return a.Z.post({url:s.ANM.HUB_WAITLIST_SIGNUP,body:{email:e,school:t},trackedActionData:{event:r.a9.HUB_WAITLIST_SIGNUP,properties:function(e){var t,n=!1,r=null==e||null===(t=e.body)||void 0===t?void 0:t.email_domain;if(null!=r){n=-1!==r.split(".").indexOf("edu")}return(0,o.iG)({is_edu_email:n})}}})},sendVerificationEmail:function(e,t,n){return u((function(){return l(this,(function(i){switch(i.label){case 0:return[4,a.Z.post({url:s.ANM.HUB_EMAIL_VERIFY_SEND,body:{email:e,guild_id:n,allow_multiple_guilds:t,
use_verification_code:!0},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY_SEND,properties:function(e){var t,n=null==e||null===(t=e.body)||void 0===t?void 0:t.has_matching_guild;return(0,o.iG)({has_matching_guild:n})}}})];case 1:return[2,i.sent().body]}}))}))()},verify:function(e){return u((function(){var t,n,o,c;return l(this,(function(u){switch(u.label){case 0:if(null==e)return[3,4];u.label=1;case 1:u.trys.push([1,3,,4]);return[4,a.Z.post({url:s.ANM.HUB_EMAIL_VERIFY,body:{token:e},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY}})];case 2:n=u.sent();o=null===(t=n.body.guild)||void 0===t?void 0:t.id;i.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:o});return[3,4];case 3:c=u.sent();i.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:c.body});return[3,4];case 4:return[2]}}))}))()},verifyCode:function(e,t,n){return u((function(){var o,c,u,f;return l(this,(function(l){switch(l.label){case 0:if(null==e)return[3,4];l.label=1;case 1:l.trys.push([1,3,,4]);return[4,a.Z.post({
url:s.ANM.HUB_EMAIL_VERIFY_CODE,body:{code:e,guild_id:t,email:n},trackedActionData:{event:r.a9.HUB_EMAIL_VERIFY}})];case 2:c=l.sent();u=null===(o=c.body.guild)||void 0===o?void 0:o.id;i.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:u});return[2,c.body];case 3:f=l.sent();i.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:f.body});throw f;case 4:return[2]}}))}))()}}},450700:(e,t,n)=>{"use strict";n.d(t,{b8:()=>f,GR:()=>d,ul:()=>y});var r=n(675860),o=n(173436),i=n(88051),a=n(935406),s=n(461061);function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}var l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function f(){return p.apply(this,arguments)}function p(){return(p=u((function(){
var e,t;return l(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,(0,a.Kb)({url:s.ANM.LIBRARY,oldFormErrors:!0},!1)];case 1:e=n.sent();o.Z.dispatch({type:"LIBRARY_FETCH_SUCCESS",libraryApplications:e.body});return[3,3];case 2:t=n.sent();o.Z.dispatch({type:"LIBRARY_FETCH_FAIL",error:t});return[3,3];case 3:return[2]}}))}))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=u((function(e){var t,n,a;return l(this,(function(c){switch(c.label){case 0:return null==(t=e.primarySkuId)?[2]:[4,r.Z.get({url:s.ANM.APPLICATION_BRANCH_LIST(e.id),oldFormErrors:!0}).then((function(e){return e.body}))];case 1:n=c.sent();a=n.map((function(n){return i.Z.createForTestMode({id:e.id,skuId:t,branch:n})}));o.Z.dispatch({type:"LIBRARY_APPLICATIONS_TEST_MODE_ENABLED",libraryApplications:a});return[2]}}))}))).apply(this,arguments)}function y(e,t,n){o.Z.dispatch({type:"LIBRARY_APPLICATION_ACTIVE_LAUNCH_OPTION_UPDATE",applicationId:e,branchId:t,
launchOptionId:n})}},401246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(785893),o=n(667294),i=n(101653),a=n(163585),s=n.n(a);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&y(e,t)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){u(e,t,n[t])}))}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var g=n(182765),b=function(e){f(n,e);var t=v(n);function n(){c(this,n);return t.apply(this,arguments)}n.prototype.render=function(){var e=this.props,t=e.className,n=e.text,o=d(e,["className","text"]);return(0,r.jsx)("div",{style:{padding:8,borderRadius:4,width:o.size,height:o.size,backgroundColor:o.bgColor},className:t,children:(0,r.jsx)(i.Z,p({value:n,level:"M"},o))})};return n}(o.PureComponent);b.defaultProps={size:128,bgColor:"#ffffff",fgColor:"#000000"};(function(e){f(n,e);var t=v(n);function n(){c(this,n);return t.apply(this,arguments)}n.prototype.render=function(){return(0,r.jsxs)("div",{className:s().qrCodeContainer,children:[(0,r.jsx)(b,p({},this.props)),(0,r.jsx)("div",{className:s().qrCodeOverlay,children:(0,r.jsx)("img",{
src:g,alt:""})})]})};return n}(o.PureComponent)).defaultProps={size:144,bgColor:"#ffffff",fgColor:"#000000"};const _=b},596801:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>yi});var r=n(785893),o=n(667294),i=n(517563),a=n(506884),s=n(606076),c=n(363010),u=n(173436),l=n(822567),f=n(981171),p=n(671018),d=n(675860),h=n(476575),y=n(584268),m=n(737949),v=n(932847),g=n(245189),b=n(461061);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return E(e)}function O(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){I=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return I(e,t)}var N=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}
;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function S(e,t){v.default.track(b.rMx.BROWSER_HANDOFF_SUCCEEDED,{authenticated:e,handoff_source:t})}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&I(e,t)}(n,e);var t=T(n);function n(){_(this,n);var e;(e=t.apply(this,arguments)).handleEnd=function(t){var n=t.handoffToken,r=t.fingerprint,o=m.Z.key;if(null!=o&&m.Z.isHandoffAvailable())e.handleHandoff({handoffKey:o,handoffToken:n,
fingerprint:r,handoffSource:void 0});else{l.Z.setFingerprint(null);(0,h.by)()}};return e}var r=n.prototype;r._initialize=function(){u.Z.subscribe("BROWSER_HANDOFF_END",this.handleEnd);u.Z.subscribe("BROWSER_HANDOFF_FROM_APP",this.handleHandoff)};r._terminate=function(){u.Z.unsubscribe("BROWSER_HANDOFF_END",this.handleEnd);u.Z.unsubscribe("BROWSER_HANDOFF_FROM_APP",this.handleHandoff)};r.handleHandoff=function(e){var t=e.handoffKey,n=e.handoffToken,r=e.fingerprint,o=e.handoffSource;if(null!=n)d.Z.post({url:b.ANM.HANDOFF_EXCHANGE,body:{key:t,handoff_token:n}}).then((function(e){var t=e.body;(0,h.Vb)(t.user);l.Z.loginToken(t.token,!1);S(!0,o)}),(function(e){null!=r&&S(!1,o);l.Z.setFingerprint(r);(0,h.lx)();if(o===y.F.ROLE_SUBSCRIPTION){var t;v.default.track(b.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:null!==(t=e.message)&&void 0!==t?t:e.text,handoff_source:o})}}));else if(null!=r){l.Z.setFingerprint(r);S(!1,o);(0,h.lx)()}else{l.Z.setFingerprint(r);(0,h.by)()}};r.__getLocalVars=function(){
return{}};return n}(g.Z);const x=new A;var j=n(725749);function C(e){u.Z.dispatch({type:"AUTH_INVITE_UPDATE",invite:e})}var P=n(324954),R=n(989232),w=n(18700),Z=n(908570),D=n(512717),M=n(959797),L=n(380203),k=n.n(L);function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e){G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return G(e)}function B(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e,t){F=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return F(e,t)}var H=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}c.ZP.initialize();var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&F(e,t)}(o,e);var t=V(o);function o(){U(this,o);var e;(e=t.apply(this,arguments)).state={busy:!0,success:!1,guild:null};return e}var a=o.prototype;a.componentDidMount=function(){var e=this,t=(0,D.Z)(this.props.location),n=(0,i.parse)(this.props.location.search);d.Z.post({url:b.ANM.DISABLE_SERVER_HIGHLIGHT_NOTIFICATIONS,body:{token:t,pixel_uuid:n.hash,guild_id:n.guild_id},oldFormErrors:!0}).then((function(t){var n=t.body.guild,r=new R.Z(n);e.setState({success:!0,busy:!1,guild:r})
}),(function(){return e.setState({success:!1,busy:!1})}));(0,P.e)("disable_server_highlight_notifications")};a.renderBusy=function(){return(0,r.jsx)(Z.ZP,{children:(0,r.jsx)(Z.Hh,{})})};a.renderSuccess=function(){var e=this.props,t=e.defaultRoute,n=e.transitionTo,o=this.state.guild;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.SERVER_HIGHLIGHT_UNSUBSCRIBE_HEADER}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.SERVER_HIGHLIGHT_UNSUBSCRIBE_BODY.format({guildName:o.name})}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return n(t)},children:M.Z.Messages.CONTINUE_TO_WEBAPP}),(0,r.jsx)(Z.zx,{className:k().marginTop8,color:Z.zx.Colors.LINK,look:Z.zx.Looks.LINK,onClick:function(){n(b.Z5c.USER_GUILD_NOTIFICATION_SETTINGS(o.id))},children:M.Z.Messages.SERVER_HIGHLIGHT_MANAGE_SETTINGS})]})};a.renderError=function(){var e=this.props,t=e.defaultRoute,o=e.transitionTo;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(709989),
className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_HEADER}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_BODY}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return o(t)},children:M.Z.Messages.CONTINUE_TO_WEBAPP})]})};a.render=function(){var e=this.state,t=e.busy,n=e.success;return t?this.renderBusy():n?this.renderSuccess():this.renderError()};return o}(o.PureComponent);K.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const z=c.ZP.connectStores([w.Z],(function(){return{defaultRoute:w.Z.defaultRoute}}))(K);var W=n(294184),Y=n.n(W),q=n(828917),X=n(190335),J=n(614503),Q=n(363419),$=n(449953),ee=n(330665),te=n(3066),ne=n.n(te);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}
s.done?t(c):Promise.resolve(c).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){oe(i,r,o,a,s,"next",e)}function s(e){oe(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var se=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){
a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const ce=function(){var e,t=ae(o.useState(""),2),i=t[0],a=t[1],s=ae(o.useState(""),2),u=s[0],l=s[1],f=ae(o.useState(!1),2),p=f[0],d=f[1],h=ae(o.useState(!1),2),y=h[0],m=h[1],v=ae(o.useState(null),2),g=v[0],b=v[1],_=ae(o.useState(null),2),E=_[0],O=_[1],I=(0,c.e7)([J.Z],(function(){return J.Z.getCountryCode()})),N=I.code.split(" ")[0],T=(e=ie((function(){var e;return se(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,q.Z.resendCode(i)];case 1:t.sent();return[3,3];case 2:e=t.sent();O(e.body.message);return[3,3];case 3:return[2]}}))})),function(){return e.apply(this,arguments)}),S=function(){var e=ie((function(){var e,t;return se(this,(function(n){switch(n.label){case 0:d(!0);n.label=1;case 1:n.trys.push([1,3,4,5])
;return[4,q.Z.verifyPhone(N+i,u)];case 2:e=n.sent().token;b(null);O(null);m(!0);q.Z.validatePhoneForSupport(e);return[3,5];case 3:if((t=n.sent()).body.message){b(null);O(t.body.message)}else{b(t.body.phone);O(t.body.code)}return[3,5];case 4:d(!1);return[7];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(882253)}),(0,r.jsxs)(Z.Dx,{className:Y()(k().marginTop20,ne().flex,ne().justifyCenter,ne().alignCenter),children:[M.Z.Messages.MEMBER_VERIFICATION_PHONE_VERIFIED,(0,r.jsx)($.Z,{className:k().marginLeft8})]})]});return y?A:(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:M.Z.Messages.ENTER_CODE}),(0,r.jsx)(Z.DK,{className:k().marginTop8,children:M.Z.Messages.VERIFY_PHONE_FOR_SUPPORT}),(0,r.jsxs)(Z.gO,{className:k().marginTop20,children:[(0,r.jsx)(Q.Z,{label:M.Z.Messages.FORM_LABEL_PHONE_NUMBER,alpha2:I.alpha2,countryCode:N,value:i,autoComplete:"off",spellCheck:"false",onChange:a,forceMode:X.Nz.PHONE,
error:g}),(0,r.jsx)(Z.II,{className:k().marginTop20,label:M.Z.Messages.CONFIRMATION_CODE,value:u,onChange:l,maxLength:ee.z,error:E}),(0,r.jsx)(Z.zx,{size:Z.zx.Sizes.SMALL,look:Z.zx.Looks.LINK,onClick:T,children:M.Z.Messages.RESEND_CODE}),(0,r.jsx)(Z.zx,{className:k().marginTop20,onClick:S,submitting:p,children:M.Z.Messages.DONE})]})]})};var ue=n(722792),le=n(58226),fe=n(154637),pe=n(655695);function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e){he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return he(e)}function ye(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e,t){me=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return me(e,t)}var ve=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}var be=!1,_e=null,Ee=null;var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&me(e,t)}(n,e);var t=ge(n);function n(){de(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getState=function(){return{verifySuccess:be,verifyErrors:_e,redirectGuildId:Ee}};r.__getLocalVars=function(){return{
verifySuccess:be,verifyErrors:_e,redirectGuildId:Ee}};return n}(c.ZP.Store);Oe.displayName="HubEmailVerificationStore";const Ie=new Oe(u.Z,{HUB_VERIFY_EMAIL_SUCCESS:function(e){var t=e.guildId;be=!0;_e=null;Ee=t},HUB_VERIFY_EMAIL_FAILURE:function(e){var t=e.errors;be=!1;_e=t}});var Ne=n(441143),Te=n.n(Ne),Se=n(131795),Ae=n.n(Se),xe=n(951660),je=n(531286),Ce=n(865622),Pe=n(631134),Re=n(618468);function we(e){var t=function(e){var t,n=null===(t=Ae().os)||void 0===t?void 0:t.family;if("Android"===n||"iOS"===n){var r=Pe.default.getFingerprint(),o=(0,je.WS)();Te()(null!=e,"generateAppPath: guildId cannot be null");return(0,je.ZP)((0,xe.z0)(e),{utmSource:"verify_hub_email",fingerprint:r,attemptId:o})}return"discord://"}(e),n=(0,je.zS)(t);null!=n&&v.default.track(b.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,Ce.K)(n.fingerprint),attempt_id:n.attemptId,source:n.utmSource});Re.Z.launch(t,(function(e){e||(0,pe.dL)(w.Z.fallbackRoute)}))}var Ze=n(920032),De=n.n(Ze);function Me(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}c.ZP.initialize()
;var ke=n(46323),Ue=n(248088),Ge=n(331535),Be=n(832010),Fe=n(487502),He=n(566991),Ve=n.n(He);function Ke(e){var t=e.text,o=e.buttonCta,i=e.onClick;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.Ee,{src:n(819361)}),(0,r.jsx)(Z.Dx,{className:Y()(k().marginTop20,k().marginBottom8,ne().flexCenter),children:M.Z.Messages.DISCORD_DESC_SHORT}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages.DISCORD_DESC_LONG}),(0,r.jsxs)(Ge.Zb,{className:Ve().card,type:Ge.Zb.Types.CUSTOM,children:[(0,r.jsx)("img",{alt:"",className:Ve().cardAccentLeft,src:n(637849)}),(0,r.jsx)("img",{alt:"",className:Ve().cardAccentRight,src:n(837307)}),(0,r.jsxs)(Fe.Z,{className:Ve().cardContents,direction:Fe.Z.Direction.VERTICAL,align:Fe.Z.Align.STRETCH,grow:0,children:[(0,r.jsx)(Ge.xv,{tag:"strong",className:Ve().buttonTitle,variant:"text-md/normal",style:{color:(0,Be.Lq)(b.Ilk.PRIMARY_300)},children:t}),(0,r.jsx)(Z.zx,{className:Ve().button,onClick:i,children:o})]})]})]})}function ze(e){
var t=e.text,n=e.buttonCta,o=e.theme,i=void 0===o?b.BRd.DARK:o,a=e.onClick;return(0,r.jsx)(Z.ZP,{theme:i,children:(0,r.jsx)(Ke,{text:t,buttonCta:n,onClick:a})})}var We=n(730381),Ye=n.n(We),qe=n(553494),Xe=(0,qe.B)({kind:"user",id:"2021-03_expiration_notice_mobile_web",label:"Show expiration notice on mobile web invite",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]}),Je=((0,qe.B)({kind:"user",id:"2021-03_expiration_notice_ios",label:"Show expiration notice on ios invite",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]}),(0,qe.B)({kind:"user",id:"2021-03_expiration_notice_ios_embed",label:"Show expiration notice on ios invite embed",defaultConfig:{showExpirationNotice:!1},treatments:[{id:1,label:"Show expiration notice",config:{showExpirationNotice:!0}}]}),n(443429)),Qe=n(653772);const $e=function(e){
var t=null==e?void 0:e.expires_at,n=!function(e){switch(null==e?void 0:e.state){case b.r2o.EXPIRED:case b.r2o.BANNED:case b.r2o.ERROR:case b.r2o.RESOLVING:return!1;default:return!0}}(e);return(0,c.e7)([Qe.Z],(function(){var t;return null!=Qe.Z.getGuild(null==e||null===(t=e.guild)||void 0===t?void 0:t.id)}))||n||null==t?null:t};var et=n(375650),tt=n(961576),nt=n.n(tt),rt=function(e){var t=e.expiredAt,n=e.className;Xe.trackExposure({});if(!Xe.useExperiment({}).showExpirationNotice)return null;var o=Ye()(t).fromNow(!0);return(0,r.jsx)("div",{className:Y()(nt().container,n),children:(0,r.jsxs)("div",{className:nt().expirationContainer,children:[(0,r.jsx)(Je.Z,{color:(0,Be.Lq)(et.Il.WHITE_500),width:14,height:14,className:nt().clock}),(0,r.jsx)(Ge.xv,{variant:"text-sm/normal",color:"header-primary",children:M.Z.Messages.INVITE_EXPIRATION_NOTICE.format({duration:o})})]})})};const ot=function(e){var t=e.invite,n=e.className,o=$e(t);return null==o?null:(0,r.jsx)(rt,{expiredAt:o,className:n})}
;var it=n(142583),at=n(559159),st=n(917870),ct=n(90816),ut=n(693518),lt=n(709990),ft=n(757987),pt=n(462428),dt=n(848545),ht=n(225691),yt=n(995434),mt=n.n(yt),vt=function(e){var t,n,r={onlineCount:null!==(t=e.approximate_presence_count)&&void 0!==t?t:0,memberCount:null!==(n=e.approximate_member_count)&&void 0!==n?n:0};return 0===r.memberCount&&0===r.memberCount?null:r},gt=function(e){return e.target_type===dt.Iq.STREAM&&null!=e.target_user},bt=function(e){var t;return(null===(t=e.channel)||void 0===t?void 0:t.type)===b.d4z.GROUP_DM},_t=function(e){return null==e.channel&&null==e.guild&&null!=e.inviter},Et=function(e){return e.state===b.r2o.ACCEPTED},Ot=function(e){return null!=e.guild_scheduled_event},It=function(e){return!Ot(e)&&(!!_t(e)||null!=e.inviter&&!Et(e)&&!function(e){var t,n=vt(e);return(null!==(t=null==n?void 0:n.memberCount)&&void 0!==t?t:0)>100}(e))},Nt=function(e){var t=e.guild,n=e.user,o=e.application;return null!=o?(0,r.jsx)(ut.Z,{className:mt().appIcon,game:o,
size:mt().appIconSize}):null!=n?(0,r.jsx)(Z.qE,{src:n.getAvatarURL(void 0,100),size:Z.qE.Sizes.DEPRECATED_SIZE_100,className:mt().avatar}):null!=t?(0,r.jsx)(Z.Vj,{guild:t,size:Z.Vj.Sizes.LARGER,className:mt().guildIcon,animate:!0}):null};function Tt(e){var t,n=e.invite,o=e.textClassName,i=e.className,a=vt(n);return null==a||It(n)||(null==n||null===(t=n.guild)||void 0===t?void 0:t.id)===ht.fQ?null:(0,r.jsx)(Z.EJ,{className:Y()(mt().activityCount,i),online:a.onlineCount,total:a.memberCount,textClassName:o,flat:!0})}function St(e){var t=e.invite,n=e.showBigUserIcon,i=o.useMemo((function(){return n?null:gt(t)&&null!=t.target_user?st.ZP.getUserAvatarURL(t.target_user):It(t)&&null!=t.inviter?st.ZP.getUserAvatarURL(t.inviter):null}),[t,n]),a=M.Z.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN;if(bt(t)){var s,c
;a=null!=(null===(s=t.channel)||void 0===s?void 0:s.name)&&null!=(null===(c=t.inviter)||void 0===c?void 0:c.username)?M.Z.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM_BY_USER.format({username:t.inviter.username}):M.Z.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM}else gt(t)&&null!=t.target_user?a=M.Z.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:t.target_user.username}):Et(t)?a=M.Z.Messages.INSTANT_INVITE_YOU_ARE_ALREADY_A_MEMBER_OF:It(t)&&null!=t.inviter&&(a=M.Z.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_BY_USER.format({username:t.inviter.username}));return(0,r.jsxs)("div",{className:mt().inviteJoinContainer,children:[null!=i&&(0,r.jsx)("div",{className:mt().inviterIconWrapper,children:(0,r.jsx)(Z.qE,{src:i,size:Z.qE.Sizes.SIZE_24})}),(0,r.jsx)(Z.DK,{className:mt().inviteJoinSubTitle,children:a})]})}function At(e){var t,n,o,i=e.user,a=e.guild,s=e.channel,c=e.application,u=e.showBigUserIcon;if(null!=a){u&&null==c&&(t=(0,
r.jsx)(Z.Vj,{guild:a,size:Z.Vj.Sizes.SMALL}));n=a.name;if(null!=c){n=c.name;o=(0,r.jsxs)("div",{className:mt().inviteJoinContainer,children:[(0,r.jsx)(Z.DK,{className:mt().appIn,children:M.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_IN}),(0,r.jsxs)("div",{className:mt().guildContainer,children:[(0,r.jsx)(Z.Vj,{guild:a,size:Z.Vj.Sizes.SMALL}),(0,r.jsx)(pt.Z,{className:mt().appGuildName,color:pt.Z.Colors.CUSTOM,tag:"span",size:pt.Z.Sizes.SIZE_24,children:a.name})]})]})}}else if(null!=s){if(null==i)throw new Error("no inviter in group DM invite");var l=i.username;if(null!=s.name&&""!==s.name){n=s.name;null!=s.icon&&(t=(0,r.jsx)(Z.MC,{channel:s,size:Z.qE.Sizes.SIZE_32}))}else n=l}else if(null!=i){var f=i.username;n=M.Z.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_CHAT.format({username:f});o=(0,r.jsx)(Z.DK,{className:mt().directInviteSubTitle,children:M.Z.Messages.INSTANT_INVITE_DIRECT_FRIEND_DESCRIPTION.format({username:"".concat(f,"#").concat(i.discriminator)})})}return(0,
r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Z.Dx,{className:mt().title,children:[null!=a?(0,r.jsx)(lt.Z,{guild:a,className:mt().guildBadge,tooltipPosition:ft.ZP.Positions.LEFT}):null,t,n]}),o]})}var xt=n(733730),jt=n(53551),Ct=n(775041),Pt=n(613258),Rt=n(666872),wt=n(993317),Zt=n(969225),Dt=n(622680),Mt=n.n(Dt);function Lt(e){var t,n=e.guildScheduledEvent,o=e.channel,i=e.onAcceptInvite,a=e.isSubmitting,s=(0,Pt.xt)(n),c=(0,Pt.Z2)(n);return(0,r.jsxs)("div",{className:Mt().guildEventCard,children:[(0,r.jsx)(Rt.ZP,{userCount:n.user_count,startTime:n.scheduled_start_time,name:n.name,description:null!==(t=n.description)&&void 0!==t?t:void 0,isActive:s,isEnded:c,headerVariant:"heading-md/medium",descriptionClassName:Mt().channelDescription,guildId:n.guild_id,eventType:n.entity_type}),null!=o&&(0,r.jsx)("div",{className:Mt().channelInfo,children:(0,r.jsx)(wt.Z,{guildScheduledEvent:n,channel:o})}),(0,r.jsx)(Ge.zx,{className:Mt().acceptButton,color:Ge.zx.Colors.GREEN,onClick:i,submitting:a,
children:M.Z.Messages.GUILD_PROFILE_JOIN_SERVER_BUTTON})]})}function kt(e){var t,n=e.invite,o=null!=n.guild?new R.Z(n.guild):null;if(null==o)return null;var i=null!==(t=o.description)&&void 0!==t?t:"";return(0,r.jsxs)("div",{className:Mt().guildInfoCard,children:[(0,r.jsx)(Ge.X6,{className:Mt().presentedBy,variant:"text-sm/medium",children:M.Z.Messages.STAGE_INVITE_GUILD_HEADER}),(0,r.jsxs)("div",{className:Mt().guildContainer,children:[(0,r.jsx)(Zt.Z,{guild:o,active:!0,size:Zt.Z.Sizes.MEDIUM}),(0,r.jsxs)("div",{className:Mt().guildDetailsContanier,children:[(0,r.jsxs)(Ge.xv,{className:Mt().guildName,color:"header-primary",variant:"text-sm/medium",tag:"span",children:[o.name,(0,r.jsx)(lt.Z,{guild:o,className:Mt().guildBadge,tooltipPosition:ft.ZP.Positions.LEFT})]}),(0,r.jsx)(Tt,{invite:n,textClassName:Mt().guildInfoMemberCountText,className:Mt().guildInfoMemberCount})]})]}),i.length>0&&(0,r.jsx)("details",{className:Mt().guildDescriptionContainer,children:(0,r.jsx)(Ge.xv,{
color:"header-secondary",variant:"text-sm/normal",children:i})})]})}function Ut(e){var t=e.invite,n=e.channel,o=e.isSubmitting,i=e.onAcceptInvite,a=t.guild_scheduled_event;return null!=a?(0,r.jsx)(Lt,{guildScheduledEvent:a,channel:n,isSubmitting:o,onAcceptInvite:i}):null}var Gt=n(747973),Bt=n.n(Gt);function Ft(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ft(e,t,n[t])}))}return e}function Vt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
;t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Kt(e){var t=e.invite,n=e.onAcceptInvite,o=e.disableUser,i=void 0!==o&&o;if(null==t)return null;var a=null!=t.guild?new R.Z(t.guild):null,s=null!=t.channel?(0,jt.jD)(t.channel):null,c=null!=t.target_application?new xt.Z(t.target_application):null,u=i||null==t.inviter?null:new Ct.Z(t.inviter),l=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=a&&a.hasFeature(b.oNc.COMMUNITY))&&null!=u&&bt(t),f=function(e){switch(e.state){case b.r2o.ACCEPTING:case b.r2o.APP_OPENING:return!0;default:return!1}}(t),p={invite:t,user:u,guild:a,channel:s,application:c};return Ot(t)?(0,r.jsx)(Ut,{invite:t,channel:s,isSubmitting:f,onAcceptInvite:n}):(0,r.jsxs)("div",{className:Bt().container,children:[(0,r.jsx)(Nt,{application:c,guild:a,user:l||_t(t)?u:null
}),_t(t)?null:(0,r.jsx)(St,Vt(Ht({},p),{showBigUserIcon:l})),(0,r.jsx)(At,Vt(Ht({},p),{showBigUserIcon:l})),(0,r.jsx)(Tt,Ht({},p)),(0,r.jsx)(Ge.zx,{onClick:n,submitting:f,className:Bt().acceptButton,children:M.Z.Messages.INSTANT_INVITE_ACCEPT})]})}var zt=n(35628),Wt=n.n(zt);function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){qt(e,t,n[t])}))}return e}function Jt(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Qt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{
a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var en;function tn(){return(0,r.jsx)("div",{className:Wt().centerFlex,children:(0,r.jsx)(Ge.$j,{})})}!function(e){e[e.LOADING=0]="LOADING";e[e.DETAILS=1]="DETAILS";e[e.ERROR=2]="ERROR"}(en||(en={}));var nn=function(e){var t=null==(null==e?void 0:e.state)&&null==(null==e?void 0:e.channel);if(null==e||null==e.state||t)return en.LOADING;var n=e.state;switch(n){case b.r2o.RESOLVED:case b.r2o.ACCEPTED:case b.r2o.APP_NOT_OPENED:case b.r2o.APP_OPENED:
case b.r2o.ACCEPTING:case b.r2o.APP_OPENING:return en.DETAILS;case b.r2o.EXPIRED:case b.r2o.BANNED:case b.r2o.ERROR:return en.ERROR;case b.r2o.RESOLVING:return en.LOADING;default:(0,ct.vE)(n)}};function rn(e){var t=e.invite,n=e.onAcceptInvite;return(null==t?void 0:t.state)===b.r2o.BANNED?(0,r.jsx)(Ke,{text:M.Z.Messages.AUTH_BANNED_INVITE_BODY,buttonCta:M.Z.Messages.INVITE_INVALID_CTA,onClick:n}):(0,r.jsx)(Ke,{text:M.Z.Messages.INVITE_INVALID_ERROR,buttonCta:M.Z.Messages.INVITE_INVALID_CTA,onClick:n})}function on(e){var t=e.children,n=e.cardChildren,i=e.startAnimHeightPx,a=e.innerStyle,s=Qt(e,["children","cardChildren","startAnimHeightPx","innerStyle"]).invite,c=$t(o.useState(nn(s)),2),u=c[0],l=c[1],f=o.useRef(null),p=(0,at.Z)(f,!0,[u]),d=(0,Ue.useSpring)({height:null!=(null==p?void 0:p.height)&&0!==(null==p?void 0:p.height)?"".concat(p.height,"px"):"".concat(i,"px"),config:Ue.config.stiff});o.useEffect((function(){var e=nn(s);e!==u&&l(e)}),[s,u]);return(0,r.jsxs)(Ue.animated.div,{
className:Wt().inviteCard,style:d,children:[(0,r.jsx)(Ue.animated.div,{className:Wt().inviteChildContainer,style:d,children:(0,r.jsx)("section",{ref:f,className:null==a?void 0:a(u),children:t(u)})}),n]})}function an(e){var t=e.invite;if(null==t||!Ot(t))return null;return(0,r.jsx)(on,Jt(Xt({startAnimHeightPx:0,innerStyle:function(){return Wt().guildInfoInner},cardChildren:(0,r.jsx)(ot,{invite:t,className:Wt().expirationNotice})},e),{children:function(e){return function(e){return null==t?null:e===en.DETAILS?(0,r.jsx)(kt,{invite:t}):null}(e)}}))}function sn(e){var t,n=e.invite,o=null!=n&&Ot(n),i=(qt(t={},en.DETAILS,Wt().inviteCardInner),qt(t,en.ERROR,Wt().inviteCardInnerError),qt(t,en.LOADING,Wt().inviteCardInnerLoading),t);return(0,r.jsx)(on,Jt(Xt({startAnimHeightPx:200,innerStyle:function(e){return i[e]},cardChildren:o?null:(0,r.jsx)(ot,{invite:n,className:Wt().expirationNotice})},e),{children:function(t){return function(t){if(null==n)return(0,r.jsx)(tn,{});switch(t){case en.DETAILS:
return(0,r.jsx)(Kt,Jt(Xt({},e),{invite:n}));case en.ERROR:return(0,r.jsx)(rn,Jt(Xt({},e),{invite:n}));default:return(0,r.jsx)(tn,{})}}(t)}}))}function cn(e){var t=e.invite,n=e.onAcceptInvite,o=(null!=t?t:{}).guild,i={};if(null!=(null==o?void 0:o.splash)){var a=st.ZP.getGuildSplashURL({id:o.id,splash:o.splash});if(null!=a){i.backgroundImage="url(".concat(a,")");i.backgroundSize="cover"}}return(0,r.jsxs)(Z.ZP,{theme:b.BRd.DARK,className:Wt().splashBackground,style:i,contentClassName:Wt().centerAuthBoxContent,children:[(0,r.jsx)(sn,Jt(Xt({},e),{onAcceptInvite:n})),(0,r.jsx)(an,Xt({},e))]})}var un=n(202552),ln=n(447887),fn=n(137861),pn=n(743221),dn=n(175782);const hn=function(){return Date.now()-dn.mb};var yn=n(323097),mn=n(590499),vn=n(98109);function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e){bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return bn(e)}function _n(e,t){
return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e,t){En=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return En(e,t)}var On=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=bn(e);if(t){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _n(this,n)}}c.ZP.initialize();var Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{
constructor:{value:e,writable:!0,configurable:!0}});t&&En(e,t)}(o,e);var t=In(o);function o(){gn(this,o);return t.apply(this,arguments)}var i=o.prototype;i.componentDidMount=function(){var e=(0,D.Z)(this.props.location);null!=e&&l.Z.authorizeIPAddress(e);(0,P.e)("authorize_ip")};i.renderLoginButton=function(){if("Android"===Ae().os.family||"iOS"===Ae().os.family)return null;var e=this.props.transitionTo;return(0,r.jsx)(Z.zx,{onClick:function(){return e(b.Z5c.LOGIN)},children:M.Z.Messages._LOGIN})};i.renderFailed=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(955568),className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.AUTHORIZATION_EXPIRED}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages._AUTH_EXPIRED_SUGGESTION}),this.renderLoginButton()]})};i.renderSucceeded=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(230978),className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{
className:k().marginBottom8,children:M.Z.Messages.IP_AUTHORIZATION_SUCCEEDED}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages._AUTH_IP_AUTH_SUCCEEDED_SUGGESTION}),this.renderLoginButton()]})};i.renderDefault=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Hh,{}),(0,r.jsx)(Z.Dx,{children:M.Z.Messages.AUTHORIZING})]})};i.render=function(){var e=this.props,t=e.verifyFailed,n=e.verifySucceeded;return t?this.renderFailed():n?this.renderSucceeded():this.renderDefault()};return o}(o.PureComponent);Nn.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const Tn=c.ZP.connectStores([Pe.default],(function(){return{verifyFailed:Pe.default.didVerifyFail(),verifySucceeded:Pe.default.didVerifySucceed()}}))(Nn);const Sn=function(e){var t=e.location,i=(0,c.cj)([Pe.default],(function(){return{verifyFailed:Pe.default.didVerifyFail(),verifySucceeded:Pe.default.didVerifySucceed()}})),a=i.verifyFailed,s=i.verifySucceeded;o.useEffect((function(){var e=(0,D.Z)(t)
;null!=e&&l.Z.authorizePayment(e);(0,P.e)("authorize_payment")}),[t]);return a?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(639915),className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.PAYMENT_AUTHORIZATION_EXPIRED}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages.PAYMENT_AUTH_EXPIRED_SUGGESTION})]}):s?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)("img",{alt:"",src:n(143613),className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.PAYMENT_AUTHORIZATION_SUCCEEDED}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages.PAYMENT_AUTH_SUCCEEDED_SUGGESTION})]}):(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Hh,{}),(0,r.jsx)(Z.Dx,{children:M.Z.Messages.PAYMENT_AUTHORIZING})]})};var An=n(99456),xn=n(772731),jn=n(402232);function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value
}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wn,Zn=function(e,t){var n,r,o,i,a={label:0,sent:function(){
if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}
}([i,s])}}};!function(e){e[e.INITIAL=0]="INITIAL";e[e.RPC_CONNECTED=1]="RPC_CONNECTED";e[e.APP_OPENING=2]="APP_OPENING";e[e.APP_OPENED=3]="APP_OPENED"}(wn||(wn={}));const Dn=function(e){var t=e.match,n=e.location,i=e.attemptDeepLink,a=Rn(o.useState(wn.INITIAL),2),s=a[0],c=a[1];o.useEffect((function(){xn.default.once("connected",(function(){c(wn.RPC_CONNECTED)}));xn.default.once("disconnected",(function(){(0,pe.uL)((0,jn.M)())}));xn.default.connect()}),[]);o.useEffect((function(){if(s===wn.INITIAL){var e=setTimeout((function(){return(0,pe.uL)((0,jn.M)())}),3e3);return function(){return clearTimeout(e)}}}),[s]);var u,l,f=o.useCallback((l=(u=function(e,t){var n;return Zn(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);c(wn.APP_OPENING);return[4,i(e,t)];case 1:r.sent();c(wn.APP_OPENED);return[3,3];case 2:n=r.sent();console.error("Error opening deeplink",n);return[3,3];case 3:return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var o=u.apply(e,t)
;function i(e){Pn(o,n,r,i,a,"next",e)}function a(e){Pn(o,n,r,i,a,"throw",e)}i(void 0)}))}),function(e,t){return l.apply(this,arguments)}),[i]);if((0,pe.DB)())return null;switch(s){case wn.RPC_CONNECTED:return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.DEEPLINK_BROWSER_TITLE}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.DEEPLINK_BROWSER_PROMPT}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return f(t,n)},children:M.Z.Messages.OPEN_IN_APP}),(0,r.jsx)(Z.zx,{className:Y()(k().marginTop8,k().marginCenterHorz),color:Z.zx.Colors.LINK,look:Z.zx.Looks.LINK,onClick:function(){return(0,pe.uL)((0,jn.M)())},children:M.Z.Messages.CONTINUE_IN_BROWSER})]});case wn.INITIAL:case wn.APP_OPENING:return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:M.Z.Messages.APP_OPENING}),(0,r.jsx)(Z.Hh,{})]});case wn.APP_OPENED:return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.APP_OPENED_TITLE}),(0,
r.jsx)(Z.DK,{children:M.Z.Messages.DEEPLINK_BROWSER_APP_OPENED})]})}};function Mn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}var Ln=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}
if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const kn=function(e){var t,n,o=e.match,i=e.location,a=(n=(t=function(e,t){return Ln(this,(function(n){switch(n.label){case 0:return[4,(0,An.s)(b.jEp.CHANNEL,{guildId:e.params.guildId,channelId:e.params.channelId,messageId:e.params.messageId,search:t.search})];case 1:n.sent();return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Mn(i,r,o,a,s,"next",e)}function s(e){Mn(i,r,o,a,s,"throw",e)}a(void 0)}))}),function(e,t){return n.apply(this,arguments)});return(0,r.jsx)(Dn,{match:o,location:i,attemptDeepLink:a})};var Un=n(333999);function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e){
Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Bn(e)}function Fn(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e,t){Hn=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Hn(e,t)}var Vn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Bn(e);if(t){var o=Bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fn(this,n)}}c.ZP.initialize();var zn=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Hn(e,t)}(o,e);var t=Kn(o);function o(){Gn(this,o);var e;(e=t.apply(this,arguments)).state={busy:!0,success:!1,user:null,category:null};return e}var a=o.prototype;a.componentDidMount=function(){var e=this,t=(0,D.Z)(this.props.location),n=(0,i.parse)(this.props.location.search);d.Z.post({url:b.ANM.DISABLE_EMAIL_NOTIFICATIONS,body:{token:t,pixel_uuid:n.hash,category:n.category,email_type:n.email_type},oldFormErrors:!0}).then((function(t){var r=t.body.user,o=new Ct.Z(r);e.setState({success:!0,busy:!1,user:o,category:n.category})}),(function(){return e.setState({success:!1,busy:!1})}));(0,P.e)("disable_email_notifications")};a.renderBusy=function(){return(0,r.jsx)(Z.ZP,{children:(0,r.jsx)(Z.Hh,{})})};a.renderCategorySuccess=function(e,t){
var n=this.props,o=n.defaultRoute,i=n.transitionTo,a=M.Z.Messages.EMAIL_CATEGORY_UNSUBSCRIBE_EMAIL_BODY.format({category:t});return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.EMAIL_CATEGORY_UNSUBSCRIBE_HEADER}),(0,r.jsx)(Z.DK,{children:a}),(0,r.jsx)(Z.zx,{className:k().marginTop20,onClick:function(){return i(o)},children:M.Z.Messages.CONTINUE_TO_WEBAPP}),(0,r.jsx)(Z.zx,{className:k().marginTop8,color:Z.zx.Colors.LINK,look:Z.zx.Looks.LINK,onClick:function(){return i(b.Z5c.SETTINGS("notifications",Un.vG))},children:M.Z.Messages.EMAIL_CATEGORY_MANAGE_SETTING_LABEL})]})};a.renderSuccess=function(){var e=this.props,t=e.defaultRoute,n=e.transitionTo,o=this.state,i=o.user,a=o.category;if(null!=a){var s=Un.Od.find((function(e){return e.category===a}));if(null!=s)return this.renderCategorySuccess(a,s.label())}return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.qE,{src:null==i?void 0:i.getAvatarURL(void 0,100),size:Z.qE.Sizes.DEPRECATED_SIZE_100,
className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_HEADER}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_BODY}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return n(t)},children:M.Z.Messages.CONTINUE_TO_WEBAPP})]})};a.renderError=function(){var e=this.props,t=e.defaultRoute,o=e.transitionTo;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(709989),className:k().marginBottom20}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_HEADER}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_BODY}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return o(t)},children:M.Z.Messages.CONTINUE_TO_WEBAPP})]})};a.render=function(){var e=this.state,t=e.busy,n=e.success;return t?this.renderBusy():n?this.renderSuccess():this.renderError()};return o
}(o.PureComponent);zn.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const Wn=c.ZP.connectStores([w.Z],(function(){return{defaultRoute:w.Z.defaultRoute}}))(zn);var Yn=n(450700),qn=n(478695);function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e){Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Jn(e)}function Qn(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e,t){$n=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return $n(e,t)}var er=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Jn(e);if(t){var o=Jn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qn(this,n)}}var nr={};var rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&$n(e,t)}(n,e);var t=tr(n);function n(){Xn(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getState=function(e){return nr[e]};r.__getLocalVars=function(){return{states:nr}};return n}(c.ZP.Store);rr.displayName="CodedLinkNativeAppStateStore";const or=new rr(u.Z,{NATIVE_APP_MODAL_OPENING:function(e){var t=e.code;nr[t]=b.kEZ.OPENING},NATIVE_APP_MODAL_OPENED:function(e){var t=e.code;nr[t]=b.kEZ.OPEN},NATIVE_APP_MODAL_OPEN_FAILED:function(e){var t=e.code;nr[t]=b.kEZ.OPEN_FAIL}})
;var ir=n(800539),ar=n(512238),sr=n(202036),cr=n(95467),ur=n(882923),lr=n(311854),fr=n(668800);function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){dr(i,r,o,a,s,"next",e)}function s(e){dr(i,r,o,a,s,"throw",e)}a(void 0)}))}}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function vr(e){vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return vr(e)}function gr(e,t){
return!t||"object"!==_r(t)&&"function"!=typeof t?pr(e):t}function br(e,t){br=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return br(e,t)}var _r=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=vr(e);if(t){var o=vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gr(this,n)}}var Or,Ir=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};c.ZP.initialize();!function(e){e.REGISTER="register";e.LOGIN="login"}(Or||(Or={}));var Nr=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&br(e,t)}(o,e);var t=Er(o);function o(){yr(this,o);var e;(e=t.apply(this,arguments)).state={error:null,continueOnWeb:!1,currentUser:null,sentVerification:!1,fetchingUser:!1};e.refreshUser=function(){e.setState({fetchingUser:!0});qn.k({withAnalyticsToken:!0}).then((function(t){return e.setState({currentUser:t,fetchingUser:!1})})).catch((function(){return e.setState({fetchingUser:!1})}))};e.handleLogout=function(){var t=e.props.match.params.giftCode;l.Z.logout(b.Z5c.GIFT_CODE_LOGIN(t))};e.handleResendVerification=function(){l.Z.verifyResend();e.setState({sentVerification:!0})};var n=pr(e);e.handleAccept=hr((function(){var e,t,r,o;return Ir(this,(function(i){switch(i.label){case 0:e=n.props,t=e.transitionTo;if(null==e.giftCode)throw new Error("Trying to accept gift before resolve")
;r=n.getCode();i.label=1;case 1:i.trys.push([1,3,,4]);n.setState({error:null});return[4,f.Z.redeemGiftCode(r)];case 2:i.sent();t(b.Z5c.APP);return[3,4];case 3:o=i.sent();n.setState({error:o});return[3,4];case 4:return[2]}}))}));e.resolveGiftCode=function(){var t=e.props.transitionTo,n=e.getCode();f.Z.resolveGiftCode(n,!0,!0).then((function(e){null!=e&&null!=e.giftCode.promotion&&t(b.Z5c.BILLING_PROMOTION_REDEMPTION(n))}))};return e}var i=o.prototype;i.componentDidMount=function(){var e=this.props,t=e.authenticated,n=e.isResolved;t&&this.handleAuthenticated();n||this.resolveGiftCode();(0,P.e)("gift_code")};i.componentDidUpdate=function(e){var t=this,n=this.props,r=n.authenticated;n.isResolved||u.Z.wait((function(){t.resolveGiftCode()}));r&&!e.authenticated&&this.handleAuthenticated();!r&&e.authenticated&&this.setState({currentUser:null})};i.handleAuthenticated=function(){var e=this.state.currentUser;Yn.b8();null==e&&this.refreshUser()};i.getCode=function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.match.params.giftCode};i.getMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.login?Or.LOGIN:Or.REGISTER};i.getErrorMessage=function(e){var t=this.props.libraryApplication,n=this.state.error,r=null!=n?n.code:null;return r===b.evJ.INVALID_GIFT_SELF_REDEMPTION?M.Z.Messages.GIFT_CONFIRMATION_BODY_SELF_GIFT_NO_PAYMENT:null!=t||r===b.evJ.INVALID_GIFT_REDEMPTION_OWNED?M.Z.Messages.GIFT_CODE_AUTH_HELP_TEXT_OWNED.format({libraryLink:b.Z5c.APPLICATION_LIBRARY}):e.isClaimed||r===b.evJ.INVALID_GIFT_REDEMPTION_EXHAUSTED?M.Z.Messages.GIFT_CODE_AUTH_HELP_TEXT_CLAIMED:r===b.evJ.INVALID_GIFT_REDEMPTION_FRAUD_REJECTED?M.Z.Messages.GIFT_CODE_SMITE_REJECT_HELP_TEXT:void 0};i.renderSpinner=function(e){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:e}),(0,r.jsx)(Z.Hh,{})]})};i.renderExpiredInvite=function(){var e=this.props,t=e.defaultRoute,o=e.transitionTo;return(0,
r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(211086),className:k().marginBottom8}),(0,r.jsx)(Z.Dx,{className:Y()(k().marginTop8,k().marginBottom8),children:M.Z.Messages.GIFT_CODE_AUTH_INVALID_TITLE}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.GIFT_CODE_AUTH_INVALID_BODY}),(0,r.jsx)(Z.zx,{className:Y()(k().marginTop40,k().marginBottom8),onClick:function(){return o(t)},children:M.Z.Messages.CONTINUE_TO_WEBAPP}),(0,r.jsx)(Z.zx,{onClick:function(){return window.open(cr.Z.getArticleURL(b.BhN.GIFTING),"_blank")},look:Z.zx.Looks.LINK,color:Z.zx.Colors.LINK,children:M.Z.Messages.GIFT_CODE_AUTH_INVALID_TIP})]})};i.renderAppOpened=function(){var e=this;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.APP_OPENED_TITLE}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.APP_OPENED_BODY}),(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:function(){return e.setState({continueOnWeb:!0})},children:M.Z.Messages.GIFT_CODE_AUTH_CONTINUE_IN_BROWSER})]})}
;i.renderVerification=function(e){var t=this.state.sentVerification;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(100539),className:k().marginBottom8}),(0,r.jsx)(Z.Dx,{children:M.Z.Messages.GIFT_CODE_AUTH_VERIFICATION_TITLE.format({username:e.username})}),(0,r.jsx)(Z.DK,{className:k().marginTop20,children:M.Z.Messages.GIFT_CODE_AUTH_HELP_TEXT_VERIFICATION_REQUIRED}),(0,r.jsx)(Z.zx,{disabled:t,className:k().marginTop40,onClick:this.handleResendVerification,children:t?M.Z.Messages.GIFT_CODE_AUTH_VERIFICATION_SENT:M.Z.Messages.RESEND_VERIFICATION_EMAIL}),(0,r.jsx)(Z.zx,{look:Z.zx.Looks.LINK,color:Z.zx.Colors.LINK,onClick:this.refreshUser,className:k().marginTop8,children:M.Z.Messages.GIFT_CODE_AUTH_CHECK_VERIFICATION_AGAIN})]})};i.renderAuthenticated=function(e,t){var n=this.getErrorMessage(e),o=null!=n;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(ur.Z,{giftCode:e}),(0,r.jsx)(Z.zx,{disabled:o,className:k().marginTop40,onClick:this.handleAccept,
children:M.Z.Messages.GIFT_CODE_AUTH_ACCEPT}),null!=n?(0,r.jsx)(Z.DK,{className:k().marginTop20,children:n}):(0,r.jsx)(Z.i_,{className:k().marginTop20,children:M.Z.Messages.GIFT_CODE_AUTH_LOGGED_IN_AS.format({userTag:t.tag,onLogoutClick:this.handleLogout})})]})};i.render=function(){var e=this.props,t=e.nativeAppState,n=e.sku,o=e.authenticated,i=e.giftCode,a=e.isResolved,s=e.isAccepting,c=e.transitionTo,u=e.location,l=this.state,f=l.fetchingUser,p=l.continueOnWeb;if(t===b.kEZ.OPEN&&!p)return this.renderAppOpened();if(t===b.kEZ.OPENING)return this.renderSpinner(M.Z.Messages.APP_OPENING);if(s)return this.renderSpinner(M.Z.Messages.GIFT_CODE_AUTH_ACCEPTING);if(null==i)return a?this.renderExpiredInvite():this.renderSpinner(M.Z.Messages.GIFT_CODE_AUTH_RESOLVING);if(a){if(o){var d=this.state.currentUser;return f||null==d?this.renderSpinner(M.Z.Messages.GIFT_CODE_AUTH_FETCHING_USER):this.requiresVerification&&null!=d?this.renderVerification(d):this.renderAuthenticated(i,d)}
return this.getMode()===Or.LOGIN?(0,r.jsx)(lr.Z,{giftCodeSKU:n,giftCode:i,transitionTo:c,location:u}):(0,r.jsx)(fr.Z,{giftCodeSKU:n,giftCode:i,transitionTo:c,location:u})}return null};!function(e,t,n){t&&mr(e.prototype,t);n&&mr(e,n)}(o,[{key:"requiresVerification",get:function(){var e=this.state.currentUser;return null!=e&&!e.verified}}]);return o}(o.PureComponent);const Tr=c.ZP.connectStores([ln.Z,ir.Z,Pe.default,ar.Z,w.Z,or],(function(e){var t=e.match.params.giftCode,n=ln.Z.get(t),r=null!=n?ar.Z.get(n.skuId):null;return{giftCode:n,sku:r,libraryApplication:null!=r&&null!=n?sr.z2(n,r,ir.Z):null,authenticated:Pe.default.isAuthenticated(),defaultRoute:w.Z.defaultRoute,isResolved:ln.Z.getIsResolved(t),isAccepting:ln.Z.getIsAccepting(t),libraryApplicationsFetched:ir.Z.fetched,nativeAppState:or.getState(t)}}))(Nr);var Sr=n(258858),Ar=n(88468),xr=n(509954),jr=n(677523),Cr=n(162917),Pr=n(969376),Rr=n(517845),wr=n(714392),Zr=n(111775),Dr=n(386010),Mr=n(84405),Lr=n.n(Mr);function kr(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Gr(e){Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Gr(e)}function Br(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e,t){Fr=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Fr(e,t)}var Hr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var n,r=Gr(e);if(t){var o=Gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Br(this,n)}}c.ZP.initialize();var Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Fr(e,t)}(o,e);var t=Vr(o);function o(){kr(this,o);var e;(e=t.apply(this,arguments)).handleContinue=function(){var t=e.props,n=t.defaultRoute;(0,t.transitionTo)(n)};return e}var i=o.prototype;i.componentDidMount=function(){(0,P.e)("guildTemplate");Dr.KO||Re.Z.launch("discord://"+b.Z5c.GUILD_TEMPLATE(this.props.code),(function(){}))};i.componentDidUpdate=function(e){this.props.code!==e.code&&le.Z.resolveGuildTemplate(this.props.code)};i.renderButton=function(e,t){return Dr.KO?(0,r.jsx)(Z.zx,{className:k().marginTop40,onClick:t,children:e}):(0,r.jsx)(Z.v6,{className:k().marginTop40})}
;i.renderSpinner=function(e){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:e}),(0,r.jsx)(Z.Hh,{})]})};i.renderInvalidGuildTemplate=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(211086),className:k().marginBottom8}),(0,r.jsx)(Z.Dx,{className:Y()(k().marginTop8,k().marginBottom8),children:M.Z.Messages.GUILD_TEMPLATE_INVALID_TITLE}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.GUILD_TEMPLATE_INVALID_SUBTITLE}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP,this.handleContinue)]})};i.renderAppOpened=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.APP_OPENED_TITLE}),(0,r.jsx)(Z.DK,{children:M.Z.Messages.APP_OPENED_BODY}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP,this.handleContinue)]})};i.renderAuthenticatedOrDownload=function(){var e=this.props.guildTemplate;Te()(null!=e,"guild template must not be null");return e.state===Rr.Rj.RESOLVING?(0,r.jsx)(Z.ZP,{className:Lr().authBox,children:(0,
r.jsx)(xr.Z,{guildTemplate:e})}):(0,r.jsx)(zr,{guildTemplate:e})};i.renderContinue=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:M.Z.Messages.APP_NOT_OPENED}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP,this.handleContinue)]})};i.render=function(){var e=this.props,t=e.guildTemplate,n=e.nativeAppState,o=e.authenticated,i=e.transitionTo,a=e.location;if(null==t)return this.renderSpinner(M.Z.Messages.LOADING);if(n===b.kEZ.OPEN)return this.renderAppOpened();if(n===b.kEZ.OPENING)return this.renderSpinner(M.Z.Messages.APP_OPENING);switch(t.state){case Rr.Rj.RESOLVING:return this.renderSpinner(M.Z.Messages.APP_OPENING);case Rr.Rj.RESOLVED:return o||!Dr.KO?this.renderAuthenticatedOrDownload():this.props.login?(0,r.jsx)(lr.Z,{guildTemplate:t,transitionTo:i,location:a}):(0,r.jsx)(fr.Z,{guildTemplate:t,transitionTo:i,location:a,onRegister:function(){(0,jr.c)(wr.M5.ORGANIC_REGISTERED_GUILD_TEMPLATE);Cr.Z.flowStart(Zr.MK.ORGANIC_GUILD_TEMPLATES,Zr.EW.NUF_STARTED)}})
;case Rr.Rj.EXPIRED:return this.renderInvalidGuildTemplate();default:return null}};return o}(o.PureComponent);function zr(e){var t=e.guildTemplate,n=(0,Sr.Z)(t,!1),o=n.form,i=n.handleSubmit;Cr.Z.flowStep(Zr.MK.ORGANIC_GUILD_TEMPLATES,Zr.X2.GUILD_CREATE);var a=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.Dx,{className:Lr().header,children:M.Z.Messages.GUILD_TEMPLATE_SETUP_DISCORD}),o,(0,r.jsx)(Z.zx,{className:Lr().createButton,onClick:i,children:M.Z.Messages.GUILD_TEMPLATE_CREATE_DISCORD})]});return(0,r.jsx)(Pr.Z,{className:Lr().authBox,children:function(){return[(0,r.jsx)(Ar.Z,{guildTemplate:t},"template"),(0,r.jsx)("div",{className:Lr().formContainer,children:a},"contents")]}})}c.ZP.initialize();function Wr(e,t,n){e.preventDefault();v.default.track(b.rMx.GUILD_TEMPLATE_APP_OPENED,{guild_template_code:t,guild_template_name:n.name,guild_template_description:n.description,guild_template_guild_id:n.sourceGuildId});var r=Pe.default.getFingerprint(),o=null!=r?r:Pe.default.getId()
;le.Z.openMobileApp(n.state===Rr.Rj.RESOLVED?t:void 0,o)}function Yr(e){var t=e.code,n=(0,c.e7)([ue.Z],(function(){return ue.Z.getGuildTemplate(t)}));o.useEffect((function(){(0,P.e)("guild_template_mobile")}),[]);return null==n||n.state===Rr.Rj.RESOLVING?(0,r.jsx)(Z.ZP,{children:(0,r.jsx)(Ge.$j,{})}):n.state===Rr.Rj.RESOLVED?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(xr.Z,{guildTemplate:n,tall:!0}),(0,r.jsx)(Z.zx,{onClick:function(e){return Wr(e,t,n)},className:k().marginTop20,children:M.Z.Messages.GUILD_TEMPLATE_OPEN})]}):(0,r.jsx)(ze,{text:M.Z.Messages.GUILD_TEMPLATE_MOBILE_INVALID_ERROR,buttonCta:M.Z.Messages.GUILD_TEMPLATE_MOBILE_INVALID_CTA,onClick:function(e){return Wr(e,t,n)}})}var qr=n(168831),Xr=n(348855),Jr=n(355184),Qr=n(361963),$r=n(50151),eo=n(101577),to=n(32733);function no(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function ro(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){
var i=e.apply(t,n);function a(e){no(i,r,o,a,s,"next",e)}function s(e){no(i,r,o,a,s,"throw",e)}a(void 0)}))}}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function io(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ao(e){ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ao(e)}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){io(e,t,n[t])}))}return e}function co(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uo(e,t){
uo=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return uo(e,t)}var lo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ao(e);if(t){var o=ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return co(this,n)}}var po=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,
r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};c.ZP.initialize();var ho="Accept Invite Page",yo="register",mo="login";function vo(){return(vo=ro((function(e){var t;return po(this,(function(n){switch(n.label){case 0:return[4,p.Z.resolveInvite(e,ho)];case 1:if(null==(t=n.sent().invite))return[2];C(t);return[2]}}))
}))).apply(this,arguments)}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&uo(e,t)}(o,e);var t=fo(o);function o(){oo(this,o);var e;(e=t.apply(this,arguments)).state={error:null};e.getAcceptInviteContext=function(t){return p.Z.getInviteContext(t,e.props.invite)};e.handleContinue=function(t){var n=e.props,r=n.invite,o=n.transitionTo;if(null!=r.channel||null!=(null==t?void 0:t.channel)){var i;null!=(null===(i=r.guild)||void 0===i?void 0:i.id)?o(b.Z5c.APP_WITH_INVITE_AND_GUILD_ONBOARDING(r.code)):p.Z.transitionToInvite(null!=t?t:r,o)}};e.handleAccept=function(){e.setState({error:null});var t=e.getInviteKey();p.Z.acceptInvite({inviteKey:t,context:e.getAcceptInviteContext(ho),skipOnboarding:!0,callback:function(e){C(e);null!=e.channel&&p.Z.openApp(t,e.channel.id)}}).catch((function(t){
if(t instanceof qr.Z){var n=(0,$r.O)(t.code);e.setState({error:{code:t.code,message:n}})}else e.setState({error:{code:t.code,message:M.Z.Messages.INVITE_MODAL_ERROR_DEFAULT}})}))};e.handleDefaultTransition=function(){var t=e.props,n=t.defaultRoute;(0,t.transitionTo)(n)};e.renderButton=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.handleDefaultTransition,o=e.props.invite,i=null!=o.stage_instance||null!=o.guild_scheduled_event;return Dr.KO?(0,r.jsx)(Z.zx,{className:i?k().marginTop20:k().marginTop40,onClick:n,color:i?Z.zx.Colors.GREEN:Z.zx.Colors.BRAND,children:t}):(0,r.jsx)(Z.v6,{className:k().marginTop40})};return e}var i=o.prototype;i.componentDidMount=function(){var e=this.props,t=e.isUnderage,n=e.login;v.default.track(b.rMx.INVITE_VIEWED,{},{flush:!0});(0,P.e)("invite");if(!Dr.KO){var r=this.getInviteKey();Re.Z.launch("discord://"+b.Z5c.INVITE(r),(function(){}))}if(!n&&t){var o=this.getInviteKey(),i=(0,ke.fU)(o).baseCode;(0,pe.dL)(b.Z5c.INVITE_LOGIN(i))}}
;i.componentDidUpdate=function(e){var t=this.props,n=t.invite,r=t.nativeAppState,o=t.authenticated,i=t.transitionTo,a=this.getInviteKey();if(a!==this.getInviteKey(e))!function(e){vo.apply(this,arguments)}(a);else if(n.state===b.r2o.APP_NOT_OPENED)this.handleContinue();else if(this.getMode()===mo&&o!==e.authenticated&&o){var s=Pe.default.getFingerprint();if(null!=s){var c=(0,Ce.s)(s);this.track(b.rMx.INVITE_LOGIN_SUCCESSFUL,!0,{prev_user_id:c})}p.Z.acceptInvite({inviteKey:a,context:this.getAcceptInviteContext(ho),skipOnboarding:!0,callback:this.handleContinue})}r!==e.nativeAppState&&r===b.kEZ.OPEN&&this.track(b.rMx.INVITE_APP_INVOKED,!1);if(this.getMode()===yo&&o&&!e.authenticated){if(null!=n.channel){(0,jr.c)(wr.M5.INVITE_UNCLAIMED);null!=n.guild?i(b.Z5c.APP_WITH_INVITE_AND_GUILD_ONBOARDING(n.code)):p.Z.transitionToInvite(n,i)}}};i.getInviteKey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return e.inviteKey};i.getMode=function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return to.a?yo:e.login?mo:yo};i.track=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.props.invite,o=this.getInviteKey(),i=(0,ke.jX)(o),a=t?{guild_id:null!=r.guild?r.guild.id:null,channel_id:null!=r.channel?r.channel.id:null,inviter_id:null!=r.inviter?r.inviter.id:null,invite_code:i}:{invite_code:i};v.default.track(e,so({},a,n))};i.renderSpinner=function(e){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:e}),(0,r.jsx)(Z.Hh,{})]})};i.renderInvalidInvite=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(211086),className:k().marginBottom8}),(0,r.jsx)(Z.Dx,{className:Y()(k().marginTop8,k().marginBottom8),children:M.Z.Messages.AUTH_INVALID_INVITE_TITLE}),(0,r.jsx)(Z.DK,{children:e?M.Z.Messages.AUTH_BANNED_INVITE_BODY:M.Z.Messages.AUTH_INVALID_INVITE_BODY
}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP),(0,r.jsx)(Z.zx,{onClick:function(){return window.open(cr.Z.getArticleURL(b.BhN.INVALID_INVITES),"_blank")},look:Z.zx.Looks.LINK,color:Z.zx.Colors.LINK,className:k().marginTop8,children:M.Z.Messages.AUTH_INVALID_INVITE_TIP})]})};i.renderErrorInvite=function(){var e,t;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(eo.Z,{invite:this.props.invite,error:null===(e=this.state.error)||void 0===e?void 0:e.message}),(null===(t=this.state.error)||void 0===t?void 0:t.code)===b.evJ.INVALID_CANNOT_FRIEND_SELF?this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP):this.renderButton(M.Z.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept)]})};i.renderExpiredInvite=function(){return this.renderInvalidInvite(!1)};i.renderBannedInvite=function(){return this.renderInvalidInvite(!0)};i.renderAppOpened=function(){var e=this;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.APP_OPENED_TITLE}),(0,r.jsx)(Z.DK,{
children:M.Z.Messages.APP_OPENED_BODY}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP,(function(){return e.handleContinue()}))]})};i.renderAuthenticatedHeader=function(){var e=this.props.invite;return null!=e.stage_instance&&null!=e.guild?(0,r.jsx)(Qr.Z,{stageInstance:e.stage_instance,guild:e.guild}):null!=e.guild_scheduled_event?(0,r.jsx)(Jr.r,{channel:e.channel,guildScheduledEvent:e.guild_scheduled_event}):(0,r.jsx)(eo.Z,{invite:e})};i.renderAuthenicatedFooter=function(){var e=this.props.invite;return null==e.stage_instance&&null==e.guild_scheduled_event||null==e.guild?null:(0,r.jsx)(Z.ZP,{className:k().marginTop20,children:(0,r.jsx)(Qr.y,{guild:e.guild,onlineCount:e.approximate_presence_count})})};i.renderAuthenticatedOrDownload=function(){var e=null!=this.props.invite.stage_instance?M.Z.Messages.INSTANT_INVITE_ACCEPT_STAGE:M.Z.Messages.INSTANT_INVITE_ACCEPT;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(Z.ZP,{
children:[this.renderAuthenticatedHeader(),this.renderButton(e,this.handleAccept)]}),this.renderAuthenicatedFooter()]})};i.renderContinue=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{children:M.Z.Messages.APP_NOT_OPENED}),this.renderButton(M.Z.Messages.CONTINUE_TO_WEBAPP)]})};i.render=function(){var e=this,t=this.props,n=t.invite,o=t.nativeAppState,i=t.authenticated,a=t.transitionTo,s=t.location;if(o===b.kEZ.OPEN)return this.renderAppOpened();switch(n.state){case b.r2o.APP_OPENED:return this.renderAppOpened();case b.r2o.APP_NOT_OPENED:return this.renderContinue();case b.r2o.RESOLVING:return to.a?this.renderSpinner(M.Z.Messages.DEFAULT_INPUT_PLACEHOLDER):this.renderSpinner(M.Z.Messages.APP_OPENING);case b.r2o.APP_OPENING:return this.renderSpinner(M.Z.Messages.APP_OPENING);case b.r2o.RESOLVED:return i||!Dr.KO?this.renderAuthenticatedOrDownload():this.getMode()===mo?(0,r.jsx)(lr.Z,{invite:n,transitionTo:a,location:s}):(0,r.jsx)(fr.Z,{invite:n,onLoginStart:function(){
return e.track(b.rMx.INVITE_LOGIN,!0)},location:s,transitionTo:a});case b.r2o.ACCEPTING:return this.renderSpinner(M.Z.Messages.INSTANT_INVITE_ACCEPTING);case b.r2o.EXPIRED:return this.renderExpiredInvite();case b.r2o.BANNED:return this.renderBannedInvite();case b.r2o.ERROR:return this.renderErrorInvite();case b.r2o.ACCEPTED:default:return null}};return o}(o.PureComponent);const bo=c.ZP.connectStores([it.Z,w.Z,Pe.default,or,Xr.Z],(function(e){var t,n=e.inviteKey;return{invite:null!==(t=it.Z.getInvite(n))&&void 0!==t?t:{},nativeAppState:or.getState(n),authenticated:Pe.default.isAuthenticated(),defaultRoute:w.Z.defaultRoute,isUnderage:Xr.Z.isUnderageAnonymous()}}))(go);var _o=n(489898);function Eo(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}var Oo=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Io=function(e){var t,n,o=e.match,i=e.location,a=(n=(t=function(e,t){
return Oo(this,(function(n){switch(n.label){case 0:return[4,(0,An.s)(b.jEp.PICK_GUILD_SETTINGS,{section:e.params.section,subsection:e.params.subsection,search:t.search})];case 1:n.sent();return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Eo(i,r,o,a,s,"next",e)}function s(e){Eo(i,r,o,a,s,"throw",e)}a(void 0)}))}),function(e,t){return n.apply(this,arguments)});return(0,r.jsx)(Dn,{match:o,location:i,attemptDeepLink:a})};var No=n(874713),To=n(744),So=n(796667),Ao=n(560221),xo=n(83129),jo=n.n(xo);function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Po(e){Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Po(e)}function Ro(e,t){return!t||"object"!==Zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wo(e,t){
wo=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return wo(e,t)}var Zo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Do(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Po(e);if(t){var o=Po(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ro(this,n)}}c.ZP.initialize();var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&wo(e,t)}(o,e);var t=Do(o);function o(){Co(this,o);var e;(e=t.apply(this,arguments)).handleVerify=function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,D.Z)(e.props.location);null!=n&&l.Z.verify(n,t)};e.handleLogin=function(){(0,e.props.transitionTo)(b.Z5c.LOGIN)};e.handleOpenApp=function(){var t=e.props.verifyingUserId;v.default.track(b.rMx.VERIFY_ACCOUNT_APP_OPENED,{verifying_user_id:t});(0,To.Z)("verify_email")};return e}var i=o.prototype;i.componentDidMount=function(){this.handleVerify();(0,P.e)("verify_email")};i.renderVerifyCaptcha=function(){var e=this.props.verifyErrors;return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(143613),className:Y()(jo().image,k().marginBottom20)}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.VERIFICATION_VERIFYING}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages.VERIFICATION_BODY_ALT}),(0,r.jsx)("div",{className:ne().flexCenter,children:(0,r.jsx)(So.Z,{captchaService:(0,Ao.B)(e.captcha_service),sitekey:e.captcha_sitekey,className:jo().recaptcha,theme:et.BR.DARK,
onVerify:this.handleVerify})})]})};i.renderVerifyFailed=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(639915),className:Y()(jo().image,k().marginBottom20)}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,children:M.Z.Messages.VERFICATION_EXPIRED}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages._AUTH_VERFICATION_EXPIRED_SUGGESTION}),(0,r.jsx)(Z.zx,{onClick:this.handleLogin,children:M.Z.Messages._LOGIN})]})};i.renderVerifySucceeded=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(143613),className:Y()(jo().image,k().marginBottom20)}),(0,r.jsx)(Z.Dx,{className:k().marginBottom40,children:M.Z.Messages.VERIFICATION_VERIFIED}),(0,r.jsx)(Z.zx,{onClick:this.handleOpenApp,children:M.Z.Messages.VERIFICATION_OPEN_DISCORD})]})};i.renderVerifying=function(){return(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{src:n(100539),className:Y()(jo().image,k().marginBottom20)}),(0,r.jsx)(Z.Dx,{className:k().marginBottom8,
children:M.Z.Messages.VERIFICATION_VERIFYING}),(0,r.jsx)(Z.DK,{className:k().marginBottom40,children:M.Z.Messages.ACTION_MAY_TAKE_A_MOMENT}),(0,r.jsx)(Z.zx,{submitting:!0,color:Z.zx.Colors.PRIMARY})]})};i.render=function(){var e=this.props,t=e.verifyErrors,n=e.verifyFailed,r=e.verifySucceeded;return null!=t&&null!=t.captcha_key&&""!==t.captcha_key?this.renderVerifyCaptcha():n?this.renderVerifyFailed():r?this.renderVerifySucceeded():this.renderVerifying()};return o}(o.PureComponent);Mo.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const Lo=c.ZP.connectStores([Pe.default],(function(){return{verifyFailed:Pe.default.didVerifyFail(),verifyErrors:Pe.default.getVerifyErrors(),verifySucceeded:Pe.default.didVerifySucceed(),fingerprint:Pe.default.getFingerprint(),verifyingUserId:Pe.default.getVerifyingUserId()}}))(Mo);n(639472);function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uo(e,t,n,r,o,i,a){try{
var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bo(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Fo(e){Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Fo(e)}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Bo(e,t,n[t])}))}return e}function Vo(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e)
;t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Ko(e,t){return!t||"object"!==Yo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zo(e,t){zo=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return zo(e,t)}function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ko(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Fo(e);if(t){var o=Fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ko(this,n)}}var Xo=function(e,t){var n,r,o,i,a={label:0,
sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{
value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};c.ZP.initialize();var Jo=(0,mn.Z)(lr.Z),Qo=(0,mn.Z)(_o.Z),$o=(0,mn.Z)(bo),ei=(0,mn.Z)((function(e){var t={guildTemplate:(0,c.e7)([ue.Z],(function(){return ue.Z.getGuildTemplate(e.code)})),nativeAppState:(0,c.e7)([or],(function(){return or.getState(e.code)})),authenticated:(0,c.e7)([Pe.default],(function(){return Pe.default.isAuthenticated()})),defaultRoute:(0,c.e7)([w.Z],(function(){return w.Z.defaultRoute}))};return(0,r.jsx)(Kr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ur(e,t,n[t])}))}return e}({},e,t))})),ti=(0,mn.Z)(Tr),ni=(0,mn.Z)((function(e){var t=e.inviteKey,n=e.transitionTo,i=(0,c.e7)([it.Z],(function(){return it.Z.getInvite(t)}));o.useEffect((function(){
v.default.track(b.rMx.INVITE_VIEWED,{},{flush:!0});(0,P.e)("invite_mobile")}),[]);return(0,r.jsx)(cn,{invite:i,onAcceptInvite:function(e){!function(e,t,n){var r,o,i;e.preventDefault();v.default.track(b.rMx.INVITE_APP_OPENED,{invite_code:(0,ke.jX)(t),guild_id:null==n||null===(r=n.guild)||void 0===r?void 0:r.id,channel_id:null==n||null===(o=n.channel)||void 0===o?void 0:o.id,inviter_id:null==n||null===(i=n.inviter)||void 0===i?void 0:i.id});var a=null!=n&&n.state!==b.r2o.EXPIRED&&n.state!==b.r2o.BANNED?t:void 0,s=Pe.default.getFingerprint(),c=null!=s?s:Pe.default.getId();p.Z.openApp(a,void 0,c)}(e,t,i)},transitionTo:n})})),ri=(0,mn.Z)(fr.Z),oi=(0,mn.Z)(Tn),ii=(0,mn.Z)(Sn),ai=(0,mn.Z)(Lo),si=(0,mn.Z)(ce),ci=(0,mn.Z)(No.Z),ui=(0,mn.Z)(Wn),li=(0,mn.Z)(z),fi=(0,mn.Z)((function(e){var t=e.location,i=Le(o.useState(!1),2),a=i[0],s=i[1],u=(0,c.e7)([Ie],(function(){return Ie.getState()})),l=u.verifySuccess,f=u.verifyErrors,p=u.redirectGuildId;o.useEffect((function(){var e=(0,D.Z)(t)
;fe.Z.verify(e);(0,P.e)("verify_hub_email")}),[t]);var d=function(){we(p);s(!0)};return a?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Dx,{className:De().title,children:M.Z.Messages.APP_OPENED_TITLE}),(0,r.jsx)(Z.DK,{className:De().subtitle,children:M.Z.Messages.APP_OPENED_BODY}),(0,r.jsx)(Z.zx,{className:De().spacedButton,onClick:function(){return(0,pe.uL)(b.Z5c.CHANNEL(p))},children:M.Z.Messages.CONTINUE_TO_WEBAPP})]}):l?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{className:De().image,src:n(143613)}),(0,r.jsx)(Z.Dx,{className:De().title,children:M.Z.Messages.VERIFICATION_VERIFIED}),(0,r.jsx)(Z.zx,{onClick:d,children:M.Z.Messages.VERIFICATION_OPEN_DISCORD})]}):null!=f?(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{className:De().image,src:n(639915)}),(0,r.jsx)(Z.Dx,{className:De().title,children:M.Z.Messages.VERFICATION_EXPIRED}),(0,r.jsx)(Z.DK,{className:De().subtitle,children:M.Z.Messages._AUTH_VERFICATION_EXPIRED_SUGGESTION}),(0,r.jsx)(Z.zx,{onClick:d,
children:M.Z.Messages.VERIFICATION_OPEN_DISCORD})]}):(0,r.jsxs)(Z.ZP,{children:[(0,r.jsx)(Z.Ee,{className:De().image,src:n(100539)}),(0,r.jsx)(Z.Dx,{className:De().title,children:M.Z.Messages.VERIFICATION_VERIFYING}),(0,r.jsx)(Z.DK,{className:De().subtitle,children:M.Z.Messages.ACTION_MAY_TAKE_A_MOMENT}),(0,r.jsx)(Z.zx,{submitting:!0,color:Z.zx.Colors.PRIMARY})]})})),pi=(0,mn.Z)(kn),di=(0,mn.Z)(Io),hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&zo(e,t)}(n,e);var t=qo(n);function n(){Go(this,n);var e;(e=t.apply(this,arguments)).state={splash:null,redirectTo:null,backgroundId:null};return e}var o=n.prototype;o.componentDidMount=function(){var e=this.props,t=e.inviteKey,n=e.hasLoadedExperiments,r=e.isAuthenticated;if(null!=t){!n&&r&&l.Z.getExperiments(!0);v.default.track(b.rMx.INVITE_OPENED,{
invite_code:(0,ke.jX)(t),load_time:hn()},{flush:!0})}(n||to.a)&&this.resolveInvite();this.resolveGiftCode();this.resolveGuildTemplate();x.initialize()};o.componentDidUpdate=function(e){var t,n;e.hasLoadedExperiments||!this.props.hasLoadedExperiments||to.a||this.resolveInvite();(null===(t=e.invite)||void 0===t?void 0:t.state)!==(null===(n=this.props.invite)||void 0===n?void 0:n.state)&&this.maybeFetchApplicationSplash()};o.componentWillUnmount=function(){x.terminate()};o.maybeFetchApplicationSplash=function(){var e=this,t=this.props.invite;if((null==t?void 0:t.state)===b.r2o.RESOLVED){var n=t.target_application;null!=n&&(0,fn.GR)(n.id,["embedded_splash"]).then((function(t){var n=Wo(t,1)[0];return e.setState({backgroundId:n})}))}};o.resolveInvite=function(){var e=this.props.inviteKey;if(null!=e){var t,n,r=(n=(t=function(){var t;return Xo(this,(function(n){switch(n.label){case 0:return[4,p.Z.resolveInvite(e,b.Usc.INVITE)];case 1:null!=(t=n.sent().invite)&&C(t);return[2]}}))},function(){
var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){Uo(i,r,o,a,s,"next",e)}function s(e){Uo(i,r,o,a,s,"throw",e)}a(void 0)}))}),function(){return n.apply(this,arguments)});r();p.Z.openNativeAppModal(e)}};o.resolveGuildTemplate=function(){var e=this.props.guildTemplateCode;if(null!=e){v.default.track(b.rMx.GUILD_TEMPLATE_OPENED,{guild_template_code:e,load_time:hn()},{flush:!0});le.Z.resolveGuildTemplate(e);le.Z.openNativeAppModal(e)}};o.resolveGiftCode=function(){var e=this.props.giftCode;null!=e&&f.Z.resolveGiftCode(e,!0,!0).then((function(t){null!=t&&null==t.giftCode.promotion&&u.Z.wait((function(){return f.Z.openNativeGiftCodeModal(e)}))}))};o.render=function(){var e=this.state,t=e.splash,n=e.redirectTo,o=this.props.inviteKey;return(0,r.jsxs)(vn.Z,{splash:t,children:[(0,r.jsx)(j.Z,{path:b.Z5c.LOGIN_HANDOFF,render:function(e){return(0,r.jsx)(Qo,Vo(Ho({},e),{redirectTo:n}))}}),(0,r.jsx)(j.Z,{impressionName:a.zs.USER_LOGIN,path:b.Z5c.LOGIN,
render:function(e){return(0,r.jsx)(Jo,Vo(Ho({},e),{redirectTo:n}))}}),(0,r.jsx)(j.Z,{impressionName:a.zs.USER_REGISTRATION,path:b.Z5c.REGISTER,render:function(e){return to.a?(0,r.jsx)($o,Vo(Ho({},e),{redirectTo:n,inviteKey:o})):(0,r.jsx)(ri,Vo(Ho({},e),{redirectTo:n}))}}),(0,r.jsx)(j.Z,{path:b.Z5c.GIFT_CODE_LOGIN(":giftCode"),render:function(e){return(0,r.jsx)(ti,Ho({login:!0},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.GIFT_CODE(":giftCode"),render:function(e){return(0,r.jsx)(ti,Ho({},e))}}),(0,r.jsx)(j.Z,{path:[b.Z5c.INVITE_LOGIN(":inviteCode"),b.Z5c.INVITE(":inviteCode")],render:function(e){var t=e.match,n=t.params.inviteCode,o=t.path,i=e.location,a=e.transitionTo,c=(0,ke.mb)(n,i.search);return s.tq||s.Em?(0,r.jsx)(ni,{inviteKey:c,transitionTo:a},c):(0,r.jsx)($o,{inviteKey:c,location:i,transitionTo:a,login:o===b.Z5c.INVITE_LOGIN(":inviteCode")})}}),(0,r.jsx)(j.Z,{path:[b.Z5c.GUILD_TEMPLATE_LOGIN(":guildTemplateCode"),b.Z5c.GUILD_TEMPLATE(":guildTemplateCode")],render:function(e){
var t=e.match,n=t.params.guildTemplateCode,o=t.path,i=e.location,a=e.transitionTo;return s.tq||s.Em?(0,r.jsx)(Yr,{code:n},n):(0,r.jsx)(ei,{code:n,location:i,transitionTo:a,login:o===b.Z5c.GUILD_TEMPLATE_LOGIN(":guildTemplateCode")})}}),(0,r.jsx)(j.Z,{path:b.Z5c.VERIFY,render:function(e){return(0,r.jsx)(ai,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.VERIFY_HUB_EMAIL,render:function(e){return(0,r.jsx)(fi,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.VERIFY_REQUEST,render:function(e){return(0,r.jsx)(si,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.DISABLE_EMAIL_NOTIFICATIONS,render:function(e){return(0,r.jsx)(ui,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.DISABLE_SERVER_HIGHLIGHT_NOTIFICATIONS,render:function(e){return(0,r.jsx)(li,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.AUTHORIZE_IP,render:function(e){return(0,r.jsx)(oi,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.AUTHORIZE_PAYMENT,render:function(e){return(0,r.jsx)(ii,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.RESET,render:function(e){return(0,r.jsx)(ci,Ho({},e))}}),(0,
r.jsx)(j.Z,{path:b.Z5c.PICK_GUILD_SETTINGS(":section?",":subsection?"),render:function(e){return(0,r.jsx)(di,Ho({},e))}}),(0,r.jsx)(j.Z,{path:b.Z5c.CHANNEL(":guildId",":channelId?",":messageId?"),render:function(e){return(0,r.jsx)(pi,Ho({},e))}})]})};n.getDerivedStateFromProps=function(e,t){var n,r=e.invite,o=e.location,a=t.backgroundId,s=null!==(n=(0,i.parse)(o.search).redirect_to)&&void 0!==n?n:null;null!=s&&""!==s&&(0,yn.B)(s)&&!s.startsWith(b.Z5c.ME)||(s=null);var c=null;if(null==r)c=(0,pn.gK)(s);else if((null==r?void 0:r.state)===b.r2o.RESOLVED){var u=r.guild,l=r.target_application;null!=l?null!=a&&(c=(0,fn.xF)(l.id,a,1024)):null!=u&&"string"==typeof u.splash&&(c=st.ZP.getGuildSplashURL({id:u.id,splash:u.splash}))}return{redirectTo:s,splash:c}};return n}(o.PureComponent);const yi=c.ZP.connectStores([Pe.default,it.Z,ln.Z,un.Z,ue.Z],(function(e){var t,n,r,o=e.match,i=e.location,a=null==o||null===(t=o.params)||void 0===t?void 0:t.inviteCode,s=to.a?to.Y:void 0,c=null!=a?(0,
ke.mb)(a,i.search):s,u=null==o||null===(n=o.params)||void 0===n?void 0:n.giftCode,l=null==o||null===(r=o.params)||void 0===r?void 0:r.guildTemplateCode;return{inviteKey:c,isAuthenticated:Pe.default.isAuthenticated(),giftCode:u,guildTemplateCode:l,gift:null!=u?ln.Z.get(u):null,invite:null!=c?it.Z.getInvite(c):null,guildTemplate:null!=l?ue.Z.getGuildTemplate(l):null,hasLoadedExperiments:un.Z.hasLoadedExperiments}}))(hi)},590499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(785893),o=n(667294),i=n(23279),a=n.n(i),s=n(738017),c=n(606076),u=n(39802),l=n(912551),f=n(152804),p=n.n(f),d=n(724647),h=n.n(d);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function g(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){m(e,t,n[t])}))}return e}function b(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){
var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}var I=(0,l.Mg)(h().responsiveWidthMobile),N=0,T=1,S={friction:10,tension:130};const A=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(o,t);var n=O(o);function o(){y(this,o);var e;(e=n.apply(this,arguments)).anim=new s.Z.Value(N);e.state={shouldAnimate:!c.tq};e.handleResize=function(){var t=window.innerWidth>I;!e.state.shouldAnimate&&t&&e.anim.setValue(T);e.setState({shouldAnimate:t})};e.handleResizeDebounced=a()(e.handleResize,60);return e}var i=o.prototype;i.componentDidMount=function(){if(!c.tq){window.addEventListener("resize",this.handleResizeDebounced);this.handleResize()}};i.componentWillUnmount=function(){clearTimeout(this.timeout)
;window.removeEventListener("resize",this.handleResizeDebounced)};i.componentWillAppear=function(e){this.state.shouldAnimate?this.animateTo(T,e):e()};i.componentWillEnter=function(e){var t=this;if(this.state.shouldAnimate){clearTimeout(this.timeout);this.timeout=setTimeout((function(){return t.animateTo(T,e)}),40)}else e()};i.componentWillLeave=function(e){this.state.shouldAnimate?this.animateTo(N,e):e()};i.animateTo=function(e,t){s.Z.spring(this.anim,g({toValue:e},S)).start(t)};i.getAnimatedStyle=function(e){return this.state.shouldAnimate?{opacity:this.anim,transform:e?void 0:[{scale:this.anim.interpolate({inputRange:[0,1],outputRange:[1.05,1]})},{translateY:this.anim.interpolate({inputRange:[0,1],outputRange:["-70px","0px"]})},{translateZ:0}]}:null};i.render=function(){var t=this;return(0,r.jsx)("div",{className:p().wrapper,children:(0,r.jsx)(u.S.Consumer,{children:function(n){var o=n.reducedMotion;return(0,r.jsx)(s.Z.div,{style:t.getAnimatedStyle(o.enabled),children:(0,
r.jsx)(e,g({},t.props))})}})})};return o}(o.Component)}},98109:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(606076),c=n(331535),u=n(751615),l=n(589175);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){p(e,t,n[t])}))}return e}function y(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}
function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}(n,e);var t=_(n);function n(){f(this,n);return t.apply(this,arguments)}n.prototype.render=function(){
var e=this.props,t=e.children,n=e.location,i=e.history,a=e.staticContext,s=(e.match,m(e,["children","location","history","staticContext","match"])),c=null,f=null;o.Children.forEach(t,(function(e){if(null==c&&o.isValidElement(e)){var t=e.props,r=t.component,s=t.render,l=m(t,["component","render"]),p=l.path||l.from;if(null==(c=null!=p?(0,u.LX)(n.pathname,y(h({},l),{path:p})):null))return;l=y(h({},l),{key:p,location:n,match:c,history:i,staticContext:a});null!=r?f=o.createElement(r,l):null!=s&&(f=s(l))}}));return(0,r.jsx)(l.Z,y(h({},s),{children:f}))};return n}(o.Component);const O=(0,u.EN)(E);var I=n(655695),N=n(4659),T=n(699685),S=n(912551),A=n(706908),x=n(461061),j=n(863684),C=n.n(j);function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return P(e)}function R(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return e}(e):t}function w(e,t){w=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return w(e,t)}var Z=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}var M=(0,
S.Mg)(C().responsiveWidthMobile),L=[x.Z5c.LOGIN,x.Z5c.LOGIN_HANDOFF,x.Z5c.REGISTER,x.Z5c.INVITE(""),x.Z5c.GIFT_CODE(""),x.Z5c.GUILD_TEMPLATE_LOGIN(""),x.Z5c.GUILD_TEMPLATE(""),x.Z5c.DISABLE_EMAIL_NOTIFICATIONS,x.Z5c.DISABLE_SERVER_HIGHLIGHT_NOTIFICATIONS,x.Z5c.BILLING_PREMIUM_SUBSCRIBE,x.Z5c.BILLING_PAYMENT_SOURCES_CREATE,x.Z5c.BILLING_PAYMENTS,x.Z5c.BILLING_PREMIUM_SWITCH_PLAN,x.Z5c.BILLING_GUILD_SUBSCRIPTIONS_PURCHASE,x.Z5c.VERIFY,x.Z5c.VERIFY_HUB_EMAIL,x.Z5c.AUTHORIZE_IP,x.Z5c.AUTHORIZE_PAYMENT,x.Z5c.RESET,x.Z5c.HANDOFF];function k(e){return L.some((function(t){return e.startsWith(t)}))}const U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&w(e,t)}(n,e);var t=D(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r
;(r=t.call(this,e)).handleResize=function(){r.setState({isMobileWidth:window.innerWidth<=M})};r.state={isMobileWidth:window.innerWidth<=M};return r}var i=n.prototype;i.componentDidMount=function(){window.addEventListener("resize",this.handleResize)};i.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)};i.mobileTransitionTo=function(e,t){if(k(e))(0,I.uL)(e,t);else{var n=null!=t&&null!=t.search?t.search:null;window.location=null==n?e:"".concat(e,"?").concat(n)}};i.mobileReplaceWith=function(e){k(e)?(0,I.dL)(e):window.location=e};i.renderDefault=function(){var e=this.props.splash,t=(0,r.jsx)(O,{component:o.Fragment,children:o.Children.map(this.props.children,(function(e){return o.cloneElement(e,{transitionTo:I.uL,replaceWith:I.dL})}))});return(0,r.jsx)("div",{className:C().characterBackground,children:(0,r.jsx)(c.y5,{forceLevel:1,children:null!=e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{show:!0,className:a()(C().logo)}),(0,r.jsx)(T.h,{splash:e,
children:t})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.Z,{className:C().artwork,preserveAspectRatio:"xMinYMin slice"}),t]})})})};i.renderMobile=function(){var e=this;return(0,r.jsx)(O,{component:o.Fragment,children:o.Children.map(this.props.children,(function(t){return o.cloneElement(t,{transitionTo:e.mobileTransitionTo,replaceWith:e.mobileReplaceWith})}))})};i.render=function(){var e=this.state.isMobileWidth,t=navigator.userAgent.includes("GameLauncher");return e||s.tq||s.Em||t?this.renderMobile():this.renderDefault()};return n}(o.Component)},882923:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(363010),c=n(182102),u=n(367124),l=n(859023),f=n(916957),p=n(512238),d=n(693518),h=n(908570),y=n(862325),m=n(298716),v=n(959797),g=n(889710),b=n.n(g),_=n(3066),E=n.n(_),O=n(380203),I=n.n(O);const N=s.ZP.connectStores([p.Z,u.Z,f.Z,l.default],(function(e){var t=e.giftCode,n=p.Z.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,
subscriptionPlan:null!=r?(0,y.oE)(r):null,application:u.Z.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))((function(e){var t=e.error,n=e.giftCode,i=e.gifter,s=e.sku,u=e.application,l=e.subscriptionPlan,f=null==i?v.Z.Messages.GIFT_CODE_AUTH_GIFTED:v.Z.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:i.username}),p=s.name;null!=l&&(p=(l.interval===m.rV.MONTH?v.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:v.Z.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:s.name,intervalCount:l.intervalCount}));return(0,r.jsxs)(o.Fragment,{children:[null!=n.giftStyle?(0,r.jsx)(c.Z,{giftStyle:n.giftStyle,className:b().seasonalIcon}):(0,r.jsx)(h.qE,{src:null!=i?i.getAvatarURL(void 0,100):null,size:h.qE.Sizes.DEPRECATED_SIZE_100,className:I().marginBottom20}),null!=t?(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(h.DK,{children:v.Z.Messages.INVITE_MODAL_ERROR_TITLE}),(0,r.jsx)(h.Dx,{children:t})]}):(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(h.DK,{children:f}),(0,
r.jsxs)(h.Dx,{className:a()(I().marginTop8,E().flexCenter),children:[(0,r.jsx)(d.Z,{size:d.Z.Sizes.MEDIUM,className:b().applicationIcon,game:u,skuId:s.id}),p]})]})]})}))},311854:(e,t,n)=>{"use strict";n.d(t,{q:()=>wt,Z:()=>Mt});var r=n(785893),o=n(667294),i=n(970112),a=n(294184),s=n.n(a),c=n(517563),u=n(606076),l=n(363010),f=n(331535),p=n(173436),d=n(822567),h=n(476575),y=n(584268),m=n(326691),v=n(674500),g=n(88468),b=n(865622),_=n(675860),E=n(444450),O=n(901991),I=n(631134),N=n(932847),T=n(468811),S=n.n(T),A=n(461061);function x(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){x(i,r,o,a,s,"next",e)}function s(e){x(i,r,o,a,s,"throw",e)}a(void 0)}))}}var C=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function P(){return(P=j((function(e){var t,n,r;return C(this,(function(o){
switch(o.label){case 0:return[4,_.Z.post({url:A.ANM.HANDOFF,body:{key:e},oldFormErrors:!0,retries:1})];case 1:t=o.sent(),n=t.body;if(null!=(r=n.handoff_token))return[2,r];throw new Error("Missing handoff token!")}}))}))).apply(this,arguments)}const R={generateNonce:function(){return S().v4()},createHandoffToken:function(e){return P.apply(this,arguments)}};var w=n(813292),Z=n.n(w);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L,k="mweb_handoff_nonce",U="mweb_handoff_nonce_expiration";!function(e){e.NONCE_MISSING="nonce_missing";e.NONCE_EXPIRED="nonce_expired";e.NULL_HANDOFF_TOKEN="deep_link_failed";e.HANDOFF_EXCHANGE="handoff_exchange"}(L||(L={}));var G=new Set([L.NONCE_MISSING,L.NONCE_EXPIRED,L.HANDOFF_EXCHANGE]),B=new Set([L.NULL_HANDOFF_TOKEN]),F=function(){E.Z.remove(k);E.Z.remove(U)};const H=function(){var e=(0,l.e7)([I.default],(function(){return I.default.getFingerprint()})),t=(0,c.parse)(window.location.search),n=t.fingerprint,i=t.handoff_token,a=Array.isArray(n)?n.length>1?n[0]:null:n,s=null!=a?a:null!==e?e:void 0
;o.useEffect((function(){null!==a&&e!==a&&p.Z.dispatch({type:"FINGERPRINT",fingerprint:a})}),[a,e]);var u=M(o.useState(null),2),h=u[0],y=u[1],m=o.useCallback((function(e){y(e);N.default.track(A.rMx.MOBILE_WEB_HANDOFF_FAILURE,{reason:e,fingerprint:(0,b.K)(s)},{fingerprint:s})}),[y,s]),v=E.Z.get(k);"null"===i&&null===h&&m(L.NULL_HANDOFF_TOKEN);null!=i&&"null"!==i&&null==v&&null===h&&m(L.NONCE_MISSING);o.useEffect((function(){if(null!=v){var e=E.Z.get(U);if(null==e||Date.now()>=e){m(L.NONCE_EXPIRED);F()}}}),[v,m]);o.useEffect((function(){if(null!=i&&"null"!==i&&null!=v){if(null!=h)return;_.Z.post({url:A.ANM.HANDOFF_EXCHANGE,body:{key:v,handoff_token:i}}).then((function(e){return d.Z.loginToken(e.body.token,!1)})).then((function(){N.default.track(A.rMx.LOGIN_SUCCESSFUL,{source:A.uRl.MOBILE_WEB_HANDOFF,is_new_user:!1,fingerprint:(0,b.K)(s)});var e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("handoff_token");t.delete("fingerprint");e.search=t.toString()
;window.history.pushState(null,"",e)})).catch((function(){m(L.HANDOFF_EXCHANGE)})).finally((function(){F()}))}}),[i,v,h,s,m]);if(null==s)return null;var g=null==h?(0,r.jsxs)(r.Fragment,{children:[O.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_1,(0,r.jsx)("br",{}),O.MOBILE_WEB_HANDOFF_EXPLANATION_TEXT_LINE_2]}):B.has(h)?O.MOBILE_WEB_HANDOFF_ERROR_NO_TRY_AGAIN:G.has(h)?O.MOBILE_WEB_HANDOFF_ERROR_TRY_AGAIN:void 0;return null!=h&&B.has(h)?(0,r.jsx)("div",{className:Z().errorContainer,children:(0,r.jsx)(f.xv,{color:"interactive-normal",variant:"text-sm/semibold",children:g})}):(0,r.jsxs)("div",{className:Z().container,children:[(0,r.jsx)(f.xv,{variant:"text-sm/semibold",children:g}),(0,r.jsx)(f.zx,{look:f.zx.Looks.INVERTED,color:f.zx.Colors.BRAND_NEW,onClick:function(){var e=R.generateNonce();E.Z.set(k,e);E.Z.set(U,Date.now()+6e4);var t=new URL(A.x0X),n=new URLSearchParams(window.location.search);n.delete("fingerprint");n.delete("handoff_token");var r=new URLSearchParams
;r.set("redirect",encodeURIComponent(window.location.pathname+n.toString()));r.set("key",e);r.set("fingerprint",s);t.search=r.toString();N.default.track(A.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,b.K)(s),source:"mobile_web_handoff",destination:A.x0X},{fingerprint:s,flush:!0});window.location.href=t.toString()},children:(0,r.jsx)(f.xv,{className:Z().buttonText,variant:"text-sm/semibold",children:O.MOBILE_WEB_HANDOFF_BUTTON_TEXT})})]})};var V=n(318007),K=n(506884),z=n(383689),W=n(908570),Y=n(674945),q=n(959797),X=n(177704),J=n.n(X);function Q(e){var t=e.onDismiss;(0,z.Z)({type:K.nv.MODAL,name:K.zs.MULTI_ACCOUNT_SWITCH_LANDING});return(0,r.jsxs)(W.ZP,{className:J().chooseAccountAuthBox,children:[(0,r.jsx)(W.Dx,{children:q.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT}),(0,r.jsx)(f.xv,{className:J().chooseAccountHelpText,variant:"text-md/normal",color:"header-secondary",children:q.Z.Messages.SWITCH_ACCOUNTS_CHOOSE_ACCOUNT_HELPER}),(0,r.jsx)(Y.Z,{
actionText:q.Z.Messages.SWITCH_ACCOUNTS_ACTION_LOG_IN,onAction:function(e){e===Y.W.LOGIN_REQUIRED&&t()}}),(0,r.jsx)("div",{className:J().actions,children:(0,r.jsx)(f.zx,{className:J().chooseAccountButton,look:f.zx.Looks.LINK,color:f.zx.Colors.PRIMARY,onClick:t,size:f.zx.Sizes.MEDIUM,children:(0,r.jsx)(f.xv,{variant:"text-sm/normal",children:q.Z.Messages.SWITCH_ACCOUNTS_ADD_AN_ACCOUNT_BUTTON})})})]})}var $=n(828917),ee=n(614503),te=n(363419),ne=n(324954),re=n(737949),oe=n(18700),ie=n(487502),ae=n(360240),se=n(30741),ce=n(897576),ue=n(560221),le=n(882699),fe=n(742269),pe=n(869488),de=n(882923),he=n(101577),ye=n(681178),me=n(401246),ve=n(688087);function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(){return"undefined"==typeof document||"visible"===document.visibilityState}var Ee=n(538796),Oe=n(832691),Ie=n(40188),Ne=n(766936),Te=n(441143),Se=n.n(Te),Ae=n(775041);function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e,t,n,r,o,i,a){try{
var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){je(i,r,o,a,s,"next",e)}function s(e){je(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}var Ze=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),
0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function De(e){return Me.apply(this,arguments)}function Me(){return(Me=Ce((function(e){var t,n;return Ze(this,(function(r){switch(r.label){case 0:Se()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:n=r.sent();return[2,btoa((t=String).fromCharCode.apply(t,Re(new Uint8Array(n))))]}}))
}))).apply(this,arguments)}function Le(e){return ke.apply(this,arguments)}function ke(){return(ke=Ce((function(e){return Ze(this,(function(t){switch(t.label){case 0:Se()(null!=e.publicKey,"public key cannot be null");return[4,window.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return[2,Be(t.sent())]}}))}))).apply(this,arguments)}function Ue(e){var t;return btoa((t=String).fromCharCode.apply(t,Re(new Uint8Array(e)))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,"")}function Ge(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function Be(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Ce((function(e){return Ze(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.digest({name:"SHA-256"},e)];case 1:return[2,Ue(t.sent())]}}))}))).apply(this,arguments)}function He(e,t){Se()(null!=e.privateKey,"private key cannot be null");return window.crypto.subtle.decrypt({name:"RSA-OAEP",hash:"SHA-256"},e.privateKey,t)}
function Ve(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=Ce((function(e,t){var n,r;return Ze(this,(function(o){switch(o.label){case 0:n=new TextDecoder;return[4,He(e,Ge(t))];case 1:r=o.sent();return[2,n.decode(r)]}}))}))).apply(this,arguments)}function ze(e,t){return We.apply(this,arguments)}function We(){return(We=Ce((function(e,t){return Ze(this,(function(n){switch(n.label){case 0:return[4,He(e,Ge(t))];case 1:return[2,Ue(n.sent())]}}))}))).apply(this,arguments)}function Ye(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Ce((function(e,t){var n,r,o,i,a,s,c;return Ze(this,(function(u){switch(u.label){case 0:return[4,Ve(e,t)];case 1:t=u.sent();n=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/;if(null==(r=t.match(n)))throw new Error("Invalid encoded user record.");o=Pe(r,5),i=o[1],a=o[2],s=o[3],c=o[4];return[2,new Ae.Z({id:i,discriminator:a,avatar:"0"===s?null:s,username:c})]}}))}))).apply(this,arguments)}
var Xe=n(375650),Je=n(702533),Qe=n.n(Je),$e=n(380203),et=n.n($e);function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nt(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nt(i,r,o,a,s,"next",e)}function s(e){nt(i,r,o,a,s,"throw",e)}a(void 0)}))}}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var it,at,st=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:
i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e[e.INITIALIZING=0]="INITIALIZING";e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT";e[e.PENDING_FINISH=2]="PENDING_FINISH";e[e.PENDING_TICKET=3]="PENDING_TICKET";e[e.PENDING_LOGIN=4]="PENDING_LOGIN";e[e.FINISH=5]="FINISH"}(it||(it={}));!function(e){e[e.QR_CODE=0]="QR_CODE";e[e.CONFIRM=1]="CONFIRM"}(at||(at={}));var ct=n(182765),ut=new Oe.Z("LoginQRSocket");function lt(e){var t=ot(o.useState(0),2),n=t[0],r=t[1],i=ot(o.useState(!1),2),a=i[0],s=i[1],c=ot(o.useState({step:it.INITIALIZING
}),2),u=c[0],l=c[1],f=ot(o.useState(null),2),p=f[0],d=f[1],h=function(){var e=be((0,o.useState)(_e()),2),t=e[0],n=e[1];(0,o.useEffect)((function(){var e=function(){n(_e())};window.addEventListener("visibilitychange",e);return function(){window.removeEventListener("visibilitychange",e)}}),[n]);return t}(),y=o.useMemo((function(){return new ye.Z(1500,3e4)}),[]),m=o.useRef();m.current=o.useCallback((function(){l({step:it.INITIALIZING});if(h)r((function(e){return e+1}));else{ut.info("document is not visible, will defer reconnection when document becomes visible.");s(!0)}}),[h]);var v=o.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(m)()}),[m]),g=o.useCallback((function(){ut.error("Could not complete QR code login, trying to restart with a new QR code.");l({step:it.INITIALIZING});y.pending||y.fail(v)}),[v,y]);o.useEffect((function(){if(h&&a&&u.step===it.INITIALIZING){
ut.info("reconnecting, now that document is visible");s(!1);r((function(e){return e+1}))}}),[u,h,a,s]);o.useEffect((function(){var t=function(){if(null!=s)return s;throw new Error("No key pair set")},n=Date.now(),r="wss:".concat(window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT,"/?v=2"),o=new WebSocket(r);ut.info("[0ms] connecting to ".concat(r));var i,a=function(e){return ut.info("[".concat("".concat(Date.now()-n,"ms"),"] ").concat(e))},s=null,c=null,u=null,f=null,p=!0,h=function(){if(p){p=!1;o.send(JSON.stringify({op:"heartbeat"}))}else{a("heartbeat timeout, reconnecting.");o.close();g()}};o.onmessage=(i=rt((function(n){var r,i,s,c,d,m,b,_,E,O,I,N,T;return st(this,(function(S){switch(S.label){case 0:r=n.data;switch((i=JSON.parse(r)).op){case"nonce_proof":return[3,1];case"pending_remote_init":return[3,3];case"pending_login":return[3,5];case"pending_ticket":return[3,6];case"pending_finish":return[3,8];case"finish":return[3,10];case"cancel":return[3,12];case"hello":return[3,13]
;case"heartbeat_ack":return[3,14]}return[3,15];case 1:s=i.encrypted_nonce;return[4,ze(t(),s)];case 2:c=S.sent();a("computed nonce proof");o.send(JSON.stringify({op:"nonce_proof",nonce:c}));return[2];case 3:y.succeed();le.S.dispatch(A.CkL.WAVE_EMPHASIZE);return[4,Le(t())];case 4:if((d=S.sent())!==i.fingerprint)throw new Error("bad fingerprint ".concat(d," !== ").concat(i.fingerprint));a("handshake complete awaiting remote auth.");l({step:it.PENDING_REMOTE_INIT,fingerprint:d});return[2];case 5:null==(m=i.ticket)&&g();l({step:it.PENDING_LOGIN,ticket:m});return[2];case 6:le.S.dispatch(A.CkL.WAVE_EMPHASIZE);a("remote auth handshake started, awaiting ticket/cancel.");b=i.encrypted_user_payload;return[4,Ye(t(),b)];case 7:_=S.sent();l({step:it.PENDING_TICKET,user:_});return[2];case 8:le.S.dispatch(A.CkL.WAVE_EMPHASIZE);a("remote auth handshake started, awaiting finish/cancel.");E=i.encrypted_user_payload;return[4,Ye(t(),E)];case 9:O=S.sent();l({step:it.PENDING_FINISH,user:O});return[2]
;case 10:le.S.dispatch(A.CkL.WAVE_EMPHASIZE);a("remote auth handshake finished.");I=i.encrypted_token;l({step:it.FINISH});return[4,Ve(t(),I)];case 11:N=S.sent();e(N);return[2];case 12:a("remote auth handshake cancelled.");v();return[2];case 13:a("got hello, auth timeout=".concat(i.timeout_ms,"ms"));T=i.heartbeat_interval;f=setTimeout((function(){f=null;h();u=setInterval(h,T)}),Math.floor(T*Math.random()));return[2];case 14:p=!0;S.label=15;case 15:return[2]}}))})),function(e){return i.apply(this,arguments)});o.onopen=rt((function(){var e;return st(this,(function(t){switch(t.label){case 0:return[4,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])];case 1:return[4,De(s=t.sent())];case 2:c=t.sent();return[4,Le(s)];case 3:e=t.sent();a("connected, handshaking with fingerprint: ".concat(e));o.send(JSON.stringify({op:"init",encoded_public_key:c}));d(s);return[2]}}))}));o.onclose=function(e){
a("disconnected, code: ".concat(e.code," ").concat(e.reason));g()};o.onerror=function(e){a("disconnected, error: ".concat(JSON.stringify(e)));g()};return function(){a("cleaning up");o.onopen=function(){return null};o.onmessage=function(){return null};o.onclose=function(){return null};o.onerror=function(){return null};o.close(1e3);y.cancel();null!=f&&clearTimeout(f);null!=u&&clearInterval(u)}}),[v,e,n,y,g]);return{state:u,rsaKeyPair:p,cancel:v,handleFailure:g}}function ft(e){var t=e.text,n=void 0===t?"":t,i=ct,a=ot(o.useState(!1),2),s=a[0],c=a[1];o.useEffect((function(){var e=new Image;e.src=i;e.onload=function(){return c(!0)};e.onerror=function(){return c(!0)}}),[i]);o.useEffect((function(){s&&f.uv.announce(q.Z.Messages.LOGIN_WITH_QR_LOADING_FINISHED_LABEL)}),[s]);return(0,r.jsx)("div",{className:Qe().qrCodeContainer,children:""!==n&&s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me.Z,{className:Qe().qrCode,size:160,text:n}),(0,r.jsx)("div",{className:Qe().qrCodeOverlay,children:(0,
r.jsx)("img",{src:i,alt:""})})]}):(0,r.jsx)("div",{className:Qe().qrCodeOverlay,"aria-label":q.Z.Messages.LOGIN_WITH_QR_LOADING_LABEL,"aria-busy":!0,children:(0,r.jsx)(f.$j,{className:Qe().qrCode,type:f.$j.Type.WANDERING_CUBES,"aria-hidden":!0})})})}var pt=function(e){var t=e.className,n=e.children;return(0,r.jsx)(f.xv,{variant:"text-md/normal",color:"text-danger",className:t,children:n})};function dt(e){var t=e.state,n=e.cancel,o=e.errorMessage;switch(t.step){case it.INITIALIZING:case it.PENDING_REMOTE_INIT:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ft,{text:t.step===it.PENDING_REMOTE_INIT?"https://discord.com/ra/".concat(t.fingerprint):""}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.LOGIN_WITH_QR}),null!=o?(0,r.jsx)(pt,{children:o}):(0,r.jsx)(W.DK,{children:q.Z.Messages.LOGIN_WITH_QR_DESCRIPTION.format()})]});case it.PENDING_TICKET:case it.PENDING_FINISH:var i=t.user;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ve.Z,{className:Qe().qrAvatar,user:i,
size:Ne.ZP.Sizes.SIZE_120,isMobile:!0,status:Xe.Sk.ONLINE}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.CONFIRM_QR_CHECK_YOUR_PHONE}),(0,r.jsx)(W.DK,{children:q.Z.Messages.LOGIN_AS.format({username:"".concat(i.username,"#").concat(i.discriminator)})}),(0,r.jsx)(f.zx,{look:f.zx.Looks.BLANK,color:f.zx.Colors.LINK,size:f.zx.Sizes.MIN,onClick:n,className:Qe().startOverButton,children:q.Z.Messages.QR_CODE_LOGIN_START_OVER})]});case it.PENDING_LOGIN:case it.FINISH:return(0,r.jsx)(f.$j,{type:f.$j.Type.WANDERING_CUBES})}}function ht(e){var t=e.authTokenCallback,i=lt(t),a=i.state,s=i.rsaKeyPair,c=i.cancel,u=i.handleFailure,l=ot(o.useState({}),2),f=l[0],p=l[1],d=function(e){switch(e){case it.INITIALIZING:case it.PENDING_REMOTE_INIT:return at.QR_CODE;case it.PENDING_TICKET:case it.PENDING_FINISH:case it.PENDING_LOGIN:case it.FINISH:return at.CONFIRM}}(a.step),h=ot(o.useState(null),2),y=h[0],m=h[1];a.step===it.INITIALIZING&&Object.keys(f).length>0&&p({})
;o.useEffect((function(){a.step===it.PENDING_LOGIN&&null!=a.ticket&&_.Z.post({url:A.ANM.REMOTE_AUTH_LOGIN,body:{ticket:a.ticket,captcha_key:null==f?void 0:f.captcha_key,captcha_rqtoken:null==f?void 0:f.captcha_rqtoken},oldFormErrors:!0}).then((e=rt((function(e){var n;return st(this,(function(r){switch(r.label){case 0:if(null==s)return[3,5];r.label=1;case 1:r.trys.push([1,3,,4]);return[4,Ve(s,e.body.encrypted_token)];case 2:n=r.sent();t(n);return[3,4];case 3:r.sent();u();return[3,4];case 4:return[3,6];case 5:u();r.label=6;case 6:return[2]}}))})),function(t){return e.apply(this,arguments)})).catch((function(e){var t;if(null!=(null===(t=e.body)||void 0===t?void 0:t.captcha_key)){if(Array.isArray(e.body.captcha_key)&&e.body.captcha_key.includes("invalid-response")){m(q.Z.Messages.LOGIN_WITH_QR_ERROR_SUBTITLE);u();return}n.e(41704).then(n.bind(n,141704)).then((function(t){t.default.showCaptchaAsync((0,Ee.z)(e.body)).then((function(e){p(e)})).catch((function(e){return u()}))}))}else u()}))
;var e}),[a,f,t,s,u]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:Qe().verticalSeparator}),(0,r.jsx)(Ie.Z,{fillParent:!0,className:Qe().qrLogin,step:d,steps:[at.QR_CODE,at.CONFIRM],children:(0,r.jsx)("div",{className:Qe().qrLoginInner,children:(0,r.jsx)(dt,{state:a,cancel:c,errorMessage:y})})})]})}var yt=n(969376),mt=n(971994),vt=n.n(mt);function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Et(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_t(i,r,o,a,s,"next",e)}function s(e){_t(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1
;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function It(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function Nt(e){Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Nt(e)}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){It(e,t,n[t])}))}return e}function St(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function At(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?bt(e):t}function xt(e,t){xt=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return xt(e,t)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)
}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ct=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return At(this,n)}}var Rt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function wt(){return(0,r.jsx)(W.ZP,{children:(0,r.jsx)(f.$j,{})})}function Zt(e){var t=e.authBoxClassName,a=e.loginStatus,s=e.handleReset,c=jt(o.useState(!1),2),u=c[0],l=c[1];return(0,r.jsxs)(W.ZP,{className:t,
children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:et().marginBottom20}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.TWO_FA}),(0,r.jsx)(W.DK,{children:q.Z.Messages.TWO_FA_WEBAUTHN_BODY}),(0,r.jsxs)(W.gO,{className:et().marginTop40,children:[(0,r.jsx)(W.zx,{submitting:u||a===A.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){l(!0);var e=I.default.getWebAuthnChallenge();null!=e?i.U2(JSON.parse(e)).then((function(e){l(!1);d.Z.loginMFA({code:JSON.stringify(e),ticket:I.default.getMFATicket(),isWebAuthn:!0});le.S.dispatch(A.CkL.WAVE_EMPHASIZE)})).catch((function(e){l(!1);p.Z.dispatch({type:"LOGIN_MFA_FAILURE",message:e.message})})):p.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},children:q.Z.Messages.TWO_FA_WEBAUTHN_ACTION}),(0,r.jsx)(W.zx,{look:W.zx.Looks.OUTLINED,className:et().marginTop8,disabled:a===A.u34.LOGGING_IN_MFA_WEBAUTHN,onClick:function(){p.Z.dispatch({type:"LOGIN_MFA_WEBAUTHN_TO_TOTP"})},children:q.Z.Messages.TWO_FA_WEBAUTHN_SWITCH_TOTP}),(0,
r.jsx)(W.zx,{look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,className:et().marginTop8,onClick:s,children:q.Z.Messages.TWO_FA_LOGIN_FOOTER})]})]})}var Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&xt(e,t)}(o,e);var t=Pt(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n,i,a=bt(n=t.call(this,e));n.handleAuthToken=(i=Et((function(e){return Rt(this,(function(t){switch(t.label){case 0:return[4,d.Z.loginToken(e,!1)];case 1:t.sent();N.default.track(A.rMx.LOGIN_SUCCESSFUL,{source:A.uRl.QR_CODE,login_source:a.loginSource,gift_code_sku_id:a.giftCodeSKUId,is_new_user:!1});return[2]}}))})),function(e){return i.apply(this,arguments)});n.setLoginRef=function(e){n.loginRef=e};n.setPasswordRef=function(e){n.passwordRef=e}
;n.setCodeRef=function(e){n.codeRef=e};n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login};n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};n.handleLogin=function(e){var t=n.state,r=t.password,o=t.captchaKey,i=t.undelete;null!=e&&e.preventDefault();n.setState({captchaCallback:n.handleLogin,captchaKey:null});d.Z.login({login:n.getFullLogin(),password:r,undelete:i,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId,invite:n.props.invite});le.S.dispatch(A.CkL.WAVE_EMPHASIZE)};var s=bt(n);n.handleIPAuthorize=function(){var e=Et((function(e){var t,n,r,o,i,a,c;return Rt(this,(function(u){switch(u.label){case 0:t=s.state,n=t.password,r=t.captchaKey,o=t.undelete;s.setState({phoneVerifyError:null,captchaKey:null});i=s.getFullLogin();u.label=1;case 1:u.trys.push([1,4,,5]);return[4,$.Z.verifyPhone(i,e,!1)];case 2:a=u.sent().token;return[4,d.Z.authorizeIPAddress(a)];case 3:u.sent();d.Z.login({
login:i,password:n,undelete:o,captchaKey:r,source:s.loginSource,giftCodeSKUId:s.giftCodeSKUId});le.S.dispatch(A.CkL.WAVE_EMPHASIZE);return[3,5];case 4:null!=(c=u.sent()).body&&null!=c.body.message&&s.setState({phoneVerifyError:c.body.message});return[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var l=bt(n);n.handlePasswordReset=function(){var e=Et((function(e){var t,n,r;return Rt(this,(function(o){switch(o.label){case 0:t=l.props.transitionTo;l.setState({phoneVerifyError:null});o.label=1;case 1:o.trys.push([1,3,,4]);return[4,$.Z.verifyPhone(l.getFullLogin(),e,!1)];case 2:n=o.sent().token;t(A.Z5c.RESET,{search:(0,c.stringify)({token:n,from_login:"true"})});return[3,4];case 3:null!=(r=o.sent()).body&&null!=r.body.message&&l.setState({phoneVerifyError:r.body.message});return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket
;null!=e&&e.preventDefault();d.Z.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId});le.S.dispatch(A.CkL.WAVE_EMPHASIZE)};n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault();d.Z.loginSMS({code:t.replace(/ /g,""),ticket:r});le.S.dispatch(A.CkL.WAVE_EMPHASIZE)};n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault();d.Z.requestSMSToken(t);le.S.dispatch(A.CkL.WAVE_EMPHASIZE)};var p=bt(n);n.handleForgotPassword=function(){var e=Et((function(e){var t,n;return Rt(this,(function(o){switch(o.label){case 0:null!=e&&e.preventDefault();null!=p.loginRef&&p.loginRef.focus();t=p.getFullLogin();n=p.state.captchaKey;p.setState({captchaCallback:p.handleForgotPassword,captchaKey:null});o.label=1;case 1:o.trys.push([1,3,,4]);le.S.dispatch(A.CkL.WAVE_EMPHASIZE);return[4,d.Z.forgotPassword(t,n)];case 2:o.sent();(0,ce.h7)((function(e){return(0,r.jsx)(se.default,St(Tt({
header:q.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:q.Z.Messages.OKAY,confirmButtonColor:W.zx.Colors.BRAND,className:u.tq?vt().mobile:""},e),{children:(0,r.jsx)(f.xv,{variant:"text-md/normal",children:q.Z.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:t})})}))}));return[3,4];case 3:o.sent();return[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();n.handleResendCode=function(){$.Z.resendCode(n.getFullLogin())};n.handleReset=function(e){null!=e&&e.preventDefault();d.Z.loginReset();n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1,redirecting:!1})};n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)};n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)};n.handleGotoRegister=function(){
var e,t=n.state.login,r=n.props,o=r.invite,i=r.giftCode,a=r.guildTemplate,s=r.location,u=r.transitionTo,l=r.redirectTo,f=null!=s?(0,c.parse)(s.search):{};""!==t&&(f.email=t);if(null!=o){f.mode="register";e=A.Z5c.INVITE(o.code)}else if(null!=i){f.mode="register";e=A.Z5c.GIFT_CODE(i.code)}else if(null!=a)e=A.Z5c.GUILD_TEMPLATE(a.code);else if(null!=l){e=A.Z5c.REGISTER;f.redirect_to=l}else e=A.Z5c.REGISTER;d.Z.loginReset();u(e,{search:(0,c.stringify)(f)});le.S.dispatch(A.CkL.WAVE_EMPHASIZE)};var h,y,m=null!=e.location?(0,c.parse)(e.location.search):{};n.state={redirecting:e.authenticated,checkingHandoff:e.handoffAvailable,loginPrefix:"",login:null!==(y=null!==(h=m.email)&&void 0!==h?h:m.login)&&void 0!==y?y:"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null,dismissedChooseAccount:!1};return n}var i=o.prototype;i.componentDidMount=function(){
var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,o=e.invite,i=e.location;t&&!n?(0,h.is)():n&&this.loginOrSSO(n,i,!0);N.default.track(A.rMx.LOGIN_VIEWED,Tt({location:null!=o?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource,authenticated:n},null!=r?(0,v.Z)(r,!1,!1):{}),{flush:!0});d.Z.getLocationMetadata();(0,ne.e)("login")};i.componentDidUpdate=function(e){var t=this.props,n=t.authenticated,r=t.location,o=this.state.checkingHandoff;!n||e.authenticated||o||this.loginOrSSO(n,r);if(e.errors!==this.props.errors)if(this.hasError("password")){var i;null===(i=this.passwordRef)||void 0===i||i.focus()}else if(this.hasError("email")||this.hasError("login")){var a;null===(a=this.loginRef)||void 0===a||a.focus()}else if(this.hasError("code")){var s;null===(s=this.codeRef)||void 0===s||s.focus()}};i.loginOrSSO=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(e&&null!=t){this.setState({redirecting:!0})
;n?d.Z.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t)}};i.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo,o=t.replaceWith,i=null!=e?(0,c.parse)(e.search):{};delete i.redirect_to;if(null!=r)null!=o?o(r):n(r);else if(null==i.service)n(A.Z5c.APP);else{var a=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+A.ANM.SSO,s=St(Tt({},i),{token:I.default.getToken()});window.location="".concat(a,"?").concat((0,c.stringify)(s))}};i.hasError=function(e){return null!=this.props.errors[e]};i.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return(0,r.jsxs)(W.ZP,{className:e,children:[(0,r.jsx)(W.Hh,{}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.BROWSER_HANDOFF_DETECTING_TITLE}),(0,r.jsx)(W.DK,{children:q.Z.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION})]})};i.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,o=e.authBoxClassName;return null==t?null:(0,
r.jsxs)(W.ZP,{className:o,children:[(0,r.jsx)(W.qE,{src:t.getAvatarURL(void 0,100),size:W.qE.Sizes.DEPRECATED_SIZE_100,className:et().marginBottom20}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})}),(0,r.jsx)(W.DK,{className:et().marginBottom40,children:q.Z.Messages._BROWSER_HANDOFF_SUCCESS_BODY}),(0,r.jsxs)(W.gO,{children:[(0,r.jsx)(W.zx,{onClick:function(){return n(A.Z5c.APP)},className:et().marginBottom8,children:q.Z.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})}),(0,r.jsx)(W.zx,{look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,onClick:this.handleReset,children:q.Z.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL})]})]})};i.renderDisabledAccount=function(){
var e=this.props.authBoxClassName,t=this.props.loginStatus===A.u34.ACCOUNT_DISABLED,n=t?q.Z.Messages.ACCOUNT_DISABLED_TITLE:q.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,o=t?q.Z.Messages.ACCOUNT_DISABLED_DESCRIPTION:q.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return(0,r.jsx)(W.ZP,{tag:"form",onSubmit:this.handleReset,className:e,children:(0,r.jsxs)(f.y5,{component:(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:n}),children:[(0,r.jsx)(W.DK,{className:et().marginBottom20,children:o}),(0,r.jsxs)(W.gO,{children:[(0,r.jsx)(W.zx,{color:W.zx.Colors.BRAND,type:"submit",children:q.Z.Messages._RETURN_TO_LOGIN}),(0,r.jsx)("div",{className:s()(et().marginTop8,vt().needAccount),children:q.Z.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion})})]})]})})};i.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,o=t.country;return(0,r.jsxs)(W.ZP,{className:n,children:[(0,r.jsx)(he.R,{}),(0,r.jsxs)(W.gO,{
className:et().marginTop20,children:[(0,r.jsx)(te.Z,{className:et().marginBottom20,alpha2:o.alpha2,countryCode:o.code.split(" ")[0],label:q.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!0,required:!0}),(0,r.jsx)(W.II,{className:et().marginBottom20,label:q.Z.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password,required:!0}),(0,r.jsx)(W.zx,{className:et().marginBottom8,type:"submit",disabled:!0,children:q.Z.Messages._LOGIN}),(0,r.jsx)(W.zx,{disabled:!0,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,children:q.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(W.zx,{disabled:!0,className:et().marginTop4,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,
children:q.Z.Messages.NEED_ACCOUNT})]})]})};i.renderDefaultForm=function(e){var t,n,o=this,i=this.props,a=i.invite,c=i.giftCode,u=i.loginStatus,l=i.country,p=i.showMobileWebHandoff,d=i.disableAutofocusOnDefaultForm,h=!this.hasError("email")&&this.hasError("password"),y=null!=(null==a?void 0:a.stage_instance);t=null==a||y?null!=c?(0,r.jsx)(de.Z,{giftCode:c}):(0,r.jsxs)("div",{className:vt().header,children:[(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.LOGIN_TITLE},"title"),!1===(0,fe.eL)()?(0,r.jsx)(W.DK,{children:q.Z.Messages.AUTH_LOGIN_BODY},"subtitle"):null]}):(0,r.jsx)(he.Z,{invite:a});return(0,r.jsxs)(ie.Z,{direction:ie.Z.Direction.HORIZONTAL,align:ie.Z.Align.CENTER,children:[(0,r.jsxs)("div",{className:vt().mainLoginContainer,children:[this.canShowChooseAccount&&this.state.dismissedChooseAccount&&(0,r.jsx)(W.zx,{onClick:function(){o.setState((function(e){return St(Tt({},e),{dismissedChooseAccount:!1})}))},look:W.zx.Looks.LINK,color:W.zx.Colors.PRIMARY,
className:vt().goBackButton,children:(0,r.jsxs)("div",{className:vt().content,children:[(0,r.jsx)(ae.Z,{width:16,height:16,className:vt().caret}),(0,r.jsx)(f.xv,{variant:"text-md/normal",children:q.Z.Messages.AGE_GATE_GO_BACK})]})}),t,(0,r.jsx)(f.y5,{children:(0,r.jsxs)(W.gO,{className:et().marginTop20,children:[(0,r.jsx)(te.Z,{alpha2:l.alpha2,countryCode:l.code.split(" ")[0],className:et().marginBottom20,label:q.Z.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(n=this.renderError("login"))&&void 0!==n?n:this.renderError("email"),onChange:function(e,t){return o.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:this.state.login,autoFocus:!h&&!p&&!d,required:!0}),(0,r.jsx)(W.II,{label:q.Z.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return o.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",
spellCheck:"false",autoFocus:h&&!p&&!d,value:this.state.password,required:!0}),(0,r.jsx)(W.zx,{onClick:this.handleForgotPassword,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,className:s()(et().marginBottom20,et().marginTop4),children:q.Z.Messages.FORGOT_PASSWORD}),(0,r.jsx)(W.zx,{type:"submit",submitting:u===A.u34.LOGGING_IN,color:y?W.zx.Colors.GREEN:W.zx.Colors.BRAND,className:et().marginBottom8,children:y?q.Z.Messages._LOGIN_STAGE:q.Z.Messages._LOGIN}),(0,r.jsxs)("div",{className:et().marginTop4,children:[(0,r.jsx)("span",{className:vt().needAccount,children:q.Z.Messages.NEED_ACCOUNT}),(0,r.jsx)(W.zx,{onClick:this.handleGotoRegister,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,className:vt().smallRegisterLink,children:q.Z.Messages.REGISTER})]})]})})]}),(0,r.jsx)(f.y5,{children:e?(0,r.jsx)(ht,{authTokenCallback:this.handleAuthToken}):null})]},"form-wrapper")};i.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.showMobileWebHandoff;return(0,r.jsxs)("div",{
className:vt().pageContainer,children:[(0,r.jsx)(W.ZP,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0,children:this.renderDefaultForm(!0)}),n&&(0,r.jsx)(H,{})]})};i.renderGuildTemplate=function(e){var t=this;return(0,r.jsx)(yt.Z,{onSubmit:this.handleLogin,tag:"form",className:s()(this.props.authBoxClassName,vt().horizontalAuthBox),children:function(){return[(0,r.jsx)(g.Z,{guildTemplate:e},"template"),t.renderDefaultForm(!1)]}})};i.renderMFA=function(){var e=this,t=this.props,o=t.loginStatus,i=t.mfaSMS,a=t.authBoxClassName;return(0,r.jsxs)(W.ZP,{onSubmit:this.handleTokenSubmit,tag:"form",className:a,children:[(0,r.jsx)("img",{alt:"",src:n(148267),className:et().marginBottom20}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.TWO_FA}),(0,r.jsx)(W.DK,{children:q.Z.Messages.TWO_FA_ENTER_TOKEN_BODY}),(0,r.jsxs)(W.gO,{className:et().marginTop40,children:[(0,r.jsx)(W.II,{className:et().marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,
onChange:function(t){return e.setState({code:t})},autoComplete:"one-time-code",placeholder:q.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:q.Z.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code,required:!0},"totpCode"),(0,r.jsx)(W.zx,{type:"submit",submitting:o===A.u34.LOGGING_IN_MFA,children:q.Z.Messages._LOGIN}),i?(0,r.jsx)(W.zx,{onClick:this.handleToggleSMSLogin,submitting:o===A.u34.LOGGING_IN_MFA_SMS,className:et().marginTop8,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,children:q.Z.Messages.MFA_SMS_RECEIVE_CODE}):null,(0,r.jsx)(W.zx,{look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,className:et().marginTop4,onClick:this.handleReset,children:q.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};i.renderMFASMS=function(){var e=this,t=this.props,o=t.loginStatus,i=t.maskedPhone,a=t.authBoxClassName,s=o===A.u34.LOGGING_IN_MFA_SMS||""===i;return(0,r.jsxs)(W.ZP,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:a,children:[(0,r.jsx)("img",{alt:"",src:n(148267),
className:et().marginBottom20}),(0,r.jsx)(W.Dx,{className:et().marginBottom8,children:q.Z.Messages.TWO_FA}),(0,r.jsx)(W.DK,{className:et().marginBottom8,children:s?q.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:q.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:i})}),(0,r.jsxs)(W.gO,{className:et().marginTop40,children:[(0,r.jsx)(W.II,{className:et().marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:q.Z.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:q.Z.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode,required:!0},"smsCode"),(0,r.jsx)(W.zx,{type:"submit",submitting:s,color:s?W.zx.Colors.TRANSPARENT:W.zx.Colors.BRAND,children:q.Z.Messages._LOGIN}),s?null:(0,r.jsx)(W.zx,{onClick:this.handleToggleSMSLogin,className:et().marginTop8,look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,children:q.Z.Messages.MFA_SMS_RESEND}),(0,r.jsx)(W.zx,{
look:W.zx.Looks.LINK,color:W.zx.Colors.LINK,className:et().marginTop4,onClick:this.handleReset,children:q.Z.Messages._TWO_FA_LOGIN_FOOTER})]})]})};i.renderMFAWebAuthn=function(){var e=this.props,t=e.authBoxClassName,n=e.loginStatus;return(0,r.jsx)(Zt,{authBoxClassName:t,loginStatus:n,handleReset:this.handleReset})};i.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(W.ZP,{tag:"form",className:e,children:(0,r.jsx)(m.Z,{title:q.Z.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:q.Z.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:d.Z.loginReset})})};i.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return(0,r.jsx)(W.ZP,{tag:"form",className:e,children:(0,r.jsx)(m.Z,{title:q.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,
subtitle:q.Z.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:d.Z.loginReset})})};i.renderChooseAccount=function(){var e=this;return(0,r.jsx)(Q,{onDismiss:function(){e.setState((function(e){return St(Tt({},e),{dismissedChooseAccount:!0})}))}})};i.render=function(){var e=this.props,t=e.authenticated,n=e.invite,o=e.guildTemplate,i=e.loginStatus,a=e.handoffAvailable,s=e.authBoxClassName,c=e.errors,u=this.state,l=u.checkingHandoff;if(u.redirecting||l)return(0,r.jsx)(wt,{});if(this.hasError("captcha_key"))return(0,r.jsx)(pe.Z,{authBoxClassName:s,onVerify:this.handleCaptchaVerify,title:q.Z.Messages.LOGIN_TITLE,sitekey:c.captcha_sitekey,captchaService:(0,ue.B)(c.captcha_service)});if(a)return this.renderHandOffAvailable();if(t&&l)return this.renderHandOffContinue();switch(i){case A.u34.LOGGING_IN_MFA_SMS:case A.u34.MFA_SMS_STEP:return this.renderMFASMS();case A.u34.LOGGING_IN_MFA:
case A.u34.MFA_STEP:return this.renderMFA();case A.u34.MFA_WEBAUTHN_STEP:case A.u34.LOGGING_IN_MFA_WEBAUTHN:return this.renderMFAWebAuthn();case A.u34.ACCOUNT_SCHEDULED_FOR_DELETION:case A.u34.ACCOUNT_DISABLED:return this.renderDisabledAccount();case A.u34.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case A.u34.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case A.u34.LOGGING_IN:case A.u34.NONE:default:return null!=n&&n.state===A.r2o.RESOLVING?this.renderResolving():null!=o?o.state===A.r2o.RESOLVING?this.renderResolving():this.renderGuildTemplate(o):this.canShowChooseAccount&&!this.state.dismissedChooseAccount?this.renderChooseAccount():this.renderDefault()}};o.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};!function(e,t,n){t&&Ot(e.prototype,t);n&&Ot(e,n)}(o,[{key:"loginSource",get:function(){
var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,o=e.loginSource,i=e.redirectTo;if(null!=o)return o;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null!=i?(0,y.L)(i):null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}},{key:"canShowChooseAccount",get:function(){return this.props.hasLoggedInAccounts}}]);return o}(o.PureComponent);Dt.defaultProps={transitionTo:function(e){return n.g.location.assign(e)}};const Mt=function(e){var t=(0,l.cj)([re.Z,oe.Z,I.default,V.Z,ee.Z],(function(){return{authenticated:I.default.isAuthenticated(),handoffAvailable:re.Z.isHandoffAvailable(),user:re.Z.user,loginStatus:I.default.getLoginStatus(),mfaTicket:I.default.getMFATicket(),mfaSMS:I.default.getMFASMS(),maskedPhone:I.default.getMaskedPhone(),errors:I.default.getErrors(),defaultRoute:oe.Z.defaultRoute,
country:ee.Z.getCountryCode(),hasLoggedInAccounts:V.Z.getHasLoggedInAccounts()}}));return(0,r.jsx)(Dt,Tt({},e,t))}},489898:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(785893),o=n(667294),i=n(517563),a=n(751615),s=n(363010),c=n(822567),u=n(476575),l=n(584268),f=n(655695),p=n(631134),d=n(311854),h=n(461061),y=n(35236);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))
;return e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){var t=function(e){var t=e.handoffKey,n=e.handoffToken,r=e.handoffSource;(0,u.Yz)({handoffKey:t,
handoffToken:n,handoffSource:r});S(!1)},n=o.useCallback((function(t){if(function(e){var t,n=(0,a.LX)(e,{path:h.Z5c.CHANNEL(":guildId",":channelId")});return(null==n||null===(t=n.params)||void 0===t?void 0:t.channelId)===y.oC.ROLE_SUBSCRIPTIONS}(t))f.dL(t);else{var n;(null!==(n=e.transitionTo)&&void 0!==n?n:f.uL)(t)}}),[e.transitionTo]),m=(0,s.cj)([p.default],(function(){return{isAuthenticated:p.default.isAuthenticated(),loginStatus:p.default.getLoginStatus()}})),_=m.isAuthenticated,E=m.loginStatus,O=e.location,I=e.redirectTo,N=b(o.useState(_),2),T=N[0],S=N[1];o.useEffect((function(){if(null!=O){var e=(0,i.parse)(O.search),n=e.handoff_key,r=e.handoff_token;if(null!=n&&null!=r){var o=null!=I?(0,l.L)(I):void 0;T?c.Z.logout(null).finally((function(){t({handoffKey:n,handoffToken:r,handoffSource:o})})):t({handoffKey:n,handoffToken:r,handoffSource:o})}}}),[]);return T||E===h.u34.LOGGING_IN?(0,r.jsx)(d.q,{}):(0,r.jsx)(d.Z,g(function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){v(e,t,n[t])}))}return e}({},e),{transitionTo:n}))}},969376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(785893),o=(n(667294),n(294184)),i=n.n(o),a=n(908570),s=n(361796),c=n.n(s);function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))
}));return e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function p(e){var t=e.children,n=e.className,o=f(e,["children","className"]),s=t();return(0,r.jsx)(a.ZP,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){u(e,t,n[t])}))}return e}({},o),{className:i()(n,c().container),contentClassName:c().content,children:s.map((function(e,t){return(0,r.jsx)("div",{className:c().column,style:{
flexBasis:"".concat(100/s.length,"%")},children:e},t)}))}))}},668800:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ge});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(517563),c=n(506884),u=n(363010),l=n(365523),f=n(331535),p=n(822567),d=n(348855),h=n(655695),y=n(908570),m=n(95467),v=n(461061),g=n(959797),b=n(478602),_=n.n(b),E=function(){return(0,h.uL)(v.Z5c.LOGIN)};const O=function(e){var t=e.authBoxClassName,o=e.underageMessage;return(0,r.jsxs)(y.ZP,{className:t,children:[(0,r.jsx)("img",{alt:"",src:n(697694),className:_().img}),(0,r.jsx)(y.Dx,{className:_().title,children:g.Z.Messages.AGE_GATE_UNDERAGE_HEADER}),(0,r.jsx)(y.DK,{className:_().subtitle,children:g.Z.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:null!=o?o:g.Z.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_REG_MESSAGE,helpURL:m.Z.getArticleURL(v.BhN.AGE_GATE)})}),(0,r.jsx)(f.zx,{fullWidth:!0,onClick:E,children:g.Z.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN})]})};var I=n(65440),N=n(383689),T=n(682);const S=(0,n(553494).B)({
kind:"user",id:"2022-04_registration_copy_updates",label:"Registration Copy Updates",defaultConfig:{enableNewCopy:!1,hasCopyAboveButton:!1,hasProminentCopy:!1},treatments:[{id:1,label:"Continue / Copy Above Button / High Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!0,hasProminentCopy:!0}},{id:2,label:"Continue / Copy Below Button / High Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!1,hasProminentCopy:!0}},{id:3,label:"Continue / Copy Above Button / Normal Prominence Copy",config:{enableNewCopy:!0,hasCopyAboveButton:!0,hasProminentCopy:!1}}]});var A=n(730381),x=n.n(A),j=n(173436),C=n(55690),P=n(683801),R=n(631134),w=n(932847),Z=n(666492),D=n(643830);function M(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e)
;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function U(e){var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,o=void 0===r?null:r,i=e.captchaKey,a=void 0===i?null:i;return G(L(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){M(e,t,n[t])}))}return e}({},k(e,["invite","giftCodeSKUId","captchaKey"])),{invite:n,giftCodeSKUId:o,captchaKey:a}))}function G(e){var t=e.email,n=e.phoneToken,r=e.username,o=e.consent,i=e.password,a=e.guildTemplateCode,s=e.birthday,u=e.invite,l=void 0===u?null:u,f=e.giftCodeSKUId,p=void 0===f?null:f,d=e.captchaKey,h=void 0===d?null:d,y=e.multiStep,m=void 0!==y&&y,g=e.promoEmailConsent,b=void 0===g?null:g;j.Z.dispatch({type:"REGISTER",birthday:m?s:null});if(null!=s){(0,D.Z)(s,v.jXE.REGISTER);!function(e){var t=x()().diff(e,"years");if(!(t<13)){var n;n=t>=13&&t<=17?"13-17":t>=18&&t<=22?"18-22":"23+";w.default.track(v.rMx.USER_AGE_SUBMITTED,{age_bucket:n})}}(s)}return Z.Z.post({url:v.ANM.REGISTER,body:{fingerprint:R.default.getFingerprint(),email:t,username:r,password:i,invite:l,consent:o,
phone_token:n,date_of_birth:null==s?void 0:s.format("YYYY-MM-DD"),gift_code_sku_id:p,guild_template_code:a,captcha_key:h,promotional_email_opt_in:null==b?void 0:b.checked},trackedActionData:{event:c.a9.USER_REGISTER,properties:{invite_code:l,promotional_email_opt_in:null==b?void 0:b.checked,promotional_email_pre_checked:null==b?void 0:b.preChecked}}}).then((function(e){j.Z.dispatch({type:"REGISTER_SUCCESS",token:e.body.token})}),(function(e){var t=new C.Z(e);j.Z.dispatch({type:"REGISTER_FAILURE",error:t});null!=t.getFieldErrors("date_of_birth")&&P.wE();throw e}))}var B=n(487502),F=n(472499),H=n.n(F),V=n(380203),K=n.n(V);function z(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function W(e){var t=e.value,n=e.onChange,o=e.subText,i=e.muted,s=e.marginTopStyle;return(0,r.jsx)(B.Z,{className:null!=s?s:K().marginTop20,align:B.Z.Align.CENTER,children:(0,r.jsx)(f.XZ,{value:t,type:f.XZ.Types.INVERTED,onChange:function(e,t){
return n(t)},className:H().checkbox,children:(0,r.jsx)(y.i_,{className:a()(z({},H().subText,!i)),children:o})})})}var Y=n(355184);function q(){var e=(0,T.MD)(),t=e.required,n=e.checked;return t?(0,r.jsx)(W,{value:n,subText:g.Z.Messages.PROMOTIONAL_EMAIL_OPT_IN_CONSENT,onChange:T.ZJ,marginTopStyle:K().marginTop8,muted:!0}):null}var X=n(361963),J=n(588641);function Q(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Q(i,r,o,a,s,"next",e)}function s(e){Q(i,r,o,a,s,"throw",e)}a(void 0)}))}}var ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function te(e){return ne.apply(this,arguments)}function ne(){return(ne=$((function(e){return ee(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,J.default.getSetting("USERNAME_PREFIX","")]
;case 1:return[2,t.sent()+e];case 2:t.sent();return[3,3];case 3:return[2,e]}}))}))).apply(this,arguments)}var re,oe,ie=n(674500),ae=n(88468),se=n(318007),ce=n(677523),ue=n(614503),le=n(324954),fe=n(692410),pe=n(18700),de=n(757987),he=n(360240),ye=n(882699),me=n(869488),ve=n(882923),ge=n(101577),be=n(969376);!function(e){e.VIEWED="viewed";e.SUBMITTED="submitted";e.RESEND_CODE="resend_code";e.INPUT_ERROR="input_error";e.RESPONSE_ERROR="response_error";e.SUCCESS="success"}(re||(re={}));!function(e){e.IDENTITY="identity";e.ACCOUNT_INFORMATION="account_information";e.FULL="full";e.AGE_GATE="age_gate";e.CAPTCHA="captcha";e.INVITE="invite";e.SMS_VERIFY="sms_verify"}(oe||(oe={}));var _e=n(32733),Ee=n(714392),Oe=n(487384),Ie=n.n(Oe);function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Se(e,t){
for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function xe(e){xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return xe(e)}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){Ae(e,t,n[t])}))}return e}function Ce(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function Pe(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e,t){Re=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return Re(e,t)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ze=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pe(this,n)}}var Me=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]
};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};u.ZP.initialize()
;var Le=/\.$/,ke=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(Le,"")})).join(". ").trim():e},Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&Re(e,t)}(n,e);var t=De(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e)).dateOfBirthRef=o.createRef();r._retryTimer=new l.V7;r.handleCaptchaVerify=function(e){return r.setState({captchaKey:e},(function(){r.handleRegister()}))};r.handleGotoLogin=function(e){var t=r.state.email,n=r.props,o=n.giftCode,i=n.guildTemplate,a=n.invite,c=n.location,u=n.onLoginStart,l=n.redirectTo,f=n.transitionTo;if(n.isMobileWebInviteRegistration)null==u||u(e);else{var d,h=null!=c?(0,s.parse)(c.search):{}
;if(null!=a)d=v.Z5c.INVITE_LOGIN(a.code);else if(null!=o)d=v.Z5c.GIFT_CODE_LOGIN(o.code);else if(null!=i)d=v.Z5c.GUILD_TEMPLATE_LOGIN(i.code);else if(null!=l){d=v.Z5c.LOGIN;h.redirect_to=l}else{d=v.Z5c.LOGIN;""!==t&&(h={email:t})}p.Z.loginReset();f(d,{search:(0,s.stringify)(h)});null==u||u(e);ye.S.dispatch(v.CkL.WAVE_EMPHASIZE)}};r.handleSubmit=function(e){null==e||e.preventDefault();var t=r.state.parsedDateOfBirth,n=r.props,o=n.invite;null!==n.consentRequired&&(null==o&&null==t||r.handleRegister())};r.handleBirthdayChange=function(e){r.setState({parsedDateOfBirth:e})};var i,a=null!=e.location?(0,s.parse)(e.location.search):{};r.state={email:null!==(i=a.email)&&void 0!==i?i:"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!e.consentRequired,consentRequiredProp:e.consentRequired,isRateLimited:!1};return r}var i=n.prototype;i.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t};i.componentDidMount=function(){
this.redirectIfAuthenticated();S.trackExposure({});var e=this.props,t=e.giftCodeSKU,n=e.invite;w.default.track(v.rMx.REGISTER_VIEWED,je({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,ie.Z)(t,!1,!1):{}),{flush:!0});null==this.props.consentRequired&&p.Z.getLocationMetadata();(0,le.e)("register")};i.componentWillUnmount=function(){this._retryTimer.stop()};i.componentDidUpdate=function(e,t){var n=this,r=this.props,o=r.apiErrors,i=r.authenticated,a=r.isUnderage,s=r.invite,c=r.onChangeStep,u=this.state.parsedDateOfBirth
;if(e.apiErrors!==o||t.parsedDateOfBirth!==u)if(this.hasError("email")||this.hasError("phone"))null!=this.emailRef&&this.emailRef.focus();else if(this.hasError("username"))null!=this.usernameRef&&this.usernameRef.focus();else if(this.hasError("password"))null!=this.passwordRef&&this.passwordRef.focus();else if(null==this.state.parsedDateOfBirth)null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus();else if(this.hasError("retry_after")&&"number"==typeof this.props.apiErrors.retry_after){this.setState({isRateLimited:!0});this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})}))}if(i&&!e.authenticated){(0,ce.c)(Ee.M5.ORGANIC_REGISTERED);this.redirectIfAuthenticated()}var l=oe.FULL;a||this.hasError("date_of_birth")?l=oe.AGE_GATE:this.hasError("captcha_key")?l=oe.CAPTCHA:null==s||null==s.guild&&null==s.channel||(l=oe.INVITE);c(l)};i.redirectIfAuthenticated=function(){
var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;t&&n(null!=r?r:pe.Z.defaultRoute)};i.handleRegister=function(){var e,t=this;return(e=function(){var e,n,r,o,i,a,s,c,u,l,f,p,d,h,y,m,g,b;return Me(this,(function(_){switch(_.label){case 0:e=t.state,n=e.email,r=e.username,o=e.password,i=e.captchaKey,a=e.consent,s=e.parsedDateOfBirth;c=t.props,u=c.invite,l=c.guildTemplate,f=c.giftCode,p=c.onRegister,d=c.isMobileWebInviteRegistration;h=null!=u?u.code:null;y=null!=f?f.skuId:null;m=T.MD.getState();return _e.a?[4,te(r)]:[3,2];case 1:b=_.sent();return[3,3];case 2:b=r;_.label=3;case 3:g=b;ye.S.dispatch(v.CkL.WAVE_EMPHASIZE);_.label=4;case 4:_.trys.push([4,9,,10]);return d||null==u?[3,6]:[4,U({username:g,consent:a,invite:h,giftCodeSKUId:y,captchaKey:i})];case 5:_.sent();return[3,8];case 6:return[4,G({email:n,username:g,consent:a,password:o,invite:h,guildTemplateCode:null==l?void 0:l.code,giftCodeSKUId:y,captchaKey:i,birthday:s,promoEmailConsent:m.required?m:null})];case 7:
_.sent();_.label=8;case 8:null==p||p();return[3,10];case 9:_.sent();return[3,10];case 10:return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Te(i,r,o,a,s,"next",e)}function s(e){Te(i,r,o,a,s,"throw",e)}a(void 0)}))})()};i.hasError=function(e){return null!=this.props.apiErrors[e]};i.renderConsentComponents=function(){var e=this,t=this.state.consent,n=this.props,o=n.consentRequired,i=n.registrationCopyExperimentConfig,a=i.enableNewCopy,s=i.hasProminentCopy,c=null,u=null;o?u=(0,r.jsx)(W,{value:t,onChange:function(t){return e.setState({consent:t})},subText:g.Z.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:v.EYA.TERMS,privacyURL:v.EYA.PRIVACY})}):c=(0,r.jsx)(y.i_,{isProminent:!!s,className:K().marginTop20,children:a?g.Z.Messages.TERMS_PRIVACY_ON_REGISTER.format({buttonText:g.Z.Messages.CONTINUE,termsURL:v.EYA.TERMS,privacyURL:v.EYA.PRIVACY}):g.Z.Messages.TERMS_PRIVACY.format({termsURL:v.EYA.TERMS,privacyURL:v.EYA.PRIVACY})})
;return{subText:c,consentText:u}};i.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName;return(0,r.jsxs)(y.ZP,{className:t,children:[(0,r.jsx)(ge.R,{}),(0,r.jsxs)(y.gO,{className:K().marginTop40,children:[(0,r.jsx)(f.vw,{children:g.Z.Messages.FORM_LABEL_USERNAME}),(0,r.jsx)(de.ZP,{text:g.Z.Messages.AUTH_USERNAME_TOOLTIP,position:de.ZP.Positions.RIGHT,color:de.ZP.Colors.BRAND,children:function(t){var n=t.onMouseEnter,o=t.onMouseLeave;return(0,r.jsx)(y.II,{autoFocus:!0,className:K().marginBottom8,name:"username",value:e.state.username,placeholder:g.Z.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},onMouseEnter:n,onMouseLeave:o})}}),(0,r.jsx)(y.zx,{className:K().marginTop20,disabled:!0,children:g.Z.Messages.CONTINUE}),_e.a?null:(0,r.jsx)(y.zx,{look:y.zx.Looks.LINK,color:y.zx.Colors.LINK,disabled:!0,className:K().marginTop8,children:g.Z.Messages.ALREADY_HAVE_ACCOUNT}),(0,r.jsx)(y.i_,{disabled:!0,className:K().marginTop20,
children:g.Z.Messages.TERMS_PRIVACY.format({termsURL:v.EYA.TERMS,privacyURL:v.EYA.PRIVACY})})]})]})};i.renderInviteHeader=function(){var e=this.props.invite;return null!=(null==e?void 0:e.stage_instance)&&null!=e.guild?(0,r.jsx)(X.Z,{stageInstance:e.stage_instance,guild:e.guild}):null!=(null==e?void 0:e.guild_scheduled_event)?(0,r.jsx)(Y.r,{channel:e.channel,guildScheduledEvent:e.guild_scheduled_event}):(0,r.jsx)(ge.Z,{invite:e})};i.renderInviteButton=function(){var e=this,t=this.props,n=t.invite,o=t.registering,i=t.consentRequired,a=this.state.consent,s=y.zx.Colors.BRAND,c=g.Z.Messages.CONTINUE;if(null!=(null==n?void 0:n.stage_instance)){s=y.zx.Colors.GREEN;c=g.Z.Messages.INSTANT_INVITE_ACCEPT_STAGE}return(0,r.jsx)(de.ZP,{text:!a&&i?g.Z.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null,children:function(t){return(0,r.jsx)("div",Ce(je({className:K().marginTop20},t),{children:(0,r.jsx)(y.zx,{type:"submit",submitting:o,disabled:!e.hasConsent(),color:s,children:c})}))}})}
;i.renderInvite=function(){var e=this,t=this.props,n=t.invite,o=t.authBoxClassName,i=t.apiErrors.username,a=this.renderConsentComponents(),s=a.subText,c=a.consentText,u=null!=(null==n?void 0:n.stage_instance)||null!=(null==n?void 0:n.guild_scheduled_event);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(y.ZP,{onSubmit:this.handleSubmit,tag:"form",className:o,children:[this.renderInviteHeader(),u?(0,r.jsx)("div",{className:Ie().divider}):null,(0,r.jsxs)(y.gO,{className:u?void 0:K().marginTop40,children:[(0,r.jsx)(f.vw,{error:ke(i),children:g.Z.Messages.FORM_LABEL_USERNAME}),(0,r.jsx)(de.ZP,{text:g.Z.Messages.AUTH_USERNAME_TOOLTIP,position:de.ZP.Positions.RIGHT,color:de.ZP.Colors.BRAND,children:function(t){var n=t.onMouseEnter,o=t.onMouseLeave;return(0,r.jsx)(y.II,{autoFocus:!0,className:K().marginBottom8,name:"username",value:e.state.username,placeholder:g.Z.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=i?"":null,onMouseEnter:n,
onMouseLeave:o})}}),c,this.renderInviteButton(),_e.a?null:(0,r.jsx)(y.zx,{look:y.zx.Looks.LINK,color:y.zx.Colors.LINK,onClick:this.handleGotoLogin,className:K().marginTop8,children:g.Z.Messages.ALREADY_HAVE_ACCOUNT}),s]})]}),null!=n&&u?(0,r.jsx)(y.ZP,{className:K().marginTop20,children:(0,r.jsx)(X.y,{guild:n.guild,onlineCount:n.approximate_presence_count})}):null]})};i.renderErrorMessage=function(){var e=this.props.apiErrors.message;return"string"!=typeof e?null:(0,r.jsx)(y.i_,{className:a()(K().marginTop20,Ie().errorMessage),children:e})};i.renderFull=function(e,t){
var n=this,i=this.state,s=i.email,c=i.username,u=i.password,l=i.consent,p=i.parsedDateOfBirth,d=this.props,h=d.registering,m=d.consentRequired,v=d.isMobileWebInviteRegistration,b=d.authBoxClassName,_=d.apiErrors,E=void 0===_?{}:_,O=E.email,N=E.username,T=E.password,S=E.date_of_birth,A=d.hasLoggedInAccounts,x=d.registrationCopyExperimentConfig.hasCopyAboveButton,j=this.renderConsentComponents(),C=j.subText,P=j.consentText,R=this.renderErrorMessage(),w=(0,r.jsx)(de.ZP,{text:!l&&m?g.Z.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null,children:function(e){return(0,r.jsx)("div",Ce(je({className:K().marginTop20},e),{children:(0,r.jsx)(y.zx,{type:"submit",submitting:h,disabled:!n.hasConsent()||n.state.isRateLimited,children:g.Z.Messages.CONTINUE})}))}}),Z=null!=e?(0,r.jsx)(o.Fragment,{children:e()},"custom-header"):(0,r.jsx)(y.Dx,{children:g.Z.Messages.REGISTER_TITLE},"title"),D=(0,r.jsxs)(y.gO,{className:K().marginTop20,children:[(0,r.jsx)(y.II,{autoFocus:!0,className:K().marginBottom20,
label:g.Z.Messages.FORM_LABEL_EMAIL,name:"email",value:s,onChange:function(e){return n.setState({email:e})},error:ke(O),type:"email",setRef:function(e){n.emailRef=e}}),(0,r.jsx)(y.II,{label:g.Z.Messages.FORM_LABEL_USERNAME,className:K().marginBottom20,name:"username",value:c,onChange:function(e){return n.setState({username:e})},error:ke(N),setRef:function(e){n.usernameRef=e}}),(0,r.jsx)(y.II,{label:g.Z.Messages.FORM_LABEL_PASSWORD,name:"password",value:u,onChange:function(e){return n.setState({password:e})},error:ke(T),type:"password",setRef:function(e){n.passwordRef=e}}),(0,r.jsx)(I.Z,{label:g.Z.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:K().marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:ke(S),value:p}),P,x&&C,(0,r.jsx)(q,{}),w,R,_e.a?null:(0,r.jsx)(y.zx,{look:v?y.zx.Looks.FILLED:y.zx.Looks.LINK,color:v?y.zx.Colors.PRIMARY:y.zx.Colors.LINK,onClick:this.handleGotoLogin,className:K().marginTop8,
children:g.Z.Messages.ALREADY_HAVE_ACCOUNT}),!x&&C]});return t?(0,r.jsx)(be.Z,{onSubmit:this.handleSubmit,tag:"form",className:a()(b,Ie().horizontalAuthBox),children:function(){return[Z,(0,r.jsxs)("div",{className:Ie().flex,children:[(0,r.jsx)(y.Dx,{className:Ie().createAccountTemplateHeader,children:g.Z.Messages.REGISTER_TITLE}),D]},"register-title")]}}):(0,r.jsxs)(y.ZP,{onSubmit:this.handleSubmit,tag:"form",className:b,children:[A&&!v?(0,r.jsx)(y.zx,{onClick:this.handleGotoLogin,look:y.zx.Looks.LINK,color:y.zx.Colors.PRIMARY,className:Ie().goBackButton,children:(0,r.jsxs)("div",{className:Ie().content,children:[(0,r.jsx)(he.Z,{width:16,height:16,className:Ie().caret}),(0,r.jsx)(f.xv,{variant:"text-md/normal",children:g.Z.Messages.AGE_GATE_GO_BACK})]})}):null,Z,D]})};i.render=function(){var e=this.props,t=e.authBoxClassName,n=e.isUnderage,o=e.apiErrors,i=o.captcha_service,a=o.captcha_sitekey,s=e.isMobileWebInviteRegistration;if(n||this.hasError("date_of_birth"))return(0,r.jsx)(O,{})
;if(this.hasError("captcha_key")&&"string"==typeof i)return(0,r.jsx)(me.Z,{authBoxClassName:t,onVerify:this.handleCaptchaVerify,title:g.Z.Messages.REGISTER_TITLE,captchaService:i,sitekey:a});var c=this.props,u=c.invite,l=c.giftCode,f=c.guildTemplate,p=null!=u&&null==u.guild&&null==u.channel&&null!=u.inviter;return null==u||p||s?null!=f?this.renderFull((function(){return(0,r.jsx)(ae.Z,{guildTemplate:f})}),!0):null!=l?this.renderFull((function(){return(0,r.jsx)(ve.Z,{giftCode:l})})):null!=u&&p&&u.state===v.r2o.RESOLVED&&!s?this.renderFull((function(){return(0,r.jsx)(ge.Z,{invite:u,isRegister:!0})})):this.renderFull():u.state===v.r2o.RESOLVING?this.renderInviteResolving():this.renderInvite()};n.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}};!function(e,t,n){t&&Se(e.prototype,t);n&&Se(e,n)}(n,[{key:"registrationSource",get:function(){
var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;if(null!=t)return"gift";if(null!=n)return"guild_template";if(null!=r){if(null!=r.guild)return"guild_invite";if(null!=r.channel)return"dm_invite";if(null!=r.inviter)return"friend_invite"}return null}}]);return n}(o.PureComponent);Ue.defaultProps={giftCodeResolved:!1,transitionTo:function(e){return n.g.location.assign(e)}};function Ge(e){var t=(0,u.cj)([fe.Z,R.default,d.Z,ue.Z,se.Z],(function(){return{consentRequired:fe.Z.getAuthenticationConsentRequired(),registering:R.default.getRegisterStatus()===v.$ib.REGISTERING,apiErrors:R.default.getErrors(),authenticated:R.default.isAuthenticated(),isUnderage:d.Z.isUnderageAnonymous(),country:ue.Z.getCountryCode(),hasLoggedInAccounts:se.Z.getHasLoggedInAccounts()}})),n=we(o.useState(oe.FULL),2),i=n[0],a=n[1];(0,N.Z)({type:c.nv.VIEW,name:c.zs.USER_REGISTRATION,properties:{impression_group:c.AG.USER_REGISTRATION_FLOW,step:i}},{},[i]);return(0,r.jsx)(Ue,je({onChangeStep:function(e){
return a(e)},registrationCopyExperimentConfig:S.getCurrentConfig({})},e,t))}},678081:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(785893),o=n(667294),i=n(193197),a=n(891153),s=n(337823),c=n(742269),u=n(561388);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function d(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?l(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function v(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var n=e.filters;a.Z.fileManager.openFiles({properties:t,filters:n},u.zz).then((function(t){var n=t.map((function(e){return s.qF(e)}));null!=n&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:n}})})).catch((function(t){e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:null,err:t}})}))}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,
configurable:!0}});t&&h(e,t)}(n,e);var t=m(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e))._ref=o.createRef();r.setRef=r.setRef.bind(l(r));return r}var a=n.prototype;a.activateUploadDialogue=function(){if(null!=this._ref)return this._ref.activateUploadDialogue()};a.setRef=function(e){this._ref=e};a.render=function(){return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}({ref:this.setRef,handleNativeClick:v,embedded:(0,c.nI)()},this.props))};return n}(o.Component)},683801:(e,t,n)=>{"use strict";n.d(t,{Av:()=>s,wE:()=>c,hp:()=>u});var r=n(675860),o=n(173436),i=n(643830),a=n(461061);function s(e,t){(0,
i.Z)(e,t);return r.Z.patch({url:a.ANM.ME,body:{date_of_birth:e.format("YYYY-MM-DD")},oldFormErrors:!0}).then((function(e){var t=e.body;o.Z.dispatch({type:"CURRENT_USER_UPDATE",user:t})}))}function c(){o.Z.dispatch({type:"AGE_GATE_PREVENT_UNDERAGE_REGISTRATION"})}function u(){o.Z.dispatch({type:"AGE_GATE_LOGOUT_UNDERAGE_NEW_USER"})}},348855:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(676489),o=n(363010),i=n(173436),a=n(742269),s=n(442068);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function l(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var p=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}var h=!1,y=null,m="underage";var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(n,e);var t=d(n);function n(){c(this,n);return t.apply(this,arguments)}var o=n.prototype;o.isUnderageAnonymous=function(){if(!a.FB){return null!=r.parse(document.cookie).underage}return null!=y&&y+s.k0>Date.now()}
;o.__getLocalVars=function(){return{isUnderageAnonymous:h,failedRegisterAtTimestamp:y,UNDERAGE_SESSION_COOKIE:m}};return n}(o.ZP.Store);v.displayName="AgeGateStore";const g=new v(i.Z,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(){h=!0;y=Date.now();document.cookie="".concat(m,"=1;path=/")},LOGIN_SUCCESS:function(){h=!1;y=null;document.cookie="".concat(m,"=1;path=/;max-age=0")}})},65440:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(730381),c=n.n(s),u=n(331535),l=n(601465),f=n(959797),p=n(108083),d=n.n(p);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;o=e}finally{try{
a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=c()().localeData().months(),v=Array.from(Array(31).keys()).map((function(e){return{value:e+1,label:"".concat(e+1)}})),g=Array.from(Array(12).keys()).map((function(e){return{value:e+1,label:m[e]}}));var b=/[a-zA-Z0-9]/;function _(e){var t=e.options,n=e.selectOption,i=e.children,a=y(o.useState(""),2),s=a[0],c=a[1];o.useEffect((function(){if(""!==s){var e=setTimeout((function(){return c("")}),1e3);return function(){return clearTimeout(e)}}
}),[s,c]);var u=o.useCallback((function(e){if(b.test(e.key)){var r="".concat(s).concat(e.key.toLowerCase()),o=t.find((function(e){return e.label.toLowerCase().startsWith(r)}));null!=o&&n(o.value);c(r)}}),[n,c,s,t]);return(0,r.jsx)("div",{onKeyDown:u,children:i})}function E(){var e=c()().localeData().longDateFormat("L"),t=e.indexOf("D"),n=e.indexOf("M"),r=e.indexOf("Y");if(-1===t||-1===n||-1===r){t=0;n=1;r=2}return[{index:t,type:"day"},{index:n,type:"month"},{index:r,type:"year"}].sort((function(e,t){return e.index<t.index?-1:1}))}const O=o.forwardRef((function(e,t){var n=function(e){switch(k[e].type){case"day":G.push({key:"day",input:(0,r.jsx)(_,{options:v,selectOption:N,children:(0,r.jsx)(l.Z,{ref:D,className:d().inputDay,"aria-label":f.Z.Messages.AGE_GATE_DOB_DAY,menuPlacement:l.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:f.Z.Messages.AGE_GATE_DOB_DAY}),options:v,value:I,onChange:function(t){var n=t.value;N(n);Z(e+1)},maxMenuHeight:215})})});break
;case"month":G.push({key:"month",input:(0,r.jsx)(_,{options:g,selectOption:S,children:(0,r.jsx)(l.Z,{ref:M,className:d().inputMonth,"aria-label":f.Z.Messages.AGE_GATE_DOB_MONTH,menuPlacement:l.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:f.Z.Messages.AGE_GATE_DOB_MONTH}),options:g,value:T,onChange:function(t){var n=t.value;S(n);Z(e+1)},maxMenuHeight:215})})});break;case"year":G.push({key:"year",input:(0,r.jsx)(_,{options:P,selectOption:x,children:(0,r.jsx)(l.Z,{ref:L,className:d().inputYear,"aria-label":f.Z.Messages.AGE_GATE_DOB_YEAR,menuPlacement:l.Z.MenuPlacements.TOP,placeholder:(0,r.jsx)("span",{"aria-hidden":!0,children:f.Z.Messages.AGE_GATE_DOB_YEAR}),options:P,value:A,onChange:function(t){var n=t.value;x(n);Z(e+1)},maxMenuHeight:215})})})}},i=e.value,s=e.wrapperClassName,p=e.onChange,h=e.onPopulated,m=e.error,b=e.autoFocus,O=function(e){var t=null,n=null,r=null;if(null!=e){t=e.date();n=e.month()+1;r=e.year()}
var i=y(o.useState(t),2),a=i[0],s=i[1],c=y(o.useState(n),2),u=c[0],l=c[1],f=y(o.useState(r),2);return{day:a,setDay:s,month:u,setMonth:l,year:f[0],setYear:f[1]}}(i),I=O.day,N=O.setDay,T=O.month,S=O.setMonth,A=O.year,x=O.setYear,j=o.useMemo((function(){return null!=I&&null!=T&&null!=A?c()("".concat(I,"/").concat(T,"/").concat(A),"DD/MM/YYYY"):null}),[I,T,A]);o.useEffect((function(){p((null==j?void 0:j.isValid())?j:null)}),[j,p]);var C=m;null==j||j.isValid()||(C=f.Z.Messages.AGE_GATE_INVALID_BIRTHDAY);var P=function(){var e=(new Date).getFullYear(),t=o.useRef(Array.from(Array(150).keys()).map((function(t){return{value:e-t-3,label:"".concat(e-t-3)}})));o.useEffect((function(){t.current=Array.from(Array(150).keys()).map((function(t){return{value:e-t-3,label:"".concat(e-t-3)}}))}),[e]);return t.current}(),R=y(o.useState(b?0:-1),2),w=R[0],Z=R[1],D=o.useRef(null),M=o.useRef(null),L=o.useRef(null),k=o.useMemo(E,[]),U=o.useCallback((function(){var e
;switch(null===(e=k[w])||void 0===e?void 0:e.type){case"day":var t;null===(t=D.current)||void 0===t||t.focus();break;case"month":var n;null===(n=M.current)||void 0===n||n.focus();break;case"year":var r;null===(r=L.current)||void 0===r||r.focus()}}),[w,D,M,L,k]);o.useEffect((function(){setTimeout(U,500)}),[]);o.useEffect((function(){w>=k.length?null==h||h():U()}),[w,U]);for(var G=[],B=0;B<3;B++)n(B);return(0,r.jsxs)("fieldset",{className:a()(d().container,s),children:[(0,r.jsx)(u.vw,{tag:"legend",children:f.Z.Messages.AGE_GATE_DATE_OF_BIRTH}),(0,r.jsx)("div",{className:d().inputs,children:G.map((function(e,t){var n=e.key,o=e.input;return(0,r.jsx)("div",{tabIndex:t+1,className:d()[n],children:o},n)}))}),(0,r.jsx)(u.xv,{className:d().errors,variant:"text-sm/normal",children:C})]})}))},584268:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,L:()=>s});var r,o=n(8551),i=n(461061),a=n(35236);!function(e){e.ROLE_SUBSCRIPTION="role_subscription";e.ROLE_SUBSCRIPTION_SETTING="role_subscription_setting"
}(r||(r={}));function s(e){var t=decodeURIComponent(e),n=(0,o.Qj)(t);return null!=n&&n.channelId===a.oC.ROLE_SUBSCRIPTIONS?r.ROLE_SUBSCRIPTION:t===i.Z5c.SETTINGS(i.oAB.SUBSCRIPTIONS,"role-subscriptions")?r.ROLE_SUBSCRIPTION_SETTING:void 0}},402232:(e,t,n)=>{"use strict";n.d(t,{M:()=>c,Z:()=>u});var r=n(785893),o=(n(667294),n(751615)),i=n(705654),a=n(461061),s=n(32733);function c(){var e=location.pathname+location.search;return s.a?a.Z5c.REGISTER:(0,i.U)(e,!1)}const u=function(){return(0,r.jsx)(o.l_,{to:c()})}},643830:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(730381),o=n.n(r),i=n(932847),a=n(461061);function s(e,t){i.default.track(a.rMx.AGE_GATE_SUBMITTED,{dob:o()().diff(e,"years")<18?e.format("YYYY-MM-DD"):null,dob_day:e.date(),dob_month:e.month()+1,dob_year:e.year(),source:{section:t}})}},355184:(e,t,n)=>{"use strict";n.d(t,{r:()=>f});var r=n(785893),o=(n(667294),n(331535)),i=n(808525),a=n(613258),s=n(666872),c=n(230531),u=n.n(c);function l(e){var t=e.channel,n=(0,i.Th)(t.type)
;return(0,r.jsxs)("div",{className:u().channelInfoContainer,children:[null!=n?(0,r.jsx)(n,{width:20,height:20}):null,(0,r.jsx)(o.xv,{className:u().channelInfoText,color:"none",variant:"text-sm/semibold",children:t.name})]})}function f(e){var t=e.channel,n=e.guildScheduledEvent;return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsx)(s.HZ,{className:u().statusContainer,userCount:n.user_count,startTime:n.scheduled_start_time,isActive:(0,a.xt)(n),isEnded:(0,a.Z2)(n),guildId:n.guild_id,eventType:n.entity_type}),(0,r.jsx)(s.Rf,{name:n.name,description:n.description,guildId:n.guild_id}),null!=t&&n.channel_id===t.id?(0,r.jsx)(l,{channel:t}):null]})}},993317:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(785893),o=n(667294),i=n(331535),a=n(194266),s=n(120250),c=n(815830),u=n(998689),l=n(68921),f=n.n(l);function p(e){var t=e.guildScheduledEvent,n=e.channel,l=e.onClose,p=t.entity_type===u.WX.EXTERNAL,d=o.useCallback((function(e){return(0,s.Qt)(t,l)(e)}),[t,l]),h=(0,c.u)(t,n)
;if(null==h)return null;var y=h.IconComponent,m=h.locationName,v=(0,r.jsxs)(r.Fragment,{children:[null!=y&&(0,r.jsx)(y,{width:20,height:20,className:f().channelIcon}),(0,r.jsx)(i.xv,{color:"header-secondary",variant:"text-sm/normal",className:f().locationText,children:(0,a.m)(m,!0)})]});return(0,r.jsx)("div",{className:f().row,children:null!=d?(0,r.jsx)(i.P3,{className:p?f().externalLocation:f().channelLocation,onClick:d,children:v}):v})}},58226:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(951660),o=n(531286),i=n(865622),a=n(987593),s=n(932847),c=n(618468),u=n(21588),l=n(461061);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var p="template";const d=function(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}({},u.Z),{openNativeAppModal:function(e){a.Z.openNativeAppModal(e,l.Etm.GUILD_TEMPLATE_BROWSER)},openMobileApp:function(e,t){if(!(null!=platform.ua&&platform.ua.toLowerCase().indexOf("googlebot")>-1)){var n=null!=e?(0,r.Oh)(e):(0,r.Gk)(),a=(0,o.WS)(),u=(0,o.ZP)(n,{utmSource:p,fingerprint:t,attemptId:a});s.default.track(l.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,i.K)(t),attempt_id:a,source:p,guild_template_code:e});c.Z.launch(u,(function(){}))}}})},910866:(e,t,n)=>{"use strict"
;n.d(t,{m:()=>r});var r;!function(e){e.MP4="video/mp4"}(r||(r={}))},567895:(e,t,n)=>{"use strict";n.d(t,{Zj:()=>y,Fq:()=>m,ZP:()=>g});var r=n(785893),o=n(667294),i=n(678081),a=n(212271),s=n(910866),c=n(959797);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function y(){return[{name:c.Z.Messages.IMAGES,extensions:["jpg","jpeg","png","gif"]}]}function m(e,t,n){!function(e,t){if(null!=e){var n=new FileReader;n.onload=function(n){var r;"string"==typeof(null===(r=n.target)||void 0===r?void 0:r.result)&&t(n.target.result,e)};n.readAsDataURL(e)}}(e,(function(r){if(e.type===s.m.MP4)return t(r,e);var o=new Image;o.src=r;o.onload=function(){t(r,e)};o.onerror=function(){n()}}))}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=h(n);function n(){u(this,n);var e
;(e=t.apply(this,arguments))._ref=o.createRef();e._isMounted=!1;e.handleFileChange=function(t){var n=e.props,r=n.onFileSizeError,o=n.maxFileSizeBytes;t.stopPropagation();t.preventDefault();if(null!=t.currentTarget.files)for(var i=0;i<t.currentTarget.files.length;i++){var a=t.currentTarget.files[i];a.size>o?null==r||r(o,a.size):m(a,e.handleFileRead,e.handleFileError)}};e.handleFileRead=function(t,n){var r=e.props.onChange;e._isMounted&&r(t,n)};e.handleFileError=function(){(0,a.xT)({title:c.Z.Messages.PREMIUM_ALERT_ERROR_TITLE,help:c.Z.Messages.UNABLE_TO_PROCESS_IMAGE})};return e}var s=n.prototype;s.componentDidMount=function(){this._isMounted=!0};s.activateUploadDialogue=function(){var e;null===(e=this._ref.current)||void 0===e||e.activateUploadDialogue()};s.render=function(){var e=this.props,t=e.multiple,n=e.disabled,o=e.className,a=e.tabIndex,s=e["aria-label"],c=e.filters;return(0,r.jsx)(i.Z,{ref:this._ref,onChange:this.handleFileChange,filters:null!=c?c:y(),multiple:t,disabled:n,
className:o,tabIndex:a,"aria-label":s})};return n}(o.PureComponent);v.defaultProps={multiple:!0,tabIndex:-1,maxFileSizeBytes:1/0};const g=v},204882:(e,t,n)=>{"use strict";n.d(t,{HJ:()=>p,yD:()=>d,Zd:()=>h});var r=n(974119),o=n(675860),i=n(173436),a=n(822567),s=n(631134),c=n(318007),u=n(461061);function l(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,o)}var f=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:
a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function p(){var e,t,n=s.default.getId();c.Z.getUsers().forEach((t=(e=function(e){var t,a,s,c,l;return f(this,(function(f){switch(f.label){case 0:t=e.id;if(null==(a=r.Z.getToken(t))||""===a){i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE",userId:t});return[2]}i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_REQUEST",userId:t});f.label=1;case 1:f.trys.push([1,3,,4]);return[4,o.Z.get({url:u.ANM.ME,headers:{authorization:a},retries:3})];case 2:s=f.sent();return[3,4];case 3:c=f.sent()
;l=401===(null==c?void 0:c.status)||403===(null==c?void 0:c.status);i.Z.dispatch({type:l?"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE":"MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS",userId:t});return[2];case 4:i.Z.dispatch({type:n===t?"CURRENT_USER_UPDATE":"USER_UPDATE",user:s.body});i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_SUCCESS",userId:t});return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}),function(e){return t.apply(this,arguments)}))}function d(e){var t=r.Z.getToken(e);null!=t?a.Z.switchAccountToken(t):i.Z.dispatch({type:"MULTI_ACCOUNT_VALIDATE_TOKEN_FAILURE",userId:e})}function h(e){i.Z.dispatch({type:"MULTI_ACCOUNT_REMOVE_ACCOUNT",userId:e})}},908170:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(667294),o=n(363010),i=n(173436),a=n(204882),s=n(318007);function c(){var e=(0,o.cj)([s.Z],(function(){return{isLoading:s.Z.getIsValidatingUsers(),
multiAccountUsers:s.Z.getUsers()}}));r.useEffect((function(){i.Z.wait((function(){a.HJ()}))}),[]);return e}},677523:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,H:()=>i});var r=n(173436);function o(e){r.Z.wait((function(){return r.Z.dispatch({type:"NUF_NEW_USER",newUserType:e})}))}function i(){r.Z.wait((function(){return r.Z.dispatch({type:"NUF_COMPLETE"})}))}},714392:(e,t,n)=>{"use strict";n.d(t,{M5:()=>r});var r;!function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED";e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED";e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED";e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(r||(r={}))},639472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(363010),o=n(173436);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function s(e,t){
return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var f=null;var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{
value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=l(n);function n(){i(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){var t;f=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null};r.getType=function(){return f};r.getState=function(){return{type:f}};r.__getLocalVars=function(){return{type:f}};return n}(r.ZP.PersistedStore);p.displayName="NewUserStore";p.persistKey="nuf";const d=new p(o.Z,{NUF_NEW_USER:function(e){var t=e.newUserType;f=t},NUF_COMPLETE:function(){f=null}})},614503:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(363010),o=n(173436),i=n(388337);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var l,f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}var d=(0,i.K4)();function h(e){var t=e.countryCode;if(null!=t){var n;d=null!==(n=(0,i.Zz)(t))&&void 0!==n?n:(0,i.K4)()}}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&u(e,t)}(n,e);var t=p(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){null!=e&&(l=e.selectedCountryCode)};r.getUserAgnosticState=function(){return{selectedCountryCode:l}};r.getCountryCode=function(){return null!=l?l:d};r.__getLocalVars=function(){return{selectedCountryCode:l,defaultCountryCode:d}};return n}(r.ZP.DeviceSettingsStore);y.displayName="PhoneStore";y.persistKey="PhoneStore";const m=new y(o.Z,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;l=t},CONNECTION_OPEN:h,SET_LOCATION_METADATA:h})},552795:(e,t,n)=>{"use strict";n.d(t,{Z:()=>fe});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(824390),c=n.n(s),u=n(496486),l=n.n(u),f=n(45692),p=n(388337),d=n(487502),h=n(331535),y=n(31165),m=n(647446),v=n(316921),g=n(832010),b=n(983067),_=n(461061),E=n(672908),O=n.n(E),I=n(380203),N=n.n(I);function T(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function A(e){A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return A(e)}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){S(e,t,n[t])}))}return e}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){P=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return P(e,t)}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}var Z=l().memoize((function(e){var t=!1;if(null!=e&&(0,v.FX)(e)){var n=(0,v._i)(e);null!=n&&(t=(0,
v.Bd)(n)<.2)}return t?(0,g.Lq)(_.Ilk.BLACK_500):(0,g.Lq)(_.Ilk.WHITE_500)})),D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&P(e,t)}(n,e);var t=w(n);function n(){T(this,n);var e;(e=t.apply(this,arguments)).state={color:Z(e.props.color)};e.handleKeyUp=function(t){if(t.which===_.yXg.ENTER||t.which===_.yXg.SPACE){var n=e.props;(0,n.onClick)(j(n,["onClick"]))}};e.handleClick=function(){var t=e.props;(0,t.onClick)(j(t,["onClick"]))};return e}n.prototype.render=function(){var e,t=this.props,n=t.selected,o=t.color,i=t.className,s=t.children,c=Z(o);n?e={color:c,background:null!=o?o:(0,g.Lq)(_.Ilk.BRAND_500)}:null!=o&&(e={color:o});return(0,r.jsx)(m.tE,{offset:{left:4},children:(0,r.jsxs)(d.Z,{className:a()(O().selectableItem,i,S({},O().selected,n)),onClick:this.handleClick,onKeyUp:this.handleKeyUp,
align:d.Z.Align.CENTER,style:x({},e,this.props.style),role:"button",tabIndex:0,children:[(0,r.jsx)(d.Z,{align:d.Z.Align.CENTER,className:O().selectableItemLabel,shrink:1,children:s}),n&&(0,r.jsx)(d.Z,{wrap:d.Z.Wrap.WRAP,className:N().marginReset,grow:0,shrink:0,children:(0,r.jsx)(b.Z,{color:c})})]})})};return n}(o.PureComponent);const M=D;var L=n(622677),k=n.n(L);function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function B(e){B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return B(e)}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&z(e,t)}function H(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function V(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function K(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}
function z(e,t){z=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return z(e,t)}var W=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}var q=function(e){F(n,e);var t=Y(n);function n(){U(this,n);return t.apply(this,arguments)}n.prototype.render=function(){var e=this.props,t=e.className,n=V(e,["className"]);return(0,r.jsx)(y.Z,H(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){G(e,t,n[t])}))}return e}({},n),{className:a()(k().popoutListInput,t)}))};return n}(o.PureComponent);q.defaultProps={autoFocus:!0};var X=function(e){F(n,e);var t=Y(n);function n(){U(this,n);return t.apply(this,arguments)}n.prototype.render=function(){var e=this.props,t=e.className,n=e.children;return(0,r.jsx)(h.Vq,{className:a()(k().popoutList,t),"aria-label":this.props["aria-label"],children:n})};return n}(o.PureComponent);X.SearchBar=q;X.Item=M;X.Divider=function(){return(0,r.jsx)(h.$i,{className:k().divider})};X.Empty=function(e){var t=e.children;return(0,r.jsx)("div",{className:k().popoutListEmpty,children:t})};const J=X;var Q=n(725002),$=n(959797),ee=n(886995),te=n.n(ee),ne=n(480798),re=n.n(ne);function oe(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,
writable:!0}):e[t]=n;return e}function ie(e){ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ie(e)}function ae(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function se(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e,t){ce=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return ce(e,t)}var ue=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return se(this,n)}}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&ce(e,t)}(n,e);var t=le(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this,e)).onChangeQuery=function(e){r.setState({query:e})};r.onClearQuery=function(){r.setState({
query:""})};r.onClick=function(e){var t,n;null===(n=(t=r.props).onClick)||void 0===n||n.call(t,e)};r.state={query:""};return r}var i=n.prototype;i.renderItems=function(){var e=this,t=this.state.query,n=f.Z.flatMap((function(e,t){var n=e.alpha2,o=e.phoneCountryCodes,i=e.name,a=(0,p.q9)(n);return o.map((function(e){return{key:"".concat(t,"-").concat(e),name:i,translatedName:a,countryData:{name:i,alpha2:n,code:e},children:(0,r.jsxs)(d.Z,{className:te().countryItem,justify:d.Z.Justify.CENTER,align:d.Z.Align.CENTER,children:[(0,r.jsx)(d.Z.Child,{className:te().countryName,children:a}),(0,r.jsx)(d.Z.Child,{className:te().countryCode,grow:0,shrink:0,children:e})]})}}))})),i=l()(n).filter((function(e){return 0===t.length||c()(t.toLowerCase(),e.name.toLowerCase())||c()(t.toLowerCase(),e.translatedName.toLowerCase())})).map((function(t){return(0,o.createElement)(J.Item,ae(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){oe(e,t,n[t])}))}return e}({},t),{key:t.key,onClick:function(){return e.onClick(t.countryData)}}))})).value();return 0===i.length?(0,r.jsx)(J.Empty,{children:$.Z.Messages.NONE}):(0,r.jsx)(Q.w0,{className:te().phoneFieldScroller,children:i})};i.render=function(){var e=this.props.className;return(0,r.jsxs)(J,{className:a()(te().phoneFieldPopout,re().elevationBorderLow,e),children:[(0,r.jsx)(J.SearchBar,{query:this.state.query,placeholder:$.Z.Messages.SEARCH_COUNTRY,onChange:this.onChangeQuery,onClear:this.onClearQuery,autoComplete:"off"}),(0,r.jsx)(J.Divider,{}),this.renderItems()]})};return n}(o.PureComponent)},182102:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(785893),o=(n(667294),n(363010)),i=n(730189),a=n(304546),s=n(898862);function c(e){
var t,c=e.giftStyle,u=e.className,l=e.shouldAnimate,f=void 0===l||l,p=(0,o.e7)([i.Z],(function(){return i.Z.useReducedMotion}));if(null==c)return null;switch(c){case s.Cj.SNOWGLOBE:t=function(){return n.e(529).then(n.t.bind(n,400529,19)).then((function(e){return e.default}))};break;case s.Cj.BOX:t=function(){return n.e(12773).then(n.t.bind(n,512773,19)).then((function(e){return e.default}))};break;case s.Cj.CUP:t=function(){return n.e(45684).then(n.t.bind(n,45684,19)).then((function(e){return e.default}))};break;default:throw new Error("Unexpected giftStyle ".concat(c))}return(0,r.jsx)(a.Z,{importData:t,shouldAnimate:!p&&f,className:u})}},40188:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(738017),c=n(589175),u=n(39802),l=n(913165),f=n.n(l);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0
}):e[t]=n;return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}function m(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var b,_=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}!function(e){e[e.ENTERING=0]="ENTERING";e[e.LEAVING=1]="LEAVING";e[e.APPEARING=2]="APPEARING";e[e.STATIC=3]="STATIC"}(b||(b={}));var O=function(e){y(n,e);var t=E(n);function n(){p(this,n);var e;(e=t.apply(this,arguments)).state={animationProgress:new s.Z.Value(0),
targetHeight:0,baseHeight:0,animationState:null};e.direction=e.props.getDirection();e._measureRef=o.createRef();return e}var i=n.prototype;i.componentDidMount=function(){if(null!=this._measureRef.current){var e=this._measureRef.current.getBoundingClientRect().height;this.setState({targetHeight:e,baseHeight:this.props.getBaseHeight()})}};i.componentDidUpdate=function(e,t){t.targetHeight!==this.state.targetHeight&&this.props.setHeight(this.state.targetHeight)};i.componentWillAppear=function(e){this.setState({animationState:b.APPEARING});e()};i.componentDidAppear=function(){var e=this.state,t=e.animationProgress,n=e.targetHeight;t.setValue(2);this.setState({animationState:b.STATIC,baseHeight:n})};i.componentWillEnter=function(e){var t=this.props.duration,n=this.state.animationProgress;this.setState({animationState:b.ENTERING});this.props.setHeight(this.state.targetHeight);s.Z.timing(n,{toValue:2,duration:t,delay:t/2}).start(e)};i.componentDidEnter=function(){this.setState({
animationState:b.STATIC})};i.componentWillLeave=function(e){var t=this.state.animationProgress,n=this.props,r=n.duration,o=n.getDirection;this.direction=o();this.setState({animationState:b.LEAVING});s.Z.timing(t,{toValue:0,duration:r}).start(e)};i.componentDidLeave=function(){this.setState({animationState:b.STATIC})};i.getAnimatedStyle=function(){var e,t,n=this.context.reducedMotion,r=this.props.fillParent,o=this.state,i=o.animationProgress,a=o.animationState,c=o.baseHeight,u=o.targetHeight,l=null!==(e=this.props.sideMargin)&&void 0!==e?e:0,f=null!==(t=this.props.verticalMargin)&&void 0!==t?t:0,p=a===b.LEAVING,h=a===b.ENTERING,y=(p?-1:1)*this.direction,v={overflow:h||p?"hidden":"visible",position:p?"absolute":void 0,top:p?f:void 0,left:p?l:void 0,right:p?l:void 0,bottom:p?f:void 0},g={transform:[{translateX:i.interpolate({inputRange:[0,2],outputRange:["".concat(150*y,"%"),"0%"],extrapolate:"clamp",easing:s.Z.Easing.inOut(s.Z.Easing.ease)})}]};return m(function(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){d(e,t,n[t])}))}return e}({},v,n.enabled?null:g),{opacity:i.interpolate({inputRange:[0,2],outputRange:[0,1],extrapolate:"clamp",easing:s.Z.Easing.inOut(s.Z.Easing.ease)}),height:h?i.interpolate({inputRange:[0,1],outputRange:[c,u],extrapolate:"clamp",easing:s.Z.Easing.inOut(s.Z.Easing.ease)}):r?"100%":"auto"})};i.render=function(){var e=this.props,t=e.fillParent,n=e.className,o=e.animatedNodeClassName,i=e.staticClassName,c=this.state.animationState;return t?(0,r.jsx)("div",{ref:this._measureRef,className:a()(f().measurementFill,n,d({},a()(f().measurementFillStatic,i),c===b.STATIC)),children:(0,r.jsx)(s.Z.div,{className:a()(f().animatedNode,o),style:this.getAnimatedStyle(),children:this.props.children})
}):(0,r.jsx)("div",{ref:this._measureRef,className:a()(f().measurement,n),children:(0,r.jsx)(s.Z.div,{className:a()(f().animatedNode,o),style:this.getAnimatedStyle(),children:this.props.children})})};return n}(o.PureComponent);O.contextType=u.S;O.defaultProps={duration:300};var I=function(e){y(n,e);var t=E(n);function n(){p(this,n);var e;(e=t.apply(this,arguments)).stepHeights={};e.prevStep=null;e.prevSteps=[];e.getBaseHeight=function(){return null!=e.prevStep&&null!=e.stepHeights[e.prevStep]?e.stepHeights[e.prevStep]:0};e.getDirection=function(){var t=e.props,n=t.steps,r=t.step,o=null!=e.prevStep?n.indexOf(e.prevStep):-1,i=-1===o&&null!=e.prevStep?e.prevSteps.indexOf(e.prevStep):-1;return Math.max(o,i)>n.indexOf(r)?-1:1};e.setHeight=function(t){var n=e.props.step;e.stepHeights[n]=t};return e}var o=n.prototype;o.componentDidMount=function(){this.setPrevSteps()};o.componentDidUpdate=function(){this.setPrevSteps()};o.setPrevSteps=function(){var e=this.props,t=e.step,n=e.steps
;this.prevStep=t;this.prevSteps=n};o.render=function(){var e=this.props,t=e.step,n=e.className,o=e.innerClassName,i=e.animatedNodeClassName,s=e.staticClassName,u=e.sideMargin,l=e.verticalMargin,p=e.children,d=e.fillParent;return(0,r.jsx)(c.Z,{component:"div",className:a()(f().transitionGroup,n),children:(0,r.jsx)(O,{fillParent:d,sideMargin:u,verticalMargin:l,getDirection:this.getDirection,getBaseHeight:this.getBaseHeight,className:o,animatedNodeClassName:i,staticClassName:s,setHeight:this.setHeight,children:p},"".concat(t))})};return n}(o.Component);I.defaultProps={fillParent:!1}},111775:(e,t,n)=>{"use strict";n.d(t,{MK:()=>r,FF:()=>o,mx:()=>i,X2:()=>a,EW:()=>s});var r,o,i,a,s;!function(e){e.UNKNOWN="unknown";e.ANY="any";e.INVITE="invite";e.ORGANIC="organic_registration";e.ORGANIC_MARKETING="organic_marketing";e.ORGANIC_GUILD_TEMPLATES="organic_guild_template";e.CREATE_GUILD="create_guild"}(r||(r={}));!function(e){e.AGE_GATE="age_gate";e.AGE_GATE_UNDERAGE="age_gate_underage"
}(o||(o={}));!function(e){e.CLAIM_ACCOUNT="claim_account";e.CLAIM_ACCOUNT_SUCCESS="claim_account_success"}(i||(i={}));!function(e){e.GUILD_TEMPLATES="guild_templates";e.GUILD_CREATE="guild_create";e.CREATION_INTENT="creation_intent";e.CHANNEL_PROMPT="channel_prompt";e.JOIN_GUILD="join_guild";e.SUCCESS="create_success"}(a||(a={}));!function(e){e.NUF_STARTED="nuf_started";e.AGE_GATE="age_gate";e.NUF_COMPLETE="nuf_complete";e.HUB_CONNECTION="hub_connection"}(s||(s={}))},162917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(185253),o=n(444450),i=n(832691),a=n(932847),s=n(111775),c=n(461061);function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){u(e,t,n[t])}))}return e}function f(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function d(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){
var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},y="UserFlowAnalyticsStore_current",m="UserFlowAnalyticsStore";new i.Z("UserFlowAnalytics");function v(e){if(e===s.MK.UNKNOWN)return null;var t=o.Z.get("".concat(m,"-").concat(e));if(null==t)return null;var n=t.version,r=p(t,["version"]);return 1!==n?null:r}var g=(0,r.Z)((function(e,t){return u({flows:{},currentFlow:null},"activeFlow",(function(){var e,n=null!==(e=t().currentFlow)&&void 0!==e?e:o.Z.get(y);if(null==n)return null;var r=t().flows[n],i=null!=r?r:v(n);return null!=(null==i?void 0:i.currentStep)?n:null}))}));g.subscribe((function(e){var t;if(null!=e){!function(e){if(e.type!==s.MK.UNKNOWN){var t="".concat(m,"-").concat(e.type);if(e.ended){o.Z.remove(t);o.Z.remove(y)}else{
o.Z.set("".concat(m,"-").concat(e.type),f(l({},e),{version:1}));o.Z.set(y,e.type)}}}(e);a.default.track(c.rMx.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0});if(e.ended){var n=l({},g.getState().flows);delete n[e.type];g.setState({flows:n,currentFlow:null})}}}),(function(e){return null!=e.currentFlow?e.flows[e.currentFlow]:void 0}));function b(e,t){var n=g.getState().flows,r=n[e],o=p(n,[e].map(d)),i=null!=r?r:v(e);if(null!=(null==i?void 0:i.currentStep)){if(i.currentStep===t)return;0}g.setState({flows:f(l({},o),u({},e,{type:e,lastStep:null,lastTimestamp:null,currentStep:t,currentTimestamp:new Date,skipped:!1})),currentFlow:e})}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;if(e===s.MK.ANY){var o
;r=null!==(o=g.getState().activeFlow())&&void 0!==o?o:s.MK.UNKNOWN}var i=g.getState().flows,a=i[r],c=p(i,[r].map(d)),h=null!=a?a:v(r);null!=h&&null!=h.currentStep&&h.currentStep!==t&&g.setState({flows:f(l({},c),u({},r,f(l({},h),{lastStep:h.currentStep,lastTimestamp:h.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:n}))),currentFlow:r})}function E(){return null!=g.getState().activeFlow()}const O={flowStart:b,flowStepOrStart:function(e,t){E()?_(e,t):b(e,t)},flowStep:_,hasActiveFlow:E}},333999:(e,t,n)=>{"use strict";n.d(t,{vG:()=>i,M0:()=>a,Od:()=>s});var r,o=n(959797),i="emails";!function(e){e.COMMUNICATION="communication";e.SOCIAL="social";e.TIPS="tips";e.RECOMMENDATIONS_AND_EVENTS="recommendations_and_events";e.UPDATES_AND_ANNOUNCEMENTS="updates_and_announcements"}(r||(r={}));var a=[r.TIPS,r.RECOMMENDATIONS_AND_EVENTS,r.UPDATES_AND_ANNOUNCEMENTS],s=[{category:r.COMMUNICATION,label:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_COMMUNICATION},
subLabel:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_COMMUNICATION_SUBLABEL}},{category:r.SOCIAL,label:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_SOCIAL},subLabel:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_SOCIAL_SUBLABEL}},{category:r.UPDATES_AND_ANNOUNCEMENTS,label:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_UPDATES_AND_ANNOUNCEMENTS},subLabel:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_UPDATES_AND_ANNOUNCEMENTS_SUBLABEL}},{category:r.TIPS,label:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_TIPS},subLabel:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_TIPS_SUBLABEL}},{category:r.RECOMMENDATIONS_AND_EVENTS,label:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_RECOMMENDATIONS_AND_EVENTS},subLabel:function(){return o.Z.Messages.USER_SETTINGS_EMAIL_CATEGORY_RECOMMENDATIONS_AND_EVENTS_SUBLABEL}}]},451620:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m})
;var r=n(730381),o=n.n(r),i=n(490640),a=n(418674),s=n(832377),c=n(298716);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))
;return!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}var y=Object.freeze({PAYMENT_SOURCE_REQUIRED:1,EXISTING_PREMIUM_SUBSCRIPTION_DISALLOWED:2,NOT_SELF_REDEEMABLE:4}),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=h(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).userId=e.userId;r.code=e.code;r.skuId=e.skuId;r.uses=e.uses;r.maxUses=e.maxUses;r.expiresAt=e.expiresAt;r.redeemed=e.redeemed;r.storeListingId=e.storeListingId;r.subscriptionPlanId=e.subscriptionPlanId;r.subscriptionPlan=e.subscriptionPlan;r.revoked=e.revoked;r.entitlementBranches=e.entitlementBranches
;r.flags=e.flags;r.subscriptionTrial=e.subscriptionTrial;r.promotion=e.promotion;r.giftStyle=e.giftStyle;return r}var r=n.prototype;r.isExpired=function(){var e=this.expiresAt;return null!=e&&o()().isAfter(e)};r.toString=function(){return this.code};n.createFromServer=function(e){return new n({userId:null!=e.user?e.user.id:null,code:e.code,skuId:e.sku_id,uses:e.uses,maxUses:e.max_uses,storeListingId:null!=e.store_listing?e.store_listing.id:null,expiresAt:null!=e.expires_at?o()(e.expires_at):null,redeemed:e.redeemed,subscriptionPlanId:null!=e.subscription_plan?e.subscription_plan.id:e.subscription_plan_id,subscriptionPlan:null!=e.subscription_plan?s.Z.createFromServer(e.subscription_plan):null,revoked:!1,entitlementBranches:null!=e.entitlement_branches?e.entitlement_branches:null,flags:null!=e.flags?e.flags:0,giftStyle:e.gift_style,subscriptionTrial:null!=e.subscription_trial?{id:e.subscription_trial.id,interval:e.subscription_trial.interval,
intervalCount:e.subscription_trial.interval_count,skuId:e.subscription_trial.sku_id}:null,promotion:null!=e.promotion?{id:e.promotion.id,startDate:e.promotion.start_date,endDate:e.promotion.end_date,inboundHeaderText:e.promotion.inbound_header_text,inboundBodyText:e.promotion.inbound_body_text,inboundHelpCenterLink:e.promotion.inbound_help_center_link}:null})};!function(e,t,n){t&&u(e.prototype,t);n&&u(e,n)}(n,[{key:"hasMultipleCopies",get:function(){return this.maxUses>1}},{key:"isClaimed",get:function(){return this.uses>=this.maxUses}},{key:"remainingUses",get:function(){return this.maxUses-this.uses}},{key:"isSubscription",get:function(){return null!=this.subscriptionPlanId}},{key:"premiumSubscriptionType",get:function(){return this.isSubscription&&c.y7[this.skuId]||null}},{key:"isSelfRedeemable",get:function(){return!(0,a.yE)(this.flags,y.NOT_SELF_REDEEMABLE)}},{key:"isExistingPremiumSubscriptionDisallowed",get:function(){return(0,
a.yE)(this.flags,y.EXISTING_PREMIUM_SUBSCRIPTION_DISALLOWED)}},{key:"analyticsData",get:function(){return{gift_code:this.code,gift_code_max_uses:this.maxUses}}}]);return n}(i.Z)},774481:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(487502),c=n(69850),u=n.n(c);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}function d(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){
h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}var v=function(e){p(n,e);var t=m(n);function n(){l(this,n);var e;(e=t.apply(this,arguments)).setCodeBlockRef=function(t){e._codeBlockRef=t};e.handleKeyDown=function(t){var n=8===t.which||37===t.which||39===t.which,r=t.which>=48&&t.which<=57||t.keyCode>=96&&t.keyCode<=105;n||r||t.preventDefault();var o=e.props.onKeyDown;null==o||o(t)};e.handleChange=function(t){var n=e.props.onChange
;null==n||n(t.currentTarget.value)};return e}var o=n.prototype;o.render=function(){var e=this.props.className;return(0,r.jsx)("input",{ref:this.setCodeBlockRef,className:a()(u().input,e),maxLength:1,value:null!=this.props.code?this.props.code:void 0,autoFocus:this.props.autoFocus,onKeyDown:this.handleKeyDown,onChange:this.handleChange})};o.focus=function(){var e;null===(e=this._codeBlockRef)||void 0===e||e.focus()};o.blur=function(){var e;null===(e=this._codeBlockRef)||void 0===e||e.blur()};return n}(o.PureComponent);v.defaultProps={autoFocus:!1};var g=function(e){p(n,e);var t=m(n);function n(e){l(this,n);var r;(r=t.call(this,e))._codeBlockRefs=new Array(r.props.count);r.state={codes:new Array(e.count)};return r}var o=n.prototype;o.render=function(){for(var e=function(e){e===a.length/2&&c.push((0,r.jsx)("div",{className:u().spacer},"spacer"));c.push((0,r.jsx)(v,{ref:function(n){return t.setCodeBlockRef(e,n)},code:a[e],autoFocus:0===e,onChange:function(n){return t.handleChange(e,n)},
onKeyDown:function(n){return t.handleKeyDown(e,n)},className:i},e))},t=this,n=this.props,o=n.className,i=n.inputClassName,a=this.state.codes,c=[],l=0;l<a.length;l++)e(l);return(0,r.jsx)(s.Z,{align:s.Z.Align.CENTER,justify:s.Z.Justify.CENTER,className:o,children:c})};o.setCodeBlockRef=function(e,t){this._codeBlockRefs[e]=t};o.handleChange=function(e,t){this.state.codes[e]=t;var n=this.getCodeOrFirstEmptyIndex();if("string"==typeof n)this.submit(n);else{var r=this._codeBlockRefs[n];null==r||r.focus()}};o.handleKeyDown=function(e,t){var n=this.state.codes;if(8===t.which&&e>0&&(null==n[e]||0===n[e].length)){var r=e-1;n[r]="";var o=this._codeBlockRefs[r];null==o||o.focus()}};o.getCodeOrFirstEmptyIndex=function(){for(var e=this.state.codes,t="",n=0;n<e.length;n++){if(isNaN(parseInt(e[n])))return n;t+=e[n]}return t};o.submit=function(e){var t=this.props.onSubmit;null==t||t(e)};return n}(o.PureComponent);g.defaultProps={count:6};const b=g},601465:(e,t,n)=>{"use strict";n.d(t,{v:()=>N,Z:()=>T})
;var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),s=n(647446),c=n(392224),u=n(461061),l=n(959797),f=n(932440),p=n.n(f);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){h(e,t,n[t])}))}return e}function v(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function b(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var E,O=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}!function(e){e.TOP="top";e.BOTTOM="bottom"}(E||(E={}));var N={container:function(e,t){var n=t.isDisabled;return v(m({},e),{cursor:n?"not-allowed":void 0,pointerEvents:void 0,fontSize:16,fontWeight:500,width:"100%"})},control:function(e,t){var n=t.isDisabled,r=t.menuIsOpen;return v(m({},e),{backgroundColor:"var(--input-background)",borderColor:"var(--input-background)",opacity:n?.6:1,boxShadow:void 0,borderRadius:r?"4px 4px 0 0":"4px",minHeight:40,transition:"border 0.15s ease",
cursor:n?"not-allowed":void 0,pointerEvents:n?"none":void 0,"&:hover":{borderColor:"var(--input-background)"}})},singleValue:function(e,t){var n=t.isDisabled;return v(m({},e),{color:"var(--interactive-normal)",opacity:n?.5:1})},input:function(e){return v(m({},e),{color:"var(--interactive-normal)"})},menu:function(e){return v(m({},e),{backgroundColor:"var(--background-secondary)",border:"1px solid var(--background-tertiary)",borderRadius:"0 0 4px 4px",color:"var(--interactive-normal)",marginTop:-1,marginBottom:-1})},clearIndicator:function(e,t){var n=t.isDisabled;return v(m({},e),{color:"var(--interactive-normal)",cursor:n?void 0:"pointer",opacity:.3,padding:"8px 0",transform:"scale(0.8)",":hover":{color:"var(--text-danger)",opacity:1}})},indicatorsContainer:function(e){return v(m({},e),{alignItems:"flex-start"})},dropdownIndicator:function(e,t){var n=t.isDisabled;return v(m({},e),{color:"var(--interactive-normal)",cursor:n?void 0:"pointer",opacity:n?.3:1,padding:"8px 8px 8px 0",
":hover":{color:"var(--interactive-hover)",opacity:n?.3:1}})},menuList:function(e){return v(m({},e),{padding:0,"&::-webkit-scrollbar":{width:8,padding:"0px 2px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"var(--scrollbar-thin-thumb)",border:"2px solid transparent",backgroundClip:"padding-box",borderRadius:4},"&::-webkit-scrollbar-track-piece":{backgroundColor:"transparent",borderColor:"transparent"}})},option:function(e,t){var n=t.isSelected,r=t.isFocused;return v(m({},e,n?{backgroundColor:"var(--background-modifier-selected)",color:"var(--interactive-active)"}:r?{backgroundColor:"var(--background-modifier-hover)",color:"var(--interactive-hover)"}:{backgroundColor:"transparent",color:"var(--interactive-normal)"}),{cursor:"pointer",display:"flex",padding:12,alignItems:"center",minHeight:40,"&:active":{backgroundColor:"var(--background-modifier-selected)",color:"var(--interactive-active)"}})},placeholder:function(e){return v(m({},e),{color:"var(--text-muted)"})}},T=function(e){
!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=I(n);function n(){d(this,n);var e;(e=t.apply(this,arguments))._selectRef=o.createRef();e._containerRef=o.createRef();e.state={isFocused:!1,isOpen:!1};e.handleFocus=function(t){var n,r;e.setState({isFocused:!0});null===(r=(n=e.props).onFocus)||void 0===r||r.call(n,t)};e.handleBlur=function(t){var n,r;e.setState({isFocused:!1});null===(r=(n=e.props).onBlur)||void 0===r||r.call(n,t)};e.handleKeyDown=function(t){t.which===u.yXg.ESCAPE&&e.state.isOpen&&t.stopPropagation()};e.handleMenuOpen=function(){e.setState({isOpen:!0})};e.handleMenuClose=function(){e.setState({isOpen:!1})};return e}var i=n.prototype;i.focus=function(){var e;null===(e=this._selectRef.current)||void 0===e||e.focus()};i.render=function(){
var e=this.props,t=e.className,n=e.selectClassName,o=e.error,i=e.valueRenderer,u=e.optionRenderer,f=e.multiValueRenderer,d=e.options,y=e.value,b=e.autofocus,_=e.disabled,E=e.clearable,O=e.searchable,I=e.styleOverrides,T=e.isMulti,S=e.placeholder,A=e.filterOption,x=e.closeMenuOnSelect,j=void 0===x||x,C=m({},g(e,["className","selectClassName","error","valueRenderer","optionRenderer","multiValueRenderer","options","value","autofocus","disabled","clearable","searchable","styleOverrides","isMulti","placeholder","filterOption","closeMenuOnSelect"]));null!=b&&(C.autoFocus=b);null!=_&&(C.isDisabled=_);null!=E&&(C.isClearable=E);null!=O&&(C.isSearchable=O);var P={IndicatorSeparator:function(){return null}};null!=u&&(P.Option=function(e){return(0,r.jsx)(c.wx.Option,v(m({},e),{children:u(e.data)}))});null!=i&&(P.SingleValue=function(e){return(0,r.jsx)(c.wx.SingleValue,v(m({},e),{children:i(e.data)}))});null!=f&&(P.MultiValue=function(e){return f(e.data)});var R,w=null!=I?I:N
;if(T&&Array.isArray(y)){var Z={};d.forEach((function(e){Z[String(e.value)]=e}));R=y.map((function(e){return Z[String(e)]}))}else R=null!=y?d.find((function(e){return e.value===y})):null;return(0,r.jsx)(s.tE,{focused:this.state.isFocused&&!this.state.isOpen,ringTarget:this._containerRef,children:(0,r.jsxs)("div",{className:a()(p().select,t,h({},p().error,null!=o)),ref:this._containerRef,children:[(0,r.jsx)(c.ZP,v(m({},C),{className:n,ref:this._selectRef,isMulti:T,components:P,options:d,styles:w,onFocus:this.handleFocus,onBlur:this.handleBlur,onMenuOpen:this.handleMenuOpen,onMenuClose:this.handleMenuClose,closeMenuOnSelect:j,value:R,onKeyDown:this.handleKeyDown,placeholder:null!=S?S:l.Z.Messages.SELECT,noOptionsMessage:function(){return l.Z.Messages.NO_RESULTS_FOUND},filterOption:A})),null!=o?(0,r.jsx)("div",{className:p().errorMessage,children:o}):null]})})};return n}(o.Component);T.MenuPlacements=E},449223:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(785893),o=(n(667294),n(240243))
;function i(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||(o[n]=e[n])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++){n=i[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}return o}function c(e){
var t=e.width,n=void 0===t?24:t,c=e.height,u=void 0===c?24:c,l=e.color,f=void 0===l?"currentColor":l,p=e.foreground,d=s(e,["width","height","color","foreground"]);return(0,r.jsx)("svg",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){i(e,t,n[t])}))}return e}({},(0,o.Z)(d)),{width:n,height:u,viewBox:"0 0 24 24",children:(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{
d:"M12 2.00305C6.486 2.00305 2 6.48805 2 12.0031V20.0031C2 21.1071 2.895 22.0031 4 22.0031H6C7.104 22.0031 8 21.1071 8 20.0031V17.0031C8 15.8991 7.104 15.0031 6 15.0031H4V12.0031C4 7.59105 7.589 4.00305 12 4.00305C16.411 4.00305 20 7.59105 20 12.0031V15.0031H18C16.896 15.0031 16 15.8991 16 17.0031V20.0031C16 21.1071 16.896 22.0031 18 22.0031H20C21.104 22.0031 22 21.1071 22 20.0031V12.0031C22 6.48805 17.514 2.00305 12 2.00305Z",className:p,fill:f})})}))}},503280:(e,t,n)=>{"use strict";n.d(t,{w4:()=>_,DW:()=>O,t3:()=>I,Gn:()=>N});var r,o=n(131795),i=n.n(o),a=n(531286),s=n(631134),c=n(461061);function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var l="Ubuntu",f="Debian",p="Fedora",d="Red Hat",h="SuSE",y="Linux",m="OS X",v="win",g="osx",b="linux";function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=t?"/ptb":"",o=null!=n?"&format=".concat(n):""
;return"".concat(c.fzT.DESKTOP).concat(r,"?platform=").concat(e).concat(o)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(r=i().os)||void 0===r?void 0:r.family;return null==e?v:-1!==e.indexOf(l)||-1!==e.indexOf(f)||-1!==e.indexOf(p)||-1!==e.indexOf(d)||-1!==e.indexOf(h)||-1!==e.indexOf(y)?b:-1!==e.indexOf(m)?g:v}function O(e){var t;return(u(t={},v,"Windows"),u(t,g,"Mac"),u(t,b,"Linux"),t)[E(e)]}function I(){var e=E();return _(e,!1,e===b?"tar.gz":null)}function N(e,t,n){var r=null!=n?n.toString():null;switch(t){case"iOS":return(0,a.ZP)(null!=r?r:"https://itunes.apple.com/us/app/discord-chat-for-games/id985746746",{utmSource:e,fingerprint:s.default.getFingerprint(),attemptId:(0,a.WS)()});case"Android":return(0,a.ZP)(null!=r?r:"https://play.google.com/store/apps/details",{utmSource:e,id:"com.discord",fingerprint:s.default.getFingerprint(),attemptId:(0,a.WS)()});default:return null!=r?r:"https://www.discord.com"}}},862325:(e,t,n)=>{"use strict";n.d(t,{
yb:()=>u,R4:()=>l,GY:()=>f,oE:()=>p});var r=n(441143),o=n.n(r),i=n(174034),a=n(916957),s=n(461061),c=n(298716);function u(e){return function(e){return e.items.map((function(e){var t=a.Z.get(e.planId);o()(null!=t,"Unable to fetch plan");return t}))}(e).map((function(e){return e.skuId}))}function l(e,t,n){var r=e.getCurrentSubscriptionPlanIdForGroup(n);if(e.type===s.NYc.PREMIUM&&null==r)return!0;o()(null!=r,"Current subscription has no plan in group");o()(!(r===c.Xh.PREMIUM_YEAR_TIER_1&&t===c.Xh.PREMIUM_MONTH_TIER_2),"Unexpected plan switch");return n.indexOf(r)<n.indexOf(t)}function f(e,t,n){return!l(e,t,n)}function p(e,t){var n=a.Z.get(e);if(null==n){var r=c.GP[e];o()(null!=r,"Missing hardcoded subscriptionPlan: ".concat(e));var s=r.skuId;a.Z.isFetchingForSKU(s)||(0,i.GZ)(s,t)}return n}},99456:(e,t,n)=>{"use strict";n.d(t,{T:()=>l,s:()=>f});var r=n(772731),o=n(655695),i=n(631134),a=n(742269),s=n(461061);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}function u(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var l=a.FB?s.dG4:function(e,t){if(!(0,o.DB)())return r.default.request(s.Etm.DEEP_LINK,{type:e,params:t})},f=a.FB?s.dG4:function(e,t){if(!i.default.isAuthenticated())return l(e,u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}
return e}({},t||{}),{fingerprint:i.default.getFingerprint()}))}},193197:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(785893),o=n(667294);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0
}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var f="file-input",p=function(e){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:e?"not-allowed":"pointer",fontSize:0}},d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&c(e,t)}(n,e);var t=l(n);function n(){i(this,n);var e;(e=t.apply(this,arguments))._input=null;e.activateUploadDialogue=function(){e.props.embedded?e.handleNativeClick():e._input&&e._input.click()};e.handleNativeClick=function(){e.props.handleNativeClick&&e.props.handleNativeClick(e.props)};e.handleNativeKeyDown=function(t){" "!==t.key&&"Enter"!==t.key||e.handleNativeClick()};e.handleBrowserInputMouseDown=function(e){
e.currentTarget.value=null};return e}n.prototype.render=function(){var e=this,t=this.props,n=t.disabled,o=t.tabIndex,i=t.className,a=t.name,s=t["aria-label"],c=t["aria-hidden"];if(this.props.embedded)return(0,r.jsx)("div",{role:"button",style:p(n),className:i||f,tabIndex:o,onKeyDown:n?void 0:this.handleNativeKeyDown,onClick:n?void 0:this.handleNativeClick,"aria-disabled":n,"aria-label":s,"aria-hidden":c||void 0});var u="";this.props.filters&&(u=this.props.filters.map((function(e){return e.extensions.map((function(e){return".".concat(e)})).join(",")})).join(","));return(0,r.jsx)("input",{style:p(n),className:i||f,disabled:n,type:"file",tabIndex:o,onMouseDown:this.handleBrowserInputMouseDown,onChange:this.props.onChange,multiple:this.props.multiple,accept:u,name:a,"aria-label":s,"aria-hidden":c||void 0,ref:function(t){return e._input=t}})};return n}(o.Component);d.defaultProps={multiple:!1,disabled:!1,tabIndex:0};const h=d},970112:(e,t,n)=>{"use strict";n.d(t,{Ue:()=>g,U2:()=>b})
;function r(e){const t="==".slice(0,(4-e.length%4)%4),n=e.replace(/-/g,"+").replace(/_/g,"/")+t,r=atob(n),o=new ArrayBuffer(r.length),i=new Uint8Array(o);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return o}function o(e){const t=new Uint8Array(e);let n="";for(const e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var i="copy",a="convert";function s(e,t,n){if(t===i)return n;if(t===a)return e(n);if(t instanceof Array)return n.map((n=>s(e,t[0],n)));if(t instanceof Object){const r={};for(const[o,i]of Object.entries(t)){if(i.derive){const e=i.derive(n);void 0!==e&&(n[o]=e)}if(o in n)null!=n[o]?r[o]=s(e,i.schema,n[o]):r[o]=null;else if(i.required)throw new Error(`Missing key: ${o}`)}return r}}function c(e,t){return{required:!0,schema:e,derive:t}}function u(e){return{required:!0,schema:e}}function l(e){return{required:!1,schema:e}}var f={type:u(i),id:u(a),transports:l(i)},p={appid:l(i),appidExclude:l(i),credProps:l(i)},d={appid:l(i),
appidExclude:l(i),credProps:l(i)},h={publicKey:u({rp:u(i),user:u({id:u(a),name:u(i),displayName:u(i)}),challenge:u(a),pubKeyCredParams:u(i),timeout:l(i),excludeCredentials:l([f]),authenticatorSelection:l(i),attestation:l(i),extensions:l(p)}),signal:l(i)},y={type:u(i),id:u(i),rawId:u(a),authenticatorAttachment:l(i),response:u({clientDataJSON:u(a),attestationObject:u(a),transports:c(i,(e=>{var t;return(null==(t=e.getTransports)?void 0:t.call(e))||[]}))}),clientExtensionResults:c(d,(e=>e.getClientExtensionResults()))},m={mediation:l(i),publicKey:u({challenge:u(a),timeout:l(i),rpId:l(i),allowCredentials:l([f]),userVerification:l(i),extensions:l(p)}),signal:l(i)},v={type:u(i),id:u(i),rawId:u(a),authenticatorAttachment:l(i),response:u({clientDataJSON:u(a),authenticatorData:u(a),signature:u(a),userHandle:u(a)}),clientExtensionResults:c(d,(e=>e.getClientExtensionResults()))};async function g(e){const t=await navigator.credentials.create(function(e){return s(r,h,e)}(e));return function(e){
return s(o,y,e)}(t)}async function b(e){const t=await navigator.credentials.get(function(e){return s(r,m,e)}(e));return function(e){return s(o,v,e)}(t)}}}]);
//# sourceMappingURL=4afce82c546c23a5f9e8.js.map