"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[78487],{778487:(e,n,t)=>{t.r(n);t.d(n,{default:()=>g});var r=t(785893),a=t(667294),i=t(331535),s=t(737325),o=t(859169),l=t(64833),u=t(661623),c=t(954766),C=t(276842),I=t(272729),_=t(67416),N=t(932847),A=t(451325),S=t(830395),E=t(461061),O=t(959797),f=t(60598),T=t.n(f);function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done);s=!0){i.push(r.value);if(n&&i.length===n)break}}catch(e){o=!0;a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=[{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_USING_ENOUGH",nameGetter:function(){return O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_USING_ENOUGH}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_TOO_EXPENSIVE",nameGetter:function(){return O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_TOO_EXPENSIVE}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_WORTH",nameGetter:function(){return O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_WORTH}},{
value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_SURE_HOW_TO_USE",nameGetter:function(){return O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_NOT_SURE_HOW_TO_USE}},{value:"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER",nameGetter:function(){return O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER}}];function P(e){var n=e.application,t=e.onClose,s=h(a.useState(!1),2),o=s[0],l=s[1],u=h(a.useState(null),2),c=u[0],I=u[1],A=h(a.useState(""),2),f=A[0],d=A[1],P=a.useCallback((function(){if(null!=c){N.default.track(E.rMx.PREMIUM_APP_CANCELLATION_SURVEY_SUBMITTED,{answer:c,application_id:n.id,reason:f});t()}}),[n.id,c,t,f]);a.useEffect((function(){S.ZP.updatedUnsyncedSettings({disableApplicationSubscriptionCancellationSurvey:o})}),[o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.xB,{className:T().headerContainer,separator:!1,children:[(0,r.jsxs)("div",{className:T().titleContainer,children:[(0,
r.jsx)(i.xv,{className:T().headerTitle,variant:"text-lg/semibold",children:O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_TITLE}),(0,r.jsx)(_.ol,{className:T().modalCloseButton,onClick:t})]}),(0,r.jsx)(C.Z,{size:8}),(0,r.jsx)(i.xv,{className:T().headerSubtitle,variant:"text-md/medium",children:O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_SUBTITLE})]}),(0,r.jsxs)(_.hz,{children:[(0,r.jsx)("div",{className:T().answerChoicesContainer,children:(0,r.jsx)(i.Ee,{value:c,options:L.map((function(e){var n=e.nameGetter,t=e.value;return{name:n(),value:t}})),onChange:function(e){return I(e.value)},withTransparentBackground:!0})}),"APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_ANSWER_CHOICE_OTHER"===c&&(0,r.jsx)(i.oi,{autoFocus:!0,className:T().otherField,placeholder:O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_OTHER_PLACEHOLDER,value:f,onChange:d})]}),(0,r.jsxs)(_.mz,{className:T().footer,children:[(0,r.jsx)(i.zx,{onClick:P,color:i.zx.Colors.BRAND,
disabled:null==c,children:O.Z.Messages.SUBMIT}),(0,r.jsx)(i.XZ,{type:i.XZ.Types.INVERTED,value:o,onChange:function(e,n){return l(n)},size:20,className:T().checkbox,children:(0,r.jsx)(i.xv,{variant:"text-sm/medium",children:O.Z.Messages.APPLICATION_SUBSCRIPTION_CANCELLATION_SURVEY_DONT_SHOW_AGAIN})})]})]})}var p=t(534440),m=t.n(p);function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n,t,r,a,i,s){try{var o=e[i](s),l=o.value}catch(e){t(e);return}o.done?n(l):Promise.resolve(l).then(r,a)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function s(e){b(i,r,a,s,o,"next",e)}function o(e){b(i,r,a,s,o,"throw",e)}s(void 0)}))}}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(r=t.next()).done);s=!0){
i.push(r.value);if(n&&i.length===n)break}}catch(e){o=!0;a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return R(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U,x=function(e,n){var t,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,
r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;r=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1];a=i;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(i);break}a[2]&&s.ops.pop();s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e];r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};!function(e){e[e.CANCEL=0]="CANCEL";e[e.SURVEY=1]="SURVEY"}(U||(U={}));function g(e){var n,t=e.transitionState,S=e.application,f=e.listing,T=e.subscription,d=e.onClose,h=(0,I.Dt)(),L=(0,l.Z)(o.Z.APPLICATION_SUBSCRIPTION_CANCELLATION_MODAL).analyticsLocations,p=function(e){
var n,t=y(a.useState(!1),2),r=t[0],i=t[1],o=y(a.useState(null),2),l=o[0],u=o[1],c=(n=v((function(n){var t;return x(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,3,4]);i(!0);return[4,s.EO(n,e)];case 1:r.sent();return[2,!0];case 2:t=r.sent();u(t);return[3,4];case 3:i(!1);return[7];case 4:return[2]}}))})),function(e){return n.apply(this,arguments)});return{cancelSubscription:c,error:l,submitting:r}}(L),R=p.cancelSubscription,b=p.error,g=p.submitting,j=y(a.useState(U.CANCEL),2),M=j[0],B=j[1],k=(n=v((function(){return x(this,(function(e){switch(e.label){case 0:return[4,R(T.id)];case 1:e.sent()&&(u.ZP.disableApplicationSubscriptionCancellationSurvey?d():B(U.SURVEY));return[2]}}))})),function(){return n.apply(this,arguments)});a.useEffect((function(){N.default.track(E.rMx.CANCELLATION_FLOW_STARTED,{location_stack:L})}),[L]);return(0,r.jsx)(_.Y0,{transitionState:t,className:m().modal,"aria-labelledby":h,children:(0,r.jsxs)(c.My,{activeSlide:M,width:440,children:[(0,r.jsx)(c.Mi,{
id:U.CANCEL,children:(0,r.jsxs)("div",{className:m().slideContainer,children:[null!=b?(0,r.jsx)(i.kz,{children:b.message}):null,(0,r.jsxs)(_.hz,{className:m().content,children:[(0,r.jsx)(C.Z,{size:16}),(0,r.jsxs)(A.q$,{children:[(0,r.jsx)(A.CW,{application:S}),(0,r.jsx)(A.r0,{id:h,children:O.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_TITLE_V2.format({tier:f.name})}),(0,r.jsx)(A.K9,{children:O.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_DESCRIPTION.format({timestamp:T.currentPeriodEnd.getTime()})}),(0,r.jsx)(A.Uj,{children:O.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_PREMIUM_BENEFITS}),(0,r.jsx)(A.G9,{benefits:f.sku_benefits.benefits})]})]}),(0,r.jsxs)(_.mz,{className:m().footer,children:[(0,r.jsx)(i.zx,{color:i.zx.Colors.RED,onClick:k,submitting:g,children:O.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_CANCEL_CTA}),(0,r.jsx)(i.zx,{look:i.zx.Looks.LINK,color:i.zx.Colors.WHITE,className:m().goBackButton,onClick:d,
children:O.Z.Messages.APPLICATION_CANCEL_SUBSCRIPTION_MODAL_NEVERMIND_CTA})]})]})}),(0,r.jsx)(c.Mi,{id:U.SURVEY,children:(0,r.jsx)("div",{className:m().slideContainer,children:(0,r.jsx)(P,{application:S,onClose:d})})})]})})}}}]);
//# sourceMappingURL=b6a492726eb5417af040.js.map