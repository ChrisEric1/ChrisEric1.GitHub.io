"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[59330],{159330:(e,t,r)=>{r.r(t);r.d(t,{default:()=>v});var n=r(785893),o=r(667294),i=r(202351),l=r(575945),a=r(945460),s=r(665082),c=r(74535),u=r(153686),_=r(19585),O=r(276611),f=r(711531),I=r(551778),p=r(652591),y=r(850841),E=r(249052),T=r(447246),S=r(530562),m=r(100749),N=r(396546),d=r(301162),b=r(404469),P=r(203600),M=r(2590),U=r(473708),R=r(572457),C=r.n(R);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function j(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))
;r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function A(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||(o[r]=e[r])}return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){r=i[n];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],l=!0,a=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){a=!0;o=e}finally{try{l||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t)
;var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const v=function(e){var t=e.daysLeft,r=e.premiumType,R=e.premiumSubscription,g=e.analyticsSource,v=A(e,["daysLeft","premiumType","premiumSubscription","analyticsSource"]),Z=(0,c.ZP)(),w=h(o.useState(!1),2),D=w[0],B=w[1],x=(0,_.Z)(u.Z.PREMIUM_UNCANCEL_MODAL).analyticsLocations,Y=(0,i.e7)([f.Z],(function(){return null!=(null==R?void 0:R.paymentSourceId)?f.Z.getPaymentSource(R.paymentSourceId):null}),[R]),k=h((0,m.ED)({subscriptionId:R.id,renewal:!0}),1)[0],H=y.ZP.getPlanIdFromInvoice(R,k),W=P.GP[H].skuId,G=(0,i.e7)([I.Z],(function(){return(0,S.oE)(H)}),[H]),F=(0,
i.e7)([I.Z],(function(){return I.Z.isFetchingForSKU(W)})),K=null!=G?y.ZP.getDefaultPrice(H):null,V=y.ZP.getInterval(H),$=V.intervalType,q=V.intervalCount,z=r===P.p9.TIER_1,J=null!=K?(0,E.T4)(K.amount,K.currency):null;o.useEffect((function(){p.default.track(M.rMx.OPEN_MODAL,{type:"Premium Uncancel Winback",source:g})}),[g]);return(0,n.jsx)(a.ModalRoot,j(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){L(e,t,r[t])}))}return e}({},v),{className:C().modal,children:D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{premiumType:r,onClose:v.onClose}),(0,n.jsx)(b.Z,{planId:H,onClose:v.onClose,paymentSourceType:null==Y?void 0:Y.type})]}):(0,n.jsx)(N.Z,{premiumType:r,
titleText:z?U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_TITLE_TIER_1.format({daysLeft:t}):U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_TITLE.format({daysLeft:t}),subtitleText:z?U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_SUBTITLE_TIER_1.format():U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_SUBTITLE.format(),footer:(0,n.jsxs)("div",{children:[null!==J?(0,n.jsx)(a.Text,{variant:"text-sm/normal",children:function(e){switch($){case P.rV.YEAR:return z?U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_YEARLY_TIER_1.format({price:e}):U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_YEARLY.format({price:e});case P.rV.MONTH:return z?U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_MONTHLY_TIER_1.format({price:e}):1===q?U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_MONTHLY.format({price:e}):U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_MULTI_MONTH.format({price:e,intervalCount:q})
;default:throw new Error("Unknown interval type ".concat($))}}(J)}):(0,n.jsx)(a.Spinner,{type:a.SpinnerTypes.SPINNING_CIRCLE}),(0,n.jsxs)("div",{className:C().footer,children:[(0,n.jsx)(a.Button,{disabled:F,onClick:function(){if(null!=R){var e=(0,T.tD)(H,R.currency,null==Y?void 0:Y.id)||!(0,y.Z8)();if(null!=Y&&Y.id===R.paymentSourceId&&e){s.O5(R,x,M.Sbl.UNCANCEL_WINBACK_MODAL);B(!0)}else{v.onClose();(0,O.Z)({initialPlanId:H,analyticsLocations:x,analyticsLocation:M.Sbl.UNCANCEL_WINBACK_MODAL})}}},children:U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_BUTTON_KEEP_NITRO}),(0,n.jsx)(a.Button,{look:a.Button.Looks.LINK,color:(0,l.wj)(Z)?a.Button.Colors.WHITE:a.Button.Colors.PRIMARY,onClick:v.onClose,children:U.Z.Messages.PREMIUM_SUBSCRIPTION_ENDING_WHAT_YOU_LOSE_FOOTER_BUTTON_CANCEL})]})]}),stickyFooter:!0,onClose:v.onClose})}))}}}]);
//# sourceMappingURL=b20c03de95c7ea606c2c.js.map