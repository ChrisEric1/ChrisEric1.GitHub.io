(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[3086],{52263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createCardPaymentSource=function(e){return f.apply(this,arguments)};t.createPaymentSource=void 0;t.createPaypalPaymentSource=function(e,t){return p(l.PaymentGateways.BRAINTREE,e,t).catch(o.APIErrorHandler)};t.purchaseApplicationLicense=t.fetchPaymentSources=void 0;var n=s(r(18915)),a=s(r(36602)),o=r(19290),u=r(65592),i=s(r(16881)),l=r(70348);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,a,o,u){try{var i=e[o](u),l=i.value}catch(e){r(e);return}i.done?t(l):Promise.resolve(l).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){c(o,n,a,u,i,"next",e)}function i(e){c(o,n,a,u,i,"throw",e)}u(void 0)}))}}function f(){return(f=d(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:e.next=2;return v(t);case 2:r=e.sent;return e.abrupt("return",p(l.PaymentGateways.STRIPE,r.id,t.billingAddress).catch(u.formatStripeErrors));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(e,t,r){return n.default.post({url:l.Endpoints.PAYMENT_SOURCES,body:{payment_gateway:e,token:t,billing_address:{name:r.name,line_1:r.line1,line_2:r.line2,city:r.city,state:r.state,postal_code:r.postalCode,country:r.country}},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:i.default.PAYMENT_SOURCE_CREATE_SUCCESS,paymentSource:e.body})}))};t.createPaymentSource=p;t.fetchPaymentSources=function(){return n.default.get({url:l.Endpoints.PAYMENT_SOURCES,oldFormErrors:!0}).then((function(e){a.default.dispatch({type:i.default.PAYMENT_SOURCES_FETCH_SUCCESS,paymentSources:e.body});return e.body}))};var y=function(){var e=d(regeneratorRuntime.mark((function e(t){var r,s,c;return regeneratorRuntime.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return n.default.post({url:l.Endpoints.PURCHASE_SKU(l.APPLICATION_LICENSE_SKU_ID),body:{payment_source_id:t,expected_amount:l.APPLICATION_LICENSE_PRICE},oldFormErrors:!0});case 3:r=e.sent;a.default.dispatch({type:i.default.ENTITLEMENT_CREATE_SUCCESS,entitlements:r.body.entitlements});e.next=19;break;case 7:e.prev=7;e.t0=e.catch(0);if((s=new o.APIError(e.t0)).code!==l.APIErrorCodes.AUTHENTICATION_REQUIRED){e.next=18;break}e.next=13;return(0,u.authenticatePaymentIntentForPaymentId)(e.t0.body.payment_id);case 13:if(null==(c=e.sent).error){e.next=16;break}throw c.error;case 16:e.next=19;break;case 18:throw s;case 19:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();t.purchaseApplicationLicense=y;function v(e){return m.apply(this,arguments)}function m(){return(m=d(regeneratorRuntime.mark((function e(t){var r,n,a,o,i,s,c,d,f,p,y,v;return regeneratorRuntime.wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:if(t.type===l.PaymentSourceTypes.CARD){e.next=2;break}throw new Error("Stripe is only for Card types");case 2:e.next=4;return(0,u.ensureStripeIsLoaded)();case 4:r=e.sent;n=t.cardNumber,a=t.cvc,o=t.expirationDate,i=t.billingAddress,s=i.name,c=i.line1,d=i.line2,f=i.city,p=i.state,y=i.postalCode,v=i.country;return e.abrupt("return",new Promise((function(e,t){r.card.createToken({number:n,cvc:a,exp:o,name:s,address_line1:c,address_line2:d,address_city:f,address_state:p,address_zip:y,address_country:v},(function(r,n){200===r&&null!=n&&n.id?e(n):t(n)}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},96561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createClient=function(){return n.default.client.create({authorization:l.PaymentSettings.BRAINTREE.KEY}).then((function(e){o.default.dispatch({type:i.default.BRAINTREE_CREATE_CLIENT_SUCCESS,client:e});return c()}))};t.createPayPalClient=c
;t.teardown=function(){var e=u.default.getPayPalClient();if(null==e)return Promise.resolve();o.default.dispatch({type:i.default.BRAINTREE_TEARDOWN_PAYPAL_CLIENT});try{return e.teardown()}catch(e){return Promise.resolve()}};t.tokenizePayPal=function(){var e=u.default.getPayPalClient();if(null==e)throw new Error("braintree paypal client must be initialized before calling this");return e.tokenize({flow:"vault"}).then((function(e){var t=e.details,r=t.email,n=t.firstName,a=t.lastName,o=t.billingAddress;return{nonce:e.nonce,email:r,billingAddress:{name:n+" "+a,line1:o.line1,line2:o.line2,city:o.city,state:o.state,country:o.countryCode,postalCode:o.postalCode}}})).catch((function(e){if(e.code!==l.BraintreeErrors.PAYPAL_POPUP_CLOSED)throw new Error}))};var n=s(r(99483)),a=s(r(18915)),o=s(r(36602)),u=s(r(89166)),i=s(r(16881)),l=r(70348);function s(e){return e&&e.__esModule?e:{default:e}}function c(){var e=u.default.getClient()
;if(null==e)throw new Error("braintree client must be initialized before calling this");return n.default.paypal.create({client:e}).then((function(e){if(null==e._navigateFrameToAuth)throw new Error("braintree client missing _navigateFrameToAuth. did someone upgrade the braintree library?");e._navigateFrameToAuth=function(e){var t=this,r=this._formatPaymentResourceData(e);return a.default.post({url:l.Endpoints.BILLING_PAYPAL_BILLING_AGREEMENT_TOKENS,oldFormErrors:!0,body:{return_url:r.returnUrl,cancel_url:r.cancelUrl}}).then((function(e){var r=e.body.token;t._frameService.redirect(function(e){return(l.PaymentSettings.BRAINTREE.KEY.startsWith("production_")?"https://www.paypal.com":"https://sandbox.paypal.com")+"/agreements/approve?nolegacy=1&ba_token="+e}(r))})).catch((function(e){t._frameService.close();t._authorizationInProgress=!1;return Promise.reject(new Error(e.body&&e.body.message))}))};o.default.dispatch({type:i.default.BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS,paypalClient:e})}))}
},53014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a,o=S(r(67294)),u=m(r(94864)),i=m(r(14122)),l=m(r(88525)),s=m(r(41908)),c=m(r(92974)),d=r(16997),f=S(r(84455)),p=m(r(74257)),y=m(r(79950)),v=r(34596);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function _(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=n;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function P(e,t){P=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return P(e,t)}var C=i.default.map((function(e){return{value:e.alpha2,label:e.name}})),E=((n={}).US=l.default,n.CA=u.default,n),g=["country","state","line1","city","postalCode"],A=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;P(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state={country:t.props.country,state:t.props.state,line1:t.props.line1,line2:t.props.line2,city:t.props.city,postalCode:t.props.postalCode,errors:{}}
;t.handleCountryChange=function(e){t.setState({country:e.value})};t.handleStateChange=function(e){t.setState({state:e.value})};t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({country:r.country,state:r.state,line1:r.line1,line2:r.line2,city:r.city,postalCode:r.postalCode})};t.handleNextStep=function(){var e=t.props.onNextClick;t.isFormValid()&&e(t.state)};t.handleFieldChange=function(e,r){var n,a=t.state.errors;if(null!=r){null!=a[r]&&delete a[r];t.setState(((n={})[r]=e,n))}};t.renderStateField=function(){var e=t.state,r=e.country,n=e.state,a=e.errors,o=null==r?null:E[r];return null!=o?_(p.default,{options:o,onChange:t.handleStateChange,value:n,error:a.state}):_(y.default,{onChange:t.handleFieldChange,name:"state",value:n,error:a.state})};t.renderForm=function(){var e=t.state,r=e.country,n=e.line1,a=e.line2,o=e.city,u=e.postalCode,i=e.errors;return _(s.default,{},void 0,_(f.default,{},void 0,_(f.GridSection,{},void 0,_(f.GridChild,{columnSpread:12
},void 0,_(c.default,{},void 0,v.Messages.Address.COUNTRY),_(p.default,{onChange:t.handleCountryChange,options:C,value:r,error:i.country})),_(f.GridChild,{columnSpread:12},void 0,_(c.default,{},void 0,v.Messages.Address.ADDRESS_1),_(y.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_1_PLACEHOLDER,name:"line1",value:n,error:i.line1})),_(f.GridChild,{columnSpread:12},void 0,_(c.default,{},void 0,v.Messages.Address.ADDRESS_2),_(y.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_2_PLACEHOLDER,name:"line2",value:a})),_(f.GridChild,{columnSpread:12},void 0,_(c.default,{},void 0,v.Messages.Address.CITY),_(y.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.CITY_PLACEHOLDER,name:"city",value:o,error:i.city})),_(f.GridChild,{columnSpread:6},void 0,_(c.default,{},void 0,v.Messages.Address.STATE),t.renderStateField()),_(f.GridChild,{columnSpread:6},void 0,_(c.default,{},void 0,v.Messages.Address.POSTAL_CODE),_(y.default,{
onChange:t.handleFieldChange,name:"postalCode",value:u,error:i.postalCode})))))};return t}var r=t.prototype;r.isFormValid=function(){var e=this,t={};g.forEach((function(r){""===e.state[r]&&(t[r]=v.Messages.PaymentModal.FIELD_REQUIRED)}));this.setState({errors:t});return 0===Object.keys(t).length};r.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting;return _(o.Fragment,{},void 0,_(d.ModalContent,{},void 0,this.renderForm()),_(d.ModalFooter,{},void 0,_(d.ModalBack,{onClick:this.handlePreviousStep},void 0,v.Messages.Actions.BACK),_(d.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),_(d.ModalConfirm,{submitting:r,onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))};return t}(o.Component);t.default=A;A.displayName="AddressForm"},52963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e}
;var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(67294)),o=d(r(94184)),u=d(r(79950)),i=d(r(83545)),l=d(r(63002)),s=d(r(35214)),c=["value","flipped","inputClassName","className"];function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(){p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return p.apply(this,arguments)}function y(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3
;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var m=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;v(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this)._inputRef=void 0;t.selectionStart=0;t.setRef=function(e){var r=t.props.inputRef;t._inputRef=e;null!=r&&r(e)};t.handleChange=function(e,r){var n=t.props,a=n.value,o=n.onChange,u=t._inputRef;if(e!==a&&null!=u&&null!=a){var l=i.default.prettifyCreditCardNumber(e),s=u.selectionStart;if(a===l){s-=1;l=i.default.prettifyCreditCardNumber(l.substring(0,s)+l.substring(s+1))}else{
var c=l.length-e.length;c>0&&(s+=c)}t.selectionStart=s;null!=o&&o(l,r)}};return t}var r=t.prototype;r.componentDidUpdate=function(e){var t=this._inputRef;e.value!==this.props.value&&null!=t&&t.setSelectionRange(this.selectionStart,this.selectionStart)};r.getMaxLength=function(e){var t=null!=e?i.default.getCreditCardType(e):i.default.DEFAULT_CARD_TYPE;return t.lengths[t.lengths.length-1]+t.gaps.length};r.render=function(){var e=this.props,t=e.value,r=e.flipped,n=e.inputClassName,d=e.className,f=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++){r=o[n];t.indexOf(r)>=0||(a[r]=e[r])}return a}(e,c),v=i.default.getCreditCardType(t),m=this.getMaxLength(t);return y("div",{className:(0,o.default)(s.default.cardNumberWrapper,d)},void 0,y(l.default,{className:s.default.cardIcon,type:v.type,flipped:r}),a.createElement(u.default,p({},f,{value:i.default.prettifyCreditCardNumber(t),onChange:this.handleChange,inputRef:this.setRef,maxLength:m,inputClassName:(0,
o.default)(s.default.cardNumberInput,n)})))};return t}(a.PureComponent);m.displayName="CardNumberField";m.defaultProps={flipped:!1};var h=m;t.default=h},66142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a,o=S(r(67294)),u=m(r(36211)),i=m(r(41908)),l=m(r(92974)),s=r(16997),c=m(r(21974)),d=S(r(84455)),f=m(r(79950)),p=r(65592),y=m(r(52963)),v=r(34596);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}
n.default=e;r&&r.set(e,n);return n}function _(e,t,r,n,a,o,u){try{var i=e[o](u),l=i.value}catch(e){r(e);return}i.done?t(l):Promise.resolve(l).then(n,a)}function P(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function C(e,t){C=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return C(e,t)}var E=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;C(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state={cardNumber:t.props.cardNumber,expirationDate:t.props.expirationDate,
cvc:t.props.cvc,name:t.props.name,errors:{}};t.handleFieldChange=function(e,r){var n,a=t.state.errors;if(null!=r){null!=a[r]&&delete a[r];t.setState(((n={})[r]=e,n.errors=a,n))}};t.handleNextStep=function(){var e=t.props.onNextClick,r=t.state,n=r.cardNumber,a=r.expirationDate,o=r.cvc,u=r.name;t.isFormValid()&&e({cardNumber:n,expirationDate:a,cvc:o,name:u})};t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({cardNumber:r.cardNumber,expirationDate:r.expirationDate,cvc:r.cvc,name:r.name})};t.renderCreditCardForm=function(){var e=t.state,r=e.cardNumber,n=e.expirationDate,a=e.cvc,o=e.name,u=e.errors;return P(i.default,{},void 0,P(d.default,{},void 0,P(d.GridSection,{},void 0,P(d.GridChild,{columnSpread:12},void 0,P(l.default,{},void 0,v.Messages.PaymentModal.CREDIT_CARD_NUMBER),P(y.default,{name:"cardNumber",onChange:t.handleFieldChange,value:r,error:u.cardNumber,placeholder:v.Messages.PaymentModal.CREDIT_CARD_PLACEHOLDER})),P(d.GridChild,{columnSpread:6
},void 0,P(l.default,{},void 0,v.Messages.PaymentModal.EXPIRATION_DATE),P(f.default,{name:"expirationDate",onChange:t.handleFieldChange,value:n,error:u.expirationDate,placeholder:v.Messages.PaymentModal.EXPIRATION_PLACEHOLDER})),P(d.GridChild,{columnSpread:6},void 0,P(l.default,{},void 0,v.Messages.PaymentModal.CVC),P(f.default,{name:"cvc",onChange:t.handleFieldChange,value:a,error:u.cvc,placeholder:v.Messages.PaymentModal.CVC_PLACEHOLDER})),P(d.GridChild,{columnSpread:12},void 0,P(l.default,{},void 0,v.Messages.PaymentModal.NAME_ON_CARD),P(f.default,{name:"name",onChange:t.handleFieldChange,value:o,error:u.name,placeholder:v.Messages.PaymentModal.NAME_PLACEHOLDER})))))};return t}var r=t.prototype;r.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return(0,p.ensureStripeIsLoaded)();case 2:a=e.sent;case 3:case"end":return e.stop()}}),e)})),function(){
var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){_(o,n,a,u,i,"next",e)}function i(e){_(o,n,a,u,i,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();r.isFormValid=function(){var e=this.state,t=e.cardNumber,r=e.expirationDate,n=e.cvc,o=e.name;if(null==a)return!1;var u={};a.card.validateCardNumber(t)||(u.cardNumber=v.Messages.PaymentModal.INVALID_CARD_NUMBER);a.card.validateExpiry(r)||(u.expirationDate=v.Messages.PaymentModal.INVALID_EXPIRATION_DATE);a.card.validateCVC(n)||(u.cvc=v.Messages.PaymentModal.INVALID_CVC);""===o&&(u.name=v.Messages.PaymentModal.INVALID_NAME);this.setState({errors:u});return 0===Object.keys(u).length};r.render=function(){var e=this.props,t=e.onRequestClose,r=e.paymentSources;return P(o.Fragment,{},void 0,P(s.ModalContent,{},void 0,this.renderCreditCardForm()),P(s.ModalFooter,{},void 0,r.length>0?P(s.ModalBack,{onClick:this.handlePreviousStep
},void 0,v.Messages.Actions.BACK):null,P(s.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),P(s.ModalConfirm,{onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))};return t}(o.Component);E.displayName="NewCreditCardForm";var g=u.default.connectStores([c.default],(function(){return{paymentSources:c.default.paymentSources}}))(E);t.default=g},52342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=S(r(67294)),o=m(r(36211)),u=S(r(96561)),i=m(r(92974)),l=r(16997),s=m(r(89166)),c=m(r(56117)),d=S(r(84455)),f=m(r(79950)),p=m(r(63002)),y=r(34596),v=m(r(4279));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e)
;var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function _(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function P(e,t,r,n,a,o,u){try{var i=e[o](u),l=i.value}catch(e){r(e);return}i.done?t(l):Promise.resolve(l).then(n,a)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){P(o,n,a,u,i,"next",e)}function i(e){
P(o,n,a,u,i,"throw",e)}u(void 0)}))}}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var g=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;E(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).handleTokenizePayPal=C(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props.onNextClick;e.next=3;return u.tokenizePayPal();case 3:null!=(n=e.sent)&&r(n);case 5:case"end":return e.stop()}}),e)})));return t}var r=t.prototype;r.componentDidMount=function(){var e=this;u.createClient().catch((function(){e.setState({errorMessage:y.Messages.PaymentModal.ERROR_CONNECTING_TO_PAYPAL})}))};r.componentDidUpdate=function(e){var t=this.props.paypalClient;null==e.paypalClient&&null!=t&&this.handleTokenizePayPal()};r.componentWillUnmount=function(){
u.teardown()};r.render=function(){var e=this.props,t=e.onRequestClose,r=e.onPreviousClick;return _(a.Fragment,{},void 0,_(l.ModalContent,{},void 0,_(i.default,{},void 0,y.Messages.PaymentModal.PAYPAL_ACCOUNT),_(d.default,{},void 0,_(d.GridSection,{},void 0,_(d.GridChild,{columnSpread:12},void 0,_("div",{className:v.default.inputWrapper},void 0,_(p.default,{className:v.default.cardIcon,type:p.default.Types.PAYPAL}),_(f.default,{inputClassName:v.default.textInput,value:y.Messages.PaymentModal.CONFIRM_PAYPAL_IN_BROWSER,disabled:!0})))))),_(l.ModalFooter,{},void 0,_(l.ModalBack,{onClick:r},void 0,y.Messages.Actions.BACK),_(l.ModalCancel,{onClick:t},void 0,y.Messages.Actions.CANCEL),_(c.default,{onClick:this.handleTokenizePayPal,color:c.default.Color.PRIMARY},void 0,y.Messages.PaymentModal.REOPEN_WINDOW)))};return t}(a.Component);g.displayName="NewPayPalForm";var A=o.default.connectStores([s.default],(function(){return{paypalClient:s.default.getPayPalClient()}}))(g);t.default=A},
38525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=t.PaymentModalSteps=void 0;var n,a=P(r(67294)),o=S(r(36211)),u=P(r(52263)),i=P(r(16997)),l=S(r(21974)),s=r(19290),c=S(r(53014)),d=S(r(66142)),f=S(r(52342)),p=S(r(55688)),y=S(r(94620)),v=S(r(9716)),m=r(70348),h=r(34596);function S(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function C(e,t,r,a){
n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function E(){E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return E.apply(this,arguments)}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var A={SELECT_PAYMENT_SOURCE_TYPE:0,COLLECT_PAYMENT_SOURCE_DATA:1,COLLECT_ADDRESS_DATA:2,REVIEW_DETAILS:3};t.PaymentModalSteps=A;var b={isSubmitting:!1,paymentSourceType:null,hasAcceptedTerms:!1,error:null,braintreeNonce:"",creditCardData:{cardNumber:"",expirationDate:"",cvc:"",name:""},
billingAddressData:{name:"",country:"",city:"",line1:"",line2:"",state:"",postalCode:""}};function O(e){return 0===e.length?A.SELECT_PAYMENT_SOURCE_TYPE:A.REVIEW_DETAILS}var M=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;g(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state=E({currentStep:O(t.props.paymentSources),isLoading:!0},b);t.handleRequestClose=function(){var e=t.props,r=e.onRequestClose,n=e.paymentSources;if(!t.state.isSubmitting){t.setState(E({currentStep:O(n)},b));r()}};t.startAddNewPaymentSource=function(){t.setState({currentStep:A.SELECT_PAYMENT_SOURCE_TYPE})};t.handleCreateNewPaymentSource=function(e){var r=t.state,n=r.creditCardData,a=r.paymentSourceType,o=r.braintreeNonce,i=r.billingAddressData;t.setState({isSubmitting:!0},(function(){var r=e;if(a===m.PaymentSourceTypes.CARD){r.name=n.name;return u.createCardPaymentSource({
type:m.PaymentSourceTypes.CARD,cardNumber:n.cardNumber,cvc:n.cvc,expirationDate:n.expirationDate,billingAddress:r}).then(t.handleCreatePaymentSourceSuccess).catch(t.handleCreatePaymentSourceError)}r.name=i.name;u.createPaypalPaymentSource(o,r).then(t.handleCreatePaymentSourceSuccess).catch((function(e){t.handleCreatePaymentSourceError((0,s.getMessageFromAPIError)(e,h.Messages.Errors.ERROR_CREATING_PAYMENT_SOURCE.format()))}))}))};t.handleCreatePaymentSourceSuccess=function(){t.setState({currentStep:t.state.currentStep+1,isSubmitting:!1,error:null})};t.handleCreatePaymentSourceError=function(e){t.setState({error:e,isSubmitting:!1})};t.purchaseLicense=function(e){t.setState({isSubmitting:!0},(function(){u.purchaseApplicationLicense(e).then((function(){t.setState({isSubmitting:!1},(function(){t.handleRequestClose();var e=t.props.onPurchaseComplete;null!=e&&e()}))})).catch((function(e){t.setState({isSubmitting:!1,error:(0,
s.getMessageFromAPIError)(e,h.Messages.Errors.ERROR_PURCHASING_LICENSE.format())})}))}))};t.handlePreviousClick=function(e){var r=t.state,n=r.currentStep,a=r.paymentSourceType,o=n-1;switch(n){case A.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:A.REVIEW_DETAILS});case A.COLLECT_PAYMENT_SOURCE_DATA:return a===m.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:o,error:null}):t.setState({currentStep:o,error:null});case A.COLLECT_ADDRESS_DATA:return t.setState({billingAddressData:e,currentStep:o,error:null});default:t.setState({currentStep:o,error:null})}};t.handleNextClick=function(e){var r=t.state,n=r.currentStep,a=r.paymentSourceType,o=n+1;switch(n){case A.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:o,paymentSourceType:e});case A.COLLECT_PAYMENT_SOURCE_DATA:return a===m.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:o}):t.setState({currentStep:o,braintreeNonce:e.nonce,billingAddressData:e.billingAddress})
;case A.COLLECT_ADDRESS_DATA:return t.handleCreateNewPaymentSource(e);case A.REVIEW_DETAILS:t.purchaseLicense(e)}};return t}var r=t.prototype;r.componentDidMount=function(){var e=this;u.fetchPaymentSources().then((function(t){e.setState({isLoading:!1,currentStep:O(t)})}))};r.renderErrorMessage=function(){var e=this.state.error;return null==e?null:C(i.ModalAlert,{},void 0,e)};r.renderModalContent=function(){var e=this.state,t=e.currentStep,r=e.creditCardData,n=e.isSubmitting,o=e.paymentSourceType,u=e.billingAddressData,i={currentStep:t,onRequestClose:this.handleRequestClose,onPreviousClick:this.handlePreviousClick,onNextClick:this.handleNextClick};switch(t){case A.SELECT_PAYMENT_SOURCE_TYPE:return a.createElement(v.default,i);case A.COLLECT_PAYMENT_SOURCE_DATA:return o===m.PaymentSourceTypes.CARD?a.createElement(d.default,E({},i,r)):a.createElement(f.default,i);case A.COLLECT_ADDRESS_DATA:return a.createElement(c.default,E({},i,u,{isSubmitting:n}));case A.REVIEW_DETAILS:
return a.createElement(y.default,E({},i,{isSubmitting:n,handleAddPaymentSource:this.startAddNewPaymentSource}));default:return null}};r.render=function(){var e=this.props,t=e.isOpen,r=e.productName,n=e.productPrice,a=e.productCurrency,o=this.state,u=o.isLoading,l=o.currentStep;return u?null:C(i.default,{open:t,onRequestClose:this.handleRequestClose},void 0,C(p.default,{productName:r,productPrice:n,productCurrency:a,modalSteps:[h.Messages.PaymentModal.PAYMENT_TYPE,h.Messages.PaymentModal.PAYMENT_INFORMATION,h.Messages.PaymentModal.ADDRESS,h.Messages.PaymentModal.REVIEW],currentStep:l},void 0,this.renderErrorMessage()),this.renderModalContent())};return t}(a.Component);M.displayName="PaymentModal";var N=o.default.connectStores([l.default],(function(){return{paymentSources:l.default.paymentSources}}))(M);t.default=N},55688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=m;y(r(67294))
;var n,a=r(59402),o=r(16997),u=f(r(43734)),i=f(r(15899)),l=f(r(45758)),s=r(70348),c=y(r(34596)),d=f(r(85935));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function v(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){
for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function m(e){var t=e.productName,r=e.productPrice,n=e.productCurrency,f=e.modalSteps,p=e.currentStep,y=e.children;return v("div",{className:d.default.headerWrap},void 0,v(o.ModalHeader,{},void 0,c.Messages.PaymentModal.PURCHASE_LICENSE),v("div",{className:d.default.productDetailWrapper},void 0,v("div",{className:d.default.productDetails},void 0,v(i.default,{src:s.Images.ASSET_DEFAULT_AVATAR_1}),v(l.default,{color:l.default.Colors.WHITE,className:d.default.productName},void 0,t)),v("div",{className:d.default.price},void 0,(0,a.formatPrice)(r,n,c.default.getLocale()))),y,v(u.default,{steps:f,currentStep:p}),v(o.ModalDivider,{className:d.default.divider}))}m.displayName="PaymentModalHeader"},94428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(67294)),o=d(r(41143)),u=d(r(56117)),i=d(r(63002)),l=r(70348),s=r(34596),c=d(r(82965));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){
for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function y(e,t){y=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return y(e,t)}var v=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(){var e=t.props;(0,e.onClick)(e.type)};return t}t.prototype.render=function(){var e=this.props,t=e.type,r=e.className,n=function(e){switch(e){case l.PaymentSourceTypes.CARD:return{icon:i.default.Types.UNKNOWN,copy:s.Messages.PaymentModal.CREDIT_CARD};case l.PaymentSourceTypes.PAYPAL:return{icon:i.default.Types.PAYPAL,copy:s.Messages.PaymentModal.PAYPAL};case l.PaymentSourceTypes.SOFORT:return{icon:i.default.Types.SOFORT,
copy:s.Messages.PaymentModal.SOFORT};case l.PaymentSourceTypes.PRZELEWY24:return{icon:i.default.Types.PRZELEWY24,copy:s.Messages.PaymentModal.PRZELEWY24};case l.PaymentSourceTypes.EPS:return{icon:i.default.Types.EPS,copy:s.Messages.PaymentModal.EPS}}}(t);(0,o.default)(null!=n);return p(u.default,{className:r,height:u.default.Height.MEDIUM,onClick:this.handleClick},void 0,p("div",{className:c.default.innerPaymentButtonWrap},void 0,p(i.default,{type:n.icon,className:c.default.paymentSourceIcon}),n.copy))};return t}(a.Component);t.default=v;v.displayName="PaymentSourceButton"},63002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){
var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(67294)),u=l(r(94184)),i=l(r(30175));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function d(e,t){d=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return d(e,t)}!function(e){e.UNKNOWN="unknown";e.VISA="visa";e.DISCOVER="discover";e.MASTERCARD="mastercard";e.AMEX="amex"
;e.PAYPAL="paypal";e.SOFORT="sofort";e.PRZELEWY24="przelewy24";e.EPS="eps"}(a||(a={}));var f={SMALL:i.default.cardIconSmall,MEDIUM:i.default.cardIconMedium,LARGE:i.default.cardIconLarge,XLARGE:i.default.cardIconXLarge},p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;d(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.getType=function(e){if(null==e)return a.UNKNOWN;var t=e.replace(/[^a-z]/gi,"").toUpperCase();return a[t]||a.UNKNOWN};t.prototype.render=function(){var e,t=this.props,r=t.flipped,n=t.type,a=t.className,o=t.size;return c("div",{className:(0,u.default)(o,i.default[n],a,(e={},e[i.default.flipped]=r,e))},void 0,n)};return t}(o.PureComponent);t.default=p;p.displayName="PaymentSourceIcon";p.Types=a;p.Sizes=f;p.defaultProps={size:f.SMALL,flipped:!1}},94620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,a=C(r(67294)),o=_(r(36211)),u=_(r(41908)),i=_(r(92974)),l=r(16997),s=_(r(21974)),c=_(r(56117)),d=_(r(89446)),f=C(r(84455)),p=_(r(74257)),y=_(r(96853)),v=_(r(63002)),m=r(70348),h=r(34596),S=_(r(4279));function _(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function E(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={
children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var A="ADD_PAYMENT_SOURCE",b=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;g(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state={selectedPaymentSource:t.props.paymentSources.length>0?t.props.paymentSources[0].id:null,hasAcceptedTerms:!1};t.handleAcceptTermsClick=function(){t.setState((function(e){return{hasAcceptedTerms:!e.hasAcceptedTerms}}))};t.handleSelectPaymentSource=function(e){var r=t.props.handleAddPaymentSource;e.value!==A?t.setState({selectedPaymentSource:e.value}):r()}
;t.handleSubmitPayment=function(){var e=t.props.onNextClick,r=t.state.selectedPaymentSource;null!=r&&e(r)};t.renderOptionWithIcon=function(e){return null==e.type?e.label:E("div",{className:S.default.paymentSelectOption},void 0,E(v.default,{type:e.type}),E("span",{className:S.default.selectOptionLabel},void 0,e.label))};return t}var r=t.prototype;r.getPaymentSelectOptions=function(){var e=this.props.paymentSources.map((function(e){return e.type===m.PaymentSourceTypes.PAYPAL?{value:e.id,label:e.email,type:v.default.getType(v.default.Types.PAYPAL)}:{value:e.id,label:h.Messages.PaymentModal.CARD_ENDING_IN.format({lastFour:e.last_4}),type:v.default.getType(e.brand.toLowerCase())}}));e.push({label:h.Messages.PaymentModal.ADD_PAYMENT_SOURCE,value:A,type:null});return e};r.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting,n=this.state,o=n.selectedPaymentSource,s=n.hasAcceptedTerms
;return E(a.Fragment,{},void 0,E(l.ModalContent,{},void 0,E(u.default,{},void 0,E(f.default,{},void 0,E(f.GridSection,{},void 0,E(f.GridChild,{columnSpread:12},void 0,E(i.default,{},void 0,h.Messages.PaymentModal.PAY_WITH),E(p.default,{valueRenderer:this.renderOptionWithIcon,optionRenderer:this.renderOptionWithIcon,options:this.getPaymentSelectOptions(),value:o,onChange:this.handleSelectPaymentSource,clearable:!1})),E(f.GridChild,{columnSpread:12},void 0,E(i.default,{},void 0,h.Messages.PaymentModal.LEGAL_MUMBO_JUMBO),E(d.default,{value:s,onChange:this.handleAcceptTermsClick},void 0,h.Messages.PaymentModal.AGREE_TO_DISTRIBUTION_AGREEMENT.format({link:y.default.prependBasename(m.Routes.DOCS_STORE_DISTRIBUTION_AGREEMENT)}))))))),E(l.ModalFooter,{},void 0,E(l.ModalCancel,{onClick:t,disabled:r},void 0,h.Messages.Actions.CANCEL),E(l.ModalConfirm,{color:c.default.Color.GREEN,onClick:this.handleSubmitPayment,disabled:!s||null==o,submitting:r},void 0,h.Messages.Actions.PAY)))};return t
}(a.Component);b.displayName="ReviewPayment";var O=o.default.connectStores([s.default],(function(){return{paymentSources:s.default.paymentSources}}))(b);t.default=O},9716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=S;var n,a=m(r(67294)),o=r(36211),u=y(r(92974)),i=r(16997),l=y(r(21974)),s=m(r(84455)),c=y(r(94428)),d=r(70348),f=r(34596),p=y(r(4279));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e
;r&&r.set(e,n);return n}function h(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function S(e){var t=e.onRequestClose,r=e.onPreviousClick,n=e.onNextClick,y=(0,o.useStateFromStores)([l.default],(function(){return l.default.paymentSources}));return h(a.Fragment,{},void 0,h(i.ModalContent,{},void 0,h(u.default,{},void 0,f.Messages.PaymentModal.PAY_WITH),h(s.default,{},void 0,h(s.GridSection,{},void 0,h(s.GridChild,{columnSpread:6},void 0,h(c.default,{className:p.default.paymentButton,onClick:n,type:d.PaymentSourceTypes.CARD})),h(s.GridChild,{columnSpread:6},void 0,h(c.default,{className:p.default.paymentButton,onClick:n,
type:d.PaymentSourceTypes.PAYPAL}))))),h(i.ModalFooter,{},void 0,y.length>0?h(i.ModalBack,{onClick:r},void 0,f.Messages.Actions.BACK):null,h(i.ModalCancel,{onClick:t},void 0,f.Messages.Actions.CANCEL)))}S.displayName="SelectPaymentSource"},41549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=C(r(67294)),o=r(55558),u=_(r(36211)),i=_(r(38525)),l=_(r(81061)),s=_(r(86750)),c=_(r(86460)),d=_(r(58350)),f=_(r(6118)),p=_(r(67045)),y=C(r(34704)),v=_(r(96853)),m=r(70348),h=r(34596),S=_(r(62934));function _(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}function g(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function A(){return g("div",{},void 0,g(c.default,{},void 0,h.Messages.DeveloperLicense.BODY_HEADER),g(y.default,{className:S.default.alert,type:y.AlertTypes.ERROR},void 0,h.Messages.DeveloperLicense.SELF_SERVE_PUBLISHING_DEPRECATION.format({
selfServeDeprecationURL:m.Links.SELF_SERVE_PUBLISHING_DEPRECATION_HELP_CENTER})),g("div",{className:S.default.description},void 0,g("p",{},void 0,h.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_1),g("p",{},void 0,h.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_2),g("p",{},void 0,h.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_3.format({documentationURL:v.default.prependBasename(m.Routes.DOCS_GAME_AND_SERVER_MANAGEMENT_HOW_TO_GET_YOUR_GAME_ON_DISCORD)}))))}A.displayName="Body";var b=g(A,{}),O=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;E(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];(t=e.call.apply(e,[this].concat(n))||this).state={isPaymentModalOpen:!1};t.handleLicensePurchase=function(){v.default.transitionTo(m.Routes.CHECKLIST(t.props.match.params.id))};t.handleRequestPaymentModalClose=function(){t.setState({isPaymentModalOpen:!1})};return t}t.prototype.render=function(){
var e=this.props,t=e.hasUnconsumedLicense,r=e.match,n=this.state.isPaymentModalOpen,a=r.params.id;return t?g(o.Redirect,{to:m.Routes.CHECKLIST(a)}):g("div",{},void 0,g(s.default,{},void 0,g(l.default,{},void 0,h.Messages.DeveloperLicense.DEVELOPER_LICENSE_HEADING),g(d.default,{isFlush:!0},void 0,h.Messages.DeveloperLicense.DEVELOPER_LICENSE_SUBHEADING)),b,g(i.default,{onPurchaseComplete:this.handleLicensePurchase,productName:h.Messages.DeveloperLicense.APPLICATION_LICENSE_PRODUCT_NAME,productPrice:m.APPLICATION_LICENSE_PRICE,productCurrency:m.CurrencyCodes.USD,isOpen:n,onRequestClose:this.handleRequestPaymentModalClose}))};return t}(a.Component);O.displayName="DeveloperLicense";var M=u.default.connectStores([f.default,p.default],(function(e){var t=e.match.params.id;return{application:f.default.getApplication(t),hasUnconsumedLicense:p.default.hasUnconsumedLicenseEntitlement()}}))(O);t.default=M},43734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.default=void 0;var n,a=c(r(67294)),o=c(r(9378)),u=l(r(45758)),i=l(r(8514));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}function d(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=a;else if(u>1){for(var i=new Array(u),l=0;l<u;l++)i[l]=arguments[l+3];t.children=i}
if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;f(e,t)}(t,e);function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];(t=e.call.apply(e,[this].concat(n))||this).renderSteps=function(){var e=t.props,r=e.steps,n=e.currentStep;return r.map((function(e,t){return d(a.Fragment,{},t,d(u.default,{color:n===t?u.default.Colors.WHITE:u.default.Colors.PRIMARY_400,size:u.default.Sizes.SMALL},void 0,e),t===r.length-1?null:d(o.default,{name:o.IconNames.ARROW_RIGHT,height:22,width:16,className:i.default.arrowIcon}))}))};return t}t.prototype.render=function(){return d("div",{className:i.default.stepTracker},void 0,this.renderSteps())};return t}(a.Component);t.default=p
;p.displayName="StepTracker"},21974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=i(r(36211)),o=i(r(36602)),u=i(r(16881));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=[];var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.__getLocalVars=function(){return{paymentSources:f}};!function(e,t,r){t&&l(e.prototype,t);r&&l(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"paymentSources",get:function(){return f}}]);return t}(a.default.Store);p.displayName="BillingStore";var y=new p(o.default,((n={})[u.default.PAYMENT_SOURCES_FETCH_SUCCESS]=function(e){f=e.paymentSources},n[u.default.PAYMENT_SOURCE_CREATE_SUCCESS]=function(e){f=[].concat(c(f),[e.paymentSource])},n[u.default.USER_LOGOUT]=function(){f=[]},n));t.default=y},89166:(e,t,r)=>{"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a,o,u=s(r(36211)),i=s(r(36602)),l=s(r(16881));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var d=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;c(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.getClient=function(){return a};r.getPayPalClient=function(){return o};r.__getLocalVars=function(){return{client:a,paypalClient:o,store:f}};return t}(u.default.Store);d.displayName="BraintreeStore";var f=new d(i.default,((n={})[l.default.BRAINTREE_CREATE_CLIENT_SUCCESS]=function(e){var t=e.client;a=t},n[l.default.BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS]=function(e){var t=e.paypalClient;o=t},n[l.default.BRAINTREE_TEARDOWN_PAYPAL_CLIENT]=function(){o=null},n[l.default.USER_LOGOUT]=function(){a=null;o=null},n)),p=f;t.default=p},83545:(e,t,r)=>{
"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=(n=r(11038))&&n.__esModule?n:{default:n};var o={type:"",gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},u=/[^0-9]/g,i=/[^0-9/]/g;function l(e){for(var t=s(e).split(""),r=c(e),n=0;n<r.gaps.length;){var a=r.gaps[n]+n;if(!(a<t.length))break;t.splice(a,0," ");n+=1}return t.join("")}function s(e){return e.replace(u,"")}function c(e){var t=s(e);return t&&(0,a.default)(t)[0]||o}var d={DEFAULT_CARD_TYPE:o,prettifyCreditCardNumber:l,formatCreditCardNumber:function(e){var t=s(e);c(t);return l(t)},getCreditCardType:c,cleanCardNumber:s,validateCardNumber:function(e){var t=c(e);if(null==t)throw new Error("Could not recognize card type.");if(!t.lengths.includes(e.length))throw new Error("Card number length is incorrect.")},getTypeInfo:function(e){return a.default.getTypeInfo(e)},formatExpiration:function(e){var t=e.replace(i,"").split("/"),r=t[0],n=t[1],a=[];parseInt(r,10)>12&&(r=r.substring(0,1));a.push(r)
;(parseInt(r,10)>1||2===r.length||n)&&a.push("/");n&&parseInt(n,10)>99&&(n=(n+"").substring(0,2));a.push(n);return a.join("")}};t.default=d},38742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=new Map,n=new Map;function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var o={ensure:function(e){var t=r.get(e);if(!t){t=function(e){return new Promise((function(t,o){var u=!1,i=n.get(e),l=function(){if(!u){u=!0;a(s);clearTimeout(c);r.delete(e);o(new Error("script error"))}},s=document.createElement("script");s.async=1;s.type="text/javascript";s.onload=function(){a(s);clearTimeout(c);if(i&&window[i])return t(window[i]);if(i&&!window[i])return o(new Error("globalKey does not exist in window"));t()};s.onerror=l;s.src=e;document.body.appendChild(s);var c=setTimeout(l,3e3)}))}(e);r.set(e,t);return t}return t},register:function(e,t){n.set(e,t)}};t.default=o},65592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;t.authenticatePaymentIntentForPaymentId=function(e){return m.apply(this,arguments)};t.ensureStripeIsLoaded=y;t.ensureStripeV3IsLoaded=v;t.formatStripeErrors=function(e){return Object.keys(e).reduce((function(t,r){t.push(e[r]);return t}),[]).join(", ")};var n=u(r(18915)),a=u(r(38742)),o=r(70348);function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],u=!0,i=!1;try{for(r=r.call(e);!(u=(n=r.next()).done);u=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{u||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,a,o,u){try{var i=e[o](u),l=i.value}catch(e){r(e);return}i.done?t(l):Promise.resolve(l).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){s(o,n,a,u,i,"next",e)}function i(e){s(o,n,a,u,i,"throw",e)}u(void 0)}))}}var d=Object.freeze({REQUIRES_PAYMENT_METHOD:"requires_payment_method",REQUIRES_CONFIRMATION:"requires_confirmation",REQUIRES_ACTION:"requires_action",PROCESSING:"processing",CANCELED:"canceled",SUCCEEDED:"succeeded"}),f="https://js.stripe.com/v2/";a.default.register(f,"Stripe");var p="https://js.stripe.com/v3/"
;a.default.register(p,"Stripe");function y(){return a.default.ensure(f).then((function(e){e.setPublishableKey(o.PaymentSettings.STRIPE.KEY);return e}))}function v(){return y().then((function(){return a.default.ensure(p).then((function(e){return e(o.PaymentSettings.STRIPE.KEY)}))}))}function m(){return(m=c(regeneratorRuntime.mark((function e(t){var r,a,u,l,s,c,f,p,y,m,h,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return Promise.all([n.default.get({url:o.Endpoints.BILLING_STRIPE_PAYMENT_INTENTS(t),oldFormErrors:!0}),v()]);case 3:a=e.sent;u=i(a,2);l=u[0];s=u[1];c=l.body.stripe_payment_intent_client_secret;e.next=10;return s.retrievePaymentIntent(c);case 10:f=e.sent;p=f.error;y=f.paymentIntent;if(null==p){e.next=15;break}return e.abrupt("return",{error:p.message});case 15:m={}
;y.status===d.REQUIRES_PAYMENT_METHOD&&null!=(null===(r=y.last_payment_error)||void 0===r?void 0:r.payment_method)&&(m.payment_method=y.last_payment_error.payment_method.id);e.t0=y.status;e.next=e.t0===d.REQUIRES_PAYMENT_METHOD||e.t0===d.REQUIRES_CONFIRMATION||e.t0===d.REQUIRES_ACTION?20:e.t0===d.SUCCEEDED||e.t0===d.PROCESSING?29:(e.t0,d.CANCELED,30);break;case 20:e.next=22;return s.handleCardPayment(c,m);case 22:h=e.sent;if(null==(S=h.error)){e.next=28;break}return e.abrupt("return",{error:S.message});case 28:case 29:return e.abrupt("return",{});case 30:return e.abrupt("return",{error:"Invalid Payment Intent status: "+y.status});case 31:e.next=36;break;case 33:e.prev=33;e.t1=e.catch(0);return e.abrupt("return",{error:e.t1.message});case 36:case"end":return e.stop()}}),e,null,[[0,33]])})))).apply(this,arguments)}},46601:()=>{},8732:()=>{},71922:()=>{},2363:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=46abccfb018e577cdf21.js.map