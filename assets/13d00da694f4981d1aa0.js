(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[76022],{799050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=r(47354),a=r(377371),o=u(r(636602)),l=u(r(351772)),i=r(770348);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r,n,a,o,l){try{var i=e[o](l),u=i.value}catch(e){r(e);return}i.done?t(u):Promise.resolve(u).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){s(o,n,a,l,i,"next",e)}function i(e){s(o,n,a,l,i,"throw",e)}l(void 0)}))}}var c={signup:function(e,t){return l.default.post({url:i.Endpoints.HUB_WAITLIST_SIGNUP,body:{email:e,school:t},trackedActionData:{event:n.NetworkActionNames.HUB_WAITLIST_SIGNUP,properties:function(e){var t,r=!1,n=null==e||null===(t=e.body)||void 0===t?void 0:t.email_domain;if(null!=n){r=-1!==n.split(".").indexOf("edu")}return(0,a.exact)({is_edu_email:r})}}})},
sendVerificationEmail:function(e,t,r){return f(regeneratorRuntime.mark((function o(){var u;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return l.default.post({url:i.Endpoints.HUB_EMAIL_VERIFY_SEND,body:{email:e,guild_id:r,allow_multiple_guilds:t,use_verification_code:!0},trackedActionData:{event:n.NetworkActionNames.HUB_EMAIL_VERIFY_SEND,properties:function(e){var t,r=null==e||null===(t=e.body)||void 0===t?void 0:t.has_matching_guild;return(0,a.exact)({has_matching_guild:r})}}});case 2:u=o.sent;return o.abrupt("return",u.body);case 4:case"end":return o.stop()}}),o)})))()},verify:function(e){return f(regeneratorRuntime.mark((function t(){var r,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e){t.next=12;break}t.prev=1;t.next=4;return l.default.post({url:i.Endpoints.HUB_EMAIL_VERIFY,body:{token:e},trackedActionData:{event:n.NetworkActionNames.HUB_EMAIL_VERIFY}});case 4:a=t.sent
;u=null===(r=a.body.guild)||void 0===r?void 0:r.id;o.default.dispatch({type:i.ActionTypes.HUB_VERIFY_EMAIL_SUCCESS,guildId:u});t.next=12;break;case 9:t.prev=9;t.t0=t.catch(1);o.default.dispatch({type:i.ActionTypes.HUB_VERIFY_EMAIL_FAILURE,errors:t.t0.body});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},verifyCode:function(e,t,r){return f(regeneratorRuntime.mark((function a(){var u,s,f;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null==e){a.next=14;break}a.prev=1;a.next=4;return l.default.post({url:i.Endpoints.HUB_EMAIL_VERIFY_CODE,body:{code:e,guild_id:t,email:r},trackedActionData:{event:n.NetworkActionNames.HUB_EMAIL_VERIFY}});case 4:s=a.sent;f=null===(u=s.body.guild)||void 0===u?void 0:u.id;o.default.dispatch({type:i.ActionTypes.HUB_VERIFY_EMAIL_SUCCESS,guildId:f});return a.abrupt("return",s.body);case 10:a.prev=10;a.t0=a.catch(1);o.default.dispatch({type:i.ActionTypes.HUB_VERIFY_EMAIL_FAILURE,errors:a.t0.body});throw a.t0;case 14:
case"end":return a.stop()}}),a,null,[[1,10]])})))()}};t.default=c},948027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=(0,r(373505).createExperiment)({kind:"user",id:"2021-06_hub_email_connection",label:"Hub Email Connection",defaultConfig:{showModal:!1,showTab:!1,forceShowModal:!1},treatments:[{id:1,label:"Show email connection modal",config:{showModal:!0,showTab:!0,forceShowModal:!1}},{id:2,label:"Force show email connection modal",config:{showModal:!0,showTab:!0,forceShowModal:!0}}]});t.default=n},218813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=v(r(730381)),a=r(923387),o=v(r(737863)),l=r(203847),i=v(r(30098)),u=v(r(728429)),s=r(42031),f=v(r(71636)),c=v(r(948027)),d=r(770348),p=r(583551);function v(e){return e&&e.__esModule?e:{default:e}}var m={init:function(e){var t=e.hasModalOpen,r=e.openModal;s.ProcessArgs.isDisallowPopupsSet()||o.default.call((function(){
var e=u.default.getCurrentUser(),o=null!=e&&(0,n.default)().diff((0,n.default)(f.default.extractTimestamp(e.id)),"days")<3,s=null!=Object.values(i.default.getGuilds()).find((function(e){return e.hasFeature(d.GuildFeatures.HUB)})),p=!(0,l.isDismissibleContentDismissed)(a.DismissibleContent.HUB_WAITLIST_UPSELL);if(o||t()||s||!p){c.default.getCurrentConfig({}).forceShowModal&&r()}else{c.default.trackExposure({});if(c.default.getCurrentConfig({}).showModal){r();(0,l.maybeMarkDismissibleContentAsShown)(a.DismissibleContent.HUB_WAITLIST_UPSELL)}}}))},hideHubUpsell:function(){(0,l.markDismissibleContentAsDismissed)(a.DismissibleContent.HUB_WAITLIST_UPSELL,{dismissAction:p.ContentDismissActionType.AUTO})}};t.default=m},612076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e)
;var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=N(r(294184)),l=N(r(799050)),i=r(327269),u=N(r(644263)),s=N(r(956117)),f=r(772575),c=r(645758),d=N(r(279950)),p=r(354479),v=r(688388),m=r(485280),y=N(r(247001)),_=N(r(404029));function N(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function E(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{})
;return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function b(e,t,r,n,a,o,l){try{var i=e[o](l),u=i.value}catch(e){r(e);return}i.done?t(u):Promise.resolve(u).then(n,a)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,p.uid)(),C=function(e){var t=e.setStep,r=e.setGuildsInfo,n=e.email,p=e.setEmail,N=e.setGuildId,g=e.invite,I=e.onClose,C=e.isNUXFlow,O=h(a.useState(null),2),w=O[0],A=O[1],T=h(a.useState(!1),2),M=T[0],U=T[1],L=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){var o,s,f,c,d,p,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();A(null);U(!0);e.prev=3;(p=null!==(o=null!==(s=null==g||null===(f=g.guild)||void 0===f?void 0:f.id)&&void 0!==s?s:null===(c=u.default.getChannel(null==g||null===(d=g.channel)||void 0===d?void 0:d.id))||void 0===c?void 0:c.getGuildId())&&void 0!==o?o:void 0)===m.INVITE_ROUTING_HUB_GUILD_ID&&(p=void 0);e.next=8
;return l.default.sendVerificationEmail(n,!0,p);case 8:v=e.sent;y=v.guilds_info;if(!v.has_matching_guild){e.next=16;break}N(p);t(m.HubEmailConnectionSteps.VERIFY_PIN);e.next=29;break;case 16:if(0!==y.length){e.next=20;break}t(m.HubEmailConnectionSteps.SUBMIT_SCHOOL);e.next=29;break;case 20:if(1!==y.length){e.next=27;break}N(y[0].id);e.next=24;return l.default.sendVerificationEmail(n,!0,y[0].id);case 24:t(m.HubEmailConnectionSteps.VERIFY_PIN);e.next=29;break;case 27:r(y);t(m.HubEmailConnectionSteps.SELECT_SCHOOL);case 29:e.next=34;break;case 31:e.prev=31;e.t0=e.catch(3);A(new i.APIError(e.t0));case 34:e.prev=34;U(!1);return e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[3,31,34,37]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){b(o,n,a,l,i,"next",e)}function i(e){b(o,n,a,l,i,"throw",e)}l(void 0)}))});return function(e){return a.apply(this,arguments)}
}(),P=y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_HEADER,H=y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_DESCRIPTION;if(C){P=y.default.Messages.HUB_EMAIL_CONNECTION_NUX_HEADER;H=y.default.Messages.HUB_EMAIL_CONNECTION_NUX_CONTENT_DESCRIPTION}else if(null!=(null==g?void 0:g.guild)&&g.guild.id!==m.INVITE_ROUTING_HUB_GUILD_ID&&null!=(null==g?void 0:g.approximate_member_count)){var R=g.guild.name;P=y.default.Messages.HUB_EMAIL_CONNECTION_INVITE_HEADER.format({guildName:R,count:g.approximate_member_count})}return E("div",{className:_.default.container},void 0,E("div",{className:_.default.topImage}),E(f.Heading,{className:(0,o.default)(_.default.centerText,_.default.header),variant:"heading-xl/medium",level:3},void 0,P),E("div",{className:_.default.descriptionWidth},void 0,E(c.Text,{className:_.default.centerText,variant:"text-sm/normal",color:"header-secondary"},void 0,H)),E("form",{className:_.default.formContent,onSubmit:L},void 0,E(v.FormItem,{},void 0,E(v.FormTitle,{id:S
},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_HEADER),E(d.default,{placeholder:y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_PLACEHOLDER,onChange:function(e){p(e)},error:null==w?void 0:w.getAnyErrorMessage(),"aria-labelledby":S})),E(c.Text,{color:"header-secondary",className:_.default.formDescription,variant:"text-sm/normal"},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_INPUT_DESCRIPTION),E(s.default,{type:"submit",size:s.default.Sizes.LARGE,color:s.default.Colors.BRAND,className:_.default.submitButton,submitting:M},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_CONTENT_BUTTON),C&&E(s.default,{look:s.default.Looks.LINK,onClick:I,className:_.default.cancelButton},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_CANCEL)))};C.displayName="HubEmailConnectionContent";var O=C;t.default=O},71283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e
;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=c(r(612076)),l=c(r(10467)),i=c(r(703932)),u=c(r(663916)),s=c(r(88428)),f=r(485280);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}
if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.onClose,r=e.invite,n=e.forceGuildScrollHeight,c=void 0===n||n,d=e.isNUXFlow,m=v(a.useState([f.HubEmailConnectionSteps.VERIFY_EMAIL]),2),y=m[0],_=m[1],N=v(a.useState(""),2),g=N[0],E=N[1],b=v(a.useState(""),2),h=b[0],I=b[1],S=v(a.useState(void 0),2),C=S[0],O=S[1],w=v(a.useState([]),2),A=w[0],T=w[1],M=function(e){var t=y.concat(e);_(t.slice(-4))};switch(y[y.length-1]){case f.HubEmailConnectionSteps.VERIFY_EMAIL:return p(o.default,{setGuildsInfo:T,setStep:M,email:g,setEmail:E,setGuildId:O,invite:r,onClose:t,isNUXFlow:d});case f.HubEmailConnectionSteps.SELECT_SCHOOL:return p(l.default,{guildsInfo:A,setStep:M,email:g,setGuildId:O,forceGuildScrollHeight:c});case f.HubEmailConnectionSteps.SUBMIT_SCHOOL:
return p(i.default,{onBack:function(){if(y.length>1){var e=y.slice(0,-1);_(e.slice(-4))}},setStep:M,email:g,school:h,setSchool:I});case f.HubEmailConnectionSteps.VERIFY_PIN:return p(u.default,{email:g,onClose:t,guildId:C});case f.HubEmailConnectionSteps.EMAIL_WAITLIST:return p(s.default,{setStep:M,school:h});default:return null}};t.default=y},10467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),o=I(r(294184)),l=I(r(824390)),i=I(r(799050)),u=r(327269),s=I(r(539563)),f=I(r(16941)),c=I(r(380439)),d=r(772575),p=I(r(535813)),v=I(r(80828)),m=r(645758),y=I(r(272544)),_=r(582945),N=I(r(692711)),g=r(485280),E=I(r(247001)),b=I(r(696481)),h=I(r(489893));function I(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function C(e,t,r,n,a,o,l){try{var i=e[o](l),u=i.value}catch(e){r(e);return}i.done?t(u):Promise.resolve(u).then(n,a)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){C(o,n,a,l,i,"next",e)}function i(e){C(o,n,a,l,i,"throw",e)}l(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{
for(r=r.call(e);!(l=(n=r.next()).done);l=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){
for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function M(e){var t,r=e.guildInfo,n=e.onClick,a=e.submitting,o=null!==(t=N.default.getGuildIconURL({id:r.id,icon:r.icon,size:40}))&&void 0!==t?t:void 0;return T(f.default,{className:b.default.clickableGuildInfoRow,onClick:n},void 0,T(y.default,{mask:y.default.Masks.AVATAR_DEFAULT,width:40,height:40},void 0,T(c.default,{className:b.default.guildIcon,iconSrc:o,guild:new s.default(r),size:c.default.Sizes.MEDIUM})),T(m.Text,{className:b.default.guildName,variant:"text-md/normal"},void 0,r.name),a?T(v.default,{type:v.default.Type.PULSING_ELLIPSIS}):T("img",{className:b.default.arrow,alt:"",src:h.default}))}M.displayName="GuildInfoRow";var U=function(e){
var t,r=e.setStep,n=e.email,s=e.guildsInfo,f=e.setGuildId,c=e.forceGuildScrollHeight,v=w(a.useState(null),2),y=v[0],N=v[1],h=w(a.useState(void 0),2),I=h[0],S=h[1],C=w(a.useState(null),2),A=C[0],U=C[1],L=function(){return r(g.HubEmailConnectionSteps.SUBMIT_SCHOOL)},P=s;null!=I&&""!==I&&(P=s.filter((function(e){return(0,l.default)(I.toLowerCase(),e.name.toLowerCase())})));return T("div",{className:b.default.container},void 0,T(d.Heading,{className:(0,o.default)(b.default.centerText,b.default.header),variant:"heading-xl/medium",level:3},void 0,E.default.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_HEADER),T("div",{className:b.default.description},void 0,T(m.Text,{className:b.default.centerText,variant:"text-sm/normal",color:"header-secondary"},void 0,E.default.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_SUBHEADER.format({onJoinWaitlist:L}))),T("div",{className:(0,o.default)(b.default.guildList,(t={},t[b.default.forcedHeight]=c,t))},void 0,T("div",{className:b.default.searchContainer
},void 0,T(p.default,{placeholder:E.default.Messages.SEARCH,className:b.default.searchBox,inputClassName:b.default.searchBoxInput,searchIconClassName:b.default.searchBoxIcon,closeIconClassName:b.default.searchBoxIcon,onChange:function(e){S(e)},label:E.default.Messages.SEARCH,searchTerm:I,onClear:function(){S(void 0)}}),T(m.Text,{color:"text-danger",variant:"text-xs/normal"},void 0,null==y?void 0:y.getAnyErrorMessage())),P.length>0?T(_.ScrollerThin,{className:b.default.scroller},void 0,P.map((function(e){return void 0===e?null:T(M,{guildInfo:e,onClick:(t=e.id,O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(null);f(t);U(t);e.prev=3;e.next=6;return i.default.sendVerificationEmail(n,!0,t);case 6:r(g.HubEmailConnectionSteps.VERIFY_PIN);e.next=12;break;case 9:e.prev=9;e.t0=e.catch(3);N(new u.APIError(e.t0));case 12:e.prev=12;U(null);return e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,9,12,15]])})))),
submitting:A===e.id},e.id);var t}))):T("div",{className:b.default.noResultsContainer},void 0,T("div",{className:b.default.noResultsContent},void 0,T("div",{className:b.default.noResultsImage}),T(d.Heading,{className:(0,o.default)(b.default.centerText,b.default.header),variant:"heading-xl/medium",level:3},void 0,E.default.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_HEADER),T(m.Text,{className:b.default.centerText,variant:"text-md/normal"},void 0,E.default.Messages.HUB_EMAIL_CONNECTION_GUILD_SELECT_NO_RESULTS_SUBHEADER.format({onJoinWaitlist:L}))))))};U.displayName="HubEmailConnectionGuildSelect";var L=U;t.default=L},376022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HubEmailConnectionModalView=void 0;t.default=N;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=r(47354),l=v(r(885986)),i=r(3400),u=v(r(218813)),s=v(r(71283)),f=v(r(380600)),c=r(33989),d=v(r(247001)),p=v(r(110643));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function y(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var _=y(f.default,{});function N(e){
var t=e.transitionState,r=e.onClose,n=e.isNUXFlow;a.useEffect((function(){u.default.hideHubUpsell();n&&l.default.flowStep(c.FlowType.ORGANIC,c.RegistrationSteps.HUB_CONNECTION)}),[n]);return y(i.ModalRoot,{className:p.default.modalRoot,transitionState:t,"aria-label":d.default.Messages.HUB_WAITLIST_MODAL_JOIN_HEADER,impressionName:o.ImpressionNames.HUB_EMAIL_SIGNUP},void 0,y(i.ModalContent,{style:{overflow:"hidden",paddingRight:"0px"},paddingFix:!1,className:p.default.modalContent},void 0,y("div",{className:p.default.container},void 0,y("div",{className:p.default.sidebarContainer},void 0,_),y("div",{className:p.default.contentContainer},void 0,y(i.ModalCloseButton,{onClick:r,className:p.default.closeButton}),y(s.default,{isNUXFlow:n,onClose:r})))))}N.displayName="HubEmailConnectionModal";var g=y(f.default,{}),E=function(e){var t=e.invite;return y("div",{className:p.default.container},void 0,y("div",{className:p.default.sidebarContainer},void 0,g),y("div",{
className:p.default.contentContainer},void 0,y(s.default,{invite:t})))};t.HubEmailConnectionModalView=E;E.displayName="HubEmailConnectionModalView"},380600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n)}(r(667294));var n,a=r(645758),o=i(r(247001)),l=i(r(870472));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function s(e,t,r,a){
n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var f=function(){return s("div",{className:l.default.container},void 0,s("div",{className:l.default.iconContainer},void 0,s("div",{className:l.default.icon})),s(a.Text,{color:"header-primary",variant:"text-lg/semibold",className:l.default.header},void 0,o.default.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_HEADER),s(a.Text,{color:"header-secondary",variant:"text-sm/normal",className:l.default.description},void 0,o.default.Messages.HUB_EMAIL_CONNECTION_SIDEBAR_DESCRIPTION.format()))};f.displayName="HubEmailConnectionSidebar";var c=f;t.default=c},703932:(e,t,r)=>{"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=N(r(294184)),l=N(r(799050)),i=r(327269),u=N(r(956117)),s=r(772575),f=r(645758),c=N(r(279950)),d=r(354479),p=r(688388),v=r(485280),m=r(770348),y=N(r(247001)),_=N(r(971932));function N(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function E(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)
;var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function b(e,t,r,n,a,o,l){try{var i=e[o](l),u=i.value}catch(e){r(e);return}i.done?t(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){b(o,n,a,l,i,"next",e)}function i(e){b(o,n,a,l,i,"throw",e)}l(void 0)}))}}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{l||null==r.return||r.return()
}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=(0,d.uid)(),O=function(e){var t=e.email,r=e.setStep,n=e.onBack,d=e.school,N=e.setSchool,g=I(a.useState(null),2),b=g[0],S=g[1],O=I(a.useState(!1),2),w=O[0],A=O[1],T=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(null);A(!0);e.prev=2;e.next=5;return l.default.signup(t,d);case 5:
r(v.HubEmailConnectionSteps.EMAIL_WAITLIST);e.next=11;break;case 8:e.prev=8;e.t0=e.catch(2);S(new i.APIError(e.t0));case 11:e.prev=11;A(!1);return e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==d||""===d||t.charCode!==m.KeyboardKeys.ENTER){e.next=3;break}e.next=3;return T();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return E("div",{className:_.default.container},void 0,E("div",{className:_.default.topImage}),E(s.Heading,{className:(0,o.default)(_.default.centerText,_.default.header),variant:"heading-xl/medium",level:3},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_HEADER),E("div",{className:_.default.descriptionWidth},void 0,E(f.Text,{className:_.default.centerText,variant:"text-sm/normal",
color:"header-secondary"},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_DESCRIPTION)),E(p.FormItem,{className:_.default.formItem},void 0,E(p.FormTitle,{id:C},void 0,y.default.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_HEADER),E(c.default,{onKeyPress:M,placeholder:y.default.Messages.HUB_EMAIL_CONNECTION_SCHOOL_SUBMIT_INPUT_PLACEHOLDER,onChange:function(e){N(e)},error:null==b?void 0:b.getAnyErrorMessage(),"aria-labelledby":C})),E("div",{className:_.default.footer},void 0,E(u.default,{className:_.default.backButton,onClick:n,look:u.default.Looks.LINK,size:u.default.Sizes.NONE,color:u.default.Colors.PRIMARY},void 0,y.default.Messages.BACK),E(u.default,{onClick:T,size:u.default.Sizes.MEDIUM,color:u.default.Colors.BRAND,className:_.default.submitButton,submitting:w},void 0,y.default.Messages.JOIN_WAITLIST)))};O.displayName="HubEmailConnectionSubmitSchool";var w=O;t.default=w},663916:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=g(r(294184)),l=g(r(496486)),i=g(r(799050)),u=r(327269),s=r(139982),f=g(r(956117)),c=r(772575),d=r(645758),p=g(r(279950)),v=r(354479),m=r(688388),y=r(770348),_=g(r(247001)),N=g(r(286458));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function b(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={
children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function h(e,t,r,n,a,o,l){try{var i=e[o](l),u=i.value}catch(e){r(e);return}i.done?t(u):Promise.resolve(u).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){h(o,n,a,l,i,"next",e)}function i(e){h(o,n,a,l,i,"throw",e)}l(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done);l=!0){o.push(n.value);if(t&&o.length===t)break}}catch(e){i=!0;a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return
;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=(0,v.uid)(),w=function(e){var t=e.email,r=e.guildId,n=e.onClose,v=S(a.useState(""),2),g=v[0],E=v[1],h=S(a.useState(null),2),C=h[0],w=h[1],A=a.useCallback(I(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r){e.next=11;break}e.prev=1;e.next=4;return i.default.verifyCode(g,r,t);case 4:if((a=e.sent).guild){null==n||n();(0,
s.transitionTo)(y.Routes.CHANNEL(a.guild.id))}e.next=11;break;case 8:e.prev=8;e.t0=e.catch(1);w(new u.APIError(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[g,t,r,n]),T=l.default.throttle((function(){i.default.sendVerificationEmail(t,!0,r)}),1e3),M=function(){var e=I(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==g||""===g||t.charCode!==y.KeyboardKeys.ENTER){e.next=3;break}e.next=3;return A();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b("div",{className:N.default.container},void 0,b("div",{className:N.default.topImage}),b(c.Heading,{className:(0,o.default)(N.default.centerText,N.default.header),variant:"heading-xl/medium",level:3},void 0,_.default.Messages.HUB_VERIFY_EMAIL_ADDRESS),b("div",{className:N.default.descriptionWidth},void 0,b(d.Text,{className:N.default.centerText,variant:"text-sm/normal",color:"header-secondary"
},void 0,_.default.Messages.HUB_PIN_DESCRIPTION.format({email:t,onClick:T}))),b(m.FormItem,{className:N.default.formItem},void 0,b(m.FormTitle,{id:O},void 0,_.default.Messages.HUB_ENTER_PIN),b(p.default,{onKeyPress:M,label:_.default.Messages.HUB_ENTER_PIN,onChange:function(e){null!=e&&""!==e&&E(e)},error:null==C?void 0:C.getAnyErrorMessage(),"aria-labelledby":O})),b(f.default,{fullWidth:!0,onClick:A,size:f.default.Sizes.LARGE,color:f.default.Colors.BRAND},void 0,b(d.Text,{className:N.default.submitText,variant:"text-sm/normal"},void 0,_.default.Messages.SUBMIT)))};w.displayName="HubEmailConnectionVerifyCode";var A=w;t.default=A},88428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e;r&&r.set(e,n)}(r(667294));var n,a=c(r(294184)),o=c(r(956117)),l=r(772575),i=r(645758),u=r(485280),s=c(r(247001)),f=c(r(404029));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,l=arguments.length-3;if(t||0===l||(t={children:void 0}),1===l)t.children=a;else if(l>1){for(var i=new Array(l),u=0;u<l;u++)i[u]=arguments[u+3];t.children=i}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var v=function(e){var t=e.school,r=e.setStep;return p("div",{
className:f.default.container},void 0,p("div",{className:f.default.topImage}),p(l.Heading,{className:(0,a.default)(f.default.centerText,f.default.header),variant:"heading-xl/medium",level:3},void 0,s.default.Messages.HUB_WAITLIST_MODAL_JOINED_HEADER),p("div",{className:f.default.descriptionWidth},void 0,p(i.Text,{className:f.default.centerText,variant:"text-sm/normal",color:"header-secondary"},void 0,s.default.Messages.HUB_WAITLIST_MODAL_JOINED_DESCRIPTION.format({school:t}))),p(o.default,{look:o.default.Looks.LINK,size:o.default.Sizes.SMALL,color:o.default.Colors.LINK,onClick:function(){r(u.HubEmailConnectionSteps.VERIFY_EMAIL)},className:f.default.resendLink},void 0,s.default.Messages.HUB_EMAIL_CONFIRMATION_DIFFERENT_EMAIL))};v.displayName="HubEmailConnectionWaitlist";var m=v;t.default=m},33989:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RegistrationSteps=t.FlowType=t.CreateGuildSteps=t.ClaimAccountSteps=t.AgeGateSteps=void 0;var r,n,a,o,l;t.FlowType=r
;!function(e){e.UNKNOWN="unknown";e.ANY="any";e.INVITE="invite";e.ORGANIC="organic_registration";e.ORGANIC_MARKETING="organic_marketing";e.ORGANIC_GUILD_TEMPLATES="organic_guild_template";e.CREATE_GUILD="create_guild"}(r||(t.FlowType=r={}));t.AgeGateSteps=n;!function(e){e.AGE_GATE="age_gate";e.AGE_GATE_UNDERAGE="age_gate_underage"}(n||(t.AgeGateSteps=n={}));t.ClaimAccountSteps=a;!function(e){e.CLAIM_ACCOUNT="claim_account";e.CLAIM_ACCOUNT_SUCCESS="claim_account_success"}(a||(t.ClaimAccountSteps=a={}));t.CreateGuildSteps=o;!function(e){e.GUILD_TEMPLATES="guild_templates";e.GUILD_CREATE="guild_create";e.CREATION_INTENT="creation_intent";e.CHANNEL_PROMPT="channel_prompt";e.JOIN_GUILD="join_guild";e.SUCCESS="create_success"}(o||(t.CreateGuildSteps=o={}));t.RegistrationSteps=l;!function(e){e.NUF_STARTED="nuf_started";e.AGE_GATE="age_gate";e.NUF_COMPLETE="nuf_complete";e.HUB_CONNECTION="hub_connection"}(l||(t.RegistrationSteps=l={}))},885986:(e,t,r)=>{"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n=f(r(219548)),a=f(r(972247)),o=f(r(791548)),l=f(r(308920)),i=r(33989),u=r(770348),s=["version"];function f(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(){d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return d.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++){r=o[n];t.indexOf(r)>=0||(a[r]=e[r])}return a}var v="UserFlowAnalyticsStore_current",m="UserFlowAnalyticsStore";new o.default("UserFlowAnalytics")
;function y(e){if(e===i.FlowType.UNKNOWN)return null;var t=a.default.get(m+"-"+e);if(null==t)return null;var r=t.version,n=p(t,s);return 1!==r?null:n}var _=(0,n.default)((function(e,t){return{flows:{},currentFlow:null,activeFlow:function(){var e,r=null!==(e=t().currentFlow)&&void 0!==e?e:a.default.get(v);if(null==r)return null;var n=t().flows[r],o=null!=n?n:y(r);return null!=(null==o?void 0:o.currentStep)?r:null}}}));_.subscribe((function(e){var t;if(null!=e){!function(e){if(e.type!==i.FlowType.UNKNOWN){var t=m+"-"+e.type;if(e.ended){a.default.remove(t);a.default.remove(v)}else{a.default.set(m+"-"+e.type,d({},e,{version:1}));a.default.set(v,e.type)}}}(e);l.default.track(u.AnalyticEvents.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0});if(e.ended){var r=d({},_.getState().flows)
;delete r[e.type];_.setState({flows:r,currentFlow:null})}}}),(function(e){return null!=e.currentFlow?e.flows[e.currentFlow]:void 0}));function N(e,t){var r,n=_.getState().flows,a=n[e],o=p(n,[e].map(c)),l=null!=a?a:y(e);if(null!=(null==l?void 0:l.currentStep)){if(l.currentStep===t)return;0}_.setState({flows:d({},o,(r={},r[e]={type:e,lastStep:null,lastTimestamp:null,currentStep:t,currentTimestamp:new Date,skipped:!1},r)),currentFlow:e})}function g(e,t,r){var n;void 0===r&&(r=!1);var a=e;if(e===i.FlowType.ANY){var o;a=null!==(o=_.getState().activeFlow())&&void 0!==o?o:i.FlowType.UNKNOWN}var l=_.getState().flows,u=l[a],s=p(l,[a].map(c)),f=null!=u?u:y(a);null!=f&&null!=f.currentStep&&f.currentStep!==t&&_.setState({flows:d({},s,(n={},n[a]=d({},f,{lastStep:f.currentStep,lastTimestamp:f.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:r}),n)),currentFlow:a})}function E(){return null!=_.getState().activeFlow()}var b={flowStart:N,flowStepOrStart:function(e,t){E()?g(e,t):N(e,t)},
flowStep:g,hasActiveFlow:E};t.default=b},489893:(e,t,r)=>{e.exports=r.p+"dea5252276408a8bfca6dda585ca5216.svg"}}]);
//# sourceMappingURL=13d00da694f4981d1aa0.js.map