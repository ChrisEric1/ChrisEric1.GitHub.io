"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[35743,23286],{70389:(e,t,r)=>{r.r(t);r.d(t,{default:()=>d});var n=r(785893),o=r(667294),i=r(517563),a=r(817178),c=r(690217),s=r(710680),u=r(461061);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){i.push(n.value);if(t&&i.length===t)break}}catch(e){c=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){var t=e.platformType,r=f(o.useState("verifying"),2),a=r[0],u=r[1];o.useEffect((function(){var e=i.parse(window.location.search),r=e.code,n=e.state;if(null!=r&&null!=n){var o={code:r,state:n};c.Z.linkDispatchAuthCallback(t,o).then((function(e){var t=e.status;u(204===t?"verified":"error")}),(function(){u("error")}))}else u("error")}),[t]);return(0,n.jsx)(s.AccountConnectionResult,{platformType:t,verifying:"verifying"===a,verified:"verified"===a})}const d=function(e){var t=e.match.params.type,r=i.parse(window.location.search).two_way_link_type;return[u.ABu.XBOX,u.ABu.PLAYSTATION_STAGING,u.ABu.PLAYSTATION,u.ABu.CRUNCHYROLL].includes(t)&&r===a.g.DESKTOP?(0,n.jsx)(p,{platformType:t}):null}},710680:(e,t,r)=>{r.r(t)
;r.d(t,{AccountConnectionResult:()=>E,default:()=>_});var n=r(785893),o=r(667294),i=r(294184),a=r.n(i),c=r(517563),s=r(331535),u=r(690217),l=r(332233),f=r(772731),p=r(461061),d=r(959797),y=r(12066),v=r.n(y);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return b(e)}function g(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))
;return e}function O(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e,t){j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return j(e,t)}var C=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}var N=null!=window.opener;function E(e){var t,r,i=e.verifying,c=e.verified,u=e.platformType,f=l.Z.get(u),p=o.useCallback((function(){window.close()}),[]);t=i?(0,n.jsx)("div",{
className:v().message,children:d.Z.Messages.CONNECTED_ACCOUNT_VERIFYING.format({name:f.name})}):c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:v().message,children:d.Z.Messages.CONNECTED_ACCOUNT_VERIFY_SUCCESS.format({name:f.name})}),(0,n.jsx)("div",{className:a()(v().message,v().details),children:d.Z.Messages.CONNECTED_ACCOUNT_VERIFY_SUCCESS_DETAILS})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:a()(v().message,v().error),children:d.Z.Messages.CONNECTED_ACCOUNT_VERIFY_FAILURE.format({name:f.name})}),(0,n.jsx)("div",{className:a()(v().message,v().details),children:d.Z.Messages.CONNECTED_ACCOUNT_VERIFY_FAILURE_DETAILS})]});(N||i)&&(r=(0,n.jsx)(s.zx,{className:v().btn,disabled:i,onClick:p,children:i?(0,n.jsx)(s.$j,{itemClassName:v().spinnerItem}):d.Z.Messages.DONE}));return(0,n.jsx)("div",{className:v().verifyConnectedAccount,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:v().logos,children:[(0,n.jsx)("div",{
className:a()(v().logo,v().logoDiscord)}),(0,n.jsx)("div",{className:v().logosDivider}),(0,n.jsx)("div",{className:v().logo,style:{backgroundImage:'url("'.concat(f.icon.whiteSVG,'")')}})]}),t,r]})})}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&j(e,t)}(r,e);var t=w(r);function r(){m(this,r);var e;(e=t.apply(this,arguments)).state={verifying:!0,verified:!1};e.getType=function(){return e.props.match.params.type};return e}var o=r.prototype;o.componentDidMount=function(){var e=this,t=(0,c.parse)(this.props.location.search),r=t.code,n=t.state,o=t.oauth_verifier;if(null==t.loading){null!=o&&(r=o);var i;Object.keys(t).forEach((function(e){if(e.startsWith("openid.")){null==i&&(i={});i[e]=t[e]}}));var a=function(t){var r=t.status,n=t.body;e.setState({verifying:!1,verified:204===r||200===r},(function(){
e.state.verified&&N&&window.close()}));null!=(null==n?void 0:n.redirect)&&(window.location=n.redirect)},s={code:r,openid_params:i,state:n},l=function(t){return u.Z.callback(e.getType(),s,t).then(a,a)};N?l(!1):f.default.request(p.Etm.CONNECTIONS_CALLBACK,g(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(t){h(e,t,r[t])}))}return e}({},s),{providerType:this.getType()})).then(a,(function(e){return l("RPCError"!==e.name)})).then((function(){return f.default.disconnect()}))}};o.render=function(){var e=this.state,t=e.verifying,r=e.verified,o=this.getType();return l.Z.isSupported(o)?(0,n.jsx)(E,{platformType:this.getType(),verifying:t,verified:r}):null};return r}(o.Component);const _=T}}]);
//# sourceMappingURL=3a34a983e92cd957c1df.js.map