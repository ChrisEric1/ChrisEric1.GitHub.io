(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[95937],{934501:(e,s,r)=>{e.exports=r.p+"abf97721127e0ddf8f8c4e3c3c417a6f.svg"},195937:(e,s,r)=>{"use strict";r.r(s);r.d(s,{default:()=>F});var n,t=r(785893),a=r(667294),i=r(940060),o=r(418705),l=r(336194),c=r(945460),u=r(703790),E=r(193694),d=r(721160),I=r(558820),N=r(83623),S=r(386991),T=r(775173),_=r(563135),m=r(955514),M=r(2590),O=r(458947),f=r(940455),A=r(473708),x=r(362348),p=r.n(x);function D(e,s){(null==s||s>e.length)&&(s=e.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=e[r];return n}function v(e,s,r){s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r;return e}function g(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(s){
v(e,s,r[s])}))}return e}function h(e,s){s=null!=s?s:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):function(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})));r.push.apply(r,n)}return r}(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}));return e}function b(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,t,a=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done);i=!0){a.push(n.value);if(s&&a.length===s)break}}catch(e){o=!0;t=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw t}}return a}}(e,s)||function(e,s){if(!e)return;if("string"==typeof e)return D(e,s);var r=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.DEFAULT=0]="DEFAULT";e[e.SUBMITTING=1]="SUBMITTING";e[e.SUBMITTED=2]="SUBMITTED"}(n||(n={}));function L(e){var s=e.guild,a=e.headerText,i=e.headerSubtext,o=e.step,u=T.ZP.getGuildIconURL({id:s.id,icon:s.icon,size:120});return(0,t.jsxs)(c.ModalHeader,{className:p().header,children:[(0,t.jsxs)("div",{className:p().headerIconContainer,children:[null!=u?(0,t.jsx)(c.Avatar,{src:u,"aria-label":s.name,size:c.AvatarSizes.SIZE_120,className:p().guildIcon}):(0,t.jsx)("div",{className:p().acronym,children:s.acronym}),o===n.SUBMITTED?(0,t.jsx)(N.Z,{className:p().greenPing,color:l.Z.unsafe_rawColors.GREEN_360.css,
backgroundColor:l.Z.unsafe_rawColors.WHITE_100.css}):(0,t.jsx)(I.Ee,{src:r(934501),className:p().redPing})]}),(0,t.jsxs)("div",{className:p().headerText,children:[(0,t.jsx)(c.Heading,{variant:"heading-lg/extrabold",color:"header-primary",children:a}),(0,t.jsx)(c.Text,{variant:"text-md/normal",color:"header-primary",children:i})]})]})}function U(e){var s=e.guild,r=s.getRole(s.id);if(null==r)return null;var n=r.name,a=r.color;return(0,t.jsxs)("span",{className:p().roleRow,children:[(0,t.jsx)(c.RoleDot,{className:p().roleDot,color:a.toString(),background:!1,tooltip:!1}),(0,t.jsx)(c.Text,{className:p().roleName,variant:"text-sm/medium",color:"interactive-active",children:n})]})}var j=function(e){return e.toString()===M.Plq.MENTION_EVERYONE.toString()?A.Z.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_MENTION_EVERYONE:(0,d.wt)(e)};function C(e){var s=e.permissions,r=e.step;return r===n.SUBMITTED?null:(0,t.jsxs)("div",{className:p().tableContainer,children:[(0,t.jsx)(c.Text,{
className:p().tableHeader,variant:"text-xs/semibold",color:"text-muted",children:r===n.DEFAULT?A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_ENABLED_PERMISSIONS:A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLING_PERMISSIONS}),(0,t.jsx)("div",{className:p().permissionsTable,children:s.map((function(e,s){return(0,t.jsxs)("div",{className:p().permissionRow,children:[(0,t.jsx)("div",{className:r===n.DEFAULT?p().bulletPositive:p().bulletWarning}),(0,t.jsx)(c.Text,{variant:"text-sm/normal",color:"text-normal",children:j(e)})]},s)}))})]})}function R(e){var s=e.permissions,r=e.step;if(0===s.length&&r!==n.SUBMITTED)return null;r===n.SUBMITTED&&(s=f.$X);return(0,t.jsxs)("div",{className:p().tableContainer,children:[(0,t.jsx)(c.Text,{className:p().tableHeader,variant:"text-xs/semibold",color:"text-muted",children:r===n.SUBMITTED?A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLED:A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLED_PERMISSIONS}),(0,t.jsx)("div",{
className:p().permissionsTable,children:s.map((function(e,s){return(0,t.jsxs)("div",{className:p().permissionRow,children:[(0,t.jsx)("div",{className:p().bullet}),(0,t.jsx)(c.Text,{variant:"text-sm/normal",color:"text-muted",children:j(e)})]},s)}))})]})}function P(e){var s=e.permissions,r=e.step,a=s.enabledPermissions,i=s.disabledPermissions;return 0===a.length&&r!==n.SUBMITTED?null:(0,t.jsxs)("div",{className:p().table,children:[r!==n.SUBMITTED?(0,t.jsx)(C,{permissions:a,step:r}):null,(0,t.jsx)(R,{permissions:i,step:r})]})}function y(e){var s=e.guild,r=e.permissions,n=e.step,a=e.canEveryoneModerate,i=e.isDefaultNotificationsAllMessages;return(0,t.jsx)(c.ModalContent,{children:(0,t.jsxs)("div",{className:p().updatedForm,children:[i?(0,t.jsxs)("div",{className:p().checklistRow,children:[(0,t.jsx)(N.Z,{className:p().checklistIcon,color:l.Z.unsafe_rawColors.GREEN_360.css,backgroundColor:l.Z.unsafe_rawColors.WHITE_100.css}),(0,t.jsx)(c.Text,{variant:"text-md/normal",
children:A.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_LABEL.format({infoHook:function(){return(0,t.jsx)(c.Tooltip,{text:A.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP,"aria-label":A.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP,children:function(e){return(0,t.jsx)(S.Z,g({className:p().icon},e))}})}})})]}):null,a?(0,t.jsxs)("div",{className:p().checklistRow,children:[(0,t.jsx)(N.Z,{className:p().checklistIcon,color:l.Z.unsafe_rawColors.GREEN_360.css,backgroundColor:l.Z.unsafe_rawColors.WHITE_100.css}),(0,t.jsx)(c.Text,{variant:"text-md/normal",children:A.Z.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_LABEL_UPDATED}),(0,t.jsx)(U,{guild:s})]}):null,(0,t.jsx)(P,{permissions:r,step:n})]})})}function B(e){var s=e.onConfirm,r=e.onDismiss,a=e.canEveryoneModerate,i=e.step;return(0,t.jsxs)(c.ModalFooter,{className:p().footer,children:[(0,t.jsx)(c.Button,{onClick:s,submitting:i===n.SUBMITTING,
children:i===n.DEFAULT?a?A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_CONFIRMATION:A.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_CONFIRMATION:A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_CONFIRMATION_DONE}),i===n.DEFAULT?(0,t.jsx)(c.Button,{look:c.Button.Looks.LINK,onClick:r,color:c.Button.Colors.PRIMARY,children:(0,t.jsx)(c.Text,{variant:"text-sm/semibold",color:"header-primary",children:A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_DISMISS})}):null]})}function F(e){var s=e.guild,r=e.canEveryoneModerate,l=e.isDefaultNotificationsAllMessages,d=e.transitionState,I=e.onClose,N=b(a.useState(n.DEFAULT),2),S=N[0],T=N[1],x=a.useMemo((function(){var e=[],r=[];f.$X.map((function(n){_.ZP.canEveryone(n,s)?e.push(n):r.push(n)}));return{enabledPermissions:e,disabledPermissions:r}}),[s]);if(null==s)return null;var D=r,v=function(){r&&function(){var e=null==s?void 0:s.getRole(s.id);if(null!=e){var r=i.Z.remove(e.permissions,f.mu);(0,E.Gf)(s.id,[h(g({},e),{permissions:r
})])}}();l&&function(){u.Z.updateGuild({defaultMessageNotifications:M.bL.ONLY_MENTIONS});u.Z.saveGuild(s.id,{defaultMessageNotifications:M.bL.ONLY_MENTIONS})}()};return(0,t.jsxs)(c.ModalRoot,{transitionState:d,size:c.ModalSize.SMALL,className:p().modal,children:[(0,t.jsx)(L,{guild:s,headerText:D?A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_HEADER:A.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_HEADER,headerSubtext:D?A.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_SUBHEADER:A.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_SUBHEADER,step:S}),(0,t.jsx)(y,{guild:s,permissions:x,step:S,canEveryoneModerate:r,isDefaultNotificationsAllMessages:l}),(0,t.jsx)(B,{onConfirm:function(){if(!r){v();I();var e;(0,m.Qd)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,null!==(e=null==s?void 0:s.id)&&void 0!==e?e:"",!0,O.L.PRIMARY)}if(S===n.DEFAULT){T(n.SUBMITTING);setTimeout((function(){return T(n.SUBMITTED)}),3e3)}else if(S===n.SUBMITTED){v();I();var t;(0,
m.Qd)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,null!==(t=null==s?void 0:s.id)&&void 0!==t?t:"",!0,O.L.PRIMARY)}},onDismiss:function(){I();(0,m.Qd)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,s.id,!0,O.L.DISMISS)},step:S,canEveryoneModerate:r})]})}}}]);
//# sourceMappingURL=09be4e336f4093befb77.js.map