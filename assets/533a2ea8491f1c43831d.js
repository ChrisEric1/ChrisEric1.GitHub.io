"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[21145],{121145:(e,t,n)=>{n.r(t);n.d(t,{default:()=>de});var r=n(785893),a=n(667294),i=n(294184),l=n.n(i),s=n(999357),c=n(318715),o=n(575945),u=n(945460),d=n(251295),m=n(396043),T=n(674748),f=n(795470),p=n(64234),h=n(83623),_=n(189865),x=n(472034),E=n(652591),I=n(142926),g=n(281110),v=n(744564),O=n(2590);function S(e,t,n,r,a,i,l){try{var s=e[i](l),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function l(e){S(i,r,a,l,s,"next",e)}function s(e){S(i,r,a,l,s,"throw",e)}l(void 0)}))}}var b=function(e,t){var n,r,a,i,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){
if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:l.label++;return{value:i[1],done:!1};case 5:l.label++;r=i[1];i=[0];continue;case 7:i=l.ops.pop();l.trys.pop();continue;default:if(!(a=l.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1];a=i;break}if(a&&l.label<a[2]){l.label=a[2];l.ops.push(i);break}a[2]&&l.ops.pop();l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function y(e){return L.apply(this,arguments)}function L(){return(L=j((function(e){var t,n;return b(this,(function(r){switch(r.label){case 0:return[4,g.Z.get({
url:O.ANM.GUILD_ROLE_SUBSCRIPTION_LISTING_TEMPLATES(e)})];case 1:t=r.sent();null!=(n=t.body).templates&&v.Z.dispatch({type:"GUILD_ROLE_SUBSCRIPTIONS_FETCH_TEMPLATES",templates:n.templates,guildId:e});return[2]}}))}))).apply(this,arguments)}var R=n(106004),N=n(844793),C=n(617225),P=n(547308),A=n(823975),M=n(489752),D=n(544031),U=n(787554),w=n(449970),B=n(249052),k=n(124296),Z=n(473708),G=n(511017),H=n.n(G);function z(e){var t=e.listing,n=t.name,a=t.image,i=t.description,l=(0,B.T4)(t.price_tier,O.pKx.USD);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:H().listingInfoRow,children:[(0,r.jsx)("img",{src:a,alt:"",className:H().avatar}),(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Heading,{variant:"heading-md/medium",className:H().tierName,children:n}),(0,r.jsx)(u.Text,{variant:"text-md/medium",tag:"span",children:l}),(0,r.jsx)(u.Text,{variant:"text-xxs/medium",tag:"span",children:"/mo."})]})]}),(0,r.jsxs)("div",{className:H().listingRoleRow,children:[(0,r.jsx)("div",{style:{
backgroundColor:(0,P.Rf)(t.role_color)},className:H().roleColor}),(0,r.jsx)("img",{src:a,alt:"",className:H().roleIcon}),(0,r.jsx)(u.Text,{variant:"text-xs/medium",children:n})]}),(0,r.jsx)(u.Text,{variant:"text-xs/normal",className:H().tierDescription,children:i})]})}function F(e){var t=e.channel,n=function(e){switch(e){case O.d4z.GUILD_TEXT:return A.Z;case O.d4z.GUILD_VOICE:return U.Z;case O.d4z.GUILD_STAGE_VOICE:return w.Z;case O.d4z.GUILD_FORUM:return M.Z;case O.d4z.GUILD_ANNOUNCEMENT:return D.Z;default:return null}}(t.type);return(0,r.jsxs)("div",{className:H().channelBenefitRow,children:[null!=n&&(0,r.jsx)(n,{className:H().channelBenefitIcon}),(0,r.jsxs)("div",{className:H().channelBenefitText,children:[(0,r.jsx)(u.Text,{variant:"text-sm/normal",children:t.name}),(0,r.jsx)(u.Text,{variant:"text-xs/normal",className:H().channelBenefitTagline,children:t.tagline})]}),(0,r.jsx)(k.Z,{className:H().emojiIcon,useGradient:!0})]})}function K(e){var t=e.benefit;return void 0===t?null:(0,
r.jsxs)("div",{className:H().intangibleBenefitRow,children:[(0,r.jsx)("div",{className:H().intangibleBenefitIcon}),(0,r.jsx)(u.Text,{variant:"text-sm/normal",children:t})]})}function X(e){var t=e.listing;return(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Heading,{variant:"heading-sm/semibold",className:H().perksHeader,children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_PERKS_HEADER}),(0,r.jsx)(u.Text,{variant:"text-xs/semibold",className:H().benefitTypeHeader,children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_EXCLUSIVE_CHANNELS_HEADER}),t.channels.map((function(e){return(0,r.jsx)(F,{channel:e},e.id)})),(0,r.jsx)(u.Text,{variant:"text-xs/semibold",className:H().benefitTypeHeader,children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_EXCLUSIVE_BENEFITS_HEADER}),t.additional_perks.map((function(e,t){return(0,r.jsx)(K,{benefit:e.name},t)}))]})}function Y(e){var t=e.selectedTemplate,n=e.handleSelectTemplate;if(void 0===t)return null;var a=t.listings[0]
;return(0,r.jsxs)("div",{className:H().container,children:[(0,r.jsxs)(u.ScrollerThin,{className:H().content,children:[(0,r.jsx)(z,{listing:a}),(0,r.jsx)("div",{className:H().divider}),(0,r.jsx)(X,{listing:a})]}),(0,r.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,onClick:function(){n(t)},children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_SELECT_TEMPLATE_BUTTON})]})}var q=n(744521),V=n.n(q);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){$(e,t,n[t])}))}return e}function Q(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;a=e}finally{try{l||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e){var t=e.price,n=e.selected,a=e.onClick;return(0,r.jsxs)(u.Clickable,{className:l()(V().priceRow,$({},V().selected,n)),onClick:a,children:[n?(0,r.jsx)(h.Z,{width:20,height:20,backgroundColor:(0,f.Lq)(O.Ilk.WHITE_500),color:(0,f.Lq)(O.Ilk.BRAND_500)}):(0,r.jsx)("svg",{width:"20",height:"20",children:(0,r.jsx)("circle",{cx:10,cy:10,r:10,className:V().circle})}),(0,r.jsxs)("div",{className:V().priceRowText,children:[(0,r.jsx)(u.Text,{variant:"text-sm/normal",tag:"span",children:(0,B.T4)(t,O.pKx.USD)}),(0,r.jsx)(u.Text,{variant:"text-xxs/medium",tag:"span",children:"/mo."})]})]})}function ne(e){
var t=e.selectedTemplate,n=e.handleSelectTemplate,i=e.newPricesToPick,l=ee(a.useState(0),2),s=l[0],c=l[1];return(0,r.jsxs)("div",{className:V().container,children:[(0,r.jsxs)("div",{className:V().content,children:[(0,r.jsx)(u.Heading,{variant:"heading-md/semibold",children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_PRICE_RESELECTION_HEADER.format({tierName:t.listings[0].name})}),(0,r.jsx)(u.Text,{variant:"text-sm/normal",className:V().bodyText,children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_PRICE_RESELECTION_BODY.format({price:(0,B.T4)(t.listings[0].price_tier,O.pKx.USD)})}),i.map((function(e,t){return(0,r.jsx)(te,{price:e,selected:t===s,onClick:function(){return c(t)}},e)}))]}),(0,r.jsx)(u.Button,{size:u.Button.Sizes.MEDIUM,onClick:function(){n(Q(J({},t),{listings:[Q(J({},t.listings[0]),{price_tier:i[s]})]}))},children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_SELECT_TEMPLATE_BUTTON})]})}var re=n(307242),ae=n.n(re);function ie(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){s=!0;a=e}finally{try{l||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e){var t=e.name,n=e.imageUrl,a=e.selected,i=e.onTap;return(0,r.jsxs)(u.Clickable,{onClick:i,className:ae().templateCard,children:[(0,r.jsx)("img",{src:n,alt:"",className:ae().templateCardImage}),(0,r.jsxs)("div",{className:ae().templateNameRow,children:[(0,r.jsx)(u.Heading,{variant:"heading-md/normal",className:l()(le({},ae().unselectedTemplateName,!a)),children:t}),a&&(0,r.jsx)(h.Z,{backgroundColor:(0,f.Lq)(O.Ilk.WHITE_500),color:(0,f.Lq)(O.Ilk.BRAND_500)})]})]})}function oe(e){var t=e.loading,n=e.error,a=e.templates,i=e.selectedTemplateIndex,l=e.handleTapTemplate,s=(0,c.ZP)([p.Z],(function(){return p.Z.theme}));return t?(0,r.jsx)(u.Spinner,{}):null!=n?(0,r.jsx)(C.Z,{children:n.message}):null==a||0===a.length?null:(0,r.jsx)("div",{className:ae().templateCardList,children:a.map((function(e,t){return(0,
r.jsx)(ce,{imageUrl:t===i?e.category_image:(0,o.ap)(s)?e.unselected_light_theme_category_image:e.unselected_dark_theme_category_image,name:e.category,selected:t===i,onTap:function(){return l(t)}},t)}))})}function ue(e){var t,n,i=e.guildId,l=e.templates,s=e.selectedTemplateIndex,c=e.priceTiers,o=e.showPriceReselection,u=e.setShowPriceReselection,d=e.handleCreateTierFromTemplate,m=(0,N.g4)(i,c,null!=l?null===(n=null===(t=l[s])||void 0===t?void 0:t.listings[0])||void 0===n?void 0:n.price_tier:void 0),T=null!=m&&m.length>0,f=a.useCallback((function(e){T?u(!0):d(e)}),[d,T,u]);return null==l||0===l.length?null:o&&T?(0,r.jsx)(ne,{selectedTemplate:l[s],handleSelectTemplate:d,newPricesToPick:m}):(0,r.jsx)(Y,{selectedTemplate:l[s],handleSelectTemplate:f})}function de(e){var t=e.transitionState,n=e.onClose,i=e.guildId,l=e.addNewEditStateFromTemplate,o=e.addNewEditStateFromScratch,f=e.priceTiers,p=(0,c.ZP)([R.Z],(function(){return R.Z.getTemplates(i)})),h=se((0,
d.Z)(y),2),g=h[0],S=h[1],j=S.loading,b=S.error,L=a.useRef("voluntarily_exit");a.useEffect((function(){null!=p&&0!==p.length||g(i)}),[g,i,p]);a.useEffect((function(){t===u.ModalTransitionState.EXITING&&E.default.track(O.rMx.ROLE_SUBSCRIPTION_LISTING_TEMPLATE_SELECTOR_EXITED,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){le(e,t,n[t])}))}return e}({exit_reason:L.current},(0,m.hH)(i)))}),[t,i,L]);var N=se(a.useState(0),2),C=N[0],P=N[1],A=se(a.useState(!1),2),M=A[0],D=A[1],U=a.useCallback((function(e){L.current="template_selected";!function(e,t){v.Z.dispatch({type:"GUILD_ROLE_SUBSCRIPTIONS_STASH_TEMPLATE_CHANNELS",selectedTemplate:e,guildId:t})}(e,i);l(e);n()}),[i,l,n]),w=a.useCallback((function(){M?D(!1):n()}),[M,n]),B=(0,I.yi)(i);(0,
T.Z)({type:s.nv.MODAL,name:s.zs.ROLE_SUBSCRIPTION_LISTING_TEMPLATE_SELECTOR,properties:{guild_id:i}});return(0,r.jsxs)(u.ModalRoot,{transitionState:t,size:u.ModalSize.DYNAMIC,className:ae().modalRoot,children:[(0,r.jsx)(u.Clickable,{onClick:w,className:ae().closeButton,children:(0,r.jsx)(_.Z,{width:12,height:12})}),(0,r.jsxs)(u.ModalContent,{className:ae().modalContent,children:[(0,r.jsxs)("div",{className:ae().templatesContainer,children:[M&&(0,r.jsx)(u.Clickable,{className:ae().blackoutOverlay,onClick:function(){M&&D(!1)},"aria-label":"overlay"}),(0,r.jsxs)(u.ScrollerThin,{className:ae().templatesContainerBody,children:[(0,r.jsx)(u.Heading,{variant:"heading-xl/semibold",children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_HEADER}),(0,r.jsx)(u.Text,{variant:"text-sm/normal",className:ae().modalBodyText,children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_BODY}),B&&(0,r.jsx)(u.Text,{variant:"text-sm/normal",className:ae().creatorPortalText,
children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_CREATOR_PORTAL_LINK.format({creatorPortalUrl:"https://discord.com/creator-portal/learn-from-creators?tab=lightning-lessons"})}),(0,r.jsx)("div",{className:ae().templatesContentContainer,children:(0,r.jsx)(oe,{loading:j,error:b,templates:p,selectedTemplateIndex:C,handleTapTemplate:function(e){P(e)}})})]}),(0,r.jsx)(u.Text,{variant:"text-sm/normal",children:Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_CREATE_FROM_SCRATCH_PROMPT}),(0,r.jsxs)(u.Button,{size:u.Button.Sizes.MEDIUM,onClick:function(){L.current="create_from_scratch";o();n()},look:u.Button.Looks.OUTLINED,color:u.Button.Colors.PRIMARY,borderColor:u.Button.BorderColors.PRIMARY,className:ae().createFromStratchButton,innerClassName:ae().createFromStratchButtonInner,children:[(0,r.jsx)(x.Z,{width:14,height:14,className:ae().editIcon}),Z.Z.Messages.GUILD_ROLE_SUBSCRIPTION_TIER_TEMPLATE_MODAL_CREATE_FROM_SCRATCH_BUTTON]})]}),(0,r.jsx)(ue,{guildId:i,
templates:p,selectedTemplateIndex:C,priceTiers:f,showPriceReselection:M,setShowPriceReselection:D,handleCreateTierFromTemplate:U})]})]})}}}]);
//# sourceMappingURL=533a2ea8491f1c43831d.js.map