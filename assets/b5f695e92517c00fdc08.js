"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[83409],{383409:(t,e,n)=>{n.r(e);n.d(e,{default:()=>v});var r=n(785893),o=n(667294),a=n(945460),i=n(579194),s=n(153686),l=n(19585),c=n(455706),u=n(973646),d=n(652591),A=n(2590),f=n(203600),h=n(473708),M=n(34375),m=n.n(M);function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r,o,a,i){try{var s=t[a](i),l=s.value}catch(t){n(t);return}s.done?e(l):Promise.resolve(l).then(r,o)}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(t);!(i=(r=n.next()).done);i=!0){a.push(r.value);if(e&&a.length===e)break}}catch(t){s=!0;o=t}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e)
;var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1}
;case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t];r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};const v=function(t){var e,n,M=t.imgURI,p=t.transitionState,v=t.onClose,L=t.onChangeAvatar,S=E(o.useState(!1),2),_=S[0],x=S[1],T=E(o.useState(!1),2),I=T[0],g=T[1],R=(0,l.Z)(s.Z.PREMIUM_UPSELL),j=R.AnalyticsLocationProvider,k=R.sourceAnalyticsLocations,C=(n=(e=function(){var t,e;return b(this,(function(n){switch(n.label){case 0:x(!0);return[4,(0,i.Mn)({avatar:M})];case 1:(null==(t=n.sent())?void 0:t.ok)?(0,i.I5)(void 0):null!=(null==t||null===(e=t.body)||void 0===e?void 0:e.username)&&(0,u.P)();x(!1);v()
;return[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(t){y(a,r,o,i,s,"next",t)}function s(t){y(a,r,o,i,s,"throw",t)}i(void 0)}))}),function(){return n.apply(this,arguments)});o.useEffect((function(){d.default.track(A.rMx.PREMIUM_UPSELL_VIEWED,{type:f.cd.ANIMATED_USER_AVATAR_MODAL,location_stack:k})}),[k]);return(0,r.jsx)(j,{children:(0,r.jsxs)(a.ModalRoot,{transitionState:p,size:a.ModalSize.SMALL,"aria-label":h.Z.Messages.IMAGE,children:[(0,r.jsxs)(a.ModalContent,{className:m().modalContent,paddingFix:!1,orientation:"horizontal",children:[(0,r.jsx)(a.ModalHeader,{separator:!1,className:m().header,children:(0,r.jsx)(a.FormTitle,{tag:a.FormTitleTags.H1,children:h.Z.Messages.PREMIUM_UPSELL_ANIMATED_AVATAR})}),(0,r.jsx)(a.Text,{color:"text-normal",variant:"text-md/normal",children:h.Z.Messages.PREMIUM_UPSELL_ANIMATED_AVATAR_SUBTITLE}),(0,r.jsxs)("div",{className:m().promo,children:[(0,r.jsx)(a.Text,{color:"text-normal",
variant:"text-sm/semibold",className:m().promoText,children:h.Z.Messages.PREMIUM_UPSELL_ANIMATED_AVATAR_TEXT}),(0,r.jsx)(c.Z,{submitting:I,premiumModalAnalyticsLocation:{section:A.jXE.AVATAR_UPSELL_MODAL,object:A.qAy.BUTTON_CTA},size:a.Button.Sizes.SMALL,color:a.Button.Colors.GREEN,onClick:function(){g(!0)},onSubscribeModalClose:function(t){g(!1);if(t){C();v()}},buttonText:h.Z.Messages.PREMIUM_REQUIRED_GET_NITRO})]})]}),(0,r.jsxs)(a.ModalFooter,{className:m().modalFooter,children:[(0,r.jsx)(a.Button,{look:a.Button.Looks.LINK,color:a.Button.Colors.PRIMARY,size:a.ButtonSizes.SMALL,onClick:L,children:h.Z.Messages.CHANGE_AVATAR_A11Y_LABEL}),(0,r.jsxs)("div",{className:m().modalFooterActions,children:[(0,r.jsx)(a.Button,{className:m().cancelButton,look:a.Button.Looks.LINK,color:a.Button.Colors.PRIMARY,size:a.ButtonSizes.SMALL,onClick:v,children:h.Z.Messages.AVATAR_UPLOAD_CANCEL}),(0,r.jsx)(a.Button,{size:a.ButtonSizes.SMALL,onClick:C,submitting:_,children:h.Z.Messages.SAVE_CHANGES})]})]
}),(0,r.jsx)(a.Avatar,{src:M,"aria-hidden":!0,className:m().avatar,size:a.AvatarSizes.SIZE_120})]})})}}}]);
//# sourceMappingURL=b5f695e92517c00fdc08.js.map