"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[23783],{723783:(e,n,t)=>{t.r(n);t.d(n,{default:()=>g});var a,r=t(785893),o=(t(667294),t(945460)),l=t(20978),i=t.n(l),s=t(517454),u=t(115617),c=t(473708);!function(e){e.COULD_NOT_HEAR_AUDIO="I couldn't hear audio at all";e.NOBODY_COULD_HEAR_ME="Nobody could hear me";e.AUDIO_ECHOS="Audio had echos or feedback";e.AUDIO_ROBOTIC="Audio was robotic or distorted";e.AUDIO_CUT="Audio cut in and out";e.BAD_VOLUME="Volume was too low or high";e.BACKGROUND_NOISE="Background noise was too loud";e.SPEAKERPHONE="Issues with speakerphone";e.HEADSET="Issues with headset/bluetooth";e.OTHER="Other"}(a||(a={}));function d(e){var n=[{label:c.Z.Messages.CALL_FEEDBACK_OPTION_COULD_NOT_HEAR_AUDIO,code:2,value:a.COULD_NOT_HEAR_AUDIO},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_NOBODY_COULD_HEAR_ME,code:3,value:a.NOBODY_COULD_HEAR_ME},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_AUDIO_ECHOS,code:4,value:a.AUDIO_ECHOS},{
label:c.Z.Messages.CALL_FEEDBACK_OPTION_AUDIO_ROBOTIC,code:5,value:a.AUDIO_ROBOTIC},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_AUDIO_CUT,code:6,value:a.AUDIO_CUT},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_BAD_VOLUME,code:7,value:a.BAD_VOLUME},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_BACKGROUND_NOISE,code:8,value:a.BACKGROUND_NOISE}];e&&n.push({label:c.Z.Messages.CALL_FEEDBACK_OPTION_SPEAKERPHONE,code:9,value:a.SPEAKERPHONE});n.push({label:c.Z.Messages.CALL_FEEDBACK_OPTION_HEADSET,code:10,value:a.HEADSET},{label:c.Z.Messages.CALL_FEEDBACK_OPTION_OTHER,code:1,value:a.OTHER});return n}var f=t(604945),_=t(652591),O=t(2590);function E(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function m(e,n,t,a,r){var o=f.Z.getSettings(),l=f.Z.getInputDeviceId(),i=f.Z.getInputDevices()[l],s=f.Z.getOutputDeviceId(),u=f.Z.getOutputDevices()[s],c=f.Z.getVideoDeviceId(),d=f.Z.getVideoDevices()[c],m=f.Z.getNoiseCancellation()
;_.default.track(O.rMx.CALL_REPORT_PROBLEM,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));a.forEach((function(n){E(e,n,t[n])}))}return e}({rating:null!=e?e:"no response",reason_code:n,reason_description:t,feedback:a,audio_input_mode:o.mode,automatic_audio_input_sensitivity_enabled:o.modeOptions.autoThreshold,audio_input_sensitivity:o.modeOptions.threshold,echo_cancellation_enabled:o.echoCancellation,noise_suppression_enabled:o.noiseSuppression,automatic_gain_control_enabled:o.automaticGainControl,voice_output_volume:o.outputVolume,noise_cancellation_enabled:m,input_device_name:null==i?void 0:i.name,output_device_name:null==u?void 0:u.name,video_device_name:null==d?void 0:d.name},r))}var b=t(630670);function h(e,n,t,a,r,o,l){try{var i=e[o](l),s=i.value
}catch(e){t(e);return}i.done?n(s):Promise.resolve(s).then(a,r)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var o=e.apply(n,t);function l(e){h(o,a,r,l,i,"next",e)}function i(e){h(o,a,r,l,i,"throw",e)}l(void 0)}))}}function v(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}var p=function(e,n){var t,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;(a=0,r)&&(o=[2&o[0],r.value]);switch(o[0]){case 0:case 1:r=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;a=o[1];o=[0];continue;case 7:
o=l.ops.pop();l.trys.pop();continue;default:if(!(r=l.trys,r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1];r=o;break}if(r&&l.label<r[2]){l.label=r[2];l.ops.push(o);break}r[2]&&l.ops.pop();l.trys.pop();continue}o=n.call(e,l)}catch(e){o=[6,e];a=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};var A=[i().CALL_FEEDBACK_OPTION_OTHER];function g(e){var n=e.onClose,a=e.transitionState,l=e.analyticsData;return(0,r.jsx)(s.Z,{header:c.Z.Messages.CALL_FEEDBACK_SHEET_TITLE,body:c.Z.Messages.CALL_FEEDBACK_PROMPT,problemTitle:c.Z.Messages.CALL_FEEDBACK_ISSUE_SECTION_HEADER,problems:d(!1),feedbackProblems:A,onSubmit:function(e){var n=e.rating,a=e.problem,i=e.dontShowAgain,s=e.feedback;i&&(0,u.Kw)(b.v.VOICE_CALL_FEEDBACK);if(null!=n){m(n,(f=a,null!==(O=null===(_=d(!1).find((function(e){return e.label===f
})))||void 0===_?void 0:_.code)&&void 0!==O?O:null),a,s,l);var f,_,O;null!=a&&(0,o.openModalLazy)(C((function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e(40532),t.e(21786)]).then(t.bind(t,521786))];case 1:e=a.sent(),n=e.default;return[2,function(e){return(0,r.jsx)(n,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));a.forEach((function(n){v(e,n,t[n])}))}return e}({body:c.Z.Messages.CALL_FEEDBACK_CONFIRMATION},e))}]}}))})))}},onClose:n,transitionState:a,otherKey:i().CALL_FEEDBACK_OPTION_OTHER})}},629438:(e,n,t)=>{t.d(n,{B:()=>o});var a=t(496486),r=t.n(a),o=function(e,n){var t=r().shuffle(e),a=t.findIndex((function(e){return e.value===n}));if(a>-1){var o=t[a];t.splice(a,1);t.push(o)}return t}},517454:(e,n,t)=>{t.d(n,{
L:()=>D,Z:()=>y});var a=t(785893),r=t(667294),o=t(294184),l=t.n(o),i=t(496486),s=t.n(i),u=t(945460),c=t(634698),d=t(441093),f=t(107364),_=t(443812),O=t(843133),E=t(348592),m=t(629438),b=t(494579),h=t(473708),C=t(424529),v=t.n(C);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,o=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(a=t.next()).done);l=!0){o.push(a.value);if(n&&o.length===n)break}}catch(e){i=!0;r=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw r}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t)
;if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=[{className:v().emojiSad,rating:b.aZ.BAD,classNameSelected:v().selected},{className:v().emojiNeutral,rating:b.aZ.NEUTRAL,classNameSelected:v().selected},{className:v().emojiHappy,rating:b.aZ.GOOD,classNameSelected:v().selected}];function D(e){var n=e.className,t=e.selectedRating,r=e.ratingConfigs,o=e.onChangeRating;return(0,a.jsx)(f.Z,{justify:f.Z.Justify.BETWEEN,align:f.Z.Align.CENTER,className:l()(v().ratingsSelector,n),children:(null!=r?r:g).map((function(e){var n=e.rating,r=e.className,i=e.classNameSelected;return(0,a.jsx)(u.Clickable,{onClick:function(){return o(n)},"aria-label":n,children:(0,a.jsx)("div",{className:l()(r,t===n?i:null)})},n)}))})}function N(){return(0,a.jsx)(u.Text,{className:v().helpdeskLink,
variant:"text-xs/normal",color:"text-muted",children:h.Z.Messages.FEEDBACK_NEED_MORE_HELP.format({helpdeskURL:E.Z.getSubmitRequestURL()})})}function y(e){var n=e.header,t=e.body,o=e.problemTitle,i=e.problems,E=e.transitionState,C=e.ratingConfigs,p=e.feedbackProblems,g=void 0===p?[]:p,y=e.otherKey,L=e.ratingsSelectorClassName,I=e.hideDontShowCheckbox,S=e.startRating,T=void 0===S?null:S,x=e.onSubmit,Z=e.onClose,B=(0,c.Z)(i),j=A(r.useState(!1),2),R=j[0],M=j[1],P=A(r.useState(T),2),k=P[0],w=P[1],U=A(r.useState(null),2),K=U[0],H=U[1],F=A(r.useState(s().shuffle(i)),2),G=F[0],V=F[1],z=A(r.useState(""),2),Y=z[0],q=z[1],W=(0,_.Dt)(),J=(0,O.Z)(k),$=(0,O.Z)(R),Q=(0,O.Z)(K),X=(0,O.Z)(x),ee=(0,O.Z)(Y),ne=null!=K&&g.includes(K),te=ne||!I;r.useEffect((function(){s().isEqual(B,i)||V((0,m.B)(i,y))}),[i,B,y]);r.useEffect((function(){return function(){X.current({rating:J.current,problem:Q.current,dontShowAgain:$.current,feedback:ee.current})}}),[]);return(0,a.jsxs)(u.ModalRoot,{transitionState:E,
className:v().modalRoot,"aria-labelledby":W,children:[(0,a.jsxs)(u.ModalHeader,{separator:!1,className:v().headerContainer,children:[(0,a.jsx)(u.Heading,{id:W,variant:"heading-xl/extrabold",color:"none",children:n}),(0,a.jsx)(u.Text,{variant:"text-md/normal",color:"none",className:v().ratingBody,children:t}),ne?null:(0,a.jsx)(D,{className:l()(v().emojis,L),selectedRating:k,onChangeRating:function(e){w(e);e===b.aZ.GOOD&&Z()},ratingConfigs:C})]}),(0,a.jsxs)(u.ModalContent,{className:v().content,children:[null==k||k===b.aZ.GOOD||ne?null:(0,a.jsx)(u.FormItem,{title:o,className:v().problemInfo,children:(0,a.jsx)(d.Z,{options:G,onClick:function(e){var n=e.value;H(n);g.includes(n)||Z()},hideCaret:function(e){var n=e.value;return!g.includes(n)}})}),ne?(0,a.jsxs)(u.FormItem,{title:h.Z.Messages.FEEDBACK_DESCRIBE_ISSUE,className:v().problemInfo,children:[(0,a.jsx)(u.TextArea,{value:Y,maxLength:b.iF,onChange:q}),(0,a.jsx)(N,{})]}):null]}),te&&(0,a.jsx)(u.ModalFooter,{className:v().footer,
direction:f.Z.Direction.HORIZONTAL,children:ne?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Button,{size:u.Button.Sizes.SMALL,look:u.Button.Looks.LINK,color:u.Button.Colors.PRIMARY,onClick:function(){H(null);q("")},children:h.Z.Messages.BACK}),(0,a.jsx)(u.Button,{size:u.Button.Sizes.SMALL,onClick:Z,children:h.Z.Messages.SUBMIT})]}):(0,a.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,size:18,value:R,onChange:function(){return M(!R)},children:(0,a.jsx)(u.Text,{variant:"text-sm/normal",children:h.Z.Messages.DONT_SHOW_AGAIN})})})]})}},441093:(e,n,t)=>{t.d(n,{Z:()=>c});var a=t(785893),r=(t(667294),t(294184)),o=t.n(r),l=t(945460),i=t(718831),s=t(613067),u=t.n(s);function c(e){var n=e.options,t=e.onClick,r=e.className,s=e.optionClassName,c=e.hideCaret;return(0,a.jsx)("div",{className:o()(u().root,r),children:n.map((function(e,n){return(0,a.jsxs)(l.Clickable,{onClick:function(){return t(e)},className:o()(u().option,s),children:[(0,a.jsx)(l.Text,{className:u().text,color:"none",
variant:"text-md/normal",children:e.label}),!(null==c?void 0:c(e))&&(0,a.jsx)(i.Z,{className:u().caret,direction:i.Z.Directions.RIGHT})]},n)}))})}}}]);
//# sourceMappingURL=38acfb2962e253fe44c2.js.map