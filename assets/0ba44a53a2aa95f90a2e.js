"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[88533],{496916:(n,e,t)=>{t.d(e,{In:()=>p,U6:()=>v,y5:()=>_,iV:()=>g,CZ:()=>h,jT:()=>O,Ju:()=>b,FT:()=>y});var r=t(842227),i=t(744564),o=t(18882),u=t(382060),l=t(61209),a=t(877475),c=t(473903),d=t(2590);function s(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function f(n){return function(n){if(Array.isArray(n))return s(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return s(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(n,e)}(n)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;i.Z.dispatch({type:"CHANNEL_ACK",channelId:n,messageId:r,immediate:e,force:t,context:d.e3s,location:o})}function v(n){n.isCategory()?function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=l.Z.getChannel(n);if(null!=r&&null!=r.guild_id){var i=a.Z.getCategories(r.guild_id);if(null!=i[n]){var c=i[n].filter((function(n){var e=n.channel;return(0,u.vc)(e.type)})).map((function(n){return n.channel.id})),d=f(c);c.forEach((function(n){var e=o.Z.getActiveJoinedThreadsForParent(r.guild_id,n);for(var t in e)d.push(t)}));var s=!0,v=!1,_=void 0;try{
for(var g,h=d[Symbol.iterator]();!(s=(g=h.next()).done);s=!0){p(g.value,e,t)}}catch(n){v=!0;_=n}finally{try{s||null==h.return||h.return()}finally{if(v)throw _}}}}}(n.id,!0,!0):n.isForumLikeChannel()?p(n.id,!0,!0,r.default.fromTimestamp(Date.now())):p(n.id,!0,!0)}function _(n){i.Z.dispatch({type:"BULK_ACK",channels:n,context:d.e3s})}function g(n){i.Z.dispatch({type:"CHANNEL_LOCAL_ACK",channelId:n})}function h(n,e){i.Z.dispatch({type:"ENABLE_AUTOMATIC_ACK",channelId:n,windowId:e})}function O(n,e){i.Z.dispatch({type:"DISABLE_AUTOMATIC_ACK",channelId:n,windowId:e})}function b(n,e,t){i.Z.dispatch({type:"GUILD_FEATURE_ACK",id:n,ackType:e,ackedId:t,local:!1})}function y(n,e){var t;null!=(null===(t=c.default.getCurrentUser())||void 0===t?void 0:t.id)&&i.Z.dispatch({type:"USER_NON_CHANNEL_ACK",ackType:n,ackedId:e,local:!1})}},777158:(n,e,t)=>{t.d(e,{Z:()=>o});var r=t(496486),i=t.n(r);function o(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}
;return i()(n).map((function(n){return"null"===n.channel.id?e[n.channel.id]:[n,e[n.channel.id]]})).flattenDeep().filter(t).value()}},648195:(n,e,t)=>{t.d(e,{e:()=>a});var r=t(281110),i=t(744564),o=t(189651),u=t(861426),l=t(2590);function a(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!u.Z.isFullServerPreview(n)){i.Z.dispatch({type:"GUILD_MEMBER_UPDATE_LOCAL",guildId:n,roles:e.roles,flags:e.flags});return r.Z.patch({url:l.ANM.SET_GUILD_MEMBER(n),body:e,oldFormErrors:!!t||void 0})}(0,o.aq)(n,{memberOptions:e})}},47635:(n,e,t)=>{t.d(e,{Z:()=>G});var r=t(496486),i=t.n(r),o=t(842227),u=t(281110),l=t(744564),a=t(496916),c=t(396043),d=t(648195),s=t(189651),f=t(861426),p=t(347834),v=t(61209),_=t(21372),g=t(473903),h=t(652591),O=t(661123),b=t(72580),y=t(22176),E=t(404741),m=t(185219),I=t(457586),S=t(2590),P=t(589677),A=t(290679);function N(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function T(n,e,t,r,i,o,u){try{
var l=n[o](u),a=l.value}catch(n){t(n);return}l.done?e(a):Promise.resolve(a).then(r,i)}function D(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function C(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function w(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],u=!0,l=!1;try{for(t=t.call(n);!(u=(r=t.next()).done);u=!0){o.push(r.value);if(e&&o.length===e)break}}catch(n){l=!0;i=n}finally{try{
u||null==t.return||t.return()}finally{if(l)throw i}}return o}}(n,e)||L(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(n){return function(n){if(Array.isArray(n))return N(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||L(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(n,e){if(n){if("string"==typeof n)return N(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(n,e):void 0}}var U=function(n,e){var t,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},
trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(n,u)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function Z(n){
var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!f.Z.isFullServerPreview(n)){var t=e?E.Z.getOnboardingPromptsForOnboarding(n):E.Z.getOnboardingPrompts(n),r=E.Z.getOnboardingResponses(n),i=t.map((function(n){return n.options.filter((function(n){return r.includes(n.id)}))})).flat(),o={},a={};t.forEach((function(n){o[n.id]=Date.now();n.options.forEach((function(n){return a[n.id]=Date.now()}))}));return e?u.Z.post({url:S.ANM.GUILD_ONBOARDING_RESPONSES(n),body:{onboarding_responses:i.map((function(n){return n.id})),onboarding_prompts_seen:o,onboarding_responses_seen:a}}).then((function(e){null!=e.body&&l.Z.dispatch({type:"GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS",guildId:n,options:e.body.onboarding_responses,prompts_seen:e.body.onboarding_prompts_seen,options_seen:e.body.onboarding_responses_seen})})).catch((function(n){return y.Z.captureException(n)})):u.Z.put({url:S.ANM.GUILD_ONBOARDING_RESPONSES(n),body:{onboarding_responses:i.map((function(n){return n.id})),
onboarding_prompts_seen:o,onboarding_responses_seen:a}}).then((function(e){null!=e.body&&l.Z.dispatch({type:"GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS",guildId:n,options:e.body.onboarding_responses,prompts_seen:e.body.onboarding_prompts_seen,options_seen:e.body.onboarding_responses_seen})})).catch((function(n){return y.Z.captureException(n)}))}}const G={selectOption:function(n,e,t,r){var o=E.Z.getOnboardingPrompt(e);if(null!=o){var u=o.singleSelect?i().without(i().map(o.options,"id"),t):[];l.Z.dispatch({type:"GUILD_ONBOARDING_SELECT_OPTION",guildId:n,promptId:e,optionId:t,selected:r,removedOptionIds:u})}},updateOnboardingResponses:i().debounce(Z,1e3),updateRolesLocal:function(n,e,t){var r,o,u=null!==(o=null===(r=_.ZP.getSelfMember(n))||void 0===r?void 0:r.roles)&&void 0!==o?o:[];(e.length>0||t.length>0)&&l.Z.dispatch({type:"GUILD_MEMBER_UPDATE_LOCAL",guildId:n,roles:i().difference(i().union(u,e),t),addedRoleIds:e,removedRoleIds:t})},completeOnboarding:function(n,e){
var t=e.length>0?e[e.length-1]:null,r=E.Z.getSelectedOptions(n),i=(0,m.L6)(r),u=(0,m.dX)(r),l=E.Z.getEnabled(n)?E.Z.getDefaultChannelIds(n):[],d=w((0,m.Ee)(n,e,l),2),p=d[0],y=d[1],N=R(u).concat(R(l)),T=N.map((function(n){return v.Z.getChannel(n)})).filter(b.lm),L=(0,I.v)(n,new Set(N),T,!0).length,U=null==t?[]:t.options.map((function(n){return n.id}));h.default.track(S.rMx.GUILD_ONBOARDING_STEP_COMPLETED,C(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){D(n,e,t[e])}))}return n}({},(0,c.hH)(n)),{step:e.length-1,options_selected:null==t?0:r.filter((function(n){return U.includes(n.id)})).length,skipped:U.length>0,back:!1,in_onboarding:!0,is_final_step:!0,roles_granted:i.size,channels_granted:L,
guild_onboarding_covered_channel_ids:p.map((function(n){return n.id})),guild_onboarding_uncovered_channel_ids:y.map((function(n){return n.id}))}));(0,a.Ju)(n,A.W.GUILD_ONBOARDING_QUESTION,o.default.fromTimestamp(Date.now()));Z(n,!0);if(f.Z.isFullServerPreview(n)){(0,s.zS)(n,N,[]);(0,s.aq)(n,{optInEnabled:!0});(0,s.og)(n,Array.from(i));var G=g.default.getCurrentUser();if(null!=G){var j,M,F=null!==(M=null===(j=_.ZP.getMember(n,G.id))||void 0===j?void 0:j.flags)&&void 0!==M?M:0;(0,s.aq)(n,{memberOptions:{flags:(0,O.mB)(F,P.q.COMPLETED_ONBOARDING,!0)}})}}},onboardExistingMember:function(n,e){var t=new Set(e);(E.Z.getEnabled(n)?E.Z.getDefaultChannelIds(n):[]).forEach((function(n){return t.add(n)}));t.size>0&&(0,p.Mo)(n,Array.from(t),!0,{page:S.ZY5.GUILD_ONBOARDING})},finishOnboarding:function(n){l.Z.dispatch({type:"GUILD_ONBOARDING_COMPLETE",guildId:n})},setUserOnboardingStep:function(n,e){l.Z.dispatch({type:"GUILD_ONBOARDING_SET_STEP",guildId:n,step:e})},resetOnboarding:function(n){
return(e=function(){var e,t,r,i;return U(this,(function(o){switch(o.label){case 0:if(null==(e=g.default.getCurrentUser()))return[3,2];i=null!==(r=null===(t=_.ZP.getMember(n,e.id))||void 0===t?void 0:t.flags)&&void 0!==r?r:0;return[4,(0,d.e)(n,{flags:(0,O.mB)(i,P.q.COMPLETED_ONBOARDING,!1)})];case 1:o.sent();o.label=2;case 2:return[2]}}))},function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function u(n){T(o,r,i,u,l,"next",n)}function l(n){T(o,r,i,u,l,"throw",n)}u(void 0)}))})();var e}}},888236:(n,e,t)=>{t.d(e,{rj:()=>E,eM:()=>m,rK:()=>I,I1:()=>P});var r=t(281110),i=t(744564),o=t(396043),u=t(736818),l=t(21372),a=t(567403),c=t(652591),d=t(661123),s=t(404741),f=t(322008),p=t(2590),v=t(589677);function _(n,e,t,r,i,o,u){try{var l=n[o](u),a=l.value}catch(n){t(n);return}l.done?e(a):Promise.resolve(a).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function u(n){_(o,r,i,u,l,"next",n)}
function l(n){_(o,r,i,u,l,"throw",n)}u(void 0)}))}}function h(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function O(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){h(n,e,t[e])}))}return n}function b(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}var y=function(n,e){var t,r,i,o,u={label:0,
sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(n,u)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{
value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function E(n){c.default.track(p.rMx.GUILD_ONBOARDING_LOADED,b(O({},(0,o.hH)(n)),{has_new_prompts:!1,number_of_prompts:0}))}function m(n){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_START",guildId:n});return r.Z.get({url:p.ANM.GUILD_ONBOARDING(n)}).then((function(e){var t=e.body,r=(0,f.cf)(t);return i.Z.dispatch(O({type:"GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS",guildId:n},r)).then((function(){return r.prompts}))}),(function(e){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE",guildId:n});return e}))}function I(n){return S.apply(this,arguments)}function S(){return(S=g((function(n){var e,t,r,i,o,c,f;return y(this,(function(_){switch(_.label){case 0:t=u.default.getId();if((0,d.yE)(null!==(r=null===(e=l.ZP.getMember(n,t))||void 0===e?void 0:e.flags)&&void 0!==r?r:0,v.q.COMPLETED_ONBOARDING))return[2,Promise.resolve()];if(null==(i=a.Z.getGuild(n))||!i.hasFeature(p.oNc.GUILD_ONBOARDING))return[2,Promise.resolve()]
;o=s.Z.shouldFetchPrompts(n);c=s.Z.getOnboardingPrompts(n);if(!o&&c.length>0){if(c.every((function(n){return!n.inOnboarding}))){A(n);return[2,Promise.resolve()]}P(n);return[2,Promise.resolve()]}return[4,m(n)];case 1:f=_.sent();if(Array.isArray(f)&&f.every((function(n){return!n.inOnboarding}))){A(n);return[2,Promise.resolve()]}P(n);return[2,f]}}))}))).apply(this,arguments)}function P(n){i.Z.dispatch({type:"GUILD_ONBOARDING_START",guildId:n})}function A(n){c.default.track(p.rMx.GUILD_ONBOARDING_STEP_VIEWED,b(O({},(0,o.hH)(n)),{step:-2,required:!0}));c.default.track(p.rMx.GUILD_ONBOARDING_STEP_COMPLETED,b(O({},(0,o.hH)(n)),{step:-2,skipped:!1,is_final_step:!0,in_onboarding:!0}))}},322008:(n,e,t)=>{t.d(e,{iU:()=>d,NE:()=>s,NO:()=>f,YW:()=>p,M$:()=>v,qm:()=>_,b3:()=>g,md:()=>h,X:()=>O,fY:()=>b,l7:()=>l,FN:()=>a,Un:()=>c,RF:()=>y,ae:()=>E,yZ:()=>m,dr:()=>I,cf:()=>P});var r=t(110251),i=t.n(r),o=t(473708);function u(n,e){if(null==n)return{};var t,r,i=function(n,e){if(null==n)return{}
;var t,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++){t=o[r];e.indexOf(t)>=0||(i[t]=n[t])}return i}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++){t=o[r];e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}}return i}var l,a,c,d=100,s=50,f=100,p=15,v=12,_=50,g=4,h=7,O=5,b=13;!function(n){n[n.CUSTOMIZE=0]="CUSTOMIZE";n[n.BROWSE=1]="BROWSE"}(l||(l={}));!function(n){n[n.MULTIPLE_CHOICE=0]="MULTIPLE_CHOICE";n[n.DROPDOWN=1]="DROPDOWN"}(a||(a={}));!function(n){n[n.ONBOARDING_DEFAULT=0]="ONBOARDING_DEFAULT";n[n.ONBOARDING_ADVANCED=1]="ONBOARDING_ADVANCED"}(c||(c={}));function y(n){if(n.options.length>0)return!1;var e=E(),t=(e.id,u(e,["id"])),r=(n.id,u(n,["id"]));return i()(t,r)}function E(){return{id:String(Date.now()),title:o.Z.Messages.ONBOARDING_PROMPT_DEFAULT_TITLE,options:[],singleSelect:!1,required:!1,inOnboarding:!0,type:a.MULTIPLE_CHOICE}}function m(n){return{id:String(Date.now()),title:"",options:[],
singleSelect:!1,required:!1,inOnboarding:n,type:a.MULTIPLE_CHOICE}}function I(n){return{id:n.id,options:n.options.map((function(n){var e,t,r;return{id:n.id,channel_ids:n.channelIds,role_ids:n.roleIds,emoji:n.emoji,emoji_id:null===(e=n.emoji)||void 0===e?void 0:e.id,emoji_name:null===(t=n.emoji)||void 0===t?void 0:t.name,emoji_animated:null===(r=n.emoji)||void 0===r?void 0:r.animated,title:n.title,description:n.description}})),title:n.title,single_select:n.singleSelect,disabled:n.disabled,required:n.required,in_onboarding:n.inOnboarding,type:n.type}}function S(n){var e;return{id:n.id,options:n.options.map((function(n){return{id:n.id,channelIds:n.channel_ids,roleIds:n.role_ids,emoji:n.emoji,title:n.title,description:null!==(e=n.description)&&void 0!==e?e:""}})),title:n.title,singleSelect:n.single_select,disabled:n.disabled,required:n.required,inOnboarding:n.in_onboarding,type:n.type}}function P(n){var e,t,r;return{prompts:n.prompts.map(S),defaultChannelIds:n.default_channel_ids,
responses:null!==(e=n.responses)&&void 0!==e?e:[],mode:n.mode,enabled:n.enabled,onboardingPromptsSeen:null!==(t=n.onboarding_prompts_seen)&&void 0!==t?t:{},onboardingResponsesSeen:null!==(r=n.onboarding_responses_seen)&&void 0!==r?r:{},belowRequirements:n.below_requirements}}},404741:(n,e,t)=>{t.d(e,{Z:()=>U});var r=t(496486),i=t.n(r),o=t(202351),u=t(744564),l=t(861426),a=t(61209),c=t(53452),d=t(102921),s=t(734260),f=t(189827),p=t(322008);function v(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function g(n){g=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return g(n)}function h(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){_(n,e,t[e])}))}return n}function O(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function b(n,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function y(n,e){y=Object.setPrototypeOf||function(n,e){n.__proto__=e;return n};return y(n,e)}var E=function(n){
return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function m(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=g(n);if(e){var i=g(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return b(this,t)}}var I={},S={},P={},A=!1;function N(n,e,t){return n.map((function(n){return function(n,e,t){for(var r=!1,i=[],o=0;o<n.options.length;o++){var u=n.options[o],l=null==t[u.id];l&&(r=!0);i.push(O(h({},u),{isUnseen:l}))}return O(h({},n),{options:i,hasNewAnswers:r,isNew:null==e[n.id]})}(n,e,t)}))}function T(n){
var e,t,r,i,o,u,l,a,c,d=n.guildId,s=n.updates,f=null!==(o=null!==(i=s.onboardingPromptsSeen)&&void 0!==i?i:null===(e=I[d])||void 0===e?void 0:e.onboardingPromptsSeen)&&void 0!==o?o:{},p=null!==(l=null!==(u=s.onboardingResponsesSeen)&&void 0!==u?u:null===(t=I[d])||void 0===t?void 0:t.onboardingResponsesSeen)&&void 0!==l?l:{},v=N(null!==(c=null!==(a=s.prompts)&&void 0!==a?a:null===(r=I[d])||void 0===r?void 0:r.prompts)&&void 0!==c?c:[],f,p);I[d]=O(h({},I[d],s),{prompts:v})}function D(n,e){if(null!=S[n]){var t={};Object.keys(S[n]).forEach((function(r){!e.includes(r)&&S[n][r]?t[r]=!0:e.includes(r)&&!1===S[n][r]&&(t[r]=!1)}));S[n]=t;var r=e.filter((function(n){return null==t[n]||!0===t[n]}));Object.keys(t).forEach((function(n){!0!==t[n]||e.includes(n)||r.push(n)}));I[n]=O(h({},I[n]),{responses:r})}}var C=[],w=[],R=[],L=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&y(n,e)}(t,n);var e=m(t);function t(){v(this,t);return e.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(a.Z,f.ZP,l.Z)};r.getOnboardingPromptsForOnboarding=function(n){var e,t;return null!==(t=null===(e=I[n])||void 0===e?void 0:e.onboardingPrompts)&&void 0!==t?t:C};r.getOnboardingPrompts=function(n){var e,t;return null!==(t=null===(e=I[n])||void 0===e?void 0:e.prompts)&&void 0!==t?t:C};r.getOnboardingResponses=function(n){var e,t;if(l.Z.isFullServerPreview(n)){var r;return Array.from(null!==(r=l.Z.getOnboardingResponses(n))&&void 0!==r?r:w)}return null!==(t=null===(e=I[n])||void 0===e?void 0:e.responses)&&void 0!==t?t:w};r.getSelectedOptions=function(n){var e=this.getOnboardingResponses(n);return this.getOnboardingPrompts(n).map((function(n){return n.options})).flat().filter((function(n){return e.includes(n.id)}))}
;r.getOnboardingResponsesForPrompt=function(n,e){var t=I[n];if(null==t)return w;var r=t.prompts.find((function(n){return n.id===e}));return null==r?w:i().intersection(r.options.map((function(n){return n.id})),this.getOnboardingResponses(n))};r.getEnabledOnboardingPrompts=function(n){var e,t=I[n];if(l.Z.isFullServerPreview(n)){var r;return null!==(r=null==t?void 0:t.prompts)&&void 0!==r?r:C}return null!=t&&t.enabled&&null!==(e=t.prompts)&&void 0!==e?e:C};r.getDefaultChannelIds=function(n){var e,t;return null!==(t=null===(e=I[n])||void 0===e?void 0:e.defaultChannelIds)&&void 0!==t?t:R};r.getEnabled=function(n){var e,t;return l.Z.isFullServerPreview(n)?null!=I[n]:null!==(t=null===(e=I[n])||void 0===e?void 0:e.enabled)&&void 0!==t&&t};r.getOnboardingPrompt=function(n){return Object.values(I).map((function(n){return n.prompts})).flat().find((function(e){return e.id===n}))};r.isLoading=function(){return A};r.shouldFetchPrompts=function(n){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.Z.Millis.HOUR;if(A)return!1;var t=P[n];return null==t||Date.now()-t>e};r.getPendingResponseOptions=function(n){return S[n]};r.ackIdForGuild=function(n){var e=this.getEnabledOnboardingPrompts(n),t="0";e.forEach((function(n){n.options.forEach((function(n){d.Z.compare(n.id,t)>0&&(t=n.id)}));d.Z.compare(n.id,t)>0&&(t=n.id)}));return t};r.lastFetchedAt=function(n){return P[n]};r.isAdvancedMode=function(n){var e;return null!=n&&(null===(e=I[n])||void 0===e?void 0:e.mode)===p.Un.ONBOARDING_ADVANCED};r.__getLocalVars=function(){return{onboardingByGuildId:I,pendingOptionChanges:S,lastFetchedAtByGuildId:P,loading:A,EMPTY_PROMPTS:C,EMPTY_RESPONSES:w,EMPTY_DEFAULT_CHANNEL_IDS:R}};return t}(o.ZP.Store);L.displayName="GuildOnboardingPromptsStore";const U=new L(u.Z,{CONNECTION_OPEN:function(){A=!1;I={}},GUILD_ONBOARDING_PROMPTS_FETCH_START:function(){A=!0},GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS:function(n){
var e=n.guildId,t=n.prompts,r=n.defaultChannelIds,i=n.enabled,o=n.responses,u=n.onboardingPromptsSeen,l=n.onboardingResponsesSeen,a=n.mode,c=n.belowRequirements;A=!1;var d=f.ZP.getOnboardingStatus(e)===f.uX.READY,p=N(t,u,l);I[e]={enabled:i,mode:a,belowRequirements:c,prompts:p,onboardingPrompts:p.filter((function(n){return n.inOnboarding})),defaultChannelIds:r.filter((function(n){return(0,s.s)(e,n)})),responses:d?[]:o,onboardingPromptsSeen:u,onboardingResponsesSeen:l};d||D(e,o);P[e]=Date.now()},GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE:function(){A=!1},GUILD_ONBOARDING_SELECT_OPTION:function(n){var e=n.guildId,t=n.optionId,r=n.selected,o=n.removedOptionIds;if(l.Z.isFullServerPreview(e))return!0;if(null==I[e])return!1;null!=o&&o.length>0&&i().pullAll(I[e].responses,o);r?I[e].responses.push(t):i().pull(I[e].responses,t);null==S[e]&&(S[e]={});S[e][t]=r;null!=o&&o.forEach((function(n){return S[e][n]=!1}));S[e]=h({},S[e]);return!0},GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS:function(n){
var e=n.guildId,t=n.options,r=n.prompts_seen,i=n.options_seen;D(e,t);var o=I[e];if(null==o)return!1;var u=N(o.prompts,r,i);I[e]=O(h({},o),{prompts:u,onboardingPrompts:u.filter((function(n){return n.inOnboarding})),onboardingPromptsSeen:r,onboardingResponsesSeen:i})},GUILD_ONBOARDING_PROMPTS_LOCAL_UPDATE:T,GUILD_SETTINGS_ONBOARDING_PROMPTS_SAVE_SUCCESS:T,GUILD_SETTINGS_DEFAULT_CHANNELS_SAVE_SUCCESS:function(n){var e=n.guildId,t=n.channelIds;I[e]=O(h({},I[e]),{defaultChannelIds:t})},GUILD_SETTINGS_ONBOARDING_SET_MODE:function(n){var e=n.guildId,t=n.mode,r=I[e];null!=r&&(r.mode=t)}})},788533:(n,e,t)=>{t.r(e);t.d(e,{default:()=>E,discardOnboardingPromise:()=>y,isOnboardingActiveForGuild:()=>S,openAndWaitForOnboarding:()=>I});var r=t(441143),i=t.n(r),o=t(945460),u=t(327499),l=t(784426),a=t(47635),c=t(888236),d=t(189827),s=t(21372),f=t(661123),p=t(589677);var v=t(2590),_=t(897196);function g(n,e,t,r,i,o,u){try{var l=n[o](u),a=l.value}catch(n){t(n);return}
l.done?e(a):Promise.resolve(a).then(r,i)}function h(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function u(n){g(o,r,i,u,l,"next",n)}function l(n){g(o,r,i,u,l,"throw",n)}u(void 0)}))}}var O=function(n,e){var t,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(n,u)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},b={};function y(n){b[n]=null}function E(n){return m.apply(this,arguments)}function m(){return(m=h((function(n){var e,t,r,a,s;return O(this,(function(f){switch(f.label){case 0:e=n.guildId,t=n.returnChannelId,r=n.isPreview,a=void 0!==r&&r;(0,o.closeAllModals)();i()(null==b[e],"should not double-join guilds");return[4,(0,u.V)(e)];case 1:if(!(s=f.sent()).hasFeature(v.oNc.COMMUNITY))return[2];if(!a)return[3,2];(0,c.I1)(e);return[3,4];case 2:return s.hasFeature(v.oNc.GUILD_ONBOARDING)?[4,(0,c.rK)(e)]:[2];case 3:f.sent();f.label=4;case 4:return d.ZP.shouldShowOnboarding(e)?[4,I(e)]:[3,6];case 5:f.sent();null!=t&&(0,l.uL)(v.Z5c.CHANNEL(e,t));f.label=6;case 6:return[2]}}))
}))).apply(this,arguments)}function I(n){return new Promise((function(e){b[n]=e;(function(n){return new Promise((function(e){s.ZP.addConditionalChangeListener((function(){var t,r=s.ZP.getSelfMember(n);if((0,f.yE)(null!==(t=null==r?void 0:r.flags)&&void 0!==t?t:0,p.q.COMPLETED_ONBOARDING)){a.Z.finishOnboarding(n);e();return!1}return!0}))}))})(n).then((function(){!function(n){var e;null===(e=b[n])||void 0===e||e.call(b);b[n]=null}(n);a.Z.finishOnboarding(n)}));(0,l.uL)(v.Z5c.CHANNEL(n,_.oC.GUILD_ONBOARDING))}))}function S(n){return null!=b[n]}},457586:(n,e,t)=>{t.d(e,{v:()=>d,b:()=>s});var r=t(496486),i=t.n(r),o=t(202351),u=t(61209),l=t(72580);function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function c(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return
;if("string"==typeof n)return a(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i()(u.Z.getMutableGuildChannelsForGuild(n)).values().groupBy("parent_id").value(),a=i()(t).map((function(n){return n.isCategory()?n.id:n.parent_id})).filter(l.lm).uniq().map((function(n){return u.Z.getChannel(n)})).filter(l.lm).sortBy("position").value(),d=new Set(a.map((function(n){return n.id}))),s=t.filter((function(n){return!(n.isCategory()||null!=n.parent_id&&d.has(n.parent_id))}));s=i().sortBy(s,(function(n){return n.isGuildVocal()?n.position+1e4:n.position}))
;var f=!0,p=!1,v=void 0;try{for(var _,g=function(){var n,u=_.value;r||s.push(u);var l=e.has(u.id)?o[u.id]:t.filter((function(n){return n.parent_id===u.id}));l=i().sortBy(null!=l?l:[],(function(n){return n.isGuildVocal()?n.position+1e4:n.position}));(n=s).push.apply(n,c(l))},h=a[Symbol.iterator]();!(f=(_=h.next()).done);f=!0)g()}catch(n){p=!0;v=n}finally{try{f||null==h.return||h.return()}finally{if(p)throw v}}return s}function s(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,o.Wu)([u.Z],(function(){var r=Array.from(e).map((function(n){return u.Z.getChannel(n)})).filter(l.lm);return d(n,e,r,t)}));return r}},347834:(n,e,t)=>{t.d(e,{XQ:()=>P,k$:()=>A,C1:()=>T,Mo:()=>D,QG:()=>C,dM:()=>w,Kt:()=>R,_U:()=>L});var r=t(496486),i=t(418705),o=t(744564),u=t(201459),l=t(396043),a=t(189651),c=t(861426),d=t(52317),s=t(917019),f=t(61209),p=t(9430),v=t(652591),_=t(661123),g=t(171940),h=t(2590),O=t(131559);function b(n,e,t,r,i,o,u){try{var l=n[o](u),a=l.value}catch(n){t(n);return
}l.done?e(a):Promise.resolve(a).then(r,i)}function y(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function u(n){b(o,r,i,u,l,"next",n)}function l(n){b(o,r,i,u,l,"throw",n)}u(void 0)}))}}function E(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){E(n,e,t[e])}))}return n}function I(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable
})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}var S=function(n,e){var t,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}
if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=e.call(n,u)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function P(n,e,t,r){if(null!=n)if(c.Z.isFullServerPreview(n))(0,a.zS)(n,t?[e]:[],t?[]:[e]);else{var i=p.Z.getGuildChannelFlags(n,e);t||(i=(0,_.mB)(i,O.ic.FAVORITED,!1));var u=(0,g.I)(n,e),s={flags:(0,_.mB)(i,O.ic.OPT_IN_ENABLED,t)},b={channel_overrides:E({},e,s)};d.Z.saveUserGuildSettingsBulk(E({},n,b));o.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:n,channelId:e,settings:s});(0,g.jz)(n,e,s,u,r);R(n);v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n),(0,l.v_)(f.Z.getChannel(e))),{action_type:t?"add":"remove",location:r}))}}function A(n,e,t,r){if(null!=n)if(c.Z.isFullServerPreview(n)){(0,a.zS)(n,t?[e]:[],t?[]:[e]);(0,a.aq)(n,{optInEnabled:!0})}else{var i=p.Z.getGuildChannelFlags(n,e);t||(i=(0,_.mB)(i,O.ic.FAVORITED,!1));var u=(0,g.I)(n,e),s={
flags:(0,_.mB)(i,O.ic.OPT_IN_ENABLED,t)};if(!p.Z.isOptInEnabled(n)){var b=(0,_.mB)(p.Z.getGuildFlags(n),O.vc.OPT_IN_CHANNELS_ON,!0);d.Z.saveUserGuildSettingsBulk(E({},n,{channel_overrides:E({},e,s),flags:b}))}o.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:n,channelId:e,settings:s});(0,g.jz)(n,e,s,u,r);R(n);v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n),(0,l.v_)(f.Z.getChannel(e))),{action_type:t?"add":"remove",location:r}))}}function N(){return(N=y((function(n,e){var t;return S(this,(function(r){switch(r.label){case 0:if(null==n)return[2];if(c.Z.isFullServerPreview(n))return[2];t={channel_overrides:e};return[4,d.Z.saveUserGuildSettingsBulk(E({},n,t))];case 1:r.sent();o.Z.dispatch({type:"USER_GUILD_SETTINGS_REMOVE_PENDING_CHANNEL_UPDATES",guildId:n,updates:e});return[2]}}))}))).apply(this,arguments)}var T=(0,r.debounce)((function(n,e){return function(n,e){return N.apply(this,arguments)}(n,e)}),1e3);function D(n,e){
var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(null!=n)if(c.Z.isFullServerPreview(n)){(0,a.zS)(n,e,[]);t&&(0,a.aq)(n,{optInEnabled:!0})}else{var i={};e.forEach((function(e){var t=p.Z.getGuildChannelFlags(n,e);i[e]={flags:(0,_.mB)(t,O.ic.OPT_IN_ENABLED,!0)}}));if(t){var o=(0,_.mB)(p.Z.getGuildFlags(n),O.vc.OPT_IN_CHANNELS_ON,!0);u.Z.updateGuildAndChannelNotificationSettings(n,{flags:o,channel_overrides:i});v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n)),{action_type:"add_many_and_enable_guild",location:r}))}else{u.Z.updateChannelOverrideSettingsBulk(n,i);v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n)),{action_type:"add_many",location:r}))}}}function C(n,e,t){if(c.Z.isFullServerPreview(n))(0,a.aq)(n,{optInEnabled:e});else{var r=p.Z.getGuildFlags(n);u.Z.updateGuildNotificationSettings(n,{flags:(0,_.mB)(r,O.vc.OPT_IN_CHANNELS_ON,e)});v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n)),{
action_type:e?"guild_enabled":"guild_disabled",location:t}))}}function w(n,e,t,r){if(null!=n&&!c.Z.isFullServerPreview(n)){var i=p.Z.getGuildChannelFlags(n,e);!(0,_.yE)(i,O.ic.OPT_IN_ENABLED)&&t&&(i=(0,_.mB)(i,O.ic.OPT_IN_ENABLED,!0));u.Z.updateChannelOverrideSettings(n,e,{flags:(0,_.mB)(i,O.ic.FAVORITED,t)});v.default.track(h.rMx.CHANNEL_LIST_UPDATED,I(m({},(0,l.hH)(n)),{action_type:t?"favorited":"unfavorited",location:r}))}}function R(n){(0,s.PS)(n,(function(n){if((0,_.yE)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_CLEARED)&&!(0,_.yE)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_SHOWN))return!1;n.guildOnboardingProgress=(0,_.pj)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_CLEARED);n.guildOnboardingProgress=(0,_.mB)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_SHOWN,!1);return!0}),s.fy.INFREQUENT_USER_ACTION)}function L(n,e){o.Z.dispatch({type:"DISMISS_FAVORITE_SUGGESTION",guildId:n,channelId:e})}},18882:(n,e,t)=>{t.d(e,{Z:()=>cn})
;var r=t(496486),i=t.n(r),o=t(842227),u=t(202351),l=t(744564),a=t(656793),c=t(382060),d=t(61209),s=t(567403),f=t(717091),p=t(715107),v=t(536945),_=t(487685),g=t(102921);function h(n){if(null==n.threadMetadata)return 0;var e=60*n.threadMetadata.autoArchiveDuration*1e3;return function(n){if(null==n.threadMetadata)return 0;var e,t=null!==(e=f.ZP.lastMessageId(n.id))&&void 0!==e?e:n.id,r=g.Z.extractTimestamp(t),i=null!=n.threadMetadata.archiveTimestamp?new Date(n.threadMetadata.archiveTimestamp).getTime():0;return Math.max(r,i)}(n)+e}var O=t(897196);function b(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function y(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function E(n){E=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return E(n)}function m(n){for(var e=1;e<arguments.length;e++){
var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){y(n,e,t[e])}))}return n}function I(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function S(n,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function P(n,e){P=Object.setPrototypeOf||function(n,e){n.__proto__=e
;return n};return P(n,e)}var A=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function N(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=E(n);if(e){var i=E(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return S(this,t)}}var T={},D={},C={},w={},R={},L={},U=null,Z={};function G(){T={};R={};D={};C={};w={};U=p.Z.getChannelId();for(var n in Z)clearTimeout(Z[n]);Z={};v.Z.forEachGuild((function(n){M(n)}));F()}function j(n){delete T[n];delete R[n];delete D[n];delete C[n];delete w[n];M(n);for(var e in C[n])H(n,e)}function M(n){var e=v.Z.getThreadsForGuild(n);for(var t in e)for(var r in e[t]){$(r);var i=d.Z.getChannel(r);if(null!=i){var o=_.Z.joinTimestamp(r);if(null!=o){
var u={channel:i,joinTimestamp:o.getTime()},l=z(i),a=l.isUnread,c=l.isRelevant,s=l.isTimedRelevant;Q(T,i,u,!1);Q(R,i,c?u:null,!1);Q(D,i,a?u:null,!1);s&&Y(i,!0)}else{Q(C,i,i,!1);var p=f.ZP.isForumPostUnread(i.id);Q(w,i,p?i:null,!1)}}}}function F(){L={};for(var n in C)for(var e in C[n])H(n,e)}function B(n){var e=d.Z.getBasicChannel(n);null!=e&&c.uC.has(e.type)&&H(e.guild_id,e.id)}function H(n,e){var t=d.Z.getChannel(e);if(null!=t&&t.isForumLikeChannel()){null==L[n]&&(L[n]={});L[n][e]=0;if(null!=C[n]&&null!=C[n][e]){var r=s.Z.getGuild(n);if(null!=r){var i=f.ZP.getTrackedAckMessageId(e);if(null==i){var u=Date.now();null!=r.joinedAt&&(r.joinedAt instanceof Date?u=r.joinedAt.getTime():"string"==typeof r.joinedAt&&(u=new Date(r.joinedAt).getTime()));i=o.default.fromTimestamp(u)}for(var l in C[n][e])e===U?f.ZP.isNewForumThread(l,e,r)&&L[n][e]++:o.default.compare(l,i)>0&&!f.ZP.hasOpenedThread(l)&&L[n][e]++}}}}function k(n,e,t){if(null==e)return!1;var r=d.Z.getChannel(t),i=_.Z.joinTimestamp(t)
;if(null!=r&&v.Z.isActive(n,e,t)){if(null!=i){var o={channel:r,joinTimestamp:i.getTime()},u=z(r),l=u.isUnread,a=u.isRelevant,c=u.isTimedRelevant;Q(T,r,o,!0);Q(R,r,a?o:null,!0);Q(D,r,l?o:null,!0);Q(C,r,null,!0);Q(w,r,null,!0);Y(r,c)}else{var s=f.ZP.isForumPostUnread(r.id);Q(T,r,null,!0);Q(D,r,null,!0);Q(R,r,null,!0);Q(C,r,r,!0);Q(w,r,s?r:null,!0);$(r.id)}H(n,e)}else{X(T,n,e,t);X(R,n,e,t);X(D,n,e,t);X(C,n,e,t);X(w,n,e,t);$(t);H(n,e)}}function x(n){return k(n.channel.guild_id,n.channel.parent_id,n.channel.id)}function V(n,e){if(null==e)return!1;var t=T[n],r=null==t?null:t[e];if(null!=r)for(var i in r)if(r[i].channel.isNSFW())return!0;var o=C[n],u=null==o?null:o[e];if(null!=u)for(var l in u)if(u[l].isNSFW())return!0;return!1}function q(n){var e=d.Z.getChannel(n.id);return!(null==e||!v.Z.isActive(n.guildId,e.parent_id,n.id))&&k(e.guild_id,e.parent_id,e.id)}function W(n){var e=d.Z.getChannel(n.channelId);if(null==e)J();else{var t=e.guild_id,r=e.parent_id;if(!c.Ec.has(e.type)){var i
;if(Number(null===(i=L[t])||void 0===i?void 0:i[e.id])>0){H(t,e.id);return!0}return!1}if(null==r)return!1;if(nn(T,e)){var o=z(e),u=o.isUnread,l=o.isRelevant;Y(e,o.isTimedRelevant);var a=nn(D,e),s=nn(R,e);if(u===a&&l===s)return!1;var p=T[t][r][e.id],v=l?p:null;Q(D,e,u?p:null,!0);Q(R,e,v,!0);H(t,r)}else{var _=nn(w,e),g=f.ZP.isForumPostUnread(e.id);if(g===_)return!1;Q(w,e,g?e:null,!0)}}}function J(){D={};R={};for(var n in T)for(var e in T[n])for(var t in T[n][e]){var r=T[n][e][t],i=z(r.channel),o=i.isUnread,u=i.isRelevant,l=i.isTimedRelevant;o&&Q(D,r.channel,r,!1);u&&Q(R,r.channel,r,!1);Y(r.channel,l)}w={};for(var a in C)for(var c in C[a])for(var d in C[a][c]){var s=C[a][c][d];f.ZP.isForumPostUnread(d)&&Q(w,s,s,!1)}F()}function K(){var n=U;if((U=p.Z.getChannelId())===n)return!1;B(n);B(U)}function z(n){var e=f.ZP.getMentionCount(n.id)>0,t=f.ZP.hasRelevantUnread(n)&&(!_.Z.isMuted(n.id)||e)||(0,a.c)()&&e,r=n.hasFlag(O.zZ.PINNED),i=n.isActiveThread(),o=i&&h(n)>Date.now();return{
isUnread:(i||r)&&t,isRelevant:o||r||t,isTimedRelevant:o}}function Y(n,e){$(n.id);e&&function(n){Z[n.id]=setTimeout((function(){var e=d.Z.getChannel(n.id);null!=e&&l.Z.dispatch({type:"THREAD_UPDATE",channel:e})}),h(n)-Date.now()+1)}(n)}function $(n){if(n in Z){clearTimeout(Z[n]);delete Z[n]}}function Q(n,e,t,r){var o=e.guild_id,u=e.parent_id,l=e.id;if(null!=o&&null!=u&&null!=l){o in n||(n[o]={});u in n[o]||(n[o][u]={});r&&(n[o]=I(m({},n[o]),y({},u,m({},n[o][u]))));if(null===t){delete n[o][u][l];i().isEmpty(n[o][u])&&delete n[o][u]}else n[o][u][l]=t}}function X(n,e,t,r){if(null!=e&&null!=t&&null!=r&&en(n,e,t,r)){n[e]=I(m({},n[e]),y({},t,m({},n[e][t])));delete n[e][t][r];i().isEmpty(n[e][t])&&delete n[e][t]}}function nn(n,e){return en(n,e.guild_id,e.parent_id,e.id)}function en(n,e,t,r){return e in n&&t in n[e]&&r in n[e][t]}var tn={},rn={},on={},un={},ln={},an=function(n){!function(n,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&P(n,e)}(t,n);var e=N(t);function t(){b(this,t);return e.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(v.Z,d.Z,_.Z,f.ZP);this.syncWith([p.Z],K)};r.hasActiveJoinedUnreadThreads=function(n,e){return n in D&&e in D[n]};r.getActiveUnjoinedThreadsForParent=function(n,e){var t;return n in C&&null!==(t=C[n][e])&&void 0!==t?t:un};r.getActiveJoinedThreadsForParent=function(n,e){var t;return n in T&&null!==(t=T[n][e])&&void 0!==t?t:on};r.getActiveJoinedThreadsForGuild=function(n){var e;return null!==(e=T[n])&&void 0!==e?e:tn};r.getActiveJoinedUnreadThreadsForGuild=function(n){var e;return null!==(e=D[n])&&void 0!==e?e:tn};r.getActiveJoinedUnreadThreadsForParent=function(n,e){var t;return null!==(t=this.getActiveJoinedUnreadThreadsForGuild(n)[e])&&void 0!==t?t:on}
;r.getActiveJoinedRelevantThreadsForGuild=function(n){var e;return null!==(e=R[n])&&void 0!==e?e:tn};r.getActiveJoinedRelevantThreadsForParent=function(n,e){var t;return null!==(t=this.getActiveJoinedRelevantThreadsForGuild(n)[e])&&void 0!==t?t:on};r.getActiveUnjoinedThreadsForGuild=function(n){var e;return null!==(e=C[n])&&void 0!==e?e:rn};r.getActiveUnjoinedUnreadThreadsForGuild=function(n){var e;return null!==(e=w[n])&&void 0!==e?e:tn};r.getActiveUnjoinedUnreadThreadsForParent=function(n,e){var t;return null!==(t=this.getActiveUnjoinedUnreadThreadsForGuild(n)[e])&&void 0!==t?t:on};r.getNewThreadCountsForGuild=function(n){var e;return null!==(e=L[n])&&void 0!==e?e:ln};r.computeAllActiveJoinedThreads=function(n){var e=[];for(var t in T)if(t===n||null==n)for(var r in T[t])for(var i in T[t][r])e.push(T[t][r][i].channel);return e};r.getNewThreadCount=function(n,e){var t,r;return null!==(r=null===(t=L[n])||void 0===t?void 0:t[e])&&void 0!==r?r:0};r.getActiveThreadCount=function(n,e){
var t,r,o,u;return i().size(null!==(o=null===(t=T[n])||void 0===t?void 0:t[e])&&void 0!==o?o:{})+i().size(null!==(u=null===(r=C[n])||void 0===r?void 0:r[e])&&void 0!==u?u:{})};r.__getLocalVars=function(){return{activeJoinedThreads:T,activeJoinedUnreadThreads:D,activeUnjoinedThreads:C,activeUnjoinedUnreadThreads:w,activeJoinedRelevantThreads:R,newThreadCounts:L,selectedChannelId:U,timers:Z,NO_GUILD_UNJOINED_THREADS:rn,NO_JOINED_THREADS:on,NO_UNJOINED_THREADS:un,NO_NEW_THREADS:ln}};return t}(u.ZP.Store);an.displayName="ActiveJoinedThreadsStore";const cn=new an(l.Z,{CONNECTION_OPEN:G,OVERLAY_INITIALIZE:G,THREAD_LIST_SYNC:function(n){return j(n.guildId)},LOAD_THREADS_SUCCESS:G,LOAD_ARCHIVED_THREADS_SUCCESS:G,SEARCH_FINISH:G,GUILD_CREATE:function(n){return j(n.guild.id)},GUILD_DELETE:G,CURRENT_USER_UPDATE:G,THREAD_CREATE:x,THREAD_UPDATE:x,THREAD_DELETE:x,CHANNEL_UPDATES:function(n){var e=n.channels,t=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){
var l=o.value;if(l.isNSFW()!==V(l.guild_id,l.parent_id)){G();return}}}catch(n){r=!0;i=n}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return!1},CHANNEL_DELETE:function(n){var e=n.channel,t=!1;if(null!=e.guild_id&&null!=e.parent_id){if(e.guild_id in T&&e.parent_id in T[e.guild_id]){delete T[e.guild_id][e.parent_id];t=!0}if(e.guild_id in D&&e.parent_id in D[e.guild_id]){delete D[e.guild_id][e.parent_id];t=!0}if(e.guild_id in R&&e.parent_id in R[e.guild_id]){Object.keys(R[e.guild_id][e.parent_id]).forEach($);delete R[e.guild_id][e.parent_id];t=!0}if(e.guild_id in C&&e.parent_id in C[e.guild_id]){delete C[e.guild_id][e.parent_id];t=!0}if(e.guild_id in w&&e.parent_id in w[e.guild_id]){delete w[e.guild_id][e.parent_id];t=!0}t&&H(e.guild_id,e.parent_id)}return t},THREAD_MEMBER_UPDATE:q,THREAD_MEMBERS_UPDATE:q,LOAD_MESSAGES_SUCCESS:W,MESSAGE_CREATE:W,MESSAGE_DELETE:W,MESSAGE_DELETE_BULK:W,MESSAGE_ACK:W,CHANNEL_ACK:W,CHANNEL_LOCAL_ACK:W,CHANNEL_SELECT:function(n){W(n);K()},
PASSIVE_UPDATE_V1:function(n){null!=n.channels&&J()},WINDOW_FOCUS:J,UPDATE_CHANNEL_DIMENSIONS:J,DRAWER_OPEN:J,DRAWER_CLOSE:J,BULK_ACK:J})},877475:(n,e,t)=>{t.d(e,{Z:()=>w});var r=t(202351),i=t(744564),o=t(777158),u=t(419051),l=t(736818),a=t(61209),c=t(5544),d=t(567403),s=t(2590);function f(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function p(n){p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return p(n)}function v(n,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function _(n,e){_=Object.setPrototypeOf||function(n,e){n.__proto__=e;return n};return _(n,e)}var g=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function h(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=p(n);if(e){var i=p(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return v(this,t)}}var O=null,b={},y=null;var E={_categories:[],null:[]};function m(n,e){n.index=e}function I(n){var e=c.ZP.getChannels(n),t={_categories:[],null:[]},r=function(n){var e,r=n.channel;(null!==(e=t[null!=r.parent_id?r.parent_id:"null"])&&void 0!==e?e:t.null).push({channel:r,index:-1})};e[s.d4z.GUILD_CATEGORY].forEach((function(n){var e=n.channel;t._categories.push({channel:e,index:-1});t[e.id]=[]}));e[c.sH].forEach(r);e[c.Zb].forEach(r);(0,o.Z)(t._categories,t).forEach(m);b[n]=t;return t}function S(){b={};null!=O&&I(O)}function P(n){var e=n.guild.id;b[e]=void 0;O===e&&I(e)}function A(n){var e=n.channel.guild_id;if(null==e)return!1;b[e]=void 0;O===e&&I(e)}
function N(n){var e=n.guildId;b[e]=void 0;e===O&&I(e)}function T(n,e){y=e;if(null==n||null==n.getGuildId())return!1;var t=n.getGuildId();if(null==t)return!1;b[t]=void 0;t===O&&I(t);return!0}function D(){I(s.I_8)}var C=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&_(n,e)}(t,n);var e=h(t);function t(){f(this,t);return e.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(c.ZP,d.Z,l.default,a.Z,u.Z);this.syncWith([u.Z],D)};r.getCategories=function(n){return null!=n?function(n){var e=b[n];return null!=e?e:I(n)}(n):E};r.__getLocalVars=function(){return{selectedGuildId:O,guilds:b,selectedVoiceChannelId:y,EMPTY_CATEGORY_LISTS:E}};return t}(r.ZP.Store);C.displayName="GuildCategoryStore";const w=new C(i.Z,{CHANNEL_SELECT:function(n){var e=n.guildId;O=null!=e?e:null;if(null==e)return!1
;if(null!=b[e])return!1;I(e)},CONNECTION_OPEN:S,OVERLAY_INITIALIZE:S,CACHE_LOADED_LAZY:S,GUILD_CREATE:P,GUILD_UPDATE:P,GUILD_DELETE:function(n){var e=n.guild.id;delete b[e]},CHANNEL_CREATE:A,CHANNEL_DELETE:A,CHANNEL_UPDATES:function(n){var e=n.channels,t=!1,r=!0,i=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var a=u.value.guild_id;if(null!=a){b[a]=void 0;t=!0;O===a&&I(a)}}}catch(n){i=!0;o=n}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},GUILD_MEMBER_UPDATE:function(n){var e=n.guildId,t=n.user;if(l.default.getId()!==t.id)return!1;b[e]=void 0;e===O&&I(e)},CURRENT_USER_UPDATE:function(){if(null==O)return!1;I(O)},GUILD_ROLE_CREATE:N,GUILD_ROLE_UPDATE:N,GUILD_ROLE_DELETE:N,IMPERSONATE_UPDATE:N,IMPERSONATE_STOP:N,VOICE_CHANNEL_SELECT:function(n){var e=n.channelId;return null==e&&null!=y?T(a.Z.getChannel(y),null):T(a.Z.getChannel(e),e)},VOICE_STATE_UPDATES:function(n){return n.voiceStates.reduce((function(n,e){
var t=e.channelId,r=e.sessionId;return l.default.getSessionId()!==r?n:T(a.Z.getChannel(t),t)||n}),!1)}})}}]);
//# sourceMappingURL=0ba44a53a2aa95f90a2e.js.map