"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[44485],{152042:(e,n,r)=>{r.d(n,{Z:()=>o});var t=r(785893),i=(r(667294),r(2590)),a=r(203600),s=r(473708),c=r(750347),l=r.n(c);const o=function(e){var n=e.subscriptionPlan,r=e.isGift,c=e.paymentSourceType;if(e.hide)return null;var o=n.interval,u=n.intervalCount,I="";if(c===i.HeQ.PAYSAFE_CARD)I=s.Z.Messages.SUBSCRIPTION_PAYMENT_LEGALESE_PAYSAFECARD;else switch(o){case a.rV.MONTH:I=r?s.Z.Messages.PREMIUM_PAYMENT_GIFT_SUBTEXT_MONTHLY:s.Z.Messages.SUBSCRIPTION_PAYMENT_LEGALESE_MONTHLY;I=r?s.Z.Messages.PREMIUM_PAYMENT_GIFT_SUBTEXT_MONTHLY:1===u?s.Z.Messages.SUBSCRIPTION_PAYMENT_LEGALESE_MONTHLY:s.Z.Messages.SUBSCRIPTION_PAYMENT_LEGALESE_MULTI_MONTH.format({intervalCount:u});break;case a.rV.YEAR:I=r?s.Z.Messages.PREMIUM_PAYMENT_GIFT_SUBTEXT_YEARLY:s.Z.Messages.SUBSCRIPTION_PAYMENT_LEGALESE_YEARLY;break;default:throw new Error("Unexpected interval: ".concat(o))}return(0,t.jsxs)(t.Fragment,{
children:[I,c===i.HeQ.SOFORT&&(0,t.jsxs)("div",{className:l().sofortCopy,children:[s.Z.Messages.SOFORT_MANDATE_AGREEMENT," "]})]})}},26529:(e,n,r)=>{r.d(n,{Z:()=>g});var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),c=r(441143),l=r.n(c),o=r(202351),u=r(945460);const I=(0,r(260561).B)({id:"2023-05_checkout_terms_of_service",label:"Checkout Terms of Service",kind:"user",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var d=r(16703),p=r(64318),_=r(348592),T=r(850841),v=r(2590),f=r(203600),h=r(473708),E=r(205074),m=r.n(E);function M(e,n,r,t,i,a,s){try{var c=e[a](s),l=c.value}catch(e){r(e);return}c.done?n(l):Promise.resolve(l).then(t,i)}function N(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var a=e.apply(n,r);function s(e){M(a,t,i,s,c,"next",e)}function c(e){M(a,t,i,s,c,"throw",e)}s(void 0)}))}}function P(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function b(e,n,r){
n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function A(e){A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return A(e)}function R(e,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function L(e,n){L=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return L(e,n)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,t=A(e);if(n){var i=A(this).constructor;r=Reflect.construct(t,arguments,i)
}else r=t.apply(this,arguments);return R(this,r)}}var S=function(e,n){var r,t,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;(t=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:s.label++;return{value:a[1],done:!1};case 5:s.label++;t=a[1];a=[0];continue;case 7:a=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1];i=a;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(a);break}i[2]&&s.ops.pop();s.trys.pop();continue}
a=n.call(e,s)}catch(e){a=[6,e];t=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},y=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&L(e,n)}(i,e);var n=U(i);function i(){P(this,i);var e;(e=n.apply(this,arguments)).state={hasAcceptedTerms:!e.props.forceShow&&e.props.hasPreviouslyAcceptedTerms,hasAcceptedEULA:!e.props.forceShow&&e.props.hasPreviouslyAcceptedEULA,hasAcceptedWithdrawalWaiver:!1};e.handleToggleTermsAcceptance=function(n,r){e.setState({hasAcceptedTerms:r})};e.handleToggleEUWithdralWaiverAcceptance=function(n,r){e.setState({hasAcceptedWithdrawalWaiver:r})};e.handleToggleEULAAcceptance=function(n,r){e.setState({hasAcceptedEULA:r})};return e}var a=i.prototype;a.componentDidMount=function(){
this.props.onChange(this.hasAcceptedNeccessaryTerms(this.props,this.state));this.eligibleForNewExperience()&&I.trackExposure({})};a.componentDidUpdate=function(e,n){var r=this.hasAcceptedNeccessaryTerms(e,n),t=this.hasAcceptedNeccessaryTerms(this.props,this.state);t!==r&&this.props.onChange(t)};a.hasAcceptedNeccessaryTerms=function(e,n){return(e.isTrial||this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()||n.hasAcceptedTerms)&&(null==e.eulaId||n.hasAcceptedEULA)&&(!e.showWithdrawalWaiver||n.hasAcceptedWithdrawalWaiver)};a.eligibleForNewExperience=function(){var e=this.props,n=e.forceShow,r=e.hasPreviouslyAcceptedTerms,t=e.isTrial,i=e.isGift;return!(!n&&r||t||!i)};a.isInCheckoutTOSExperiment=function(){return I.getCurrentConfig({},{autoTrackExposure:!0}).enabled};a.renderLegalTerms=function(){var e=this.props,n=e.hasPreviouslyAcceptedTerms,r=e.forceShow,i=e.isTrial,a=e.checkboxLabel,c=e.checkboxClassname,l=e.checkboxLabelClassname,o=e.disabled,I=this.state.hasAcceptedTerms
;if(this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()){var d=h.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL_V2.format({primaryText:h.Z.Messages.PAYMENT_MODAL_BUTTON_PREMIUM_GIFT,paidURL:v.EYA.PAID_TERMS});return(0,t.jsx)("div",{className:s()(m().checkboxLabel,l),children:d})}return!r&&n||i?null:(0,t.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:I,onChange:this.handleToggleTermsAcceptance,disabled:o,className:s()(m().checkbox,c),children:(0,t.jsx)("div",{className:s()(m().checkboxLabel,l),children:null!=a?a:h.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL.format({termsURL:v.EYA.TERMS,paidURL:v.EYA.PAID_TERMS})})})};a.formatInterval=function(e){if(e===f.rV.YEAR)return h.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_YEAR;if(e===f.rV.MONTH)return h.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_MONTH;throw new Error("Invalid interval type: ".concat(e))};a.render=function(){
var e=this.props,n=e.eulaId,i=e.applicationName,a=e.hasPreviouslyAcceptedTerms,c=e.hasPreviouslyAcceptedEULA,o=e.forceShow,I=e.disabled,p=e.className,f=e.checkboxClassname,E=e.checkboxLabelClassname,M=e.finePrint,P=e.showPricingLink,A=e.showWithdrawalWaiver,R=e.isTrial,L=e.subscriptionPlan,O=this.state,U=O.hasAcceptedEULA,y=O.hasAcceptedWithdrawalWaiver;l()(!R||null!=L,"subscriptionPlan cannot be null if shouldShowUpdatedPaymentModal is true");return o||!a||null!=n&&!c||A?(0,t.jsxs)("div",{className:p,children:[R?(0,t.jsx)(d.KU,{}):(0,t.jsx)(u.FormTitle,{className:m().formTitle,children:A?h.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER:h.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO}),this.renderLegalTerms(),null==n||!o&&c?null:(0,t.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:U,onChange:this.handleToggleEULAAcceptance,disabled:I,className:m().checkbox,children:(0,t.jsx)("div",{className:m().checkboxLabel,children:h.Z.Messages.BILLING_THIRD_PARTY_EULA_LABEL.format({applicationName:i,
onClick:function(e){(0,u.openModalLazy)(N((function(){var e,i;return S(this,(function(a){switch(a.label){case 0:return[4,Promise.all([r.e(40532),r.e(81757),r.e(6287),r.e(55121),r.e(25978),r.e(19798)]).then(r.bind(r,54415))];case 1:e=a.sent(),i=e.default;return[2,function(e){return(0,t.jsx)(i,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){b(e,n,r[n])}))}return e}({eulaId:n},e))}]}}))})));e.preventDefault()}})})}),null==M?null:(0,t.jsx)("div",{className:m().finePrint,children:M}),A?(0,t.jsxs)("div",{className:p,children:[(0,t.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:y,onChange:this.handleToggleEUWithdralWaiverAcceptance,disabled:I,className:s()(m().checkbox,f),children:(0,t.jsx)("div",{className:s()(m().checkboxLabel,E),
children:h.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_CHECKBOX})}),(0,t.jsx)("div",{className:m().finePrint,children:h.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_DISCLAIMER})]}):null,(0,t.jsx)("div",{className:m().finePrint,children:P&&(0,t.jsxs)(t.Fragment,{children:["*",h.Z.Messages.BILLING_HOW_PRICING_WORKS.format({documentationLink:_.Z.getArticleURL(v.BhN.LOCALIZED_PRICING)})]})}),R&&null!=L&&(0,t.jsx)(u.Text,{variant:"text-xs/medium",color:"interactive-normal",children:h.Z.Messages.BILLING_TRIAL_LEGAL_COPY_V2.format({buttonText:(0,T.W_)(null,L),interval:this.formatInterval(null==L?void 0:L.interval),cancelSubscriptionArticle:_.Z.getArticleURL(v.BhN.PREMIUM_DETAILS_CANCEL_SUB),paidServiceTermsArticle:_.Z.getArticleURL(v.BhN.PAID_TERMS)})})]}):null};return i}(i.Component);const g=o.ZP.connectStores([p.Z],(function(e){var n=e.eulaId;return{hasPreviouslyAcceptedTerms:p.Z.hasAcceptedStoreTerms,hasPreviouslyAcceptedEULA:null!=n&&p.Z.hasAcceptedEULA(n)}}))(y)},16703:(e,n,r)=>{r.d(n,{
PO:()=>d,q9:()=>p,R$:()=>_,i$:()=>T,KU:()=>v,Ji:()=>f,HE:()=>h});var t=r(785893),i=(r(667294),r(294184)),a=r.n(i),s=r(73904),c=r(249052),l=r(473708),o=r(884092),u=r.n(o);function I(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function d(e){var n=e.children,r=e.className;return(0,t.jsx)("div",{className:a()(u().table,r),children:n})}function p(e){var n=e.children;return(0,t.jsx)("div",{className:u().header,children:n})}function _(e){var n=e.label,r=e.value,i=e.className;return(0,t.jsxs)("div",{className:a()(u().row,i),children:[(0,t.jsx)("div",{className:u().rowLabel,children:n}),(0,t.jsx)("div",{className:u().rowAmount,children:r})]})}function T(e){var n=e.label,r=e.value,i=e.discounts,a=e.originalAmount,o=e.interval,I=e.currency,d=e.className,p=e.intervalCount,T=function(e){return null!=i?i.find((function(n){return n.type===e})):null
},v=T(s.eW.SUBSCRIPTION_PLAN),f=T(s.eW.ENTITLEMENT),h=null!=v?Math.floor(v.amount/a*100):null,E=(0,c.T4)(a,I);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{label:n,value:(0,t.jsxs)(t.Fragment,{children:[r,null!=h?(0,t.jsxs)("div",{className:u().rowPercentDiscount,children:["-",h,"%"]}):null]}),className:d}),null!=h?(0,t.jsxs)("div",{className:u().rowDiscountOriginalPrice,children:["(",null!=o&&null!=p?(0,c.og)(E,o,p):E,")"]}):null,null!=f?(0,t.jsx)("div",{className:u().entitlementDiscountRow,children:l.Z.Messages.BILLING_INVOICE_SUBSCRIPTION_CREDIT_APPLIED}):null]})}function v(e){var n,r=e.extended,i=void 0!==r&&r,s=e.negativeMarginTop,c=void 0!==s&&s;return(0,t.jsx)("div",{className:a()(u().divider,(n={},I(n,u().dividerExtended,i),I(n,u().negativeMarginTop,c),n))})}function f(e){var n=e.label,r=e.value,i=e.className;return(0,t.jsxs)("div",{className:a()(u().totalRow,i),children:[(0,t.jsx)("div",{className:u().totalLabel,children:n}),(0,t.jsx)("div",{className:u().totalAmount,
children:r})]})}function h(e){var n=e.children,r=e.className;return(0,t.jsx)("div",{className:a()(u().finePrint,r),children:n})}},524450:(e,n,r)=>{r.d(n,{Z:()=>c});var t=r(785893),i=(r(667294),r(249052)),a=r(16703),s=r(473708);function c(e){var n=e.invoice;return n.taxInclusive||n.tax<=0?null:(0,t.jsx)(a.R$,{label:s.Z.Messages.ESTIMATED_TAX_LABEL,value:(0,i.T4)(n.tax,n.currency)})}},900547:(e,n,r)=>{r.d(n,{Z:()=>u});var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),c=r(266643),l=r.n(c);function o(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}const u=i.forwardRef((function(e,n){var r=e.isActive,i=e.children;return(0,t.jsx)("div",{className:s()(l().wrapper,o({},l().wrapperActive,r)),ref:n,children:i})}))},646875:(e,n,r)=>{r.d(n,{As:()=>j,By:()=>w,Lu:()=>D,hG:()=>G,nd:()=>H,e9:()=>W,yT:()=>F})
;var t=r(785893),i=r(667294),a=r(294184),s=r.n(a),c=r(441143),l=r.n(c),o=r(202351),u=r(945460),I=r(73904),d=r(551778),p=r(718831),_=r(771966),T=r(348592),v=r(850841),f=r(249052),h=r(100749),E=r(71103),m=r(717035),M=r(16703),N=r(524450),P=r(203600),b=r(2590),A=r(473708),R=r(154342),L=r.n(R);function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function U(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){U(e,n,r[n])}))}return e}function y(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){
var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){c=!0;i=e}finally{try{s||null==r.return||r.return()}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return O(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=function(e,n){var r;return!!(null===(r=e.discounts)||void 0===r?void 0:r.some((function(e){return e.type===n})))};function C(e){var n,r=e.invoiceItem,i=e.overrideAmount,a=e.showGuildSubscriptionAdjustmentTooltip,s=e.currency,c=e.className,p=e.isPrepaidPaymentSource,T=e.referralTrialOfferId,h=(0,o.e7)([d.Z],(function(){return d.Z.get(r.subscriptionPlanId)})),E=null===(n=(0,m.N)(T))||void 0===n?void 0:n.subscription_trial;l()(null!=h,"Missing subscriptionPlan");var N=(0,v.if)({intervalType:null==E?void 0:E.interval,intervalCount:null==E?void 0:E.interval_count}),b=function(e,n,r,t){var i=x(e,I.eW.PREMIUM_TRIAL);switch(e.subscriptionPlanId){case P.Xh.PREMIUM_MONTH_LEGACY:case P.Xh.PREMIUM_YEAR_LEGACY:
case P.Xh.PREMIUM_MONTH_TIER_0:case P.Xh.PREMIUM_YEAR_TIER_0:case P.Xh.PREMIUM_MONTH_TIER_1:case P.Xh.PREMIUM_YEAR_TIER_1:case P.Xh.PREMIUM_MONTH_TIER_2:case P.Xh.PREMIUM_YEAR_TIER_2:case P.Xh.PREMIUM_3_MONTH_TIER_2:case P.Xh.PREMIUM_6_MONTH_TIER_2:return(0,v.Gf)(e.subscriptionPlanId,i,r,t);case P.Xh.PREMIUM_3_MONTH_GUILD:case P.Xh.PREMIUM_6_MONTH_GUILD:return A.Z.Messages.PREMIUM_GUILD_NUM_MULTI_MONTHS_GUILD_SUBSCRIPTIONS.format({num:e.quantity,intervalCount:n.intervalCount});case P.Xh.PREMIUM_MONTH_GUILD:return A.Z.Messages.PREMIUM_GUILD_NUM_MONTH_GUILD_SUBSCRIPTIONS.format({num:e.quantity});case P.Xh.PREMIUM_YEAR_GUILD:return A.Z.Messages.PREMIUM_GUILD_NUM_YEAR_GUILD_SUBSCRIPTIONS.format({num:e.quantity})}switch(n.interval){case P.rV.MONTH:return 1===n.intervalCount?A.Z.Messages.MONTHLY_GUILD_SUBSCRIPTION.format({planName:n.name}):A.Z.Messages.MULTI_MONTHS_GUILD_SUBSCRIPTION.format({planName:n.name,intervalCount:n.intervalCount});case P.rV.YEAR:
return A.Z.Messages.YEARLY_GUILD_SUBSCRIPTION.format({planName:n.name})}throw new Error("Unexpected invoice plan: ".concat(e.subscriptionPlanId))}(r,h,p,N);!0===a&&(b=(0,t.jsxs)("div",{className:L().invoiceItemLabelWithIcon,children:[(0,t.jsxs)("div",{children:[b," "]}),(0,t.jsx)(u.Tooltip,{text:A.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TOOLTIP.format(),"aria-label":A.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TEXT,tooltipClassName:L().invoiceItemTooltip,children:function(e){return(0,t.jsx)(_.Z,y(S({},e),{className:L().invoiceItemLabelIcon}))}})]}));var R=(0,f.T4)(null!=i?i:r.amount,s),O=p?R:(0,f.og)(R,h.interval,h.intervalCount);return(0,t.jsx)(M.i$,{label:b,value:O,originalAmount:r.subscriptionPlanPrice*r.quantity,discounts:r.discounts,interval:h.interval,intervalCount:h.intervalCount,currency:s,className:c})}function j(e){var n=e.label,r=e.tooltipText,i=e.tooltipAriaLabel;return(0,t.jsxs)("div",{className:L().invoiceItemLabelWithIcon,
children:[n,(0,t.jsx)(u.Tooltip,{clickableOnMobile:!0,text:r,"aria-label":i,tooltipClassName:L().invoiceItemTooltip,children:function(e){return(0,t.jsx)(_.Z,y(S({},e),{className:L().invoiceItemLabelIcon}))}})]})}function w(e){var n=e.invoice,r=e.isPrepaidPaymentSource,i=(0,E.j)(n.invoiceItems),a=i.find((function(e){return!(0,v.eh)(e.subscriptionPlanId)&&e.amount>=0})),s=i.find((function(e){return(0,v.eh)(e.subscriptionPlanId)&&e.amount>=0})),c=(0,o.e7)([d.Z],(function(){return null!=s?d.Z.get(s.subscriptionPlanId):null})),l=null!=s?s.amount:0,u=(0,f.T4)(l,n.currency),I=null!=c?(0,f.og)(u,c.interval,c.intervalCount):0;return(0,t.jsxs)(t.Fragment,{children:[null!=a?(0,t.jsx)(C,{invoiceItem:a,currency:n.currency,isPrepaidPaymentSource:r}):null,0!==l&&null!=s&&null!=c?(0,t.jsx)(M.R$,{label:A.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_INVOICE_ROW_CONTENT.format({numGuildSubscriptions:s.quantity,planName:(0,v.Gf)(c.id,!1,r)}),value:r?u:I}):null,(0,t.jsx)(N.Z,{invoice:n}),(0,
t.jsx)(M.KU,{}),(0,t.jsx)(M.Ji,{label:(n.taxInclusive?r?A.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:A.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:A.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:n.currency===b.pKx.USD?(0,f.T4)(n.total,n.currency):"".concat((0,f.T4)(n.total,n.currency),"*")})]})}function D(e){var n=e.invoice,r=e.newPlan,i=e.isPrepaidPaymentSource,a=e.referralTrialOfferId,s=(0,E.j)(n.invoiceItems),c=s.find((function(e){return e.subscriptionPlanId===r.id}));l()(null!=c,"Expected newPlanInvoiceItem");var o=s.find((function(e){return!(0,v.eh)(e.subscriptionPlanId)&&e.amount<0})),u=s.find((function(e){return null==e.subscriptionPlanId&&null!=e.discounts&&e.discounts.find((function(e){return e.type===I.eW.PREMIUM_LEGACY_UPGRADE_PROMOTION}))})),d=x(c,I.eW.PREMIUM_TRIAL),p=c.quantity*c.subscriptionPlanPrice,_=c.amount+(null!=o?o.amount:0)-p+(null!=u?u.amount:0),T=s.filter((function(e){
return e.subscriptionPlanId===P.Xh.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_YEAR_GUILD})).reduce((function(e,n){return e+n.amount}),0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C,{invoiceItem:c,currency:n.currency,overrideAmount:p,isPrepaidPaymentSource:i,referralTrialOfferId:a}),0===_||d?null:(0,t.jsx)(M.R$,{label:(0,t.jsx)(j,{label:A.Z.Messages.PREMIUM_SUBSCRIPTION_PLAN_ADJUSTMENT.format({planName:(0,v.PV)(r.id)?(0,v.aq)(r.id):r.name}),tooltipText:A.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,f.T4)(_,n.currency)}),0!==T?(0,t.jsx)(M.R$,{label:(0,t.jsx)(j,{label:A.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT,tooltipText:A.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TOOLTIP.format(),tooltipAriaLabel:A.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT_TEXT}),value:(0,f.T4)(T,n.currency)}):null,(0,t.jsx)(N.Z,{invoice:n}),(0,t.jsx)(M.KU,{}),(0,t.jsx)(M.Ji,{
label:(n.taxInclusive?i?A.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:A.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:A.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:n.currency===b.pKx.USD?(0,f.T4)(n.total,n.currency):"".concat((0,f.T4)(n.total,n.currency),"*")})]})}function B(e){var n=e.slice();n.sort((function(e,n){var r=(0,v.uZ)(e.subscriptionPlanId),t=(0,v.uZ)(n.subscriptionPlanId);return r&&!t?-1:!r&&t?1:0}));return n}function Z(e){return e.filter((function(e){var n=e.subscriptionPlanId;return n!==P.Xh.NONE_MONTH&&n!==P.Xh.NONE_YEAR}))}function G(e){var n=e.proratedInvoice,r=e.renewalInvoice,i=(0,v.dn)(n),a=i.intervalType,s=i.intervalCount,c=(0,v.dn)(r),l=c.intervalType,o=c.intervalCount;return a!==l||s!==o||n.subscriptionPeriodEnd.getTime()===r.subscriptionPeriodStart.getTime()?null:(0,t.jsx)("div",{className:L().subscriptionPeriodResetNotice,children:A.Z.Messages.PREMIUM_SUBSCRIPTION_PERIOD_RESET_NOTICE.format({renewalDate:n.subscriptionPeriodEnd})})}
function Y(e){var n=e.isUpdate,r=e.currentInvoice,i=e.newInvoice,a=null!=r?(0,E.j)(r.invoiceItems):null,c=null!=r?(0,v.dn)(r):null,l=(0,v.dn)(i),o=l.intervalType,u=l.intervalCount,I=null!=c&&(c.intervalType!==o||c.intervalCount!==u);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.KU,{extended:!0}),null!=r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.q9,{children:A.Z.Messages.PREMIUM_SUBSCRIPTION_CURRENT_LABEL}),Z(B((0,E.j)(r.invoiceItems))).map((function(e){return(0,t.jsx)(C,{invoiceItem:e,currency:r.currency},e.id)})),(0,t.jsx)(M.KU,{extended:!0})]}):null,(0,t.jsx)(M.q9,{children:A.Z.Messages.PREMIUM_SUBSCRIPTION_NEW_LABEL}),Z(B((0,E.j)(i.invoiceItems))).map((function(e){var r=null!=a&&!a.some((function(n){return n.subscriptionPlanId===e.subscriptionPlanId&&n.quantity===e.quantity}));return(0,t.jsx)(C,{invoiceItem:e,currency:i.currency,
showGuildSubscriptionAdjustmentTooltip:I&&(e.subscriptionPlanId===P.Xh.PREMIUM_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_YEAR_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_3_MONTH_GUILD||e.subscriptionPlanId===P.Xh.PREMIUM_6_MONTH_GUILD),className:s()(U({},L().subscriptionAddedInvoiceItem,!n||r))},e.id)})),(0,t.jsx)(N.Z,{invoice:i}),(0,t.jsx)(M.KU,{}),(0,t.jsx)(M.R$,{label:A.Z.Messages.PREMIUM_SUBSCRIPTION_NEW_TOTAL,value:(0,f.og)((0,f.T4)(i.total,i.currency),o,u),className:L().subscriptionCostRow})]})}function k(e){var n,r=e.proratedInvoice,i=e.renewalInvoice,a=e.isTrial,s=e.isUpdate,c=e.overrideRenewalDate,l=e.trialFooterMessageOverride,o=null===(n=(0,m.N)())||void 0===n?void 0:n.subscription_trial,u=(0,v.dn)(i),I=u.intervalType,d=u.intervalCount;if(a){var p=(0,v.if)({intervalType:null==o?void 0:o.interval,intervalCount:null==o?void 0:o.interval_count}),_=(null==o?void 0:o.interval)===P.rV.DAY&&(null==o?void 0:o.interval_count)<28?2:7;return(0,t.jsx)(t.Fragment,{
children:null!=l?l:A.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER_TRIAL_DURATION.format({duration:p,days:_,contactLink:b.EYA.CONTACT,helpdeskArticle:T.Z.getArticleURL(b.BhN.PREMIUM_TRIAL)})})}var h=i.taxInclusive?A.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER:A.Z.Messages.PREMIUM_SUBSCRIPTION_RENEWAL_FOOTER_TAX_EXCLUSIVE;return(0,t.jsx)(t.Fragment,{children:h.format({rate:(0,f.og)((0,f.T4)(i.subtotal,i.currency),I,d),renewalDate:null!=c?c:s?null!=r?r.subscriptionPeriodEnd:i.subscriptionPeriodStart:i.subscriptionPeriodEnd,contactLink:b.EYA.CONTACT,helpdeskArticle:T.Z.getArticleURL(b.BhN.BILLING)})})}function H(e){var n=e.premiumSubscription,r=e.proratedInvoice,a=e.renewalInvoice,s=e.overrideRenewalDate,c=e.isUpdate,l=void 0!==c&&c,o=e.isTrial,I=void 0!==o&&o,d=e.priceOptions,_=void 0===d?void 0:d,T=e.isPrepaidPaymentSource,v=void 0!==T&&T,f=e.trialFooterMessageOverride,E=e.hideSubscriptionDetails,m=void 0!==E&&E,N=S({subscriptionId:null==n?void 0:n.id,renewal:!0,preventFetch:!l
},_),P=g((0,h.ED)(N),1)[0],b=g(i.useState(!1),2),R=b[0],O=b[1];return(0,t.jsxs)(t.Fragment,{children:[v?null:(0,t.jsx)(M.HE,{children:(0,t.jsx)(k,{proratedInvoice:r,renewalInvoice:a,isTrial:I,isUpdate:l,overrideRenewalDate:s,trialFooterMessageOverride:f})}),!m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.Clickable,{onClick:function(){return O((function(e){return!e}))},className:L().subscriptionDetailsToggle,children:[R?A.Z.Messages.PREMIUM_SUBSCRIPTION_HIDE_DETAILS:A.Z.Messages.PREMIUM_SUBSCRIPTION_SHOW_DETAILS,(0,t.jsx)(p.Z,{direction:R?p.Z.Directions.UP:p.Z.Directions.DOWN,className:L().subscriptionDetailsToggleCaret})]}),R?(0,t.jsx)(Y,{isUpdate:l,currentInvoice:P,newInvoice:a}):null]})]})}function W(e){var n=e.plan,r=e.className,i=e.paymentSourceId,a=e.isPrepaidPaymentSource,s=void 0!==a&&a,c=(0,v.aS)(n.id,!1,!0,{paymentSourceId:i});return(0,t.jsx)(M.PO,{className:r,children:(0,t.jsx)(M.R$,{label:A.Z.Messages.BILLING_INVOICE_GIFT_PLAN.format({planName:(0,v.Gf)(n.id,!1,s)}),
value:(0,f.T4)(c.amount,c.currency),className:L().subscriptionCostRow})})}function F(e){var n=e.invoice,r=e.plan,i=(0,E.j)(n.invoiceItems).find((function(e){return e.subscriptionPlanId===r.id}));l()(null!=i,"newPlanInvoiceItem can not be null");if(r.interval===P.rV.MONTH)return(0,t.jsx)(u.Text,{variant:"text-md/normal",children:A.Z.Messages.BILLING_TRIAL_MONTHLY_PRICE_AFTER_TRIAL.format({price:(0,f.T4)(i.subscriptionPlanPrice,n.currency)})});if(r.interval===P.rV.YEAR)return(0,t.jsx)(u.Text,{variant:"text-md/normal",children:A.Z.Messages.BILLING_TRIAL_YEARLY_PRICE_AFTER_TRIAL.format({price:(0,f.T4)(i.subscriptionPlanPrice,n.currency)})});l()(!1,"Invalid interval type")}}}]);
//# sourceMappingURL=bb5c6b0c3ab58d4b52ed.js.map