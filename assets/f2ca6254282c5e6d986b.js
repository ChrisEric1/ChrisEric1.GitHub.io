(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{1417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(1)),a=u(r(5)),o=s(r(127)),i=u(r(1282));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d=function(e){var t,r;function u(){return e.apply(this,arguments)||this}return r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,u.prototype.render=function(){var e=this.props,t=e.className,r=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["className"]);return n.createElement(o.default,c({},r,{className:(0,a.default)(i.default.formStatusAlert,t)}))},u}(n.Component);t.default=d,d.displayName="FormStatusAlert",d.Types=o.AlertTypes},1435:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),o=d(r(5)),i=r(420),u=r(74),l=d(r(182)),s=r(3),c=d(r(1285));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var v={DEFAULT:"default",INVERTED:"inverted",GHOST:"ghost"},m={BOX:c.default.box,ROUND:c.default.round},h=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={focused:!1},t.handleFocus=function(){t.setState({focused:!0})},t.handleBlur=function(){t.setState({focused:!1})},t.handleChange=function(e){var r=t.props,n=r.onChange,a=r.name;null!=n&&n(e.currentTarget.checked,a)},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.getInputMode=function(){return this.props.disabled?"disabled":this.props.readOnly?"readonly":"default"},a.getStyle=function(){var e=this.props,t=e.value,r=e.type,n=e.color,a=this.props.style||{};if(!1===t)return a;switch(a=y({},a),r){case v.DEFAULT:a.borderColor=n;break;case v.GHOST:a.borderColor=(0,i.hex2rgb)(n,.15),a.backgroundColor=(0,i.hex2rgb)(n,.15);break;case v.INVERTED:a.backgroundColor=n,a.borderColor=n}return a},a.getColor=function(){var e=this.props,t=e.value,r=e.type,n=e.color,a=r===v.INVERTED?s.Colors.WHITE:n;return r===v.INVERTED&&n===s.Colors.WHITE&&(a=s.Colors.BLACK),t?a:"transparent"},a.render=function(){var e,t=this.state.focused,r=this.props,n=r.disabled,a=r.readOnly,i=r.value,d=r.shape,p=r.className,v=r.children,m=r.size;return f("label",{className:(0,o.default)((0,u.getClass)(c.default,"checkboxWrapper",n?"disabled":""),p),style:{height:m}},void 0,f("input",{className:(0,u.getClass)(c.default,"input",this.getInputMode()),type:"checkbox",onChange:n||a?s.NOOP:this.handleChange,onFocus:n||a?s.NOOP:this.handleFocus,onBlur:this.handleBlur,checked:i,style:{width:m,height:m}}),f("div",{className:(0,o.default)(c.default.checkbox,d,(e={},e[c.default.checked]=i,e[c.default.focused]=t,e)),style:y({width:m,height:m},this.getStyle())},void 0,f(l.default,{name:l.default.Names.CHECKMARK,width:18,height:18,color:this.getColor()})),v?f("div",{className:c.default.label,style:{lineHeight:m+"px"}},void 0,v):null)},n}(a.PureComponent);h.displayName="Checkbox",h.Types=v,h.Shapes=m,h.defaultProps={size:24,disabled:!1,readOnly:!1,value:!1,type:v.DEFAULT,color:s.Colors.WHITE,shape:m.BOX,onChange:s.NOOP};var C=h;t.default=C},1555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(12)),a=o(r(19));o(r(20));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=[];var l=new(function(e){var t,r,n,a,o;function l(){return e.apply(this,arguments)||this}return r=e,(t=l).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n=l,(a=[{key:"paymentSources",get:function(){return u}}])&&i(n.prototype,a),o&&i(n,o),l}(n.default.Store))(a.default,{PAYMENT_SOURCES_FETCH_SUCCESS:function(e){var t;t=e.paymentSources,u=t},PAYMENT_SOURCE_CREATE_SUCCESS:function(e){var t;t=e.paymentSource,u=[].concat(u,[t])}});t.default=l},1556:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),o=u(r(5)),i=u(r(1369));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var c=Object.freeze({UNKNOWN:"unknown",VISA:"visa",DISCOVER:"discover",MASTERCARD:"mastercard",AMEX:"amex",PAYPAL:"paypal"}),d={SMALL:i.default.cardIconSmall,MEDIUM:i.default.cardIconMedium,LARGE:i.default.cardIconLarge,XLARGE:i.default.cardIconXLarge},p=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.getType=function(e){if(null==e)return c.UNKNOWN;var t=e.replace(/[^a-z]/gi,"").toUpperCase();return c[t]||c.UNKNOWN},n.prototype.render=function(){var e,t=this.props,r=t.flipped,n=t.type,a=t.className,u=t.size;return s("div",{className:(0,o.default)(u,i.default[n],a,(e={},e[i.default.flipped]=r,e))},void 0,n)},n}(a.PureComponent);t.default=p,p.displayName="PaymentSourceIcon",p.Types=c,p.Sizes=d,p.defaultProps={size:d.SMALL,flipped:!1}},1728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=M(r(1)),o=b(r(5)),i=r(73),u=r(1448),l=b(r(12)),s=b(r(128)),c=b(r(429)),d=M(r(127)),p=b(r(56)),f=b(r(1430)),y=r(424),v=b(r(58)),m=b(r(1417)),h=b(r(412)),C=b(r(410)),_=b(r(415)),S=b(r(413)),P=b(r(2368)),E=r(3),g=M(r(18)),A=b(r(1374));function b(e){return e&&e.__esModule?e:{default:e}}function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function M(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function N(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function T(e){var t,r=e.onBuyClick,n=e.purchaseDisabled,a=N(p.default,{className:(0,o.default)(A.default.heroButton,(t={},t[p.default.Styles.DISABLED]=n,t)),color:p.default.Color.WHITE,onClick:n?null:r},void 0,g.Messages.DeveloperLicense.BUTTON_BUY);return N(C.default,{className:A.default.hero},void 0,N("div",{className:A.default.heroImage}),N(_.default,{},void 0,g.Messages.DeveloperLicense.HERO_HEADING),N("p",{},void 0,g.Messages.DeveloperLicense.HERO_YOU_CAN),N("ul",{},void 0,N("li",{},void 0,g.Messages.DeveloperLicense.FEATURE_IN_SERVER_STORE_PAGES),N("li",{},void 0,g.Messages.DeveloperLicense.FEATURE_ALPHA_BETA_TESTING)),N("div",{className:A.default.priceUnit},void 0,N("div",{className:A.default.priceCopy},void 0,(0,u.formatPrice)(E.APPLICATION_LICENSE_PRICE,E.CurrencyCodes.USD,g.default.getLocale(),{minimumFractionDigits:0,maximumFractionDigits:0})),n?N(f.default,{text:g.Messages.DeveloperLicense.APPLICATION_MUST_BE_OWNED_BY_TEAM,position:f.default.Positions.TOP},void 0,N("div",{},void 0,a)):a))}function R(){return N("div",{},void 0,N(_.default,{},void 0,g.Messages.DeveloperLicense.BODY_HEADER),N("div",{className:A.default.description},void 0,N("p",{},void 0,g.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_1),N("p",{},void 0,g.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_2),N("p",{},void 0,g.Messages.DeveloperLicense.DESCRIPTION_PARAGRAPH_3.format({documentationURL:v.default.prependBasename(E.Routes.DOCS_GAME_AND_SERVER_MANAGEMENT_HOW_TO_GET_YOUR_GAME_ON_DISCORD)}))))}T.displayName="Hero",R.displayName="Body";var D=N(R,{}),I=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={isPaymentModalOpen:!1},t.handleLicensePurchase=function(){v.default.transitionTo(E.Routes.CHECKLIST(t.props.match.params.id))},t.handleRequestPaymentModalClose=function(){t.setState({isPaymentModalOpen:!1})},t.handleHeroBuyClick=function(){t.setState({isPaymentModalOpen:!0})},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.renderAlert=function(){var e=this.props.application;if(!(0,y.isTeamApplication)(e))return N(m.default,{type:m.default.Types.WARNING},void 0,g.Messages.DeveloperLicense.NOT_TEAM_APPLICATION.format({documentationURL:v.default.prependBasename(E.Routes.DOCS_TOPICS_TEAMS)}))},a.render=function(){var e=this.props,t=e.application,r=e.hasUnconsumedLicense,n=e.match,a=this.state.isPaymentModalOpen,o=n.params.id;return r?N(i.Redirect,{to:E.Routes.CHECKLIST(o)}):N("div",{},void 0,N(C.default,{},void 0,N(h.default,{},void 0,g.Messages.DeveloperLicense.DEVELOPER_LICENSE_HEADING),N(S.default,{isFlush:!0},void 0,g.Messages.DeveloperLicense.DEVELOPER_LICENSE_SUBHEADING),this.renderAlert(),N(d.default,{className:A.default.alert,type:d.AlertTypes.ERROR},void 0,g.Messages.DeveloperLicense.SUBMISSIONS_PAUSED_DEV_LICENSE.format({gameSubmissionHelpURL:E.Links.GAME_SUBMISSION_PAUSED_HELP_CENTER}))),N(T,{onBuyClick:this.handleHeroBuyClick,purchaseDisabled:!(0,y.isTeamApplication)(t)}),D,N(P.default,{onPurchaseComplete:this.handleLicensePurchase,productName:g.Messages.DeveloperLicense.APPLICATION_LICENSE_PRODUCT_NAME,productPrice:E.APPLICATION_LICENSE_PRICE,productCurrency:E.CurrencyCodes.USD,isOpen:a,onRequestClose:this.handleRequestPaymentModalClose}))},n}(a.Component);I.displayName="DeveloperLicense";var w=l.default.connectStores([s.default,c.default],function(e){var t=e.match.params.id;return{application:s.default.getApplication(t),hasUnconsumedLicense:c.default.hasUnconsumedLicenseEntitlement()}})(I);t.default=w},1729:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureStripeIsLoaded=d,t.ensureStripeV3IsLoaded=p,t.formatStripeErrors=function(e){return Object.keys(e).reduce(function(t,r){return t.push(e[r]),t},[]).join(", ")},t.authenticatePaymentIntentForPaymentId=function(e){return f.apply(this,arguments)};var n=i(r(59)),a=i(r(2370)),o=r(3);function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,a)}var l=Object.freeze({REQUIRES_PAYMENT_METHOD:"requires_payment_method",REQUIRES_CONFIRMATION:"requires_confirmation",REQUIRES_ACTION:"requires_action",PROCESSING:"processing",CANCELED:"canceled",SUCCEEDED:"succeeded"}),s="https://js.stripe.com/v2/";a.default.register(s,"Stripe");var c="https://js.stripe.com/v3/";function d(){return a.default.ensure(s).then(function(e){return e.setPublishableKey(o.PaymentSettings.STRIPE.KEY),e})}function p(){return d().then(function(){return a.default.ensure(c).then(function(e){return e(o.PaymentSettings.STRIPE.KEY)})})}function f(){var e;return e=regeneratorRuntime.mark(function e(t){var r,a,i,u,s,c,d,f,y,v,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.default.get(o.Endpoints.BILLING_STRIPE_PAYMENT_INTENTS(t)),p()]);case 3:return a=e.sent,i=a[0],u=a[1],s=i.body.stripe_payment_intent_client_secret,e.next=9,u.retrievePaymentIntent(s);case 9:if(c=e.sent,d=c.error,f=c.paymentIntent,null==d){e.next=14;break}return e.abrupt("return",{error:d.message});case 14:y={},f.status===l.REQUIRES_PAYMENT_METHOD&&null!=(null===(r=f.last_payment_error)||void 0===r?void 0:r.payment_method)&&(y.payment_method=f.last_payment_error.payment_method.id),e.t0=f.status,e.next=e.t0===l.REQUIRES_PAYMENT_METHOD?19:e.t0===l.REQUIRES_CONFIRMATION?19:e.t0===l.REQUIRES_ACTION?19:e.t0===l.SUCCEEDED?28:e.t0===l.PROCESSING?28:(e.t0,l.CANCELED,29);break;case 19:return e.next=21,u.handleCardPayment(s,y);case 21:if(v=e.sent,null==(m=v.error)){e.next=27;break}return e.abrupt("return",{error:m.message});case 27:case 28:return e.abrupt("return",{});case 29:return e.abrupt("return",{error:"Invalid Payment Intent status: "+f.status});case 30:e.next=35;break;case 32:return e.prev=32,e.t1=e.catch(0),e.abrupt("return",{error:e.t1.message});case 35:case"end":return e.stop()}},e,null,[[0,32]])}),(f=function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,l,"next",e)}function l(e){u(o,n,a,i,l,"throw",e)}i(void 0)})}).apply(this,arguments)}a.default.register(c,"Stripe")},1794:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=u(r(12)),i=u(r(19));u(r(20));function u(e){return e&&e.__esModule?e:{default:e}}var l=new(function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.getClient=function(){return n},i.getPayPalClient=function(){return a},o}(o.default.Store))(i.default,{BRAINTREE_CREATE_CLIENT_SUCCESS:function(e){var t=e.client;n=t},BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS:function(e){var t=e.paypalClient;a=t},BRAINTREE_TEARDOWN_PAYPAL_CLIENT:function(e){a=null}});t.default=l},2368:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentModalSteps=void 0;var n,a=S(r(1)),o=C(r(12)),i=S(r(2369)),u=C(r(1555)),l=r(97),s=S(r(188)),c=C(r(2371)),d=C(r(2375)),p=C(r(2378)),f=C(r(2563)),y=C(r(2565)),v=C(r(2566)),m=r(3),h=r(18);function C(e){return e&&e.__esModule?e:{default:e}}function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function S(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function P(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var g=[h.Messages.PaymentModal.PAYMENT_TYPE,h.Messages.PaymentModal.PAYMENT_INFORMATION,h.Messages.PaymentModal.ADDRESS,h.Messages.PaymentModal.REVIEW],A={SELECT_PAYMENT_SOURCE_TYPE:0,COLLECT_PAYMENT_SOURCE_DATA:1,COLLECT_ADDRESS_DATA:2,REVIEW_DETAILS:3};t.PaymentModalSteps=A;var b={isSubmitting:!1,paymentSourceType:null,hasAcceptedTerms:!1,error:null,braintreeNonce:"",creditCardData:{cardNumber:"",expirationDate:"",cvc:"",name:""},billingAddressData:{name:"",country:"",city:"",line1:"",line2:"",state:"",postalCode:""}};function O(e){return 0===e.length?A.SELECT_PAYMENT_SOURCE_TYPE:A.REVIEW_DETAILS}var M=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state=E({currentStep:O(t.props.paymentSources),isLoading:!0},b),t.handleRequestClose=function(){var e=t.props,r=e.onRequestClose,n=e.paymentSources;t.state.isSubmitting||(t.setState(E({currentStep:O(n)},b)),r())},t.startAddNewPaymentSource=function(){t.setState({currentStep:A.SELECT_PAYMENT_SOURCE_TYPE})},t.handleCreateNewPaymentSource=function(e){var r=t.state,n=r.creditCardData,a=r.paymentSourceType,o=r.braintreeNonce,u=r.billingAddressData;t.setState({isSubmitting:!0},function(){var r=e;if(a===m.PaymentSourceTypes.CARD)return r.name=n.name,i.createCardPaymentSource({type:m.PaymentSourceTypes.CARD,cardNumber:n.cardNumber,cvc:n.cvc,expirationDate:n.expirationDate,billingAddress:r}).then(t.handleCreatePaymentSourceSuccess).catch(t.handleCreatePaymentSourceError);r.name=u.name,i.createPaypalPaymentSource(o,r).then(t.handleCreatePaymentSourceSuccess).catch(function(e){t.handleCreatePaymentSourceError((0,l.getMessageFromAPIError)(e,h.Messages.Errors.ERROR_CREATING_PAYMENT_SOURCE.format()))})})},t.handleCreatePaymentSourceSuccess=function(){t.setState({currentStep:t.state.currentStep+1,isSubmitting:!1,error:null})},t.handleCreatePaymentSourceError=function(e){t.setState({error:e,isSubmitting:!1})},t.purchaseLicense=function(e){t.setState({isSubmitting:!0},function(){i.purchaseApplicationLicense(e).then(function(){t.setState({isSubmitting:!1},function(){t.handleRequestClose();var e=t.props.onPurchaseComplete;null!=e&&e()})}).catch(function(e){t.setState({isSubmitting:!1,error:(0,l.getMessageFromAPIError)(e,h.Messages.Errors.ERROR_PURCHASING_LICENSE.format())})})})},t.handlePreviousClick=function(e){var r=t.state,n=r.currentStep,a=r.paymentSourceType,o=n-1;switch(n){case A.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:A.REVIEW_DETAILS});case A.COLLECT_PAYMENT_SOURCE_DATA:return a===m.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:o,error:null}):t.setState({currentStep:o,error:null});case A.COLLECT_ADDRESS_DATA:return t.setState({billingAddressData:e,currentStep:o,error:null});default:t.setState({currentStep:o,error:null})}},t.handleNextClick=function(e){var r=t.state,n=r.currentStep,a=r.paymentSourceType,o=n+1;switch(n){case A.SELECT_PAYMENT_SOURCE_TYPE:return t.setState({currentStep:o,paymentSourceType:e});case A.COLLECT_PAYMENT_SOURCE_DATA:return a===m.PaymentSourceTypes.CARD?t.setState({creditCardData:e,currentStep:o}):t.setState({currentStep:o,braintreeNonce:e.nonce,billingAddressData:e.billingAddress});case A.COLLECT_ADDRESS_DATA:return t.handleCreateNewPaymentSource(e);case A.REVIEW_DETAILS:t.purchaseLicense(e)}},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.componentDidMount=function(){var e=this;i.fetchPaymentSources().then(function(t){e.setState({isLoading:!1,currentStep:O(t)})})},o.renderErrorMessage=function(){var e=this.state.error;return null==e?null:P(s.ModalAlert,{},void 0,e)},o.renderModalContent=function(){var e=this.state,t=e.currentStep,r=e.creditCardData,n=e.isSubmitting,o=e.paymentSourceType,i=e.billingAddressData,u={currentStep:t,onRequestClose:this.handleRequestClose,onPreviousClick:this.handlePreviousClick,onNextClick:this.handleNextClick};switch(t){case A.SELECT_PAYMENT_SOURCE_TYPE:return a.createElement(v.default,u);case A.COLLECT_PAYMENT_SOURCE_DATA:return o===m.PaymentSourceTypes.CARD?a.createElement(d.default,E({},u,r)):a.createElement(p.default,u);case A.COLLECT_ADDRESS_DATA:return a.createElement(c.default,E({},u,i,{isSubmitting:n}));case A.REVIEW_DETAILS:return a.createElement(y.default,E({},u,{isSubmitting:n,handleAddPaymentSource:this.startAddNewPaymentSource}));default:return null}},o.render=function(){var e=this.props,t=e.isOpen,r=e.productName,n=e.productPrice,a=e.productCurrency,o=this.state,i=o.isLoading,u=o.currentStep;return i?null:P(s.default,{open:t,onRequestClose:this.handleRequestClose},void 0,P(f.default,{productName:r,productPrice:n,productCurrency:a,modalSteps:g,currentStep:u},void 0,this.renderErrorMessage()),this.renderModalContent())},n}(a.Component);M.displayName="PaymentModal";var N=o.default.connectStores([u.default],function(){return{paymentSources:u.default.paymentSources}})(M);t.default=N},2369:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCardPaymentSource=function(e){return p.apply(this,arguments)},t.createPaypalPaymentSource=function(e,t){return f(l.PaymentGateways.BRAINTREE,e,t).catch(o.APIErrorHandler)},t.purchaseApplicationLicense=t.fetchPaymentSources=t.createPaymentSource=void 0;var n=s(r(59)),a=s(r(19)),o=r(97),i=r(1729),u=s(r(20)),l=r(3);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){c(o,n,a,i,u,"next",e)}function u(e){c(o,n,a,i,u,"throw",e)}i(void 0)})}}function p(){return(p=d(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return r=e.sent,e.abrupt("return",f(l.PaymentGateways.STRIPE,r.id,t.billingAddress).catch(i.formatStripeErrors));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var f=function(e,t,r){return n.default.post({url:l.Endpoints.PAYMENT_SOURCES,body:{payment_gateway:e,token:t,billing_address:{name:r.name,line_1:r.line1,line_2:r.line2,city:r.city,state:r.state,postal_code:r.postalCode,country:r.country}}}).then(function(e){a.default.dispatch({type:u.default.PAYMENT_SOURCE_CREATE_SUCCESS,paymentSource:e.body})})};t.createPaymentSource=f;t.fetchPaymentSources=function(){return n.default.get({url:l.Endpoints.PAYMENT_SOURCES}).then(function(e){return a.default.dispatch({type:u.default.PAYMENT_SOURCES_FETCH_SUCCESS,paymentSources:e.body}),e.body})};var y=function(){var e=d(regeneratorRuntime.mark(function e(t){var r,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.default.post({url:l.Endpoints.PURCHASE_SKU(l.APPLICATION_LICENSE_SKU_ID),body:{payment_source_id:t,expected_amount:l.APPLICATION_LICENSE_PRICE}});case 3:r=e.sent,a.default.dispatch({type:u.default.ENTITLEMENT_CREATE_SUCCESS,entitlements:r.body.entitlements}),e.next=19;break;case 7:if(e.prev=7,e.t0=e.catch(0),(s=new o.APIError(e.t0)).code!==l.APIErrorCodes.AUTHENTICATION_REQUIRED){e.next=18;break}return e.next=13,(0,i.authenticatePaymentIntentForPaymentId)(e.t0.body.payment_id);case 13:if(null==(c=e.sent).error){e.next=16;break}throw c.error;case 16:e.next=19;break;case 18:throw s;case 19:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();function v(e){return m.apply(this,arguments)}function m(){return(m=d(regeneratorRuntime.mark(function e(t){var r,n,a,o,u,s,c,d,p,f,y,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===l.PaymentSourceTypes.CARD){e.next=2;break}throw new Error("Stripe is only for Card types");case 2:return e.next=4,(0,i.ensureStripeIsLoaded)();case 4:return r=e.sent,n=t.cardNumber,a=t.cvc,o=t.expirationDate,u=t.billingAddress,s=u.name,c=u.line1,d=u.line2,p=u.city,f=u.state,y=u.postalCode,v=u.country,e.abrupt("return",new Promise(function(e,t){r.card.createToken({number:n,cvc:a,exp:o,name:s,address_line1:c,address_line2:d,address_city:p,address_state:f,address_zip:y,address_country:v},function(r,n){200===r&&null!=n&&n.id?e(n):t(n)})}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.purchaseApplicationLicense=y},2370:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=new Map,a=new Map,o=3e3;function i(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var u={ensure:function(e){var t=n.get(e);return t||(t=function(e){return new Promise(function(t,r){var u=!1,l=a.get(e),s=function(){u||(u=!0,i(c),clearTimeout(d),n.delete(e),r(new Error("script error")))},c=document.createElement("script");c.async=1,c.type="text/javascript",c.onload=function(){return i(c),clearTimeout(d),l&&window[l]?t(window[l]):l&&!window[l]?r(new Error("globalKey does not exist in window")):void t()},c.onerror=s,c.src=e,document.body.appendChild(c);var d=setTimeout(s,o)})}(e),n.set(e,t),t)},register:function(e,t){a.set(e,t)}};t.default=u},2371:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=C(r(1)),i=m(r(2372)),u=m(r(2373)),l=m(r(2374)),s=C(r(408)),c=m(r(183)),d=m(r(411)),p=m(r(414)),f=m(r(409)),y=r(188),v=r(18);function m(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function C(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=u.default.map(function(e){return{value:e.code,label:e.name}}),P=((n={}).US=l.default,n.CA=i.default,n),E=["country","state","line1","city","postalCode"],g=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={country:t.props.country,state:t.props.state,line1:t.props.line1,line2:t.props.line2,city:t.props.city,postalCode:t.props.postalCode,errors:{}},t.handleCountryChange=function(e){t.setState({country:e.value})},t.handleStateChange=function(e){t.setState({state:e.value})},t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({country:r.country,state:r.state,line1:r.line1,line2:r.line2,city:r.city,postalCode:r.postalCode})},t.handleNextStep=function(){var e=t.props.onNextClick;t.isFormValid()&&e(t.state)},t.handleFieldChange=function(e,r){var n,a=t.state.errors;null!=r&&(null!=a[r]&&delete a[r],t.setState(((n={})[r]=e,n)))},t.renderStateField=function(){var e=t.state,r=e.country,n=e.state,a=e.errors,o=null==r?null:P[r];return null!=o?_(c.default,{options:o,onChange:t.handleStateChange,value:n,error:a.state}):_(d.default,{onChange:t.handleFieldChange,name:"state",value:n,error:a.state})},t.renderForm=function(){var e=t.state,r=e.country,n=e.line1,a=e.line2,o=e.city,i=e.postalCode,u=e.errors;return _(p.default,{},void 0,_(s.default,{},void 0,_(s.GridSection,{},void 0,_(s.GridChild,{columnSpread:12},void 0,_(f.default,{},void 0,v.Messages.Address.COUNTRY),_(c.default,{onChange:t.handleCountryChange,options:S,value:r,error:u.country})),_(s.GridChild,{columnSpread:12},void 0,_(f.default,{},void 0,v.Messages.Address.ADDRESS_1),_(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_1_PLACEHOLDER,name:"line1",value:n,error:u.line1})),_(s.GridChild,{columnSpread:12},void 0,_(f.default,{},void 0,v.Messages.Address.ADDRESS_2),_(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.ADDRESS_2_PLACEHOLDER,name:"line2",value:a})),_(s.GridChild,{columnSpread:12},void 0,_(f.default,{},void 0,v.Messages.Address.CITY),_(d.default,{onChange:t.handleFieldChange,placeholder:v.Messages.Address.CITY_PLACEHOLDER,name:"city",value:o,error:u.city})),_(s.GridChild,{columnSpread:6},void 0,_(f.default,{},void 0,v.Messages.Address.STATE),t.renderStateField()),_(s.GridChild,{columnSpread:6},void 0,_(f.default,{},void 0,v.Messages.Address.POSTAL_CODE),_(d.default,{onChange:t.handleFieldChange,name:"postalCode",value:i,error:u.postalCode})))))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.isFormValid=function(){var e=this,t={};return E.forEach(function(r){""===e.state[r]&&(t[r]=v.Messages.PaymentModal.FIELD_REQUIRED)}),this.setState({errors:t}),0===Object.keys(t).length},a.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting;return _(o.Fragment,{},void 0,_(y.ModalContent,{},void 0,this.renderForm()),_(y.ModalFooter,{},void 0,_(y.ModalBack,{onClick:this.handlePreviousStep},void 0,v.Messages.Actions.BACK),_(y.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),_(y.ModalConfirm,{submitting:r,onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))},n}(o.Component);t.default=g,g.displayName="AddressForm"},2375:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=C(r(1)),i=m(r(12)),u=m(r(1555)),l=C(r(408)),s=m(r(411)),c=r(1729),d=m(r(414)),p=m(r(409)),f=r(188),y=m(r(2376)),v=r(18);function m(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function C(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(e,t,r,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,a)}function S(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var P=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={cardNumber:t.props.cardNumber,expirationDate:t.props.expirationDate,cvc:t.props.cvc,name:t.props.name,errors:{}},t.handleFieldChange=function(e,r){var n,a=t.state.errors;null!=r&&(null!=a[r]&&delete a[r],t.setState(((n={})[r]=e,n.errors=a,n)))},t.handleNextStep=function(){var e=t.props.onNextClick,r=t.state,n=r.cardNumber,a=r.expirationDate,o=r.cvc,i=r.name;t.isFormValid()&&e({cardNumber:n,expirationDate:a,cvc:o,name:i})},t.handlePreviousStep=function(){var e=t.props.onPreviousClick,r=t.state;e({cardNumber:r.cardNumber,expirationDate:r.expirationDate,cvc:r.cvc,name:r.name})},t.renderCreditCardForm=function(){var e=t.state,r=e.cardNumber,n=e.expirationDate,a=e.cvc,o=e.name,i=e.errors;return S(d.default,{},void 0,S(l.default,{},void 0,S(l.GridSection,{},void 0,S(l.GridChild,{columnSpread:12},void 0,S(p.default,{},void 0,v.Messages.PaymentModal.CREDIT_CARD_NUMBER),S(y.default,{name:"cardNumber",onChange:t.handleFieldChange,value:r,error:i.cardNumber,placeholder:v.Messages.PaymentModal.CREDIT_CARD_PLACEHOLDER})),S(l.GridChild,{columnSpread:6},void 0,S(p.default,{},void 0,v.Messages.PaymentModal.EXPIRATION_DATE),S(s.default,{name:"expirationDate",onChange:t.handleFieldChange,value:n,error:i.expirationDate,placeholder:v.Messages.PaymentModal.EXPIRATION_PLACEHOLDER})),S(l.GridChild,{columnSpread:6},void 0,S(p.default,{},void 0,v.Messages.PaymentModal.CVC),S(s.default,{name:"cvc",onChange:t.handleFieldChange,value:a,error:i.cvc,placeholder:v.Messages.PaymentModal.CVC_PLACEHOLDER})),S(l.GridChild,{columnSpread:12},void 0,S(p.default,{},void 0,v.Messages.PaymentModal.NAME_ON_CARD),S(s.default,{name:"name",onChange:t.handleFieldChange,value:o,error:i.name,placeholder:v.Messages.PaymentModal.NAME_PLACEHOLDER})))))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.ensureStripeIsLoaded)();case 2:a=e.sent;case 3:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){_(o,n,a,i,u,"next",e)}function u(e){_(o,n,a,i,u,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),i.isFormValid=function(){var e=this.state,t=e.cardNumber,r=e.expirationDate,n=e.cvc,o=e.name;if(null==a)return!1;var i={};return a.card.validateCardNumber(t)||(i.cardNumber=v.Messages.PaymentModal.INVALID_CARD_NUMBER),a.card.validateExpiry(r)||(i.expirationDate=v.Messages.PaymentModal.INVALID_EXPIRATION_DATE),a.card.validateCVC(n)||(i.cvc=v.Messages.PaymentModal.INVALID_CVC),""===o&&(i.name=v.Messages.PaymentModal.INVALID_NAME),this.setState({errors:i}),0===Object.keys(i).length},i.render=function(){var e=this.props,t=e.onRequestClose,r=e.paymentSources;return S(o.Fragment,{},void 0,S(f.ModalContent,{},void 0,this.renderCreditCardForm()),S(f.ModalFooter,{},void 0,r.length>0?S(f.ModalBack,{onClick:this.handlePreviousStep},void 0,v.Messages.Actions.BACK):null,S(f.ModalCancel,{onClick:t},void 0,v.Messages.Actions.CANCEL),S(f.ModalConfirm,{onClick:this.handleNextStep},void 0,v.Messages.Actions.NEXT)))},n}(o.Component);P.displayName="NewCreditCardForm";var E=i.default.connectStores([u.default],function(){return{paymentSources:u.default.paymentSources}})(P);t.default=E},2376:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),o=c(r(5)),i=c(r(411)),u=c(r(2377)),l=c(r(1556)),s=c(r(1370));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var y=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).selectionStart=0,t.setRef=function(e){var r=t.props.inputRef;t._inputRef=e,null!=r&&r(e)},t.handleChange=function(e,r){var n=t.props,a=n.value,o=n.onChange,i=t._inputRef;if(e!==a&&null!=i&&null!=a){var l=u.default.prettifyCreditCardNumber(e),s=i.selectionStart;if(a===l)s-=1,l=u.default.prettifyCreditCardNumber(l.substring(0,s)+l.substring(s+1));else{var c=l.length-e.length;c>0&&(s+=c)}t.selectionStart=s,null!=o&&o(l,r)}},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.componentDidUpdate=function(e){var t=this._inputRef;e.value!==this.props.value&&null!=t&&t.setSelectionRange(this.selectionStart,this.selectionStart)},c.getMaxLength=function(e){var t=null!=e?u.default.getCreditCardType(e):u.default.DEFAULT_CARD_TYPE;return t.lengths[t.lengths.length-1]+t.gaps.length},c.render=function(){var e=this.props,t=e.value,r=e.flipped,n=e.inputClassName,c=e.className,d=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["value","flipped","inputClassName","className"]),y=u.default.getCreditCardType(t),v=this.getMaxLength(t);return f("div",{className:(0,o.default)(s.default.cardNumberWrapper,c)},void 0,f(l.default,{className:s.default.cardIcon,type:y.type,flipped:r}),a.createElement(i.default,p({},d,{value:u.default.prettifyCreditCardNumber(t),onChange:this.handleChange,inputRef:this.setRef,maxLength:v,inputClassName:(0,o.default)(s.default.cardNumberInput,n)})))},n}(a.PureComponent);y.displayName="CardNumberField",y.defaultProps={flipped:!1};var v=y;t.default=v},2377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(1730))&&n.__esModule?n:{default:n};var o={type:"",gaps:[4,8,12],lengths:[16],code:{name:"CVV",size:3}},i=/[^0-9]/g,u=/[^0-9\/]/g;function l(e){for(var t=s(e).split(""),r=c(e),n=0;n<r.gaps.length;){var a=r.gaps[n]+n;if(!(a<t.length))break;t.splice(a,0," "),n+=1}return t.join("")}function s(e){return e.replace(i,"")}function c(e){var t=s(e);return t&&(0,a.default)(t)[0]||o}var d={DEFAULT_CARD_TYPE:o,prettifyCreditCardNumber:l,formatCreditCardNumber:function(e){var t=s(e);return c(t),l(t)},getCreditCardType:c,cleanCardNumber:s,validateCardNumber:function(e){var t=c(e);if(null==t)throw new Error("Could not recognize card type.");if(!t.lengths.includes(e.length))throw new Error("Card number length is incorrect.")},getTypeInfo:function(e){return a.default.getTypeInfo(e)},formatExpiration:function(e){var t=e.replace(u,"").split("/"),r=t[0],n=t[1],a=[];return parseInt(r,10)>12&&(r=r.substring(0,1)),a.push(r),(parseInt(r,10)>1||2===r.length||n)&&a.push("/"),n&&parseInt(n,10)>99&&(n=(n+"").substring(0,2)),a.push(n),a.join("")}};t.default=d},2378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=C(r(1)),o=m(r(12)),i=C(r(2379)),u=m(r(1794)),l=m(r(56)),s=C(r(408)),c=m(r(411)),d=m(r(409)),p=r(188),f=m(r(1556)),y=r(18),v=m(r(1310));function m(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function C(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function S(e,t,r,n,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,a)}function P(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){S(o,n,a,i,u,"next",e)}function u(e){S(o,n,a,i,u,"throw",e)}i(void 0)})}}var E=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleTokenizePayPal=P(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.onNextClick,e.next=3,i.tokenizePayPal();case 3:null!=(n=e.sent)&&r(n);case 5:case"end":return e.stop()}},e)})),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.componentDidMount=function(){var e=this;i.createClient().catch(function(){e.setState({errorMessage:y.Messages.PaymentModal.ERROR_CONNECTING_TO_PAYPAL})})},o.componentDidUpdate=function(e){var t=this.props.paypalClient;null==e.paypalClient&&null!=t&&this.handleTokenizePayPal()},o.componentWillUnmount=function(){i.teardown()},o.render=function(){var e=this.props,t=e.onRequestClose,r=e.onPreviousClick;return _(a.Fragment,{},void 0,_(p.ModalContent,{},void 0,_(d.default,{},void 0,y.Messages.PaymentModal.PAYPAL_ACCOUNT),_(s.default,{},void 0,_(s.GridSection,{},void 0,_(s.GridChild,{columnSpread:12},void 0,_("div",{className:v.default.inputWrapper},void 0,_(f.default,{className:v.default.cardIcon,type:f.default.Types.PAYPAL}),_(c.default,{inputClassName:v.default.textInput,value:y.Messages.PaymentModal.CONFIRM_PAYPAL_IN_BROWSER,disabled:!0})))))),_(p.ModalFooter,{},void 0,_(p.ModalBack,{onClick:r},void 0,y.Messages.Actions.BACK),_(p.ModalCancel,{onClick:t},void 0,y.Messages.Actions.CANCEL),_(l.default,{onClick:this.handleTokenizePayPal,look:l.default.Look.OUTLINED},void 0,y.Messages.PaymentModal.REOPEN_WINDOW)))},n}(a.Component);E.displayName="NewPayPalForm";var g=o.default.connectStores([u.default],function(){return{paypalClient:u.default.getPayPalClient()}})(E);t.default=g},2379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=function(){return n.default.client.create({authorization:u.PaymentSettings.BRAINTREE.KEY}).then(function(e){return a.default.dispatch({type:i.default.BRAINTREE_CREATE_CLIENT_SUCCESS,client:e}),s()})},t.createPayPalClient=s,t.tokenizePayPal=function(){var e=o.default.getPayPalClient();if(null==e)throw new Error("braintree paypal client must be initialized before calling this");return e.tokenize({flow:"vault"}).then(function(e){var t=e.details,r=t.email,n=t.firstName,a=t.lastName,o=t.billingAddress;return{nonce:e.nonce,email:r,billingAddress:{name:n+" "+a,line1:o.line1,line2:o.line2,city:o.city,state:o.state,country:o.countryCode,postalCode:o.postalCode}}}).catch(function(e){var t=e.code;if(t!==u.BraintreeErrors.PAYPAL_POPUP_CLOSED)throw new Error})},t.teardown=function(){var e=o.default.getPayPalClient();if(null==e)return Promise.resolve();a.default.dispatch({type:i.default.BRAINTREE_TEARDOWN_PAYPAL_CLIENT});try{return e.teardown()}catch(e){return Promise.resolve()}};var n=l(r(2380)),a=l(r(19)),o=l(r(1794)),i=l(r(20)),u=r(3);function l(e){return e&&e.__esModule?e:{default:e}}function s(){var e=o.default.getClient();if(null==e)throw new Error("braintree client must be initialized before calling this");return n.default.paypal.create({client:e}).then(function(e){return a.default.dispatch({type:i.default.BRAINTREE_CREATE_PAYPAL_CLIENT_SUCCESS,paypalClient:e})})}},2414:function(e,t){},2416:function(e,t){},2446:function(e,t){},2447:function(e,t){},2563:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;y(r(1));var n,a=r(1448),o=p(r(133)),i=p(r(29)),u=r(188),l=p(r(2564)),s=r(3),c=y(r(18)),d=p(r(1372));function p(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function v(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function m(e){var t=e.productName,r=e.productPrice,n=e.productCurrency,p=e.modalSteps,f=e.currentStep,y=e.children;return v("div",{className:d.default.headerWrap},void 0,v(u.ModalHeader,{},void 0,c.Messages.PaymentModal.PURCHASE_LICENSE),v("div",{className:d.default.productDetailWrapper},void 0,v("div",{className:d.default.productDetails},void 0,v(o.default,{src:s.Images.ASSET_DEFAULT_AVATAR_1}),v(i.default,{color:i.default.Colors.WHITE,className:d.default.productName},void 0,t)),v("div",{className:d.default.price},void 0,(0,a.formatPrice)(r,n,c.default.getLocale()))),y,v(l.default,{steps:p,currentStep:f}),v(u.ModalDivider,{className:d.default.divider}))}m.displayName="PaymentModalHeader"},2564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=c(r(1)),o=c(r(182)),i=l(r(29)),u=l(r(1371));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function d(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var p=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).renderSteps=function(){var e=t.props,r=e.steps,n=e.currentStep;return r.map(function(e,t){return d(a.Fragment,{},t,d(i.default,{color:n===t?i.default.Colors.WHITE:i.default.Colors.PRIMARY_400,size:i.default.Sizes.SMALL},void 0,e),t===r.length-1?null:d(o.default,{name:o.IconNames.ARROW_RIGHT,height:22,width:16,className:u.default.arrowIcon}))})},t}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){return d("div",{className:u.default.stepTracker},void 0,this.renderSteps())},n}(a.Component);t.default=p,p.displayName="StepTracker"},2565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=P(r(1)),o=_(r(12)),i=_(r(1555)),u=_(r(56)),l=_(r(1435)),s=P(r(408)),c=_(r(183)),d=_(r(58)),p=_(r(414)),f=_(r(409)),y=r(188),v=_(r(1556)),m=r(3),h=r(18),C=_(r(1310));function _(e){return e&&e.__esModule?e:{default:e}}function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function E(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var g="ADD_PAYMENT_SOURCE",A=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={selectedPaymentSource:t.props.paymentSources.length>0?t.props.paymentSources[0].id:null,hasAcceptedTerms:!1},t.handleAcceptTermsClick=function(){t.setState(function(e){return{hasAcceptedTerms:!e.hasAcceptedTerms}})},t.handleSelectPaymentSource=function(e){var r=t.props.handleAddPaymentSource;e.value!==g?t.setState({selectedPaymentSource:e.value}):r()},t.handleSubmitPayment=function(){var e=t.props.onNextClick,r=t.state.selectedPaymentSource;null!=r&&e(r)},t.renderOptionWithIcon=function(e){return null==e.type?e.label:E("div",{className:C.default.paymentSelectOption},void 0,E(v.default,{type:e.type}),E("span",{className:C.default.selectOptionLabel},void 0,e.label))},t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getPaymentSelectOptions=function(){var e=this.props.paymentSources.map(function(e){return e.type===m.PaymentSourceTypes.PAYPAL?{value:e.id,label:e.email,type:v.default.Types.PAYPAL}:{value:e.id,label:h.Messages.PaymentModal.CARD_ENDING_IN.format({lastFour:e.last_4}),type:e.brand.toLowerCase()}});return e.push({label:h.Messages.PaymentModal.ADD_PAYMENT_SOURCE,value:g,type:null}),e},o.render=function(){var e=this.props,t=e.onRequestClose,r=e.isSubmitting,n=this.state,o=n.selectedPaymentSource,i=n.hasAcceptedTerms;return E(a.Fragment,{},void 0,E(y.ModalContent,{},void 0,E(p.default,{},void 0,E(s.default,{},void 0,E(s.GridSection,{},void 0,E(s.GridChild,{columnSpread:12},void 0,E(f.default,{},void 0,h.Messages.PaymentModal.PAY_WITH),E(c.default,{valueRenderer:this.renderOptionWithIcon,optionRenderer:this.renderOptionWithIcon,options:this.getPaymentSelectOptions(),value:o,onChange:this.handleSelectPaymentSource,clearable:!1})),E(s.GridChild,{columnSpread:12},void 0,E(f.default,{},void 0,h.Messages.PaymentModal.LEGAL_MUMBO_JUMBO),E(l.default,{value:i,onChange:this.handleAcceptTermsClick},void 0,h.Messages.PaymentModal.AGREE_TO_DISTRIBUTION_AGREEMENT.format({link:d.default.prependBasename(m.Routes.DOCS_STORE_DISTRIBUTION_AGREEMENT)}))))))),E(y.ModalFooter,{},void 0,E(y.ModalCancel,{onClick:t,disabled:r},void 0,h.Messages.Actions.CANCEL),E(y.ModalConfirm,{color:u.default.Color.GREEN,onClick:this.handleSubmitPayment,disabled:!i||null==o,submitting:r},void 0,h.Messages.Actions.PAY)))},n}(a.Component);A.displayName="ReviewPayment";var b=o.default.connectStores([i.default],function(){return{paymentSources:i.default.paymentSources}})(A);t.default=b},2566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=C;var n,a=m(r(1)),o=r(12),i=y(r(1555)),u=m(r(408)),l=y(r(409)),s=r(188),c=y(r(2567)),d=r(3),p=r(18),f=y(r(1310));function y(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function h(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function C(e){var t=e.onRequestClose,r=e.onPreviousClick,n=e.onNextClick,y=(0,o.useStateFromStores)([i.default],function(){return i.default.paymentSources});return h(a.Fragment,{},void 0,h(s.ModalContent,{},void 0,h(l.default,{},void 0,p.Messages.PaymentModal.PAY_WITH),h(u.default,{},void 0,h(u.GridSection,{},void 0,h(u.GridChild,{columnSpread:6},void 0,h(c.default,{className:f.default.paymentButton,onClick:n,type:d.PaymentSourceTypes.CARD})),h(u.GridChild,{columnSpread:6},void 0,h(c.default,{className:f.default.paymentButton,onClick:n,type:d.PaymentSourceTypes.PAYPAL}))))),h(s.ModalFooter,{},void 0,y.length>0?h(s.ModalBack,{onClick:r},void 0,p.Messages.Actions.BACK):null,h(s.ModalCancel,{onClick:t},void 0,p.Messages.Actions.CANCEL)))}C.displayName="SelectPaymentSource"},2567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(1)),i=d(r(56)),u=d(r(1556)),l=r(3),s=r(18),c=d(r(1373));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e,t,r,n){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var y=((n={})[l.PaymentSourceTypes.CARD]={icon:u.default.Types.UNKNOWN,copy:s.Messages.PaymentModal.CREDIT_CARD},n[l.PaymentSourceTypes.PAYPAL]={icon:u.default.Types.PAYPAL,copy:s.Messages.PaymentModal.PAYPAL},n),v=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleClick=function(){var e=t.props;(0,e.onClick)(e.type)},t}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.type,r=e.className,n=y[t];return f(i.default,{className:r,height:i.default.Height.MEDIUM,onClick:this.handleClick},void 0,f("div",{className:c.default.innerPaymentButtonWrap},void 0,f(u.default,{type:n.icon,className:c.default.paymentSourceIcon}),n.copy))},n}(o.Component);t.default=v,v.displayName="PaymentSourceButton"}}]);
//# sourceMappingURL=f2ca6254282c5e6d986b.js.map