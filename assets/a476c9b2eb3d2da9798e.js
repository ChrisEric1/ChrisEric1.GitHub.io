"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[43569],{43569:(t,e,n)=>{n.r(e);n.d(e,{default:()=>b});var r=n(785893),s=n(667294),o=n(202351),a=n(945460),i=n(673679),c=n(458823),u=n(652591),l=n(249052),f=n(799105),A=n(2590),p=n(473708),T=n(962727),h=n.n(T);function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e,n,r,s,o,a){try{var i=t[o](a),c=i.value}catch(t){n(t);return}i.done?e(c):Promise.resolve(c).then(r,s)}function C(t){return function(){var e=this,n=arguments;return new Promise((function(r,s){var o=t.apply(e,n);function a(t){E(o,r,s,a,i,"next",t)}function i(t){E(o,r,s,a,i,"throw",t)}a(void 0)}))}}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t){S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return S(t)}function M(t,e){
return!e||"object"!==y(e)&&"function"!=typeof e?d(t):e}function _(t,e){_=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return _(t,e)}var y=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=S(t);if(e){var s=S(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return M(this,n)}}var L,m=function(t,e){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){
if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;(r=0,s)&&(o=[2&o[0],s.value]);switch(o[0]){case 0:case 1:s=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(s=a.trys,s=s.length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1];s=o;break}if(s&&a.label<s[2]){a.label=s[2];a.ops.push(o);break}s[2]&&a.ops.pop();a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t];r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};!function(t){t[t.START=0]="START";t[t.FAIL=1]="FAIL";t[t.SUCCESS=2]="SUCCESS";t[t.CANCELED=3]="CANCELED"}(L||(L={}));var O=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&_(t,e)}(n,t);var e=I(n);function n(){N(this,n);var t;(t=e.apply(this,arguments)).state={step:L.START};var r=d(t);t.close=C((function(){var t,e,n,s;return m(this,(function(o){switch(o.label){case 0:t=r.state.step;e=r.props,n=e.onClose,s=e.pendingPayment;return t!==L.START?[3,2]:[4,(0,i.UY)(s.id)];case 1:o.sent();o.label=2;case 2:n();return[2]}}))}));var s=d(t);t.cancelPayment=C((function(){var t,e;return m(this,(function(n){switch(n.label){case 0:t=s.props.pendingPayment;n.label=1;case 1:n.trys.push([1,3,,4]);return[4,(0,i.UY)(t.id)];case 2:n.sent();return[3,4];case 3:e=n.sent();s.setState({step:L.CANCELED});throw e;case 4:s.setState({step:L.CANCELED});return[2]}}))}));var o=d(t);t.handleAuthenticate=C((function(){var t,e;return m(this,(function(n){switch(n.label){case 0:
t=o.props.pendingPayment;return[4,(0,f.oe)(t.id)];case 1:e=n.sent();null!=e.error?o.setState({step:L.FAIL}):o.setState({step:L.SUCCESS});return[2]}}))}));return t}var o=n.prototype;o.componentDidMount=function(){u.default.track(A.rMx.OPEN_MODAL,{type:A.jXE.PAYMENT_AUTHENTICATION_MODAL})};o.componentWillUnmount=function(){u.default.track(A.rMx.MODAL_DISMISSED,{type:A.jXE.PAYMENT_AUTHENTICATION_MODAL})};o.getTitle=function(){switch(this.state.step){case L.START:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE;case L.SUCCESS:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_SUCCESS;case L.CANCELED:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_CANCELED;case L.FAIL:default:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_TITLE_FAIL}};o.getImageStyle=function(){switch(this.state.step){case L.START:return h().authenticationRequiredImage;case L.SUCCESS:return h().authenticationSuccessImage;case L.CANCELED:case L.FAIL:default:return h().authenticationFailImage}}
;o.getMessage=function(){var t=this.state.step,e=this.props.pendingPayment;switch(t){case L.START:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_START.format({price:(0,l.T4)(e.amount,e.currency),item:e.description});case L.SUCCESS:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_SUCCESS;case L.CANCELED:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_CANCELED.format({item:e.description});case L.FAIL:default:return p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_FAIL}};o.renderButtons=function(){var t=this.state.step,e=this.props.disableAuthentication;switch(t){case L.START:return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(a.Button,{color:a.ButtonColors.BRAND,disabled:e,onClick:this.handleAuthenticate,children:p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_BUTTON}),(0,r.jsx)(a.Button,{look:a.Button.Looks.LINK,size:a.Button.Sizes.NONE,color:a.Button.Colors.PRIMARY,onClick:this.cancelPayment,className:h().cancelButton,children:p.Z.Messages.PAYMENT_AUTHENTICATION_MODAL_BUTTON_CANCEL_PAYMENT})]})
;case L.SUCCESS:case L.CANCELED:case L.FAIL:default:return(0,r.jsx)(a.Button,{color:a.ButtonColors.BRAND,onClick:this.close,children:p.Z.Messages.CLOSE})}};o.render=function(){var t=this.props.transitionState;return(0,r.jsxs)(a.ModalRoot,{transitionState:t,className:h().modal,size:a.ModalSize.SMALL,"aria-label":this.getTitle(),children:[(0,r.jsxs)(a.ModalHeader,{children:[(0,r.jsx)(a.Heading,{variant:"heading-lg/semibold",children:(0,r.jsx)("span",{className:h().modalTitle,children:this.getTitle()})}),(0,r.jsx)(a.ModalCloseButton,{className:h().closeIcon,onClick:this.close})]}),(0,r.jsxs)(a.ModalContent,{className:h().content,children:[(0,r.jsx)("div",{className:this.getImageStyle()}),(0,r.jsx)(a.Text,{variant:"text-md/normal",children:this.getMessage()})]}),(0,r.jsx)(a.ModalFooter,{className:h().footer,children:this.renderButtons()})]})};return n}(s.Component);const b=o.ZP.connectStores([c.Z],(function(){return{disableAuthentication:c.Z.isAwaitingAuthentication}}))(O)}}]);
//# sourceMappingURL=a476c9b2eb3d2da9798e.js.map