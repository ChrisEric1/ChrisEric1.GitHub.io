"use strict";(this.webpackChunkdiscord_developers=this.webpackChunkdiscord_developers||[]).push([[8214],{71177:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r,u=R(n(67294)),s=n(55558),a=M(n(36211)),o=R(n(18760)),i=M(n(75520)),d=M(n(77545)),l=M(n(62103)),f=M(n(41908)),c=M(n(92974)),p=M(n(31055)),h=M(n(81061)),S=M(n(91464)),v=M(n(86750)),m=M(n(86460)),k=M(n(43973)),b=M(n(58350)),y=M(n(69245)),g=M(n(62441)),O=R(n(84455)),_=M(n(74257)),C=n(70348),j=n(34596),D=M(n(36422)),E=["item"];function M(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){
var a=u?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e;n&&n.set(e,r);return r}function B(e,t,n,u){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var s=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=u;else if(a>1){for(var o=new Array(a),i=0;i<a;i++)o[i]=arguments[i+3];t.children=o}if(t&&s)for(var d in s)void 0===t[d]&&(t[d]=s[d]);else t||(t=s||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function P(){P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return P.apply(this,arguments)}function A(e,t){A=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return A(e,t)}var U=function(e){return null!=e&&null!=e.bundled_skus?e.bundled_skus:[]},N=B(S.default,{}),F=function(e){!function(e,t){
e.prototype=Object.create(t.prototype);e.prototype.constructor=e;A(e,t)}(t,e);function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];(t=e.call.apply(e,[this].concat(r))||this).formRef=u.createRef();t.state={bundledSkus:[],hasLoadingError:!1,hasSubmitted:!1,hasSubmissionError:!1,hasUnsavedChanges:!1,isLoading:!0,isSubmitting:!1};t.getBundledSkuOptions=function(){var e=t.props,n=e.match,r=e.skus,u=t.state.bundledSkus;return null==r?[]:r.filter((function(e){return e.type!==C.SkuTypes.BUNDLE&&e.id!==n.params.skuId&&!u.some((function(t){return t.id===e.id}))})).map((function(e){return{label:e.name.default,value:e.id}}))};t.handleSkuAdd=function(e){var n=e.value,r=t.props.skus;null!=r&&t.setState((function(e){var t=r.find((function(e){return e.id===n}));return{bundledSkus:null!=t?e.bundledSkus.concat(t):e.bundledSkus}}),t.handleFormChange)};t.handleSkuRemove=function(e){t.setState((function(t){return{bundledSkus:t.bundledSkus.filter((function(t){
return t.id!==e.id}))}}),t.handleFormChange)};t.handleFormChange=function(){t.state.hasUnsavedChanges||t.setState({hasUnsavedChanges:!0})};t.handleFormReset=function(){var e=t.props.sku;null!=t.formRef.current&&t.formRef.current.resetForm();t.setState({hasUnsavedChanges:!1,bundledSkus:U(e)})};t.handleFormSubmit=function(){var e=t.props.match.params,n=e.id,r=e.skuId,u=t.state.bundledSkus;t.setState({isSubmitting:!0},(function(){o.updateSku(n,r,{bundled_skus:u.map((function(e){return e.id}))}).then((function(){t.setState({isSubmitting:!1,hasSubmissionError:!1,hasSubmitted:!0,hasUnsavedChanges:!1})})).catch((function(){t.setState({isSubmitting:!1,hasSubmissionError:!0,hasSubmitted:!1})}))}))};return t}var n=t.prototype;n.componentDidMount=function(){var e=this,t=this.props.match.params.id;o.fetchSkus(t,{withBundledSkus:!0}).then((function(){e.setState({isLoading:!1,bundledSkus:U(e.props.sku)})})).catch((function(){e.setState({isLoading:!1,hasLoadingError:!0})}))};n.renderRow=function(e){
var t=e.item,n=function(e,t){if(null==e)return{};var n,r,u={},s=Object.keys(e);for(r=0;r<s.length;r++){n=s[r];t.indexOf(n)>=0||(u[n]=e[n])}return u}(e,E);return u.createElement(l.default,P({},n,{sku:t}))};n.renderBundledSkus=function(){var e=this.state.bundledSkus,t=this.props.skus;return B(v.default,{},void 0,B(m.default,{},void 0,j.Messages.BundledSkus.ADDED_SKUS),B(k.default,{},void 0,j.Messages.BundledSkus.ADDED_SKUS_DESCRIPTION),null!=t&&e.length>0?B(i.default,{getId:function(e){return e.id},onDelete:this.handleSkuRemove,data:e,renderRow:this.renderRow}):B(d.default,{},void 0,j.Messages.BundledSkus.NO_BUNDLED_SKUS))};n.renderFormStatus=function(){var e=this.state,t=e.hasSubmissionError,n=e.hasSubmitted;return t?B(p.default,{type:p.default.Types.ERROR},void 0,j.Messages.BundledSkus.SUBMISSION_ERROR):n?B(p.default,{type:p.default.Types.SUCCESS},void 0,j.Messages.Alerts.SUCCESS_CHANGES_SAVED):null};n.renderPageContent=function(){
return this.state.isLoading?N:B(O.default,{},void 0,B(O.GridSection,{},void 0,B(O.GridChild,{columnSpread:12},void 0,B(c.default,{},void 0,j.Messages.BundledSkus.ADD_SKU),B(_.default,{className:D.default.restrictedWidth,clearable:!1,onChange:this.handleSkuAdd,options:this.getBundledSkuOptions()}))),B(O.GridSection,{},void 0,B(O.GridChild,{columnSpread:12},void 0,B(c.default,{},void 0,j.Messages.BundledSkus.ADDED_SKUS),this.renderBundledSkus())))};n.render=function(){var e=this.props.sku,t=this.state,n=t.hasUnsavedChanges,r=t.isSubmitting;return null==e?null:u.createElement(f.default,{onChange:this.handleFormChange,onSubmit:this.handleFormSubmit,ref:this.formRef},B(h.default,{},void 0,j.Messages.BundledSkus.HEADING),B(b.default,{},void 0,j.Messages.BundledSkus.SUBHEADING),this.renderFormStatus(),B(v.default,{},void 0,B(_.default,{className:D.default.restrictedWidth,clearable:!1,onChange:this.handleSkuAdd,options:this.getBundledSkuOptions()})),B(v.default,{isFlush:!0
},void 0,this.renderBundledSkus()),B(y.default,{isVisible:n,onReset:this.handleFormReset,submitting:r}))};return t}(u.Component);F.displayName="BundledSkus";var I=(0,s.withRouter)(a.default.connectStores([g.default],(function(e){var t=e.match.params,n=t.id,r=t.skuId;return{sku:g.default.getSku(r),skus:g.default.getSkus(n)}}))(F));t.default=I},31055:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var r=l(n(67294)),u=i(n(94184)),s=l(n(34704)),a=i(n(49839)),o=["className"];function i(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){
var a=u?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e;n&&n.set(e,r);return r}function f(){f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};return f.apply(this,arguments)}function c(e,t){c=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return c(e,t)}var p=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;c(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}t.prototype.render=function(){var e=this.props,t=e.className,n=function(e,t){if(null==e)return{};var n,r,u={},s=Object.keys(e);for(r=0;r<s.length;r++){n=s[r];t.indexOf(n)>=0||(u[n]=e[n])}return u}(e,o);return r.createElement(s.default,f({},n,{className:(0,u.default)(a.default.formStatusAlert,t)}))};return t}(r.Component);t.default=p;p.displayName="FormStatusAlert";p.Types=s.AlertTypes}}]);
//# sourceMappingURL=8033d751cb41a76ca306.js.map