"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[21373],{579194:(t,n,r)=>{r.d(n,{FD:()=>C,Zy:()=>O,ss:()=>I,S2:()=>v,Mn:()=>h,ol:()=>y,V3:()=>G,I5:()=>g,UZ:()=>b,cV:()=>P,b9:()=>D,si:()=>m,W3:()=>Z,P6:()=>w,_V:()=>L});var e=r(611345),o=r(281110),i=r(630631),a=r(575945),u=r(744564),c=r(571690),_=r(784426),T=r(652591),E=r(775173),S=r(488110),s=r(120415),l=r(2590),f=r(473708);function N(t,n,r,e,o,i,a){try{var u=t[i](a),c=u.value}catch(t){r(t);return}u.done?n(c):Promise.resolve(c).then(e,o)}function A(t){return function(){var n=this,r=arguments;return new Promise((function(e,o){var i=t.apply(n,r);function a(t){N(i,e,o,a,u,"next",t)}function u(t){N(i,e,o,a,u,"throw",t)}a(void 0)}))}}function p(t,n,r){n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r;return t}function d(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},e=Object.keys(r)
;"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))));e.forEach((function(n){p(t,n,r[n])}))}return t}var U=function(t,n){var r,e,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;(e=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;e=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}
if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t];e=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function C(){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_INIT"})}function O(){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_CLOSE"})}function I(t,n){var r=n?f.Z.Messages.DELETE_ACCOUNT:f.Z.Messages.DISABLE_ACCOUNT,e=n?l.ANM.DELETE_ACCOUNT:l.ANM.DISABLE_ACCOUNT;return(0,S.Z)((function(n){return o.Z.post({url:e,body:d({password:t},n),oldFormErrors:!0})}),{modalProps:{title:r},checkEnabled:!1}).then((function(){u.Z.dispatch({type:"LOGOUT"});(0,_.uL)(l.Z5c.DEFAULT_LOGGED_OUT)}))}function v(t){return R.apply(this,arguments)}function R(){return(R=A((function(t){var n,r,e;return U(this,(function(i){switch(i.label){case 0:return[4,(0,c.withCaptchaInterceptor)((function(n){
return o.Z.patch({url:l.ANM.ME,oldFormErrors:!0,body:d({},t,n)})}))];case 1:n=i.sent();if((r=n.body).token){e=r.token;delete r.token;u.Z.dispatch({type:"UPDATE_TOKEN",token:e,userId:r.id});null!=(null==t?void 0:t.password)&&null!=(null==t?void 0:t.new_password)&&u.Z.dispatch({type:"PASSWORD_UPDATED",userId:r.id})}u.Z.dispatch({type:"CURRENT_USER_UPDATE",user:r});return[2,n]}}))}))).apply(this,arguments)}function h(t){var n=t.username,r=t.discriminator,o=t.email,a=t.emailToken,c=t.password,_=t.avatar,N=t.avatarDecoration,A=t.newPassword,p=t.globalName;u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SUBMIT"});return(0,S.Z)((function(t){var u=d({username:n,email:o,email_token:a,password:c,avatar:_,discriminator:r,global_name:p,new_password:A},t);(0,e.EQ)(N).with(null,(function(){u.avatar_decoration_preset=null})).with({data:e.P.string},(function(t){var n=t.data;u.avatar_decoration=n})).with({hash:e.P.string,sku:{id:e.P.string}},(function(t){var n=t.hash,r=t.sku
;u.avatar_decoration_id="c:".concat(null==r?void 0:r.id,":").concat(n)})).with({id:e.P.string},(function(t){u.avatar_decoration_preset=null==t?void 0:t.id})).otherwise(l.dG4);var T=i.Z.get(l.JkL),E=(0,s.xJ)();if(null!=E&&null!=T){u.push_provider=E;u.push_token=T}var S=i.Z.get(l.scU);if(null!=l.mvA&&null!=S){u.push_voip_provider=l.mvA;u.push_voip_token=S}return v(u)}),{checkEnabled:!1,modalProps:{title:f.Z.Messages.TWO_FA_CHANGE_ACCOUNT},hooks:{onEarlyClose:function(){return u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE",errors:{}})}}}).then((function(t){var n=t.body;T.default.track(l.rMx.USER_AVATAR_UPDATED,{animated:(0,E.xR)(n.avatar)});u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SUBMIT_SUCCESS"});return t}),(function(t){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE",errors:t.body});return t}))}function y(){return o.Z.get({url:l.ANM.USER_HARVEST,oldFormErrors:!0})}function G(){return o.Z.post({url:l.ANM.USER_HARVEST,oldFormErrors:!0})}function g(t){u.Z.dispatch({
type:"USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR",avatar:t});null==t?a.uv.announce(f.Z.Messages.A11Y_ANNOUNCEMENT_AVATAR_NONE):a.uv.announce(f.Z.Messages.A11Y_ANNOUNCEMENT_AVATAR_CHANGED)}function b(t){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SET_PENDING_GLOBAL_NAME",globalName:t})}function P(t){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR_DECORATION",avatarDecoration:t})}function D(){u.Z.dispatch({type:"USER_SETTINGS_CLEAR_ERRORS"})}function m(){u.Z.dispatch({type:"USER_SETTINGS_RESET_PENDING_ACCOUNT_CHANGES"})}function Z(){u.Z.dispatch({type:"USER_SETTINGS_RESET_ALL_PENDING"})}function w(){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_RESET_AND_CLOSE_FORM"})}function L(t){u.Z.dispatch({type:"USER_SETTINGS_ACCOUNT_SET_DISABLE_SUBMIT",disable:t})}},973646:(t,n,r)=>{r.d(n,{P:()=>i});var e=r(945460),o=r(473708);function i(){(0,e.showToast)((0,e.createToast)(o.Z.Messages.USER_SETTINGS_UPDATE_FAILURE,e.ToastType.FAILURE))}},450383:(t,n,r)=>{r.d(n,{Z:()=>Z})
;var e=r(202351),o=r(744564),i=r(2590);function a(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return u(t)}function c(t,n){return!n||"object"!==T(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _(t,n){_=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return _(t,n)}var T=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var r,e=u(t);if(n){var o=u(this).constructor
;r=Reflect.construct(e,arguments,o)}else r=e.apply(this,arguments);return c(this,r)}}var S,s,l,f,N,A,p,d,U,C,O,I,v=i.QZA.CLOSED,R={},h=!1;function y(){v=i.QZA.OPEN;R={}}function G(){v=i.QZA.CLOSED;R={}}function g(){b();P();R={}}function b(){S=void 0;s=void 0;l=void 0}function P(){f=void 0;N=void 0;A=void 0;p=void 0;d=void 0}function D(){C=void 0;O=void 0;I=void 0;U=void 0}var m=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&_(t,n)}(r,t);var n=E(r);function r(){a(this,r);return n.apply(this,arguments)}var e=r.prototype;e.getFormState=function(){return v};e.getErrors=function(){return R};e.showNotice=function(){return void 0!==S||void 0!==f||void 0!==N||void 0!==A||void 0!==p||void 0!==d||void 0!==l||void 0!==s};e.getPendingAvatar=function(){return S};e.getPendingGlobalName=function(){return s}
;e.getPendingBanner=function(){return f};e.getPendingBio=function(){return N};e.getPendingPronouns=function(){return A};e.getPendingAccentColor=function(){return p};e.getPendingThemeColors=function(){return d};e.getPendingAvatarDecoration=function(){return l};e.getAllPending=function(){return{pendingAvatar:S,pendingBanner:f,pendingBio:N,pendingPronouns:A,pendingAccentColor:p,pendingThemeColors:d,pendingAvatarDecoration:l,pendingGlobalName:s}};e.getTryItOutThemeColors=function(){return U};e.getTryItOutAvatar=function(){return C};e.getTryItOutAvatarDecoration=function(){return O};e.getTryItOutBanner=function(){return I};e.getAllTryItOut=function(){return{tryItOutThemeColors:U,tryItOutAvatar:C,tryItOutAvatarDecoration:O,tryItOutBanner:I}};e.getIsDisableSubmit=function(){return h};e.__getLocalVars=function(){return{formState:v,errors:R,pendingAvatar:S,pendingGlobalName:s,pendingAvatarDecoration:l,pendingBanner:f,pendingBio:N,pendingPronouns:A,pendingAccentColor:p,pendingThemeColors:d,
disableSubmit:h,tryItOutThemeColors:U,tryItOutAvatar:C,tryItOutAvatarDecoration:O,tryItOutBanner:I}};return r}(e.ZP.Store);m.displayName="UserSettingsAccountStore";const Z=new m(o.Z,{USER_SETTINGS_ACCOUNT_INIT:y,USER_SETTINGS_MODAL_INIT:y,USER_SETTINGS_ACCOUNT_SUBMIT_SUCCESS:y,USER_SETTINGS_MODAL_SET_SECTION:function(t){return t.section===i.oAB.ACCOUNT&&y()},USER_SETTINGS_ACCOUNT_CLOSE:G,USER_SETTINGS_ACCOUNT_RESET_AND_CLOSE_FORM:function(){g();D();G()},USER_SETTINGS_ACCOUNT_SUBMIT:function(){v=i.QZA.SUBMITTING;R={}},USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE:function(t){if(v!==i.QZA.SUBMITTING)return!1;v=i.QZA.OPEN;var n;R=null!==(n=t.errors)&&void 0!==n?n:{}},USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR:function(t){var n=t.avatar;S=n;C=void 0},USER_SETTINGS_ACCOUNT_SET_PENDING_GLOBAL_NAME:function(t){var n=t.globalName;s=n},USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR_DECORATION:function(t){var n=t.avatarDecoration;l=n},USER_SETTINGS_ACCOUNT_SET_PENDING_BANNER:function(t){var n=t.banner;f=n},
USER_SETTINGS_ACCOUNT_SET_PENDING_BIO:function(t){var n=t.bio;N=n},USER_SETTINGS_ACCOUNT_SET_PENDING_PRONOUNS:function(t){var n=t.pronouns;A=n},USER_SETTINGS_ACCOUNT_SET_PENDING_ACCENT_COLOR:function(t){var n=t.color;p=n},USER_SETTINGS_ACCOUNT_SET_PENDING_THEME_COLORS:function(t){var n=t.themeColors;d=n},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_AVATAR:function(t){var n=t.avatar;C=n},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_AVATAR_DECORATION:function(t){var n=t.avatarDecoration;O=n},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_BANNER:function(t){var n=t.banner;I=n},USER_SETTINGS_ACCOUNT_SET_TRY_IT_OUT_THEME_COLORS:function(t){var n=t.themeColors;U=n},USER_SETTINGS_CLEAR_ERRORS:function(){R={}},USER_SETTINGS_RESET_PENDING_ACCOUNT_CHANGES:b,USER_SETTINGS_RESET_PENDING_PROFILE_CHANGES:P,USER_SETTINGS_RESET_ALL_PENDING:g,USER_SETTINGS_RESET_ALL_TRY_IT_OUT:D,LOGOUT:function(){S=void 0},USER_SETTINGS_ACCOUNT_SET_DISABLE_SUBMIT:function(t){var n=t.disable;h=n}})}}]);
//# sourceMappingURL=09a8909a4dac10ce6d3a.js.map