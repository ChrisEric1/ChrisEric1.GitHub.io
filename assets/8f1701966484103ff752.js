(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=v(n(5)),i=v(n(84)),s=v(n(392)),u=v(n(3)),l=n(754),d=v(n(32)),c=v(n(17)),f=v(n(11)),p=v(n(71)),_=v(n(465)),y=v(n(23)),A=v(n(14)),T=n(1080),E=n(1),h=v(n(2)),O=v(n(6537));function v(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function D(e,t,n,r){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=r;else if(i>1){for(var s=new Array(i),u=0;u<i;u++)s[u]=arguments[u+3];t.children=s}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var N=function(e){var t=e.url,n=e.ptb,a=e.text,r=e.onClick;return D(p.default,{href:t,className:O.default.downloadButton,onClick:r},void 0,a,n?" PTB":"")};N.displayName="DownloadButton";var M=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.render=function(){var e,t,n=this.props,a=n.icon,r=n.ptb,i=n.url,s=n.onClick,u=n.onMouseEnter,l=n.className,d=n.claimed,c=n.os,f=(0,o.default)(O.default.icon,a);if(Array.isArray(i))t=O.default.list,e=i.map((function(e,t){var n=d?e.url(r):"";return D(N,{ptb:r,url:n,onClick:s,text:e.text},n+"-"+t)}));else{var p=d?i(r):void 0;e=D(N,{ptb:r,url:p,onClick:s,text:h.default.Messages.DOWNLOAD})}return D("li",{className:l,onMouseEnter:u},void 0,D("div",{className:O.default.contentWrapper},void 0,D("div",{className:O.default.iconWrap},void 0,D("div",{className:f}),D("div",{className:(0,o.default)(O.default.active,f)})),D("p",{},void 0,c),D("div",{className:(0,o.default)(O.default.downloadButtons,t)},void 0,e)))},t}(r.PureComponent);M.displayName="DownloadApp";var U=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={ptb:!1,active:void 0,desktop:{key:"desktop",platforms:[{os:h.default.Messages.PLATFORM_MACOS,icon:O.default.apple,url:function(e){return(0,T.makeDesktopDownloadURL)("osx",e)}},{os:h.default.Messages.PLATFORM_WINDOWS,icon:O.default.windows,url:function(e){return(0,T.makeDesktopDownloadURL)("win",e)}},{os:h.default.Messages.PLATFORM_LINUX,icon:O.default.linux,url:[{url:function(e){return(0,T.makeDesktopDownloadURL)("linux",e,"deb")},text:h.default.Messages.DEB},{url:function(e){return(0,T.makeDesktopDownloadURL)("linux",e,"tar.gz")},text:h.default.Messages.TAR_GZ}]}]},mobile:{key:"mobile",platforms:[{os:h.default.Messages.PLATFORM_IOS,icon:O.default.ios,url:function(){return E.DownloadLinks.IOS}},{os:h.default.Messages.PLATFORM_ANDROID,icon:O.default.android,url:function(){return E.DownloadLinks.ANDROID}}]}},t.renderPlatforms=function(e,n,a){return void 0===a&&(a=!1),e.map((function(e,r){var i,s=e.os,u=e.icon,l=e.url,d=n+r,c=(0,o.default)(O.default.platform,((i={})[O.default.active]=t.state.active===d,i));return D(M,{os:s,icon:u,url:l,claimed:t.props.claimed,className:c,onClick:t.handleClick.bind(S(t),s,a),onMouseEnter:t.handleMouseEnter.bind(S(t),d),ptb:a},d)}),S(t))},t.showStable=function(){t.setState({ptb:!1})},t.showPTB=function(){t.setState({ptb:!0})},t.handleClick=function(e,n){void 0===n&&(n=!1);var a=t.props,r=a.fingerprint,o=a.claimed,i=a.source;(s.default.getToken()||null!=r)&&A.default.track(E.AnalyticEvents.DOWNLOAD_APP,{platform:e,ptb:n,released:!0,has_e_mail:o,referring_location:i}),o||(d.default.pop(),(0,l.open)())},t.handleMouseEnter=function(e){t.setState({active:e})},t.handleClickContainer=function(e){e.target===e.currentTarget&&d.default.pop()},t}m(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.source;switch(A.default.track(E.AnalyticEvents.OPEN_MODAL,{type:"Download App",source:{location:e}}),i.default.os.family){case"OS X":return this.handleMouseEnter(this.state.desktop.key+0);case"Windows":return this.handleMouseEnter(this.state.desktop.key+1);case"Ubuntu":case"Debian":case"Fedora":case"Red Hat":case"SuSE":case"Linux":return this.handleMouseEnter(this.state.desktop.key+2);case"iOS":return this.handleMouseEnter(this.state.mobile.key+0);case"Android":return this.handleMouseEnter(this.state.mobile.key+1);default:return null}},n.render=function(){var e;return e=this.state.ptb?h.default.Messages.DOWNLOAD_DESKTOP_PTB_FOOTER.format({onClick:this.showStable}):h.default.Messages.DOWNLOAD_DESKTOP_STABLE_FOOTER.format({onClick:this.showPTB}),D(y.default,{className:O.default.downloadApps,onClick:this.handleClickContainer,"aria-label":h.default.Messages.CLOSE},void 0,D("div",{className:O.default.inner},void 0,D("div",{className:O.default.platformsWrap},void 0,D("p",{className:O.default.header},void 0,h.default.Messages.DOWNLOAD_DESKTOP_TITLE),D("ul",{className:O.default.platforms},void 0,this.renderPlatforms(this.state.desktop.platforms,this.state.desktop.key,this.state.ptb)),D("p",{className:O.default.footer},void 0,e)),D("div",{className:O.default.platformsWrap},void 0,D("p",{className:O.default.header},void 0,h.default.Messages.DOWNLOAD_MOBILE_TITLE),D("ul",{className:O.default.platforms},void 0,this.renderPlatforms(this.state.mobile.platforms,this.state.mobile.key)))))},t}(r.PureComponent);U.displayName="DownloadApps",U.defaultProps={source:"Unspecified"};var b=u.default.connectStores([f.default,c.default],(function(){var e=f.default.getCurrentUser();return{claimed:null==e||e.isClaimed(),fingerprint:c.default.getFingerprint()}}))(U),I=function(e){function t(){return e.apply(this,arguments)||this}return m(t,e),t.prototype.render=function(){return r.createElement(b,this.props)},t}(r.PureComponent);I.displayName="DownloadAppsModal",I.modalConfig={key:"download-apps",backdropStyle:_.default.Styles.LIGHT};var k=I;t.default=k},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountDetailsInit=function(){o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_INIT})},t.accountDetailsClose=function(){o.default.dirtyDispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_CLOSE})},t.toggleEditingProfile=function(e){o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_TOGGLE_EDITING_PROFILE,isEditingProfile:e})},t.toggleEditingPassword=function(e){o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_TOGGLE_EDITING_PASSWORD,isEditingPassword:e})},t.updateAccountInfo=function(e){o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_UPDATE_INFO,update:e})},t.disableAccount=function(e,t){var n={title:t?c.default.Messages.DELETE_ACCOUNT:c.default.Messages.DISABLE_ACCOUNT},r=t?d.Endpoints.DELETE_ACCOUNT:d.Endpoints.DISABLE_ACCOUNT;return(0,u.default)(n,(function(t){return a.default.post({url:r,body:p({password:e},t)})}),{checkEnabled:!1}).then((function(){o.default.dispatch({type:d.ActionTypes.LOGOUT}),l.default.transitionTo(d.Routes.LOGIN)}))},t.saveAccountRequest=_,t.saveAccountChanges=function(e,t,n,a,l,f){return o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_SUBMIT}),(0,u.default)({title:c.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(o){var i=p({username:e,email:t,password:n,avatar:a,discriminator:f,new_password:l},o),s=r.default.get(d.DEVICE_TOKEN);null!=d.DEVICE_PUSH_PROVIDER&&null!=s&&(i.push_provider=d.DEVICE_PUSH_PROVIDER,i.push_token=s);var u=r.default.get(d.DEVICE_VOIP_TOKEN);return null!=d.DEVICE_PUSH_VOIP_PROVIDER&&null!=u&&(i.push_voip_provider=d.DEVICE_PUSH_VOIP_PROVIDER,i.push_voip_token=u),_(i)}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body;return i.default.track(d.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,s.hasAnimatedAvatar)(t)}),o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_SUBMIT_SUCCESS}),t.email}),(function(e){o.default.dispatch({type:d.ActionTypes.USER_SETTINGS_ACCOUNT_SUBMIT_FAILURE,errors:e.body})}))},t.getHarvestStatus=function(){return a.default.get(d.Endpoints.USER_HARVEST)},t.requestHarvest=function(){return a.default.post({url:d.Endpoints.USER_HARVEST})};var a=f(n(19)),r=f(n(36)),o=f(n(4)),i=f(n(14)),s=n(81),u=f(n(994)),l=f(n(40)),d=n(1),c=f(n(2));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _(e){return a.default.patch({url:d.Endpoints.ME,body:e}).then((function(e){var t=e.body;if(t.token){var n=t.token;delete t.token,o.default.dispatch({type:d.ActionTypes.UPDATE_TOKEN,token:n})}return o.default.dispatch({type:d.ActionTypes.CURRENT_USER_UPDATE,user:t}),e}))}},5630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitDateOfBirth=function(e,t){return(0,o.default)(e,t),a.default.patch({url:i.Endpoints.ME,body:{date_of_birth:e.format("YYYY-MM-DD")}}).then((function(e){var t=e.body;r.default.dispatch({type:i.ActionTypes.CURRENT_USER_UPDATE,user:t})}))};var a=s(n(19)),r=s(n(4)),o=s(n(5618)),i=n(1);function s(e){return e&&e.__esModule?e:{default:e}}},754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){void 0===e&&(e=s.AccountModalTrigger.UNKNOWN);a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_MODAL_OPEN,trigger:e}),e===s.AccountModalTrigger.CHAT_BOX&&o.default.track(s.AnalyticEvents.OPEN_MODAL,{type:"Claim Account",source:"Guild Chat"})},t.claim=function(e,t){return a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_SUBMITTED}),(0,i.saveAccountRequest)({email:e,password:t}).then((function(){f(e)}),(function(e){return a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_FAILURE,errors:e.body}),Promise.reject(e)}))},t.claimSuccess=f,t.close=p,t.submitBirthday=function(e){return _.apply(this,arguments)};var a=l(n(4)),r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(5630)),o=l(n(14)),i=n(407),s=n(1);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,a,r,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){d(o,a,r,i,s,"next",e)}function s(e){d(o,a,r,i,s,"throw",e)}i(void 0)}))}}function f(e){a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_SUCCESS,email:e})}function p(){a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_MODAL_CLOSE})}function _(){return(_=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_BIRTHDAY_SUBMITTED}),e.prev=1,e.next=4,r.submitDateOfBirth(t,s.AnalyticsSections.CLAIM_ACCOUNT_MODAL);case 4:a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_BIRTHDAY_SUCCESS,isUnderage:!1}),e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(1),null==e.t0.body||null==e.t0.body.date_of_birth){e.next=13;break}return a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_BIRTHDAY_SUCCESS,isUnderage:!0}),p(),e.abrupt("return");case 13:a.default.dispatch({type:s.ActionTypes.CLAIM_ACCOUNT_BIRTHDAY_FAILURE,errors:e.t0.body});case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}}}]);
//# sourceMappingURL=8f1701966484103ff752.js.map