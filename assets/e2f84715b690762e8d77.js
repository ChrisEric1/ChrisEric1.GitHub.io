"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[74253],{374253:(e,n,r)=>{r.r(n);r.d(n,{default:()=>_});var t=r(785893),l=r(667294),a=r(294184),i=r.n(a),o=r(363010),s=r(675860),u=r(331535),c=r(631134),d=r(212218),f=r(653772),h=r(940712),N=r(859023),v=r(67416),b=r(932847),p=r(964199),y=r(461061),m=r(959797),x=r(327183),A=r.n(x);function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function E(e,n,r,t,l,a,i){try{var o=e[a](i),s=o.value}catch(e){r(e);return}o.done?n(s):Promise.resolve(s).then(t,l)}function k(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,l,a=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(t=r.next()).done);i=!0){a.push(t.value);if(n&&a.length===n)break}
}catch(e){o=!0;l=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw l}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e,n){var r,t,l,a,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,t&&(l=2&a[0]?t.return:a[0]?t.throw||((l=t.return)&&l.call(t),
0):t.next)&&!(l=l.call(t,a[1])).done)return l;(t=0,l)&&(a=[2&a[0],l.value]);switch(a[0]){case 0:case 1:l=a;break;case 4:i.label++;return{value:a[1],done:!1};case 5:i.label++;t=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(l=i.trys,l=l.length>0&&l[l.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){i.label=a[1];break}if(6===a[0]&&i.label<l[1]){i.label=l[1];l=a;break}if(l&&i.label<l[2]){i.label=l[2];i.ops.push(a);break}l[2]&&i.ops.pop();i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e];t=0}finally{r=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};function I(e){var n=e.disabled,r=void 0!==n&&n,a=e.user,o=e.setNickname,s=e.nickname,d=e.error,f=e.hasNick,h=l.useRef(null),N=l.useCallback((function(){var e;o("");null===(e=h.current)||void 0===e||e.focus()}),[o]);return(0,t.jsxs)(t.Fragment,{children:[r||null==a||a.id===c.default.getId()?null:(0,t.jsx)(u.Zb,{type:u.Zb.Types.WARNING,
className:A().card,children:(0,t.jsx)(u.xv,{className:A().warning,variant:"text-md/normal",children:m.Z.Messages.CHANGE_NICKNAME_WARNING})}),(0,t.jsx)(u.vw,{className:i()(A().itemGroup,k({},A().disabled,r)),children:r?m.Z.Messages.CHANGE_IDENTITY_MODAL_CHANGE_NICKNAME_DISABLED:m.Z.Messages.NICKNAME}),(0,t.jsx)(u.oi,{disabled:r,inputRef:h,maxLength:y.l$U,value:s,placeholder:p.ZP.getName(a),onChange:o,autoFocus:!0}),null!=d?(0,t.jsx)(u.xv,{variant:"text-xs/normal",color:"text-danger",className:A().nickError,children:d}):null,f&&!r?(0,t.jsx)(u.zx,{look:u.zx.Looks.LINK,color:u.zx.Colors.LINK,size:u.zx.Sizes.NONE,onClick:N,className:A().reset,children:m.Z.Messages.RESET_NICKNAME}):null]})}const _=function(e){var n,r=e.transitionState,a=e.user,i=e.guildId,c=e.onClose,p=e.analyticsSource,x=(0,o.e7)([d.ZP],(function(){return null!=i?d.ZP.getMember(i,a.id):null})),g=(0,o.e7)([h.Z,N.default,f.Z],(function(){var e,n=f.Z.getGuild(i)
;return null!=n&&((null===(e=N.default.getCurrentUser())||void 0===e?void 0:e.id)===a.id?h.Z.can(y.Plq.CHANGE_NICKNAME,n)||h.Z.can(y.Plq.MANAGE_NICKNAMES,n):h.Z.canManageUser(y.Plq.MANAGE_NICKNAMES,a.id,n))})),k=C(l.useState(!1),2),_=k[0],Z=k[1],S=C(l.useState(null!==(n=null==x?void 0:x.nick)&&void 0!==n?n:""),2),j=S[0],w=S[1],G=C(l.useState({}),2),L=G[0],z=G[1];l.useEffect((function(){b.default.track(y.rMx.OPEN_MODAL,{type:"Change Server Identity",location:y.ZY5.GUILD_CHANNEL,source:p})}),[]);var K,D,P=l.useCallback((D=(K=function(e){var n,r,t,l,o,u,d,f,h,N;return M(this,(function(v){switch(v.label){case 0:e.preventDefault();n=null;j!==(null!==(r=null==x?void 0:x.nick)&&void 0!==r?r:"")&&((n=null!=n?n:{}).nick=j);if(null==n){c();return[2]}v.label=1;case 1:v.trys.push([1,3,,4]);Z(!0);return[4,s.Z.patch({url:y.ANM.GUILD_MEMBER(i,a.id),body:n})];case 2:v.sent();c();return[3,4];case 3:t=v.sent();Z(!1)
;null!=(null==(d=null!==(u=null===(l=t.body)||void 0===l?void 0:l.errors)&&void 0!==u?u:null)?void 0:d.nick)&&(o=(null===(f=d.nick)||void 0===f||null===(h=f._errors)||void 0===h||null===(N=h[0])||void 0===N?void 0:N.message)||m.Z.Messages.CHANGE_IDENTITY_MODAL_UNKNOWN_ERROR);z({nick:o});return[3,4];case 4:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,t){var l=K.apply(e,n);function a(e){E(l,r,t,a,i,"next",e)}function i(e){E(l,r,t,a,i,"throw",e)}a(void 0)}))}),function(e){return D.apply(this,arguments)}),[i,j,c,a,x]);return(0,t.jsx)(v.Y0,{"aria-label":m.Z.Messages.CHANGE_IDENTITY,transitionState:r,children:(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsx)(v.xB,{separator:!1,children:(0,t.jsx)(u.X6,{variant:"heading-lg/semibold",children:m.Z.Messages.CHANGE_NICKNAME})}),(0,t.jsx)(v.hz,{className:A().modalContent,children:(0,t.jsx)(I,{disabled:!g,user:a,error:L.nick,nickname:j,setNickname:w,hasNick:null!=(null==x?void 0:x.nick)})}),(0,t.jsxs)(v.mz,{
children:[(0,t.jsx)(u.zx,{type:"submit",disabled:_,children:m.Z.Messages.SAVE}),(0,t.jsx)(u.zx,{onClick:c,look:u.zx.Looks.LINK,color:u.zx.Colors.PRIMARY,children:m.Z.Messages.CANCEL})]})]})})}}}]);
//# sourceMappingURL=e2f84715b690762e8d77.js.map