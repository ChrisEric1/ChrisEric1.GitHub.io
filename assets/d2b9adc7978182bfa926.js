"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[61012],{761012:(e,n,t)=>{t.d(n,{S:()=>Ce,Z:()=>Ne});var r=t(785893),o=t(667294),a=t(294184),c=t.n(a),i=t(202351),s=t(513328),l=t(945460),u=t(656645),d=t(968449),f=t(597246),p=t(579581),O=t(159895),b=t(799066),g=t(473903),v=t(850841),m=t(492886),h=t(296872),y=t(359721),E=t(504001),j=t(971402),A=t(153686),_=t(19585),I=t(115617),M=t(550254),x=t(633878);function k(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function w(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))
}));return e}function P(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function C(e){var n=e.width,t=void 0===n?24:n,o=e.height,a=void 0===o?24:o,c=e.color,i=void 0===c?"currentColor":c,s=e.className,l=e.foreground,u=P(e,["width","height","color","className","foreground"]);return(0,r.jsx)("svg",w(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){k(e,n,t[n])}))}return e}({},(0,x.Z)(u)),{className:s,width:t,height:a,
viewBox:"0 0 32 32",children:(0,r.jsx)("path",{className:l,
d:"M10.5 24c0-3.682 2.318-6 6-6s6 2.318 6 6h-12zM16.5 16a4 4 0 100-8 4 4 0 000 8zM29.166 15.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 15h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 15zM31.167 16.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 11.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 11h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 11zM31.167 12.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 7.334H28.5a.335.335 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.335.335 0 00-.334-.333zM26.5 7h-1.333a.335.335 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333V7.333A.335.335 0 0026.5 7zM31.167 8.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 23.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 23h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 23zM31.167 24.333a.333.333 0 100-.667.333.333 0 000 .667zM29.166 19.334H28.5a.334.334 0 00-.334.333v.667c0 .183.15.333.334.333h.666c.184 0 .334-.15.334-.333v-.667a.334.334 0 00-.334-.333zM26.5 19h-1.333a.334.334 0 00-.334.333v1.334c0 .183.15.333.334.333H26.5c.183 0 .334-.15.334-.333v-1.334A.334.334 0 0026.5 19zM31.167 20.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 15.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 15H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 15zM1.833 16.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 11.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 11H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 11zM1.833 12.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 7.334h-.667a.335.335 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.335.335 0 00-.333-.333zM7.833 7H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333V7.333A.335.335 0 007.833 7zM1.833 8.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 23.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 23H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 23zM1.833 24.333a.333.333 0 100-.667.333.333 0 000 .667zM4.5 19.334h-.667a.334.334 0 00-.333.333v.667c0 .183.15.333.333.333H4.5c.183 0 .333-.15.333-.333v-.667a.334.334 0 00-.333-.333zM7.833 19H6.5a.335.335 0 00-.333.333v1.334c0 .183.15.333.333.333h1.333c.184 0 .333-.15.333-.333v-1.334A.334.334 0 007.833 19zM1.833 20.333a.333.333 0 100-.667.333.333 0 000 .667z",
fill:i})}))}var N=t(655402),D=t(95891),S=t(778613),R=t(701190),T=t(531441),B=t(786170),U=t(652591),Z=t(775173),V=t(102921),L=t(266348),z=t(232806),G=t(2590),H=t(630670),W=t(921431),K=t(203600),F=t(473708),$=t(665821),q=t.n($);function Y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function X(e,n,t,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){t(e);return}i.done?n(s):Promise.resolve(s).then(r,o)}function J(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){X(a,r,o,c,i,"next",e)}function i(e){X(a,r,o,c,i,"throw",e)}c(void 0)}))}}function Q(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){
return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){Q(e,n,t[n])}))}return e}function ne(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function te(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||(o[t]=e[t])}return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){t=a[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}}return o}function re(e,n){return function(e){
if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},
"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:c.label++;return{value:a[1],done:!1};case 5:c.label++;r=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(o=c.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1];o=a;break}if(o&&c.label<o[2]){c.label=o[2];c.ops.push(a);break}o[2]&&c.ops.pop();c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function ae(e){
var n,t=e.icon,o=e.iconClassName,a=e.onClick,i=e.text,s=e.children,u=e.className,d=e.selected,f=void 0!==d&&d,p=e.disabled,O=void 0!==p&&p,b=e.onMouseLeave,g=e.onBlur;return(0,r.jsxs)(l.Clickable,{className:c()(u,q().backgroundOption,(n={},Q(n,q().backgroundOptionSelected,f),Q(n,q().backgroundOptionDisabled,O),n)),onMouseLeave:b,onBlur:g,onClick:O?void 0:a,children:[f?(0,r.jsx)("div",{className:q().backgroundOptionRing}):null,(0,r.jsxs)("div",{className:q().backgroundOptionInner,children:[s,(0,r.jsxs)("div",{className:q().backgroundOptionContent,children:[(0,r.jsx)(t,{className:c()(q().backgroundIconOptionIcon,o)}),(0,r.jsx)(l.Text,{className:q().backgroundOptionText,color:"none",variant:"text-sm/normal",children:i})]})]})]})}function ce(e){var n=e.option,t=e.source,a=e.isAnimated,c=re(o.useState(!1),2),i=c[0],s=c[1];o.useEffect((function(){(new Image).src=t}),[t]);if(!a||null==n)return(0,r.jsx)("div",{className:q().backgroundImageOption,style:{backgroundImage:"url(".concat(t,")")}})
;var l=(0,Z.rI)({userId:n.user_id,assetId:n.id,assetHash:n.asset,size:720,canAnimate:!1});return(0,r.jsx)("img",{onMouseMove:function(){return s(!0)},onMouseLeave:function(){return s(!1)},className:q().backgroundImageOption,src:i?t:l,alt:n.id})}function ie(e){var n=function(){if(null!=b&&y){I.Kw(b);U.default.track(G.rMx.PREMIUM_UPSELL_VIEWED,{type:K.cd.ANIMATED_VIDEO_BACKGROUND_NEW_PRESET,location:v.location,location_stack:m})}},o=e.option,a=e.source,s=e.selected,u=void 0!==s&&s,d=e.onSelectOption,f=e.isAnimatedImage,O=e.isVideo,b=e.hotspotLocation,g=te(e,["option","source","selected","onSelectOption","isAnimatedImage","isVideo","hotspotLocation"]),v=(0,p.O)(),m=(0,_.Z)(A.Z.VIDEO_BACKGROUND_IMAGE_OPTION).analyticsLocations,y=(0,i.e7)([M.Z],(function(){return null!=b&&M.Z.hasHotspot(b)})),E=O?(0,r.jsx)(B.Z,{className:q().backgroundImageOption,src:a,loop:!0,playOnHover:!0,muted:!0}):(0,r.jsx)(ce,{isAnimated:f,option:(0,h.rD)(o)?o:void 0,source:a});return(0,
r.jsxs)(l.Clickable,ne(ee({},g),{className:c()(q().backgroundOption,Q({},q().backgroundOptionSelected,u)),onClick:function(){return d(o)},onContextMenu:function(e){return(0,j.jW)(e,J((function(){var e,n;return oe(this,(function(a){switch(a.label){case 0:return[4,t.e(84264).then(t.bind(t,284264))];case 1:e=a.sent(),n=e.default;return[2,function(e){return(0,r.jsx)(n,ne(ee({},e),{backgroundOption:o,optionIsInUse:u}))}]}}))})))},children:[u?(0,r.jsx)("div",{className:q().backgroundOptionRing}):null,(0,r.jsx)("div",{onFocus:n,onMouseEnter:n,className:q().backgroundOptionInner,children:E}),O||f?(0,r.jsx)(R.Z,{className:q().playIcon}):null,y&&(0,r.jsx)(T.IG,{text:F.Z.Messages.NEW,className:q().newTextBadge})]}))}function se(){return(0,r.jsxs)("div",{className:q().customBackgroundTooltip,children:[(0,r.jsx)(D.Z,{className:q().customBackgroundTooltipIcon}),(0,r.jsx)(l.Text,{variant:"text-sm/normal",children:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP})]})}function le(e){
var n=e.onClick,t=e.tooltipText,o=e.disabled,a=void 0!==o&&o,c=function(){I.Kw(H.v.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)},s=(0,i.e7)([M.Z],(function(){return M.Z.hasHotspot(H.v.ANIMATED_VIDEO_BG_CUSTOM_TOOLTIP_NEW)})),u=s?F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NEW_ANIMATED_TOOLTIP:t;return(0,r.jsxs)(l.TooltipContainer,{text:u,className:q().newBackgroundTooltipContainer,children:[(0,r.jsxs)(ae,{className:q().backgroundOptionBlurred,disabled:a,icon:N.Z,iconClassName:q().uploadIconOption,onClick:n,onMouseLeave:c,onBlur:c,text:(0,r.jsxs)("div",{className:q().backgroundCustomInlineUpsell,children:[(0,r.jsx)(D.Z,{className:q().backgroundCustomInlineUpsellIcon}),(0,r.jsx)("div",{className:q().overflowEllipsis,children:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM})]}),children:[(0,r.jsx)("div",{className:q().backgroundCustomInlineUpsellBackground}),(0,r.jsx)("div",{className:q().backgroundCustomInlineUpsellBackgroundDarkener})]}),s&&(0,r.jsx)(T.IG,{text:F.Z.Messages.NEW,
className:q().newTextBadge})]})}function ue(e){var n=e.onClick,t=(0,p.O)(),a=(0,_.Z)(A.Z.VIDEO_BACKGROUND_CUSTOM_UPSELL).analyticsLocations;o.useEffect((function(){U.default.track(G.rMx.PREMIUM_UPSELL_VIEWED,{type:K.cd.VIDEO_BACKGROUNDS_INLINE,location:t.location,location_stack:a})}),[]);return(0,r.jsx)(le,{onClick:n,tooltipText:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPSELL_TOOLTIP})}function de(e){var n=e.onAddBackgroundImage,o=e.disabled,a=(0,l.useModalContext)(),c=o?F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_MAX_REACHED.format({maxCustomBackgrounds:25}):F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_TOOLTIP_PREMIUM,i=[{name:F.Z.Messages.IMAGES,extensions:["jpg","jpeg","png","gif","mp4"]}];return(0,r.jsx)(le,{disabled:o,onClick:function(){(0,l.openModalLazy)(J((function(){var e,o;return oe(this,(function(a){switch(a.label){case 0:
return[4,Promise.all([t.e(40532),t.e(13433),t.e(77722),t.e(28531),t.e(13586),t.e(27499),t.e(54857),t.e(5630),t.e(17091),t.e(29223),t.e(73727),t.e(36154),t.e(89617),t.e(11944),t.e(52555),t.e(54602),t.e(61953),t.e(6565),t.e(36334),t.e(6254),t.e(94302),t.e(76294),t.e(42212),t.e(64767)]).then(t.bind(t,597264))];case 1:e=a.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,ee({maxFileSizeBytes:z.SJ,onComplete:n,uploadType:W.pC.VIDEO_BACKGROUND,filters:i,modalTitle:F.Z.Messages.UPLOAD_BACKGROUND,imageSpecifications:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_UPLOAD_SUBTITLE,uploadOptionTitle:F.Z.Messages.SELECT_IMAGE_MODAL_UPLOAD_IMAGE_OR_VIDEO,showUpsellHeader:!0},e))}]}}))})),{contextKey:a})},tooltipText:c})}function fe(e){var n=e.canUseCustomBackgrounds,t=e.customBackgroundOptions,a=e.selectedOption,c=e.onSelectOption,i=e.onUpsellClick,s=e.onAddBackgroundImage,u=e.smallerOptions,d=o.useMemo((function(){return t.sort((function(e,n){
return null==e.last_used||null==n.last_used?V.Z.compare(n.id,e.id):new Date(n.last_used).getTime()-new Date(e.last_used).getTime()}))}),[t]),f=d.length>=25,p=(0,_.Z)(A.Z.VIDEO_BACKGROUND_OPTIONS).AnalyticsLocationProvider,O=Object.values((0,L.Z)()).sort((function(e,n){return z.E1[e.id]-z.E1[n.id]}));return(0,r.jsx)(p,{children:(0,r.jsxs)("div",{className:u?q().backgroundOptionsSmall:q().backgroundOptionsLarge,children:[(0,r.jsx)(ae,{selected:null==a,icon:S.Z,iconClassName:q().noneOptionIcon,onClick:function(){return c(null)},text:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_NONE}),(0,r.jsx)(ae,{className:q().backgroundOptionBlurred,selected:a===z.f7,icon:C,iconClassName:q().blurOptionIcon,onClick:function(){return c(z.f7)},text:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_BLUR,children:(0,r.jsx)("div",{className:q().backgroundOptionBlurBackground})}),n?(0,r.jsx)(de,{onAddBackgroundImage:s,disabled:f}):(0,r.jsx)(ue,{onClick:i}),d.map((function(e){return(0,r.jsx)(l.Tooltip,{text:(0,
r.jsx)(se,{}),"aria-label":F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND_CUSTOM_TOOLTIP,children:function(n){var t=(0,Z.rI)({userId:e.user_id,assetId:e.id,assetHash:e.asset,size:720});return null==t?null:(0,o.createElement)(ie,ne(ee({},n),{key:e.id,option:e,source:t,selected:(0,h.rD)(a)&&a.id===e.id,onSelectOption:c,isVideo:(0,Z.ay)(e.asset),isAnimatedImage:(0,Z.xR)(e.asset)}))}},e.id)})),O.map((function(e){var n=!0===e.isVideo;return(0,r.jsx)(l.Tooltip,{text:e.name,"aria-label":e.name,children:function(t){return(0,o.createElement)(ie,ne(ee({},t),{key:e.id,option:e.id,source:e.source,selected:a===e.id,onSelectOption:c,isVideo:n,isAnimatedImage:!1,hotspotLocation:e.hotspotLocation}))}},e.id)}))]})})}var pe=t(964525),Oe=t(990154),be=t.n(Oe);function ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){t(e);return}i.done?n(s):Promise.resolve(s).then(r,o)}function me(e){
return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function c(e){ve(a,r,o,c,i,"next",e)}function i(e){ve(a,r,o,c,i,"throw",e)}c(void 0)}))}}function he(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){he(e,n,t[n])}))}return e}function Ee(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t
}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function je(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ge(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ge(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
var Ae=function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:c.label++;return{value:a[1],done:!1};case 5:c.label++;r=a[1];a=[0];continue;case 7:a=c.ops.pop();c.trys.pop();continue;default:if(!(o=c.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1];o=a;break}if(o&&c.label<o[2]){c.label=o[2];c.ops.push(a);break}o[2]&&c.ops.pop();c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e];r=0}finally{t=o=0}
if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function _e(e){var n=e.onLearnMore,a=e.selectedBackgroundOption,c=e.onSelectBackgroundOption,s=e.currentDeviceId,u=e.smallerBackgroundOptions,d=(0,i.e7)([g.default],(function(){return g.default.getCurrentUser()})),j=je(o.useState(null),2),A=j[0],_=j[1];(0,O.Z$)(b.Z);var I=(0,E.Z)(),M=v.ZP.canUseCustomBackgrounds(d),x=(0,i.cj)([m.Z],(function(){return M?m.Z.videoFilterAssets:{}})),k=o.useMemo((function(){return Object.values(x).filter((function(e){return e.type===z.xV.BACKGROUND}))}),[x]),w=(0,p.O)();o.useEffect((function(){I?(0,y.FU)(a,s,{track:!1}).catch((function(){return c(null)})):null!=a&&c(null)}),[s]);var P=function(e){c(e);(0,y.FU)(e,s,{location:w.location}).then((function(){return _(null)})).catch((function(){_(F.Z.Messages.VIDEO_BACKGROUND_ERROR_APPLY);(0,y.FU)(null,s,{location:w.location})}))};return I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Heading,{className:be().spacingTop24,variant:"eyebrow",
color:"header-secondary",children:F.Z.Messages.CAMERA_PREVIEW_VIDEO_BACKGROUND}),null!=A?(0,r.jsx)(l.FormErrorBlock,{className:be().videoBackgroundError,children:A}):null,(0,r.jsx)(fe,{canUseCustomBackgrounds:M,customBackgroundOptions:k,selectedOption:a,onSelectOption:P,onUpsellClick:function(){(0,l.openModalLazy)(me((function(){var e,o;return Ae(this,(function(a){switch(a.label){case 0:return[4,Promise.all([t.e(40532),t.e(13433),t.e(77722),t.e(28531),t.e(13586),t.e(27499),t.e(54857),t.e(5630),t.e(17091),t.e(29223),t.e(73727),t.e(36154),t.e(89617),t.e(11944),t.e(52555),t.e(54602),t.e(61953),t.e(6565),t.e(36334),t.e(6254),t.e(94302),t.e(76294),t.e(42212),t.e(57851)]).then(t.bind(t,982871))];case 1:e=a.sent(),o=e.default;return[2,function(e){return(0,r.jsx)(o,Ee(ye({},e),{onLearnMore:n,analyticsSource:Ee(ye({},w.location),{object:G.qAy.BUTTON_CTA})}))}]}}))})))},onAddBackgroundImage:function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]
;return new Promise((t=me((function(t){var o,a;return Ae(this,(function(c){switch(c.label){case 0:c.trys.push([0,2,,3]);return[4,(0,f.Ff)(e,z.xV.BACKGROUND)];case 1:o=c.sent();P(o);(0,h.g5)(o,n.type===pe.m.MP4,r);_(null);return[3,3];case 2:a=c.sent();_(a.message);return[3,3];case 3:t();return[2]}}))})),function(e){return t.apply(this,arguments)}))},smallerOptions:u})]}):null}var Ie=t(604945),Me=t(166851),xe=t.n(Me);function ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function we(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Pe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done);c=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){i=!0;o=e}finally{try{c||null==t.return||t.return()
}finally{if(i)throw o}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ke(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ke(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(){var e=Pe(o.useState(!1),2),n=e[0],t=e[1],a=(0,i.e7)([Ie.Z],(function(){return Ie.Z.isMediaFilterSettingLoading()}));o.useEffect((function(){var e=new s.V7;if(a)e.start(150,(function(){t(!0)}));else{e.stop();t(!1)}return function(){return e.stop()}}),[a]);return n?(0,r.jsx)("div",{className:xe().filterLoadingIndicator,children:(0,r.jsx)(l.Spinner,{})}):null}function Ne(e){
var n=e.hideDeviceSelector,t=void 0!==n&&n,a=e.hideDeviceHeader,s=void 0!==a&&a,p=e.onLearnMore,O=e.selectedBackgroundOption,b=e.onSelectBackgroundOption,g=e.renderCamera,v=e.hidePreviewToggle,m=void 0!==v&&v,h=e.showSmallBackgroundOptions,y=void 0!==h&&h,E=(0,i.e7)([Ie.Z],(function(){return Ie.Z.getVideoDeviceId()})),j=(0,i.Wu)([Ie.Z],(function(){return Object.values(Ie.Z.getVideoDevices())})),A=d.qF.useSetting(),_=j.map((function(e){return{value:e.id,label:e.name}}));o.useEffect((function(){(0,f.XV)()}),[]);return(0,r.jsxs)(r.Fragment,{children:[g(E),Ie.Z.isEnabled()?null:(0,r.jsx)(l.Text,{className:xe().permissionWarning,color:"interactive-normal",variant:"text-sm/normal",children:F.Z.Messages.FORM_WARNING_VIDEO_PREVIEW.format({onEnableClick:u.Z.enable})}),m?null:(0,r.jsx)(l.FormSwitch,{className:xe().previewToggle,note:F.Z.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW_NOTE,onChange:function(e){d.qF.updateSetting(e);U.default.track(G.rMx.UPDATE_USER_SETTINGS_LOCAL,{always_preview_video:e})
},value:A,hideBorder:!0,children:(0,r.jsx)("div",{className:xe().cameraPreviewTitle,children:F.Z.Messages.CAMERA_PREVIEW_ALWAYS_PREVIEW})}),t?null:(0,r.jsxs)(r.Fragment,{children:[s?null:(0,r.jsx)(l.Heading,{className:xe().spacingTop24,variant:"eyebrow",color:"header-secondary",children:F.Z.Messages.CAMERA_PREVIEW_CAMERA}),(0,r.jsx)(l.SingleSelect,{placeholder:F.Z.Messages.CHANGE_CAMERA,className:c()(xe().selector,we({},xe().selectorNoHeader,s)),options:_,value:E,onChange:function(e){return u.Z.setVideoDevice(e)}})]}),(0,r.jsx)(_e,{onLearnMore:p,selectedBackgroundOption:O,onSelectBackgroundOption:b,currentDeviceId:E,smallerBackgroundOptions:y})]})}}}]);
//# sourceMappingURL=d2b9adc7978182bfa926.js.map