"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[87310],{289965:(e,n,r)=>{r.d(n,{kY:()=>u,Aj:()=>d,d$:()=>f,S1:()=>E,hw:()=>h,kU:()=>p});var t=r(173436),i=r(839574),o=r(642400);function a(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function l(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function l(e){a(o,t,i,l,s,"next",e)}function s(e){a(o,t,i,l,s,"throw",e)}l(void 0)}))}}var s=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,
i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function u(e,n,r,t){return c.apply(this,arguments)}function c(){return(c=l((function(e,n,r,o){var a;return s(this,(function(l){switch(l.label){case 0:return null==(a=e.getGuildId())||n!==a?[3,2]:[4,(0,i.u)(e,o,r)];case 1:if(!l.sent())return[2,!1];l.label=2;case 2:t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_UPDATE_PERMISSION",id:n,allow:r,deny:o});return[2]}}))}))).apply(this,arguments)}
function d(e){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SELECT_PERMISSION",id:e})}function f(e){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SET_ADVANCED_MODE",advancedMode:e})}function E(){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_INIT"})}function h(e,n,r){return p(e,n,[],r)}function p(e,n,r,i){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SUBMITTING"});return new Promise((function(t){var i=function(){if(0===n.length&&0===r.length)return t();if(n.length>0){var a=n.pop();if(null==a)return i();o.Z.updatePermissionOverwrite(e,a).then(i,i)}else{var l=r.pop();if(null==l)return i();o.Z.clearPermissionOverwrite(e,l).then(i,i)}};i()})).then((function(){t.Z.dispatch({type:"CHANNEL_SETTINGS_PERMISSIONS_SAVE_SUCCESS",silent:i})}))}},304856:(e,n,r)=>{r.d(n,{GJ:()=>y,X0:()=>g,W:()=>b,aq:()=>N,pM:()=>O,ik:()=>T,Wx:()=>A,kA:()=>_,RZ:()=>w,iI:()=>L,cR:()=>Z,zB:()=>j,yv:()=>D,_A:()=>k,$e:()=>H,Yh:()=>B,Yk:()=>G,RD:()=>z,nT:()=>V,$7:()=>U,Tj:()=>Y})
;var t=r(368365),i=r(316921),o=r(289965),a=r(780921),l=r(53551),s=r(212218),u=r(859023),c=r(268333),d=r(90816),f=r(890889),E=r(964199),h=r(862045),p=r(461061),S=r(959797);function v(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function y(e){return t.Z.has(e.permissions,p.Plq.ADMINISTRATOR)}function m(e){return t.Z.has(e.permissions,p.Plq.ADMINISTRATOR)?h.aC.ADMINISTRATOR:h.aC.ROLE}function g(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=m(e);return{rowType:t,colorString:null!==(n=e.colorString)&&void 0!==n?n:(0,i.Rf)(p.p6O),name:e.name,id:e.id,disabled:y(e)||r,key:"".concat(t,":").concat(e.id),tags:e.tags}}function b(e,n){var r=y(e)?0:1,t=y(n)?0:1;return r!==t?r-t:n.position-e.position}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_NO_ROLES;return[{rowType:h.aC.EMPTY_STATE,colorString:(0,i.Rf)(p.p6O),name:e,disabled:!0,
id:"EMPTY_STATE"}]}function R(e,n,r,i){var o=u.default.getCurrentUser();if(null==o)return!1;if(null==e)return o.id!==n;var a=e.permissionOverwrites[n];null!=(null==i?void 0:i[n])&&(a=i[n]);return null==a||!t.Z.has(a.allow,r)}function O(e,n){return e===n}function M(e,n){return!O(e.id,n.id)}function T(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};return null==e.roles?[]:Object.values(e.roles).filter((function(i){return!y(i)&&R(n,i.id,r)&&M(e,i)&&t(i.name)})).sort(b).map((function(e){return g(e)}))}function A(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};return null==e.roles?[]:Object.values(e.roles).filter((function(t){return!y(t)&&R(n,t.id,r)&&M(e,t)&&i(t.name)})).sort(b).map((function(e){return g(e,t.Z.has(e.permissions,r))}))}function _(e,n,r,t){var i=[];if(null==e.roles)return i;i=function(e,n,r,t){return Object.values(e.roles).filter((function(i){return y(i)||!R(n,i.id,r,t)&&M(e,i)}))
}(e,n,r,t).sort(b).map((function(e){return g(e)}));return 0===i.length?N(S.Z.Messages.CHANNEL_PERMISSIONS_NO_ROLES):i}function w(e,n,r,i){var o=[];if(null==e.roles)return o;o=function(e,n,r,i){return Object.values(e.roles).filter((function(o){var a;return y(o)||!R(n,o.id,r,i)&&M(e,o)||t.Z.has(t.Z.combine(o.permissions,null===(a=n.permissionOverwrites[o.id])||void 0===a?void 0:a.allow),r)}))}(e,n,r,i).sort(b).map((function(e){return g(e,t.Z.has(e.permissions,r))}));return 0===o.length?N(S.Z.Messages.CHANNEL_PERMISSIONS_NO_ROLES):o}function I(e,n){var r;return null!==(r=s.ZP.getNick(n.id,e.id))&&void 0!==r?r:E.ZP.getName(e)}function C(e,n){return n.isOwner(e)}function x(e,n){var r=function(e,n){return n.isOwner(e)?h.aC.OWNER:h.aC.MEMBER}(e,n);return{rowType:r,name:I(e,n),userTag:e.tag,id:e.id,avatarURL:e.getAvatarURL(n.id,24),bot:e.bot,verifiedBot:e.isVerifiedBot(),disabled:C(e,n),key:"".concat(r,":").concat(e.id)}}function P(e,n){
return e.rowType!==n.rowType?e.rowType-n.rowType:e.name.toLocaleLowerCase().localeCompare(n.name.toLocaleLowerCase())}function L(e,n,r,t){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!0};return e.map(u.default.getUser).filter(d.lm).filter((function(e){return!r.isOwner(e)&&R(n,e.id,t)&&(i(I(e,r))||i(e.username)||i(e.discriminator))})).map((function(e){return x(e,r)})).sort(P)}function Z(e,n,r,t,i){return function(e,n,r,t,i){return e.map(u.default.getUser).filter(d.lm).filter((function(e){return!R(n,e.id,t,i)||C(e,r)}))}(e,n,r,t,i).map((function(e){return x(e,r)})).sort(P)}function j(e,n){switch(e){case h.aC.ROLE:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_ROLE;case h.aC.OWNER:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_OWNER;case h.aC.ADMINISTRATOR:return S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_ADMINISTRATOR;case h.aC.MEMBER:return n?S.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_ROW_MEMBER:null
;case h.aC.EMPTY_STATE:return null}}function D(e){switch(e){case h.aC.ROLE:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP;case h.aC.OWNER:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP_OWNER;case h.aC.ADMINISTRATOR:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP_ADMINISTRATOR;case h.aC.MEMBER:return S.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TOOLTIP;case h.aC.EMPTY_STATE:default:return null}}function k(e,n,r){var i=e.permissionOverwrites[e.guild_id];null==i&&(i=f.ZP.makeEveryoneOverwrite(e.guild_id));var o=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){v(e,n,r[n])}))}return e}({},i);o.deny=t.Z.remove(o.deny,n);o.allow=t.Z.remove(o.allow,n);r||(o.deny=t.Z.add(o.deny,n));return o}function H(e,n,r){
var t=k(e,n,r);(0,o.kY)(e,t.id,t.allow,t.deny)}function B(e,n){var r=u.default.getCurrentUser();if(null!=r){var i=e.permissionOverwrites[r.id];if(null==i){var l={id:r.id,type:a.BN.MEMBER,allow:t.Z.add(f.ZP.NONE,n),deny:f.ZP.NONE};(0,o.hw)(e.id,[l],!0)}else{var s=i.allow,c=i.deny;s=t.Z.add(s,n);(0,o.kY)(e,i.id,s,c)}}}function G(e,n){if(null==e)return!1;var r=e.permissionOverwrites[e.guild_id];null!=(null==n?void 0:n[e.guild_id])&&(r=n[e.guild_id]);return null!=r&&t.Z.has(r.deny,e.accessPermissions)}function z(e){var n=Object.keys(e.roles);return 0!==n.length&&(1!==n.length||n[0]!==e.id)}function V(e,n,r){return e===p.d4z.GUILD_TEXT||e===p.d4z.GUILD_ANNOUNCEMENT?n:!(0,l.bw)(e)&&e!==p.d4z.GUILD_CATEGORY||n&&r}function U(e){switch(e){case p.d4z.GUILD_TEXT:case p.d4z.GUILD_ANNOUNCEMENT:return S.Z.Messages.PRIVATE_TEXT_CHANNEL_CREATION_PERMISSION_MISSING_HINT.format();case p.d4z.GUILD_VOICE:return S.Z.Messages.PRIVATE_VOICE_CHANNEL_CREATION_PERMISSION_MISSING_HINT.format()
;case p.d4z.GUILD_CATEGORY:return S.Z.Messages.PRIVATE_CATEGORY_CREATION_PERMISSION_MISSING_HINT.format();default:return null}}function Y(e,n){var r=[];Object.values(e).forEach((function(e){var t=e.row;null!=t.id&&""!==t.id&&(t.rowType===h.aC.ROLE?r.push((0,c.rX)(t.id,n)):t.rowType===h.aC.MEMBER&&r.push((0,c.jZ)(t.id,n)))}));return r}},87310:(e,n,r)=>{r.r(n);r.d(n,{AddMembersBody:()=>te,MemberRoleSelector:()=>ie,default:()=>oe,getFullRowId:()=>K});var t=r(785893),i=r(667294),o=r(294184),a=r.n(o),l=r(125447),s=r(363010),u=r(331535),c=r(289965),d=r(97638),f=r(598229),E=r(53551),h=r(356004),p=r(212218),S=r(653772),v=r(893321),y=r(649762),m=r(487502),g=r(272729),b=r(733399),N=r(943327),R=r(806499),O=r(67416),M=r(766936),T=r(880068),A=r(932847),_=r(268333),w=r(462020),I=r(763611),C=r(304856),x=r(35021),P=r.n(x);const L=i.forwardRef((function(e,n){
var r=e.query,i=e.onQueryChange,o=e.onRemoveTag,a=e.onSelect,l=e.onSelectionChange,s=e.selectedSection,u=e.selectedRow,c=e.tags,f=e.sections,E=e.placeholder,h=void 0===E?"":E,p=e.focusAfterReady,S=e.isReady,v=e["aria-labelledby"],y=e["aria-controls"];return(0,t.jsx)(d.ZP,{autoFocus:!0,className:P().searchBar,maxHeight:100,onQueryChange:i,onRemoveTag:o,selectedSection:s,selectedRow:u,onSelect:a,onSelectionChange:l,placeholder:0===c.length?h:"",query:r,ref:n,size:d.ZP.Sizes.MEDIUM,tags:c,sections:f,focusAfterReady:p,isReady:S,inputProps:{"aria-labelledby":v,"aria-controls":y,"aria-expanded":!0,"aria-activedescendant":"user-row-".concat(u)}})}));var Z=r(862045),j=r(461061),D=r(959797),k=r(618719),H=r.n(k);function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function G(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function z(e){return function(){var n=this,r=arguments
;return new Promise((function(t,i){var o=e.apply(n,r);function a(e){G(o,t,i,a,l,"next",e)}function l(e){G(o,t,i,a,l,"throw",e)}a(void 0)}))}}function V(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function U(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){V(e,n,r[n])}))}return e}function Y(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){
Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function q(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++){r=o[t];n.indexOf(r)>=0||(i[r]=e[r])}return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++){r=o[t];n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}}return i}function W(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(t=r.next()).done);a=!0){o.push(t.value);if(n&&o.length===n)break}}catch(e){l=!0;i=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return B(e,n);var r=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e){var n=function(e,n){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!==F(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===F(n)?n:String(n)}var F=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var X=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Q=(0,g.hQ)(),J=(0,g.hQ)();function K(e){return"".concat(e.rowType,":").concat(e.id)}function ee(e){return(0,t.jsx)(u.vw,{tag:"h5",
className:a()(H().sectionTitle,H().rowHeight),children:e},e)}function ne(e,n){return n?e.slice(1):e}function re(e){var n=e.id,r=e.children,i=e.rowLabel,o=e.checked,s=e.onSelect,c=e.disabled,d=e.showCheckbox,f=e.selected,E=e.onMouseEnter,h=e["aria-posinset"],p=e["aria-setsize"],S=(0,l.JA)(n);return(0,t.jsx)(u.P3,Y(U({},S),{id:n,className:a()(H().addMemberRow,V({},H().selectedRow,f)),onClick:function(e){if(!c){e.preventDefault();s()}},onMouseEnter:E,role:"option","aria-disabled":c,"aria-selected":o,"aria-setsize":p,"aria-posinset":h,children:(0,t.jsxs)(m.Z,{justify:m.Z.Justify.BETWEEN,align:m.Z.Align.CENTER,children:[d?(0,t.jsx)(u.XZ,{displayOnly:!0,size:18,value:o,type:u.XZ.Types.INVERTED,children:(0,t.jsx)("div",{className:H().checkboxLabel,children:r})}):r,null!=i?(0,t.jsx)(u.xv,{color:"text-muted",variant:"text-xs/normal",children:i}):null]})}))}function te(e){
var n,r=e.guild,o=e.channel,a=e.permission,l=e.pendingAdditions,u=e.setPendingAdditions,c=e.isStageChannel,f=void 0===c?null!=o&&o.isGuildStageVoice():c,E=e.description,h=function(e){var n=ne(g.trim(),v);return new RegExp("".concat(I.Z.escape(n)),"i").test(e)},S=W(i.useState(!1),2),v=S[0],y=S[1],m=W(i.useState(""),2),g=m[0],b=m[1],N=(0,s.e7)([p.ZP],(function(){return p.ZP.getMemberIds(r.id)}));v?n=[]:f?n=C.Wx(r,o,a,h):0===(n=C.ik(r,o,a,h)).length&&(""!==g.trim()||C.RD(r)||(n=C.aq()));var R=C.iI(N,o,r,a,h),O={placeholderText:D.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_PLACEHOLDER,hintText:D.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_SUBTITLE,renderEmptyText:function(e){return D.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_NO_RESULT.format({query:e})}},M=O.placeholderText,T=O.hintText,A=O.renderEmptyText;return(0,t.jsx)(ie,{pendingAdditions:l,query:g,onQueryChange:function(e){var n=e.trim(),t="@"===n.charAt(0);w.Z.requestMembers(r.id,ne(n,t),Z.EQ);b(e);y(t)},onClickRow:function(e){
var n=K(e);u((function(r){var t=U({},r);if(n in t)delete t[n];else{var i;e.rowType===Z.aC.ROLE||e.rowType===Z.aC.ADMINISTRATOR?i={type:d.Fj.ROLE,label:e.name,color:e.colorString}:e.rowType!==Z.aC.MEMBER&&e.rowType!==Z.aC.OWNER||(i={type:d.Fj.MEMBER,label:e.name,avatar:e.avatarURL});null!=i&&(t[n]={display:i,row:e})}return t}))},onRemovePendingAddition:function(e){u((function(n){n[e];return q(n,[e].map($))}))},roles:n,members:R,placeholderText:M,hintText:T,renderEmptyText:A,isStageChannel:f,description:E})}function ie(e){var n=e.listClassName,r=e.pendingAdditions,o=e.query,l=e.onQueryChange,c=e.onClickRow,d=e.onRemovePendingAddition,E=e.roles,h=e.members,p=e.placeholderText,S=e.hintText,g=e.renderEmptyText,b=e.isStageChannel,R=e.focusSearchAfterReady,O=e.isReady,A=e.description,_=function(){var e;k(!(null===(e=I.current)||void 0===e?void 0:e.isScrolledToTop())&&te)},w=i.useRef(null),I=i.useRef(null),x=(0,s.e7)([v.Z],(function(){return v.Z.hidePersonalInformation
})),P=W(i.useState(!1),2),j=P[0],k=P[1],B=W(i.useState(0),2),G=B[0],z=B[1],U=W(i.useState(-1),2),Y=U[0],q=U[1],$=i.useCallback((function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];z(e);q(n);if(r){var t;null===(t=I.current)||void 0===t||t.scrollToIndex({section:null!=e?e:0,row:null!=n?n:0,padding:8})}}),[]),F=i.useCallback((function(e,n){if(null!=n){l("");var r=(e===Z.$M.ROLES?E:h)[n];r.rowType!==Z.aC.EMPTY_STATE&&c(r)}}),[E,h,c,l]),X=i.useCallback((function(e){var n;if(null!=e&&e.rowType!==Z.aC.EMPTY_STATE){c(e);l("");null===(n=w.current)||void 0===n||n.focus()}}),[c,l]),ne=i.useMemo((function(){return Object.keys(r)}),[r]),te=h.some((function(e){return!e.disabled}))||E.some((function(e){return!e.disabled}))||""===o.trim();i.useEffect((function(){_()}));return(0,t.jsxs)("div",{className:H().content,children:[function(){var e=A;null==e&&b&&(e=D.Z.Messages.CHANNEL_PERMISSIONS_MODERATOR_DESCRIPTION);return null==e||""===e?null:(0,t.jsx)(u.xv,{
color:"header-secondary",className:H().description,variant:"text-sm/normal",children:e})}(),(0,t.jsxs)("div",{className:a()(H().searchBox,V({},H().scrollSeparator,j)),children:[(0,t.jsx)(L,{ref:w,query:o,onQueryChange:l,selectedSection:G,selectedRow:Y,onSelectionChange:$,onSelect:F,tags:ne.map((function(e){return r[e].display})),sections:[E.length,h.length],onRemoveTag:function(e){d(ne[e])},placeholder:p,focusAfterReady:R,isReady:O,"aria-labelledby":Q,"aria-controls":J}),null!=S?(0,t.jsx)(u.xv,{variant:"text-xs/normal",children:S}):null]}),te?(0,t.jsx)(T.ZP,{ref:I,className:a()(H().roleMemberList,n),sections:[E.length,h.length],renderRow:function(e){var n,i,o=e.section,l=e.row,s=null,c=!1,d=!1,f=!1;switch(o){case Z.$M.ROLES:c=(i=K(s=E[l]))in r||s.disabled;d=s.disabled;f=G===Z.$M.ROLES&&Y===l;n=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:a()(H().rowHeight,H().alignCenter),children:(0,t.jsx)(N.Z,{color:s.colorString,height:20})}),(0,t.jsxs)("div",{className:H().rowLabel,
children:[(0,t.jsx)(u.xv,{variant:"text-sm/medium",className:H().rowTitle,color:s.rowType===Z.aC.EMPTY_STATE?"text-muted":"text-normal",children:s.name}),b&&s.disabled?(0,t.jsx)(u.xv,{color:"header-secondary",variant:"text-xs/normal",children:D.Z.Messages.CHANNEL_PERMISSIONS_ROLE_ALREADY_HAS_PERMISSIONS}):null]})]});break;case Z.$M.MEMBERS:c=(i=K(s=h[l]))in r||s.disabled;d=s.disabled;f=G===Z.$M.MEMBERS&&Y===l;n=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.ZP,{src:s.avatarURL,size:M.ZP.Sizes.SIZE_24,"aria-label":""}),(0,t.jsx)(u.xv,{className:H().rowLabel,"aria-hidden":!x,variant:"text-sm/normal",children:s.name}),s.bot&&(0,t.jsx)(y.Z,{verified:s.verifiedBot}),!x&&(0,t.jsx)(u.xv,{color:"text-muted",className:H().rowLabelSubText,variant:"text-sm/normal",children:s.userTag})]})}return null==s?null:(0,t.jsx)(re,{id:"user-row-".concat(l),rowLabel:C.zB(s.rowType),checked:c,disabled:d,onSelect:function(){return X(s)},showCheckbox:s.rowType!==Z.aC.EMPTY_STATE,onMouseEnter:function(){
return $(o,l,!1)},selected:f,"aria-posinset":l+1,"aria-setsize":E.length+h.length,children:(0,t.jsx)(m.Z,{align:m.Z.Align.CENTER,justify:m.Z.Justify.START,children:n})},i)},rowHeight:40,renderSection:function(e){switch(e.section){case Z.$M.ROLES:return ee(D.Z.Messages.ROLES);case Z.$M.MEMBERS:return ee(D.Z.Messages.MEMBERS)}},sectionHeight:32,onScroll:_,role:void 0,innerRole:"listbox",innerId:J,innerAriaMultiselectable:!0,innerAriaOrientation:"vertical"}):(0,t.jsxs)(m.Z,{className:n,align:m.Z.Align.CENTER,justify:m.Z.Justify.CENTER,direction:m.Z.Direction.VERTICAL,children:[(0,t.jsx)(f.Z,{className:H().noResultIcon}),(0,t.jsx)(u.xv,{variant:"text-sm/normal",children:g(o)})]})]})}function oe(e){var n=e.transitionState,r=e.onClose,o=e.channelId,a=e.newChannel,l=e.inSettings,c=W(i.useState(!1),2),d=c[0],f=c[1],p=W(i.useState({}),2),v=p[0],y=p[1],g=(0,s.e7)([h.Z],(function(){return h.Z.getChannel(o)}),[o]),N=(0,s.e7)([S.Z],(function(){return S.Z.getGuild(null==g?void 0:g.getGuildId())}))
;i.useEffect((function(){A.default.track(j.rMx.OPEN_MODAL,{type:"Grant Channel Access"})}),[]);if(null==g||null==N)return null;var M=a&&0===Object.keys(v).length;function T(){return(T=z((function(){return X(this,(function(e){switch(e.label){case 0:if(null==g||0===Object.keys(v).length){r();return[2]}f(!0);e.label=1;case 1:e.trys.push([1,3,,4]);return[4,ae(g,v,l)];case 2:e.sent();r();f(!1);return[3,4];case 3:e.sent();f(!1);return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}var _=(0,E.zi)(g.type)?b.Z:R.Z;return(0,t.jsxs)(O.Y0,{transitionState:n,size:O.Cg.SMALL,"aria-labelledby":Q,className:H().modalRoot,children:[(0,t.jsxs)(O.xB,{separator:!1,direction:m.Z.Direction.VERTICAL,align:m.Z.Align.CENTER,className:H().header,children:[(0,t.jsx)(u.X6,{id:Q,variant:"heading-xl/semibold",children:D.Z.Messages.CHANNEL_PERMISSIONS_ADD_MEMBERS_TITLE}),(0,t.jsxs)(u.xv,{variant:"text-md/normal",color:"header-secondary",className:H().headerSubtitle,children:[(0,t.jsx)(_,{height:16,width:16,
className:H().headerSubtitleIcon}),g.name]})]}),(0,t.jsx)(te,{guild:N,channel:g,permission:g.accessPermissions,pendingAdditions:v,setPendingAdditions:y}),(0,t.jsxs)(O.mz,{children:[!M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.zx,{onClick:function(){return T.apply(this,arguments)},look:u.zx.Looks.FILLED,size:u.zx.Sizes.SMALL,className:H().button,submitting:d,children:D.Z.Messages.DONE}),(0,t.jsx)(u.zx,{look:u.zx.Looks.LINK,color:u.zx.Colors.TRANSPARENT,onClick:r,size:u.zx.Sizes.SMALL,children:D.Z.Messages.CANCEL})]}),M&&(0,t.jsx)(u.zx,{look:u.zx.Looks.FILLED,color:u.zx.Colors.PRIMARY,onClick:r,size:u.zx.Sizes.SMALL,children:D.Z.Messages.PRIVATE_CHANNEL_ADD_MEMBERS_MODAL_SKIP})]})]})}function ae(e,n,r){var t=[];Object.values(n).forEach((function(n){var r=n.row;null!=r.id&&""!==r.id&&(r.rowType===Z.aC.ROLE?t.push((0,_.rX)(r.id,e.type)):r.rowType===Z.aC.MEMBER&&t.push((0,_.jZ)(r.id,e.type)))}));return(0,c.hw)(e.id,t,r)}},839574:(e,n,r)=>{r.d(n,{C:()=>y,u:()=>N})
;var t=r(368365),i=r(992497),o=r(7046),a=r(653772),l=r(182434),s=r(836670),u=r(17611),c=r(353637),d=r(461061),f=r(959797);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function h(e,n,r,t,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?n(s):Promise.resolve(s).then(t,i)}function p(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function a(e){h(o,t,i,a,l,"next",e)}function l(e){h(o,t,i,a,l,"throw",e)}a(void 0)}))}}function S(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e,n){var r,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;(t=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;t=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0
;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=n.call(e,a)}catch(e){o=[6,e];t=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function y(e,n){return m.apply(this,arguments)}function m(){return(m=p((function(e,n){return v(this,(function(r){switch(r.label){case 0:return null==e?[2,!0]:[4,g(e,n,{removingView:!0,removingChat:!0})];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function g(e,n,r){return b.apply(this,arguments)}function b(){return(b=p((function(e,n,r){var t,i,o,f,E,h,p;return v(this,(function(v){switch(v.label){case 0:return null==(i=a.Z.getGuild(e))?[2,!0]:(o=null!=i&&(null===(t=i.features)||void 0===t?void 0:t.has(d.oNc.GUILD_ONBOARDING)))?o&&s.Z.shouldFetchPrompts(e)?[4,(0,l.eM)(e)]:[3,2]:[2,!0];case 1:v.sent();v.label=2;case 2:f=s.Z.getDefaultChannelIds(e)
;if(!f.includes(n))return[2,!0];E=r.removingView&&f.length-1<c.md;h=(0,u.od)(e,S(f));p=(r.removingChat||r.removingView)&&h.length-1<c.X;return[2,!E&&!p]}}))}))).apply(this,arguments)}function N(e,n,r){return R.apply(this,arguments)}function R(){return(R=p((function(e,n,r){var a,l,s,u;return v(this,(function(c){switch(c.label){case 0:if(null==(a=e.getGuildId()))return[2,!0];null!=r&&(n=t.Z.filter(n,t.Z.invert(r)));l=e.permissionOverwrites[a];s=null!=l?t.Z.filter(l.deny,t.Z.invert(l.allow)):t.Z.deserialize(0);u={removingView:t.Z.has(n,d.Plq.VIEW_CHANNEL)&&!t.Z.has(s,d.Plq.VIEW_CHANNEL),removingChat:!1};e.isForumChannel()?u.removingChat=t.Z.has(n,d.Plq.SEND_MESSAGES_IN_THREADS)&&!t.Z.has(s,d.Plq.SEND_MESSAGES_IN_THREADS):u.removingChat=t.Z.has(n,d.Plq.SEND_MESSAGES)&&!t.Z.has(s,d.Plq.SEND_MESSAGES);return u.removingChat||u.removingView?[4,g(a,e.id,u)]:[2,!0];case 1:if(!c.sent()){i.Z.show({title:f.Z.Messages.CANNOT_CHANGE_CHANNEL_PERMS,
body:f.Z.Messages.ONBOARDING_CHANNEL_THRESHOLD_WARNING.format({onClick:function(){i.Z.close();o.Z.open(a,d.pNK.ONBOARDING)}})});return[2,!1]}return[2,!0]}}))}))).apply(this,arguments)}},598229:(e,n,r)=>{r.d(n,{Z:()=>s});var t=r(785893),i=(r(667294),r(294184)),o=r.n(i),a=r(735716),l=r.n(a);function s(e){var n=e.className;return(0,t.jsx)("div",{className:o()(l().image,n)})}}}]);
//# sourceMappingURL=83095bfd363aca9d7f4f.js.map