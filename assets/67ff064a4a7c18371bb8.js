"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[35175],{97638:(e,n,t)=>{t.d(n,{Fj:()=>R,BK:()=>C,ZP:()=>j});var r=t(785893),o=t(667294),u=t(294184),i=t.n(u),l=t(213192),a=t.n(l),c=t(647446),s=t(331535),f=t(719455),d=t(469282),p=t(766936),h=t(725002),g=t(170729),v=t(461061),m=t(959797),y=t(544064),b=t.n(y);function E(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function O(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return S(e)}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){
O(e,n,t[n])}))}return e}function _(e,n){return!n||"object"!==Z(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function w(e,n){w=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return w(e,n)}var Z=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return _(this,t)}}var T=Object.freeze({SMALL:b().small,MEDIUM:b().medium,LARGE:b().large}),R=a()({MEMBER:null,ROLE:null,CHANNEL:null}),C=function(e){
var n,t,o=e.hasContent,u=e.onClear,l=e.className,a=e.themeOverride,c=e.size,p=void 0===c?T.SMALL:c;return(0,r.jsx)(s.P3,{className:i()(l,b().iconLayout,p,(0,g.Q)(a),O({},b().clear,o)),onClick:function(e){e.stopPropagation();null!=u&&u(e)},onMouseDown:function(e){e.preventDefault();e.stopPropagation()},tabIndex:o?0:-1,"aria-hidden":!o,"aria-label":m.Z.Messages.SEARCH_CLEAR,focusProps:{offset:4},children:(0,r.jsxs)("div",{className:b().iconContainer,children:[(0,r.jsx)(d.Z,{className:i()((n={},O(n,b().icon,!0),O(n,b().visible,!o),n))}),(0,r.jsx)(f.Z,{className:i()((t={},O(t,b().icon,!0),O(t,b().visible,o),t))})]})})},A=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&w(e,n)}(t,e);var n=I(t);function t(){E(this,t);var e;(e=n.apply(this,arguments)).defaultInputProps={role:"combobox","aria-haspopup":"listbox",
"aria-autocomplete":"list"};e.ref=o.createRef();e.containerRef=o.createRef();e.handleKeyDown=function(n){var t=e.props,r=t.onActivate,o=t.onKeyDown,u=t.onQueryChange,i=t.useKeyboardNavigation;null!=o&&o(n);var l=e.ref.current;if(null!=l&&null==r)if(n.keyCode===v.yXg.ESCAPE&&null!=l.value&&""!==l.value&&l.value.length>0){l.value="";null!=u&&u("")}else i&&(e.props.gridResults?e.handleKeyDownGrid(n):e.handleKeyDownList(n));else n.keyCode!==v.yXg.TAB&&null!=r&&r(n)};e.handleChange=function(n){var t=e.props.onQueryChange;null!=t&&t(n.currentTarget.value)};e.handleFocus=function(n){var t=e.props.onFocus;null!=t&&t(n)};e.handleClear=function(){var n=e.props.onClear,t=e.ref.current;null!=n&&n();null!=t&&t.focus()};e.handleRemoveTag=function(n){var t=e.props.onRemoveTag;null==t||t(n)};e.focus=function(){var n=e.ref.current;null!=n&&n.focus()};return e}var u=t.prototype;u.componentDidUpdate=function(e){var n=this.props,t=n.focusAfterReady,r=n.isReady;t&&!e.isReady&&r&&this.focus()}
;u.handleKeyDownGrid=function(e){var n=this.props,t=n.selectedRow,r=n.selectedColumn,o=n.sections,u=n.query,i=n.tags,l=n.onSelectionChange,a=n.onSelect,c=n.onRemoveTag,s=n.preventEscapePropagation;if(0!==o.length){switch(e.keyCode){case v.yXg.BACKSPACE:if((null==u||0===u.length)&&null!=i&&i.length>0){e.preventDefault();e.stopPropagation();null==c||c(i.length-1)}break;case v.yXg.ARROW_DOWN:e.preventDefault();e.stopPropagation();if(-1===t){t=0;r=0}else{(t+=1)>=o.length&&(t=o.length-1);r>=o[t]&&(r=o[t]-1)}break;case v.yXg.ARROW_UP:e.preventDefault();e.stopPropagation();if((t-=1)<0){t=0;r=0}else r>=o[t]&&(r=o[t]-1);break;case v.yXg.ARROW_LEFT:e.preventDefault();e.stopPropagation();-1===t&&(t=0);if((r-=1)<0)if((t-=1)>=0)r=o[t]-1;else if(t<0){t=0;r=0}break;case v.yXg.ARROW_RIGHT:e.preventDefault();e.stopPropagation();-1===t&&(t=0);if((r+=1)>=o[t]){r=0;(t+=1)>=o.length&&(r=o[t=o.length-1]-1)}break;case v.yXg.ENTER:e.preventDefault();e.stopPropagation();-1===t&&(t=0);-1===r&&(r=0)
;if(t>=o.length||r>=o[t])return;null!=a&&a(t,r,e);return;case v.yXg.ESCAPE:e.preventDefault();s&&e.stopPropagation();null!=a&&a(null,null,e);return;default:return}null!=l&&l(t,r)}};u.handleKeyDownList=function(e){var n=this.props,t=n.sections,r=n.selectedSection,o=n.selectedRow,u=n.onSelect,i=n.onSelectionChange,l=n.query,a=n.tags,c=n.preventEscapePropagation,s=this.ref.current;if(null!=s)switch(e.keyCode){case v.yXg.BACKSPACE:if((null==l||0===l.length)&&null!=a&&a.length>0){var f,d;e.preventDefault();e.stopPropagation();null===(d=(f=this.props).onRemoveTag)||void 0===d||d.call(f,a.length-1)}break;case v.yXg.ARROW_DOWN:e.preventDefault();e.stopPropagation();if(t.length>r&&++o>=t[r]){++r>=t.length&&(r=0);o=0}null==i||i(r,o);break;case v.yXg.ARROW_UP:e.preventDefault();e.stopPropagation();if(--o<0){--r<0&&(r=t.length-1);o=t[r]-1}null==i||i(r,o);break;case v.yXg.ENTER:e.preventDefault();e.stopPropagation();t.length>r&&t[r]>o&&(null==u||u(r,o,e));break;case v.yXg.ESCAPE:e.preventDefault()
;c&&e.stopPropagation();null==u||u(null,null,e);s.blur()}};u.render=function(){var e=this,n=this.props,t=n.autoFocus,o=n.query,u=n.placeholder,l=void 0===u?m.Z.Messages.DM_SEARCH_PLACEHOLDER:u,a=n.themeOverride,d=n.disabled,v=n.onClear,y=n.size,E=n.maxHeight,S=n.tags,_=n.onActivate,w=n.className,Z=n.inputProps,I=n.focusAfterReady,T=null!=o&&o.length>0,A=!1,j=[];if(null!=S&&S.length>0)if("string"==typeof S[0]){S.forEach((function(n,t){return j.push((0,r.jsxs)(s.ee,{focusProps:{offset:4},className:b().tag,onClick:e.handleRemoveTag.bind(e,t),children:[n,(0,r.jsx)(f.Z,{className:b().close,"aria-label":m.Z.Messages.REMOVE})]},t))}))}else{A=!0;S.forEach((function(n,t){return j.push((0,r.jsxs)(s.ee,{className:i()(b().tag,b().richTag),onClick:e.handleRemoveTag.bind(e,t),children:[n.type===R.MEMBER&&n.avatar&&(0,r.jsx)(p.ZP,{src:n.avatar,"aria-hidden":!0,size:p.ZP.Sizes.SIZE_16}),n.type===R.ROLE&&n.color&&(0,r.jsx)("span",{className:b().tagRoleColor,style:{backgroundColor:n.color}}),(0,
r.jsx)("span",{className:b().tagLabel,children:n.label}),(0,r.jsx)(f.Z,{className:b().close,"aria-label":m.Z.Messages.REMOVE})]},t))}))}return(0,r.jsx)(c.tE,{focusTarget:this.ref,ringTarget:this.containerRef,children:(0,r.jsx)("div",{ref:this.containerRef,className:i()(w,b().container,y,(0,g.Q)(a),O({},b().disabled,d)),children:(0,r.jsxs)(h.ZP,{className:b().inner,style:{maxHeight:E},children:[j,(0,r.jsx)("input",P({className:i()(b().input,O({},b().richTagInput,A)),type:"text",ref:this.ref,spellCheck:"false",placeholder:l,value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,disabled:d,"aria-disabled":d,autoFocus:!I&&t,onMouseDown:_},this.defaultInputProps,Z)),null!=v?(0,r.jsx)(C,{size:y,themeOverride:a,hasContent:T,onClear:this.handleClear}):null]})})})};return t}(o.Component);A.Sizes=T;A.defaultProps={size:T.SMALL,query:"",sections:[],selectedSection:0,selectedRow:-1,selectedColumn:-1,gridResults:!1,disabled:!1,autoFocus:!1,
preventEscapePropagation:!0,useKeyboardNavigation:!0};const j=A},743175:(e,n,t)=>{t.d(n,{O2:()=>q,Eg:()=>J,W3:()=>ee,ES:()=>ne,kF:()=>te,eV:()=>ue,ur:()=>ie,iM:()=>le,xw:()=>ae,IN:()=>ce,Bs:()=>se,nP:()=>fe,AJ:()=>de,MC:()=>pe,Q:()=>he,mX:()=>ge,r_:()=>ve,J$:()=>ye,ql:()=>be,Vm:()=>Ee,jR:()=>Oe,eZ:()=>Se,XZ:()=>Pe,ku:()=>_e,vP:()=>we,M1:()=>Ze,xz:()=>Ie});var r=t(667294),o=t(496486),u=t.n(o),i=t(123042),l=t(451964),a=t(277563),c=t(363010),s=t(820028),f=t(173436),d=t(320646),p=t(156501),h=t(664257),g=t(635940),v=t(536419),m=t(978571),y=t(60890),b=(t(577028),t(973381)),E=t(328378),O=t(3056),S=t(437803),P=t(356004),_=t(392115),w=t(210854),Z=t(653772),I=t(940712),T=t(283369),R=t(105405),C=t(475823),A=t(859023),j=t(90816),M=t(103686),N=t(941361),D=t(674455),L=t(829568),x=t(9080),k=t(215219),U=t(232779),F=t(809633),G=t(461061),X=t(35236),H=t(504003);function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function B(e,n,t,r,o,u,i){try{
var l=e[u](i),a=l.value}catch(e){t(e);return}l.done?n(a):Promise.resolve(a).then(r,o)}function V(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){B(u,r,o,i,l,"next",e)}function l(e){B(u,r,o,i,l,"throw",e)}i(void 0)}))}}function Y(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function z(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function K(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=function(e,n){var t,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function l(u){return function(l){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),
0):r.next)&&!(o=o.call(r,u[1])).done)return o;(r=0,o)&&(u=[2&u[0],o.value]);switch(u[0]){case 0:case 1:o=u;break;case 4:i.label++;return{value:u[1],done:!1};case 5:i.label++;r=u[1];u=[0];continue;case 7:u=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1];o=u;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(u);break}o[2]&&i.ops.pop();i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e];r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},q=(0,v.Z)({id:"2023-01_forums_non_community",label:"Forum non-community",kind:"guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"On",config:{enabled:!0}}]});function $(e){var n=(0,c.e7)([Z.Z],(function(){return Z.Z.getGuild(e)}));return q.useExperiment({guildId:e
}).enabled||Boolean((null==n?void 0:n.hasFeature(G.oNc.COMMUNITY))||(null==n?void 0:n.hasFeature(G.oNc.INTERNAL_EMPLOYEE_ONLY)))}function J(e){return q.getCurrentConfig({guildId:e}).enabled}function ee(e){return $(e)}function ne(e,n,t){var o=(0,c.e7)([b.Z],(function(){return b.Z.hasLoaded(e.guild_id)}));r.useEffect((function(){if(o){var r=N.Z.getThreadIds(e.id,n,t),u=x.Z.getThreadIdsMissingCounts(e.guild_id,r).filter((function(e){return(0,U.nU)(e,[T.ZP])})).slice(0,180).map((function(e){return{threadId:e,ackMessageId:T.ZP.getTrackedAckMessageId(e)}}));u.length>0&&f.Z.dispatch({type:"REQUEST_FORUM_UNREADS",guildId:e.guild_id,channelId:e.id,threads:u})}}),[e.id,e.guild_id,o,t,n])}function te(e){return(0,c.e7)([b.Z,P.Z],(function(){var n=u()(b.Z.getThreadsForParent(e.guild_id,e.parent_id)).keys().filter((function(e){var n;return!0===(null===(n=P.Z.getChannel(e))||void 0===n?void 0:n.hasFlag(X.zZ.PINNED))})).head();return P.Z.getChannel(n)}))}function re(e){var n=null==e?void 0:e.parent_id
;return(0,c.cj)([P.Z],(function(){var e,t=P.Z.getChannel(n);return(null!==(e=null==t?void 0:t.availableTags)&&void 0!==e?e:[]).reduce((function(e,n){return z(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){Y(e,n,t[n])}))}return e}({},e),Y({},n.id,n))}),{})}),[n])}var oe=[];function ue(e){var n=re(e);return r.useMemo((function(){var t,r,o;return null!==(o=null===(r=null==e||null===(t=e.appliedTags)||void 0===t?void 0:t.map((function(e){return n[e]})))||void 0===r?void 0:r.filter(j.lm))&&void 0!==o?o:oe}),[n,null==e?void 0:e.appliedTags])}function ie(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=ue(e);return r.useMemo((function(){return[t.slice(0,n),Math.max(0,t.length-n)]}),[t,n])}function le(e,n){var t=(0,
c.Wu)([A.default],(function(){return n.map((function(e){return A.default.getUser(e)})).filter(j.lm)}));r.useEffect((function(){t.forEach((function(n){w.Z.requestMember(e.guild_id,n.id)}))}),[]);return t}function ae(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.R6.DURATION_AGO,o=r.useMemo((function(){return a.default.extractTimestamp(e.id)}),[e.id]),u=(0,S.Ok)(e),i=r.useMemo((function(){return(0,U.Uw)(n,t)}),[n,t]);return r.useMemo((function(){return n===l.z.CREATION_DATE?(0,S.Ye)(o,i):(0,S.Ye)(u,i)}),[u,n,o,i])}function ce(e){var n;return r.useMemo((function(){return u().maxBy(null!==(n=null==e?void 0:e.reactions)&&void 0!==n?n:[],(function(e){return Math.max(e.burst_count,e.count)}))}),[null==e?void 0:e.reactions])}function se(e){var n=null==e?void 0:e.defaultReactionEmoji,t=(0,c.e7)([_.Z],(function(){return null!=(null==n?void 0:n.emojiId)?_.Z.getUsableCustomEmojiById(n.emojiId):null}));return null==n?null:null!=n.emojiId&&null!=t?{id:n.emojiId,name:t.name,
animated:t.animated}:null!=n.emojiName?{id:n.emojiId,name:n.emojiName,animated:!1}:null}function fe(e){var n,t=(0,c.e7)([O.Z],(function(){return null!==(n=O.Z.getCount(e.id))&&void 0!==n?n:0})),r=(0,E.lE)(t,e.id),o=(0,c.e7)([T.ZP],(function(){return(0,U.nU)(e.id,[T.ZP])})),u=(0,c.e7)([x.Z],(function(){if(!o)return null;var n=x.Z.getCount(e.id);if(null!=n&&n>0){var r=Math.min(n,t);return r>=H.dg?"".concat(H.dg,"+"):r}return"1+"}));return{messageCount:t,isMaxMessageCount:null!=t&&"".concat(t)!==r,messageCountText:r,unreadCount:u}}function de(e){var n,t=(0,c.e7)([A.default],(function(){return A.default.getUser(e.ownerId)})),o=(0,c.e7)([L.Z],(function(){var n;return null===(n=L.Z.getMessage(e.id))||void 0===n?void 0:n.firstMessage})),u=(0,y.Sw)(null!==(n=null==o?void 0:o.author)&&void 0!==n?n:t,e);r.useEffect((function(){null!=e.ownerId&&w.Z.requestMember(e.guild_id,e.ownerId)}),[e.guild_id,e.ownerId]);return{user:t,author:u}}function pe(e){
var n,t,r=A.default.getUser(e.ownerId),o=null===(n=L.Z.getMessage(e.id))||void 0===n?void 0:n.firstMessage;return{user:r,author:(0,y.ij)(null!==(t=null==o?void 0:o.author)&&void 0!==t?t:r,e)}}function he(e){return(0,c.Wu)([C.Z,A.default,R.Z],(function(){var n=A.default.getCurrentUser();return u()(C.Z.getTypingUsers(e.id)).keys().filter((function(e){return e!==(null==n?void 0:n.id)})).reject(R.Z.isBlocked).map((function(e){return A.default.getUser(e)})).filter(j.lm).map((function(e){return e.id})).value()}))}function ge(e){var n=e.firstMessage,t=e.formatInline,o=void 0===t||t,u=e.noStyleAndInteraction,i=void 0===u||u,l=r.useMemo((function(){return null!=(null==n?void 0:n.content)&&""!==n.content?(0,m.ZP)(n,{formatInline:o,noStyleAndInteraction:i,allowHeading:!0,allowList:!0}):{hasSpoilerEmbeds:!1,content:null}}),[n,o,i]),a=l.hasSpoilerEmbeds;return{hasSpoilerEmbeds:a,content:l.content,firstMedia:(0,D.eL)(n,a),firstMediaIsEmbed:(0,D.vg)(n,a)}}function ve(e){return(0,
c.e7)([I.Z],(function(){return I.Z.can(G.Plq.MANAGE_CHANNELS,e)}))}var me={isNew:!1,hasUnreads:!1};function ye(e){return(0,c.cj)([Z.Z,T.ZP],(function(){var n,t=Z.Z.getGuild(null!==(n=e.getGuildId())&&void 0!==n?n:"");return null==t?me:(0,U.FS)(e,t,[T.ZP])}))}function be(e){return r.useMemo((function(){return null==e||null==e.template?"":e.template.trim()}),[e])}function Ee(e){var n=(0,c.e7)([I.Z],(function(){return I.Z.can(G.Plq.MANAGE_THREADS,e)}));return r.useMemo((function(){var t,r=K(null!==(t=e.availableTags)&&void 0!==t?t:[]);n||(r=r.filter((function(e){return!e.moderated})));return r}),[n,e.availableTags])}function Oe(e){return(0,c.e7)([I.Z],(function(){return I.Z.can(G.Plq.READ_MESSAGE_HISTORY,e)}))}function Se(e){return(0,c.e7)([I.Z],(function(){return I.Z.can(G.Plq.READ_MESSAGE_HISTORY,e)}))}function Pe(e){var n=e.channelId;return(0,c.cj)([k.Z],(function(){return{isSearchLoading:k.Z.getSearchLoading(n),searchQuery:k.Z.getSearchQuery(n),searchResults:k.Z.getSearchResults(n)}
}))}function _e(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Pe({channelId:e.id}),u=o.isSearchLoading,i=o.searchQuery,l=Oe(e),a=r.useRef(null),c=r.useRef(new Set);r.useEffect((function(){if(null!=i||null==a.current){if(null!=i&&0!==i.length&&!t)if(l){if((a.current!==i||c.current!==n)&&!u){var r=setTimeout(V((function(){return Q(this,(function(t){switch(t.label){case 0:a.current=i;c.current=n;t.label=1;case 1:t.trys.push([1,3,,4]);return[4,M.Z.searchForumPosts(e.guild_id,e.id,i,n)];case 2:t.sent();return[3,4];case 3:t.sent();return[3,4];case 4:return[2]}}))})),350);return function(){return clearTimeout(r)}}}else M.Z.clearForumSearch(e.id)}else{M.Z.clearForumSearch(e.id);a.current=null}}),[l,e.guild_id,e.id,t,u,i,n])}function we(e){var n=e.channel,t=e.sortOrder,o=e.tagFilter,u=e.shouldAutomaticallyAck,i=(0,c.Wu)([N.Z],(function(){return N.Z.getThreadIds(n.id,t,o)})),l=(0,c.e7)([N.Z],(function(){return u&&N.Z.getCanAckThreads()}),[u]);r.useEffect((function(){l&&(0,
d.U6)(n)}),[n,l]);return i}function Ze(e){var n=ve(e),t=(0,g.un)(s.z$.FORUM_CHANNEL_GRID_VIEW_UPSELL),o=$(e.guild_id),u=r.useRef(e.defaultForumLayout===i.X.DEFAULT||null==e.defaultForumLayout),l=(0,c.cj)([b.Z,L.Z,N.Z],(function(){var n=e.getGuildId();if(null==n)return{meetsThreshold:!1,loading:!0};if(!b.Z.hasLoaded(n))return{meetsThreshold:!1,loading:!0};var t=N.Z.getCurrentThreadIds();if(0===t.length)return{meetsThreshold:!1,loading:!0};var r=t.map((function(e){return L.Z.getMessage(e)})),o=!r.some((function(e){return e.loaded}));if(o)return{meetsThreshold:!1,loading:!0};var u=r.map((function(e){return e.firstMessage})).filter(j.lm);return 0===u.length?{meetsThreshold:!1,loading:!1}:{meetsThreshold:u.filter((function(e){return e.attachments.some(D.As)})).length/u.length>.7,loading:o}})),a=l.loading,f=l.meetsThreshold,d=!t&&n&&o&&u.current;return{showGridViewUpsell:d,shouldAutoEnableGridView:f&&d,gridViewUpsellLoading:a&&d}}function Ie(e){var n=h.Z.useExperiment({guildId:null!=e?e:""
}),t=p.Z.useExperiment({});return n.enabled||t.enabled}},674455:(e,n,t)=>{t.d(n,{dE:()=>d,As:()=>g,zy:()=>b,eL:()=>E,vg:()=>O,CB:()=>S,cp:()=>P});var r=t(3056),o=t(409271),u=t(356004),i=t(171447),l=t(859023),a=t(90816),c=t(6349);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function d(e,n){if(null!=e&&null!=e.embeds[0]){var t=e.embeds[0].color;return null!=t&&"#ffffff"===t.toLowerCase()||n?void 0:t}}function p(e){if(null==e)return!1;var n=e.filename,t=e.height,r=e.width;return c.IQ.test(n)&&null!=t&&t>0&&null!=r&&r>0}function h(e){return null!=e&&(null!=e&&c.XH.test(e.filename)&&null!=e.proxy_url)}function g(e){return p(e)||h(e)}function v(e){return c.XH.test(e)}function m(e){return function(e){if(!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.x4.getSetting()))return[];var n=null==e?void 0:e.attachments;return null==e||null==n?[]:n.filter(g).map((function(e){var n=e.proxy_url,t=e.url,r=e.description,o=e.spoiler,u=e.width,i=e.height,l=e.filename;if(null==u||null==i)return null;var a=v(l);return{src:a?"".concat(n,"?format=jpeg"):null!=n?n:t,width:u,height:i,spoiler:null!=o&&o,alt:r,isVideo:a}})).filter(a.lm)}(e,o.x4.useSetting())}function y(e,n){var t=o.RS.useSetting(),r=o.NA.useSetting();if(null==e)return[];var u=e.embeds
;return t&&r&&null!=u?u.map((function(e){var t,r=null!==(t=e.image)&&void 0!==t?t:e.thumbnail;null==r&&null!=e.images&&(r=e.images[0]);if(null!=r&&null!=r.url){var o=r.height,u=r.proxyURL,i=r.url,l=r.width,a=null!=u&&c.XH.test(u);return{src:null!=u&&""!==u?u:i,height:o,width:l,spoiler:n,isVideo:a}}})).filter(a.lm):[]}function b(e,n){var t=m(e),r=y(e,n);return f(t).concat(f(r))}function E(e,n){var t,r,o=m(e),u=y(e,n);return null!==(r=null!==(t=o[0])&&void 0!==t?t:u[0])&&void 0!==r?r:null}function O(e,n){var t=m(e),r=y(e,n);return null==t[0]&&null!=r[0]}function S(e,n){var t,o=u.Z.getChannel(n);if(null==o)return!1;var a=i.Z.getMessage(o.id,o.id);return null!=a&&(e.length>0&&null!=e.find((function(e){return e.isImage||e.isVideo}))&&o.isForumPost()&&o.ownerId===(null===(t=l.default.getCurrentUser())||void 0===t?void 0:t.id)&&0===r.Z.getCount(o.id)&&(0===a.attachments.length||null==a.attachments.find((function(e){return p(e)||h(e)}))))}function P(e){return e.reduce((function(e,n){return{
containsVideo:e.containsVideo||n.isVideo,containsGif:e.containsGif||c.LR.test(n.src)}}),{containsVideo:!1,containsGif:!1})}},9080:(e,n,t)=>{t.d(n,{Z:()=>b});var r=t(441143),o=t.n(r),u=t(363010),i=t(173436),l=t(973381),a=t(356004),c=t(283369);function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,n){return!n||"object"!==h(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function p(e,n){p=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return p(e,n)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return d(this,t)}}var v={},m=new Set;var y=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&p(e,n)}(t,e);var n=g(t);function t(){s(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(l.Z,a.Z,c.ZP)};r.getCount=function(e){return v[e]};r.getThreadIdsMissingCounts=function(e,n){o()(l.Z.hasLoaded(e),"must wait for THREAD_LIST_SYNC before calling this");return n.filter((function(e){return!(e in v)&&!m.has(e)}))};r.__getLocalVars=function(){return{counts:v,loadingThreadIds:m}};return t
}(u.ZP.Store);y.displayName="ForumPostUnreadCountStore";const b=new y(i.Z,{CONNECTION_OPEN:function(){v={};m=new Set},THREAD_CREATE:function(e){var n=e.channel;if(!e.isNewlyCreated)return!1;if(!l.Z.hasLoaded(n.guild_id))return!1;v[n.id]=0},MESSAGE_CREATE:function(e){var n=e.channelId,t=e.optimistic,r=e.isPushNotification;if(t||r)return!1;if(!(n in v))return!1;v[n]++},FORUM_UNREADS:function(e){e.threads.forEach((function(e){null!=e.count&&(v[e.threadId]=e.count)}))},MESSAGE_ACK:function(e){var n=e.channelId;if(!(n in v)){var t=a.Z.getChannel(n),r=a.Z.getChannel(null==t?void 0:t.parent_id);if(!(null==r?void 0:r.isForumChannel()))return!1}v[n]=c.ZP.getUnreadCount(n)},REQUEST_FORUM_UNREADS:function(e){e.threads.forEach((function(e){var n=e.threadId;return m.add(n)}))}})},328378:(e,n,t)=>{t.d(n,{lE:()=>i,WE:()=>a});var r=t(346529),o=t(504003),u=t(959797),i=function(e,n){if(null==e||e<0)return"0";var t=function(e){return r.Z.compare("992549565104128000",e)>-1}(n)
;return(null==n||t)&&e>=o.vw?"50+":e>=o.M3?"100k+":"".concat(e)},l=function(e,n,t){var r=i(e,t);return"0"===r?u.Z.Messages.SEE_THREAD:n.format({count:r})},a=function(e,n){return l(e,u.Z.Messages.THREAD_MESSAGE_COUNT,n)}},475823:(e,n,t)=>{t.d(n,{Z:()=>w});var r=t(363010),o=t(675860),u=t(173436),i=t(631134),l=t(429753),a=t(461061);function c(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){s(e,n,t[n])}))}
return e}function p(e,n){return!n||"object"!==g(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function h(e,n){h=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return h(e,n)}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)}}var m,y={},b=Object.freeze({});function E(e){var n;return null!==(n=y[e])&&void 0!==n?n:b}function O(e){var n=e.channelId,t=e.userId,r=d({},E(n));clearTimeout(r[t]);r[t]=function(e,n){
return setTimeout((function(){u.Z.dispatch({type:"TYPING_STOP",channelId:e,userId:n})}),a.I2i)}(n,t);y[n]=r}function S(e){var n=e.channelId,t=e.userId,r=y[n];if(null==r||null==r[t])return!1;var o=d({},r);clearTimeout(o[t]);delete o[t];y[n]=o}function P(){y={}}var _=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&h(e,n)}(t,e);var n=v(t);function t(){c(this,t);return n.apply(this,arguments)}var r=t.prototype;r.getTypingUsers=function(e){return E(e)};r.isTyping=function(e,n){return null!=E(e)[n]};r.__getLocalVars=function(){return{typingUsersByChannel:y,localTypingDelay:m,EMPTY_TYPING:b}};return t}(r.ZP.Store);_.displayName="TypingStore";const w=new _(u.Z,{TYPING_START:O,TYPING_STOP:S,TYPING_START_LOCAL:function(e){var n=e.channelId,t=i.default.getId();if(null==t)return!1;if(null!=m&&m.channelId!==n){
null!=m.timeout&&clearTimeout(m.timeout);m=null}var r=Date.now(),c=.8*a.I2i;if(null!=m&&(null!=m.timeout||m.prevSend+c>r))return!1;var s=null==m||m.prevSend>r-2*c?a.WQ8:0,f=setTimeout((function(){if(null!=m&&m.channelId===n&&t===i.default.getId()&&null!=m.timeout){m.timeout=null;(function(e){var n=E(e);return n===b?0:Object.keys(n).length})(n)>a.WiX||o.Z.post({url:a.ANM.TYPING(n),oldFormErrors:!0}).then((function(e){if(200===e.status){var t,r,o=null!==(t=e.body.message_send_cooldown_ms)&&void 0!==t?t:0,i=null!==(r=e.body.thread_create_cooldown_ms)&&void 0!==r?r:0;o>0&&u.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:n,slowmodeType:l.S.SendMessage,cooldownMs:o});i>0&&u.Z.dispatch({type:"SLOWMODE_SET_COOLDOWN",channelId:n,slowmodeType:l.S.CreateThread,cooldownMs:i})}}))}}),s);m={channelId:n,timeout:f,prevSend:r};return O({channelId:n,userId:t})},TYPING_STOP_LOCAL:function(e){var n=e.channelId,t=i.default.getId();if(null==t)return!1;if(null!=m&&m.channelId===n&&null!=m.timeout){
clearTimeout(m.timeout);m=null;return S({channelId:n,userId:t})}return!1},CONNECTION_OPEN:P,OVERLAY_INITIALIZE:P,MESSAGE_CREATE:function(e){var n=e.channelId,t=e.message.author;e.optimistic&&function(e){if(null==m||m.channelId!==e)return!1;null!=m.timeout&&clearTimeout(m.timeout);m=null}(n);return S({channelId:n,userId:t.id})}})}}]);
//# sourceMappingURL=67ff064a4a7c18371bb8.js.map