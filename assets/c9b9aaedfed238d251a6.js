"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[87996],{230931:(n,t,e)=>{e.d(t,{Z:()=>c});var i=e(785893),r=(e(667294),e(239396));function o(n,t,e){t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e;return n}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))));i.forEach((function(t){o(n,t,e[t])}))}return n}function c(n,t){return function(e){return(0,i.jsx)(r.Z,{page:t.page,section:t.section,object:t.object,objectType:t.objectType,children:(0,i.jsx)(n,a({},e))})}}},454313:(n,t,e)=>{e.d(t,{Z:()=>c});var i=e(785893),r=(e(667294),e(64833));function o(n,t,e){t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e;return n}function a(n){
for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))));i.forEach((function(t){o(n,t,e[t])}))}return n}function c(n,t){return function(e){var o=(0,r.Z)(t).AnalyticsLocationProvider;return(0,i.jsx)(o,{children:(0,i.jsx)(n,a({},e))})}}},251032:(n,t,e)=>{e.d(t,{Z:()=>K});var i=e(785893),r=(e(667294),e(363010)),o=e(331535),a=e(7584),c=e(881548),l=e(842592),u=e(64833),s=e(320115),d=e(769672),p=e(830260),f=e(838706),I=e(858303),y=e(584791),b=e(864345),v=e(656548),_=e(631134),h=e(356004),Z=e(95350),O=e(653772),S=e(940712),N=e(962564),m=e(105405),T=e(379822),E=e(979662),g=e(859023),j=e(882687),A=e(167122),C=e(897576),P=e(570992),x=e(823343),w=e(623899),U=e(779759),L=e(599865),G=e(665733),Y=e(909890),V=e(838889),M=e(174572),k=e(644723),D=e(488839),R=e(461061),J=e(64027),F=e(959797)
;function W(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function $(n,t,e,i,r,o,a){try{var c=n[o](a),l=c.value}catch(n){e(n);return}c.done?t(l):Promise.resolve(l).then(i,r)}function X(n){return function(){var t=this,e=arguments;return new Promise((function(i,r){var o=n.apply(t,e);function a(n){$(o,i,r,a,c,"next",n)}function c(n){$(o,i,r,a,c,"throw",n)}a(void 0)}))}}function q(n,t,e){t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e;return n}function z(n,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})));e.push.apply(e,i)}return e}(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}));return n}
function B(n){return function(n){if(Array.isArray(n))return W(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return W(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return W(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(e)throw new TypeError("Generator is already executing.")
;for(;a;)try{if(e=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;(i=0,r)&&(o=[2&o[0],r.value]);switch(o[0]){case 0:case 1:r=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;i=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(r=a.trys,r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1];r=o;break}if(r&&a.label<r[2]){a.label=r[2];a.ops.push(o);break}r[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(n,a)}catch(n){o=[6,n];i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function K(n,t){var W=(0,u.Z)().analyticsLocations,$=(0,r.e7)([g.default],(function(){return g.default.getCurrentUser()})),K=(0,r.e7)([w.ZP],(function(){return w.ZP.getSelfEmbeddedActivities()})),Q=(0,r.Wu)([E.Z],(function(){
return E.Z.getActivities().filter((function(n){return null!=n.application_id&&!(null==K?void 0:K.has(n.application_id))}))})),nn=(0,r.Wu)([N.Z],(function(){return null!=t?N.Z.getActivities(t.id,null==n?void 0:n.getGuildId()):[]}),[t,n]),tn=(0,r.Wu)([w.ZP],(function(){var e=null!=(null==n?void 0:n.id)?w.ZP.getEmbeddedActivitiesForChannel(n.id):w.i6;return null!=t?e.filter((function(n){return n.connections.has(t.id)})):e}),[t,n]),en=(0,M.Z)(),rn=(0,r.e7)([S.Z],(function(){return null==n||n.isPrivate()||S.Z.can(R.Plq.SEND_MESSAGES,n)}),[n]),on=(0,r.Wu)([A.Z],(function(){return B(nn.map((function(n){return null!=n.application_id&&A.Z.getState(n.application_id,R.mFx.JOIN)===R.OcF.LOADING}))).concat(B(tn.map((function(n){return A.Z.getState(n.application_id,R.mFx.JOIN)===R.OcF.LOADING}))))}),[nn,tn]),an=(0,s.Z)(B(nn.filter((function(n){return null!=(null==n?void 0:n.application_id)})).map((function(n){return n.application_id}))).concat(B(tn.map((function(n){return n.application_id
}))))),cn=(0,r.Wu)([h.Z,O.Z,Z.Z,m.Z,T.Z,j.Z,S.Z],(function(){return B(nn.map((function(e){return(0,L.Z)({user:null!=t?t:$,activity:e,application:an.find((function(n){return(null==n?void 0:n.id)===e.application_id})),channelId:null==n?void 0:n.id,currentUser:$,isEmbedded:(0,Y.Z)(e),ChannelStore:h.Z,GuildStore:O.Z,GuildMemberCountStore:Z.Z,RelationshipStore:m.Z,SelectedChannelStore:T.Z,VoiceStateStore:j.Z,PermissionStore:S.Z})}))).concat(B(tn.map((function(e){return(0,L.Z)({user:null!=t?t:$,activity:e,application:an.find((function(n){return(null==n?void 0:n.id)===e.application_id})),channelId:null==n?void 0:n.id,currentUser:$,isEmbedded:!0,ChannelStore:h.Z,GuildStore:O.Z,GuildMemberCountStore:Z.Z,RelationshipStore:m.Z,SelectedChannelStore:T.Z,VoiceStateStore:j.Z,PermissionStore:S.Z})}))))}),[nn,$,tn,t]),ln=(0,r.Wu)([p.Z,_.default],(function(){return nn.map((function(n){return n.type===R.IIU.LISTENING&&null!=t?(0,y.Z)(p.Z,_.default,t,n):void 0}))}),[t,nn]),un=(0,l.O)();if(!rn)return null
;var sn,dn=function(e,i){null!=n?a.Z.sendActivityInvite({type:e,channelId:n.id,activity:i,location:R.Sbl.CONTEXT_MENU}):null!=t&&a.Z.sendActivityInviteUser({type:e,userId:t.id,activity:i,location:R.Sbl.CONTEXT_MENU})},pn=function(r,o){var a=h.Z.getChannel(r),c=null==a?void 0:O.Z.getGuild(a.guild_id);if(null!=a&&null!=c)return null!=t?x.pu({channelId:a.id,applicationId:o,userId:t.id,location:R.t4x.CONTEXT_MENU}):null!=n&&n.type===R.d4z.GUILD_VOICE?(0,C.ZD)(X((function(){var t,r;return H(this,(function(l){switch(l.label){case 0:return[4,Promise.all([e.e(40532),e.e(66150),e.e(29655),e.e(42348),e.e(15643)]).then(e.bind(e,966150))];case 1:t=l.sent(),r=t.default;return[2,function(t){return(0,i.jsx)(r,z(function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))))
;i.forEach((function(t){q(n,t,e[t])}))}return n}({},t),{guild:c,channel:a,applicationId:o,analyticsLocation:n.type===R.d4z.GUILD_VOICE?R.ZY5.GUILD_CHANNEL:R.ZY5.DM_CHANNEL,source:R.t4x.ACTIVITY_INVITE}))}]}}))})),{modalKey:"use-activity-items-embedded-invite-modal"}):null!=(null==n?void 0:n.id)?x.sN({activityChannelId:a.id,invitedChannelId:n.id,applicationId:o,location:R.t4x.CONTEXT_MENU}):void 0},fn=(sn=X((function(n){var e;return H(this,(function(i){switch(i.label){case 0:return[4,c.Z.join({userId:t.id,sessionId:n.session_id,applicationId:n.application_id,channelId:T.Z.getVoiceChannelId(),messageId:null,intent:D.Ws.PLAY,embedded:(0,G.Z)(n,R.xjy.EMBEDDED)})];case 1:i.sent();(0,V.Z)({type:R.q5t.JOIN,userId:t.id,applicationId:n.application_id,partyId:null===(e=n.party)||void 0===e?void 0:e.id,locationObject:un.location,analyticsLocations:W});return[2]}}))})),function(n){return sn.apply(this,arguments)}),In=function(){var t=X((function(t){return H(this,(function(e){switch(e.label){
case 0:return[4,(0,U.Z)({activity:t,currentEmbeddedApplication:en,activityChannelId:null==n?void 0:n.id,locationObject:un.location,embeddedActivitiesManager:k.Z,analyticsLocations:W})];case 1:e.sent();return[2]}}))}));return function(n){return t.apply(this,arguments)}}(),yn=[];null==K||K.forEach((function(e){var r=null!=(null==t?void 0:t.id)&&e.connections.has(null==t?void 0:t.id),o=S.Z.can(R.Plq.CREATE_INSTANT_INVITE,n);null!=e.activity_id&&!r&&o&&yn.push((0,i.jsx)(d.sN,{id:"invite-to-join-embedded",label:F.Z.Messages.USER_ACTIVITY_ACTION_INVITE_TO_JOIN,subtext:e.name,action:function(){pn(e.channelId,e.application_id)}},"self-embedded-".concat(e.application_id)))}));Q.forEach((function(n,t){n.type===R.IIU.PLAYING&&(0,G.Z)(n,R.xjy.JOIN)?yn.push((0,i.jsx)(d.sN,{id:"invite-to-join",label:F.Z.Messages.USER_ACTIVITY_ACTION_INVITE_TO_JOIN,subtext:n.name,action:function(){return dn(R.mFx.JOIN,n)}},"self".concat(t))):n.type===R.IIU.LISTENING&&(0,G.Z)(n,R.xjy.SYNC)&&yn.push((0,i.jsx)(d.sN,{
id:"invite-to-listen",label:F.Z.Messages.USER_ACTIVITY_ACTION_INVITE_TO_LISTEN_ALONG,subtext:n.name,action:function(){return dn(R.mFx.LISTEN,n)}},"self".concat(t)))}));yn.length>0&&yn.push((0,i.jsx)(d.Cl,{}));nn.forEach((function(e,r){if(e.type===R.IIU.PLAYING&&(0,G.Z)(e,R.xjy.JOIN)&&null!=e.session_id&&null!=e.application_id)if(cn[r]){var a=on[r];yn.push((0,i.jsx)(d.sN,{id:"join",label:a?F.Z.Messages.USER_ACTIVITY_JOINING:F.Z.Messages.JOIN,disabled:a,hint:a?(0,i.jsx)(o.$j,{type:o.$j.Type.PULSING_ELLIPSIS}):null,subtext:e.name,action:function(){return fn(e)}},r))}else yn.push((0,i.jsx)(d.sN,{id:"ask-to-join",label:F.Z.Messages.USER_ACTIVITY_ACTION_ASK_TO_JOIN,subtext:e.name,action:function(){return dn(R.mFx.JOIN_REQUEST,e)}},r));else if(e.type===R.IIU.LISTENING&&(0,G.Z)(e,R.xjy.SYNC)&&null!=ln[r]){var c=ln[r],l=c.notPlayable,u=c.playingSameTrack,s=c.isCurrentUser,p=c.syncingWithUser,y=c.syncingWithParty,_=s||l||u,h=s||p||y;yn.push((0,i.jsx)(d.sN,{
id:"spotify-play-".concat(e.session_id),action:function(){return(0,v.Z)(c,J.kG.USER_ACTIVITY_PLAY)},label:(0,f.Z)(c,J.kG.USER_ACTIVITY_PLAY),subtext:_?(0,I.Z)(c,J.kG.USER_ACTIVITY_PLAY,null!=n?P.Z.getNickname(n.guild_id,n.id,t):void 0):void 0,disabled:_},"spotify-play-".concat(e.session_id)),(0,i.jsx)(d.sN,{id:"spotify-sync-".concat(e.session_id),action:function(){return(0,b.Z)(c,J.kG.USER_ACTIVITY_SYNC)},label:F.Z.Messages.USER_ACTIVITY_LISTEN_ALONG,subtext:h?(0,I.Z)(c,J.kG.USER_ACTIVITY_SYNC,null!=n?P.Z.getNickname(n.guild_id,n.id,t):void 0):void 0,disabled:h},"spotify-sync-".concat(e.session_id)))}}));tn.forEach((function(n,t){var e,r=n.connections.has(null!==(e=null==$?void 0:$.id)&&void 0!==e?e:""),a=t+nn.length,c=on[a]||r,l=F.Z.Messages.EMBEDDED_ACTIVITIES_JOIN_ACTIVITY;r?l=F.Z.Messages.USER_ACTIVITY_CANNOT_JOIN_SELF:on[a]&&(l=F.Z.Messages.USER_ACTIVITY_JOINING);cn[a]&&yn.push((0,i.jsx)(d.sN,{id:"embedded-activity-join-".concat(n.application_id),label:l,disabled:c,hint:on[a]?(0,
i.jsx)(o.$j,{type:o.$j.Type.PULSING_ELLIPSIS}):null,subtext:n.name,action:function(){return In(n)}},"embedded-activity-".concat(n.application_id)))}));return yn}}}]);
//# sourceMappingURL=c9b9aaedfed238d251a6.js.map