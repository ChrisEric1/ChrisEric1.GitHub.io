"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[36154],{542517:(t,n,e)=>{e.d(n,{Z:()=>u});var r=e(265688),i=e(2590),o=e(966334);function u(t){return null!=t&&t.type===i.IIU.LISTENING&&t.name===r.Z.get(i.ABu.SPOTIFY).name&&null!=t.party&&null!=t.party.id&&(0,o.Ps)(t.party.id)}},190344:(t,n,e)=>{e.d(n,{$C:()=>r,HD:()=>i,tI:()=>o});var r;!function(t){t[t.GLOBAL=0]="GLOBAL";t[t.GUILD=1]="GUILD"}(r||(r={}));function i(t){return{session_id:t.sessionId,user_id:t.userId,application_id:t.applicationId,channel_id:t.channelId,stream_key:t.streamKey}}function o(t,n){return{sessionId:t.session_id,userId:t.user_id,applicationId:t.application_id,channelId:t.channel_id,streamKey:t.stream_key,source:n}}},450136:(t,n,e)=>{e.d(n,{Z:()=>u});var r=e(489617),i=e(135855),o=e(2590);function u(t){var n=null;if(null!=t.emojiId&&"0"!==t.emojiId){var e=r.Z.getUsableCustomEmojiById(t.emojiId);n=null!=e?{id:e.id,name:e.name,animated:e.animated}:null
}else if(null!=t.emojiName&&""!==t.emojiName){var u=i.ZP.getByName(i.ZP.convertSurrogateToName(t.emojiName,!1));n=null!=u?{id:null,name:u.surrogates,animated:!1}:null}var a=Number(t.expiresAtMs);return{name:"Custom Status",type:o.IIU.CUSTOM_STATUS,state:t.text.length>0?t.text:void 0,timestamps:a>0?{end:a}:void 0,emoji:n}}},82274:(t,n,e)=>{e.d(n,{Z:()=>J});var r=e(110251),i=e.n(r),o=e(496486),u=e.n(o),a=e(202351),l=e(575626),c=e(744564),s=e(306263),f=e(177570),d=e(736818),p=e(61209),v=e(567403),h=e(682776),y=e(840922),E=e(377128),_=e(473903),S=e(407561),I=e(602397),g=e(808194),O=e(933022),T=e(766496);function A(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function b(t){b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return b(t)}function m(t,n){return!n||"object"!==N(n)&&"function"!=typeof n?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function P(t,n){P=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return P(t,n)}var N=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function C(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=b(t);if(n){var i=b(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return m(this,e)}}var R="NO_GUILD",w=new l.Z((function(t){return[D(t)]}),(function(t){return t.id})),Z=new Set,U={};function D(t){var n;return null!==(n=t.getGuildId())&&void 0!==n?n:R}function L(t){return w.values(null!=t?t:void 0,!0).map((function(t){return t.id}))}function G(t){
if(!Z.has(t)){Z.add(t);u()(p.Z.getMutableGuildChannelsForGuild(t)).values().forEach((function(t){M(t)&&w.set(t.id,t)}))}}function j(t){var n=U[t];if(null!=n)return n;var e=p.Z.getChannel(t);if(null==e||!e.isGuildStageVoice())return null;G(e.guild_id);return M(e)?k(t):null}function k(t){var n=U[t];if(null==n){n=new g.ZP(t);U[t]=n;n.rebuild()}return n}function M(t){return null!=t&&t.isGuildStageVoice()&&I.ZP.countVoiceStatesForChannel(t.id)>0}function V(t,n){var e=p.Z.getChannel(t);return null!=e&&e.isGuildStageVoice()?0===n.size()?F(e.id):null==w.get(e.id)&&w.set(e.id,e):F(t)}function B(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L();return n.reduce((function(n,e){var r=k(e);if(!t(r))return n;V(e,r);return!0}),!1)}function x(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L();return B((function(n){return n.updateParticipant(t)}),n)}function F(t){if(null==t)return!1;delete U[t];w.delete(t);return!0}function Y(){Z.clear();w.clear();U={}}
function K(t,n,e){if(null!=e&&!t.has(e)){var r=p.Z.getChannel(e);if(null==r?void 0:r.isGuildStageVoice()){n.add(e);t.add(e)}}}function H(t){return x(t.user.id)}function z(t){return x(t.relationship.id)}function q(t){!function(t){var n=w.values(t),e=!0,r=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var a=o.value;w.delete(a.id);delete U[a.id]}}catch(t){r=!0;i=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}Z.delete(t)}(t.guild.id)}function W(t){var n=t.streamKey,e=(0,s.my)(n),r=e.channelId,i=e.guildId,o=e.ownerId;return!(null==i||!Z.has(i))&&x(o,[r])}var Q=[],$=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&P(t,n)}(e,t);var n=C(e);function e(){A(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){
this.waitFor(d.default,_.default,p.Z,E.Z,S.Z,h.Z,I.ZP,v.Z,O.ZP,y.Z,T.Z,f.Z)};r.getParticipantsVersion=function(t){var n,e;return null==t?-1:null!==(e=null===(n=j(t))||void 0===n?void 0:n.version)&&void 0!==e?e:-1};r.getMutableParticipants=function(t,n){var e,r;return null==t?Q:null!==(r=null===(e=j(t))||void 0===e?void 0:e.toArray(n))&&void 0!==r?r:Q};r.getMutableRequestToSpeakParticipants=function(t){var n,e;return null!==(e=null===(n=j(t))||void 0===n?void 0:n.getRequestToSpeakParticipants())&&void 0!==e?e:Q};r.getRequestToSpeakParticipantsVersion=function(t){var n,e;return null!==(e=null===(n=j(t))||void 0===n?void 0:n.requestToSpeakVersion)&&void 0!==e?e:-1};r.getParticipantCount=function(t,n){var e,r;return null!==(r=null===(e=j(t))||void 0===e?void 0:e.size(n))&&void 0!==r?r:0};r.getChannels=function(t){G(null!=t?t:R);return w.values(null!=t?t:R)};r.getChannelsVersion=function(){return w.version};r.getParticipant=function(t,n){var e,r
;return null!==(r=null===(e=j(t))||void 0===e?void 0:e.getParticipant(n))&&void 0!==r?r:null};r.__getLocalVars=function(){return{GUILDLESS_GUILD_ID:R,activeStageChannels:w,trackedGuildIds:Z,stageParticipantsByChannelId:U,NO_PARTICIPANTS:Q}};return e}(a.ZP.Store);$.displayName="StageChannelParticipantStore";const J=new $(c.Z,{CONNECTION_OPEN:Y,OVERLAY_INITIALIZE:Y,VOICE_STATE_UPDATES:function(t){var n=t.voiceStates,e=new Set;return n.reduce((function(t,n){if(null==n.guildId||!Z.has(n.guildId))return t;var r=new Set;K(e,r,n.oldChannelId);K(e,r,n.channelId);return 0===r.size?t:x(n.userId,Array.from(r))||t}),!1)},CHANNEL_DELETE:function(t){return F(t.channel.id)},GUILD_MEMBERS_CHUNK:function(t){var n=t.members,e=!1,r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){e=x(u.value.user.id)||e}}catch(t){i=!0;o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return e},USER_UPDATE:H,GUILD_MEMBER_REMOVE:H,GUILD_MEMBER_UPDATE:H,
CHANNEL_UPDATES:function(t){var n=t.channels.reduce((function(t,n){if(!n.isGuildStageVoice()||!Z.has(n.guild_id))return t;var e=w.get(n.id);if(null==e||i()(n.permissionOverwrites,e.permissionOverwrites))return t;t.push(n.id);w.set(n.id,n);return t}),[]);B((function(t){return t.rebuild()}),n);return n.length>0},GUILD_ROLE_UPDATE:function(t){var n=t.guildId;if(Z.has(n))return B((function(t){return t.rebuild()}),L(n))},RTC_CONNECTION_VIDEO:function(t){var n=t.channelId,e=t.guildId,r=t.userId;return!(null==e||!Z.has(e))&&x(r,[n])},STREAM_CLOSE:W,STREAM_DELETE:W,RELATIONSHIP_ADD:z,RELATIONSHIP_REMOVE:z,GUILD_CREATE:q,GUILD_DELETE:q,PASSIVE_UPDATE_V1:function(t){var n=!1,e=!0,r=!1,i=void 0;try{for(var o,u=L(t.guildId)[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){n=k(o.value).rebuild()||n}}catch(t){r=!0;i=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}return n}})},808194:(t,n,e)=>{e.d(n,{pV:()=>m,Ui:()=>P,ZP:()=>Z})
;var r=e(575626),i=e(306263),o=e(177570),u=e(61209),a=e(984216),l=e(21372),c=e(840922),s=e(473903),f=e(407561),d=e(773148),p=e(933022),v=e(766496),h=e(525261),y=(e(202351),e(567403)),E=e(563135);function _(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function S(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o=[],u=!0,a=!1;try{for(e=e.call(t);!(u=(r=e.next()).done);u=!0){o.push(r.value);if(n&&o.length===n)break}}catch(t){a=!0;i=t}finally{try{u||null==e.return||e.return()}finally{if(a)throw i}}return o}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return _(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _(t,n)
}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(t,n){var e=S(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[y.Z,l.ZP],2),r=e[0],i=e[1];if(null==t||null==n)return null;var o=r.getGuild(t);if(null==o)return null;var u=i.getMember(o.id,n);return null==u?null:E.ZP.getHighestHoistedRole(o,u)};var g=e(2590);function O(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function T(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function A(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){T(t,n,e[n])}))}return t}function b(t,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})));e.push.apply(e,r)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}var m,P;!function(t){t.SPEAKER="SPEAKER";t.AUDIENCE="AUDIENCE";t.NO_ROLE="NO_ROLE";t.ALL_REQUESTED_TO_SPEAK="ALL_REQUESTED_TO_SPEAK";t.REQUESTED_TO_SPEAK_ONLY="REQUESTED_TO_SPEAK_ONLY";t.BLOCKED="BLOCKED";t.FRIEND="FRIEND";t.SELECTED="SELECTED";t.MEDIA="MEDIA"}(m||(m={}));!function(t){t.VOICE="VOICE";t.STREAM="STREAM"}(P||(P={}));function N(t){
var n,e=t.speaker,r=t.role,i=t.user,o=t.userNick,u=t.connectedOn,a=t.voiceState,l=e?"\0":"",c=t.type===P.STREAM?"\0":"",s=a.selfMute?"":"\0",f=a.selfVideo?"\0":"",d="".concat(null!==(n=null==r?void 0:r.position)&&void 0!==n?n:999).padStart(3,"0");return"".concat(l).concat(c).concat(s).concat(f).concat(d).concat(u).concat(function(t,n){return"".concat(t.toLowerCase().padEnd(32,"!")).concat(n.discriminator)}(o,i))}function C(t){var n=t.user,e=t.voiceState.requestToSpeakTimestamp;return null==e?n.id:"".concat(Date.parse(e)).concat(n.id)}function R(t){return t===h.xO.REQUESTED_TO_SPEAK||t===h.xO.REQUESTED_TO_SPEAK_AND_AWAITING_USER_ACK}function w(t){var n=t.speaker,e=t.role,r=t.rtsState,i=t.blocked,o=t.isFriend,u=[];R(r)&&u.push(m.ALL_REQUESTED_TO_SPEAK);r===h.xO.REQUESTED_TO_SPEAK&&u.push(m.REQUESTED_TO_SPEAK_ONLY);if(n)u.push(m.SPEAKER);else{null!=e?u.push(e.id):u.push(m.NO_ROLE);u.push(m.AUDIENCE)}i&&u.push(m.BLOCKED);o&&u.push(m.FRIEND);return u}var Z=function(){function t(n){
!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e;this.participants={};this._participantsIndex=new r.Z(w,N);this._requestToSpeakIndex=new r.Z((function(){return[]}),C);this.channelId=n;this.guildId=null===(e=u.Z.getChannel(n))||void 0===e?void 0:e.getGuildId()}var n=t.prototype;n._getParticipantsForUser=function(t,n){var e=[],r=f.Z.getVoiceStateForChannel(this.channelId,t);if(null==r)return e;var u=s.default.getUser(t);if(null==u){null!=this.guildId&&v.Z.isPublic(this.channelId)&&a.Z.requestMember(this.guildId,t);return e}var y,E,_,S=null!=n?n[0]:null,O={user:u,userNick:d.Z.getName(this.guildId,this.channelId,u),voiceState:r,role:I(this.guildId,t),speaker:p.ZP.isSpeaker(t,this.channelId),member:null!=this.guildId?l.ZP.getMember(this.guildId,t):null,blocked:c.Z.getRelationships()[u.id]===g.OGo.BLOCKED,isFriend:c.Z.isFriend(u.id),connectedOn:null!==(y=null==S?void 0:S.connectedOn)&&void 0!==y?y:Date.now()},T=b(A({},O),{
type:P.VOICE,id:u.id,rtsState:(0,h.gf)(r)});e.push(T);var m=null!==(_=o.Z.getStreamForUser(t,this.guildId))&&void 0!==_?_:o.Z.getActiveStreamForUser(t,this.guildId);if(null!=m&&m.channelId===this.channelId){var N=(0,i.V9)(m);E=b(A({},O),{id:N,type:P.STREAM,rtsState:h.xO.NONE});e.push(E)}return e};n.updateParticipant=function(t){var n=this,e=this.participants[t],r=this._getParticipantsForUser(t,e);if(null==e&&0===r.length)return!1;null==e||e.forEach((function(t){n._participantsIndex.delete(t.id);n._requestToSpeakIndex.delete(t.id)}));r.forEach((function(e){n._participantsIndex.set(e.id,e);e.id===t&&R(e.rtsState)?n._requestToSpeakIndex.set(t,e):n._requestToSpeakIndex.delete(t)}));this.participants[t]=r;return!0};n.rebuild=function(){var t=this,n=u.Z.getChannel(this.channelId);if(null==n||!n.isGuildStageVoice())return!1;var e=new Set(Object.keys(f.Z.getVoiceStatesForChannel(n.id)));this._participantsIndex.clear();this._requestToSpeakIndex.clear();this.participants={}
;e.forEach((function(n){return t.updateParticipant(n)}));return!0};n.size=function(t){return this._participantsIndex.size(t)};n.toArray=function(t){return this._participantsIndex.values(t,!0)};n.getParticipant=function(t){var n;return null!==(n=this._participantsIndex.get(t))&&void 0!==n?n:null};n.getRequestToSpeakParticipants=function(){return this._requestToSpeakIndex.values(void 0,!0)};!function(t,n,e){n&&O(t.prototype,n);e&&O(t,e)}(t,[{key:"version",get:function(){return this._participantsIndex.version}},{key:"requestToSpeakVersion",get:function(){return this._requestToSpeakIndex.version}}]);return t}()},983586:(t,n,e)=>{e.d(n,{Lw:()=>d,rq:()=>p,dS:()=>v,JE:()=>h});var r=e(736818),i=e(61209),o=e(567403),u=e(933022),a=e(79462),l=e(2590);function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function s(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){
var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,i,o=[],u=!0,a=!1;try{for(e=e.call(t);!(u=(r=e.next()).done);u=!0){o.push(r.value);if(n&&o.length===n)break}}catch(t){a=!0;i=t}finally{try{u||null==e.return||e.return()}finally{if(a)throw i}}return o}}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return c(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f="stage:";function d(t,n){var e=0,i=r.default.getId();u.ZP.isSpeaker(i,t.id)&&(e|=1);var a=o.Z.getGuild(t.getGuildId());if(null!=a){a.hasFeature(l.oNc.PARTNERED)&&(e|=2);a.hasFeature(l.oNc.VERIFIED)&&(e|=4)}
var c=e.toString(16);return"".concat(f).concat(t.guild_id,":").concat(t.id,":").concat(c,":").concat(n.id)}function p(t){if(null!=t&&null!=t.party){var n=t.party,e=n.id,r=n.size;try{if(null==e||!e.startsWith(f))return;var i=s(e.split(":"),5),o=i[1],u=i[2],a=i[3],l=i[4],c=parseInt(a,16);return{guildId:o,channelId:u,size:r,userIsSpeaker:0!=(1&c),guildIsPartnered:0!=(2&c),guildIsVerified:0!=(4&c),stageInstanceId:l}}catch(t){return null}}}function v(t){return(null==t?void 0:t.application_id)===a.gD}function h(t){var n=p(t);if(null==n)return!1;var e=n.channelId;return null!=i.Z.getChannel(e)}},933022:(t,n,e)=>{e.d(n,{ZP:()=>G});var r=e(496486),i=e.n(r),o=e(202351),u=e(744564),a=e(61209),l=e(5544),c=e(21372),s=e(567403),f=e(473903),d=e(407561),p=e(563135),v=e(227202),h=e(525261);function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function E(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}
function _(t){_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return _(t)}function S(t,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function I(t,n){I=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return I(t,n)}var g,O=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function T(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=_(t);if(n){var i=_(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)}}!function(t){t.SPEAKER="speaker";t.MODERATOR="moderator"
}(g||(g={}));var A,b={},m=(E(A={},g.SPEAKER,!1),E(A,g.MODERATOR,!1),A);function P(t,n){var e=d.Z.getVoiceStateForChannel(n,t);return(0,h.gf)(e)===h.xO.ON_STAGE}function N(t,n,e){return p.ZP.can({permission:v.yP,user:t,context:n,overwrites:e.permissionOverwrites,roles:n.roles})}function C(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=a.Z.getChannel(n),o=null==i?void 0:i.getGuildId(),u=s.Z.getGuild(o);return null!=u&&null!=i&&i.isGuildStageVoice()?(E(e={},g.SPEAKER,P(t,n)),E(e,g.MODERATOR,r?N(t,u,i):null),e):m}function R(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==b[n]&&(b[n]={});var r=C(t,n,e);b[n][t]=r;return r}function w(t,n){var e;if(null==n)return!1;var r=a.Z.getChannel(n);if(null==r||!r.isGuildStageVoice())return!1;null===(e=b[n])||void 0===e||delete e[t];return!0}function Z(t){var n=l.ZP.getChannels(t)[l.Zb].filter((function(t){return t.channel.isGuildStageVoice()})),e=!0,r=!1,i=void 0;try{
for(var o,u=n[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var a=o.value.channel;delete b[a.id]}}catch(t){r=!0;i=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}return n.length>0}function U(t){var n=t.guildId,e=t.user;return null!=e&&null!=n&&function(t,n){for(var e in b){var r=a.Z.getBasicChannel(e);null!=r&&r.guild_id===n&&delete b[e][t]}return!0}(e.id,n)}function D(t){var n=t.guild;for(var e in b){var r=a.Z.getBasicChannel(e);null!=r&&r.guild_id!==n.id||delete b[e]}}var L=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&I(t,n)}(e,t);var n=T(e);function e(){y(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(c.ZP,a.Z,s.Z,f.default,d.Z)};r.isSpeaker=function(t,n){return this.getPermissionsForUser(t,n)[g.SPEAKER]};r.isModerator=function(t,n){
var e;return null!==(e=this.getPermissionsForUser(t,n,!0)[g.MODERATOR])&&void 0!==e&&e};r.isAudienceMember=function(t,n){var e=this.getPermissionsForUser(t,n);return!e[g.SPEAKER]&&!e[g.MODERATOR]};r.getPermissionsForUser=function(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t||null==n)return m;var i=null===(e=b[n])||void 0===e?void 0:e[t];return null!=i?r&&null==i[g.MODERATOR]?R(t,n,!0):i:R(t,n,r)};r.__getLocalVars=function(){return{userStageRoles:b}};return e}(o.ZP.Store);L.displayName="StageChannelRoleStore";const G=new L(u.Z,{CHANNEL_UPDATES:function(t){var n=t.channels,e=!0,r=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(e=(o=u.next()).done);e=!0){var a=o.value;delete b[a.id]}}catch(t){r=!0;i=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw i}}},CONNECTION_OPEN:function(){b={}},GUILD_MEMBER_REMOVE:U,GUILD_MEMBER_UPDATE:U,GUILD_ROLE_UPDATE:function(t){Z(t.guildId)},PASSIVE_UPDATE_V1:function(t){
var n,e=Z(t.guildId),r=!0,i=!1,o=void 0;try{for(var u,a=(null!==(n=t.voiceStates)&&void 0!==n?n:[])[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=u.value;e=w(l.userId,l.channelId)||e}}catch(t){i=!0;o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return e},VOICE_STATE_UPDATES:function(t){var n=t.voiceStates;return!i().isEmpty(b)&&n.reduce((function(t,n){return w(n.userId,n.channelId)||t}),!1)},GUILD_CREATE:D,GUILD_DELETE:D})},218086:(t,n,e)=>{e.d(n,{Z:()=>N});var r=e(110251),i=e.n(r),o=e(202351),u=e(744564),a=e(61209),l=e(567403),c=e(69085),s=e(715107),f=e(563135),d=e(82274),p=e(808194),v=e(983586),h=e(766496),y=e(713717),E=e(79462),_=e(2590);function S(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function I(t){I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return I(t)}function g(t,n){return!n||"object"!==T(n)&&"function"!=typeof n?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function O(t,n){O=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return O(t,n)}var T=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function A(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return g(this,e)}}var b=null;function m(){var t=function(){var t,n,e,r=s.Z.getVoiceChannelId();if(null==r)return null;var i=h.Z.getStageInstanceByChannel(r);if(null==i)return null;var o=a.Z.getChannel(r);if(null==o)return null;if(!f.ZP.canEveryone(_.Plq.VIEW_CHANNEL,o))return null
;var u=l.Z.getGuild(o.getGuildId());if(null==u)return null;if(!u.hasFeature(_.oNc.DISCOVERABLE))return null;var c,S,I,g,O=(0,v.Lw)(o,i),T=(null==b||null===(t=b.party)||void 0===t?void 0:t.id)===O?b:null,A=d.Z.getMutableParticipants(o.id,p.pV.SPEAKER),m=A.filter((function(t){return t.type===p.Ui.STREAM})).length,P=A.length-m,N=d.Z.getParticipantCount(r)-m,C=null!=(null==T||null===(n=T.party)||void 0===n?void 0:n.size)?T.party.size[1]:0;return{application_id:E.gD,name:null!==(S=null!==(c=i.topic)&&void 0!==c?c:o.topic)&&void 0!==S?S:o.name,type:(0,y.xJ)(o.id)?_.IIU.WATCHING:_.IIU.LISTENING,timestamps:{start:null!==(I=null==T||null===(e=T.timestamps)||void 0===e?void 0:e.start)&&void 0!==I?I:(new Date).getTime()},assets:{small_image:null!==(g=u.icon)&&void 0!==g?g:void 0,small_text:u.name},party:{id:O,size:[P,Math.max(N,C)]}}}();if(!i()(t,b)){b=t;return!0}return!1}var P=function(t){!function(t,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&O(t,n)}(e,t);var n=A(e);function e(){S(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(a.Z,s.Z,h.Z,c.Z)};r.getActivity=function(){return b};r.__getLocalVars=function(){return{activity:b}};return e}(o.ZP.Store);P.displayName="StageChannelSelfRichPresenceStore";const N=new P(u.Z,{CONNECTION_OPEN:m,STAGE_INSTANCE_CREATE:m,STAGE_INSTANCE_UPDATE:m,STAGE_INSTANCE_DELETE:m,VOICE_CHANNEL_SELECT:m,RTC_CONNECTION_STATE:function(t){var n,e,r,i=t.state,o=null!==(r=null==b||null===(n=b.party)||void 0===n||null===(e=n.size)||void 0===e?void 0:e[1])&&void 0!==r?r:0;return!(i!==_.hes.RTC_CONNECTED||o>0)&&m()},VOICE_STATE_UPDATES:function(t){var n=t.voiceStates;if(null!=b){var e=(0,v.rq)(b);null!=e&&null!=n.find((function(t){
return t.channelId===e.channelId}))&&m()}}})},79462:(t,n,e)=>{e.d(n,{xA:()=>o,gD:()=>u,Df:()=>a,$z:()=>l,BM:()=>r,lv:()=>i});e(348592),e(2590),e(473708);var r,i,o=240,u="834488117758001152",a="stage-invite",l="stage-channel-audience-notice-shown";!function(t){t[t.EVERYONE=1]="EVERYONE";t[t.NO_ONE=2]="NO_ONE";t[t.ROLES=3]="ROLES"}(r||(r={}));!function(t){t[t.GUILD_SELECTION=0]="GUILD_SELECTION";t[t.STAGE_CHANNEL_SETTINGS=1]="STAGE_CHANNEL_SETTINGS";t[t.PUBLIC_STAGE_PREVIEW=2]="PUBLIC_STAGE_PREVIEW"}(i||(i={}))},713717:(t,n,e)=>{e.d(n,{PK:()=>c,xJ:()=>s,tu:()=>f,AI:()=>d});var r=e(202351),i=e(260561),o=e(567403),u=e(407561),a=e(82274),l=e(808194);function c(t){return(0,r.e7)([a.Z,u.Z],(function(){return null!=a.Z.getMutableParticipants(t,l.pV.SPEAKER).find((function(t){return t.type===l.Ui.STREAM}))||u.Z.hasVideo(t)}),[t])}function s(t){return null!=a.Z.getMutableParticipants(t,l.pV.SPEAKER).find((function(t){return t.type===l.Ui.STREAM}))||u.Z.hasVideo(t)}function f(t){
var n,e=o.Z.getGuild(t);return null!=e&&(null!==(n=null==e?void 0:e.maxStageVideoChannelUsers)&&void 0!==n?n:0)>0}var d=(0,i.B)({kind:"guild",id:"2023-02_stage_boosting",label:"Stage Boosting",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},227172:(t,n,e)=>{e.d(n,{Z:()=>B});var r=e(110251),i=e.n(r),o=e(202351),u=e(281110),a=e(744564),l=e(579344),c=e(265688),s=e(3564),f=e(629223),d=e(793461),p=e(2590);function v(t,n,e,r,i,o,u){try{var a=t[o](u),l=a.value}catch(t){e(t);return}a.done?n(l):Promise.resolve(l).then(r,i)}function h(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var o=t.apply(n,e);function u(t){v(o,r,i,u,a,"next",t)}function a(t){v(o,r,i,u,a,"throw",t)}u(void 0)}))}}function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function E(t){E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return E(t)}function _(t,n){
return!n||"object"!==I(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function S(t,n){S=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return S(t,n)}var I=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function g(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=E(t);if(n){var i=E(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return _(this,e)}}var O=function(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t];r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},T="33kozedd0zs6fbauka98psnc7zwom2s",A=function(t){return"https://youtube.com/watch?v=".concat(t)
},b=3e5,m="https://api.twitch.tv/helix",P=/live_user_(.*)-\{width\}/,N=null,C=0,R=null,w=new Set,Z={};function U(t){var n;return null===(n=P.exec(t))||void 0===n?void 0:n[1]}function D(t,n,e){return u.Z.get({url:"".concat(m).concat(t),query:n,headers:{"Client-ID":T,Authorization:"Bearer ".concat(e)}})}function L(t,n){return G.apply(this,arguments)}function G(){return(G=h((function(t,n){var e,r,i,o,u;return O(this,(function(a){switch(a.label){case 0:return null!=(e=Z[t])?[2,e]:[4,D("/games",{id:t},n)];case 1:r=a.sent(),i=r.body,o=i.data;u=o[0].name;Z[t]=u;return[2,u]}}))}))).apply(this,arguments)}var j=function(){function t(){y(this,t);this._started=!1}var n=t.prototype;n.start=function(){if(!this._started){this._started=!0;f.Z.isFetching()?l.Z.fetch():this._check()}};n.stop=function(){this._started=!1;R=null;C=0;null!=this._nextCheck&&clearTimeout(this._nextCheck);a.Z.dispatch({type:"STREAMING_UPDATE",stream:null})};n._checkTwitch=function(t){
var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=this;return h((function(){var r,i,o,u,a,f,d,v,h,y,E,_,S;return O(this,(function(I){switch(I.label){case 0:if(t.revoked)return[2,null];if(null==(n=null!=n?n:t.accessToken))return[2,null];I.label=1;case 1:I.trys.push([1,4,,5]);return[4,D("/streams",{user_id:t.id,first:1},n)];case 2:i=I.sent(),o=i.body.data;if(null==(u=o[0])||"live"!==u.type)throw new Error("no stream");a=u.thumbnail_url,f=u.game_id,d=u.title;h={large_image:null!=a&&null!==(v=(0,s.f)(p.ABu.TWITCH,a))&&void 0!==v?v:void 0};return[4,L(f,n)];case 3:y=I.sent();E=c.Z.get(p.ABu.TWITCH);S=null!==(_=U(a))&&void 0!==_?_:t.name;return[2,{url:null===(r=E.getPlatformUserUrl)||void 0===r?void 0:r.call(E,{id:t.id,name:S}),name:E.name,assets:h,details:d,state:y}];case 4:return 401===I.sent().status&&null==n?[2,l.Z.refreshAccessToken(t.type,t.id).then((function(n){return e._checkTwitch(t,n)})).catch((function(){return null}))]:[2,null];case 5:return[2]}}))}))()}
;n._checkYouTube=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=this;return h((function(){var r,i,o,a,f,d,v,h,y,E;return O(this,(function(_){switch(_.label){case 0:R=null;if(t.revoked||w.has(t.id))return[2,null];_.label=1;case 1:_.trys.push([1,3,,4]);return[4,u.Z.get({url:"https://www.googleapis.com/youtube/v3/liveBroadcasts",query:{part:"id,snippet",broadcastStatus:"active",broadcastType:"all"},headers:{Authorization:"Bearer ".concat(null!=n?n:t.accessToken)},oldFormErrors:!0})];case 2:r=_.sent();if((i=r.body.items).length<1)throw new Error("no stream");o=i[0],a=o.id,f=o.snippet,d=f.title,v=f.thumbnails;y={large_image:null!==(h=(0,s.f)(p.ABu.YOUTUBE,v.high.url))&&void 0!==h?h:void 0};return[2,R={url:A(a),name:c.Z.get(p.ABu.YOUTUBE).name,details:d,assets:y}];case 3:if(401===(E=_.sent()).status&&null==n)return[2,l.Z.refreshAccessToken(t.type,t.id).then((function(n){return e._checkYouTube(t,n)})).catch((function(){return null}))]
;403===E.status&&w.add(t.id);return[2,null];case 4:return[2]}}))}))()};n._check=function(){var t=this;if(this._started){var n=f.Z.getAccounts();if(null!=n){null!=this._nextCheck&&clearTimeout(this._nextCheck);var e=[p.ABu.TWITCH],r=Date.now();if(C<=r){e.push(p.ABu.YOUTUBE);C=r+b}var i=n.filter((function(t){return e.includes(t.type)})).map((function(n){return n.type===p.ABu.TWITCH?t._checkTwitch(n):t._checkYouTube(n)}));Promise.allSettled(i).then((function(n){if(t._started){var e,r=null===(e=n.find((function(t){return"fulfilled"===t.status&&null!=t.value})))||void 0===e?void 0:e.value;null==r&&null!=R&&(r=R);a.Z.dispatch({type:"STREAMING_UPDATE",stream:r})}t._scheduleCheck()}))}}};n._scheduleCheck=function(){var t=this;this._started&&(this._nextCheck=setTimeout((function(){return t._check()}),6e4))};return t}(),k=new j;function M(){d.Z.enabled?k.start():k.stop()}var V=function(t){!function(t,n){
if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&S(t,n)}(e,t);var n=g(e);function e(){y(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){M();this.waitFor(f.Z);this.syncWith([d.Z],M)};r.getStream=function(){return N};r.__getLocalVars=function(){return{TWITCH_CLIENT_ID:T,POLL_INTERVAL:6e4,YOUTUBE_VIDEO_URL:A,YOUTUBE_POLL_INTERVAL:b,TWITCH_API_ENDPOINT:m,TWITCH_USERNAME_THUMBNAIL_REGEX:P,stream:N,youtubeNextCheck:C,youtubeCachedResponse:R,youtubeForbiddenLiveChannels:w,twitchGameCache:Z,poller:k}};return e}(o.ZP.Store);V.displayName="ExternalStreamingStore";const B=new V(a.Z,{STREAMING_UPDATE:function(t){if(i()(t.stream,N))return!1;var n;N=null!==(n=t.stream)&&void 0!==n?n:null},USER_CONNECTIONS_UPDATE:function(){return k._check()}})},997582:(t,n,e)=>{e.d(n,{Z:()=>H})
;var r=e(110251),i=e.n(r),o=e(496486),u=e.n(o),a=e(202351),l=e(744564),c=e(258104),s=e(450136),f=e(218086);function d(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function v(t,n){return!n||"object"!==y(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function h(t,n){h=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return h(t,n)}var y=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}()
;return function(){var e,r=p(t);if(n){var i=p(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return v(this,e)}}var _=[f.Z],S=[];function I(){var t=[],n=!0,e=!1,r=void 0;try{for(var o,u=_[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value.getActivity();null!=a&&t.push(a)}}catch(t){e=!0;r=t}finally{try{n||null==u.return||u.return()}finally{if(e)throw r}}if(i()(t,S))return!1;S=t;return!0}var g=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&h(t,n)}(e,t);var n=E(e);function e(){d(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.syncWith(_,I)};r.getActivities=function(){return S};r.__getLocalVars=function(){return{delegateStores:_,activities:S}};return e}(a.ZP.Store);g.displayName="FirstPartyRichPresenceStore"
;const O=new g(l.Z);var T=e(73727),A=e(968449),b=e(473419),m=e(177570),P=e(227172),N=e(959207),C=e(671723),R=e(2590),w=e(473708);function Z(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function U(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function D(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function L(t){L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return L(t)}function G(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));r.forEach((function(n){D(t,n,e[n])}))}return t}function j(t,n){return!n||"object"!==V(n)&&"function"!=typeof n?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function k(t,n){k=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return k(t,n)}function M(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return Z(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Z(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function B(t){var n=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=L(t);if(n){var i=L(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return j(this,e)}}var x=[],F={};function Y(){var t,n=[],e=A.Ok.getSetting();null!=e&&("0"===e.expiresAtMs||new Date(Number(e.expiresAtMs)).getTime()-(new Date).getTime()>0)&&n.push((0,s.Z)(e));var r=O.getActivities();(t=n).push.apply(t,M(r));var o=P.Z.getStream();null!=o&&n.push(G({type:R.IIU.STREAMING},o));var a=new Set,l=new Set;u().forEach(F,(function(t){if(null!=t.application_id){a.add(t.name);l.add(t.application_id);n.push(t)}}));c.ZP.getSelfEmbeddedActivities().forEach((function(t){var e,r=t.application_id;if(!l.has(r)){var i=null===(e=N.Z.getGame(r))||void 0===e?void 0:e.name;n.push({type:R.IIU.PLAYING,
name:null!=i?i:w.Z.Messages.EMBEDDED_ACTIVITIES_LAUNCHING_ACTIVITY,application_id:r,flags:R.xjy.EMBEDDED})}}));var f=C.ZP.getVisibleGame(),d=null!=f&&null!=f.name&&a.has(f.name),p=null!=f&&f.isLauncher,v=m.Z.getCurrentUserActiveStream(),h=d||p&&!(null!=v);null==f||null==f.name||h||n.push({type:R.IIU.PLAYING,name:f.name,application_id:f.id,timestamps:{start:f.start}});var y=T.Z.getActivity();null!=y&&n.push(G({type:R.IIU.LISTENING},y));i()(x,n)||(x=n)}var K=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&k(t,n)}(e,t);var n=B(e);function e(){U(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(C.ZP,c.ZP,P.Z,m.Z,T.Z,b.Z);this.syncWith([O],(function(){return Y()}))};r.getActivities=function(){return x};r.getPrimaryActivity=function(){return x[0]}
;r.getApplicationActivity=function(t){return this.findActivity((function(n){return n.application_id===t}))};r.getCustomStatusActivity=function(){return this.findActivity((function(t){return t.type===R.IIU.CUSTOM_STATUS}))};r.findActivity=function(t){return x.find(t)};r.getApplicationActivities=function(){return F};r.__getLocalVars=function(){return{activities:x,applicationActivities:F}};return e}(a.ZP.Store);K.displayName="LocalActivityStore";const H=new K(l.Z,{OVERLAY_INITIALIZE:function(t){var n=t.localActivities;F=G({},n);Y()},START_SESSION:function(){F={};Y()},LOCAL_ACTIVITY_UPDATE:function(t){var n=t.socketId,e=t.activity;if(i()(F[n],e))return!1;null!=e?F[n]=e:delete F[n];Y()},RPC_APP_DISCONNECTED:function(t){var n=t.socketId;delete F[n];Y()},RUNNING_GAMES_CHANGE:Y,LIBRARY_APPLICATION_FLAGS_UPDATE_SUCCESS:Y,SPOTIFY_PLAYER_STATE:Y,SPOTIFY_PLAYER_PLAY:Y,STREAMING_UPDATE:Y,USER_CONNECTIONS_UPDATE:Y,STREAM_START:Y,STREAM_STOP:Y,USER_SETTINGS_PROTO_UPDATE:Y,EMBEDDED_ACTIVITY_OPEN:Y,
EMBEDDED_ACTIVITY_CLOSE:Y})},436154:(t,n,e)=>{e.d(n,{Z:()=>q});var r=e(110251),i=e.n(r),o=e(496486),u=e.n(o),a=e(202351),l=e(744564),c=e(542517),s=e(190344),f=e(73727),d=e(968449),p=e(473419),v=e(382060),h=e(954419),y=e(736818),E=e(959207),_=e(595970),S=e(761814),I=e(997582),g=e(491260),O=e(679450),T=e(2590);function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function b(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t){m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return m(t)}function P(t,n){return!n||"object"!==R(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function N(t,n){N=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return N(t,n)}function C(t){return function(t){if(Array.isArray(t))return A(t)
}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return A(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function w(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,r=m(t)
;if(n){var i=m(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return P(this,e)}}var Z,U,D=!1,L=T.Skl.ONLINE,G=T.Skl.UNKNOWN,j=0,k=[],M=!1,V=!0,B=Object.freeze([]),x=[];function F(t){return(0,h.OT)(t,S.Z)}function Y(t){switch(t.type){case T.IIU.LISTENING:return(0,c.Z)(t)?f.Z.shouldShowActivity():null!=t.application_id&&F(t.application_id);case T.IIU.PLAYING:return null!=t.application_id?F(t.application_id):(n=t.name,null!=(e=E.Z.getGameByName(n))?F(e.id):d.G6.getSetting());case T.IIU.STREAMING:case T.IIU.WATCHING:default:return null==t.application_id||F(t.application_id)}var n,e}function K(){var t;j=null!==(t=_.Z.getIdleSince())&&void 0!==t?t:0;M=_.Z.isAFK();(L=V?G:D?T.Skl.INVISIBLE:d.co.getSetting())===T.Skl.ONLINE&&j>0&&(L=T.Skl.IDLE);var n=!1,e=V||L===T.Skl.INVISIBLE?[]:I.Z.getActivities().filter(Y);if(!i()(k,e)){k=e;n=!0}var r=O.Z.getRemoteActivities();if(B!==r){B=r;n=!0}if(n){var o=k.find((function(t){return t.type===T.IIU.CUSTOM_STATUS
})),a=k.filter((function(t){return t.type!==T.IIU.CUSTOM_STATUS}));x=a.length>0?k:null!=o?[o].concat(C(u()(B).filter((function(t){return t.type!==T.IIU.CUSTOM_STATUS})).uniqBy((function(t){return"".concat(t.type,":").concat(t.application_id,":").concat(t.name)})).value())):u().uniqBy(B,(function(t){return"".concat(t.type,":").concat(t.application_id,":").concat(t.name)}))}}function H(){V=!1;G=T.Skl.UNKNOWN;K();g.Z.setCurrentUserOnConnectionOpen(L,x)}var z=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}});n&&N(t,n)}(e,t);var n=w(e);function e(){b(this,e);return n.apply(this,arguments)}var r=e.prototype;r.initialize=function(){this.waitFor(_.Z,p.Z,I.Z,O.Z,S.Z,E.Z);this.syncWith([I.Z],K)};r.getLocalPresence=function(){return{status:L,since:j,activities:k,afk:M,broadcast:U}};r.getStatus=function(){return L}
;r.getActivities=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?x:k};r.getPrimaryActivity=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?x[0]:k[0]};r.getApplicationActivity=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.findActivity((function(n){return n.application_id===t}),n)};r.findActivity=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getActivities(n).find(t)};r.getBroadcast=function(){return Z};r.__getLocalVars=function(){return{forceInvisible:D,status:L,lastLoginStatus:G,since:j,localActivities:k,afk:M,loggedOut:V,remoteActivities:B,mergedActivities:x,localBroadcast:Z,broadcast:U}};return e}(a.ZP.Store);z.displayName="SelfPresenceStore";const q=new z(l.Z,{START_SESSION:K,CONNECTION_OPEN:H,CONNECTION_OPEN_SUPPLEMENTAL:H,OVERLAY_INITIALIZE:H,CONNECTION_CLOSED:K,IDLE:K,AFK:K,RUNNING_GAMES_CHANGE:K,STREAMING_UPDATE:K,
USER_SETTINGS_PROTO_UPDATE:K,LOCAL_ACTIVITY_UPDATE:K,SPOTIFY_PLAYER_STATE:K,SPOTIFY_PLAYER_PLAY:K,USER_CONNECTIONS_UPDATE:K,SESSIONS_REPLACE:K,RPC_APP_DISCONNECTED:K,LIBRARY_FETCH_SUCCESS:K,LIBRARY_APPLICATION_FLAGS_UPDATE_SUCCESS:K,LOGOUT:function(){V=!0;G=L;K()},EMBEDDED_ACTIVITY_CLOSE:K,EMBEDDED_ACTIVITY_OPEN:K,FORCE_INVISIBLE:function(t){D=t.invisible;return K()},WINDOW_FOCUS:function(){D=!1;return K()},BROADCAST_START:function(t){Z=t.broadcast;U=(0,s.HD)(t.broadcast)},BROADCAST_STOP:function(){Z=void 0;U=void 0},CHANNEL_DELETE:function(t){var n=t.channel;if(n instanceof v.Sf&&(null==n?void 0:n.isBroadcastChannel())&&(null==n?void 0:n.ownerId)===y.default.getId()){Z=void 0;U=void 0}}})}}]);
//# sourceMappingURL=6748587b6a5d6623daab.js.map