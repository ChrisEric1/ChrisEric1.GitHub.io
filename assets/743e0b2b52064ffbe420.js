"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[57263],{457263:(e,t,n)=>{n.r(t);n.d(t,{default:()=>_e});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),u=n(363010),c=n(331535),l=n(321795),s=n(97638),f=n(404168),d=n(125628),p=n(485923),y=n(53211),h=n(173436),v=n(7584),m=n(356004),b=n(653772),g=n(651972),_=n(962564),E=n(105405),O=n(859023),I=n(703863),S=n(461061);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return N(e)}function C(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){
var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function w(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){P=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return P(e,t)}function x(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}var M,D=[f.h8.TEXT_CHANNEL,f.h8.GROUP_DM,f.h8.USER],k=null,Z=null,U=[],V=[];function z(e){U=x(U).concat([e]);V=V.map((function(e){return C(function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){j(e,t,n[t])}))}return e}({},e),{sent:U.includes(e.data.record.id)})}));F.emitChange()}function G(e,t){V=(""===t.trim()?function(){var e=[];I.Z.getPrivateChannelIds().forEach((function(t){var n=m.Z.getChannel(t);if(null!=n)if(n.type===S.d4z.DM){var r=n.getRecipientId(),o=null!=r?O.default.getUser(r):null;null!=o&&e.push({type:f.h8.USER,record:o,score:0})}else n.isMultiUserDM()&&e.push({type:f.h8.GROUP_DM,record:n,score:0})}));return e}():e).map((function(e){switch(e.type){case f.h8.USER:var t=e.record;return{type:f.h8.USER,sent:U.includes(t.id),status:_.Z.getStatus(t.id),data:e};case f.h8.TEXT_CHANNEL:var n=e.record,r=m.Z.getChannel(n.parent_id),o=b.Z.getGuild(n.guild_id);return{type:f.h8.TEXT_CHANNEL,sent:U.includes(n.id),
categoryName:null!=r?(0,y.F6)(r,O.default,E.Z):"",guildName:null!=o?o.toString():"",data:e};case f.h8.GROUP_DM:var i=e.record;return{type:f.h8.GROUP_DM,sent:U.includes(i.id),data:e};default:throw new Error("Unknown Result Type: ".concat(e.type))}}));F.emitChange()}function Y(){k=null;if(null!=M){M.destroy();M=null}null!=Z&&Z()}function H(){var e=null!=k&&null!=k.application_id?g.Z.getApplicationActivity(k.application_id):null;if(null!=k&&(null==e||null==e.party||null==e.party.id))return Y()}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&P(e,t)}(n,e);var t=R(n);function n(){T(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(g.Z)};r.getActivity=function(){return k};r.getQuery=function(){var e;return null!==(e=null==M?void 0:M.query)&&void 0!==e?e:""}
;r.getResults=function(){return V};r.__getLocalVars=function(){return{RESULT_TYPES:D,activity:k,resolve:Z,autocompleter:M,sentInvites:U,results:V,instance:F}};return n}(u.ZP.Store);B.displayName="ActivityInviteModalStore";var F=new B(h.Z,{ACTIVITY_INVITE_MODAL_OPEN:function(e){k=e.activity;Z=e.resolve;U=[];null==M&&(M=new f.ZP((function(e,t){return G(e,t)}),D,100));M.search("")},ACTIVITY_INVITE_MODAL_QUERY:function(e){var t=e.query;null!=M&&M.search(t)},ACTIVITY_INVITE_MODAL_SEND:function(e){if(null!=k){var t=e.channelId,n=e.userId;null!=t?v.Z.sendActivityInvite({channelId:t,type:S.mFx.JOIN,activity:k,location:"Channel Text Area - Invite to Join Modal"}).then((function(){return z(t)})):null!=n&&v.Z.sendActivityInviteUser({userId:n,type:S.mFx.JOIN,activity:k,location:"Channel Text Area - Invite to Join Modal"}).then((function(){return z(n)}))}},ACTIVITY_INVITE_MODAL_CLOSE:Y,OVERLAY_SET_INPUT_LOCKED:function(e){if(e.locked&&null!=k){Y();return!0}return!1},LOCAL_ACTIVITY_UPDATE:H,
RPC_APP_DISCONNECTED:H});const q=F;var W=n(976703),X=n(733399),J=n(38415),Q=n(67416),K=n(766936),$=n(882699),ee=n(959797),te=n(998034),ne=n.n(te),re=n(380203),oe=n.n(re);function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function ce(e){ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ce(e)}function le(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e,t){se=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return se(e,t)}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){
var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){u=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ye(e,t){if(e){
if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}var ve=function(e){var t=e.channel,n=e.categoryName,o=e.guildName,i=W.Z;(0,p.Z)(t)?i=X.Z:t.isNSFW()&&(i=J.Z);return(0,r.jsxs)("div",{className:ne().result,children:[(0,r.jsx)(i,{className:ne().resultIcon,background:ne().resultIconBackground,width:16,height:16}),(0,r.jsxs)("div",{className:ne().resultText,
children:[(0,r.jsx)("span",{children:t.name}),(0,r.jsx)("span",{className:ne().resultCategoryName,children:n})]}),(0,r.jsx)("div",{className:ne().resultGuildName,children:o})]})},me=function(e){var t=e.channel,n=(0,y.ZP)(t);return(0,r.jsxs)("div",{className:ne().result,children:[(0,r.jsx)(K.ZP,{src:(0,d.x)(t),"aria-label":null!=n?n:"",className:ne().resultAvatar,size:K.ZP.Sizes.SIZE_32}),(0,r.jsx)("div",{className:ne().resultText,children:n})]})},be=function(e){var t,n=e.user,o=e.comparator,i=e.status;if(null!=o&&o===n.tag){var a=o.split("#");a.pop();t=a.join("#")}else t=null!=o&&""!==o?o:n.username;return(0,r.jsxs)("div",{className:ne().result,children:[(0,r.jsx)(K.ZP,{src:n.getAvatarURL(void 0,32),"aria-label":n.username,className:ne().resultAvatar,size:K.ZP.Sizes.SIZE_32,status:i}),(0,r.jsxs)("div",{className:ne().resultText,children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("span",{className:ne().resultUsername,children:n.tag})]})]})},ge=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&se(e,t)}(n,e);var t=he(n);function n(){ae(this,n);var e;(e=t.apply(this,arguments)).handleClick=function(){var t=e.props;(0,t.onInvite)(t.row)};e.handleMouseEnter=function(){var t=e.props;(0,t.onMouseEnter)(t.row)};return e}n.prototype.render=function(){var e,t,n=this.props,o=n.result,i=n.selected,u=n.sending;switch(o.type){case f.h8.GROUP_DM:e=(0,r.jsx)(me,{channel:o.data.record});break;case f.h8.TEXT_CHANNEL:var l=o.categoryName,s=o.guildName;e=(0,r.jsx)(ve,{channel:o.data.record,categoryName:l,guildName:s});break;case f.h8.USER:var d=o.data,p=d.comparator,y=d.record,h=o.status;e=(0,r.jsx)(be,{comparator:p,user:y,status:h})}t=o.sent?(0,r.jsx)(c.zx,{className:ne().inviteButton,look:c.zx.Looks.LINK,size:c.zx.Sizes.SMALL,disabled:!0,color:c.zx.Colors.WHITE,
children:ee.Z.Messages.ACTIVITY_INVITE_MODAL_SENT}):(0,r.jsx)(c.zx,{color:c.zx.Colors.GREEN,look:i?c.zx.Looks.FILLED:c.zx.Looks.OUTLINED,className:ne().inviteButton,size:c.zx.Sizes.SMALL,submitting:u,onClick:this.handleClick,children:ee.Z.Messages.ACTIVITY_INVITE_MODAL_INVITE});return(0,r.jsxs)("div",{className:a()(ne().resultWrapper,ue({},ne().resultWrapperSelected,i)),onMouseEnter:this.handleMouseEnter,children:[e,t]})};return n}(o.Component);function _e(e){var t=e.transitionState,n=e.onClose,i=(0,u.cj)([q],(function(){return{results:q.getResults(),query:q.getQuery(),activity:q.getActivity()}}),[]),a=i.results,d=i.query,p=i.activity,y=fe(o.useState(d),2),h=y[0],v=y[1],m=fe(o.useState(0),2),b=m[0],g=m[1],_=fe(o.useState([]),2),E=_[0],O=_[1],I=fe(o.useState(!1),2),A=I[0],T=I[1],j=o.useRef(null),N=o.useCallback((function(){var e;null===(e=j.current)||void 0===e||e.scrollPageUp({animate:!0})}),[j]),C=o.useCallback((function(){var e;null===(e=j.current)||void 0===e||e.scrollPageDown({
animate:!0})}),[j]);o.useEffect((function(){$.S.subscribe(S.CkL.SCROLL_PAGE_UP,N);return function(){$.S.unsubscribe(S.CkL.SCROLL_PAGE_UP,N)}}),[N]);o.useEffect((function(){$.S.subscribe(S.CkL.SCROLL_PAGE_DOWN,C);return function(){$.S.unsubscribe(S.CkL.SCROLL_PAGE_DOWN,C)}}),[C]);o.useEffect((function(){null==p&&n()}),[n,p]);o.useEffect((function(){var e;null===(e=j.current)||void 0===e||e.scrollToTop();g(0)}),[j,a]);var w=o.useCallback((function(e){var t=a[e],n=t.data,r=t.data.record.id;if(null!=r&&!E.includes(r)){O(de(E).concat([r]));switch(n.type){case f.h8.GROUP_DM:case f.h8.TEXT_CHANNEL:(0,l.GG)(n.record.id);break;case f.h8.USER:(0,l.R2)(n.record.id)}}}),[a,E]),P=o.useCallback((function(e){g(e)}),[g]),x=function(){L("")},L=function(e){v(e);(0,l.rh)(e)};return null==p?null:(0,r.jsxs)(Q.Y0,{transitionState:t,size:Q.Cg.SMALL,"aria-label":ee.Z.Messages.ACTIVITY_INVITE_MODAL_HEADER.format({name:p.name}),children:[(0,r.jsxs)(Q.xB,{separator:A,children:[(0,r.jsx)(Q.ol,{
className:ne().closeButton,onClick:n}),(0,r.jsxs)("div",{className:ne().header,children:[(0,r.jsx)(c.vw,{tag:"h2",className:oe().marginBottom8,children:ee.Z.Messages.ACTIVITY_INVITE_MODAL_HEADER.format({name:p.name})}),(0,r.jsx)(s.ZP,{size:s.ZP.Sizes.MEDIUM,query:h,selectedSection:0,selectedRow:b,sections:[a.length],className:oe().marginTop4,onSelect:function(e,t){null==t?x():w(t)},onSelectionChange:function(e,t){var n;g(t);null===(n=j.current)||void 0===n||n.scrollIntoViewRect({start:44*t,end:44*t+44})},onQueryChange:L,placeholder:ee.Z.Messages.ACTIVITY_INVITE_MODAL_SEARCH_PLACEHOLDER,autoFocus:!0,onClear:x})]})]}),(0,r.jsx)(Q.YA,{scrollerRef:j,className:0===a.length?ne().noResults:ne().results,paddingBottom:8,sections:[a.length],sectionHeight:0,renderSection:S.VqG,rowHeight:function(e,t){return e>0?0:null!=a[t]?44:0},renderRow:function(e){var t=e.section,n=e.row;if(t>0)return null;var o=a[n];return null==o?null:(0,r.jsx)(ge,{row:n,result:o,
sending:null!=o.data.record.id&&E.includes(o.data.record.id),selected:n===b,onMouseEnter:P,onInvite:w},o.data.record.id)},onScroll:function(e){var t=e.currentTarget.scrollTop>0;A!==t&&T(t)}})]})}}}]);
//# sourceMappingURL=743e0b2b52064ffbe420.js.map