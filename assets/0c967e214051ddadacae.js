"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[38197],{938197:(e,n,r)=>{r.r(n);r.d(n,{Steps:()=>Ie,default:()=>Ce});var t=r(785893),o=r(667294),i=r(824390),s=r.n(i),l=r(441143),a=r.n(l),u=r(363010),c=r(331535),d=r(361417),f=r(40188),p=r(129230),m=r(653772),S=r(784238),I=r(814071),_=r(969225),C=r(124722),E=r(31165),v=r(67416),y=r(932847),h=r(75141),g=r(294184),O=r.n(g),b=r(589175),R=r(402411),N=r(72791),U=r(192254),P=r(459289),M=r.n(P);function x(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function L(e){L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return L(e)}function j(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&D(e,n)}function T(e,n){
return!n||"object"!==A(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function D(e,n){D=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return D(e,n)}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,t=L(e);if(n){var o=L(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return T(this,r)}}var B=function(e){j(r,e);var n=Z(r);function r(){x(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props.tier;return(0,t.jsxs)("div",{className:M().tierPill,children:[(0,
t.jsx)(R.Z,{className:M().tierPillStar,children:(0,t.jsx)(N.Z,{tier:e,className:M().tierPillGem})}),(0,h.nW)(e)]})};return r}(o.PureComponent),G=function(e){var n=e.subscriptionChange,r=e.guild;if(0===n)return null;var o=Math.max(r.premiumSubscriberCount+n,0),i=(0,h.rF)(o,r.id),s=i-(0,h.rF)(r.premiumSubscriberCount,r.id);return 0===s?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U.Z,{className:s>0?M().levelUpIcon:M().levelDownIcon}),(0,t.jsx)(B,{tier:i})]})},w=function(e){j(r,e);var n=Z(r);function r(){x(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.guild,r=e.className,o=e.subscriptionChange;return(0,t.jsxs)("div",{className:O()(M().subscription,r),children:[(0,t.jsx)(_.Z,{guild:n,size:_.Z.Sizes.LARGE}),(0,t.jsxs)("div",{className:M().subscriptionInfo,children:[(0,t.jsx)("div",{className:M().guildName,children:n.name}),(0,t.jsxs)("div",{className:M().tierInfo,children:[(0,t.jsx)(B,{tier:n.premiumTier}),(0,t.jsx)(G,{guild:n,
subscriptionChange:null!=o?o:0})]})]})]})};return r}(o.PureComponent),F=r(720897),H=r(487502),k=r(136733),Y=r(81951),z=r(959797),W=r(865029),V=r.n(W);function q(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function K(e){K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return K(e)}function X(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&J(e,n)}function Q(e,n){return!n||"object"!==$(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function J(e,n){J=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return J(e,n)}var $=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ee(e){
var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var r,t=K(e);if(n){var o=K(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Q(this,r)}}var ne=function(e){X(r,e);var n=ee(r);function r(){q(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props.onClose;return(0,t.jsxs)(v.xB,{separator:!1,justify:H.Z.Justify.BETWEEN,children:[(0,t.jsx)(c.X6,{variant:"heading-md/semibold",children:this.props.text}),null!=e?(0,t.jsx)(v.ol,{onClick:e}):null]})};return r}(o.PureComponent);function re(e){var n=e.imageClass,r=e.children,o=e.error,i=e.onDismissError;return(0,t.jsxs)("div",{className:V().content,children:[(0,t.jsx)("div",{className:O()(V().image,n)}),r,(0,t.jsx)(b.Z,{children:null!=o?(0,
t.jsx)(k.Z,{className:V().error,children:(0,t.jsx)(c.kz,{onDismiss:i,children:o.message})}):null})]})}var te=function(e){var n=e.canceledCount,r=(0,u.e7)([F.Z],(function(){return F.Z.getPremiumTypeSubscription()}));return null==r?null:(0,t.jsxs)("div",{className:V().pendingCancellation,children:[(0,t.jsx)(Y.Z,{className:V().pendingCancellationIcon}),(0,t.jsx)(c.xv,{variant:"text-md/normal",className:V().pendingCancellationMessage,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CANCEL_WARNING.format({date:r.currentPeriodEnd,canceledCount:n})})]})};function oe(e){var n=e.imageClass,r=e.blurb,o=e.guild,i=e.warning,s=e.error,l=e.onDismissError,a=e.slotCount,u=void 0===a?1:a,d=e.canceledCount,f=void 0===d?0:d;return(0,t.jsxs)(re,{imageClass:n,error:s,onDismissError:l,children:[(0,t.jsx)(c.xv,{variant:"text-md/normal",children:r}),(0,t.jsx)(w,{className:V().guildCard,guild:o,subscriptionChange:u}),(0,t.jsx)(c.xv,{variant:"text-md/normal",children:i}),f>0?(0,t.jsx)(te,{canceledCount:f
}):null]})}var ie=function(e){X(r,e);var n=ee(r);function r(){q(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.confirmation,r=e.confirmationLabel,o=e.isModifyingSubscription,i=e.onConfirm,s=e.onCancel;return(0,t.jsxs)(v.mz,{children:[(0,t.jsx)(c.zx,{onClick:i,submitting:o,"aria-label":r,children:n}),(0,t.jsx)(c.zx,{look:c.zx.Looks.LINK,color:c.zx.Colors.PRIMARY,onClick:s,disabled:o,children:z.Z.Messages.CANCEL})]})};return r}(o.PureComponent),se=function(e){X(r,e);var n=ee(r);function r(){q(this,r);return n.apply(this,arguments)}r.prototype.render=function(){var e=this.props,n=e.guild,r=e.header,i=e.blurb,s=e.warning,l=e.confirmation,a=e.confirmationLabel,u=e.imageClass,c=e.error,d=e.isModifyingSubscription,f=e.onConfirm,p=e.onCancel,m=e.onDismissError,S=e.canceledCount;return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(ne,{text:r}),(0,t.jsx)(v.hz,{children:(0,t.jsx)(oe,{guild:n,blurb:i,warning:s,imageClass:u,error:c,onDismissError:m,
canceledCount:S})}),(0,t.jsx)(ie,{confirmation:l,confirmationLabel:a,isModifyingSubscription:d,onConfirm:f,onCancel:p})]})};return r}(o.PureComponent);se.Header=ne;se.ApplyBody=oe;se.TransferBody=function(e){var n,r,i=e.imageClass,s=e.blurb,l=e.fromGuilds,a=e.toGuild,u=e.error,d=e.onDismissError,f=e.slotCount,p=void 0===f?1:f,m=e.canceledCount,S=void 0===m?0:m,I=o.useRef(l),_=null===(n=I.current)||void 0===n?void 0:n.length,C=null===(r=I.current)||void 0===r?void 0:r.reduce((function(e,n){e.hasOwnProperty(n.id)||(e[n.id]=[]);e[n.id].push(n);return e}),{});return(0,t.jsxs)(re,{imageClass:i,error:u,onDismissError:d,children:[(0,t.jsx)(c.xv,{variant:"text-md/normal",children:s}),(0,t.jsx)(c.xv,{variant:"text-xs/bold",className:V().transferGuildCardHeader,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_FROM_GUILD.format({guildCount:_})}),null!=C?Object.keys(C).map((function(e){return(0,t.jsx)(w,{className:V().transferFromGuildCard,guild:C[e][0],
subscriptionChange:-1*C[e].length},e)})):null,(0,t.jsx)(c.xv,{variant:"text-xs/normal",className:V().transferGuildCardHeader,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_TO_GUILD.format({slotCount:p})}),(0,t.jsx)("div",{className:V().activeTransferGuildCardBorder,children:(0,t.jsx)(w,{className:V().transferToGuildCard,guild:a,subscriptionChange:null!=l?l.length:1})}),S>0?(0,t.jsx)(te,{canceledCount:S}):null]})};se.Footer=ie;const le=se;var ae=r(570515),ue=r(461061),ce=r(21501),de=r.n(ce);function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function pe(e,n,r,t,o,i,s){try{var l=e[i](s),a=l.value}catch(e){r(e);return}l.done?n(a):Promise.resolve(a).then(t,o)}function me(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function Se(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){i.push(t.value);if(n&&i.length===n)break}}catch(e){l=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return fe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ie,_e=function(e,n){var r,t,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},
"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;(t=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;t=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(o=s.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1];o=i;break}if(o&&s.label<o[2]){s.label=o[2];s.ops.push(i);break}o[2]&&s.ops.pop();s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e];t=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){e.UNUSED_QUANTITY_SELECT="UNUSED_QUANTITY_SELECT"
;e.GUILD_SELECT="GUILD_SELECT";e.CONFIRM="CONFIRM";e.SUCCESS="SUCCESS"}(Ie||(Ie={}));const Ce=function(e){var n,r,i=e.guildBoostSlots,l=e.selectedGuild,g=e.locationSection,O=e.transitionState,b=e.onClose,R=(0,h.vx)(I.Z.boostSlots);a()(null!=i||null!=l,"Must either provide slots or an initial selected guild");a()(!(null==i?void 0:i.some((function(e){return e.isOnCooldown()}))),"If slots are provided, they must not be on cooldown");var N,U=[null==i?Ie.UNUSED_QUANTITY_SELECT:null,null==l?Ie.GUILD_SELECT:null,Ie.CONFIRM,Ie.SUCCESS].filter((function(e){return null!=e})),P=(0,u.e7)([S.Z],(function(){return S.Z.getFlattenedGuilds()})),M=Se((0,u.Wu)([p.Z],(function(){return[p.Z.isModifyingAppliedBoost,p.Z.applyBoostError]})),2),x=M[0],L=M[1],j=Se(o.useState(""),2),T=j[0],D=j[1],A=Se(o.useState(U[0]),2),Z=A[0],B=A[1],G=Se(o.useState(!1),2),w=G[0],F=G[1],H=Se(o.useState(l),2),k=H[0],Y=H[1],W=Se(o.useState(null!=i?i:R.slice(0,1)),2),V=W[0],q=W[1],K=o.useMemo((function(){
return null==V?[]:V.map((function(e){var n=e.premiumGuildSubscription;return m.Z.getGuild(null==n?void 0:n.guildId)})).filter((function(e){return null!=e}))}),[V]),X=o.useMemo((function(){var e;return null!=(null==V||null===(e=V[0])||void 0===e?void 0:e.premiumGuildSubscription)}),[V]),Q=function(){b(Z===Ie.SUCCESS);y.default.track(ue.rMx.MODAL_DISMISSED,{type:ue.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:g})},J=(me(N={},Ie.UNUSED_QUANTITY_SELECT,{body:function(){a()(!(null==i&&0===R.length),"Cannot provide no slots if there are no other available slots");return(0,t.jsxs)("div",{className:de().quantitySelectorBody,children:[(0,t.jsx)(c.X6,{variant:"heading-md/semibold",className:de().quantitySelectorHeader,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_HEADER}),(0,t.jsx)(c.xv,{variant:"text-md/normal",className:de().quantitySelectorDescription,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_DESCRIPTION}),(0,t.jsxs)("div",{
className:de().quantitySelectorWrapper,children:[(0,t.jsx)(C.Z,{value:V.length,onChange:function(e){return q(R.slice(0,e))},minValue:1,maxValue:R.length}),(0,t.jsx)(c.xv,{className:de().quantitySelectorLabel,variant:"text-md/normal",children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_COUNTER})]})]})},footer:function(){return(0,t.jsxs)(v.mz,{children:[(0,t.jsx)(c.zx,{onClick:function(){return B(Ie.CONFIRM)},children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_NEXT}),(0,t.jsx)(c.zx,{look:c.zx.Looks.LINK,color:c.zx.Colors.PRIMARY,onClick:Q,children:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_UNUSED_SLOTS_CANCEL})]})}}),me(N,Ie.GUILD_SELECT,{header:function(){return(0,t.jsxs)(v.xB,{className:de().selectHeaderContainer,children:[(0,t.jsx)(c.X6,{className:de().selectHeader,variant:"heading-md/semibold",children:X?z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_TRANSFER_HEADER:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SELECT_GUILD_HEADER}),(0,t.jsx)(E.Z,{size:E.Z.Sizes.MEDIUM,
placeholder:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SEARCH_GUILD_PLACEHOLDER,"aria-label":z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_SEARCH_GUILD_PLACEHOLDER,className:de().selectSearch,query:T,onChange:D,onClear:function(){return D("")}})]})},bodyClass:de().selectContent,body:function(){return P.filter((function(e){return!K.some((function(n){return n.id===e.id}))&&(T.length<=0||s()(T.toLowerCase(),e.name.toLowerCase()))})).map((function(e){return(0,t.jsxs)(c.P3,{className:de().selectGuild,onClick:function(){Y(e);B(Ie.CONFIRM)},children:[(0,t.jsx)(_.Z,{guild:e,size:_.Z.Sizes.SMALL}),(0,t.jsx)(c.xv,{className:de().selectGuildName,variant:"text-md/normal",children:e.name})]},e.id)}))}}),me(N,Ie.CONFIRM,{body:function(){if(null==k)return null;var e=V.filter((function(e){return e.canceled})).length,n=V.length,r=K.length;return X?(0,t.jsx)(le.TransferBody,{fromGuilds:K,toGuild:k,blurb:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_TRANSFER_BLURB.format({slotCount:n,guildCount:r}),
imageClass:de().transferConfirmImage,error:w?L:null,onDismissError:function(){return F(!1)},slotCount:n,canceledCount:e}):(0,t.jsx)(le.ApplyBody,{guild:k,blurb:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_BLURB,warning:z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_COOLDOWN_WARNING.format({days:ue.o3l,slotCount:n}),imageClass:de().confirmImage,error:w?L:null,onDismissError:function(){return F(!1)},slotCount:n,canceledCount:e})},footer:function(){var e,n,r=V.length,o=U[0]===Ie.CONFIRM?Q:function(){return B(U[U.indexOf(Z)-1])},i=(n=(e=function(){return _e(this,(function(e){switch(e.label){case 0:if(null==k||0===(null==V?void 0:V.length))return[2];a()(!V.some((function(e){return e.isOnCooldown()})),"Cannot use a premium guild subscription slot while on cooldown");e.label=1;case 1:e.trys.push([1,4,,5]);return[4,Promise.all(V.map((function(e){var n=e.premiumGuildSubscription;return null!=n?(0,d.dG)(n.guildId,n.id):Promise.resolve()})))];case 2:e.sent();return[4,(0,
d.W3)(k.id,V.map((function(e){return e.id})))];case 3:e.sent();B(Ie.SUCCESS);return[3,5];case 4:e.sent();F(!0);return[3,5];case 5:return[2]}}))},function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){pe(i,t,o,s,l,"next",e)}function l(e){pe(i,t,o,s,l,"throw",e)}s(void 0)}))}),function(){return n.apply(this,arguments)});return(0,t.jsx)(le.Footer,{confirmation:X?z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION.format({slotCount:r}):z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION.format({slotCount:r}),confirmationLabel:X?z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_TRANSFER_CONFIRM_CONFIRMATION_LABEL.format({slotCount:r}):z.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CONFIRMATION_LABEL.format({slotCount:r}),onConfirm:i,onCancel:o,isModifyingSubscription:x})}}),me(N,Ie.SUCCESS,{body:function(){return(0,t.jsx)(ae.R7,{guild:k,isTransfer:X,guildBoostQuantity:V.length,onClose:Q})}}),N);o.useEffect((function(){
y.default.track(ue.rMx.OPEN_MODAL,{type:ue.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:g})}),[g]);var $=J[Z];return(0,t.jsxs)(v.Y0,{transitionState:O,className:de().modal,size:v.Cg.SMALL,children:[null===(n=$.header)||void 0===n?void 0:n.call($),(0,t.jsx)(v.hz,{className:$.bodyClass,children:(0,t.jsx)(f.Z,{step:Z,steps:U,children:$.body()})}),null===(r=$.footer)||void 0===r?void 0:r.call($),(0,t.jsx)(v.ol,{className:de().modalCloseButton,onClick:Q})]})}},570515:(e,n,r)=>{r.d(n,{R7:()=>ue,CP:()=>se,Gq:()=>ae});var t=r(785893),o=r(667294),i=r(294184),s=r.n(i),l=r(441143),a=r.n(l),u=r(43833),c=r(363010),d=r(331535),f=r(556137),p=r(559019),m=r(909187),S=r(655868),I=r(832010),_=r(212658),C=r(871295),E=r(554962),v=r(511515),y=r(939042),h=r(350138),g=r(796805),O=r(470352),b=r(112508),R=r(732031),N=r(48400),U=r.n(N);function P(e){var n=e.text,r=e.color;return(0,t.jsxs)("div",{className:U().upsellFooter,children:[(0,t.jsx)(R.Z,{className:U().upsellFooterIcon,color:r}),(0,t.jsx)("div",{
children:n})]})}var M=r(817513),x=r(653772),L=r(893321),j=r(859023),T=r(378564),D=r(707955),A=r(916957),Z=r(420202),B=r(124722),G=r(384469),w=r(757987),F=r(956299),H=r(106027),k=r(81951),Y=r(95467),z=r(74030),W=r(56435),V=r(461061),q=r(298716),K=r(375650),X=r(959797),Q=r(338250),J=r.n(Q);function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function ee(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function ne(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){ee(e,n,r[n])}))}return e}function re(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){
var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function te(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(t=r.next()).done);s=!0){i.push(t.value);if(n&&i.length===n)break}}catch(e){l=!0;o=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return $(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e){var n=e.amount,r=e.currency,t=e.intervalType,o=e.intervalCount,i=void 0===o?1:o,s=(0,W.T4)(n,r);return t===q.rV.YEAR?X.Z.Messages.BILLING_PRICE_PER_YEAR_EACH.format({price:s}):t===q.rV.MONTH&&1===i?X.Z.Messages.BILLING_PRICE_PER_MONTH_EACH.format({price:s}):t===q.rV.MONTH&&i>1?X.Z.Messages.BILLING_PRICE_PER_MULTI_MONTH_EACH.format({price:s}):null}function ie(e){var n=e.intervalType,r=e.intervalCount,t=void 0===r?1:r;return n===q.rV.YEAR?X.Z.Messages.PREMIUM_GUILD_PLAN_SINGLE_YEAR:n===q.rV.MONTH&&1===t?X.Z.Messages.PREMIUM_GUILD_PLAN_SINGLE_MONTH:null}function se(e){
var n,r,o=e.guildId,i=e.premiumSubscriptionPlan,l=e.numGuildBoosts,u=e.setNumGuildBoosts,d=e.premiumSubscription,f=e.onClickPremiumSubscriptionLink,m=e.existingAvailableSlots,S=void 0===m?[]:m,_=e.priceOptions,C=i.interval,y=i.intervalCount,g=(0,c.e7)([A.Z],(function(){return A.Z.getForSkuAndInterval(q.Si.GUILD,C,y)})),O=(0,c.e7)([j.default],(function(){return j.default.getCurrentUser()})),b=(0,c.e7)([x.Z],(function(){return x.Z.getGuild(o)}),[o]);a()(null!=g,"Missing guildBoostingSubscriptionPlan");a()(null!=b,"Unknown guild: ".concat(o));var R=(null===(n=(0,v.N)())||void 0===n||null===(r=n.subscription_trial)||void 0===r?void 0:r.sku_id)===q.Si.TIER_2,N=z.ZP.hasBoostDiscount(O)&&null!=g.premiumUserPrice,U=z.ZP.getPrice(g.id,N,!1,_),L=l*U.amount,T=z.ZP.hasBoostDiscount(O)&&null!=d?X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_DISCOUNT.format({planName:z.ZP.getDisplayPremiumType(d.planId)
}):(R?X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_UPSELL_TRIAL_VARIANT:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_FOOTER_UPSELL).format({onPremiumSubscriptionClick:f,discountPercentage:(0,W.T3)(M.default.locale,q.Rr/100),freeSubscriptionCount:q.cb}),D=S.filter((function(e){return e.canceled})).length,G=(0,z.Ap)(_.paymentSourceId),F="HR"===(0,E.Z)().ipCountryCode&&U.currency===K.pK.EUR;return(0,t.jsxs)("div",{className:J().planSelectStep,children:[(0,t.jsx)("div",{className:s()(J().planSelectText,J().bodyText),children:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_STEP_SELECT_DESCRIPTION}),S.length>0?(0,t.jsxs)("div",{className:J().existingSlotNotice,children:[(0,t.jsx)(H.Z,{className:J().existingSlotIcon,color:(0,I.Lq)(V.Ilk.GUILD_BOOSTING_PINK)}),(0,t.jsxs)("div",{children:[X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_UNUSED_SLOT_NOTICE.format({slotCount:S.length}),D>0&&null!=d?(0,t.jsx)(w.ZP,{text:X.Z.Messages.PREMIUM_GUILD_SUBSCRIBE_CONFIRM_CANCEL_WARNING.format({
canceledCount:D,date:d.currentPeriodEnd}),children:function(e){return(0,t.jsx)(k.Z,re(ne({},e),{className:J().existingSlotTooltipWarningIcon,color:(0,I.Lq)(V.Ilk.YELLOW_300)}))}}):null]})]}):null,(0,t.jsxs)("div",{className:J().planSelectRow,children:[(0,t.jsxs)("div",{className:J().planSelectorWrapper,children:[(0,t.jsx)(B.Z,{value:l,onChange:function(e){return u(e)},className:J().planSelector,minValue:1,maxValue:30}),(0,t.jsx)("div",{className:J().planSelectorLabel,children:G?ie({intervalType:C,intervalCount:y}):X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_COUNTER})]}),(0,t.jsx)("div",{className:J().planSelectorPreviewPrice,children:G?(0,W.T4)(U.amount,U.currency):oe({intervalType:C,intervalCount:y,amount:U.amount,currency:U.currency})})]}),(0,t.jsx)("div",{className:J().planSelectDivider}),(0,t.jsxs)("div",{className:J().planSelectRow,children:[(0,t.jsx)("div",{className:J().planSelectorSubtotal,children:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_SUBTOTAL}),(0,t.jsx)("div",{
className:J().planSelectorSubtotalPrice,children:(0,t.jsx)(h.Z,{price:L,currency:U.currency,intervalType:C,intervalCount:y,isPrepaidPaymentSource:G})})]}),F&&(0,t.jsx)(p.Z,{message:X.Z.Messages.LOCALIZED_PRICING_HRK_EURO_WARNING.format({kunaPriceWithCurrency:(0,W.T4)(7.5345*L,K.pK.HRK)})}),(0,t.jsx)(p.Z,{message:X.Z.Messages.BILLING_FINAL_PRICE_MAY_CHANGE.format({documentationLink:Y.Z.getArticleURL(V.BhN.LOCALIZED_PRICING)})}),(0,t.jsx)(P,{text:T,color:Z.JX.PREMIUM_TIER_2})]})}function le(e){var n=e.premiumSubscription,r=e.premiumSubscriptionPlan,o=e.proratedInvoicePreview,i=e.renewalInvoicePreview,s=e.priceOptions,l=r.interval,u=r.intervalCount,d=(0,c.e7)([A.Z],(function(){return A.Z.getForSkuAndInterval(q.Si.GUILD,l,u)}));a()(null!=d,"Missing guildBoostingSubscriptionPlan");var f=function(e){return(0,C.j)(o.invoiceItems).find((function(n){return q.Z1.has(n.subscriptionPlanId)&&e(n)}))},p=f((function(e){return e.amount>=0}));a()(null!=p,"Missing guild boosting invoice item")
;var m=f((function(e){return e.amount<0})),S=null!=m?p.quantity-m.quantity:p.quantity,I=o.invoiceItems.filter((function(e){return(0,z.uZ)(e.subscriptionPlanId)})),E=I.reduce((function(e,n){return e+n.amount}),0),v=(0,_.pV)(p)*S,h=(0,W.T4)(v,o.currency),g=(0,W.og)(h,l,u),O=(0,W.T4)(o.total,o.currency)+(o.currency!==K.pK.USD?"*":""),R=o.total-v-E,N=p.discounts.map((function(e){var n=e.amount/p.quantity;return re(ne({},e),{amount:n*S})})),U=(0,z.Ap)(s.paymentSourceId);return(0,t.jsxs)(t.Fragment,{children:[U?null:(0,t.jsx)(b.hG,{proratedInvoice:o,renewalInvoice:i}),(0,t.jsxs)(y.PO,{children:[(0,t.jsx)(y.q9,{children:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PURCHASE_DETAILS_HEADER}),(0,t.jsx)(y.i$,{label:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_INVOICE_ROW_CONTENT.format({numGuildSubscriptions:S,planName:(0,z.Gf)(d.id,!1,U)}),value:U?h:g,discounts:N,originalAmount:p.subscriptionPlanPrice*S,currency:o.currency,interval:d.interval,intervalCount:d.intervalCount}),0!==E?(0,
t.jsx)(y.R$,{label:(0,t.jsx)(b.As,{label:X.Z.Messages.PREMIUM_SUBSCRIPTION_PLAN_ADJUSTMENT.format({planName:(0,z.aq)(I[0].subscriptionPlanId)}),tooltipText:X.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,W.T4)(E,o.currency)}):null,0!==R?(0,t.jsx)(y.R$,{label:(0,t.jsx)(b.As,{label:X.Z.Messages.PREMIUM_SUBSCRIPTION_GUILD_SUBSCRIPTION_ADJUSTMENT,tooltipText:X.Z.Messages.PREMIUM_SUBSCRIPTION_ADJUSTMENT_TOOLTIP}),value:(0,W.T4)(R,o.currency)}):null,(0,t.jsx)(y.KU,{}),(0,t.jsx)(y.Ji,{label:(o.taxInclusive?U?X.Z.Messages.BILLING_INVOICE_TOTAL_TAX_INCLUSIVE:X.Z.Messages.BILLING_INVOICE_TODAY_TOTAL_TAX_INCLUSIVE:X.Z.Messages.BILLING_INVOICE_TODAY_TOTAL).format(),value:O}),null!=n?(0,t.jsx)(b.nd,{premiumSubscription:n,proratedInvoice:o,renewalInvoice:i,isUpdate:!0,isPrepaidPaymentSource:U}):(0,t.jsx)(b.nd,{renewalInvoice:i,priceOptions:s,isPrepaidPaymentSource:U})]})]})}function ae(e){
var n,r,o=e.paymentSources,i=e.priceOptions,s=e.currentPremiumSubscription,l=e.premiumSubscriptionPaymentSourceId,a=e.premiumSubscriptionPlan,p=e.newAdditionalPlans,I=e.onPaymentSourceChange,C=e.onPaymentSourceAdd,E=e.onPurchaseTermsChange,v=e.legalTermsNodeRef,y=e.hasLegalTermsFlash,h=i.paymentSourceId,g=(0,c.e7)([D.Z],(function(){return null!=l?D.Z.getPaymentSource(l):null})),b=(0,c.e7)([L.Z],(function(){return L.Z.hidePersonalInformation}));r=null!=s?(0,z.Zx)(s,p[0].quantity,p[0].planId):p;var R,N=te((0,_.ED)({subscriptionId:null==s?void 0:s.id,items:r,renewal:!1,applyEntitlements:!0,paymentSourceId:h,currency:i.currency}),1)[0],U=te((0,_.ED)({subscriptionId:null==s?void 0:s.id,items:r,renewal:!0,paymentSourceId:h,currency:i.currency}),1)[0],P=u.M.EEA_COUNTRIES.has(T.Z.ipCountryCodeWithFallback);return(0,t.jsxs)("div",{className:J().reviewStep,children:[null!=N&&null!=U?(0,t.jsx)(le,{premiumSubscription:s,premiumSubscriptionPlan:a,proratedInvoicePreview:N,renewalInvoicePreview:U,
priceOptions:i}):null,(0,t.jsxs)("div",{className:J().paymentSourceWrapper,children:[(0,t.jsx)(d.vw,{tag:d.RB.H5,children:X.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),null!=l?null!=g?(0,t.jsx)(w.DY,{text:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_PAYMENT_SOURCE_TOOLTIP,children:(0,t.jsx)(m.Z,{paymentSources:[g],selectedPaymentSourceId:g.id,hidePersonalInformation:b,disabled:!0})}):(0,t.jsx)("div",{children:(0,t.jsx)(d.$j,{})}):(0,t.jsx)(m.Z,{paymentSources:Object.values(o),selectedPaymentSourceId:h,onChange:I,onPaymentSourceAdd:C,hidePersonalInformation:b})]}),(0,t.jsx)(O.Z,{isActive:y,ref:v,children:(0,t.jsx)(S.Z,{onChange:E,forceShow:!0,finePrint:(0,t.jsx)(f.Z,{subscriptionPlan:a,paymentSourceType:null===(n=o[null!=h?h:""])||void 0===n?void 0:n.type}),showPricingLink:(null!==(R=null==N?void 0:N.currency)&&void 0!==R?R:K.pK.USD)!==K.pK.USD,showWithdrawalWaiver:P})})]})}function ue(e){
var n,r=e.onClose,i=e.guild,s=e.guildBoostQuantity,l=e.isTransfer,a=void 0!==l&&l,u=e.withAnimation,c=void 0===u||u,f=e.paymentSourceType,p=o.useContext(F.Z),m=te(o.useState(G.fe.Scenes.ENTRY),2),S=m[0],I=m[1],_=te(o.useState(!1),2),C=_[0],E=_[1];n=a?null==i?X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_TRANSFERRED_DESCRIPTION_GENERIC_GUILD.format():X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_TRANSFERRED_DESCRIPTION.format({guildName:i.name}):null==i?X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_DESCRIPTION_GENERIC_GUILD.format({guildSubscriptionQuantity:s}):X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_DESCRIPTION.format({guildName:i.name,guildSubscriptionQuantity:s});return(0,t.jsxs)("div",{className:J().confirmationContainer,children:[c?(0,t.jsx)(G.fe,{className:J().confirmationAnimation,nextScene:S,onScenePlay:function(e){if(!C)switch(e){case G.fe.Scenes.ENTRY:return I(G.fe.Scenes.IDLE);case G.fe.Scenes.IDLE:return I(G.fe.Scenes.SUCCESS)
;case G.fe.Scenes.SUCCESS:E(!0);return I(G.fe.Scenes.IDLE)}},pauseWhileUnfocused:!1}):null,(0,t.jsx)(g.C,{className:J().confirmationUpgradedBanner,theme:p,premiumType:q.p9.TIER_2,type:K.X7.has(null!=f?f:K.He.UNKNOWN)?g.C.Types.PREMIUM_PAYMENT_STARTED:g.C.Types.GUILD_BOOST_APPLIED}),(0,t.jsx)("div",{className:J().confirmationText,children:n}),(0,t.jsx)(d.zx,{onClick:r,children:X.Z.Messages.GUILD_SUBSCRIPTION_PURCHASE_MODAL_ACTIVATED_CLOSE_BUTTON})]})}},192254:(e,n,r)=>{r.d(n,{Z:()=>a});var t=r(785893),o=(r(667294),r(240243));function i(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function s(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r
}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function l(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++){r=i[t];n.indexOf(r)>=0||(o[r]=e[r])}return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++){r=i[t];n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}function a(e){var n=e.width,r=void 0===n?24:n,a=e.height,u=void 0===a?24:a,c=e.color,d=void 0===c?"currentColor":c,f=l(e,["width","height","color"]);return(0,t.jsxs)("svg",s(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){i(e,n,r[n])}))}return e}({},(0,
o.Z)(f)),{width:r,height:u,viewBox:"0 0 16 16",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.45329 8.53891L3.26217 13.7844C2.95995 14.0719 2.49772 14.0719 2.21328 13.7844C1.92883 13.497 1.92883 13.0299 2.21328 12.7245L6.88884 7.99999L2.21328 3.27543C1.92883 2.988 1.92883 2.50297 2.21328 2.21555C2.49772 1.92812 2.95995 1.92812 3.26217 2.21555L8.45329 7.47903C8.73774 7.76645 8.73774 8.23352 8.45329 8.53891Z",fill:d}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4533 8.53891L9.26217 13.7844C8.95995 14.0719 8.49772 14.0719 8.21328 13.7844C7.92883 13.497 7.92883 13.0299 8.21328 12.7245L12.8888 7.99999L8.21328 3.27543C7.92883 2.988 7.92883 2.50297 8.21328 2.21555C8.49772 1.92812 8.95995 1.92812 9.26217 2.21555L14.4533 7.47903C14.7377 7.76645 14.7377 8.23352 14.4533 8.53891Z",fill:d})]}))}}}]);
//# sourceMappingURL=0c967e214051ddadacae.js.map