"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[17091],{771068:(e,t,n)=>{n.d(t,{T_:()=>u,al:()=>s,dx:()=>c,gH:()=>f,S1:()=>d,Rz:()=>_});var r=n(496486),i=n(744564),o=n(202181),a=n(575978);function u(e,t){i.Z.dispatch({type:"WINDOW_FOCUS",windowId:(0,a.ZY)(e),focused:t})}function s(e){i.Z.dispatch({type:"WINDOW_HIDDEN",windowId:(0,a.ZY)(e)})}var l=(0,r.memoize)((function(e){return(0,r.debounce)((function(t,n){i.Z.dispatch({type:"WINDOW_RESIZED",windowId:e,width:t,height:n})}),100)}));function c(e){var t=(0,a.ZY)(e);l(t)(e.innerWidth,e.innerHeight)}function f(e){var t=(0,a.ZY)(e);i.Z.dispatch({type:"WINDOW_FULLSCREEN_CHANGE",windowId:t,isElementFullscreen:(0,o.rB)(null,e.document)})}function d(e){var t=(0,a.ZY)(e),n=e.document;i.Z.dispatch({type:"WINDOW_INIT",windowId:t,isElementFullscreen:(0,o.rB)(null,n),focused:n.hasFocus(),width:e.innerWidth,height:e.innerHeight})}function _(e){i.Z.dispatch({type:"WINDOW_UNLOAD",windowId:(0,a.ZY)(e)})}},
516217:(e,t,n)=>{n.d(t,{ZP:()=>a,Qd:()=>u,yh:()=>s,vM:()=>l});var r=n(260561),i=n(464187),o=(0,r.B)({kind:"guild",id:"2023-02_burst_reaction_guild_experiment",label:"Burst Reactions",defaultConfig:{enabled:!1,hasTabUI:!1,hasInfinite:!1,hasFreeBursts:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0,hasTabUI:!1,hasInfinite:!1,hasFreeBursts:!0}},{id:2,label:"Tab UI",config:{enabled:!0,hasTabUI:!0,hasInfinite:!1,hasFreeBursts:!1}},{id:4,label:"Free Bursts",config:{enabled:!0,hasTabUI:!0,hasInfinite:!1,hasFreeBursts:!0}}]});const a=o;var u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null!=e?e:i.Z.getGuildId(),r=o.useExperiment({guildId:null!=n?n:""},{autoTrackExposure:t}),a=s.useExperiment({},{autoTrackExposure:!0});return{enabled:r.enabled||a.enabled,guildEnabled:r.enabled,userEnabled:a.enabled,hasTwoButtonEntryPoint:!!a.enabled&&a.hasTwoButtonEntryPoint,hasTabUI:a.enabled?a.hasTabUI:r.hasTabUI,
hasFreeBursts:a.enabled?a.hasFreeBursts:r.hasFreeBursts,hasBurstShake:a.hasBurstShake,hasPlayRandomAnimations:a.hasPlayRandomAnimations,hasBurstGlow:a.hasBurstGlow,hasSendAnimation:a.hasSendAnimation}},s=(0,r.B)({kind:"user",id:"2022-09_burst_reactions",label:"Burst Reactions User Experiment",defaultConfig:{enabled:!1,hasTabUI:!1,hasTwoButtonEntryPoint:!1,hasFreeBursts:!1},treatments:[{id:1,label:"User two entry points",config:{enabled:!0,hasTabUI:!1,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0}},{id:2,label:"User Tab UI",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!1,hasFreeBursts:!1}},{id:4,label:"User Free Bursts",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!1,hasFreeBursts:!0}},{id:5,label:"User Free Bursts",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!1,hasFreeBursts:!0}},{id:6,label:"Combined entry point and tabs",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0}},{id:7,
label:"Combined entry point and tabs + double weekly refills",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0}},{id:8,label:"All additional polish",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0,hasBurstShake:!0,hasDesktopNotifications:!0,hasPlayRandomAnimations:!0,hasBurstGlow:!0,hasSendAnimation:!0}},{id:9,label:"All additional polish except notifications",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0,hasBurstShake:!0,hasDesktopNotifications:!1,hasPlayRandomAnimations:!0,hasBurstGlow:!0,hasSendAnimation:!0}},{id:10,label:"The exact same as bucket six, just with a different label",config:{enabled:!0,hasTabUI:!0,hasTwoButtonEntryPoint:!0,hasFreeBursts:!0}}]}),l=function(){return s.useExperiment({},{autoTrackExposure:!0}).enabled};(0,r.B)({kind:"user",id:"2023-03_mobile_burst_reactions",label:"Mobile Burst Reactions User Experiment",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{
enabled:!0}}]})},806023:(e,t,n)=>{n.d(t,{U:()=>u,Z:()=>l});var r=n(496486),i=n(260561),o=n(493254),a=!1;function u(e){if(!(a||e.length<2)){if((0,r.sumBy)(e,(function(e){var t=e.filename;return o.IQ.test(t)||o.XH.test(t)?1:0}))>=2){a=!0;window.setTimeout((function(){s.trackExposure({})}),0)}}}var s=(0,i.B)({kind:"user",id:"2022-12_media_mosaic_experiment",label:"Media Mosaic",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Media mosaic is enabled",config:{enabled:!0}}]});const l=s},828439:(e,t,n)=>{n.d(t,{S:()=>r});var r;!function(e){e.ANIMATED="ANIMATED";e.INSTANT="INSTANT"}(r||(r={}))},473664:(e,t,n)=>{n.d(t,{Z:()=>l,O:()=>c});var r=n(202351),i=n(656907),o=n(715107),a=n(377128),u=n(407561);function s(e,t,n){return e||t||n}function l(e){var t=e.userId,n=e.checkSoundSharing,l=void 0!==n&&n,c=e.checkSoundboardSounds,f=void 0===c||c,d=e.checkIsMuted,_=void 0!==d&&d,h=e.context,E=(0,r.e7)([u.Z,o.Z],(function(){var e=o.Z.getVoiceChannelId()
;return null!=e?u.Z.getVoiceStateForChannel(e,t):null})),p=_&&((null==E?void 0:E.mute)||(null==E?void 0:E.selfMute)),g=(0,r.e7)([a.Z],(function(){return a.Z.isSpeaking(t,h)&&!p})),v=(0,r.e7)([a.Z],(function(){return a.Z.isSoundSharing(t)&&l}));return s(g,(0,r.e7)([i.Z],(function(){return i.Z.isUserPlayingSounds(t)&&f})),v)}function c(e){var t=e.userId,n=e.checkSoundSharing,r=void 0!==n&&n,l=e.checkSoundboardSounds,c=void 0===l||l,f=e.checkIsMuted,d=void 0!==f&&f,_=e.context,h=o.Z.getVoiceChannelId(),E=null!=h?u.Z.getVoiceStateForChannel(h,t):null,p=d&&((null==E?void 0:E.mute)||(null==E?void 0:E.selfMute)),g=a.Z.isSpeaking(t,_)&&!p,v=a.Z.isSoundSharing(t)&&r;return s(g,i.Z.isUserPlayingSounds(t)&&c,v)}},815678:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(496486),i=n.n(r);const o=(0,n(260561).B)({kind:"user",id:"2023-03_store_latest_message_data",label:"Store latest message data",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Use latest data from api/gateway",config:{enabled:!0}}]})
;var a=n(828439),u=n(994130),s=n(649536),l=n(102921);var c=n(2590);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function h(e,t,n){t&&_(e.prototype,t);n&&_(e,n);return e}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){E(e,t,n[t])}))}return e}function g(e){return function(e){
if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=e.get(t.id);return null==n||function(e,t){var n,r,i=null!=e.editedTimestamp?+e.editedTimestamp.toDate():0;return(null!=t.edited_timestamp?+new Date(t.edited_timestamp):0)>i||e.embeds.length<(null!==(r=null===(n=t.embeds)||void 0===n?void 0:n.length)&&void 0!==r?r:0)||e.content!==t.content}(n,t)||e.cached?(0,s.e5)(t):n}var I=function(){function e(t){
d(this,e);this._messages=[];this._map={};this._wasAtEdge=!1;this._isCacheBefore=t}var t=e.prototype;t.clone=function(){var t=new e(this._isCacheBefore);t._map=p({},this._map);t._messages=g(this._messages);t._wasAtEdge=this._wasAtEdge;return t};t.clear=function(){this._map={};this._messages=[];this._wasAtEdge=!1};t.remove=function(e){this._messages=i().filter(this._messages,(function(t){return t.id!==e}));delete this._map[e]};t.removeMany=function(e){var t=this;i().each(e,(function(e){delete t._map[e]}));this._messages=this._messages.filter((function(t){return-1===e.indexOf(t.id)}))};t.replace=function(e,t){var n=this._map[e];if(null!=n){delete this._map[e];this._map[t.id]=t;this._messages[this._messages.indexOf(n)]=t}};t.update=function(e,t){var n=this._map[e];if(null!=n){var r=t(n);this._map[n.id]=r;this._messages[this._messages.indexOf(n)]=r}};t.has=function(e){return null!=this._map[e]};t.get=function(e){return this._map[e]};t.forEach=function(e,t){this._messages.forEach(e,t)}
;t.cache=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;0===this.length&&(this._wasAtEdge=t);var r=this._messages.length+e.length;if(r>c.FD8){this._wasAtEdge=!1;if(e.length>c.FD8){this._isCacheBefore?this._messages=e.slice(e.length-c.FD8):this._messages=e.slice(0,c.FD8);this._map={};this._messages.forEach((function(e){return n._map[e.id]=e}));return}var i=c.FD8-e.length;this._isCacheBefore?this._messages=this._messages.slice(Math.max(this._messages.length-i,0)):this._messages=this._messages.slice(0,i)}this._messages=this._isCacheBefore?g(this._messages).concat(g(e)):g(e).concat(g(this._messages));this._map={};this._messages.forEach((function(e){return n._map[e.id]=e}))};t.extractAll=function(){var e=this._messages;this._messages=[];this._map={};return e};t.extract=function(e){var t,n=this;if(this._isCacheBefore){var r=Math.max(this.length-e,0),i=this.length;t=this._messages.slice(r,i);this._messages.splice(r)}else{var o=Math.min(e,this.length)
;t=this._messages.slice(0,o);this._messages.splice(0,e)}t.forEach((function(e){return delete n._map[e.id]}));return t};h(e,[{key:"wasAtEdge",get:function(){return this._wasAtEdge},set:function(e){this._wasAtEdge=e}},{key:"length",get:function(){return this._messages.length}}]);return e}(),O=function(){function e(t){d(this,e);this._array=[];this._map={};this.channelId=t;this.ready=!1;this.jumpTargetId=null;this.jumpTargetOffset=0;this.jumpSequenceId=1;this.jumped=!1;this.jumpedToPresent=!1;this.jumpType=a.S.ANIMATED;this.jumpFlash=!0;this.jumpReturnTargetId=null;this.hasMoreBefore=!0;this.hasMoreAfter=!1;this.loadingMore=!1;this.revealedMessageId=null;this._clearMessages();this._before=new I(!0);this._after=new I(!1);this.cached=!1;this.hasFetched=!1;this.error=!1}var t=e.prototype;t.mutate=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new e(this.channelId);r._array=n?g(this._array):this._array;r._map=n?p({},this._map):this._map
;r._after=n?this._after.clone():this._after;r._before=n?this._before.clone():this._before;if(t instanceof Function){r.ready=this.ready;r.jumpType=this.jumpType;r.jumpTargetId=this.jumpTargetId;r.jumpTargetOffset=this.jumpTargetOffset;r.jumpSequenceId=this.jumpSequenceId;r.jumped=this.jumped;r.jumpedToPresent=this.jumpedToPresent;r.jumpFlash=this.jumpFlash;r.jumpReturnTargetId=this.jumpReturnTargetId;r.focusTargetId=this.focusTargetId;r.hasMoreBefore=this.hasMoreBefore;r.hasMoreAfter=this.hasMoreAfter;r.loadingMore=this.loadingMore;r.revealedMessageId=this.revealedMessageId;r.cached=this.cached;r.hasFetched=this.hasFetched;r.error=this.error;t(r)}else if("object"==typeof t){r.ready=void 0!==t.ready?!0===t.ready:this.ready;r.jumpType=void 0!==t.jumpType?t.jumpType:this.jumpType;r.jumpTargetId=void 0!==t.jumpTargetId?t.jumpTargetId:this.jumpTargetId;r.jumpTargetOffset=void 0!==t.jumpTargetOffset?t.jumpTargetOffset:this.jumpTargetOffset
;r.jumpSequenceId=void 0!==t.jumpSequenceId?t.jumpSequenceId:this.jumpSequenceId;r.jumped=void 0!==t.jumped?!0===t.jumped:this.jumped;r.jumpedToPresent=void 0!==t.jumpedToPresent?!0===t.jumpedToPresent:this.jumpedToPresent;r.jumpFlash=void 0!==t.jumpFlash?!0===t.jumpFlash:this.jumpFlash;r.jumpReturnTargetId=void 0!==t.jumpReturnTargetId?t.jumpReturnTargetId:this.jumpReturnTargetId;r.focusTargetId=void 0!==t.focusTargetId?t.focusTargetId:this.focusTargetId;r.hasMoreBefore=void 0!==t.hasMoreBefore?!0===t.hasMoreBefore:this.hasMoreBefore;r.hasMoreAfter=void 0!==t.hasMoreAfter?!0===t.hasMoreAfter:this.hasMoreAfter;r.loadingMore=void 0!==t.loadingMore?t.loadingMore:this.loadingMore;r.revealedMessageId=void 0!==t.revealedMessageId?t.revealedMessageId:this.revealedMessageId;r.cached=void 0!==t.cached?t.cached:this.cached;r.hasFetched=void 0!==t.hasFetched?t.hasFetched:this.hasFetched;r.error=void 0!==t.error?t.error:this.error}return r};t.toArray=function(){return g(this._array)}
;t.forEach=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)for(var r=this._array,i=r.length-1;i>=0&&!1!==e.call(t,r[i],i);i--);else this._array.forEach(e,t)};t.reduce=function(e,t){return this._array.reduce(e,t)};t.forAll=function(e,t){this._before.forEach(e,t);this._array.forEach(e,t);this._after.forEach(e,t)};t.findOldest=function(e){var t,n;return null!==(n=null!==(t=i().find(this._before._messages,e))&&void 0!==t?t:i().find(this._array,e))&&void 0!==n?n:i().find(this._after._messages,e)};t.findNewest=function(e){var t,n;return null!==(n=null!==(t=i().findLast(this._after._messages,e))&&void 0!==t?t:i().findLast(this._array,e))&&void 0!==n?n:i().findLast(this._before._messages,e)};t.map=function(e,t){return this._array.map(e,t)};t.first=function(){return this._array[0]};t.last=function(){return this._array[this._array.length-1]};t.get=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._map[e]
;return null==r&&n?null!==(t=this._before.get(e))&&void 0!==t?t:this._after.get(e):r};t.getByIndex=function(e){return this._array[e]};t.getAfter=function(e){var t=this.get(e);if(null==t)return null;var n=this._array.indexOf(t);return-1===n||n===this.length-1?null:this._array[n+1]};t.getManyAfter=function(e,t,n){var r=this.get(e);if(null==r)return null;var i=this._array.indexOf(r);if(-1===i)return null;for(var o=[],a=i+1;a<this.length&&(-1===t||o.length<t);a++)(null==n||n(this._array[a]))&&o.push(this._array[a]);return o};t.getManyBefore=function(e,t,n){var r=this.get(e);if(null==r)return null;var i=this._array.indexOf(r);if(-1===i)return null;for(var o=[],a=i-1;a>=0&&(-1===t||o.length<t);a--)(null==n||n(this._array[a]))&&o.unshift(this._array[a]);return o};t.has=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!=this._map[e]||t&&(this._before.has(e)||this._after.has(e))};t.indexOf=function(e){var t=-1;this._array.find((function(n,r){if(n.id===e){
t=r;return!0}return!1}));return t};t.hasPresent=function(){return this._after.length>0&&this._after.wasAtEdge||!this.hasMoreAfter};t.hasBeforeCached=function(e){if(this.length>0&&this._before.length>0){var t=this.first();return null!=t&&t.id===e}return!1};t.hasAfterCached=function(e){if(this.length>0&&this._after.length>0){var t=this.last();return null!=t&&t.id===e}return!1};t.update=function(e,t){var n=this._map[e];if(null==n)return this._before.has(e)?this.mutate((function(n){return n._before.update(e,t)}),!0):this._after.has(e)?this.mutate((function(n){return n._after.update(e,t)}),!0):this;var r=t(n);return this.mutate((function(e){e._map[n.id]=r;e._array[e._array.indexOf(n)]=r}),!0)};t.replace=function(e,t){var n=this._map[e];return null==n?this._before.has(e)?this.mutate((function(n){return n._before.replace(e,t)}),!0):this._after.has(e)?this.mutate((function(n){return n._after.replace(e,t)}),!0):this:this.mutate((function(r){delete r._map[e];r._map[t.id]=t
;r._array[r._array.indexOf(n)]=t}),!0)};t.remove=function(e){return this.mutate((function(t){delete t._map[e];t._array=t._array.filter((function(t){return t.id!==e}));t._before.remove(e);t._after.remove(e)}),!0)};t.removeMany=function(e){var t=this;return e.some((function(e){return t.has(e)}))?this.mutate((function(t){i().each(e,(function(e){delete t._map[e]}));t._array=t._array.filter((function(t){return-1===e.indexOf(t.id)}));t._before.removeMany(e);t._after.removeMany(e)}),!0):this};t.merge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.mutate((function(r){r._merge(e,t,n)}),!0)};t._merge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;e=e.filter((function(e){var t=r._map[e.id];r._map[e.id]=e;if(null!=t){r._array[r._array.indexOf(t)]=e;return!1}return!0}));if(n){var i=t?this._before:this._after
;i.clear()}this._array=t?g(e).concat(g(this._array)):g(this._array).concat(g(e))};t.mergeDelta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.mutate((function(r){r._before.clear();r._after.clear();var i=new Set(n);e.forEach((function(e){return i.add(e.id)}));t.forEach((function(e){return i.add(e.id)}));r._array=r._array.filter((function(e){return!i.has(e.id)})).concat(e.map((function(e){return(0,s.e5)(e)})),t.map((function(e){return(0,s.e5)(e)}))).sort((function(e,t){return l.Z.compare(e.id,t.id)}))}))};t._clearMessages=function(){this._array=[];this._map={}};t.reset=function(e){return this.mutate((function(t){t._array=e;t._map={};e.forEach((function(e){return t._map[e.id]=e}));t._before.clear();t._after.clear()}))};t.truncateTop=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._array.length-e
;return n<=0?this:this.mutate((function(e){for(var t=0;t<n;t++)delete e._map[e._array[t].id];e._before.cache(e._array.slice(0,n),!e.hasMoreBefore);e._array=e._array.slice(n);e.hasMoreBefore=!0}),t)};t.truncateBottom=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;return this._array.length<=e?this:this.mutate((function(t){for(var r=e;r<n._array.length;r++)delete t._map[t._array[r].id];t._after.cache(t._array.slice(e,n._array.length),!t.hasMoreAfter);t._array=t._array.slice(0,e);t.hasMoreAfter=!0}),t)};t.jumpToPresent=function(e){return this.mutate((function(t){var n=t._after.extractAll();t.hasMoreAfter=!1;var r=Math.max(n.length-e,0),i=n.slice(r);n.splice(r);t._before.cache(t._array);t._before.cache(n);t._clearMessages();t._merge(i);t.hasMoreBefore=t._before.length>0;t.jumped=!0;t.jumpTargetId=null;t.jumpTargetOffset=0;t.jumpedToPresent=!0;t.jumpFlash=!1;t.jumpReturnTargetId=null;t.jumpSequenceId=t.jumpSequenceId+1;t.ready=!0;t.loadingMore=!1}),!0)}
;t.jumpToMessage=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return this.mutate((function(o){o.jumped=!0;o.jumpedToPresent=!1;o.jumpType=null!=i?i:a.S.ANIMATED;o.jumpTargetId=e;o.jumpTargetOffset=null!=e&&null!=n?n:0;o.jumpSequenceId=o.jumpSequenceId+1;o.jumpFlash=t;o.jumpReturnTargetId=r;o.ready=!0;o.loadingMore=!1}),!1)};t.focusOnMessage=function(e){return this.mutate((function(t){t.focusTargetId=e;t.ready=!0;t.loadingMore=!1}),!1)};t.loadFromCache=function(e,t){return this.mutate((function(n){var r=e?n._before:n._after;n._merge(r.extract(t),e);var i=r.length>0||!r.wasAtEdge;e?n.hasMoreBefore=i:n.hasMoreAfter=i;n.ready=!0;n.loadingMore=!1}),!0)};t.truncate=function(e,t){return this.length<=c.PNu?this:e?this.truncateBottom(c.j3N):t?this.truncateTop(c.j3N):this};t.receiveMessage=function(e){
var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null==e.nonce?null:this.get(e.nonce,!0);if(null!=n&&(e.author.id===n.author.id||null!=e.interaction&&e.interaction.user.id===n.author.id)&&null!=e.nonce&&n.id===e.nonce){var r=(0,s.e5)(e);null!=n.interactionData&&(r.interactionData=n.interactionData);return this.replace(e.nonce,r)}if(!this.hasMoreAfter){var i=o.getCurrentConfig({},{autoTrackExposure:!1}).enabled?(0,s.e5)(e):v(this,e),a=this.merge([i]);return t?a.truncateTop(c.j3N,!1):this.length>c.PNu?a.truncateBottom(c.j3N,!1):a}this._after.wasAtEdge&&(this._after.wasAtEdge=!1);return this};t.receivePushNotification=function(e){return null!=(null==e.nonce?null:this.get(e.nonce,!0))?this:this.mutate({ready:!0,cached:!0}).merge([v(this,e)])};t.loadStart=function(e){var t,n,r,i;return this.mutate({loadingMore:!0,jumped:null!=e,jumpedToPresent:null!==(t=null==e?void 0:e.present)&&void 0!==t&&t,jumpTargetId:null!==(n=null==e?void 0:e.messageId)&&void 0!==n?n:null,
jumpTargetOffset:null!==(r=null==e?void 0:e.offset)&&void 0!==r?r:0,jumpReturnTargetId:null!==(i=null==e?void 0:e.returnMessageId)&&void 0!==i?i:null,ready:null==e&&this.ready})};t.loadComplete=function(e){var t,n,r,u,l,c,f,d,_,h,E,p=this,I=g(e.newMessages),O=null!==(t=e.isBefore)&&void 0!==t&&t,m=null!==(n=e.isAfter)&&void 0!==n&&n,T=null!==(r=e.jump)&&void 0!==r?r:null,y=null!==(u=e.hasMoreBefore)&&void 0!==u&&u,A=null!==(l=e.hasMoreAfter)&&void 0!==l&&l,N=null!==(c=e.cached)&&void 0!==c&&c,S=i()(I).reverse().map(o.getCurrentConfig({},{autoTrackExposure:!1}).enabled?function(e){return(0,s.e5)(e)}:function(e){return v(p,e)}).value(),C=null;return C=(C=(O||m)&&null==T&&this.ready?this.merge(S,O,!0):this.reset(S)).mutate({ready:!0,loadingMore:!1,jumpType:null!==(f=null==T?void 0:T.jumpType)&&void 0!==f?f:a.S.ANIMATED,jumpFlash:null!==(d=null==T?void 0:T.flash)&&void 0!==d&&d,jumped:null!=T,jumpedToPresent:null!==(_=null==T?void 0:T.present)&&void 0!==_&&_,
jumpTargetId:null!==(h=null==T?void 0:T.messageId)&&void 0!==h?h:null,jumpTargetOffset:null!=T&&null!=T.messageId&&null!=T.offset?T.offset:0,jumpSequenceId:null!=T?C.jumpSequenceId+1:C.jumpSequenceId,jumpReturnTargetId:null!==(E=null==T?void 0:T.returnMessageId)&&void 0!==E?E:null,hasMoreBefore:null==T&&m?C.hasMoreBefore:y,hasMoreAfter:null==T&&O?C.hasMoreAfter:A,cached:N,hasFetched:e.hasFetched,error:!1})};t.addCachedMessages=function(e,t){var n=this;(0,u.Z)(e);var r=e.map((function(e){return v(n,e)})).reverse();this._array.filter((function(e){return!r.some((function(t){return t.id===e.id}))})).forEach((function(e){return i=function(e,t,n){for(var r=0,i=e.length;r<i;){var o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}(t=r,n=e,(function(e,t){return l.Z.compare(e.id,t.id)})),void t.splice(i,0,n);var t,n,i}));return this.reset(r).mutate({ready:!0,cached:t,error:!1})};e.forEach=function(t){i().forEach(e._channelMessages,t)};e.get=function(t){return e._channelMessages[t]}
;e.hasPresent=function(t){var n=e.get(t);return null!=n&&n.hasPresent()};e.getOrCreate=function(t){var n=e._channelMessages[t];if(null==n){n=new e(t);e._channelMessages[t]=n}return n};e.clear=function(t){delete e._channelMessages[t]};e.clearCache=function(t){var n=e._channelMessages[t];if(null!=n){n._before.clear();n._after.clear();this.commit(n)}};e.commit=function(t){e._channelMessages[t.channelId]=t};h(e,[{key:"length",get:function(){return this._array.length}}]);return e}();O._channelMessages={};const m=O},769915:(e,t,n)=>{n.d(t,{$V:()=>b,Bz:()=>U,hc:()=>D,ZP:()=>w});var r=n(441143),i=n.n(r),o=n(575494),a=n(281110),u=n(73904),s=n(396043),l=n(296602),c=n(988135),f=n(736818),d=n(149258),_=n(506474),h=n(124453),E=n(598143),p=n(2590);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t,n){t in e?Object.defineProperty(e,t,{
value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return O(e)}function m(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function T(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function y(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){A=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return A(e,t)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}var M,b,R=null;__OVERLAY__&&(R=n(674482).Z);!function(e){e.OVERLAY_UNLOCKED="overlay_unlocked";e.OVERLAY_UNLOCKED_PINNED="overlay_unlocked_pinned";e.OVERLAY_LOCKED_ACTIVATED="overlay_locked_activated"
}(M||(M={}));!function(e){e[e.SEND=0]="SEND";e[e.EDIT=1]="EDIT";e[e.COMMAND=2]="COMMAND"}(b||(b={}));var U=function(e){return e.type===b.EDIT},D=function(e){return function(e){return e.type===b.SEND}(e)?e.message.nonce:U(e)?e.message.messageId:e.message.data.id},P=[6e4,3e5],L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&A(e,t)}(n,e);var t=C(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;v(this,n);(e=t.call(this,new l.Z("MessageQueue"))).maxSize=r;e.requests=new Map;e.analyticsTimeouts=new Map;return e}var r=n.prototype;r.isFull=function(){return this.queue.length>=this.maxSize};r.drain=function(e,t){this.logger.log("Draining Message Queue with: ",e);switch(e.type){case b.SEND:this.handleSend(e.message,t);break;case b.EDIT:this.handleEdit(e.message,t);break
;case b.COMMAND:this.handleCommand(e.message,t)}};r.cancelRequest=function(e){var t;null===(t=this.requests.get(e))||void 0===t||t.abort();this.requests.delete(e);this.cancelQueueMetricTimers(e)};r.startQueueMetricTimers=function(e){var t=P.map((function(e){return setTimeout((function(){(0,s.yw)(p.rMx.SEND_MESSAGE_QUEUED,{queued_duration_ms:e})}),e)}));this.analyticsTimeouts.set(e,t)};r.cancelQueueMetricTimers=function(e){var t;null===(t=this.analyticsTimeouts.get(e))||void 0===t||t.forEach(clearTimeout);this.analyticsTimeouts.delete(e)};r.createResponseHandler=function(e,t){var n=this;return function(r){if(null!=e){n.requests.delete(e);n.cancelQueueMetricTimers(e)}if(r.hasErr)return t(null,r);(null==r.body||r.body.code!==p.evJ.SLOWMODE_RATE_LIMITED&&r.body.code!==p.evJ.CHANNEL_FOLLOWING_EDIT_RATE_LIMITED)&&429===r.status?t({retryAfter:1e3*r.body.retry_after}):t(null,r)}};r.handleSend=function(e,t){var n=this,r=e.channelId,i=e.file,u=e.filename,s=T(e,["channelId","file","filename"])
;if(c.ZP.get("send_fail_100")){this.logger.log("Skipping message sened because send_fail_100 is enabled");t(null,{ok:!1,hasErr:!1,status:500,headers:{},body:"{}",text:"Simulated failure"})}else{var l;null!=R&&(R.isInstanceUILocked()?l={location:M.OVERLAY_LOCKED_ACTIVATED}:R.isInstanceUILocked()||(l=R.isPinned(p.Odu.TEXT)?{location:M.OVERLAY_UNLOCKED_PINNED}:{location:M.OVERLAY_UNLOCKED}));var f=this.createResponseHandler(e.nonce,t),d=new AbortController;this.startQueueMetricTimers(e.nonce);if(null!=i&&null!=u&&""!==u)a.Z.post({url:p.ANM.MESSAGES(r),fields:Object.entries(s).map((function(e){var t=N(e,2);return{name:t[0],value:t[1]}})),attachments:[{name:"file",file:i,filename:u}],context:l,oldFormErrors:!0,signal:d.signal,onRequestCreated:function(){null!=e.nonce&&n.requests.set(e.nonce,d)}},f);else{var _={timeout:6e4,retries:3,backoff:new o.Z};0;a.Z.post(m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){I(e,t,n[t])}))}return e}({url:p.ANM.MESSAGES(r),body:s,context:l,oldFormErrors:!0},_),{signal:d.signal,onRequestCreated:function(){null!=e.nonce&&n.requests.set(e.nonce,d)}}),f)}}};r.handleEdit=function(e,t){var n=this,r=e.channelId,i=e.messageId,o=T(e,["channelId","messageId"]),u=new AbortController;a.Z.patch({url:p.ANM.MESSAGE(r,i),body:o,retries:1,oldFormErrors:!0,signal:u.signal,onRequestCreated:function(){n.requests.set(i,u)}},this.createResponseHandler(i,t))};r.handleCommand=function(e,t){var n,r=e.applicationId,o=e.guildId,s=e.channelId,l=e.data,c=e.nonce,_=e.attachments,g=e.maxSizeCallback,v=this,I={type:u.B8.APPLICATION_COMMAND,application_id:r,guild_id:o,channel_id:s,session_id:f.default.getSessionId(),data:l,nonce:c};if(null!=_){I.data.attachments=[];n=[];var O=_
;I.data.attachments=O.map((function(e,t){i()(e.status===E.m.COMPLETED,"Uploads must be staged before trying to send a message");return(0,h.B)(e,t)}))}var m=new AbortController;a.Z.post({url:p.ANM.INTERACTIONS,fields:[{name:"payload_json",value:JSON.stringify(I)}],attachments:n,signal:m.signal,onRequestCreated:function(e){v.requests.set(c,m);e.on("progress",(function(e){var t=e.total,n=(0,d.dg)(o);if(null!=t&&t>n){v.cancelRequest(c);null==g||g(n)}}))}},this.createResponseHandler(c,t))};return n}(_.Z);const w=new L},384482:(e,t,n)=>{n.r(t);n.d(t,{default:()=>N});var r=n(717187),i=n.n(r),o=n(131795),a=n.n(o),u=n(817673),s=n(468811),l=n.n(s),c=n(281110),f=n(860872),d=n(2590);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function E(e){
E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return E(e)}function p(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}var O=d.V6Z+d.frH-1;function m(e,t){
if(null==e||null==t)throw new Error("cmd and name required");return"".concat(e,":").concat(t)}var T=u.parse(location.search.slice(1)),y=parseInt(null!=T.rpc&&""!==T.rpc?T.rpc:d.V6Z,10),A=null;const N=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}(n,e);var t=I(n);function n(){_(this,n);return t.apply(this,arguments)}var r=n.prototype;r.connect=function(){var e=this;if(null==A)if(y>O){y=d.V6Z;this.emit("disconnected")}else{try{A=new WebSocket("ws://127.0.0.1:".concat(this.port,"/?v=").concat(d.X6Q))}catch(e){this.disconnect({code:d.$VG.CLOSE_ABNORMAL});return}if(null!=A){A.onmessage=function(t){var n;try{if("string"!=typeof t.data)throw new Error("payload data not a string");n=JSON.parse(t.data)}catch(t){e.emit("error",t);e.disconnect();return}var r=n.cmd,i=n.evt,o=n.nonce,a=n.data
;if(r!==d.Etm.DISPATCH){var u=null;if(i===d.zMe.ERROR){u=new f.Z(a.code,a.message);a=null}e.emit(m(r,o),u,a)}else{if(i===d.zMe.READY){e.emit("connected");return}if(i===d.zMe.ERROR){e.emit("error",new f.Z(a.code,a.message));e.disconnect();return}e.emit(m(r,i),a)}};A.onclose=A.onerror=function(t){return e.disconnect(t)}}}};r.disconnect=function(e){if(null!=e&&"code"in e&&[d.$VG.CLOSE_ABNORMAL,d.$VG.INVALID_CLIENTID].includes(e.code)){y++;A=null;this.connect()}else if(null!=A){this.emit("disconnected");A.close();A=null}};r.subscribe=function(e,t,n){this.on(m(d.Etm.DISPATCH,e),n);return this.request(d.Etm.SUBSCRIBE,t,e)};r.unsubscribe=function(e,t,n){this.removeListener(m(d.Etm.DISPATCH,e),n);return this.request(d.Etm.UNSUBSCRIBE,t,e)};r.request=function(e,t,n){var r=this;return new Promise((function(i,o){if(r.connected){var a=l().v4(),u=JSON.stringify({cmd:e,args:t,evt:n,nonce:a});r.once(m(e,a),(function(e,t){return null!=e?o(e):i(t)}));null==A||A.send(u)}else{
r.once("connected",(function(){r.removeAllListeners("disconnected");i(r.request(e,t,n))}));r.once("disconnected",(function(){r.removeAllListeners("connected");o(new Error("disconnected during request"))}));r.connect()}}))};r.requestOnce=function(e,t,n){return c.Z.post({url:"http://127.0.0.1:".concat(this.port,"/rpc?v=").concat(d.X6Q),body:{cmd:e,args:t,evt:n,nonce:l().v4()}}).then((function(e){var t=e.body,n=t.evt,r=t.data;if(n===d.zMe.ERROR)throw new f.Z(r.code,r.message);return r}))};r.requestRedirect=function(e,t,n){if("Chrome"===a().name&&parseInt(a().version,10)>=58)return this.requestOnce(e,t,n);var r=encodeURIComponent(JSON.stringify({cmd:e,args:t,evt:n,nonce:l().v4()})),i=encodeURIComponent("".concat(location.protocol,"//").concat(location.host).concat(location.pathname,"?done=true"));window.open("http://127.0.0.1:".concat(this.port,"/rpc?v=").concat(d.X6Q,"&payload=").concat(r,"&callback=").concat(i),"_self");return new Promise((function(){return null}))};!function(e,t,n){
t&&h(e.prototype,t);n&&h(e,n)}(n,[{key:"port",get:function(){return y}},{key:"connected",get:function(){return null!=A&&A.readyState===WebSocket.OPEN}}]);return n}(i()))},458960:(e,t,n)=>{n.d(t,{$j:()=>d,zP:()=>_,lW:()=>p,sr:()=>E,Ty:()=>h});var r=n(384482),i=n(860872),o=n(148834),a=n(496486),u=n.n(a),s=n(940060);function l(e){return u().cloneDeepWith(e,(function(e){if((0,s.B)(e))return{__tag__:"bigflag",data:e.toJSON()}}))}function c(e){return u().cloneDeepWith(e,(function(e){if(null!=e&&"object"==typeof e&&"__tag__"in e&&"bigflag"===e.__tag__)return s.Z.deserialize(e.data)}))}var f=n(2590);function d(){r.default.connect()}function _(){r.default.disconnect()}function h(e,t){if(!__OVERLAY__)throw new i.Z(f.lTL.UNKNOWN_ERROR,"called from wrong app context");r.default.subscribe(f.zMe.OVERLAY,{token:t},(function(t){return e(c(t))}))}function E(e,t){if(__OVERLAY__)throw new i.Z(f.lTL.UNKNOWN_ERROR,"called from wrong app context");o.Z.setCommandHandler(f.Etm.OVERLAY,{scope:f.cEn,
handler:function(n){var r=n.args;if(!t(r.token))throw new i.Z(f.lTL.INVALID_TOKEN,"Invalid RPC auth token provided");e(c(r))}});o.Z.setEventHandler(f.zMe.OVERLAY,{scope:f.cEn,handler:function(e){var n=e.args;if(!t(n.token))throw new i.Z(f.lTL.INVALID_TOKEN,"Invalid RPC auth token provided")}})}function p(e){__OVERLAY__?r.default.request(f.Etm.OVERLAY,l(e)):o.Z.dispatchToSubscriptions(f.zMe.OVERLAY,{},l(e))}},144153:(e,t,n)=>{n.d(t,{Uu:()=>i,qH:()=>o});var r=(0,n(260561).B)({kind:"user",id:"2023-03_activities_release_tools",label:"Activities Release Tools",defaultConfig:{isActivitiesReleaseToolsEnabled:!1},treatments:[{id:1,label:"enable activities release tools",config:{isActivitiesReleaseToolsEnabled:!0}}]});function i(){return r.useExperiment({},{autoTrackExposure:!1}).isActivitiesReleaseToolsEnabled}function o(){return r.getCurrentConfig({},{autoTrackExposure:!1}).isActivitiesReleaseToolsEnabled}},258104:(e,t,n)=>{n.d(t,{i6:()=>j,ZP:()=>ae})
;var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(73904),s=n(736818),l=n(61209),c=n(682776),f=n(473903),d=n(930948),_=n(72580),h=n(120415),E=n(144153),p=n(515209),g=n(84894),v=n(838733),I=n(88067),O=n(2590),m=n(473708);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function N(e){N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return N(e)}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){A(e,t,n[t])}))}return e
}function C(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function M(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){
o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function P(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}var w=864e5,Z=(new Set([]),{freePeriodActivities:null,shouldShowFreeActivityIndicator:!1,lastFreeActivityRotationTimestampMs:null,seenActivities:[],shouldShowNewActivityIndicator:!1,usersHavePlayedByApp:new Map}),j=[],F=new Map,Y=new Map,G=new Map,H=!1,k=new Map,B=new Map,V=new Map,x=new Map,W=new Map,K=new Map,z=new Map,q=216e5,Q=new Map,J=new Set([]);function X(e){return null!=e?e:"0"}function $(e,t,n,r,i){var o,a=(0,g.Z)(n.application_id)
;if(null!=a){var u=l.Z.getBasicChannel(t),f=null!=u&&c.Z.canBasicChannel(O.S7T.CONNECT,u)||(null==u?void 0:u.type)===O.d4z.DM||(null==u?void 0:u.type)===O.d4z.GROUP_DM;!function(e,t){var n;Z.usersHavePlayedByApp.set(e,new Set(U(null!==(n=Z.usersHavePlayedByApp.get(e))&&void 0!==n?n:[]).concat(U(t.map((function(e){return e.user_id}))))))}(n.application_id,r);if(f){var _,h=function(e,t,n,r,i){var o,a,u=new Map;t.forEach((function(e){u.set(e.user_id,e)}));return C(S({},e),{name:null!==(o=e.name)&&void 0!==o?o:m.Z.Messages.EMBEDDED_ACTIVITIES_UNKNOWN_ACTIVITY_NAME,type:null!==(a=e.type)&&void 0!==a?a:O.IIU.PLAYING,url:n,connections:u,guildId:r,channelId:i})}(n,r,a,e,t),E=s.default.getId(),p=F.get(h.application_id);r.some((function(e){return e.user_id===E}))&&null!=p&&F.set(p.application_id,S({},p,h))
;if(0===r.length&&(null==p?void 0:p.channelId)===t&&i===I.m2.ACTIVITY_TERMINATED_NO_ELIGIBLE_HOST&&(null==p?void 0:p.connections.has(E))&&!(null===(o=p.connections.get(E))||void 0===o?void 0:o.metadata.is_eligible_host)){d.S.dispatch(O.CkL.LAST_NITRO_HOST_LEFT,{applicationId:h.application_id});F.delete(h.application_id)}var v,T=(null!==(_=G.get(t))&&void 0!==_?_:[]).filter((function(e){return e.application_id!==n.application_id})),y=X(e),A=(null!==(v=Y.get(y))&&void 0!==v?v:[]).filter((function(e){return!(e.application_id===n.application_id&&e.channelId===t)}));if(0!==r.length){T.push(h);A.push(h)}G.set(t,T);Y.set(y,A)}}}function ee(e){e.embedded_activities.forEach((function(t){var n=t.channel_id,r=t.embedded_activity,i=t.connections;$(e.id,n,r,i)}))}var te=function(){Z.shouldShowFreeActivityIndicator=!1;Z.shouldShowNewActivityIndicator=!1};function ne(){H=!1}function re(e,t){return"".concat(e,":").concat(t)}var ie=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&b(e,t)}(n,e);var t=L(n);function n(){y(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){var t=new Map;Array.isArray(null==e?void 0:e.usersHavePlayedByApp)&&(null==e||e.usersHavePlayedByApp.forEach((function(e){if(Array.isArray(e)){var n=R(e,2),r=n[0],i=n[1];"string"==typeof r&&Array.isArray(i)&&t.set(r,new Set(i))}})));null!=e&&(Z=C(S({},e),{usersHavePlayedByApp:t}))};r.getState=function(){return Z};r.shouldShowIndicatorForActivity=function(e){if((0,_.lm)(e)){var t;return(null===(t=Z.freePeriodActivities)||void 0===t?void 0:t.includes(e))&&Z.shouldShowFreeActivityIndicator}return Z.shouldShowFreeActivityIndicator};r.getSelfEmbeddedActivityForChannel=function(e){var t;return null!==(t=Array.from(F.values()).find((function(t){var n=t.channelId
;return e===n})))&&void 0!==t?t:null};r.isLastEligibleHost=function(e,t){var n,r=null===(n=F.get(t))||void 0===n?void 0:n.connections,i=(0,_.lm)(r)?Array.from(r.values()):[],o=i.filter((function(e){return e.metadata.is_eligible_host}));return i.length>1&&1===o.length&&o.some((function(t){return t.user_id===e}))};r.getSelfEmbeddedActivities=function(){return F};r.getEmbeddedActivitiesForGuild=function(e){var t;return null!==(t=Y.get(e))&&void 0!==t?t:j};r.getEmbeddedActivitiesForChannel=function(e){var t;return null!==(t=G.get(e))&&void 0!==t?t:j};r.getEmbeddedActivitiesByChannel=function(){return G};r.getEmbeddedActivityDurationMs=function(e,t){var n=Q.get(re(e,t));return null==n?null:Date.now()-n};r.isLaunchingActivity=function(){return H};r.getBundleItems=function(e){var t,n=X(e);return null!==(t=k.get(n))&&void 0!==t?t:[]};r.getShelfActivities=function(e){var t,n=X(e);return null!==(t=B.get(n))&&void 0!==t?t:[]};r.getShelfFetchStatus=function(e){var t=X(e);return V.get(t)}
;r.shouldFetchShelf=function(e){var t,n,r=X(e),i=null!==(t=V.get(r))&&void 0!==t?t:{isFetching:!1},o=Date.now()-(null!==(n=null==i?void 0:i.lastFetchTimestampMs)&&void 0!==n?n:0)>q;return!(null==i?void 0:i.isFetching)&&o};r.getOrientationLockStateForApp=function(e){var t;return null!==(t=x.get(e))&&void 0!==t?t:null};r.getPipOrientationLockStateForApp=function(e){var t;return null!==(t=W.get(e))&&void 0!==t?t:this.getOrientationLockStateForApp(e)};r.getGridOrientationLockStateForApp=function(e){var t,n;return null!==(n=null!==(t=K.get(e))&&void 0!==t?t:W.get(e))&&void 0!==n?n:this.getOrientationLockStateForApp(e)};r.getLayoutModeForApp=function(e){return z.get(e)};r.getDismissedEmbeddedActivityMessageKeys=function(){return Array.from(J)};r.getUsersHavePlayedByApp=function(e){var t;return U(null!==(t=Z.usersHavePlayedByApp.get(e))&&void 0!==t?t:[])};r.__getLocalVars=function(){return{MINIMUM_ROTATION_TIME_MS:w,persistedState:Z,connectedActivities:F,embeddedActivitiesByGuild:Y,
embeddedActivitiesByChannel:G,isLaunchingActivity:H,shelfByGuild:k,shelfActivitiesByGuild:B,shelfFetchStatus:V,orientationLockStateByApp:x,pipOrientationLockStateByApp:W,gridOrientationLockStateByApp:K,layoutModeByApp:z,CACHE_TIME_MS:q,activityJoinTimesMs:Q,dismissedEmbeddedActivityMessageKeys:J,handleDismissFreeIndicator:te,instance:oe}};return n}(o.ZP.PersistedStore);ie.displayName="EmbeddedActivitiesStore";ie.persistKey="EmbeddedActivities";ie.migrations=[function(e){return C(S({},e),{seenFeaturedActivities:[],shouldShowNewActivityIndicator:!1})},function(e){delete e.seenFeaturedActivities;return C(S({},e),{seenActivities:[]})},function(e){return C(S({},e),{lastFreeActivityRotationTimestampMs:null})},function(e){delete e.currentFreeActivity;return C(S({},e),{freePeriodActivities:null})}];var oe=new ie(a.Z,{ACTIVITY_LAYOUT_MODE_UPDATE:function(e){var t=e.applicationId,n=e.layoutMode;z.set(t,n)},CONNECTION_OPEN_SUPPLEMENTAL:function(e){var t=e.guilds;G.clear();Y.clear()
;t.forEach((function(e){return ee(e)}))},GUILD_CREATE:function(e){ee(e.guild)},CALL_CREATE:function(e){e.channelId;!function(e,t){t.forEach((function(e){$(null,e.channel_id,e.embedded_activity,e.connections)}))}(0,e.embeddedActivities)},EMBEDDED_ACTIVITY_LAUNCH_START:function(){H=!0},EMBEDDED_ACTIVITY_LAUNCH_SUCCESS:ne,EMBEDDED_ACTIVITY_LAUNCH_FAIL:ne,EMBEDDED_ACTIVITY_OPEN:function(e){var t,n=e.channelId,r=e.embeddedActivity,i=r.application_id,o=(0,g.Z)(i),a=s.default.getSessionId();if(null==o||null==a)return!1;if((null===(t=F.get(i))||void 0===t?void 0:t.channelId)===n)return!1;var u,c=l.Z.getChannel(n),d=null==c?void 0:c.getGuildId(),_=f.default.getCurrentUser();if(null==d&&(null===(u=null==c?void 0:c.isPrivate())||void 0===u||!u)||null==_)return!1;var h,E=new Map,p=_.id;E.set(p,{user_id:p,metadata:{is_eligible_host:!1}});F.set(i,{guildId:d,channelId:n,application_id:i,name:null!==(h=r.name)&&void 0!==h?h:m.Z.Messages.EMBEDDED_ACTIVITIES_UNKNOWN_ACTIVITY_NAME,url:o,
type:O.IIU.PLAYING,connections:E,connectedSince:Date.now(),connectedPremiumType:_.premiumType});Q.set(re(n,i),Date.now())},EMBEDDED_ACTIVITY_CLOSE:function(e){var t=e.applicationId;F.delete(t)},EMBEDDED_ACTIVITY_INBOUND_UPDATE:function(e){$(e.guildId,e.channelId,e.embeddedActivity,e.connections,e.updateCode)},LOCAL_ACTIVITY_UPDATE:function(e){var t,n=e.activity;if(null==n)return!1;var r,i=F.get(null!==(t=n.application_id)&&void 0!==t?t:"");if(null==i)return!1;F.set(i.application_id,C(S({},i),{type:null!==(r=n.type)&&void 0!==r?r:i.type,secrets:n.secrets}))},EMBEDDED_ACTIVITY_SET_CONFIG:function(e){var t=e.applicationId,n=e.config,r=F.get(t);null!=r&&F.set(r.application_id,C(S({},r),{config:n}))},EMBEDDED_ACTIVITY_FETCH_SHELF:function(e){var t=X(e.guildId),n=V.get(t);V.set(t,{isFetching:!0,lastFetchTimestampMs:null==n?void 0:n.lastFetchTimestampMs})},EMBEDDED_ACTIVITY_FETCH_SHELF_SUCCESS:function(e){var t=e.guildId,n=e.items,r=e.activities,i=X(t);k.set(i,n);B.set(i,r);var o=Date.now()
;((0,E.qH)()?r:(0,p.IO)(n,[])).forEach((function(e){var t=e.application_id,n=e.client_platform_config[(0,v.Z)((0,h.Ij)())];n.label_type===u.ww.NEW&&null!=n.label_until&&new Date(n.label_until).getTime()>o&&!Z.seenActivities.includes(t)&&(Z.shouldShowNewActivityIndicator=!0);Z.seenActivities.push(t)}));V.set(i,{isFetching:!1,lastFetchTimestampMs:o})},EMBEDDED_ACTIVITY_FETCH_SHELF_FAIL:function(e){var t=X(e.guildId),n=V.get(t);V.set(t,{isFetching:!1,lastFetchTimestampMs:null==n?void 0:n.lastFetchTimestampMs})},EMBEDDED_ACTIVITY_FREE_ACTIVITY_UPDATE:function(e){var t,n,r=e.freePeriodActivities,o=Date.now(),a=null===Z.lastFreeActivityRotationTimestampMs?w:o-Z.lastFreeActivityRotationTimestampMs,u=r.some((function(e){var t;return!(null===(t=Z.freePeriodActivities)||void 0===t?void 0:t.includes(e))}));if(!i().isEqual(r.sort(),null!==(n=null===(t=Z.freePeriodActivities)||void 0===t?void 0:t.sort())&&void 0!==n?n:[])&&a>=w){
null!=Z.freePeriodActivities&&u&&(Z.shouldShowFreeActivityIndicator=!0);Z.freePeriodActivities=r;Z.lastFreeActivityRotationTimestampMs=o}},EMBEDDED_ACTIVITY_DISMISS_FREE_INDICATOR:te,EMBEDDED_ACTIVITY_SET_ORIENTATION_LOCK_STATE:function(e){var t=e.applicationId,n=e.lockState,r=e.pictureInPictureLockState,i=e.gridLockState;null==n?x.delete(t):x.set(t,n);null===r?W.delete(t):void 0!==r&&W.set(t,r);null===i?K.delete(t):void 0!==i&&K.set(t,i)},EMBEDDED_ACTIVITY_DISMISS_MESSAGE:function(e){var t=e.embeddedActivityKey;J.add(t)}});const ae=oe},515209:(e,t,n)=>{n.d(t,{IO:()=>c,s7:()=>f,ZP:()=>d});var r=n(73904),i=n(959207),o=n(88067),a=n(203600);function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){u(e,t,n[t])}))}return e}function l(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function c(e,t,n){return e.map((function(e){var r,o=null!==(r=null==t?void 0:t.find((function(t){return t.id===e.application_id})))&&void 0!==r?r:i.Z.getGame(e.application_id);return f(e,o,n)}))}function f(e,t,n){var i,c,f,d=new Date,_={label_type:null!=(null==e?void 0:e.new_until)?r.ww.NEW:r.ww.NONE,release_phase:"",label_until:null==e?void 0:e.new_until
},h=(null==e?void 0:e.always_free)&&(null==e?void 0:e.application_id)!==o.jT||(null==n?void 0:n.includes(null!==(i=null==e?void 0:e.application_id)&&void 0!==i?i:""));return l(s(l(s({},o.wT),{application_id:null!==(c=null==e?void 0:e.application_id)&&void 0!==c?c:""}),null==t?void 0:t.embeddedActivityConfig),{premium_tier_requirement:(null==e?void 0:e.nitro_requirement)?a.p9.TIER_2:null,free_period_starts_at:h?d.toISOString():null,free_period_ends_at:h?null==e?void 0:e.expires_on:null,client_platform_config:(f={},u(f,r.C3.WEB,_),u(f,r.C3.IOS,_),u(f,r.C3.ANDROID,_),f)})}function d(e,t,n){return t.map((function(t){return{activity:f(e.find((function(e){return e.application_id===t.id})),t,n),application:t}}))}},84894:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(325213),i=n(560213);function o(e){var t=i.Z.getState()
;return t.isEnabled&&t.useActivityUrlOverride&&null!=t.activityUrlOverride&&""!==t.activityUrlOverride?t.activityUrlOverride:r.Z.inTestModeForEmbeddedApplication(e)?r.Z.testModeOriginURL:function(e){var t=window.GLOBAL_ENV.ACTIVITY_APPLICATION_HOST;return null==t?null:"https://".concat(e,".").concat(t)}(e)}},838733:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(73904);function i(e){switch(e){case"android":return r.C3.ANDROID;case"ios":return r.C3.IOS;default:return r.C3.WEB}}},994130:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(441143),i=n.n(r),o=n(842227);function a(e){i()(e.length<=2||o.default.compare(e[0].id,e[e.length-1].id)>=0,"messages must be sorted in descending order.")}},358500:(e,t,n)=>{n.d(t,{fO:()=>r,dF:()=>i,_5:()=>o,Io:()=>a,f3:()=>u,e5:()=>s});var r,i;!function(e){e[e.STREAM=0]="STREAM";e[e.HIDDEN_STREAM=1]="HIDDEN_STREAM";e[e.USER=2]="USER";e[e.ACTIVITY=3]="ACTIVITY"}(r||(r={}));!function(e){e.NONE="NONE";e.AUTO="AUTO"}(i||(i={}));function o(e){
return Boolean((null==e?void 0:e.type)===r.STREAM||(null==e?void 0:e.type)===r.HIDDEN_STREAM)}function a(e){return Boolean((null==e?void 0:e.type)===r.USER)}var u=320,s=8},453597:(e,t,n)=>{n.d(t,{qz:()=>R,sI:()=>M,ZP:()=>D});var r=n(496486),i=n(575626),o=n(473664),a=n(258104),u=n(306263),s=n(177570),l=n(736818),c=n(610773),f=n(61209),d=n(604945),_=n(377128),h=n(473903),E=n(256727),p=n(407561),g=n(773148),v=n(358500),I=n(2590),O=n(36256);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){y(e,t,n[t])}))}return e}function N(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function S(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}var M,b="__EMBEDDED_ACTIVITIES__",R=function(e,t){return"".concat(e.toLowerCase().padEnd(32,"!")).concat(t.discriminator)};function U(e){switch(e.type){case v.fO.ACTIVITY:return"\0".concat(e.sortKey);case v.fO.HIDDEN_STREAM:case v.fO.STREAM:return"".concat(e.userVideo?"":"").concat(R(e.userNick,e.user),"");case v.fO.USER:var t,n,r="";(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)?r="":(null===(n=e.voiceState)||void 0===n?void 0:n.selfStream)&&(r="");return"".concat(r).concat(R(e.userNick,e.user))}}!function(e){e.VIDEO="VIDEO"
;e.STREAM="STREAM";e.FILTERED="FILTERED";e.SPEAKING="SPEAKING";e.ACTIVITY="ACTIVITY"}(M||(M={}));var D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.participants={};this.lastSpoke={};this.participantByIndex=new i.Z((function(e){var t,n=[];e.type===v.fO.USER&&e.speaking&&n.push(M.SPEAKING);if(e.type===v.fO.USER&&(null===(t=e.voiceState)||void 0===t?void 0:t.selfVideo)){n.push(M.VIDEO);e.localVideoDisabled||n.push(M.FILTERED)}else if((0,v._5)(e)){n.push(M.STREAM);e.type!==v.fO.HIDDEN_STREAM&&null!=e.streamId&&n.push(M.FILTERED)}e.type===v.fO.ACTIVITY&&n.push(M.ACTIVITY);return n}),U);this.channelId=t}var t=e.prototype;t.size=function(e){return this.participantByIndex.size(e)};t.toArray=function(e){return this.participantByIndex.values(e,!0)};t.rebuild=function(){var e=this,t=f.Z.getChannel(this.channelId);if(null==t||t.type===I.d4z.GUILD_TEXT)return!1;this.call=c.Z.getCall(this.channelId)
;if(t.isPrivate()&&(null==this.call||this.call.unavailable))return!1;var n=new Set(t.isGuildVocalOrThread()?Object.keys(p.Z.getVoiceStatesForChannel(t.id)):t.recipients);n.add(l.default.getId());s.Z.getAllActiveStreamsForChannel(this.channelId).forEach((function(e){var t=e.ownerId;return n.add(t)}));this.participantByIndex.clear();this.participants={};n.forEach((function(t){return e.updateParticipant(t)}));this.updateEmbeddedActivities();return!0};t.getParticipant=function(e){var t;return null!==(t=this.participantByIndex.get(e))&&void 0!==t?t:null};t.updateEmbeddedActivities=function(){return this.updateParticipant(b)};t.hasEmbeddedActivity=function(){var e=this.participants.__EMBEDDED_ACTIVITIES__;return null!=e&&e.length>0};t.updateParticipant=function(e){var t=this,n=this.participants[e],r=e===b?this._getParticipantsForEmbeddedActivities():this._getParticipantsForUser(e);if(null==n&&0===r.length)return!1;null==n||n.forEach((function(e){t.participantByIndex.delete(e.id)}))
;r.forEach((function(e){t.participantByIndex.set(e.id,e)}));this.participants[e]=r;return!0};t.updateParticipantSpeaking=function(e){var t,n,r=this;return null!==(n=null===(t=this.participants[e])||void 0===t?void 0:t.reduce((function(t,n){if(n.type===v.fO.USER){var i=(0,o.O)({userId:e,checkIsMuted:!0});i&&(r.lastSpoke[e]=Date.now());r.participantByIndex.set(n.id,N(A({},n),{speaking:i,lastSpoke:r.lastSpoke[e],soundsharing:_.Z.isSoundSharing(e)}));return!0}return t}),!1))&&void 0!==n&&n};t.updateParticipantQuality=function(e,t,n){var r,i,o=this;return null!==(i=null===(r=this.participants[e])||void 0===r?void 0:r.reduce((function(e,r){if(r.type===v.fO.STREAM){o.participantByIndex.set(r.id,N(A({},r),{maxResolution:t,maxFrameRate:n}));return!0}return e}),!1))&&void 0!==i&&i};t._getEmbeddedActivities=function(){var e=a.ZP.getEmbeddedActivitiesForChannel(this.channelId),t=a.ZP.getSelfEmbeddedActivityForChannel(this.channelId);return null==t?e:(0,r.uniqBy)(S(e).concat([t]),"application_id")}
;t._getParticipantsForEmbeddedActivities=function(){var e=this;return this._getEmbeddedActivities().map((function(t,n){var r,i,o,a;return{type:v.fO.ACTIVITY,id:t.application_id,activityType:t.type,activityUrl:t.url,participants:new Set(t.connections.keys()),canJoin:null!=(null==t||null===(r=t.secrets)||void 0===r?void 0:r.join),joinSecret:null==t||null===(i=t.secrets)||void 0===i?void 0:i.join,guildId:null!==(a=null===(o=f.Z.getChannel(e.channelId))||void 0===o?void 0:o.getGuildId())&&void 0!==a?a:null,sortKey:n.toString()}}))};t._getParticipantsForUser=function(e){var t,n,r=[],i=h.default.getUser(e);if(null==i)return r;var a,c,I,m,T=p.Z.getVoiceStateForChannel(this.channelId,e),y=f.Z.getChannel(this.channelId),S=null!==(c=null===(t=this.call)||void 0===t||null===(n=t.ringing)||void 0===n?void 0:n.includes(e))&&void 0!==c&&c;if(null!=T||S){var C;a=N(A({type:v.fO.USER},E.Z.getUserStreamData(e)),{user:i,id:i.id,voiceState:T,speaking:(0,o.O)({userId:e,checkIsMuted:!0}),
lastSpoke:null!==(C=this.lastSpoke[e])&&void 0!==C?C:0,soundsharing:_.Z.isSoundSharing(e),ringing:S,userNick:g.Z.getName(null==y?void 0:y.getGuildId(),this.channelId,i),localVideoDisabled:d.Z.isLocalVideoDisabled(i.id)});r.push(a)}var M=null!==(m=s.Z.getStreamForUser(e,null==y?void 0:y.getGuildId()))&&void 0!==m?m:s.Z.getActiveStreamForUser(e,null==y?void 0:y.getGuildId());if(null!=M&&M.channelId===this.channelId){var b,R,U=(0,u.V9)(M),D=this.getParticipant(U),P=M.ownerId===l.default.getId()&&s.Z.isSelfStreamHidden(this.channelId),L=(null==D?void 0:D.type)===v.fO.STREAM?{maxResolution:null!=D.maxResolution?A({},D.maxResolution):void 0,maxFrameRate:D.maxFrameRate}:null;I=N(A({},E.Z.getUserStreamData(e,O.Yn.STREAM),L),{type:P?v.fO.HIDDEN_STREAM:v.fO.STREAM,id:U,userVideo:null!==(R=null==T?void 0:T.selfVideo)&&void 0!==R&&R,user:i,userNick:g.Z.getName(null===(b=f.Z.getChannel(this.channelId))||void 0===b?void 0:b.getGuildId(),this.channelId,i),stream:M});r.push(I)}return r}
;!function(e,t,n){t&&T(e.prototype,t);n&&T(e,n)}(e,[{key:"version",get:function(){return this.participantByIndex.version}}]);return e}()},566706:(e,t,n)=>{n.d(t,{Z:()=>Ee});var r=n(441143),i=n.n(r),o=n(496486),a=n.n(o),u=n(202351),s=n(744564),l=n(258104),c=n(29891),f=n(296602),d=n(409125),_=n(306263),h=n(177570),E=n(736818),p=n(610773),g=n(61209),v=n(715107),I=n(377128),O=n(473903),m=n(256727),T=n(407561),y=n(453597),A=n(358500),N=n(2590);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return b(e)}function R(e,t){t=null!=t?t:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function U(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){D=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return D(e,t)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break
}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){
var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}var Z=new f.Z("ChannelRTCStore"),j=Object.freeze([]),F=[],Y={},G={},H={},k={},B={},V={},x={},W={},K={},z={};function q(e){var t=Y[e];if(null==t){t=new y.ZP(e);Y[e]=t}return t}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;return t.reduce((function(t,n){var r=q(n);if(!e(r))return t;ie(n);re(n);return!0}),!1)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;return Q((function(t){return t.updateParticipant(e)}),t)}function X(e){var t,n=g.Z.getChannel(e),r=(null==n?void 0:n.isDM())?A.dF.AUTO:A.dF.NONE;return null!==(t=G[e])&&void 0!==t?t:[r,A.dF.NONE]}function $(e){return null!=G[e]&&P(G[e],1)[0]!==A.dF.NONE}function ee(e){null==H[e]&&(H[e]={gridDurationMs:0,focusDurationMs:0,toggleCount:0,lastUpdate:0});var t=H[e],n=performance.now(),r=$(e);if(t.lastUpdate>0){var i=n-t.lastUpdate;t[r?"focusDurationMs":"gridDurationMs"]+=i}
t.lastUpdate=n}function te(e,t){ee(e);var n=$(e);null==t?delete G[e]:G[e]=t;n!==$(e)&&H[e].toggleCount++}function ne(e){return e.size(y.sI.STREAM)>0||e.size(y.sI.VIDEO)>0||e.hasEmbeddedActivity()}function re(e){var t=E.default.getId(),n=q(e);if(0!==n.size()&&v.Z.getVoiceChannelId()===e){var r=A.dF.NONE,o=n.toArray(y.sI.STREAM).find((function(e){return e.type===A.fO.STREAM&&h.Z.getActiveStreamForStreamKey(e.id)}));if(null!=o){i()(o.type===A.fO.STREAM,"Impossible condition");r=o.id}else if(1===n.size())r=t;else if(1===n.size(y.sI.VIDEO)){r=P(n.toArray(y.sI.VIDEO),1)[0].id}else{var a,u=n.toArray().find((function(e){return e.type===A.fO.USER&&e.id!==t&&!e.ringing}));r=null!==(a=null==u?void 0:u.id)&&void 0!==a?a:t}var s=P(X(e),1)[0];if(s!==A.dF.AUTO&&s!==A.dF.NONE){var l=n.getParticipant(s);(null==l||l.type===A.fO.STREAM&&null==h.Z.getActiveStreamForStreamKey(l.id))&&(s=A.dF.NONE)}te(e,[s,r])}else te(e,null)}function ie(e){var t=q(e);if(0!==t.size()){
var n=_e(e)||ne(t)?N.WtW.VIDEO:N.WtW.VOICE;if(n===N.WtW.VOICE){delete k[e];delete B[e]}else k[e]=n}}function oe(e){delete Y[e];delete G[e];delete k[e];delete B[e]}function ae(){return Q((function(e){return e.rebuild()}),function(){var e=[],t=v.Z.getChannelId();null!=t&&e.push(t);var n=v.Z.getVoiceChannelId();null==n||e.includes(n)||e.push(n);var r=d.Z.getRemoteSessionId(),i=T.Z.getVoiceStateForSession(E.default.getId(),r);null!=(null==i?void 0:i.channelId)&&e.push(null==i?void 0:i.channelId);a().difference(F,e).forEach(oe);var o=a().difference(e,F);F=e;return o}())}function ue(){return Q((function(e){return e.updateEmbeddedActivities()}))}function se(e){var t=e.userId;return Q((function(e){return e.updateParticipantSpeaking(t)}))}function le(e){return J(e.user.id)}function ce(e){return Q((function(e){return e.rebuild()}),[e.channelId])}function fe(e){var t=e.channel.id;delete W[t];delete K[t];return oe(t)}function de(e){var t=e.streamKey,n=(0,_.my)(t),r=n.channelId
;return J(n.ownerId,[r])}function _e(e){var t;return Boolean(null===(t=g.Z.getChannel(e))||void 0===t?void 0:t.isGuildVocal())}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&D(e,t)}(n,e);var t=w(n);function n(){C(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(h.Z,E.default,p.Z,g.Z,l.ZP,v.Z,I.Z,O.default,m.Z,T.Z);this.syncWith([l.ZP],ue);this.syncWith([d.Z],ae)};r.getParticipantsVersion=function(e){return q(e).version};r.getParticipants=function(e){var t;return null!==(t=q(e).toArray())&&void 0!==t?t:j};r.getSpeakingParticipants=function(e){var t;return null!==(t=q(e).toArray(y.sI.SPEAKING))&&void 0!==t?t:j};r.getFilteredParticipants=function(e){return x[e]?q(e).toArray(y.sI.FILTERED):q(e).toArray()};r.getVideoParticipants=function(e){var t
;return null!==(t=q(e).toArray(y.sI.VIDEO))&&void 0!==t?t:j};r.getStreamParticipants=function(e){var t;return null!==(t=q(e).toArray(y.sI.STREAM))&&void 0!==t?t:j};r.getActivityParticipants=function(e){var t;return null!==(t=q(e).toArray(y.sI.ACTIVITY))&&void 0!==t?t:j};r.getParticipant=function(e,t){return q(e).getParticipant(t)};r.getUserParticipantCount=function(e){var t=q(e);return t.size()-t.size(y.sI.STREAM)-t.size(y.sI.ACTIVITY)};r.getParticipantsOpen=function(e){var t;return null===(t=V[e])||void 0===t||t};r.getVoiceParticipantsHidden=function(e){var t;return null!==(t=x[e])&&void 0!==t&&t};r.getSelectedParticipantId=function(e){var t=P(X(e),2),n=t[0],r=t[1];return n===A.dF.NONE?null:n!==A.dF.AUTO?n:r===A.dF.NONE||r===A.dF.AUTO?null:r};r.getSelectedParticipant=function(e){var t=this.getSelectedParticipantId(e);return null==t?null:q(e).getParticipant(t)};r.getSelectedParticipantStats=function(e){var t=H[e];return null==t?{}:{
view_mode_grid_duration_ms:Math.floor(t.gridDurationMs),view_mode_focus_duration_ms:Math.floor(t.focusDurationMs),view_mode_toggle_count:t.toggleCount}};r.getMode=function(e){var t;return null!==(t=k[e])&&void 0!==t?t:_e(e)?N.WtW.VIDEO:N.WtW.VOICE};r.getLayout=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.IlC.APP,i=(0,c.V1)(e);return __OVERLAY__?N.AEg.NORMAL:i?N.AEg.NO_CHAT:null!==(n=null===(t=B[e])||void 0===t?void 0:t[r])&&void 0!==n?n:_e(e)?N.AEg.NO_CHAT:N.AEg.NORMAL};r.getChatOpen=function(e){return W[e]};r.isFullscreenInContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.IlC.APP;return Object.values(B).some((function(t){return t[e]===N.AEg.FULL_SCREEN}))};r.getStageStreamSize=function(e){return K[e]};r.getStageVideoLimitBoostUpsellDismissed=function(e){return z[e]};r.__getLocalVars=function(){return{logger:Z,activeChannelIds:F,rtcParticipants:Y,selectedParticipantIds:G,selectedParticipantStats:H,modes:k,layouts:B,
participantsOpen:V,voiceParticipantsHidden:x,chatOpen:W,stageStreamSize:K,stageVideoLimitBoostUpsellDismissed:z}};return n}(u.ZP.Store);he.displayName="ChannelRTCStore";const Ee=new he(s.Z,{CONNECTION_OPEN:ae,CONNECTION_OPEN_SUPPLEMENTAL:ae,THREAD_LIST_SYNC:ae,OVERLAY_INITIALIZE:ae,VOICE_CHANNEL_SELECT:function(e){var t=e.channelId,n=e.currentVoiceChannelId;if(null!=t)delete H[t];else if(null!=n){delete W[n];delete K[n];ee(n)}return ae()},CHANNEL_SELECT:function(e){var t=e.channelId,n=e.messageId,r=ae(),i=g.Z.getChannel(t);if(null!=t&&null!=n&&((null==i?void 0:i.type)===N.d4z.GUILD_VOICE||(null==i?void 0:i.type)===N.d4z.GUILD_STAGE_VOICE)&&!W[t]){W[t]=!0;return!0}return r},CHANNEL_RTC_ACTIVE_CHANNELS:ae,VOICE_STATE_UPDATES:function(e){var t=e.voiceStates,n=e.initial;return t.reduce((function(e,t){var r=t.userId,i=t.channelId;return n&&null!=i&&!F.includes(i)?e:J(r)||e}),!1)},CHANNEL_CREATE:function(e){var t=e.channel;if(t.type===N.d4z.GROUP_DM){var n=t.originChannelId;if(null!=n){
var r,i;B[t.id]=M({},N.IlC.APP,null!==(i=null===(r=B[n])||void 0===r?void 0:r[N.IlC.APP])&&void 0!==i?i:N.AEg.NORMAL);return!0}}return!1},CHANNEL_DELETE:fe,THREAD_DELETE:fe,CALL_CREATE:ce,CALL_UPDATE:ce,CALL_DELETE:function(e){return oe(e.channelId)},CHANNEL_RTC_SELECT_PARTICIPANT:function(e){var t=e.channelId,n=e.id,r=q(t);null==n&&r.toArray(y.sI.STREAM).forEach((function(e){(0,A._5)(e)&&r.updateParticipant(e.user.id)}));var i=P(X(t),2)[1];te(t,[null!=n?n:A.dF.NONE,i]);if((0,_.DB)(n)){try{var o=(0,_.my)(n).ownerId;o===E.default.getId()&&J(o,[t])}catch(e){Z.warn("INVALID STREAM KEY FORMAT ".concat(n),e)}ne(r)||(V[t]=!1)}},CHANNEL_RTC_UPDATE_LAYOUT:function(e){var t=e.channelId,n=e.layout,r=e.appContext;B[t]=R(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))))
;r.forEach((function(t){M(e,t,n[t])}))}return e}({},B[t]),M({},r,n))},CHANNEL_RTC_UPDATE_PARTICIPANTS_OPEN:function(e){var t=e.channelId,n=e.participantsOpen;V[t]=n},CHANNEL_RTC_UPDATE_VOICE_PARTICIPANTS_HIDDEN:function(e){var t=e.channelId,n=e.voiceParticipantsHidden;x[t]=n},CHANNEL_RTC_UPDATE_STAGE_STREAM_SIZE:function(e){var t=e.channelId,n=e.large;K[t]=n},CHANNEL_RTC_UPDATE_STAGE_VIDEO_LIMIT_BOOST_UPSELL_DISMISSED:function(e){var t=e.channelId,n=e.dismissed;z[t]=n},STREAM_UPDATE_SELF_HIDDEN:function(e){var t=e.channelId,n=e.selfStreamHidden,r=E.default.getId();if(n){var i=P(X(t),1)[0];(0,_.DB)(i)&&i.includes(r)&&te(t,null)}J(r,[t])},CHANNEL_RTC_UPDATE_CHAT_OPEN:function(e){var t=e.channelId,n=e.chatOpen;W[t]=n},RTC_CONNECTION_VIDEO:function(e){var t=e.channelId;return J(e.userId,[t])},AUDIO_SET_LOCAL_VIDEO_DISABLED:function(e){return J(e.userId)},MEDIA_ENGINE_VIDEO_SOURCE_QUALITY_CHANGED:function(e){var t=e.channelId,n=e.senderUserId,r=e.maxResolution,i=e.maxFrameRate
;return Q((function(e){return e.updateParticipantQuality(n,r,i)}),[t])},STREAM_CLOSE:de,STREAM_DELETE:de,STREAM_WATCH:function(e){var t=e.streamKey,n=(0,_.my)(t),r=n.channelId;return J(n.ownerId,[r])},SPEAKING:se,GUILD_SOUNDBOARD_SOUND_PLAY_START:se,GUILD_SOUNDBOARD_SOUND_PLAY_END:se,USER_UPDATE:le,GUILD_MEMBER_UPDATE:le,GUILD_DELETE:function(e){var t=e.guild,n=[];a().forEach(F,(function(e){var r=g.Z.getChannel(e);null!=r&&r.getGuildId()!==t.id||n.push(e)}));if(0===n.length)return!1;a().forEach(n,(function(e){return oe(e)}))}})},327566:(e,t,n)=>{n.d(t,{rd:()=>s,HK:()=>l,Do:()=>c});var r=n(842227),i=n(202351),o=n(439683);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=u((0,i.e7)([o.Z],(function(){return o.Z.getHighlightedMessageIds(e)}),[e]));n.sort(r.default.compare);return n.filter((function(e){return r.default.compare(e,t)>0}))}function l(e,t){var n=u(o.Z.getHighlightedMessageIds(e));n.sort(r.default.compare);return n.filter((function(e){return r.default.compare(e,t)>0}))}function c(e,t){var n=o.Z.getHighlightedMessageIds(e),i=!0,a=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(r.default.compare(c,t)>0)return!0}}catch(e){a=!0;u=e}finally{try{i||null==l.return||l.return()
}finally{if(a)throw u}}return!1}},350532:(e,t,n)=>{n.d(t,{OL:()=>i,hB:()=>o});var r=(0,n(260561).B)({kind:"user",id:"2022-07_channel_highlights",label:"Channel Highlights",defaultConfig:{showChannelHighlights:!1},treatments:[{id:1,label:"Show Channel Highlights",config:{showChannelHighlights:!0}}]});function i(){return r.useExperiment({},{autoTrackExposure:!1}).showChannelHighlights}function o(){return r.getCurrentConfig({},{autoTrackExposure:!1}).showChannelHighlights}},439683:(e,t,n)=>{n.d(t,{Z:()=>A});var r=n(202351),i=n(744564),o=n(841800),a=n(5544),u=n(9430),s=n(473903),l=n(652591),c=n(2590);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function _(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var g=new Set,v={},I={},O={},m={},T={};var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}
});t&&h(e,t)}(n,e);var t=p(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(u.Z,a.ZP)};r.getHighlightedMessageIds=function(e){var t;return null!==(t=v[e])&&void 0!==t?t:g};r.getTempHighlightedMessageIds=function(e){var t;return null!==(t=m[e])&&void 0!==t?t:g};r.getHighlightedMessageIdCount=function(e){var t,n;return null!==(n=null===(t=v[e])||void 0===t?void 0:t.size)&&void 0!==n?n:0};r.getLastFetchedMillis=function(e){return O[e]};r.isLoading=function(e){return"loading"===I[e]};r.__getLocalVars=function(){return{MAX_HIGHLIGHTS_PER_CHANNEL:5,EMPTY_SET:g,highlights:v,fetchStatusByGuild:I,lastFetchedMillisByGuild:O,temporaryHighlights:m,loadIds:T}};return n}(r.ZP.Store);y.displayName="ChannelHighlightsStore";const A=new y(i.Z,{CHANNEL_HIGHLIGHTS_FETCH_START:function(e){var t=e.guildId;I[t]="loading"},CHANNEL_HIGHLIGHTS_FETCH_SUCCESS:function(e){var t=e.guildId,n=e.data;O[t]=Date.now();var r=s.default.getCurrentUser()
;if(null==n||null==r)return!1;T[t]=n.load_id;n.channels.forEach((function(e){v[e.channel_id]=new Set(e.highlighted_message_ids.slice(0,5))}));l.default.track(c.rMx.GUILD_CHANNEL_HIGHLIGHTS_LOADED,{guild_id:t,num_channels_highlighted:n.channels.length});delete I[t]},SIDEBAR_VIEW_CHANNEL:function(e){var t=e.guildId,n=e.details;(null==n?void 0:n.type)===o.F.HOME&&null!=t&&(m[t]=new Set(n.highlightMessageIds))}})},94340:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(959207),i=n(2590);function o(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){o(e,t,n[t])}))}return e}function u(e){
var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r.Z.getGame(e.applicationId),u=e.getPrice(),s=e.getPrice(null,!1),l={sku_id:e.id,sku_type:e.type,application_id:e.applicationId,application_name:null!=o?o.name:null,store_title:e.name,distribution_type:e.premium?"premium":"distribution"},c=null;n&&(c={price:null!=u?u.amount:null,regular_price:null!=s?s.amount:null,currency:null!=u?u.currency:null});var f=null;t&&(f={has_single_player:e.hasFeature(i.Qa3.SINGLE_PLAYER),has_online_multiplayer:e.hasFeature(i.Qa3.ONLINE_MULTIPLAYER),has_local_multiplayer:e.hasFeature(i.Qa3.LOCAL_MULTIPLAYER),has_pvp_features:e.hasFeature(i.Qa3.PVP),has_local_coop:e.hasFeature(i.Qa3.LOCAL_COOP),has_online_coop:e.hasFeature(i.Qa3.ONLINE_COOP),has_cross_platform:e.hasFeature(i.Qa3.CROSS_PLATFORM),has_rich_presence:e.hasFeature(i.Qa3.RICH_PRESENCE),has_game_invites:e.hasFeature(i.Qa3.DISCORD_GAME_INVITES),
has_spectator_mode:e.hasFeature(i.Qa3.SPECTATOR_MODE),has_controller_support:e.hasFeature(i.Qa3.CONTROLLER_SUPPORT),has_cloud_saves:e.hasFeature(i.Qa3.CLOUD_SAVES),has_secure_networking:e.hasFeature(i.Qa3.SECURE_NETWORKING)});return a({},l,c,f)}},306263:(e,t,n)=>{n.d(t,{DB:()=>a,my:()=>u,V9:()=>s});var r=n(443132);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return null!=e&&(e.startsWith(r.lo.GUILD)||e.startsWith(r.lo.CALL))}function u(e){var t=e.split(":"),n=t[0];switch(n){case r.lo.GUILD:var i=o(t,4);return{streamType:i[0],guildId:i[1],channelId:i[2],ownerId:i[3]};case r.lo.CALL:var a=o(t,3);return{streamType:a[0],channelId:a[1],ownerId:a[2]};default:throw new Error("Unknown stream type ".concat(n))}}function s(e){var t=e.streamType,n=e.guildId,i=e.channelId,o=e.ownerId;switch(t){case r.lo.GUILD:return[t,n,i,o].join(":");case r.lo.CALL:return[t,i,o].join(":");default:throw new Error("Unknown stream type ".concat(t))}}},924066:(e,t,n)=>{n.d(t,{JL:()=>E,P9:()=>p,p9:()=>g,wq:()=>v,h_:()=>I})
;var r,i=n(940060),o=n(202351),a=n(409125),u=n(5544),s=n(567403),l=n(682776),c=n(407561),f=n(176758),d=n(2590),_=n(473708),h=function(e,t){return e.isPrivate()||t.can(i.Z.combine(d.Plq.CONNECT,d.Plq.VIEW_CHANNEL),e)};function E(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isPrivate())return!0;var i,o=t.getGuild(e.getGuildId()),a=null!==(i=null==o?void 0:o.maxStageVideoChannelUsers)&&void 0!==i?i:0;return!(e.isGuildStageVoice()&&a<=0)&&(!(r&&!h(e,n))&&(!!n.can(d.Plq.STREAM,e)&&(null!=o&&o.afkChannelId!==e.id)))}function p(e){switch(e){case r.REMOTE_MODE:return _.Z.Messages.CONSOLE_STREAM_UNAVAILABLE;case r.CHANNEL_FULL:return _.Z.Messages.UNABLE_TO_JOIN_CHANNEL_FULL_MODAL_HEADER;case r.NO_PERMISSION:return _.Z.Messages.STREAM_NO_PERMISSION_CTA;default:return _.Z.Messages.WATCH_STREAM}}!function(e){e[e.REMOTE_MODE=0]="REMOTE_MODE";e[e.CHANNEL_FULL=1]="CHANNEL_FULL";e[e.NO_PERMISSION=2]="NO_PERMISSION"}(r||(r={}));function g(e,t,n,i,o){var a
;if(null==e)return[!1,r.NO_PERMISSION];var u=t.isInChannel(e.id),s=(0,f.rY)(e,t,n),l=h(e,i),c=null!=o.getAwaitingRemoteSessionInfo()||null!=o.getRemoteSessionId();c?a=r.REMOTE_MODE:l||u?s&&!u&&(a=r.CHANNEL_FULL):a=r.NO_PERMISSION;return[!__OVERLAY__&&!c&&(u||l&&!s),a]}function v(e){return(0,o.Wu)([c.Z,s.Z,l.Z,a.Z],(function(){return g(e,c.Z,s.Z,l.Z,a.Z)}))}function I(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s,l=e[u.Zb][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value.channel;E(c,t,n)&&r.push(c)}}catch(e){o=!0;a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}},39649:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(36256);function i(e){return e.supportsInApp(r.AN.VIDEO)}},998918:(e,t,n)=>{n.d(t,{RX:()=>i,kC:()=>o});var r=(0,n(260561).B)({kind:"user",id:"2022-08_guild_unreads",label:"Guild Unreads",defaultConfig:{allowUnreadHighlightsOption:!1},treatments:[{id:1,label:'Allow "Highlights" as an Unreads Option',config:{allowUnreadHighlightsOption:!0}}]})
;function i(){return r.useExperiment({},{autoTrackExposure:!1}).allowUnreadHighlightsOption}function o(){return r.getCurrentConfig({},{autoTrackExposure:!1}).allowUnreadHighlightsOption}},839266:(e,t,n)=>{n.d(t,{LS:()=>_,nH:()=>h,j$:()=>E});var r=n(441143),i=n.n(r),o=n(202351),a=n(487685),u=n(382060),s=n(61209),l=n(9430),c=n(998918),f=n(736401),d=n(2590);function _(e){var t=e.isExperimentEnabled,n=e.hasUserEnabledGuildUnreads,r=e.channelNotificationOverrides,i=e.categoryNotificationOverrides,o=e.unreadSetting,a=e.hasJoinedThread,u=null!=r&&r.message_notifications!==d.bL.NULL||null!=i&&i.message_notifications!==d.bL.NULL;return t&&n?a?f.N.ALL_MESSAGES:u?null==o||o===f.N.NULL?f.N.ALL_MESSAGES:o:null!=o?o:f.N.NULL:f.N.ALL_MESSAGES}function h(e){var t=null==e?void 0:e.guild_id,n=null==e?void 0:e.parent_id,r=(0,o.e7)([s.Z],(function(){return s.Z.getChannel(n)}),[n]),u=(null==e?void 0:e.isThread())?n:null==e?void 0:e.id;i()(null!=u,"parent_id cannot be null for threads")
;var d=(null==e?void 0:e.isThread())?null==r?void 0:r.parent_id:n,h=(0,c.RX)(),E=(0,o.cj)([l.Z],(function(){return{channelNotificationOverrides:l.Z.getChannelOverrides(t)[u],categoryNotificationOverrides:null!=d?l.Z.getChannelOverrides(t)[d]:null,unreadSetting:null!=t?l.Z.getChannelUnreadSetting(t,u):f.N.NULL,hasUserEnabledGuildUnreads:null!=t&&l.Z.isGuildUnreadSettingEnabled(t)}}),[t,u]),p=E.channelNotificationOverrides,g=E.categoryNotificationOverrides,v=E.unreadSetting;return _({isExperimentEnabled:h,hasUserEnabledGuildUnreads:E.hasUserEnabledGuildUnreads,channelNotificationOverrides:p,categoryNotificationOverrides:g,unreadSetting:v,hasJoinedThread:(0,o.e7)([a.Z],(function(){return null!=(null==e?void 0:e.id)&&a.Z.hasJoined(e.id)}))})}function E(e){var t=e.guild_id,n=s.Z.getBasicChannel(e.parent_id),r=(0,u.Q5)(e.type)?e.parent_id:e.id;i()(null!=r,"parent_id cannot be null for threads");var o=(0,u.Q5)(e.type)?null==n?void 0:n.parent_id:e.parent_id,f=(0,
c.kC)(),d=l.Z.isGuildUnreadSettingEnabled(t),h=l.Z.getChannelUnreadSetting(t,r);return _({isExperimentEnabled:f,hasUserEnabledGuildUnreads:d,channelNotificationOverrides:l.Z.getChannelOverrides(t)[r],categoryNotificationOverrides:null!=o?l.Z.getChannelOverrides(t)[o]:null,unreadSetting:h,hasJoinedThread:a.Z.hasJoined(e.id)})}},335186:(e,t,n)=>{n.d(t,{Zz:()=>u,K4:()=>s,q9:()=>c});var r=n(441143),i=n.n(r),o=n(268335),a=n(473708);function u(e){var t=o.Z.find((function(t){return t.alpha2===e}));if(null!=t)return{name:t.name,code:t.phoneCountryCode,alpha2:t.alpha2}}function s(){var e=function(e){var t=o.Z.find((function(t){return t.name===e}));if(null!=t)return{name:t.name,code:t.phoneCountryCode,alpha2:t.alpha2}}("United States");i()(e,"Default country code cannot be missing.");return e}var l={AF:function(){return a.Z.Messages.COUNTRY_NAME_AF},AX:function(){return a.Z.Messages.COUNTRY_NAME_AX},AL:function(){return a.Z.Messages.COUNTRY_NAME_AL},DZ:function(){
return a.Z.Messages.COUNTRY_NAME_DZ},AS:function(){return a.Z.Messages.COUNTRY_NAME_AS},AD:function(){return a.Z.Messages.COUNTRY_NAME_AD},AO:function(){return a.Z.Messages.COUNTRY_NAME_AO},AI:function(){return a.Z.Messages.COUNTRY_NAME_AI},AQ:function(){return a.Z.Messages.COUNTRY_NAME_AQ},AG:function(){return a.Z.Messages.COUNTRY_NAME_AG},AR:function(){return a.Z.Messages.COUNTRY_NAME_AR},AM:function(){return a.Z.Messages.COUNTRY_NAME_AM},AW:function(){return a.Z.Messages.COUNTRY_NAME_AW},AC:function(){return a.Z.Messages.COUNTRY_NAME_AC},AU:function(){return a.Z.Messages.COUNTRY_NAME_AU},AT:function(){return a.Z.Messages.COUNTRY_NAME_AT},AZ:function(){return a.Z.Messages.COUNTRY_NAME_AZ},BS:function(){return a.Z.Messages.COUNTRY_NAME_BS},BH:function(){return a.Z.Messages.COUNTRY_NAME_BH},BD:function(){return a.Z.Messages.COUNTRY_NAME_BD},BB:function(){return a.Z.Messages.COUNTRY_NAME_BB},BY:function(){return a.Z.Messages.COUNTRY_NAME_BY},BE:function(){
return a.Z.Messages.COUNTRY_NAME_BE},BZ:function(){return a.Z.Messages.COUNTRY_NAME_BZ},BJ:function(){return a.Z.Messages.COUNTRY_NAME_BJ},BM:function(){return a.Z.Messages.COUNTRY_NAME_BM},BT:function(){return a.Z.Messages.COUNTRY_NAME_BT},BO:function(){return a.Z.Messages.COUNTRY_NAME_BO},BQ:function(){return a.Z.Messages.COUNTRY_NAME_BQ},BA:function(){return a.Z.Messages.COUNTRY_NAME_BA},BW:function(){return a.Z.Messages.COUNTRY_NAME_BW},BV:function(){return a.Z.Messages.COUNTRY_NAME_BV},BR:function(){return a.Z.Messages.COUNTRY_NAME_BR},IO:function(){return a.Z.Messages.COUNTRY_NAME_IO},BN:function(){return a.Z.Messages.COUNTRY_NAME_BN},BG:function(){return a.Z.Messages.COUNTRY_NAME_BG},BF:function(){return a.Z.Messages.COUNTRY_NAME_BF},BI:function(){return a.Z.Messages.COUNTRY_NAME_BI},KH:function(){return a.Z.Messages.COUNTRY_NAME_KH},CM:function(){return a.Z.Messages.COUNTRY_NAME_CM},CA:function(){return a.Z.Messages.COUNTRY_NAME_CA},CV:function(){
return a.Z.Messages.COUNTRY_NAME_CV},KY:function(){return a.Z.Messages.COUNTRY_NAME_KY},CF:function(){return a.Z.Messages.COUNTRY_NAME_CF},TD:function(){return a.Z.Messages.COUNTRY_NAME_TD},CL:function(){return a.Z.Messages.COUNTRY_NAME_CL},CN:function(){return a.Z.Messages.COUNTRY_NAME_CN},CX:function(){return a.Z.Messages.COUNTRY_NAME_CX},CC:function(){return a.Z.Messages.COUNTRY_NAME_CC},CO:function(){return a.Z.Messages.COUNTRY_NAME_CO},KM:function(){return a.Z.Messages.COUNTRY_NAME_KM},CG:function(){return a.Z.Messages.COUNTRY_NAME_CG},CD:function(){return a.Z.Messages.COUNTRY_NAME_CD},CK:function(){return a.Z.Messages.COUNTRY_NAME_CK},CR:function(){return a.Z.Messages.COUNTRY_NAME_CR},CI:function(){return a.Z.Messages.COUNTRY_NAME_CI},HR:function(){return a.Z.Messages.COUNTRY_NAME_HR},CU:function(){return a.Z.Messages.COUNTRY_NAME_CU},CW:function(){return a.Z.Messages.COUNTRY_NAME_CW},CY:function(){return a.Z.Messages.COUNTRY_NAME_CY},CZ:function(){
return a.Z.Messages.COUNTRY_NAME_CZ},DK:function(){return a.Z.Messages.COUNTRY_NAME_DK},DG:function(){return a.Z.Messages.COUNTRY_NAME_DG},DJ:function(){return a.Z.Messages.COUNTRY_NAME_DJ},DM:function(){return a.Z.Messages.COUNTRY_NAME_DM},DO:function(){return a.Z.Messages.COUNTRY_NAME_DO},TP:function(){return a.Z.Messages.COUNTRY_NAME_TP},EC:function(){return a.Z.Messages.COUNTRY_NAME_EC},EG:function(){return a.Z.Messages.COUNTRY_NAME_EG},SV:function(){return a.Z.Messages.COUNTRY_NAME_SV},GQ:function(){return a.Z.Messages.COUNTRY_NAME_GQ},ER:function(){return a.Z.Messages.COUNTRY_NAME_ER},EE:function(){return a.Z.Messages.COUNTRY_NAME_EE},ET:function(){return a.Z.Messages.COUNTRY_NAME_ET},FK:function(){return a.Z.Messages.COUNTRY_NAME_FK},FO:function(){return a.Z.Messages.COUNTRY_NAME_FO},FJ:function(){return a.Z.Messages.COUNTRY_NAME_FJ},FI:function(){return a.Z.Messages.COUNTRY_NAME_FI},FR:function(){return a.Z.Messages.COUNTRY_NAME_FR},GF:function(){
return a.Z.Messages.COUNTRY_NAME_GF},PF:function(){return a.Z.Messages.COUNTRY_NAME_PF},TF:function(){return a.Z.Messages.COUNTRY_NAME_TF},GA:function(){return a.Z.Messages.COUNTRY_NAME_GA},GM:function(){return a.Z.Messages.COUNTRY_NAME_GM},GE:function(){return a.Z.Messages.COUNTRY_NAME_GE},DE:function(){return a.Z.Messages.COUNTRY_NAME_DE},GH:function(){return a.Z.Messages.COUNTRY_NAME_GH},GI:function(){return a.Z.Messages.COUNTRY_NAME_GI},GR:function(){return a.Z.Messages.COUNTRY_NAME_GR},GL:function(){return a.Z.Messages.COUNTRY_NAME_GL},GD:function(){return a.Z.Messages.COUNTRY_NAME_GD},GP:function(){return a.Z.Messages.COUNTRY_NAME_GP},GU:function(){return a.Z.Messages.COUNTRY_NAME_GU},GT:function(){return a.Z.Messages.COUNTRY_NAME_GT},GG:function(){return a.Z.Messages.COUNTRY_NAME_GG},GN:function(){return a.Z.Messages.COUNTRY_NAME_GN},GW:function(){return a.Z.Messages.COUNTRY_NAME_GW},GY:function(){return a.Z.Messages.COUNTRY_NAME_GY},HT:function(){
return a.Z.Messages.COUNTRY_NAME_HT},HM:function(){return a.Z.Messages.COUNTRY_NAME_HM},VA:function(){return a.Z.Messages.COUNTRY_NAME_VA},HN:function(){return a.Z.Messages.COUNTRY_NAME_HN},HK:function(){return a.Z.Messages.COUNTRY_NAME_HK},HU:function(){return a.Z.Messages.COUNTRY_NAME_HU},IS:function(){return a.Z.Messages.COUNTRY_NAME_IS},IN:function(){return a.Z.Messages.COUNTRY_NAME_IN},ID:function(){return a.Z.Messages.COUNTRY_NAME_ID},IR:function(){return a.Z.Messages.COUNTRY_NAME_IR},IQ:function(){return a.Z.Messages.COUNTRY_NAME_IQ},IE:function(){return a.Z.Messages.COUNTRY_NAME_IE},IM:function(){return a.Z.Messages.COUNTRY_NAME_IM},IL:function(){return a.Z.Messages.COUNTRY_NAME_IL},IT:function(){return a.Z.Messages.COUNTRY_NAME_IT},JM:function(){return a.Z.Messages.COUNTRY_NAME_JM},JP:function(){return a.Z.Messages.COUNTRY_NAME_JP},JE:function(){return a.Z.Messages.COUNTRY_NAME_JE},JO:function(){return a.Z.Messages.COUNTRY_NAME_JO},KZ:function(){
return a.Z.Messages.COUNTRY_NAME_KZ},KE:function(){return a.Z.Messages.COUNTRY_NAME_KE},KI:function(){return a.Z.Messages.COUNTRY_NAME_KI},XK:function(){return a.Z.Messages.COUNTRY_NAME_XK},KP:function(){return a.Z.Messages.COUNTRY_NAME_KP},KR:function(){return a.Z.Messages.COUNTRY_NAME_KR},KW:function(){return a.Z.Messages.COUNTRY_NAME_KW},KG:function(){return a.Z.Messages.COUNTRY_NAME_KG},LA:function(){return a.Z.Messages.COUNTRY_NAME_LA},LV:function(){return a.Z.Messages.COUNTRY_NAME_LV},LB:function(){return a.Z.Messages.COUNTRY_NAME_LB},LS:function(){return a.Z.Messages.COUNTRY_NAME_LS},LR:function(){return a.Z.Messages.COUNTRY_NAME_LR},LY:function(){return a.Z.Messages.COUNTRY_NAME_LY},LI:function(){return a.Z.Messages.COUNTRY_NAME_LI},LT:function(){return a.Z.Messages.COUNTRY_NAME_LT},LU:function(){return a.Z.Messages.COUNTRY_NAME_LU},MO:function(){return a.Z.Messages.COUNTRY_NAME_MO},MK:function(){return a.Z.Messages.COUNTRY_NAME_MK},MG:function(){
return a.Z.Messages.COUNTRY_NAME_MG},MW:function(){return a.Z.Messages.COUNTRY_NAME_MW},MY:function(){return a.Z.Messages.COUNTRY_NAME_MY},MV:function(){return a.Z.Messages.COUNTRY_NAME_MV},ML:function(){return a.Z.Messages.COUNTRY_NAME_ML},MT:function(){return a.Z.Messages.COUNTRY_NAME_MT},MH:function(){return a.Z.Messages.COUNTRY_NAME_MH},MQ:function(){return a.Z.Messages.COUNTRY_NAME_MQ},MR:function(){return a.Z.Messages.COUNTRY_NAME_MR},MU:function(){return a.Z.Messages.COUNTRY_NAME_MU},YT:function(){return a.Z.Messages.COUNTRY_NAME_YT},MX:function(){return a.Z.Messages.COUNTRY_NAME_MX},FM:function(){return a.Z.Messages.COUNTRY_NAME_FM},MI:function(){return a.Z.Messages.COUNTRY_NAME_MI},MD:function(){return a.Z.Messages.COUNTRY_NAME_MD},MC:function(){return a.Z.Messages.COUNTRY_NAME_MC},MN:function(){return a.Z.Messages.COUNTRY_NAME_MN},ME:function(){return a.Z.Messages.COUNTRY_NAME_ME},MS:function(){return a.Z.Messages.COUNTRY_NAME_MS},MA:function(){
return a.Z.Messages.COUNTRY_NAME_MA},MZ:function(){return a.Z.Messages.COUNTRY_NAME_MZ},MM:function(){return a.Z.Messages.COUNTRY_NAME_MM},NA:function(){return a.Z.Messages.COUNTRY_NAME_NA},NR:function(){return a.Z.Messages.COUNTRY_NAME_NR},NP:function(){return a.Z.Messages.COUNTRY_NAME_NP},NL:function(){return a.Z.Messages.COUNTRY_NAME_NL},AN:function(){return a.Z.Messages.COUNTRY_NAME_AN},NC:function(){return a.Z.Messages.COUNTRY_NAME_NC},NZ:function(){return a.Z.Messages.COUNTRY_NAME_NZ},NI:function(){return a.Z.Messages.COUNTRY_NAME_NI},NE:function(){return a.Z.Messages.COUNTRY_NAME_NE},NG:function(){return a.Z.Messages.COUNTRY_NAME_NG},NU:function(){return a.Z.Messages.COUNTRY_NAME_NU},NF:function(){return a.Z.Messages.COUNTRY_NAME_NF},MP:function(){return a.Z.Messages.COUNTRY_NAME_MP},NO:function(){return a.Z.Messages.COUNTRY_NAME_NO},OM:function(){return a.Z.Messages.COUNTRY_NAME_OM},PK:function(){return a.Z.Messages.COUNTRY_NAME_PK},PW:function(){
return a.Z.Messages.COUNTRY_NAME_PW},PS:function(){return a.Z.Messages.COUNTRY_NAME_PS},PA:function(){return a.Z.Messages.COUNTRY_NAME_PA},PG:function(){return a.Z.Messages.COUNTRY_NAME_PG},PY:function(){return a.Z.Messages.COUNTRY_NAME_PY},PE:function(){return a.Z.Messages.COUNTRY_NAME_PE},PH:function(){return a.Z.Messages.COUNTRY_NAME_PH},PN:function(){return a.Z.Messages.COUNTRY_NAME_PN},PL:function(){return a.Z.Messages.COUNTRY_NAME_PL},PT:function(){return a.Z.Messages.COUNTRY_NAME_PT},PR:function(){return a.Z.Messages.COUNTRY_NAME_PR},QA:function(){return a.Z.Messages.COUNTRY_NAME_QA},RE:function(){return a.Z.Messages.COUNTRY_NAME_RE},RO:function(){return a.Z.Messages.COUNTRY_NAME_RO},RU:function(){return a.Z.Messages.COUNTRY_NAME_RU},RW:function(){return a.Z.Messages.COUNTRY_NAME_RW},BL:function(){return a.Z.Messages.COUNTRY_NAME_BL},SH:function(){return a.Z.Messages.COUNTRY_NAME_SH},KN:function(){return a.Z.Messages.COUNTRY_NAME_KN},LC:function(){
return a.Z.Messages.COUNTRY_NAME_LC},MF:function(){return a.Z.Messages.COUNTRY_NAME_MF},PM:function(){return a.Z.Messages.COUNTRY_NAME_PM},VC:function(){return a.Z.Messages.COUNTRY_NAME_VC},WS:function(){return a.Z.Messages.COUNTRY_NAME_WS},SM:function(){return a.Z.Messages.COUNTRY_NAME_SM},ST:function(){return a.Z.Messages.COUNTRY_NAME_ST},SA:function(){return a.Z.Messages.COUNTRY_NAME_SA},SN:function(){return a.Z.Messages.COUNTRY_NAME_SN},RS:function(){return a.Z.Messages.COUNTRY_NAME_RS},SC:function(){return a.Z.Messages.COUNTRY_NAME_SC},SL:function(){return a.Z.Messages.COUNTRY_NAME_SL},SG:function(){return a.Z.Messages.COUNTRY_NAME_SG},SX:function(){return a.Z.Messages.COUNTRY_NAME_SX},SK:function(){return a.Z.Messages.COUNTRY_NAME_SK},SI:function(){return a.Z.Messages.COUNTRY_NAME_SI},SB:function(){return a.Z.Messages.COUNTRY_NAME_SB},SO:function(){return a.Z.Messages.COUNTRY_NAME_SO},ZA:function(){return a.Z.Messages.COUNTRY_NAME_ZA},GS:function(){
return a.Z.Messages.COUNTRY_NAME_GS},SS:function(){return a.Z.Messages.COUNTRY_NAME_SS},ES:function(){return a.Z.Messages.COUNTRY_NAME_ES},LK:function(){return a.Z.Messages.COUNTRY_NAME_LK},SD:function(){return a.Z.Messages.COUNTRY_NAME_SD},SR:function(){return a.Z.Messages.COUNTRY_NAME_SR},SJ:function(){return a.Z.Messages.COUNTRY_NAME_SJ},SZ:function(){return a.Z.Messages.COUNTRY_NAME_SZ},SE:function(){return a.Z.Messages.COUNTRY_NAME_SE},CH:function(){return a.Z.Messages.COUNTRY_NAME_CH},SY:function(){return a.Z.Messages.COUNTRY_NAME_SY},TW:function(){return a.Z.Messages.COUNTRY_NAME_TW},TJ:function(){return a.Z.Messages.COUNTRY_NAME_TJ},TZ:function(){return a.Z.Messages.COUNTRY_NAME_TZ},TH:function(){return a.Z.Messages.COUNTRY_NAME_TH},TL:function(){return a.Z.Messages.COUNTRY_NAME_TL},TG:function(){return a.Z.Messages.COUNTRY_NAME_TG},TK:function(){return a.Z.Messages.COUNTRY_NAME_TK},TO:function(){return a.Z.Messages.COUNTRY_NAME_TO},TT:function(){
return a.Z.Messages.COUNTRY_NAME_TT},TN:function(){return a.Z.Messages.COUNTRY_NAME_TN},TR:function(){return a.Z.Messages.COUNTRY_NAME_TR},TM:function(){return a.Z.Messages.COUNTRY_NAME_TM},TC:function(){return a.Z.Messages.COUNTRY_NAME_TC},TV:function(){return a.Z.Messages.COUNTRY_NAME_TV},UG:function(){return a.Z.Messages.COUNTRY_NAME_UG},UA:function(){return a.Z.Messages.COUNTRY_NAME_UA},AE:function(){return a.Z.Messages.COUNTRY_NAME_AE},GB:function(){return a.Z.Messages.COUNTRY_NAME_GB},US:function(){return a.Z.Messages.COUNTRY_NAME_US},UM:function(){return a.Z.Messages.COUNTRY_NAME_UM},UY:function(){return a.Z.Messages.COUNTRY_NAME_UY},UZ:function(){return a.Z.Messages.COUNTRY_NAME_UZ},VU:function(){return a.Z.Messages.COUNTRY_NAME_VU},VE:function(){return a.Z.Messages.COUNTRY_NAME_VE},VN:function(){return a.Z.Messages.COUNTRY_NAME_VN},VG:function(){return a.Z.Messages.COUNTRY_NAME_VG},VI:function(){return a.Z.Messages.COUNTRY_NAME_VI},WF:function(){
return a.Z.Messages.COUNTRY_NAME_WF},EH:function(){return a.Z.Messages.COUNTRY_NAME_EH},YE:function(){return a.Z.Messages.COUNTRY_NAME_YE},ZM:function(){return a.Z.Messages.COUNTRY_NAME_ZM},ZW:function(){return a.Z.Messages.COUNTRY_NAME_ZW}};function c(e){return l[e]()}},996344:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(335186),i=n(61209),o=n(637493);function a(e){a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return a(e)}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1
;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var f=new Set,d=new Set,_=!1,h=null;function E(e){return e.isMessageRequest&&!e.isSpam}function p(e){var t=!1;if(E(e)&&!f.has(e.id)){f.add(e.id);t=!0}if(!E(e)&&f.has(e.id)){f.delete(e.id);t=!0}if(!E(e)&&d.has(e.id)){d.delete(e.id);t=!0}return t}function g(e){if(null!=e){var t;h=null!==(t=(0,r.Zz)(e))&&void 0!==t?t:(0,r.K4)()}}function v(e){"CONNECTION_OPEN"===e.type&&g(e.countryCode);f.clear();d.clear();Object.values(i.Z.getMutablePrivateChannels()).forEach((function(e){p(e)}));_=!0}function I(e){var t=e.channelId;d.add(t)}function O(e){return p(e.channel)}function m(e){var t=e.channels,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){p(o.value)}}catch(e){
r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function T(e){var t=e.channel;if(f.has(t.id)){f.delete(t.id);return!0}return!1}function y(e){e.messageRequestChannelIds.forEach((function(e){return f.add(e)}))}function A(e){g(e.countryCode)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&s(e,t)}(n,e);var t=c(n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e;(e=t.call(this)).loadCache=function(){var t=e.readSnapshot(n.LATEST_SNAPSHOT_VERSION);null!=t&&(f=new Set(t))};e.registerActionHandlers({CONNECTION_OPEN:v,CONNECTION_OPEN_SUPPLEMENTAL:v,CACHE_LOADED_LAZY:e.loadCache,OVERLAY_INITIALIZE:y,CHANNEL_CREATE:O,CHANNEL_UPDATES:m,CHANNEL_DELETE:T,SET_LOCATION_METADATA:A,MESSAGE_REQUEST_ACCEPT_OPTIMISTIC:I})
;e.waitFor(i.Z);return e}var r=n.prototype;r.takeSnapshot=function(){return{version:n.LATEST_SNAPSHOT_VERSION,data:Array.from(f)}};r.getMessageRequestChannelIds=function(){return f};r.getMessageRequestsCount=function(){return f.size};r.isMessageRequest=function(e){return f.has(e)};r.isAcceptedOptimistic=function(e){return d.has(e)};r.getUserCountryCode=function(){return h};r.isReady=function(){return _};r.__getLocalVars=function(){return{channelIds:f,acceptedOptimistic:d,isReady:_,userCountryCode:h}};return n}(o.Z);N.displayName="MessageRequestStore";N.LATEST_SNAPSHOT_VERSION=1;const S=new N},442658:(e,t,n)=>{n.d(t,{k1:()=>u,tU:()=>c,h3:()=>f,IO:()=>d});var r=n(996344),i=n(48315);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var t=a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1],u=s(e),c=u.filter((function(e){var t=a(e,2)[1];return!n.isMessageRequest(t.id)&&!o.isSpam(t.id)}));return l(c)}function s(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function l(e){
return Array.from(e).reduce((function(e,t){var n=a(t,2),r=n[0],i=n[1];return Object.assign(e,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r,i))}),{})}function c(e){var t=a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1];return e.filter((function(e){return!n.isMessageRequest(e)&&!o.isSpam(e)}))}function f(e){var t=a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z,i.Z],2),n=t[0],o=t[1];return n.isMessageRequest(e)||o.isSpam(e)}function d(){var e=a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[r.Z,i.Z],2),t=e[0],n=e[1],o=n.getSpamChannelsCount(),u=t.getMessageRequestsCount(),s=u>0||o>0;return s}},48315:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(61209),i=n(637493);function o(e){o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return o(e)}function a(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t){u=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return u(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var c=new Set,f=new Set,d=!1;function _(e){return e.isSpam}function h(e){var t=!1;if(_(e)&&!c.has(e.id)){c.add(e.id);t=!0}if(!_(e)&&c.has(e.id)){c.delete(e.id);t=!0}if(!_(e)&&f.has(e.id)){f.delete(e.id);t=!0}return t}function E(){c.clear();f.clear()
;Object.values(r.Z.getMutablePrivateChannels()).forEach((function(e){h(e)}));d=!0}function p(e){var t=e.channelId;f.add(t)}function g(e){return h(e.channel)}function v(e){var t=e.channels,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){h(o.value)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}function I(e){var t=e.channel,n=!1;if(c.has(t.id)){c.delete(t.id);n=!0}return n}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&u(e,t)}(n,e);var t=l(n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e;(e=t.call(this)).loadCache=function(){var t=e.readSnapshot(n.LATEST_SNAPSHOT_VERSION);null!=t&&(c=new Set(t))};e.registerActionHandlers({CONNECTION_OPEN:E,
CONNECTION_OPEN_SUPPLEMENTAL:E,CACHE_LOADED_LAZY:e.loadCache,CHANNEL_CREATE:g,CHANNEL_UPDATES:v,CHANNEL_DELETE:I,MESSAGE_REQUEST_ACCEPT_OPTIMISTIC:p});e.waitFor(r.Z);return e}var i=n.prototype;i.takeSnapshot=function(){return{version:n.LATEST_SNAPSHOT_VERSION,data:Array.from(c)}};i.getSpamChannelIds=function(){return c};i.getSpamChannelsCount=function(){return c.size};i.isSpam=function(e){return c.has(e)};i.isAcceptedOptimistic=function(e){return f.has(e)};i.isReady=function(){return d};i.__getLocalVars=function(){return{channelIds:c,acceptedOptimistic:f,isReady:d}};return n}(i.Z);O.displayName="SpamMessageRequestStore";O.LATEST_SNAPSHOT_VERSION=1;const m=new O},409479:(e,t,n)=>{n.d(t,{Dn:()=>i,ZP:()=>a});var r=n(806023);function i(){return r.Z.getCurrentConfig({},{autoTrackExposure:!1}).enabled&&o.getCurrentConfig({},{autoTrackExposure:!1}).enabled}var o=(0,n(260561).B)({kind:"user",id:"2023-02_inline_sending_preview_mobile",label:"Inline Sending Preview Mobile",defaultConfig:{
enabled:!1},treatments:[{id:1,label:"Inline sending preview is enabled on mobile (both iOS and Android)",config:{enabled:!0}}]});const a=o},649536:(e,t,n)=>{n.d(t,{lp:()=>F,e5:()=>U,wi:()=>P,gx:()=>D});var r=n(730381),i=n.n(r),o=n(516217),a=n(254857),u=n(513586),s=n(169376),l=n(722406);function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}
function _(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{
value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=p(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r,i;(r=t.call(this)).id=e.id;r.name=e.name;r.type=e.type;r.user=e.user;r.displayName=null!==(i=e.name_localized)&&void 0!==i?i:e.name;return r}n.createFromServer=function(e){return new n(d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}({},e),{user:new l.Z(e.user)}))};return n}(s.Z),v=n(4798),I=n(736818),O=n(61209),m=n(840922),T=n(473903),y=n(473291),A=(n(918041),n(644144)),N=(n(120415),n(749565),n(435949)),S=(n(550131),n(493254)),C=n(2590);n(473708);function M(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n;return e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){M(e,t,n[t])}))}return e}function R(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function U(e){
var t,n,r,o,u,s,c,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=d.reactions,h=d.interactionData,E=null!==(o=null===(t=e.mentions)||void 0===t?void 0:t.map((function(e){return e.id})))&&void 0!==o?o:[],p=null!==(u=e.mention_roles)&&void 0!==u?u:[],O=null!==(s=e.mention_channels)&&void 0!==s?s:[],y=e.message_reference,S=i()(new Date(e.timestamp)),M=e.type===C.uaV.THREAD_CREATED?[]:(0,a.ZP)(e.content),U=null!==(c=null!=e.webhook_id?new l.Z(e.author):T.default.getUser(e.author.id))&&void 0!==c?c:new l.Z(e.author),D=null,P=null!=e.interaction?g.createFromServer(e.interaction):null,F=e.type===C.uaV.THREAD_STARTER_MESSAGE?null===(n=e.referenced_message)||void 0===n||null===(r=n.author)||void 0===r?void 0:r.id:void 0,Y=e.type===C.uaV.PREMIUM_REFERRAL?e.content:void 0,G=e.content;if(e.type===C.uaV.PREMIUM_REFERRAL){G="";0}return new v.Z(R(b({},e,D),{author:U,webhookId:e.webhook_id,blocked:m.Z.isBlocked(e.author.id)||null!=F&&m.Z.isBlocked(F),timestamp:S,
editedTimestamp:null!=e.edited_timestamp?i()(new Date(e.edited_timestamp)):null,mentionEveryone:e.mention_everyone,mentions:E,mentionRoles:p,mentionChannels:O,messageReference:y,mentioned:(0,N.Sz)({userId:I.default.getId(),channelId:e.channel_id,mentionEveryone:null!==(f=e.mention_everyone)&&void 0!==f&&f,mentionUsers:E,mentionRoles:p}),attachments:L(e),embeds:Z(e),codedLinks:M,giftCodes:(0,A.Q_)(e.content),content:G,referralTrialOfferId:Y,call:w(e.call,S),reactions:j(e.channel_id,null!=_?_:e.reactions),interaction:P,interactionData:null!=h?h:e.interaction_data,roleSubscriptionData:e.role_subscription_data}))}function D(e,t){return null!=t.edited_timestamp?R(b({},t),{reactions:e.reactions,interaction_data:e.interaction_data}):b({},e,t)}function P(e,t){if(null!=t.edited_timestamp)return U(t,{reactions:e.reactions,interactionData:e.interactionData});var n=e;null!=t.call&&(n=n.set("call",w(t.call,e.timestamp)));null!=t.attachments&&(n=n.set("attachments",L(t)))
;null!=t.content&&""!==t.content&&(n=n.set("content",t.content));null!=t.embeds&&(n=n.set("embeds",Z(t)));t.pinned!==n.pinned&&(n=n.set("pinned",t.pinned));null!=n.webhookId&&null!=t.author&&(n=n.set("author",new l.Z(t.author)));null!=t.flags&&t.flags!==n.flags&&(n=n.set("flags",t.flags));null!=t.components&&(n=n.set("components",t.components));null!=t.role_subscription_data&&(n=n.set("roleSubscriptionData",t.role_subscription_data));if(null!=t.reactions){var r;n=n.set("reactions",j(e.channel_id,null!==(r=e.reactions)&&void 0!==r?r:t.reactions))}return n}function L(e){return null==e.attachments?[]:e.attachments.map((function(e){return R(b({},e),{spoiler:e.filename.startsWith(S._j),sensitive:e.filename.startsWith(S.KW)})}))}function w(e,t){if(null!=e){var n=null!=e.ended_timestamp?i()(new Date(e.ended_timestamp)):null,r=null!=n?i().duration(n.diff(t)):null;return{participants:e.participants,endedTimestamp:n,duration:r}}return null}function Z(e){if(null==e.embeds)return[]
;var t=e.embeds.map((function(t){return(0,y.kC)(e.channel_id,e.id,t)}));return(0,y.o3)(t)}function j(e,t){if(null==t)return[];var n,r=O.Z.getChannel(e),i=o.ZP.getCurrentConfig({guildId:null!==(n=null==r?void 0:r.getGuildId())&&void 0!==n?n:""}).enabled,a=o.yh.getCurrentConfig({},{autoTrackExposure:!1}).enabled,u=i||a;return t.filter((function(e){var t=b({},e);if(null!=(null==t?void 0:t.count_details)){var n,r;t.burst_count=null!==(n=t.count_details.burst)&&void 0!==n?n:0;t.count=null!==(r=t.count_details.normal)&&void 0!==r?r:0}return!(t.burst_count>0&&t.count<1&&!u)})).map((function(e){var t=b({},e);if(null!=(null==t?void 0:t.count_details)){var n,r;t.burst_count=null!==(n=t.count_details.burst)&&void 0!==n?n:0;t.count=null!==(r=t.count_details.normal)&&void 0!==r?r:0}t.count<0&&(t.count=0);(t.burst_count<0||!i&&!a)&&(t.burst_count=0);0;return t}))}var F=function(e){return 0===(0,u.cv)(e).length||""!==e.content}},635012:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(649536),i=n(791707),o=n(2590)
;function a(e,t){return null!=t&&(e.author.id===t&&(e.state===o.yb.SENT&&(!(0,i.Z)(e)&&(!!(0,r.lp)(e)&&(!e.hasFlag(o.iLy.IS_VOICE_MESSAGE)&&null==e.referralTrialOfferId)))))}},435949:(e,t,n)=>{n.d(t,{ZP:()=>a,Hl:()=>u,Sz:()=>s});var r=n(61209),i=n(21372),o=n(567403);function a(e){var t=e.message,n=e.userId,r=e.suppressEveryone,i=void 0!==r&&r,o=e.suppressRoles,a=void 0!==o&&o;return s({userId:n,channelId:t.channel_id,mentionEveryone:t.mentionEveryone,mentionUsers:t.mentions,mentionRoles:t.mentionRoles,suppressEveryone:i,suppressRoles:a})}function u(e){var t,n,r,i,o=e.rawMessage,a=e.userId,u=e.suppressEveryone,l=void 0!==u&&u,c=e.suppressRoles,f=void 0!==c&&c;return s({userId:a,channelId:o.channel_id,mentionEveryone:null!==(n=o.mention_everyone)&&void 0!==n&&n,mentionUsers:null!==(r=null===(t=o.mentions)||void 0===t?void 0:t.map((function(e){return e.id})))&&void 0!==r?r:[],mentionRoles:null!==(i=o.mention_roles)&&void 0!==i?i:[],suppressEveryone:l,suppressRoles:f})}function s(e){
var t=e.userId,n=e.channelId,a=e.mentionEveryone,u=e.mentionUsers,s=e.mentionRoles,l=e.suppressEveryone,c=void 0!==l&&l,f=e.suppressRoles,d=void 0!==f&&f;if(a&&!c)return!0;if(u.includes(t))return!0;if(d||null==s||0===s.length)return!1;var _=r.Z.getChannel(n);if(null==_)return!1;var h=_.getGuildId();if(null==h)return!1;if(null==o.Z.getGuild(h))return!1;var E=i.ZP.getMember(h,t);return null!=E&&s.some((function(e){return E.roles.includes(e)}))}},791707:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2590),i=new Set([r.uaV.DEFAULT,r.uaV.REPLY]);function o(e){return!i.has(e.type)&&e.type!==r.uaV.CHAT_INPUT_COMMAND&&e.type!==r.uaV.CONTEXT_MENU_COMMAND&&e.type!==r.uaV.INTERACTION_PREMIUM_UPSELL&&e.type!==r.uaV.PREMIUM_REFERRAL}},550131:(e,t,n)=>{n.d(t,{ZP:()=>d,Uj:()=>_,ZH:()=>h,Sw:()=>E,ij:()=>p});var r=n(441143),i=n.n(r),o=n(202351),a=n(61209),u=n(21372),s=n(567403),l=n(840922),c=n(473903),f=n(749565);function d(e){var t=_(e);i()(null!=t,"Result cannot be null because the message is not null");return t
}function _(e){var t,n=(0,o.e7)([a.Z],(function(){return null==e?null:a.Z.getChannel(e.channel_id)})),r=null==e||null===(t=e.author)||void 0===t?void 0:t.id,i=null==n?void 0:n.guild_id,d=(0,o.e7)([u.ZP],(function(){return null==i||null==r?null:u.ZP.getMember(i,r)})),_=(0,o.e7)([c.default],(function(){return c.default.getUser(r)}),[r]),h=f.ZP.useName((null==e?void 0:e.author.bot)?null==e?void 0:e.author:_),E=(0,o.e7)([s.Z],(function(){return s.Z.getGuild(i)})),p=(0,o.e7)([l.Z],(function(){return null!=r&&(null==n?void 0:n.isPrivate())?l.Z.getNickname(r):null}));return null==e?null:g({user:e.author,channel:n,guild:E,userName:h,member:d,friendNickname:p})}function h(e){var t=a.Z.getChannel(e.channel_id);return p(e.author,t)}function E(e,t){var n=null==e?void 0:e.id,r=null==t?void 0:t.guild_id,i=(0,o.e7)([u.ZP],(function(){return null==r||null==n?null:u.ZP.getMember(r,n)})),a=(0,o.e7)([s.Z],(function(){return s.Z.getGuild(r)})),c=(0,o.e7)([l.Z],(function(){
return null!=n&&(null==t?void 0:t.isPrivate())?l.Z.getNickname(n):null})),d=f.ZP.useName(e);return g({user:e,channel:t,guild:a,member:i,userName:d,friendNickname:c})}function p(e,t){var n=null==e?void 0:e.id,r=null==t?void 0:t.guild_id,i=s.Z.getGuild(r),o=null==r||null==n?null:u.ZP.getMember(r,n),a=null!=n&&null!=t&&t.isPrivate()?l.Z.getNickname(n):null;return g({user:e,channel:t,guild:i,member:o,friendNickname:a})}function g(e){var t,n,r,i=e.user,o=e.channel,a=e.guild,u=e.member,s=e.userName,l=e.friendNickname,c=null==i?"???":null!=s?s:f.ZP.getName(i);return null==(null==i?void 0:i.id)||null==o?{nick:c,colorString:void 0}:null==(null==a?void 0:a.id)?{nick:null!=l?l:c,colorString:void 0}:null==u?{nick:c,colorString:void 0}:{nick:null!==(n=u.nick)&&void 0!==n?n:c,colorString:null!==(r=u.colorString)&&void 0!==r?r:void 0,colorRoleName:null!=u.colorRoleId?null===(t=null==a?void 0:a.roles[u.colorRoleId])||void 0===t?void 0:t.name:void 0,iconRoleId:u.iconRoleId,guildMemberAvatar:u.avatar}}
},725105:(e,t,n)=>{n.d(t,{sv:()=>o,Fl:()=>a});var r=n(667294),i=(0,n(260561).B)({kind:"user",id:"2022-11_desktop_notification_center",label:"Desktop notification center",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Notification center desktop enabled",config:{enabled:!0}}]}),o=function(){var e=i.useExperiment({},{autoTrackExposure:!1}).enabled;r.useEffect((function(){i.trackExposure({})}),[]);return e},a=function(){return i.getCurrentConfig({},{autoTrackExposure:!1}).enabled}},858311:(e,t,n)=>{n.d(t,{Z:()=>V});var r=n(202351),i=n(744564),o=n(202958),a=n(840922),u=n(473903),s=n(102921),l=n(749565),c=n(369710),f=n(106673),d=n(2590),_=n(473708);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0)
;Object.defineProperty(e,r.key,r)}}function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}function O(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function m(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e,t){T=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return T(e,t)}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}var S,C,M,b,R,U,D=7776e6,P=[],L=new Set,w=[],Z=!0;function j(e){return null!=e.id&&null!=e.body&&null!=e.type}function F(){S=!1;C=!1;P=[];w=[];L=new Set;Z=!0;b=void 0;M=!1;R=!1;U=!1}function Y(e){var t,n;if((0,
o.bY)()&&e.type===c.DY.FRIEND_SUGGESTION_CREATED&&a.Z.getRelationshipType(null!==(n=null===(t=e.other_user)||void 0===t?void 0:t.id)&&void 0!==n?n:"")===d.OGo.PENDING_OUTGOING){var r=l.ZP.getName(e.other_user);e=O(I({},e),{body:_.Z.Messages.NOTIF_CENTER_V2_ADD_FRIEND_REQUEST_SENT.format({user:r})})}return O(I({},e),{kind:"notification-center-item"})}function G(e){var t="NOTIFICATION_CENTER_ITEM_CREATE"===e.type?Y(e.item):e.item;if(!C||!j(t)||L.has(t.id))return!1;L.add(t.id);(P=[t].concat(y(P))).sort((function(e,t){return s.Z.compare(t.id,e.id)}))}function H(e,t){P=P.map((function(n){return e.includes(n.id)?O(I({},n),{acked:t}):n})).filter(j)}function k(e,t,n){var r;return e.type===t&&(null===(r=e.other_user)||void 0===r?void 0:r.id)===n}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&T(e,t)}(n,e)
;var t=N(n);function n(){E(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(u.default)};r.__getLocalVars=function(){return{NINETY_DAYS_MS:D,loading:S,initialized:C,errored:M,notifCenterItems:P,notifCenterIds:L,notifCenterLocalItems:w,paginationHasMore:Z,paginationCursor:b,notifCenterActive:R,notifCenterTabFocused:U}};!function(e,t,n){t&&p(e.prototype,t);n&&p(e,n)}(n,[{key:"loading",get:function(){return S}},{key:"initialized",get:function(){return C}},{key:"items",get:function(){return P}},{key:"hasMore",get:function(){return Z}},{key:"cursor",get:function(){return b}},{key:"errored",get:function(){return M}},{key:"active",get:function(){return R}},{key:"localItems",get:function(){return w}},{key:"tabFocused",get:function(){return U}}]);return n}(r.ZP.Store);B.displayName="NotificationCenterItemsStore";const V=new B(i.Z,{CONNECTION_OPEN:function(e){F();e.relationships.forEach((function(e){var t=e.type,n=e.user,r=e.since
;if(t!==d.OGo.PENDING_INCOMING)return null;if(null==n||null==r)return null;var i=u.default.getUser(n.id);if(null==i)return null;var o=(0,f.mH)(i,r);s.Z.age(o.id)>D||(w=y(w).concat([o]))}))},LOGOUT:F,NOTIFICATION_CENTER_ITEMS_ACK:function(e){H(e.ids,!0)},NOTIFICATION_CENTER_ITEMS_ACK_FAILURE:function(e){H(e.ids,!1)},NOTIFICATION_CENTER_ITEM_CREATE:G,NOTIFICATION_CENTER_ITEM_DELETE:function(e){var t=e.id;if(!L.has(t))return!1;L.delete(t);P=P.filter((function(e){return e.id!==t}))},NOTIFICATION_CENTER_ITEM_DELETE_FAILURE:G,LOAD_NOTIFICATION_CENTER_ITEMS:function(){S=!0},LOAD_NOTIFICATION_CENTER_ITEMS_FAILURE:function(){S=!1;C=!0;Z=!1;b=void 0;M=!0},LOAD_NOTIFICATION_CENTER_ITEMS_SUCCESS:function(e){var t=e.items,n=e.hasMore,r=e.cursor;if(S){S=!1;C=!0;M=!1;Z=t.length>0&&n;b=t.length>0?r:void 0;(P=y(P).concat(y(t.map(Y).filter((function(e){return!L.has(e.id)}))))).sort((function(e,t){return s.Z.compare(t.id,e.id)}));t.forEach((function(e){return L.add(e.id)}))}},RESET_NOTIFICATION_CENTER:F,
NOTIFICATION_CENTER_SET_ACTIVE:function(e){var t=e.active;R=t},NOTIFICATION_CENTER_TAB_FOCUSED:function(e){var t=e.focused;U=t},RELATIONSHIP_ADD:function(e){if(e.relationship.type===d.OGo.PENDING_INCOMING){var t=e.relationship,n=t.user,r=t.since;if(null==r)return null;var i=u.default.getUser(n.id);if(null==i)return null;w=y(w).concat([(0,f.mH)(i,r)])}e.relationship.type===d.OGo.FRIEND&&(w=w.map((function(t){return k(t,c.O7.INCOMING_FRIEND_REQUESTS,e.relationship.user.id)?O(I({},t),{local_id:"incoming_friend_requests_accepted_".concat(e.relationship.user.id,"_").concat(t.id),type:c.O7.INCOMING_FRIEND_REQUESTS_ACCEPTED,body:_.Z.Messages.NOTIFICATION_CENTER_INCOMING_FRIEND_REQUEST_ACCEPTED.format({username:"**".concat(e.relationship.user.username,"**")})}):t})))},RELATIONSHIP_REMOVE:function(e){w=w.filter((function(t){return!k(t,c.O7.INCOMING_FRIEND_REQUESTS,e.relationship.id)&&!k(t,c.O7.INCOMING_FRIEND_REQUESTS_ACCEPTED,e.relationship.id)}))},
NOTIFICATION_CENTER_ITEM_COMPLETED:function(e){var t=e.item_enum;P=P.map((function(e){return e.item_enum===t?O(I({},e),{completed:!0,acked:!0}):e})).filter(j)},NOTIFICATION_CENTER_ITEM_UPDATE:function(e){var t=e.item;P=P.map((function(e){return e.id===t.id?t:e})).filter(j)}})},369710:(e,t,n)=>{n.d(t,{AM:()=>i,ud:()=>o,b1:()=>a,DY:()=>u,O7:()=>s});var r,i,o,a,u,s;!function(e){e.LANDING="notification_center_landing"}(r||(r={}));!function(e){e[e.UPDATE_PROFILE=0]="UPDATE_PROFILE";e[e.FIND_FRIENDS=1]="FIND_FRIENDS";e[e.ADD_FRIEND=2]="ADD_FRIEND";e[e.FIRST_MESSAGE=3]="FIRST_MESSAGE"}(i||(i={}));!function(e){e.MARK_ALL_READ="mark_all_read";e.CLICKED="clicked";e.FRIEND_REQUESTS_BUTTON_CLICK="friend_requests_button_click";e.ACTION_BUTTON="action_button"}(o||(o={}));!function(e){e.ForYou="ForYou";e.Mentions="Mentions";e.MessageReminders="MessageReminders"}(a||(a={}));!function(e){e.GO_LIVE_PUSH="go_live_push";e.FRIEND_REQUEST_ACCEPTED="friend_request_accepted"
;e.FRIEND_REQUEST_PENDING="friend_request_pending";e.FRIEND_SUGGESTION_CREATED="friend_suggestion_created";e.FRIEND_REQUEST_REMINDER="friend_request_reminder";e.DM_FRIEND_NUDGE="dm_friend_nudge";e.RECENT_MENTION="recent_mention";e.REPLY_MENTION="reply_mention";e.GUILD_SCHEDULED_EVENT_STARTED="scheduled_guild_event_started";e.SYSTEM_DEMO="system_demo";e.MISSED_MESSAGES="missed_messages";e.TOP_MESSAGES="top_messages";e.LIFECYCLE_ITEM="lifecycle_item"}(u||(u={}));!function(e){e.INCOMING_FRIEND_REQUESTS="INCOMING_FRIEND_REQUESTS";e.INCOMING_FRIEND_REQUESTS_ACCEPTED="INCOMING_FRIEND_REQUESTS_ACCEPTED"}(s||(s={}))},106673:(e,t,n)=>{n.d(t,{a3:()=>p,$N:()=>I,mH:()=>v,r:()=>g});var r=n(842227),i=n(968449),o=n(725105),a=n(369710),u=n(730381),s=n.n(u),l=n(473708),c=3600,f=86400,d=2592e3,_=31104e3,h=function(){return{minutes:l.Z.Messages.FOR_YOU_TIMESTAMP_MINUTES_AGO,hours:l.Z.Messages.FOR_YOU_TIMESTAMP_HOURS_AGO,days:l.Z.Messages.FOR_YOU_TIMESTAMP_DAYS_AGO,
months:l.Z.Messages.FOR_YOU_TIMESTAMP_MONTHS_AGO,years:l.Z.Messages.FOR_YOU_TIMESTAMP_YEARS_AGO}};function E(e,t){var n=s()().diff(s()(e),"s"),r=(null!=t?t:h)();s()(e).format("LL");return n<60?r.minutes.format({count:1}):n<c?r.minutes.format({count:Math.floor(n/60)}):n<f?r.hours.format({count:Math.floor(n/c)}):n<d?r.days.format({count:Math.floor(n/f)}):n<_?r.months.format({count:Math.floor(n/d)}):r.years.format({count:Math.floor(n/_)})}var p=function(e){return E(e)},g=function(e,t){return e.acked||t!==i.uL&&r.default.compare(t,e.id)>=0};function v(e,t){var n=r.default.fromTimestamp(new Date(t).getTime());return{acked:!1,other_user:e,kind:"notification-center-item",local_id:"incoming_friend_requests_".concat(e.id,"_").concat(n),deeplink:"https://discord.com/users/".concat(e.id),type:a.O7.INCOMING_FRIEND_REQUESTS,id:n,body:l.Z.Messages.NOTIFICATION_CENTER_INCOMING_FRIEND_REQUEST.format({username:"**".concat(e.username,"**")})}}function I(){0;return(0,o.Fl)()}},202958:(e,t,n)=>{n.d(t,{
ln:()=>o,bY:()=>a});var r=n(260561),i=n(62277);function o(){return u.useExperiment({},{autoTrackExposure:!0}).enabled}function a(){var e=s.getCurrentConfig({},{autoTrackExposure:!1}).enabled,t=(0,i.cn)();return e&&t}var u=(0,r.B)({kind:"user",id:"2022-11_notification_redesign",label:"NotificationRedesign",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Notification Redesign Enabled",config:{enabled:!0}}]}),s=(0,r.B)({kind:"user",id:"2023-04_notification_redesign_v2",label:"NotificationRedesignV2",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Notification Redesign V2 Enabled",config:{enabled:!0}}]})},364269:(e,t,n)=>{n.d(t,{DM:()=>c,r1:()=>f,sk:()=>d,m7:()=>_,te:()=>h});var r=n(202351),i=n(350532),o=n(567403),a=n(682776),u=n(9430),s=n(473903),l=n(2590);function c(e){var t=(0,r.e7)([u.Z],(function(){return u.Z.isOptInEnabled(e)})),n=(0,r.e7)([o.Z],(function(){return o.Z.getGuild(e)})),i=(0,r.e7)([s.default],(function(){return s.default.getCurrentUser()}))
;return null!=e&&null!=n&&null!=i&&((n.hasFeature(l.oNc.COMMUNITY)||i.isStaff())&&t)}function f(e){var t=o.Z.getGuild(e),n=s.default.getCurrentUser();return null!=e&&null!=t&&null!=n&&((t.hasFeature(l.oNc.COMMUNITY)||n.isStaff())&&u.Z.isOptInEnabled(e))}function d(e){return(0,i.OL)()}function _(e){return(0,i.hB)()}function h(e){var t=(0,r.e7)([o.Z],(function(){return o.Z.getGuild(e)})),n=(0,r.cj)([a.Z],(function(){return{canManageGuild:a.Z.can(l.Plq.MANAGE_GUILD,t),canManageRoles:a.Z.can(l.Plq.MANAGE_ROLES,t)}})),i=n.canManageGuild,u=n.canManageRoles;if(null==t)return!1;var s=t.hasFeature(l.oNc.GUILD_ONBOARDING_EVER_ENABLED);return i&&u&&!s}},122253:(e,t,n)=>{n.d(t,{a:()=>r,w:()=>i});var r=Object.freeze({LOW:"background-opacity-low",MEDIUM:"background-opacity-medium",HIGH:"background-opacity-high",FULL:"background-opacity-full",DISABLED:null}),i=Object.freeze({BOTTOM:0,LOWER:.25,UPPER:.75,TOP:1})},330768:(e,t,n)=>{n.d(t,{Lh:()=>d,iD:()=>_,g1:()=>h,ir:()=>E,Mx:()=>g,BG:()=>v,KC:()=>p,
UY:()=>I,s4:()=>O,OO:()=>m});var r=n(730381),i=n.n(r),o=n(318715),a=n(135855),u=n(833589),s=n(636795),l=n(2590),c=n(203600),f=n(473708);function d(e){return null==e.id?a.ZP.convertSurrogateToName(e.name):":".concat(e.name,":")}function _(e,t,n,r){var i,o,a;return(r?e?f.Z.Messages.SUPER_REACT_REMOVE_WITH_COUNT_A11Y_LABEL:f.Z.Messages.SUPER_REACT_WITH_COUNT_A11Y_LABEL:e?f.Z.Messages.REACT_REMOVE_WITH_COUNT_A11Y_LABEL:f.Z.Messages.REACT_WITH_COUNT_A11Y_LABEL).format({reactions:t,emojiName:null!==(a=null===(o=null===(i=d(n))||void 0===i?void 0:i.replace(/[:_]/g," "))||void 0===o?void 0:o.trim())&&void 0!==a?a:""})}function h(e){var t;return{id:null!==(t=e.id)&&void 0!==t?t:null,name:null!=e.id?e.name:e.optionallyDiverseSequence,animated:Boolean(e.animated)}}function E(e,t){return null!=t.id?t.id===e.id:null==e.id&&t.name===e.name}var p;function g(){var e=i()().utc(),t=i()().utc().day("monday").hour(0).minute(0).second(0)
;return t.isBefore(e)?Math.ceil(t.add(1,"week").diff(e,"days",!0)):Math.ceil(t.diff(e,"days",!0))}function v(){return 1===i()().utc().day()}!function(e){e[e.TIER_0=2]="TIER_0";e[e.TIER_1=2]="TIER_1";e[e.TIER_2=5]="TIER_2"}(p||(p={}));function I(e){if(null==e||!(0,s.I5)(e))return 0;switch(e.premiumType){case c.p9.TIER_0:return p.TIER_0;case c.p9.TIER_1:return p.TIER_1;case c.p9.TIER_2:return p.TIER_2;default:return 0}}function O(e){return e.isThread()?l.jXE.THREAD_TEXT_AREA:e.isForumPost()?l.jXE.FORUM_CHANNEL_TEXT_AREA:e.isGuildVocal()?l.jXE.TEXT_IN_VOICE:l.jXE.CHANNEL_TEXT_AREA}function m(){var e=(0,o.ZP)([u.Z],(function(){return u.Z.wasReplenishedToday}));return v()&&!e?f.Z.Messages.SUPER_REACTIONS_OUT_OF_BURSTS_SIMPLE_SOON:f.Z.Messages.SUPER_REACTIONS_OUT_OF_BURSTS_SIMPLE.format({n:g()})}},290679:(e,t,n)=>{n.d(t,{W:()=>r});var r;!function(e){e[e.CHANNEL=0]="CHANNEL";e[e.GUILD_EVENT=1]="GUILD_EVENT";e[e.NOTIFICATION_CENTER=2]="NOTIFICATION_CENTER";e[e.GUILD_HOME=3]="GUILD_HOME"
;e[e.GUILD_ONBOARDING_QUESTION=4]="GUILD_ONBOARDING_QUESTION"}(r||(r={}))},841800:(e,t,n)=>{n.d(t,{t:()=>r,F:()=>i});var r,i;!function(e){e[e.CREATE_THREAD=0]="CREATE_THREAD";e[e.VIEW_THREAD=1]="VIEW_THREAD";e[e.VIEW_CHANNEL=2]="VIEW_CHANNEL";e[e.VIEW_MESSAGE_REQUEST=3]="VIEW_MESSAGE_REQUEST"}(r||(r={}));!function(e){e.THREAD="thread";e.MESSAGE_REQUEST="message-request";e.HOME="home"}(i||(i={}))},460214:(e,t,n)=>{n.d(t,{Ek:()=>i,mc:()=>o,YW:()=>a,X8:()=>u,FW:()=>s,D_:()=>l,Hy:()=>c});var r,i=32,o=512,a=5,u="DEFAULT";!function(e){e[e.SUCCESS=0]="SUCCESS";e[e.INTERRUPTED=1]="INTERRUPTED"}(r||(r={}));new Set([r.SUCCESS,r.INTERRUPTED]);var s={width:424,height:424,padding:100},l="ctrl+`",c=[]},656907:(e,t,n)=>{n.d(t,{Z:()=>F});var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(968449),s=n(473419),l=n(473903),c=n(652591),f=n(615457),d=n(460214),_=n(2590),h=n(131559);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return g(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){I=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return I(e,t)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||A(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T,y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function N(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}!function(e){e[e.NOT_FETCHED=0]="NOT_FETCHED";e[e.FETCHING=1]="FETCHING";e[e.FETCHED=2]="FETCHED"}(T||(T={}));var S=new Map,C=new Map,M=new Set,b=T.NOT_FETCHED,R=T.NOT_FETCHED,U=new Set,D=new Map,P=!1;function L(e){var t=e.sound,n=S.get(t.guildId),r=null==n?void 0:n.findIndex((function(e){return e.soundId===t.soundId}));if(null!=n&&null!=r&&-1!==r){n[r]=t;S.set(t.guildId,m(n))}else if(null!=n){null==n||n.push(t);S.set(t.guildId,m(n))}}var w=i().debounce((function(e){c.default.track(_.rMx.UPDATE_SOUNDBOARD_SETTINGS,{volume:Math.round((0,f.P)(e))});u.kU.updateSetting({volume:e})}),1e3);function Z(e){
var t,n,r=null!==(n=null==e||null===(t=e.audioContextSettings)||void 0===t?void 0:t.user)&&void 0!==n?n:{},i=!0,o=!1,a=void 0;try{for(var u,s=Object.entries(r)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=O(u.value,2),c=l[0];l[1].soundboardMuted?M.add(c):M.delete(c)}}catch(e){o=!0;a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var f=!0,d=!1,_=void 0;try{for(var h,E=M.keys()[Symbol.iterator]();!(f=(h=E.next()).done);f=!0){var p=h.value;null==r[p]&&M.delete(p)}}catch(e){d=!0;_=e}finally{try{f||null==E.return||E.return()}finally{if(d)throw _}}}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&I(e,t)}(n,e);var t=N(n);function n(){p(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(s.Z);Z(s.Z.settings)}
;r.getOverlaySerializedState=function(){return{soundboardSounds:Object.fromEntries(S),favoritedSoundIds:Array.from(U),localSoundboardMutes:Array.from(M)}};r.getSounds=function(){return S};r.getSoundsForGuild=function(e){return S.get(e)};r.getDefaultSounds=function(){return this.getSoundsForGuild(d.X8)};r.getSound=function(e,t){var n;return(null!==(n=S.get(e))&&void 0!==n?n:[]).find((function(e){return e.soundId===t}))};r.isFetchingSounds=function(){return R===T.FETCHING};r.isFetchingDefaultSounds=function(){return b===T.FETCHING};r.shouldFetchDefaultSounds=function(){return b===T.NOT_FETCHED};r.hasFetchedDefaultSounds=function(){return b===T.FETCHED};r.isUserPlayingSounds=function(e){var t=D.get(e);return null!=t&&t>0};r.isPlayingSound=function(e){return null!=C.get(e)};r.isFavoriteSound=function(e){return U.has(e)};r.getFavorites=function(){return U};r.isLocalSoundboardMuted=function(e){return M.has(e)};r.hasHadOtherUserPlaySoundInSession=function(){return P}
;r.__getLocalVars=function(){return{soundboardSounds:S,playingSoundboardSoundIds:C,localSoundboardMutes:M,defaultSoundFetchState:b,fetchState:R,favoritedSoundIds:U,numSoundsPlayingForUser:D,hasHadOtherUserPlaySoundInSession:P,debouncedProtoVolumeWrite:w}};return n}(o.ZP.Store);j.displayName="SoundboardStore";const F=new j(a.Z,{LOGOUT:function(){S.clear();C.clear();D.clear();P=!1;R=T.NOT_FETCHED},GUILD_SOUNDBOARD_FETCH:function(){R=T.FETCHING},GUILD_SOUNDBOARD_SOUND_CREATE:L,GUILD_SOUNDBOARD_SOUND_UPDATE:L,GUILD_SOUNDBOARD_SOUND_DELETE:function(e){var t=e.soundId,n=e.guildId;S.delete(t);var r=S.get(n),i=null==r?void 0:r.findIndex((function(e){return e.soundId===t}));if(!(null==r||null==i||i<0)){r.splice(i,1);S.set(n,m(r))}},GUILD_SOUNDBOARD_SOUND_PLAY_START:function(e){var t,n,r,i=e.soundId,o=e.userId,a=(null!==(n=C.get(i))&&void 0!==n?n:0)+1,u=(null!==(r=D.get(o))&&void 0!==r?r:0)+1;C.set(i,a);D.set(o,u);o!==(null===(t=l.default.getCurrentUser())||void 0===t?void 0:t.id)&&(P=!0)},
GUILD_SOUNDBOARD_SOUND_PLAY_END:function(e){var t,n,r=e.soundId,i=e.userId,o=(null!==(t=C.get(r))&&void 0!==t?t:0)-1,a=(null!==(n=D.get(i))&&void 0!==n?n:0)-1;o<=0?C.delete(r):C.set(r,o);a<=0?D.delete(i):D.set(i,a)},USER_SOUNDBOARD_SET_VOLUME:function(e){var t=e.volume;w(t)},VOICE_CHANNEL_SELECT:function(){C.clear();D.clear()},USER_SETTINGS_PROTO_UPDATE:function(e){var t=e.settings,n=t.type,r=t.proto;if(n===h.yP.FRECENCY_AND_FAVORITES_SETTINGS){var i,o;U=new Set(null!==(o=null==r||null===(i=r.favoriteSoundboardSounds)||void 0===i?void 0:i.soundIds)&&void 0!==o?o:[])}else n===h.yP.PRELOADED_USER_SETTINGS&&Z(r)},SOUNDBOARD_FETCH_DEFAULT_SOUNDS:function(){b=T.FETCHING},SOUNDBOARD_FETCH_DEFAULT_SOUNDS_SUCCESS:function(e){var t=e.soundboardSounds;S.set(d.X8,t);b=T.FETCHED},SOUNDBOARD_SOUNDS_RECEIVED:function(e){e.updates.forEach((function(e){var t=e.guildId,n=e.sounds;S.set(t,n)}));R=T.FETCHED},GUILD_DELETE:function(e){var t=e.guild;S.delete(t.id)},
AUDIO_TOGGLE_LOCAL_SOUNDBOARD_MUTE:function(e){var t=e.userId;M.has(t)?M.delete(t):M.add(t)},OVERLAY_INITIALIZE:function(e){var t=e.soundboardStoreState;S=new Map(Object.entries(t.soundboardSounds));U=new Set(t.favoritedSoundIds);M=new Set(t.localSoundboardMutes)},GUILD_SOUNDBOARD_SOUNDS_UPDATE:function(e){var t=e.guildId,n=e.soundboardSounds;S.set(t,n)}})},536945:(e,t,n)=>{n.d(t,{Z:()=>M});var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(382060),s=n(61209);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){c(e,t,n[t])}))}return e}function _(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var p=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var v={},I=new Set;function O(e){return{id:e.id,parentId:e.parent_id}}function m(e){e in v&&delete v[e]}function T(e){if(null!=e.threads&&e.threads.length>0){v[e.id]={};e.threads.filter((function(e){return u.AW.has(e.type)})).forEach((function(t){return y(e.id,t)}))}e.hasThreadsSubscription&&I.add(e.id)}function y(e,t){var n=v[e],r=t.parent_id;r in n||(n[r]={});v[e][r][t.id]=O(t)}function A(e){var t,n=e.channel;if(!u.AW.has(n.type))return!1
;if(!0===(null===(t=n.threadMetadata)||void 0===t?void 0:t.archived))return N(n);var r,i=null!==(r=v[n.guild_id])&&void 0!==r?r:{};v[n.guild_id]=_(d({},i),c({},n.parent_id,_(d({},i[n.parent_id]),c({},n.id,O(n)))))}function N(e){var t=e.guild_id,n=e.parent_id,r=e.id;if(null==t||null==n)return!1;if(!(t in v))return!1;if(!(n in v[t]))return!1;if(!(r in v[t][n]))return!1;v[t]=_(d({},v[t]),c({},n,d({},v[t][n])));delete v[t][n][r];i().isEmpty(v[t][n])&&delete v[t][n]}var S={},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}(n,e);var t=g(n);function n(){l(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(s.Z)};r.isActive=function(e,t,n){return null!=e&&null!=this.getThreadsForParent(e,t)[n]};r.getThreadsForGuild=function(e){var t
;return null!==(t=v[e])&&void 0!==t?t:S};r.getThreadsForParent=function(e,t){var n;return null!==(n=this.getThreadsForGuild(e)[t])&&void 0!==n?n:S};r.hasThreadsForChannel=function(e,t){return!i().isEmpty(this.getThreadsForParent(e,t))};r.forEachGuild=function(e){for(var t in v)e(t,v[t])};r.hasLoaded=function(e){return I.has(e)};r.__getLocalVars=function(){return{threadsByGuild:v,loadedGuildIds:I,NO_THREADS:S}};return n}(o.ZP.Store);C.displayName="ActiveThreadsStore";const M=new C(a.Z,{CONNECTION_OPEN:function(e){v={};I.clear();e.guilds.forEach((function(e){T(e)}))},OVERLAY_INITIALIZE:function(e){var t=e.channels;v={};i()(t).filter((function(e){return u.Ec.has(e.type)})).groupBy("guild_id").forEach((function(e,t){v[t]={};e.forEach((function(e){return y(t,e)}))}))},GUILD_CREATE:function(e){var t=e.guild;m(t.id);T(t)},GUILD_DELETE:function(e){m(e.guild.id)},THREAD_CREATE:A,THREAD_UPDATE:A,THREAD_LIST_SYNC:function(e){var t=e.guildId,n=e.threads;null==e.channelIds&&I.add(t);v[t]=d({},v[t])
;for(var r in v[t])v[t][r]=d({},v[t][r]);n.forEach((function(e){return y(t,e)}))},THREAD_DELETE:function(e){return N(e.channel)},CHANNEL_DELETE:function(e){var t=e.channel;if(null==t.guild_id||!(t.guild_id in v))return!1;v[t.guild_id]=d({},v[t.guild_id]);delete v[t.guild_id][t.id]}})},492628:(e,t,n)=>{n.d(t,{Z:()=>r});function r(e){return{id:e.id,userId:e.user_id,flags:e.flags,muted:e.muted,muteConfig:e.mute_config,joinTimestamp:e.join_timestamp}}},4798:(e,t,n)=>{n.d(t,{Z:()=>I});var r=n(730381),i=n.n(r),o=n(169376),a=n(330768),u=n(918041),s=n(661123),l=n(120415),c=n(2590);function f(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){f(e,t,n[t])}))}return e}function h(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}var g=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}const I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=v(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r,o,a;(r=t.call(this)).id=e.id;r.type=e.type||c.uaV.DEFAULT;r.channel_id=e.channel_id;r.author=e.author
;r.content=e.content||"";r.customRenderedContent=e.customRenderedContent;r.attachments=e.attachments||[];r.embeds=e.embeds||[];r.mentions=e.mentions||[];r.mentionRoles=e.mentionRoles||[];r.mentionChannels=e.mentionChannels||[];r.mentioned=e.mentioned||!1;r.pinned=e.pinned||!1;r.mentionEveryone=e.mentionEveryone||!1;r.tts=e.tts||!1;r.codedLinks=e.codedLinks||[];r.giftCodes=e.giftCodes||[];r.timestamp=e.timestamp||i()();r.editedTimestamp=e.editedTimestamp||null;r.state=e.state||c.yb.SENT;r.nonce=e.nonce||null;r.blocked=e.blocked||!1;r.call=e.call||null;r.bot=e.bot||!1;r.webhookId=e.webhookId||null;r.reactions=e.reactions||[];r.applicationId=e.application_id||e.applicationId||null;r.application=e.application||null;r.activity=e.activity||null;r.messageReference=e.messageReference||null;r.flags=e.flags||0;r.isSearchHit=e.hit||e.isSearchHit||!1;r.stickers=e.stickers||[];r.stickerItems=null!==(a=null!==(o=e.sticker_items)&&void 0!==o?o:e.stickerItems)&&void 0!==a?a:[]
;r.components=e.components;r.loggingName=e.loggingName||null;r.colorString=e.colorString;r.nick=e.nick;r.interaction=e.interaction||null;r.interactionData=e.interactionData||null;r.interactionError=e.interactionError||null;r.roleSubscriptionData=e.roleSubscriptionData;r.referralTrialOfferId=e.referralTrialOfferId||null;return r}var r=n.prototype;r.isEdited=function(){return null!=this.editedTimestamp};r.getChannelId=function(){return this.channel_id};r.getReaction=function(e){return this.reactions.find((function(t){return(0,a.ir)(t.emoji,e)}))};r.userHasReactedWithEmoji=function(e,t){return this.reactions.some((function(n){if((0,a.ir)(n.emoji,e))return t&&n.me||!t&&n.me_burst}))};r.addReaction=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=-1,o=this.reactions.map((function(o,s){if((0,a.ir)(o.emoji,e)){i=s;if(r){if(t&&o.me)return o
;var c=t&&o.me_burst?o.burst_count:o.burst_count+1,f=null!=o.burst_colors&&o.burst_colors.length>0?o.burst_colors:n;o=h(_({},o),{me_burst:!!t||o.me_burst,burst_count:c,count_details:h(_({},o.count_details),{burst:c}),burst_colors:f,themedBurstColors:u.Z.buildEmojiReactionColorsPlatformed({colors:f,shouldProcessMobileColors:(0,l.gn)()})})}else{if(t&&o.me_burst)return o;var d=t&&o.me?o.count:o.count+1;o=h(_({},o),{count:d,count_details:h(_({},o.count_details),{normal:d}),me:!!t||o.me})}}return o}));-1===i&&(r?o.push({emoji:e,me:!1,me_burst:t,count:0,count_details:{burst:1,normal:0},burst_count:1,burst_colors:n,themedBurstColors:u.Z.buildEmojiReactionColorsPlatformed({colors:null!=n?n:[],shouldProcessMobileColors:(0,l.gn)()})}):o.push({emoji:e,me:t,me_burst:!1,count:1,count_details:{burst:0,normal:1},burst_count:0,burst_colors:[]}));return this.set("reactions",o)};r.removeReaction=function(e){
var t,n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=-1,s=this.reactions.map((function(t,n){if((0,a.ir)(t.emoji,e)){if(o){var r=i&&!t.me_burst?t.burst_count:t.burst_count-1;t=h(_({},t),{burst_count:r,me_burst:!i&&t.me_burst,count_details:h(_({},t.count_details),{burst:r})})}else{var s=i&&!t.me?t.count:t.count-1;t=h(_({},t),{count:s,me:!i&&t.me,count_details:h(_({},t.count_details),{normal:s})})}u=n}return t})),l=null!==(t=s[u])&&void 0!==t?t:{},c=l.count,f=l.burst_count,d=l.count_details,E=null!==(n=null==d?void 0:d.normal)&&void 0!==n?n:0,p=null!==(r=null==d?void 0:d.burst)&&void 0!==r?r:0;-1!==u&&c<=0&&f<=0&&E<=0&&p<=0&&s.splice(u,1);return this.set("reactions",s)};r.removeReactionsForEmoji=function(e){return this.set("reactions",this.reactions.filter((function(t){return!(0,a.ir)(t.emoji,e)})))};r.isSystemDM=function(){return this.author.isSystemUser()};r.hasFlag=function(e){return(0,s.yE)(this.flags,e)}
;r.isCommandType=function(){return this.type===c.uaV.CHAT_INPUT_COMMAND||this.type===c.uaV.CONTEXT_MENU_COMMAND};r.toJS=function(){return h(_({},this),{webkhook_id:this.webhookId,edited_timestamp:this.editedTimestamp,mention_everyone:this.mentionEveryone})};r.isFirstMessageInForumPost=function(e){return this.id===this.channel_id&&e.isForumPost()};return n}(o.Z)},177570:(e,t,n)=>{n.d(t,{Z:()=>k});var r=n(202351),i=n(744564),o=n(409125),a=n(306263),u=n(924066),s=n(39649),l=n(736818),c=n(61209),f=n(567403),d=n(604945),_=n(682776),h=n(69085),E=n(671723),p=n(715107),g=n(407561),v=n(2590),I=n(443132);function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function T(e){T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return T(e)}function y(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){m(e,t,n[t])}))}return e}function A(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function N(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t
;return e};return S(e,t)}var C,M,b,R,U=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N(this,n)}}var P=null,L={};w();function w(){C=new Map;M={};b={};R={};L={}}function Z(e){C.delete(e)}function j(){var e=[];for(var t in M){var n=M[t];for(var r in n)e.push(M[t][r])}return e}function F(e){var t=e.streamKey,n=e.region,r=e.viewerIds,i=e.paused;C.set(t,A(y({},(0,a.my)(t)),{state:i?v.jm8.PAUSED:v.jm8.ACTIVE}));b[t]={streamKey:t,region:n,viewerIds:r}}function Y(e,t){return e===I.lo.CALL||_.Z.canWithPartialContext(v.Plq.VIEW_CHANNEL,{channelId:t
})}function G(e){var t=c.Z.getChannel(e.channelId);return!!Y(e.streamType,e.channelId)||null!=t&&(0,u.p9)(t,g.Z,f.Z,_.Z,o.Z)[0]}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(n,e);var t=D(n);function n(){O(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.syncWith([_.Z],(function(){return!0}));this.waitFor(E.ZP,_.Z)};r.isSelfStreamHidden=function(e){var t;return null!==(t=L[e])&&void 0!==t&&t};r.getLastActiveStream=function(){return(0,s.Z)(d.Z)&&null!==(e=Array.from(C.values()).pop())&&void 0!==e?e:null;var e};r.getAllActiveStreams=function(){return(0,s.Z)(d.Z)?Array.from(C.values()):[]};r.getAllActiveStreamsForChannel=function(e){return(0,s.Z)(d.Z)?Array.from(C.values()).filter((function(t){return t.channelId===e})):[]}
;r.getActiveStreamForStreamKey=function(e){return(0,s.Z)(d.Z)&&null!==(t=C.get(e))&&void 0!==t?t:null;var t};r.getActiveStreamForApplicationStream=function(e){if(!(0,s.Z)(d.Z)||null==e)return null;var t,n=(0,a.V9)(e);return null!==(t=this.getActiveStreamForStreamKey(n))&&void 0!==t?t:null};r.getCurrentUserActiveStream=function(){var e=p.Z.getVoiceChannelId(),t=c.Z.getChannel(e);return null==t?null:this.getActiveStreamForUser(l.default.getId(),t.getGuildId())};r.getActiveStreamForUser=function(e,t){var n,r=this.getStreamForUser(e,t);return null!=r?this.getActiveStreamForApplicationStream(r):null!==(n=this.getAllActiveStreams().find((function(t){return t.ownerId===e})))&&void 0!==n?n:null};r.getStreamerActiveStreamMetadata=function(){var e=p.Z.getVoiceChannelId(),t=c.Z.getChannel(e);if(null==t)return null;var n,r=this.getActiveStreamForUser(l.default.getId(),t.getGuildId());return null==r?null:null!==(n=R[(0,a.V9)(r)])&&void 0!==n?n:null};r.getAnyStreamForUser=function(e){if(!(0,
s.Z)(d.Z))return null;var t,n=M[e];return null==n?null:null!==(t=Object.values(n).find((function(e){return G(e)})))&&void 0!==t?t:null};r.getStreamForUser=function(e,t){var n;if(!(0,s.Z)(d.Z))return null;var r=null===(n=M[e])||void 0===n?void 0:n[null!=t?t:"null"];return null==r?null:G(r)?r:null};r.getRTCStream=function(e){return(0,s.Z)(d.Z)&&null!==(t=b[e])&&void 0!==t?t:null;var t};r.getAllApplicationStreams=function(){return(0,s.Z)(d.Z)?j().filter((function(e){return null!=e&&Y(e.streamType,e.channelId)})):[]};r.getAllApplicationStreamsForChannel=function(e){return(0,s.Z)(d.Z)?j().filter((function(t){return null!=t&&t.channelId===e&&Y(t.streamType,t.channelId)})):[]};r.getViewerIds=function(e){if(!(0,s.Z)(d.Z))return[];var t=null,n=null!=(t="string"==typeof e?e:(0,a.V9)(e))?b[t]:null;return null!=n?n.viewerIds:[]};r.getState=function(){return(0,s.Z)(d.Z)?{activeStreams:Array.from(C.entries()),streamsByUserAndGuild:M,rtcStreams:b,streamerActiveStreamMetadatas:R}:{activeStreams:[],
streamsByUserAndGuild:{},rtcStreams:{},streamerActiveStreamMetadatas:{}}};r.__getLocalVars=function(){return{activeStreams:C,streamsByUserAndGuild:M,rtcStreams:b,streamerActiveStreamMetadatas:R,selectedParticipantId:P,selfStreamParticipantsHidden:L}};return n}(r.ZP.Store);H.displayName="ApplicationStreamingStore";const k=new H(i.Z,{OVERLAY_INITIALIZE:function(e){var t=e.applicationStreamState;M=t.streamsByUserAndGuild;C=new Map(t.activeStreams);b=t.rtcStreams;R=t.streamerActiveStreamMetadatas},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.guildId,i=t.channelId,o=t.sessionId;if(t.selfStream&&null!=i){!function(e){null==M[e.ownerId]&&(M[e.ownerId]={});var t;M[e.ownerId][null!==(t=e.guildId)&&void 0!==t?t:"null"]=e}({streamType:null!=r?I.lo.GUILD:I.lo.CALL,ownerId:n,guildId:r,channelId:i});return!0}var a=l.default.getSessionId();return n===l.default.getId()&&o!==a&&null!=h.Z.getChannelId()?e:function(e,t){var n;t=null!=t?t:"null"
;if(null==(null===(n=M[e])||void 0===n?void 0:n[t]))return!1;delete M[e][t];return!0}(n,r)||e}),!1)},STREAM_WATCH:function(e){var t=e.streamKey,n=(0,a.my)(t);C.delete(t);C.set(t,A(y({},n),{state:v.jm8.CONNECTING}));n.ownerId===l.default.getId()&&(L[n.channelId]=!1)},STREAM_START:function(e){var t=e.streamType,n=e.guildId,r=e.channelId,i=e.pid,o=e.sourceName,u=(0,a.V9)({streamType:t,guildId:n,channelId:r,ownerId:l.default.getId()}),s=null!=i?E.ZP.getGameForPID(i):null;R[u]={id:null==s?void 0:s.id,pid:i,sourceName:o};C.delete(u);C.set(u,{streamType:t,guildId:n,channelId:r,ownerId:l.default.getId(),state:v.jm8.CONNECTING})},STREAM_STOP:function(e){var t=e.streamKey;R[t]=null},STREAM_CREATE:F,STREAM_UPDATE:F,STREAM_TIMED_OUT:function(e){var t=e.streamKey,n=C.get(t);if(null==n)return!1;C.set(t,A(y({},n),{state:v.jm8.FAILED}))},STREAM_DELETE:function(e){var t=e.streamKey,n=e.unavailable,r=e.reason;delete b[t];var i=C.get(t);if(null==i)return!1;var o=v.jm8.ENDED
;n?o=v.jm8.RECONNECTING:r===v.si2.UNAUTHORIZED&&(o=v.jm8.FAILED);C.set(t,A(y({},i),{state:o}));o===v.jm8.ENDED&&P!==t&&Z(t)},STREAM_CLOSE:function(e){Z(e.streamKey)},STREAM_UPDATE_SELF_HIDDEN:function(e){var t=e.channelId,n=e.selfStreamHidden;(0,a.DB)(P)&&(null==P?void 0:P.includes(l.default.getId()))&&!1===L[t]&&!0===n&&(P=null);L[t]=n},RTC_CONNECTION_STATE:function(e){var t=e.streamKey,n=e.state;if(null==t)return!1;var r=C.get(t);if(null==r||r.state===v.jm8.ENDED)return!1;var i=r.state;switch(n){case v.hes.DISCONNECTED:i=v.jm8.RECONNECTING;break;case v.hes.RTC_CONNECTED:i=v.jm8.ACTIVE}if(i===r.state)return!1;C.set(t,A(y({},r),{state:i}))},CHANNEL_RTC_SELECT_PARTICIPANT:function(e){var t=e.id,n=e.channelId;P=t;Array.from(C.values()).forEach((function(e){(0,a.V9)(e)!==P&&e.state===v.jm8.ENDED&&Z((0,a.V9)(e))}));if(null!=t){(0,a.DB)(t)&&t.includes(l.default.getId())&&(L[n]=!1)}},CONNECTION_OPEN:w,CONNECTION_CLOSED:w,LOGOUT:w})},610773:(e,t,n)=>{n.d(t,{Z:()=>N})
;var r=n(496486),i=n.n(r),o=n(202351),a=n(281110),u=n(744564),s=n(61209),l=n(715107),c=n(464187),f=n(2590);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){_(e,t,n[t])}))}return e}function p(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function g(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t){v=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return v(e,t)}var I=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}var m={},T={};function y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Z.getChannelId(),n=s.Z.getChannel(t);if(null!=n&&null==n.getGuildId()&&null!=t&&(null==m[t]||e)){var r;m[t]=null!==(r=m[t])&&void 0!==r?r:{channelId:t,ringing:[]};u.Z.dispatch({type:"CALL_CONNECT",channelId:t});return!0}return!1}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&v(e,t)}(n,e);var t=O(n);function n(){d(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(c.Z,l.Z)};r.getCall=function(e){return m[e]};r.getCalls=function(){return Object.values(m)};r.getMessageId=function(e){var t=this.getCall(e)
;return null!=t?t.messageId:null};r.isCallActive=function(e,t){var n=m[e];return null!=n&&!n.unavailable&&(null!=t?n.messageId===t:null!=n.region)};r.isCallUnavailable=function(e){var t=m[e];return null!=t&&t.unavailable};r.getInternalState=function(){return{calls:m,enqueuedRings:T}};r.__getLocalVars=function(){return{calls:m,enqueuedRings:T}};return n}(o.ZP.Store);A.displayName="CallStore";const N=new A(u.Z,{CONNECTION_OPEN:function(){return y(!0)},CONNECTION_CLOSED:function(){m={};T={}},OVERLAY_INITIALIZE:function(e){var t=e.callStoreInternalState;m=E({},t.calls);T=E({},t.enqueuedRings)},CONNECTION_RESUMED:function(){return y(!0)},CHANNEL_SELECT:function(e){return y(!1,e.channelId)},CHANNEL_DELETE:function(e){var t=e.channel;null!=T[t.id]&&delete T[t.id];if(null==m[t.id])return!1;delete m[t.id]},CALL_CREATE:function(e){var t=e.channelId,n=e.messageId,r=e.region,i=e.ringing;m[t]={channelId:t,messageId:n,region:r,ringing:i,unavailable:!1,regionUpdated:!1};if(null!=T[t]){var o=T[t]
;delete T[t];1!==o.indexOf("all")&&(o=null);a.Z.post({url:f.ANM.CALL_RING(t),body:{recipients:o},oldFormErrors:!0})}},CALL_UPDATE:function(e){var t=e.channelId,n=e.messageId,r=e.region,i=e.ringing,o=m[t],a=null!=o&&(o.regionUpdated||o.region!==r);m[t]=p(E({},m[t]),{messageId:n,region:r,ringing:i,regionUpdated:a})},CALL_DELETE:function(e){var t=e.channelId,n=e.unavailable,r=m[t];m[t]=!0===n&&null!=r?p(E({},r),{unavailable:n}):{channelId:t,ringing:[],messageId:null,region:null,regionUpdated:!1,unavailable:n};null!=T[t]&&delete T[t]},CALL_ENQUEUE_RING:function(e){var t,n=e.channelId,r=e.recipients;T[n]=i().union(null!==(t=T[n])&&void 0!==t?t:[],null!=r?r:["all"])},VOICE_CHANNEL_SELECT:function(e){null==e.channelId&&(T={})}})},804185:(e,t,n)=>{n.d(t,{uZ:()=>y,D5:()=>R,ZP:()=>w});var r=n(289283),i=n(202351),o=n(744564),a=n(841800),u=n(930948),s=n(61209),l=n(682776),c=n(733300),f=n(715107),d=n(464187),_=n(473903),h=n(2590),E=n(897196),p=n(520453);function g(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments)
;return I(this,n)}}var y="message_requests",A=!1,N=!1,S=!0,C=!1,M={};function b(e){if(null==e)return null;if((0,E.AB)(e)){var t=d.Z.getGuildId();if(null==t)return null;e=(0,E.Qk)(e,t)}return e}function R(e){return[a.t.VIEW_CHANNEL,a.t.VIEW_THREAD,a.t.VIEW_MESSAGE_REQUEST].includes(e.type)}function U(e){var t=!1;if(C){C=!1;t=!0}var n=b(f.Z.getChannelId());if(null!=n&&n in M){delete M[n];t=!0}return t&&e?e:!e}function D(){var e=!1;for(var t in M){var n=M[t];if(n.type===a.t.VIEW_THREAD||n.type===a.t.VIEW_CHANNEL){var r=s.Z.getChannel(n.channelId);if(null==r||!l.Z.can(p.Pl.VIEW_CHANNEL,r)){delete M[t];e=!0}}}return e}function P(){if(C===c.Z.isActive())return!1;C=c.Z.isActive()}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=T(n);function n(){g(this,n);return t.apply(this,arguments)}
var r=n.prototype;r.initialize=function(e){if(null!=e){var t,n,r,i;A=null!==(t=e.isMembersOpen)&&void 0!==t&&t;N=null!==(n=e.isSummariesOpen)&&void 0!==n&&n;S=null===(r=e.isProfileOpen)||void 0===r||r;M=null!==(i=e.sidebars)&&void 0!==i?i:{}}this.syncWith([c.Z],P);this.syncWith([l.Z],D)};r.getState=function(){return{isMembersOpen:A,isSummariesOpen:N,isProfileOpen:S,sidebars:M}};r.getSection=function(e){var t=s.Z.getChannel(e);return C?h.ULH.SEARCH:null!=(e=b(e))&&null!=M[e]?h.ULH.SIDEBAR_CHAT:(null==t?void 0:t.isDM())&&S?h.ULH.PROFILE:N?h.ULH.SUMMARIES:A?h.ULH.MEMBERS:h.ULH.NONE};r.getSidebarState=function(e){return null==(e=b(e))?void 0:M[e]};r.getCurrentSidebarChannelId=function(e){if(null==(e=b(e)))return null;if(C)return null;var t=M[e];return null==t?null:t.type===a.t.VIEW_THREAD||t.type===a.t.VIEW_CHANNEL?t.channelId:null};r.getCurrentSidebarMessageId=function(e){var t;if(null==(e=b(e)))return null;if(C)return null;var n=M[e]
;return null==n?null:n.type===a.t.VIEW_THREAD||n.type===a.t.VIEW_CHANNEL?null===(t=n.details)||void 0===t?void 0:t.initialMessageId:null};r.__getLocalVars=function(){return{isMembersOpen:A,isSummariesOpen:N,isProfileOpen:S,isSearchOpen:C,sidebars:M}};return n}(i.ZP.PersistedStore);L.displayName="ChannelSectionStore";L.persistKey="ChannelSectionStore2";const w=new L(o.Z,{CHANNEL_TOGGLE_MEMBERS_SECTION:function(){N&&(N=U(N));A=U(A)},PROFILE_PANEL_TOGGLE_SECTION:function(){S||u.S.dispatch(h.CkL.SEARCH_RESULTS_CLOSE);S=U(S)},CHANNEL_TOGGLE_SUMMARIES_SECTION:function(){A&&(A=U(A));N=U(N)},SIDEBAR_VIEW_CHANNEL:function(e){var t=e.sidebarType,n=e.baseChannelId,r=e.channelId,i=e.details;C=!1;var o=b(n);null!=o&&(M[o]={type:t,channelId:r,details:i})},SIDEBAR_CREATE_THREAD:function(e){var t=e.parentChannelId,n=e.parentMessageId,r=e.location;C=!1;var i=b(t);null!=i&&(M[i]={type:a.t.CREATE_THREAD,parentChannelId:t,parentMessageId:n,location:r})},SIDEBAR_CLOSE:function(e){var t=b(e.baseChannelId)
;null!=t&&delete M[t]},CHANNEL_DELETE:function(e){var t=e.channel;if(t.id in M){delete M[t.id];return!0}var n=!1;for(var r in M){var i=M[r];if(null!=i&&i.type===a.t.VIEW_CHANNEL&&i.channelId===t.id){delete M[r];n=!0}}return n},CHANNEL_SELECT:function(){if(r.tq&&A){A=!1;N=!1}},THREAD_CREATE:function(e){var t,n=e.channel;if(n.ownerId===(null===(t=_.default.getCurrentUser())||void 0===t?void 0:t.id))return!1;var r=M[n.parent_id];null!=r&&r.type===a.t.CREATE_THREAD&&r.parentMessageId===n.id&&(M[n.parent_id]={type:a.t.VIEW_THREAD,channelId:n.id})},THREAD_DELETE:function(e){var t=e.channel,n=M[t.parent_id];if(null==n||n.type!==a.t.VIEW_THREAD||n.channelId!==t.id)return!1;delete M[t.parent_id]}})},953727:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(202351),i=n(199731),o=n(744564);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}
function s(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){l=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return l(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}var d={},_={},h={scrollTop:0};function E(e){return{guildId:e,scrollTop:null,scrollTo:null}}function p(e){if(null!=d[e]){var t=d[e];return t.scrollTop===t.scrollHeight-t.offsetHeight}return!0}
var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&l(e,t)}(n,e);var t=f(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.percentageScrolled=function(e){if(null!=d[e]){var t=d[e];return t.scrollTop/t.scrollHeight}return 1};r.getChannelDimensions=function(e){return d[e]};r.getGuildDimensions=function(e){var t;return null!==(t=_[e])&&void 0!==t?t:E(e)};r.getGuildListDimensions=function(){return h};r.isAtBottom=function(e){return p(e)};r.__getLocalVars=function(){return{channelDimensions:d,guildDimensions:_,guildListDimensions:h}};return n}(r.ZP.Store);g.displayName="DimensionStore";const v=new g(o.Z,{UPDATE_CHANNEL_DIMENSIONS:function(e){var t=e.channelId,n=e.scrollTop,r=e.scrollHeight,o=e.offsetHeight,a=d[t];if(null==n||null==r||null==o){if(null==a)return!1;delete d[t]}else{
var u={channelId:t,scrollTop:n,scrollHeight:r,offsetHeight:o};if(null!=a&&(0,i.Z)(a,u))return!1;d[t]=u}},UPDATE_CHANNEL_LIST_DIMENSIONS:function(e){var t=e.guildId,n=e.scrollTop,r=e.scrollTo;null==_[t]&&(_[t]=E(t));void 0!==n&&(_[t].scrollTop=n);var i=!1;if(void 0!==r){i=_[t].scrollTo!==r;_[t].scrollTo=r}return null!=r||i},UPDATE_GUILD_LIST_DIMENSIONS:function(e){var t=e.scrollTop;h.scrollTop=t},CALL_CREATE:function(e){var t=e.channelId;p(t)&&delete d[t]}})},595970:(e,t,n)=>{n.d(t,{Z:()=>C});var r=n(202351),i=n(744564),o=n(306472),a=n(968449),u=n(120415),s=n(736818),l=n(2590),c=n(36256);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return d(e)}function _(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var g=Date.now(),v=!1,I=!1,O=!1,m=!1,T=!1;function y(){return O||m||(0,u.Dt)()&&T}function A(){Date.now()-g>l.OSm||y()?v||i.Z.dispatch({type:"IDLE",idle:!0,idleSince:g}):v&&i.Z.dispatch({type:"IDLE",idle:!1});Date.now()-g>Math.min(1e3*a.CM.getSetting(),l.OSm)||y()?I||i.Z.dispatch({type:"AFK",afk:!0}):I&&i.Z.dispatch({type:"AFK",afk:!1})}
if(!__OVERLAY__)if(u.FB&&null!=(null===o.Z||void 0===o.Z?void 0:o.Z.remotePowerMonitor)){!function e(){var t,r=function(t){g=Math.max(Date.now()-t,g);A();setTimeout(e,1e4)};if(null!=(null===o.Z||void 0===o.Z||null===(t=o.Z.remotePowerMonitor)||void 0===t?void 0:t.getSystemIdleTimeMs)){var i=o.Z.remotePowerMonitor.getSystemIdleTimeMs();i instanceof Promise?i.then(r):r(i)}else n(310126).default.getIdleMilliseconds(r)}();o.Z.remotePowerMonitor.on("resume",(function(){O=!1;N({})}));o.Z.remotePowerMonitor.on("suspend",(function(){O=!0;N({})}));o.Z.remotePowerMonitor.on("lock-screen",(function(){m=!0;N({})}));o.Z.remotePowerMonitor.on("unlock-screen",(function(){m=!1;N({})}))}else setInterval(A,.25*l.OSm);function N(e){var t=e.timestamp,n="OVERLAY_SET_NOT_IDLE"===e.type&&null!=t;if(n&&t<=g)return!1;g=n?t:Date.now();__OVERLAY__?i.Z.dispatch({type:"OVERLAY_SET_NOT_IDLE",timestamp:g}):A();return!1}var S=function(e){!function(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=p(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isIdle=function(){return v};r.isAFK=function(){return I};r.getIdleSince=function(){return v?g:null};r.__getLocalVars=function(){return{idleSince:g,idle:v,afk:I,systemSuspended:O,systemLocked:m,appBackgrounded:T}};return n}(r.ZP.Store);S.displayName="IdleStore";const C=new S(i.Z,{IDLE:function(e){v=e.idle},AFK:function(e){I=e.afk},SPEAKING:function(e){var t=e.userId;e.speakingFlags!==c.Dg.NONE&&t===s.default.getId()&&N({});return!1},APP_STATE_UPDATE:function(e){var t=e.state;T=t===l.$7l.BACKGROUND;g=Date.now();A();return!1},OVERLAY_SET_NOT_IDLE:N,CHANNEL_SELECT:N,VOICE_CHANNEL_SELECT:N,WINDOW_FOCUS:N,OVERLAY_INITIALIZE:N,OVERLAY_SET_INPUT_LOCKED:N,USER_SETTINGS_PROTO_UPDATE:N})},
117112:(e,t,n)=>{n.d(t,{Z:()=>Q});var r=n(496486),i=n.n(r),o=n(468811),a=n.n(o),u=n(202351),s=n(630631),l=n(744564),c=n(169376);function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function d(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor
;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=E(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id||"";r.widgets=e.widgets||[];return r}return n}(c.Z);function g(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}function O(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){m=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return m(e,t)}var T=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)
}else n=r.apply(this,arguments);return O(this,n)}}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&m(e,t)}(n,e);var t=y(n);function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r;(r=t.call(this)).id=e.id||"";r.layoutId=e.layoutId||"";r.type=e.type;r.anchor=I({left:0,top:0},e.anchor);r.size=I({width:0,height:0},e.size);r.pinned=!!e.pinned;r.zIndex=e.zIndex||0;r.meta=I({},e.meta);return r}return n}(c.Z),N=n(66121),S=n(2590);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e
}function R(e){R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return R(e)}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){b(e,t,n[t])}))}return e}function D(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function P(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e,t){L=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return L(e,t)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j,F=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Y(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}!function(e){
e.REQUIRED="REQUIRED";e.OPTIONAL="OPTIONAL";e.OPTIONAL_DEFAULT="OPTIONAL_DEFAULT"}(j||(j={}));var H,k,B,V="migrated",x=(b(B={},S.Odu.GUILDS,{minSize:{width:312,height:300},resizeX:!1,resizeY:!0,dragAnywhere:!1,layoutPolicy:j.OPTIONAL,defaultSettings:{anchor:{left:.175,top:.15,bottom:null,right:null},size:{width:"auto",height:.65},pinned:!1}}),b(B,S.Odu.TEXT,{minSize:{width:430,height:300},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:j.OPTIONAL,defaultSettings:{anchor:{left:.26,top:.15,bottom:null,right:null},size:{width:.565,height:.65},pinned:!0}}),b(B,S.Odu.VOICE,{minSize:{width:272,height:100},resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:j.REQUIRED,defaultSettings:{anchor:{left:.011,top:.011,bottom:null,right:null},size:{width:"auto",height:"auto"},pinned:!0}}),b(B,S.Odu.GUILDS_TEXT,{minSize:{height:300,width:610},resizeX:!0,resizeY:!0,dragAnywhere:!1,layoutPolicy:j.OPTIONAL_DEFAULT,defaultSettings:{anchor:{left:.15,top:.15,bottom:null,right:null},size:{width:.7,
height:.65},pinned:!1}}),b(B,S.Odu.LOBBY_VOICE,{minSize:{width:272,height:100},resizeX:!1,resizeY:!1,dragAnywhere:!0,layoutPolicy:j.REQUIRED,defaultSettings:{anchor:{left:null,top:.011,bottom:null,right:.011},size:{width:"auto",height:"auto"},pinned:!0}}),B);function W(e,t){var n=k[e];if(null==n)return!1;var r=H[n.layoutId];return null!=r&&t(n,r)}function K(e,t){k=D(U({},k),b({},e.id,e.set("zIndex",t)))}function z(e){var t;return null===(t=x[e])||void 0===t?void 0:t.defaultSettings}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&L(e,t)}(n,e);var t=G(n);function n(){M(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){var t=this;if(null!=e&&null!=e.layouts&&null!=e.widgets){H=function(e){var t={};i().forEach(e,(function(e,n){t[n]=new p(e)}));return t}(e.layouts)
;k=function(e){var t={};i().forEach(e,(function(e,n){t[n]=new A(e)}));return t}(e.widgets)}else{H={};k={}}var n=!1,r=[];i().forEach(x,(function(e,t){e.layoutPolicy===j.REQUIRED&&r.push(t)}));i().forEach(H,(function(e,i){var o=t.getWidgetsForLayout(i),u=!1,s=!0,l=!1,c=void 0;try{for(var f,d=function(){var e=f.value,r=o.find((function(t){return t.type===e}));if(null!=r)return"continue";u=n=!0;var s=a().v4();r=new A(D(U({},t.getWidgetDefaultSettings(e)),{type:e,id:s,layoutId:i,zIndex:o.length}));o.push(r);k=D(U({},k),b({},s,r))},_=r[Symbol.iterator]();!(s=(f=_.next()).done);s=!0)d()}catch(e){l=!0;c=e}finally{try{s||null==_.return||_.return()}finally{if(l)throw c}}if(u){e=e.set("widgets",o.map((function(e){return e.id})));H=D(U({},H),b({},i,e))}}));i().forEach(k,(function(e,t){var r=H[e.layoutId];if(null==r||r.widgets.indexOf(t)<0){delete(k=U({},k))[t];n=!0}}));if(n){this.persist();this.emitChange()}};r.getState=function(){return{layouts:H,widgets:k}};r.getLayouts=function(){return H}
;r.getLayout=function(e){return H[e]};r.getAllWidgets=function(){return k};r.getWidget=function(e){return k[e]};r.getWidgetsForLayout=function(e){var t=this,n=this.getLayout(e);return null==n?[]:n.widgets.reduce((function(e,n){var r=t.getWidget(n);null!=r&&e.push(r);return e}),[])};r.getWidgetConfig=function(e){return x[e]};r.getWidgetDefaultSettings=function(e){return z(e)};r.getWidgetType=function(e){var t=k[e];return null!=t?t.type:""};r.getRegisteredWidgets=function(){return x};r.getDefaultLayout=function(e){var t=[];i().forEach(this.getRegisteredWidgets(),(function(n,r){switch(n.layoutPolicy){case j.REQUIRED:case j.OPTIONAL_DEFAULT:t.push(D(U({},n.defaultSettings),{type:r,id:a().v4(),layoutId:e}))}}));return t};r.__getLocalVars=function(){return{OverlayWidgetLayoutPolicy:j,MIGRATION_KEY:V,layouts:H,widgets:k,widgetConfigs:x}};return n}(u.ZP.PersistedStore);q.displayName="LayoutStore";q.persistKey="LayoutStore";q.migrations=[function(){
var e=U({},s.Z.get("OverlayStore")),t=e.pinnedWidgets,n=e.positions,r=e.sizes;if(5===e.v&&t){var i=V,o=[],a=t.map((function(e){var t=null!=n?n[e]:null,a=null!=r?r[e]:null,u={id:e,layoutId:i,type:e,anchor:t||{top:-1,left:-1,bottom:null,right:null},size:a||{width:-1,height:-1},pinned:!0,zIndex:0};o.push([u.id,u]);return u.id}));return{layouts:[[i,{id:i,widgets:a}]],widgets:o}}return{layouts:[],widgets:[]}},function(e){var t=e.layouts,n=e.widgets,r=new Set(Object.keys(S.Odu)),i=Array.from(n).filter((function(e){var t=w(e,1)[0];return!r.has(t)})),o=Array.from(t).filter((function(e){return w(e,1)[0]!==V}));o.forEach((function(e){var t=w(e,2),n=t[0],r=t[1],o=null,u=null;r.widgets.find((function(e){var t=i.find((function(t){var r=w(t,2),i=r[0],o=r[1];return i===e&&o.layoutId===n}));if(null==t)return!1;null==u&&t[1].type===S.Odu.VOICE&&(u=t[0]);null==o&&t[1].type===S.Odu.TEXT&&(o=t[1].pinned);return null!=o&&null!=u||void 0}));if(!o&&null!=u){var s=a().v4();r.widgets=[u,s]
;i.push([s,D(U({},z(S.Odu.GUILDS_TEXT)),{type:S.Odu.GUILDS_TEXT,id:s,layoutId:n,zIndex:2})])}}));return{widgets:i,layouts:o}},function(e){var t=e.layouts,n=e.widgets,r=t.reduce((function(e,t){var n=w(t,2),r=n[0],i=n[1];e[r]=i;return e}),{}),i=n.reduce((function(e,t){var n=w(t,2),r=n[0],i=n[1];e[r]=i;return e}),{});return{layouts:r,widgets:i}}];const Q=new q(l.Z,{LAYOUT_CREATE:function(e){var t=e.layoutId,n=e.widgets,r=e.defaultResolution;if(null!=H[t])return!1;var i=[];n.forEach((function(e,t){var n=function(e){var t=H.migrated;if(null!=t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.widgets[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=k[u];if(null!=s&&s.type===e)return s}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}return null}(e.type),o=D(U({},e),{zIndex:t});""===o.id&&(o.id=a().v4());if(null!=n){o.pinned=n.pinned;-1!==n.anchor.left&&(o.anchor=(0,N.jL)(n.anchor,r));-1!==n.size.width&&(o.size=(0,N.Ox)(n.size,r))}
k=D(U({},k),b({},o.id,new A(o)));i.push(o.id)}));H=D(U({},H),b({},t,new p({id:t,widgets:i})))},LAYOUT_SET_PINNED:function(e){return W(e.widgetId,(function(e,t){!function(e){k=D(U({},k),b({},e.id,e.set("pinned",!e.pinned)))}(e)}))},LAYOUT_UPDATE_WIDGET:function(e){var t=e.widgetId,n=e.anchor,r=e.size;return W(t,(function(e,t){return function(e,t,n){k=D(U({},k),b({},e.id,e.merge({anchor:t,size:n})))}(e,n,r)}))},LAYOUT_SET_TOP_WIDGET:function(e){return W(e.widgetId,(function(e,t){return function(e,t){var n=function(e){var t=[];e.widgets.forEach((function(e){var n=k[e];null!=n&&t.push(n)}));return t}(e);n.sort((function(e,t){return e.zIndex-t.zIndex}));var r=n.findIndex((function(e){return e.id===t}));if(r===n.length-1)return!1;n.push(n.splice(r,1)[0]);for(var i=0;i<n.length;i++){K(n[i],i)}return!0}(t,e.id)}))},LAYOUT_DELETE_WIDGET:function(e){var t=e.widgetId;delete(k=U({},k))[t];i().forEach(H,(function(e,n){if(n!==V){var r=e.widgets.indexOf(t);if(r>=0){var i=Z(e.widgets);i.splice(r,1)
;H=D(U({},H),b({},n,e.set("widgets",i)))}}}))},LAYOUT_DELETE_ALL_WIDGETS:function(e){var t=e.layoutId,n=H[t];if(null==n)return!1;n.widgets.forEach((function(e){delete(k=U({},k))[e]}));H=D(U({},H),b({},n.id,n.set("widgets",[])))},LAYOUT_CREATE_WIDGETS:function(e){e.widgetConfigs.forEach((function(e){var t=new A(e),n=H[t.layoutId];if(null==n)throw new Error("LayoutStore - handleAddWidget: Invalid layoutId");t=t.set("zIndex",n.widgets.length);k=D(U({},k),b({},t.id,t));var r=Z(n.widgets).concat([t.id]);H=D(U({},H),b({},n.id,n.set("widgets",r)))}))}})},352980:(e,t,n)=>{n.d(t,{Z:()=>K});var r=n(496486),i=n.n(r),o=n(202351),a=n(744564),u=n(815678),s=n(769915),l=n(296602),c=n(331607),f=function(e){var t=e.type;return t!==c.h.AUTO_MODERATION_MESSAGE&&t!==c.h.AUTO_MODERATION_NOTIFICATION},d=n(861426),_=n(409479),h=n(649536),E=n(635012),p=(n(550131),n(384411)),g=n(661123),v=n(61209),I=n(953727),O=n(5544),m=n(21372),T=n(567403),y=n(682776),A=n(840922),N=n(715107),S=n(464187),C=n(473903),M=n(2590)
;function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e){U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return U(e)}function D(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){P=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return P(e,t)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}
}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments)
;return D(this,n)}}var j=new Set,F=new l.Z("MessageStore");function Y(){u.Z.forEach((function(e){u.Z.commit(e.mutate({ready:!1,loadingMore:!1}))}));j.clear()}function G(){u.Z.forEach((function(e){e.forAll((function(e){e.timestamp.locale(p.default.locale)}))}))}function H(){u.Z.forEach((function(e){var t=e.channelId;null==v.Z.getChannel(t)&&u.Z.clear(t)}))}function k(){u.Z.forEach((function(e){u.Z.commit(e.reset(e.map((function(e){return e.set("blocked",A.Z.isBlocked(e.author.id))}))))}))}function B(e){}function V(e){var t=e.type,n=e.channelId,r=e.messageId,i=e.userId,o=e.emoji,a=e.optimistic,s=e.burst,l=u.Z.get(n);if(null==l)return!1;var c=C.default.getCurrentUser(),f=null!=c&&c.id===i;if(a&&!f)return!1;l=l.update(r,(function(n){if("MESSAGE_REACTION_ADD"===t){var r=e.colors;return n.addReaction(o,f,i,r,s)}return n.removeReaction(o,f,s)}));u.Z.commit(l)}function x(e){var t=e.messageData,n=t.message,r=(0,s.hc)(t),i=n.channelId,o=u.Z.getOrCreate(i);if(!o.has(r))return!1
;o=o.update(r,(function(e){var t;(null===(t=e.embeds)||void 0===t?void 0:t.filter(f).length)>0&&(e=e.set("embeds",[]));return e=e.set("flags",(0,g.pj)(e.flags,M.iLy.EPHEMERAL))}));u.Z.commit(o)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&P(e,t)}(n,e);var t=Z(n);function n(){R(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(C.default,v.Z,I.Z,m.ZP,p.default,N.Z,S.Z,T.Z,A.Z,O.ZP);this.syncWith([d.Z],(function(){}))};r.getMessages=function(e){if(d.Z.hasViewingRoles()){var t=v.Z.getChannel(e),n=null==t?void 0:t.getGuildId();if(d.Z.isViewingRoles(n)&&!y.Z.can(M.Plq.VIEW_CHANNEL,t))return new u.Z(e)}return u.Z.getOrCreate(e)};r.getMessage=function(e,t){return u.Z.getOrCreate(e).get(t)};r.getLastEditableMessage=function(e){var t=C.default.getCurrentUser()
;return i()(this.getMessages(e).toArray()).reverse().find((function(e){return(0,E.Z)(e,null==t?void 0:t.id)}))};r.getLastCommandMessage=function(e){var t=C.default.getCurrentUser();return this.getMessages(e).toArray().reverse().find((function(e){return null!=e.interaction&&e.interaction.user.id===(null==t?void 0:t.id)}))};r.jumpedMessageId=function(e){var t=u.Z.get(e);return null==t?void 0:t.jumpTargetId};r.focusedMessageId=function(e){var t=u.Z.get(e);return null==t?void 0:t.focusTargetId};r.hasPresent=function(e){var t=u.Z.get(e);return null!=t&&t.ready&&t.hasPresent()};r.whenReady=function(e,t){this.addConditionalChangeListener((function(){if(u.Z.getOrCreate(e).ready){setImmediate(t);return!1}}))};r.isLoadingMessages=function(e){return u.Z.getOrCreate(e).loadingMore};r.hasCurrentUserSentMessage=function(e){var t=C.default.getCurrentUser();return null!=this.getMessages(e).findNewest((function(e){return e.author.id===(null==t?void 0:t.id)}))};r.__getLocalVars=function(){return{
uploadingMessageNonces:j,logger:F}};return n}(o.ZP.Store);W.displayName="MessageStore";const K=new W(a.Z,{BACKGROUND_SYNC_CHANNEL_MESSAGES:function(e){var t=e.changesByChannelId;for(var n in t){var r=u.Z.get(n);if(null!=r){r.cached||!0?r.mergeDelta(t[n].new_messages,t[n].modified_messages,t[n].deleted_message_ids):F.log("Skipping background message sync for ".concat(n," cached:").concat(r.cached," ")+"ready:".concat(r.ready," hasMoreAfter:").concat(r.hasMoreAfter," ")+"isConnected:".concat(false))}}},CONNECTION_OPEN:Y,OVERLAY_INITIALIZE:Y,CACHE_LOADED:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(e.messages)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=L(i.value,2),s=a[0],l=a[1],c=u.Z.getOrCreate(s).addCachedMessages(l,!0);u.Z.commit(c)}}catch(e){n=!0;r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},LOAD_MESSAGES:function(){return!0},LOAD_MESSAGES_SUCCESS:function(e){
var t=e.channelId,n=e.isBefore,r=e.isAfter,i=e.jump,o=e.hasMoreBefore,a=e.hasMoreAfter,s=e.messages,l=e.isStale,c=e.truncate,f=u.Z.getOrCreate(t);f=f.loadComplete({newMessages:s,isBefore:n,isAfter:r,jump:i,hasMoreBefore:o,hasMoreAfter:a,cached:l,hasFetched:!0});null==c||!n&&!r||n&&r||(f=f.truncate(n,r));u.Z.commit(f)},LOAD_MESSAGES_FAILURE:function(e){var t=e.channelId,n=u.Z.getOrCreate(t);u.Z.commit(n.mutate({loadingMore:!1,error:!0}))},LOAD_MESSAGES_SUCCESS_CACHED:function(e){var t=e.channelId,n=e.jump,r=e.focus,i=e.before,o=e.after,a=e.limit,s=e.truncate,l=u.Z.getOrCreate(t);(null==n?void 0:n.present)?l=l.jumpToPresent(a):null!=(null==r?void 0:r.messageId)?l=l.focusOnMessage(r.messageId):null!=(null==n?void 0:n.messageId)?l=l.jumpToMessage(n.messageId,n.flash,n.offset,n.returnMessageId,n.jumpType):null==i&&null==o||(l=l.loadFromCache(null!=i,a));null==s||null==i&&null==o||null!=i&&null!=o||(l=l.truncate(null!=i,null!=o));u.Z.commit(l)},LOCAL_MESSAGES_LOADED:function(e){
var t=u.Z.getOrCreate(e.channelId);!t.cached&&t.ready||u.Z.commit(t.addCachedMessages(e.messages,e.stale))},LOAD_MESSAGE_INTERACTION_DATA_SUCCESS:function(e){var t=e.messageId,n=e.channelId,r=u.Z.get(n);if(null==r||!r.has(t))return!1;r=r.update(t,(function(t){return t.set("interactionData",e.interactionData)}));u.Z.commit(r)},TRUNCATE_MESSAGES:function(e){var t=e.channelId,n=e.truncateBottom,r=e.truncateTop,i=u.Z.getOrCreate(t);i=i.truncate(n,r);u.Z.commit(i)},CLEAR_MESSAGES:function(e){var t=e.channelId;u.Z.clear(t);j.clear()},MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message,r=e.isPushNotification,i=u.Z.getOrCreate(t);if(r)u.Z.commit(i.receivePushNotification(n));else{if(!i.ready)return!1;if((0,_.Dn)()&&null!=n.nonce&&n.state!==M.yb.SENDING&&j.has(n.nonce)){i=i.remove(n.nonce);j.delete(n.nonce)}i=i.receiveMessage(n,I.Z.isAtBottom(t));u.Z.commit(i)}},MESSAGE_SEND_FAILED:function(e){var t=e.channelId,n=e.messageId,r=e.reason,i=u.Z.getOrCreate(t);if(null==i||!i.has(n))return!1
;i=i.update(n,(function(e){(e=e.set("state",M.yb.SEND_FAILED)).isCommandType()&&(e=(e=e.set("interactionError",null!=r?r:"")).set("flags",(0,g.pj)(e.flags,M.iLy.EPHEMERAL)));return e}));u.Z.commit(i)},MESSAGE_SEND_FAILED_AUTOMOD:x,MESSAGE_EDIT_FAILED_AUTOMOD:x,MESSAGE_UPDATE:function(e){var t=e.message.id,n=e.message.channel_id,r=u.Z.getOrCreate(n);if(null==r||!r.has(t))return!1;r=r.update(t,(function(t){return(0,h.wi)(t,e.message)}));u.Z.commit(r)},MESSAGE_DELETE:function(e){var t=e.id,n=e.channelId,r=u.Z.getOrCreate(n);if(null==r||!r.has(t))return!1;if(r.revealedMessageId===t){var i=r.getAfter(t);r=null!=i&&i.blocked?r.mutate({revealedMessageId:i.id}):r.mutate({revealedMessageId:null})}r=r.remove(t);u.Z.commit(r);j.delete(t)},MESSAGE_DELETE_BULK:function(e){var t=e.ids,n=e.channelId,r=u.Z.getOrCreate(n);if(null==r)return!1;var o=r.removeMany(t);if(r===o)return!1;if(null!=o.revealedMessageId&&i().some(t,(function(e){return o.revealedMessageId===e}))){
var a=o.getAfter(o.revealedMessageId);o=null!=a&&a.blocked?o.mutate({revealedMessageId:a.id}):o.mutate({revealedMessageId:null})}u.Z.commit(o);t.forEach((function(e){j.delete(e)}))},MESSAGE_REVEAL:function(e){var t=e.channelId,n=e.messageId,r=u.Z.getOrCreate(t);u.Z.commit(r.mutate({revealedMessageId:n}))},USER_SETTINGS_PROTO_UPDATE:G,I18N_LOAD_SUCCESS:G,THREAD_CREATE_LOCAL:function(e){var t=e.channelId,n=u.Z.getOrCreate(t);n=n.loadComplete({newMessages:[],hasMoreAfter:!1,hasMoreBefore:!1});u.Z.commit(n)},CHANNEL_DELETE:H,THREAD_DELETE:H,GUILD_DELETE:H,RELATIONSHIP_ADD:k,RELATIONSHIP_REMOVE:k,GUILD_MEMBERS_CHUNK:B,THREAD_MEMBER_LIST_UPDATE:B,MESSAGE_REACTION_ADD:V,MESSAGE_REACTION_REMOVE:V,MESSAGE_REACTION_REMOVE_ALL:function(e){var t=e.channelId,n=e.messageId,r=u.Z.get(t);if(null==r)return!1;r=r.update(n,(function(e){return e.set("reactions",[])}));u.Z.commit(r)},MESSAGE_REACTION_REMOVE_EMOJI:function(e){var t=e.channelId,n=e.messageId,r=e.emoji,i=u.Z.get(t);if(null==i)return!1
;i=i.update(n,(function(e){return e.removeReactionsForEmoji(r)}));u.Z.commit(i)},LOGOUT:function(){u.Z.forEach((function(e){u.Z.clear(e.channelId)}));j.clear()},UPLOAD_START:function(e){var t=e.message;null!=t.nonce&&j.add(t.nonce)},UPLOAD_FAIL:function(e){var t=e.channelId,n=e.messageRecord,r=null==n?void 0:n.nonce;if((0,_.Dn)()&&null!=r&&j.has(r)){var i=u.Z.getOrCreate(t),o=i.get(r);if(null==o)return;i=(i=i.remove(r)).merge([o]);j.delete(r);u.Z.commit(i)}}})},717091:(e,t,n)=>{n.d(t,{Ex:()=>Ye,ZP:()=>vt})
;var r=n(441143),i=n.n(r),o=n(730381),a=n.n(o),u=n(202351),s=n(281110),l=n(513328),c=n(165695),f=n(744564),d=n(396043),_=n(566706),h=n(747820),E=n(327566),p=n(296602),g=n(269300),v=n(839266),I=n(62277),O=n(996344),m=n(442658),T=n(48315),y=n(435949),A=n(858311),N=n(106673),S=n(202958),C=n(364269),M=n(536945),b=n(487685),R=n(113566),U=n(473419),D=n(382060),P=n(884755),L=n(53452),w=n(661123),Z=n(72580),j=n(387328),F=n(102921),Y=n(736818),G=n(804185),H=n(61209),k=n(953727),B=n(821229),V=n(837067),x=n(567403),W=n(595970),K=n(352980),z=n(682776),q=n(840922),Q=n(715107),J=n(9430),X=n(473903),$=n(901654),ee=n(2590),te=n(897196),ne=n(3155),re=n(736401),ie=n(290679);function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,i)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n)
;function a(e){ae(o,r,i,a,u,"next",e)}function u(e){ae(o,r,i,a,u,"throw",e)}a(void 0)}))}}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function ce(e){ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return ce(e)}function fe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e,t){de=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return de(e,t)}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{
for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ee=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function pe(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name)
;return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fe(this,n)}}var ve,Ie=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),
0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Oe=new p.Z("ReadStateStore");__OVERLAY__&&(ve=n(674482).Z);var me=function(){return!1},Te=ee.S7T.VIEW_CHANNEL|ee.S7T.READ_MESSAGE_HISTORY,ye=null,Ae=null,Ne=null,Se=!1,Ce=[],Me=!1,be=null,Re={},Ue=new Set,De=2592e6;function Pe(){return F.Z.fromTimestamp(Date.now()-De)}var Le=0,we=0,Ze=null;function je(){Le=Date.now()-6048e5;we=Date.now()-2592e5
;clearTimeout(Ze);Ze=setTimeout((function(){f.Z.dispatch({type:"DECAY_READ_STATES"})}),36e5)}function Fe(e){if(null==e)return 0;var t=Date.parse(e);return isNaN(t)?0:t}function Ye(e,t){var n=H.Z.getChannel(e.channel_id);return null!=n&&(!q.Z.isBlocked(e.author.id)&&(!!(0,y.ZP)({message:e,userId:t.id,suppressEveryone:J.Z.isSuppressEveryoneEnabled(n.guild_id),suppressRoles:J.Z.isSuppressRolesEnabled(n.guild_id)})||!!Ge(n)))}function Ge(e){return null!=e&&e.isPrivate()&&!J.Z.isGuildOrCategoryOrChannelMuted(e.guild_id,e.id)}function He(){return ke.apply(this,arguments)}function ke(){return(ke=ue((function(){var e;return Ie(this,(function(t){switch(t.label){case 0:if(0===Ce.length){Me=!1;return[2]}Me=!0;e=Ce.splice(0,100);return[4,Ve((function(){return s.Z.post({url:ee.ANM.BULK_ACK,body:{read_states:e},oldFormErrors:!0})}))];case 1:t.sent();return[4,(0,l.GR)(1e3)];case 2:t.sent();He();return[2]}}))}))).apply(this,arguments)}var Be;function Ve(e){return xe.apply(this,arguments)}
function xe(){return(xe=ue((function(e){var t,n,r;return Ie(this,(function(i){switch(i.label){case 0:t=Y.default.getId();n=0;i.label=1;case 1:if(!(n<3))return[3,9];i.label=2;case 2:i.trys.push([2,4,,8]);return[4,e()];case 3:return[2,i.sent()];case 4:r=i.sent();Oe.error("",r);return n+1<3?[4,(0,l.GR)(2e3*(n+1))]:[3,7];case 5:i.sent();return[4,j.Z.awaitOnline()];case 6:i.sent();if(t!==Y.default.getId())return[2,Promise.reject(new Error("User changed."))];i.label=7;case 7:return[3,8];case 8:n++;return[3,1];case 9:return[2]}}))}))).apply(this,arguments)}function We(e){if(e.type!==ie.W.CHANNEL)return!1;var t=H.Z.getChannel(e.channelId),n=null!=t&&t.isForumPost();if(W.Z.isIdle())return!1;if(!e.canTrackUnreads())return!1;if(!0!==(null==t?void 0:t.isForumLikeChannel())){var r=Re[e.channelId],i=null!=r&&$.Z.isFocused(r),o=null!=ve&&ve.isInstanceFocused()&&ve.isPinned(ee.Odu.TEXT);if(!i&&!o)return!1}if(n&&!e._persisted)return!0;if(!e.hasUnreadOrMentions())return!1
;if(!0===(null==t?void 0:t.isForumLikeChannel()))return!1;if(!(n&&!e._isJoinedThread)&&!k.Z.isAtBottom(e.channelId))return!1;var a=_.Z.getLayout(e.channelId),u=_.Z.getChatOpen(e.channelId);if(!u&&(a===ee.AEg.NO_CHAT||a===ee.AEg.FULL_SCREEN))return!1;if(null==Re[e.channelId])return!1;var s=K.Z.getMessages(e.channelId);if(null==s||!s.ready||s.loadingMore)return!1;0;return!0}!function(e){e[e.IS_GUILD_CHANNEL=1]="IS_GUILD_CHANNEL";e[e.IS_THREAD=2]="IS_THREAD"}(Be||(Be={}));var Ke=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;se(this,e);this.type=ie.W.CHANNEL;this.outgoingAckTimer=null;this.ackMessageIdAtChannelSelect=null;this.channelId=t;this.type=n;this._guildId=null;this._isThread=!1;this._isActiveThread=!1;this._isJoinedThread=!1;this._isResourceChannel=!1;this._persisted=!1;this.loadedMessages=!1;this._lastMessageId=null;this._lastMessageTimestamp=0;this._ackMessageId=null;this._ackMessageTimestamp=0;this.isManualAck=!1
;this.ackPinTimestamp=0;this.lastPinTimestamp=0;this._oldestUnreadMessageId=null;this.oldestUnreadMessageIdStale=!1;this.estimated=!1;this._unreadCount=0;this._mentionCount=0;this.outgoingAck=null}var t=e.prototype;t.serialize=function(e){var t=this,n=t.channelId,r=t.type,i=t._guildId,o=t._isThread,a=t._isActiveThread,u=t._isJoinedThread,s=t._persisted,l=t.loadedMessages,c=t._lastMessageId,f=t._lastMessageTimestamp,d=t._ackMessageId,_=t._ackMessageTimestamp,h=t.ackPinTimestamp,E=t.isManualAck,p=t.lastPinTimestamp,g=t._oldestUnreadMessageId,v=t.oldestUnreadMessageIdStale,I=t.estimated,O=t._mentionCount,m=t.flags,T=t.lastViewed;if(e)return{channelId:n,type:r,_guildId:i,_isThread:o,_isActiveThread:a,_isJoinedThread:u,_persisted:s,loadedMessages:l,_lastMessageId:c,_lastMessageTimestamp:f,_ackMessageId:d,_ackMessageTimestamp:_,ackPinTimestamp:h,isManualAck:E,lastPinTimestamp:p,_oldestUnreadMessageId:g,oldestUnreadMessageIdStale:v,estimated:I,_mentionCount:O,flags:m,lastViewed:T};var y={
channelId:n,type:r,_guildId:i,_persisted:s,_lastMessageId:c,_lastMessageTimestamp:f,_ackMessageId:d,_ackMessageTimestamp:_,ackPinTimestamp:h,lastPinTimestamp:p,_mentionCount:O,flags:m};null!=T&&T>0&&(y.lastViewed=T);if(o){y._isThread=o;y._isActiveThread=a;y._isJoinedThread=u}return y};t.deserializeForOverlay=function(t){var n=t.channelId,r=t.type,i=t._guildId,o=t._isThread,a=t._isActiveJoinedThread,u=t._isActiveThread,s=t._isJoinedThread,l=t._persisted,c=t.loadedMessages,f=t._lastMessageId,d=t._lastMessageTimestamp,_=t._ackMessageId,h=t._ackMessageTimestamp,E=t.ackPinTimestamp,p=t.isManualAck,g=t.lastPinTimestamp,v=t._oldestUnreadMessageId,I=t.oldestUnreadMessageIdStale,O=t.estimated,m=t._unreadCount,T=t._mentionCount,y=t.flags,A=t.lastViewed;this.channelId=n;this.type=null!=r?r:ie.W.CHANNEL;this._guildId=i;this._isThread=null!=o&&o;if(null!=a){this._isActiveThread=a;this._isJoinedThread=a}else{this._isActiveThread=null!=u&&u;this._isJoinedThread=null!=s&&s}this._persisted=!1!==l
;this.loadedMessages=null!=c&&c;this._lastMessageId=f;this._lastMessageTimestamp=d;this._ackMessageId=_;this._ackMessageTimestamp=h;this.ackPinTimestamp=E;this.isManualAck=null!=p&&p;this.lastPinTimestamp=g;this._oldestUnreadMessageId=v;this.oldestUnreadMessageIdStale=null!=I&&I;this.estimated=null!=O&&O;this._unreadCount=null!=m?m:0;this._mentionCount=T;this.flags=y;this.lastViewed=A;e._mentionChannels.delete(this.channelId);this._mentionCount>0&&this.canHaveMentions()&&e._mentionChannels.add(this.channelId)};t.incrementGuildUnreadsSentinel=function(){null!=this._guildId&&e.getGuildSentinels(this._guildId).unreadsSentinel++};t.guessAckMessageId=function(){var e=K.Z.getMessages(this.channelId);if(null!=this.ackMessageId||!this.isPrivate()||e.hasMoreAfter)return this.ackMessageId;if(!this.hasMentions())return this.lastMessageId;var t=null,n=this.mentionCount,r=X.default.getCurrentUser();e.forEach((function(e){if(n>0&&e.author.id!==(null==r?void 0:r.id))--n;else if(0===n){t=e.id;return!1
}}),this,!0);return t};t.isPrivate=function(){if(this.type!==ie.W.CHANNEL)return!1;var e=H.Z.getChannel(this.channelId);return null!=e&&e.isPrivate()};t.rebuildChannelState=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=this;this.ackMessageId=null!==(t=null!=e?e:this._ackMessageId)&&void 0!==t?t:this.guessAckMessageId();this.isManualAck=null!=e;this.oldestUnreadMessageId=null;this.estimated=!1;this.unreadCount=0;n&&(this.mentionCount=0);if(this.hasUnread()){var o,a=X.default.getCurrentUser(),u=this.getAckTimestamp(),s=!1,l=!1,c=null,f=K.Z.getMessages(this.channelId);f.forAll((function(e){if(s){var t;i.oldestUnreadMessageId=null!==(t=i._oldestUnreadMessageId)&&void 0!==t?t:e.id}else s=e.id===i._ackMessageId;if(F.Z.extractTimestamp(e.id)>u){i.unreadCount++;n&&Ye(e,a)&&i.mentionCount++;c=null!=c?c:e.id}else l=!0}));this.estimated=!f.hasPresent()||!(s||l)&&f.length===this.unreadCount
;this.oldestUnreadMessageId=null!==(o=this._oldestUnreadMessageId)&&void 0!==o?o:c}null!=r&&(this.mentionCount=r)};t.handleGuildEventRemoval=function(e,t){if(!(F.Z.compare(this.ackMessageId,t)>=0)){var n=g.ZP.getGuildScheduledEventsForGuild(e),r=this.getAckTimestamp();if(!isNaN(r)){var i,o=null!==(i=this._ackMessageId)&&void 0!==i?i:F.Z.fromTimestamp(r),a=null,u=0;n.forEach((function(e){if((0,g.Ld)(e)){F.Z.compare(e.id,a)>0&&(a=e.id);F.Z.compare(e.id,o)>0&&u++}}));this.lastMessageId=a;this.mentionCount=u}}};t.canTrackUnreads=function(){if(this.type!==ie.W.CHANNEL)return!0;if(this._isThread&&!this._isActiveThread)return!1;if(this._isResourceChannel)return!1;var e=H.Z.getBasicChannel(this.channelId);return null!=e&&("basicPermissions"in e?P.Z.has(e.basicPermissions,ee.S7T.VIEW_CHANNEL):!h.Z.isChannelGated(this.guildId,this.channelId)||z.Z.can(ee.Plq.VIEW_CHANNEL,e))};t.canBeUnread=function(){if(this._isThread&&!this._isJoinedThread)return!1;if((0,m.h3)(this.channelId,[O.Z,T.Z]))return!1
;if(!this._isThread&&(0,C.r1)(this._guildId)){if(this._lastMessageTimestamp<Le)return!1;if(!J.Z.isChannelOrParentOptedIn(this._guildId,this.channelId)&&!this.hasRecentlyVisitedAndRead()&&!this.hasMentions())return!1}return this.canTrackUnreads()};t.canHaveMentions=function(){return 0!==this.mentionCount&&(!(this._isThread&&!this._isJoinedThread)&&(!(0,m.h3)(this.channelId,[O.Z,T.Z])&&(!((0,C.r1)(this._guildId)&&this._lastMessageTimestamp<Le)&&this.canTrackUnreads())))};t.getGuildChannelUnreadState=function(e,t,n,r,i,o){if(t){if(this._lastMessageTimestamp<Le)return{mentionCount:0,hasNotableUnread:!1};if(!J.Z.isChannelRecordOrParentOptedIn(e)&&!this.hasRecentlyVisitedAndRead()&&this.mentionCount<=0)return{mentionCount:0,hasNotableUnread:!1}}if("basicPermissions"in e){if(!P.Z.has(e.basicPermissions,ee.S7T.VIEW_CHANNEL))return{mentionCount:0,hasNotableUnread:!1}}else if(h.Z.isChannelGated(this.guildId,this.channelId)&&!z.Z.can(ee.Plq.VIEW_CHANNEL,e))return{mentionCount:0,
hasNotableUnread:!1};if(i||o)return{mentionCount:this.mentionCount,hasNotableUnread:!1};var a=(0,v.LS)({isExperimentEnabled:n,hasUserEnabledGuildUnreads:J.Z.isGuildUnreadSettingEnabled(e.guild_id),channelNotificationOverrides:r[e.id],categoryNotificationOverrides:null==e.parent_id?null:r[e.parent_id],unreadSetting:J.Z.getChannelUnreadSetting(e.guild_id,e.id),hasJoinedThread:b.Z.hasJoined(e.id)}),u=!1;u=a===re.N.NULL||a===re.N.MENTIONS_AND_HIGHLIGHTS?this.mentionCount>0||(0,E.Do)(this.channelId,this._ackMessageId):this.getAckTimestamp()<this._lastMessageTimestamp;return{mentionCount:this.mentionCount,hasNotableUnread:u}};t.hasUnread=function(){return this.getAckTimestamp()<this._lastMessageTimestamp};t.hasNotableUnread=function(){var e=H.Z.getBasicChannel(this.channelId),t=null!=e?(0,v.j$)(e):re.N.ALL_MESSAGES;return t===re.N.NULL||t===re.N.MENTIONS_AND_HIGHLIGHTS?(0,E.HK)(this.channelId,this._ackMessageId).length>0||this.hasMentions():this.getAckTimestamp()<this._lastMessageTimestamp}
;t.hasRecentlyVisitedAndRead=function(){return this._lastMessageTimestamp>0&&null!=this._ackMessageId&&this.getAckTimestamp()>we&&U.Z.getGuildRecentsDismissedAt(this._guildId)<this.getAckTimestamp()};t.isForumPostUnread=function(){return!!this._isActiveThread&&this.hasUnread()};t.hasMentions=function(){return this.getMentionCount()>0};t.getMentionCount=function(){return this.mentionCount};t.hasUnreadOrMentions=function(){return this.hasMentions()||this.hasUnread()};t.ackPins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;if(this.type!==ie.W.CHANNEL)return!1;if(!this.canTrackUnreads())return!1;if(null==e){if(this.lastPinTimestamp===this.ackPinTimestamp)return!1;this._persisted=!0;Ve((function(){return s.Z.post({url:ee.ANM.PINS_ACK(t.channelId),oldFormErrors:!0})}))}var n=Fe(e);this.ackPinTimestamp=0!==n?n:this.lastPinTimestamp;return!0};t.ack=function(e){
var t=e.messageId,n=e.local,r=void 0!==n&&n,i=e.immediate,o=void 0!==i&&i,a=e.force,u=void 0!==a&&a,s=e.isExplicitUserAction,l=void 0!==s&&s,c=e.location,f=void 0===c?{section:ee.jXE.CHANNEL}:c,d=this;if(!this._shouldAck(u,r,l))return!1;if(!u&&!this.canTrackUnreads())return!1;var _=this.hasMentions();this.estimated=!1;this.unreadCount=0;this.mentionCount=0;if(null==t&&null==(t=this.lastMessageId))return!1;this.ackMessageId=t;this.isManualAck=!1;this._persisted=!0;nt(this.channelId);if(r)this.oldestUnreadMessageId=null;else{null==this.outgoingAck&&(this.outgoingAckTimer=setTimeout((function(){d.type===ie.W.CHANNEL?d._ack(f):d._nonChannelAck();d.outgoingAck=null;d.outgoingAckTimer=null}),_||o?0:3e3));this.outgoingAck=t}return!0};t.clearOutgoingAck=function(){this.outgoingAck=null;if(null!=this.outgoingAckTimer){clearTimeout(this.outgoingAckTimer);this.outgoingAckTimer=null}};t._shouldAck=function(e,t,n){var r
;return!!e||(!!n||(!!t||!this.isManualAck&&!(this.type===ie.W.CHANNEL&&!this.loadedMessages&&!(null===(r=H.Z.getChannel(this.channelId))||void 0===r?void 0:r.isForumLikeChannel()))))};t._ack=function(e){var t=this,n=this.outgoingAck;if(null!=n){var r=Y.default.getId(),i=Ne;this._persisted=!0;var o=this.recalculateFlags(),a=o===this.flags?void 0:o;Ve((function(){return s.Z.post({url:ee.ANM.MESSAGE_ACK(t.channelId,n),body:{token:Ne,last_viewed:t.lastViewed,flags:a},oldFormErrors:!0})})).then((function(n){if(null!=n){Ne===i&&r===Y.default.getId()&&(Ne=n.body.token);var o=H.Z.getChannel(t.channelId);(0,d.yw)(ee.rMx.ACK_MESSAGES,{channel_id:t.channelId,guild_id:null==o?void 0:o.getGuildId(),location:e})}}))}};t.recalculateFlags=function(){if(this.type===ie.W.CHANNEL){var e=H.Z.getChannel(this.channelId);if(null!=e)return e.isThread()?Be.IS_THREAD:null!=e.guild_id?Be.IS_GUILD_CHANNEL:0}};t._nonChannelAck=function(){var e=this,t=e.outgoingAck,n=e.channelId,r=e.type;if(null!=t){var i
;switch(r){case ie.W.GUILD_HOME:case ie.W.GUILD_EVENT:case ie.W.GUILD_ONBOARDING_QUESTION:i=ee.ANM.GUILD_FEATURE_ACK(n,t,r);break;case ie.W.NOTIFICATION_CENTER:i=ee.ANM.USER_NON_CHANNEL_ACK(t,r);break;default:return}this._persisted=!0;Ve((function(){return s.Z.post({url:i,body:{},oldFormErrors:!0})}))}};t.delete=function(){var t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=H.Z.getBasicChannel(this.channelId);Oe.log("Deleting ReadState",this.channelId,this.type,{remote:n,persisted:this._persisted,channelMissing:null==r,isOld:et(this,Pe()),validType:null!=r&&D.AW.has(r.type),readableType:null!=r&&(0,D.Em)(r.type),oldThreadCutoff:Pe(),mentionCount:this.mentionCount,channelId:this.channelId,ackMessageId:this._ackMessageId,lastMessageId:this._lastMessageId});n&&this._persisted&&s.Z.delete({url:ee.ANM.CHANNEL_ACK(this.channelId),body:{version:2,read_state_type:this.type},oldFormErrors:!0});null===(t=e._readStates[this.type])||void 0===t||delete t[this.channelId]
;e._mentionChannels.delete(this.channelId)};t.shouldDeleteReadState=function(e){if(0!==V.Z.totalUnavailableGuilds)return!1;if(null!=this.type&&this.type!==ie.W.CHANNEL)return!function(e){switch(e.type){case ie.W.GUILD_HOME:case ie.W.GUILD_EVENT:case ie.W.GUILD_ONBOARDING_QUESTION:return null!=x.Z.getGuild(e.channelId);case ie.W.NOTIFICATION_CENTER:var t;return(null===(t=X.default.getCurrentUser())||void 0===t?void 0:t.id)===e.channelId;default:return!0}}(this);var t=H.Z.getBasicChannel(this.channelId);return null==t?!!et(this,e):!!D.AW.has(t.type)&&(!(0,D.Em)(t.type)||!(0,D.hv)(t.type)&&(!(!D.Ec.has(t.type)||!function(e,t,n){var r=e.guildId;return(null==r||!M.Z.isActive(r,t.parent_id,e.channelId))&&et(e,n)}(this,t,e))||this.mentionCount>0&&!z.Z.canBasicChannel(Te,t)))};t.getAckTimestamp=function(){if(0!==this._ackMessageTimestamp)return this._ackMessageTimestamp;if(this._isThread){this._ackMessageTimestamp=Xe(this.guildId,this.channelId)
;this._ackMessageId=F.Z.fromTimestamp(this._ackMessageTimestamp);return this._ackMessageTimestamp}var e,t;if(this.type===ie.W.GUILD_EVENT||this.type===ie.W.GUILD_ONBOARDING_QUESTION)e=x.Z.getGuild(this.channelId);else if((0,te.AB)(this.channelId))e=x.Z.getGuild(this.guildId);else{var n=H.Z.getChannel(this.channelId);if(null!=n){var r=n.getGuildId();e=x.Z.getGuild(r)}}t=null!=e?$e(e):F.Z.extractTimestamp(this.channelId);this._ackMessageTimestamp=t;return t};t.syncThreadSettings=function(){this._isThread=!0;var e=H.Z.getChannel(this.channelId);if(null==e){Oe.warn("syncThreadSettings called with channel not in memory ".concat(this.channelId));return!1}var t=this.guildId,n=null!=t&&M.Z.isActive(t,e.parent_id,this.channelId),r=b.Z.hasJoined(this.channelId);if(this._isActiveThread===n&&this._isJoinedThread===r)return!1;this._isActiveThread=n;this._isJoinedThread=r;return!0};t.recordLastViewedTime=function(){var e=Math.ceil((Date.now()-F.c)/L.Z.Millis.DAY);if(e!==this.lastViewed){
this.lastViewed=e;this.canTrackUnreads()&&!this.hasUnread()&&this.ack({force:!0})}};e.forEach=function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e._readStates)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u,s=o.value,l=null!==(u=e._readStates[parseInt(s)])&&void 0!==u?u:{},c=!0,f=!1,d=void 0;try{for(var _,h=Object.keys(l)[Symbol.iterator]();!(c=(_=h.next()).done);c=!0){if(!1===t(l[_.value]))break}}catch(e){f=!0;d=e}finally{try{c||null==h.return||h.return()}finally{if(f)throw d}}}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}};e.get=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL,i=null===(n=e._readStates[r])||void 0===n?void 0:n[t];if(null==i){i=new e(t,r);null==e._readStates[r]&&(e._readStates[r]={});e._readStates[r][t]=i}return i};e.getGuildSentinels=function(e){null==this._guildReadStateSentinels[e]&&(this._guildReadStateSentinels[e]={unreadsSentinel:0})
;return this._guildReadStateSentinels[e]};e.resetGuildSentinels=function(){this._guildReadStateSentinels={}};e.getIfExists=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return null===(n=e._readStates[r])||void 0===n?void 0:n[t]};e.getMentionChannelIds=function(){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e._mentionChannels[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=e.getIfExists(u);null!=s&&s.canHaveMentions()?t.push(u):e._mentionChannels.delete(u)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};e.getValue=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=null===(n=e._readStates[r])||void 0===n?void 0:n[t];return null==a?o:i(a)};e.clear=function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL
;if(null!=(null===(n=e._readStates[r])||void 0===n?void 0:n[t])){delete e._readStates[r][t];e._mentionChannels.delete(t);return!0}return!1};e.clearAll=function(){e._readStates={};e._mentionChannels.clear()};!function(e,t,n){t&&le(e.prototype,t);n&&le(e,n)}(e,[{key:"oldestUnreadMessageId",get:function(){return this._oldestUnreadMessageId},set:function(e){this._oldestUnreadMessageId=e;this.oldestUnreadMessageIdStale=!1}},{key:"lastMessageId",get:function(){return this._lastMessageId},set:function(e){this._lastMessageId=e;this._lastMessageTimestamp=null!=e?F.Z.extractTimestamp(e):0}},{key:"lastMessageTimestamp",get:function(){return this._lastMessageTimestamp}},{key:"ackMessageId",get:function(){return this._ackMessageId},set:function(e){this._ackMessageId=e;this._ackMessageTimestamp=null!=e?F.Z.extractTimestamp(e):0}},{key:"unreadCount",get:function(){var e;return null!==(e=this._unreadCount)&&void 0!==e?e:0},set:function(e){
void 0!==this._unreadCount&&0!==this._unreadCount&&0!==e||this.incrementGuildUnreadsSentinel();this._unreadCount=e}},{key:"mentionCount",get:function(){return this._mentionCount},set:function(t){0!==this._mentionCount&&0!==t||this._mentionCount===t||this.incrementGuildUnreadsSentinel();this._mentionCount=t;e._mentionChannels.delete(this.channelId);this._mentionCount>0&&this.canHaveMentions()&&e._mentionChannels.add(this.channelId)}},{key:"guildId",get:function(){if(null!=this._guildId)return this._guildId;var e=H.Z.getChannel(this.channelId);return this._guildId=null!=e?e.getGuildId():null}},{key:"oldestUnreadTimestamp",get:function(){return null!=this.oldestUnreadMessageId?F.Z.extractTimestamp(this.oldestUnreadMessageId):0}}]);return e}();Ke._guildReadStateSentinels={};Ke._readStates={};Ke._mentionChannels=new Set;function ze(e){e.forEach((function(e){if((0,D.Em)(e.type)){var t=Ke.get(e.id);t._guildId=e.guild_id;t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Fe(e.lastPinTimestamp)
;t._isResourceChannel=e.hasFlag(te.zZ.IS_GUILD_RESOURCE_CHANNEL);D.Ec.has(e.type)&&t.syncThreadSettings()}}))}function qe(e){e.forEach((function(e){if((0,D.Em)(e.type)){var t,n=Ke.get(e.id);n.lastMessageId=e.last_message_id;n.lastPinTimestamp=Fe(e.last_pin_timestamp);n._isResourceChannel=(0,w.yE)(null!==(t=e.flags)&&void 0!==t?t:0,te.zZ.IS_GUILD_RESOURCE_CHANNEL);D.Ec.has(e.type)&&n.syncThreadSettings()}}))}function Qe(e){!function(e){var t;null===(t=e.threads)||void 0===t||t.forEach((function(t){if(D.AW.has(t.type)){var n=Ke.get(t.id);n.lastMessageId=t.lastMessageId;n.lastPinTimestamp=Fe(t.lastPinTimestamp);n._isThread=!0;n._isActiveThread=!0;n._isJoinedThread=null!=t.member;null==n.ackMessageId&&(n.ackMessageId=F.Z.fromTimestamp(Xe(e.id,t.id)));null==n.ackPinTimestamp&&(n.ackPinTimestamp=Xe(e.id,t.id))}}))}(e);!function(e){var t;if(0===(null===(t=e.guild_scheduled_events)||void 0===t?void 0:t.length)&&null==Ke.getIfExists(e.id,ie.W.GUILD_EVENT))return
;var n=Ke.get(e.id,ie.W.GUILD_EVENT);n._guildId=e.id;var r,i=0,o=null,a=null!==(r=n._ackMessageId)&&void 0!==r?r:F.Z.fromTimestamp(n.getAckTimestamp());e.guild_scheduled_events.forEach((function(e){F.Z.compare(e.id,o)>0&&(o=e.id);F.Z.compare(e.id,a)>0&&i++}));n.lastMessageId=o;n.mentionCount=i}(e);!function(e){var t=24;Ke.get(e.id,ie.W.GUILD_HOME).lastMessageId=F.Z.fromTimestamp(a()(Date.now()).subtract(t,"h").valueOf())}(e);!function(e){var t=e.properties.latest_onboarding_question_id;if(null==t)return;var n=Ke.get(e.id,ie.W.GUILD_ONBOARDING_QUESTION);n._guildId=e.id;n.lastMessageId=t}(e)}function Je(e){!function(e){var t=X.default.getCurrentUser();if(!(0,N.$N)())return!1;if(null==t)return!1;var n=Ke.get(t.id,ie.W.NOTIFICATION_CENTER);e.forEach((function(e){if(null!=e.since&&e.type===ee.OGo.PENDING_INCOMING){var t=new Date(e.since).getTime();if((null!=n.ackMessageId?F.Z.extractTimestamp(n.ackMessageId):0)<t){n.mentionCount++;n.lastMessageId=F.Z.fromTimestamp(t)}}}))}(e)}
function Xe(e,t){var n,r,i,o=H.Z.getChannel(t),a=x.Z.getGuild(null!=e?e:null==o?void 0:o.guild_id),u=(null==o?void 0:o.isForumPost())?0:$e(a),s=(null!==(i=null===(n=b.Z.joinTimestamp(t))||void 0===n?void 0:n.getTime())&&void 0!==i?i:0)-5e3,l=null==o||null===(r=o.threadMetadata)||void 0===r?void 0:r.archiveTimestamp,c=null!=l?new Date(l).getTime()-1:0,f=Math.max(s,c);f<=0&&(f=F.Z.extractTimestamp(t)-1);return isNaN(u)?f:Math.max(u,f)}function $e(e){if(null!=e&&null!=e.joinedAt){if(e.joinedAt instanceof Date)return e.joinedAt.getTime();if("string"==typeof e.joinedAt)return new Date(e.joinedAt).getTime();if("number"==typeof e.joinedAt&&!isNaN(e.joinedAt))return e.joinedAt}return Date.now()}function et(e,t){return e.mentionCount>0||!(F.Z.compare(e.channelId,t)>0)&&(!(null!=e._ackMessageId&&F.Z.compare(e._ackMessageId,t)>0)&&!(null!=e._lastMessageId&&F.Z.compare(e._lastMessageId,t)>0))}function tt(e){if(null!=e){var t=Ke.get(e);if(We(t))return t.ack({})}return!1}function nt(e){if(null!=e){
var t=Ke.get(e);if(t.type===ie.W.CHANNEL){var n=H.Z.getChannel(t.channelId);if(null!=n&&n.isForumPost()&&null!=n.parent_id){var r=n.parent_id,i=Ke.get(r);M.Z.hasLoaded(n.guild_id)&&Object.keys(M.Z.getThreadsForParent(n.guild_id,r)).every((function(e){return gt.hasOpenedThread(e)||F.Z.compare(e,i.ackMessageId)<0}))&&i.ack({})}}}}function rt(){null!=be&&clearTimeout(be)}function it(e){if(null!=e.channelUpdates){var t;ze(null===(t=e.channelUpdates)||void 0===t?void 0:t.writes)}if(null!=e.channelTimestampUpdates){var n=!0,r=!1,i=void 0;try{for(var o,a=e.channelTimestampUpdates[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,s=Ke.get(u.id);null!=u.last_message_id&&(s.lastMessageId=u.last_message_id);null!=u.last_pin_timestamp&&(s.lastPinTimestamp=Fe(u.last_pin_timestamp))}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}function ot(e){var t=e.channelId;Ke.get(t).rebuildChannelState()}function at(e){qe(e.threads)}function ut(e){
var t=X.default.getCurrentUser();return null!=e.creator_id&&null!=t&&e.creator_id===t.id}function st(e){var t=e.channel;return Ke.clear(t.id)}function lt(){var e=G.ZP.getCurrentSidebarChannelId(ye),t=!1;if(Ae!==e){t=ft(Ae);Ae=e}else t=tt(e)||t;return t}function ct(e){if(null!=e){Ke.get(e).isManualAck=!1}}function ft(e){if(null==e)return!1;var t=Ke.get(e);if(!t.hasUnread()){t.oldestUnreadMessageId=null;return!0}return!1}function dt(e,t){if(null==e)return!1;var n=Ke.get(e);t||n.hasUnread()||(n.oldestUnreadMessageIdStale=!0);return tt(e)}function _t(e){var t=e.channelId,n=e.messageId,r=e.manual,i=e.newMentionCount,o=Ke.get(t);if(r){o.rebuildChannelState(n,!0,i);return!0}return n!==o._ackMessageId&&o.ack({messageId:n,local:!0})}function ht(e){return Et(e.id,e.ackType,e.ackedId,e.local)}function Et(e,t,n,r){var i,o=Ke.get(e,t);if(n===o.ackMessageId||o.lastMessageId===o.ackMessageId)return!1;if(null==o.lastMessageId&&0===o.mentionCount)return!1
;n=null!==(i=null!=n?n:o.lastMessageId)&&void 0!==i?i:F.Z.fromTimestamp(o.getAckTimestamp());return o.ack({messageId:n,local:null==r||r})}var pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&de(e,t)}(n,e);var t=ge(n);function n(){se(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(k.Z,X.default,x.Z,V.Z,H.Z,Q.Z,K.Z,z.Z,_.Z,M.Z,b.Z,G.ZP,g.ZP,B.Z,h.Z,J.Z,$.Z,A.Z,O.Z,U.Z,T.Z);this.syncWith([G.ZP],lt)};r.getReadStatesByChannel=function(){var e;return null!==(e=Ke._readStates[ie.W.CHANNEL])&&void 0!==e?e:{}};r.getForDebugging=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getIfExists(e,t)};r.getNotifCenterReadState=function(e){return Ke._readStates[ie.W.NOTIFICATION_CENTER][e]};r.hasUnread=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canBeUnread()&&e.hasUnread()}),!1)};r.hasNotableUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canBeUnread()&&e.hasNotableUnread()}),!1)};r.hasTrackedUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canTrackUnreads()&&e.hasUnread()}),!1)};r.isForumPostUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.isForumPostUnread()}),!1)};r.hasRelevantUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return this.hasNotableUnread(e.id,t)&&J.Z.isChannelRelevant(e)};r.getUnreadCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL
;return Ke.getValue(e,t,(function(e){return e.canBeUnread()?e.unreadCount:0}),0)};r.getMentionCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canHaveMentions()?e.getMentionCount():0}),0)};r.getGuildChannelUnreadState=function(e,t,n,r,i,o){return Ke.getValue(e.id,ie.W.CHANNEL,(function(a){return a.getGuildChannelUnreadState(e,t,n,r,i,o)}),{mentionCount:0,hasNotableUnread:!1})};r.hasRecentlyVisitedAndRead=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.hasRecentlyVisitedAndRead()}),!1)};r.ackMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canBeUnread()?e.ackMessageId:null}),null)};r.getTrackedAckMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){
return e.canTrackUnreads()?e._ackMessageId:null}),null)};r.lastMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.lastMessageId}),null)};r.lastMessageTimestamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.lastMessageTimestamp}),0)};r.lastPinTimestamp=function(e){return Ke.getValue(e,ie.W.CHANNEL,(function(e){return e.lastPinTimestamp}),null)};r.getOldestUnreadMessageId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canTrackUnreads()?e.oldestUnreadMessageId:null}),null)};r.getOldestUnreadTimestamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.canTrackUnreads()?e.oldestUnreadTimestamp:0}),0)};r.isEstimated=function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e.estimated}),!1)};r.hasOpenedThread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie.W.CHANNEL;return Ke.getValue(e,t,(function(e){return e._persisted}),!1)};r.hasUnreadPins=function(e){return Ke.getValue(e,ie.W.CHANNEL,(function(e){return e.canBeUnread()&&e.lastPinTimestamp>e.ackPinTimestamp}),!1)};r.isNewForumThread=function(e,t,n){var r=Ke.get(t);if(!0===Ke.get(e)._persisted||null==r.ackMessageIdAtChannelSelect||F.Z.compare(e,r.ackMessageIdAtChannelSelect)<=0)return!1;var i=$e(n);return F.Z.extractTimestamp(e)>i};r.getAllReadStates=function(e){var t=[];Ke.forEach((function(n){switch(n.type){case ie.W.GUILD_HOME:case ie.W.GUILD_EVENT:case ie.W.GUILD_ONBOARDING_QUESTION:null!=x.Z.getGuild(n.channelId)&&t.push(n.serialize(e));break;case ie.W.NOTIFICATION_CENTER:var r
;(null===(r=X.default.getCurrentUser())||void 0===r?void 0:r.id)===n.channelId&&t.push(n.serialize(e));break;default:t.push(n.serialize(e))}}));return t};r.getGuildUnreadsSentinel=function(e){return Ke.getGuildSentinels(e).unreadsSentinel};r.getMentionChannelIds=function(){return Ke.getMentionChannelIds()};r.__getLocalVars=function(){return{logger:Oe,READ_STATE_PROTOCOL_VERSION:2,OverlayStore:ve,isDrawerOpen:me,CAN_READ_HISTORY_PERMISSIONS:Te,BULK_ACK_CHUNK_SIZE:100,BULK_ACK_REQ_PER_SEC:1,currentChannelId:ye,currentSidebarChannelId:Ae,ackToken:Ne,hasCache:Se,bulkAckQueue:Ce,processingBulkAcks:Me,deleteOldReadStatesTimer:be,autoAckableChannelWindowIds:Re,mobileAutoAckDisabledChannelIds:Ue,OLD_THREAD_CUTOFF_MS:De,decayedReadStateCutoff:Le,channelVisitAndReadCutoff:we,decayedReadStateTimer:Ze,MAX_RETRIES:3,ReadStateFlags:Be,instance:gt}};return n}(u.ZP.Store);pt.displayName="ReadStateStore";var gt=new pt(f.Z,{CONNECTION_OPEN:function(e){
var t,n=e.guilds,r=e.relationships,i=e.initialPrivateChannels,o=e.readState;je();Ne=null;Se||o.partial||Ke.clearAll();Se=!1;o.entries.forEach((function(e){var t,n=null!==(t=e.read_state_type)&&void 0!==t?t:ie.W.CHANNEL;n!==ie.W.CHANNEL&&(e=function(e){return{id:e.id,read_state_type:e.read_state_type,mention_count:e.badge_count,last_message_id:e.last_acked_id}}(e));var r,i=Ke.get(e.id,n);i._persisted=!0;i._mentionCount=null!==(r=e.mention_count)&&void 0!==r?r:0;i.flags=e.flags;i.lastViewed=e.last_viewed;var o=H.Z.getBasicChannel(e.id);null==o||!(0,D.Q5)(o.type)||null!=e.last_message_id&&0!==e.last_message_id?i.ackMessageId=e.last_message_id:i.ackMessageId=F.Z.fromTimestamp(Xe(o.guild_id,o.id));i.ackPinTimestamp=Fe(e.last_pin_timestamp);Ke._mentionChannels.delete(i.channelId);i._mentionCount>0&&i.canHaveMentions()&&Ke._mentionChannels.add(i.channelId)}));Ke.resetGuildSentinels();var a=null===(t=X.default.getCurrentUser())||void 0===t?void 0:t.id;if(null!=a){
Ke.get(a,ie.W.NOTIFICATION_CENTER).lastMessageId=F.Z.fromTimestamp(Date.now())}Je(r);ze(i);var u=!0,s=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var d,_=c.value;ze(null!==(d=_.channels)&&void 0!==d?d:[]);it(_);Qe(_)}}catch(e){s=!0;l=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw l}}rt();be=setTimeout((function(){return function(e){var t=Pe(),n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u,s=o.value,l=null!==(u=s.read_state_type)&&void 0!==u?u:ie.W.CHANNEL,c=Ke.get(s.id,l);c.shouldDeleteReadState(t)&&c.delete()}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}(o.entries)}),1e4)},CONNECTION_OPEN_SUPPLEMENTAL:function(e){ze(e.lazyPrivateChannels)},LOGOUT:rt,OVERLAY_INITIALIZE:function(e){var t=e.readStates,n=e.selectedChannelId;je();Ne=null;ye=n;Ae=G.ZP.getCurrentSidebarChannelId(ye);Ke.clearAll();t.forEach((function(e){var t=Ke.get(e.channelId)
;t.deserializeForOverlay(e);t.type===ie.W.CHANNEL&&t.rebuildChannelState()}))},CACHE_LOADED:function(e){var t=e.readStates;Se=!0;je();t.forEach((function(e){var t,n=null!==(t=e.type)&&void 0!==t?t:ie.W.CHANNEL;e.type=n;null==Ke._readStates[n]&&(Ke._readStates[n]={});Ke._readStates[n][e.channelId]=(0,c.gh)(e,Ke)}))},GUILD_CREATE:function(e){var t,n=e.guild,r=Pe();Ke.forEach((function(e){e.guildId===n.id&&e.shouldDeleteReadState(r)&&e.delete(!1)}));ze(null!==(t=n.channels)&&void 0!==t?t:[]);it(n);Qe(n)},LOAD_MESSAGES_SUCCESS:function(e){var t=e.channelId,n=e.isAfter,r=e.messages,i=Ke.get(t);i.loadedMessages=!0;var o=K.Z.getMessages(t);if(null!=o)if(r.length>0&&1===F.Z.compare(r[0].id,i.ackMessageId)&&0===i.unreadCount)i.rebuildChannelState();else if(o.hasPresent()||o.jumpTargetId===i.ackMessageId)i.rebuildChannelState();else if(n&&null!=i.ackMessageId&&o.has(i.ackMessageId,!0)){i.unreadCount+=r.length;null==i.oldestUnreadMessageId&&i.rebuildChannelState()}qe(r.map((function(e){
return e.thread})).filter(Z.lm))},MESSAGE_CREATE:function(e){var t=e.channelId,n=e.message,r=e.isPushNotification,i=Ke.get(t);i.lastMessageId=n.id;var o,a,u=X.default.getCurrentUser(),s=H.Z.getBasicChannel(t);if(null!=n.author&&null!=u&&n.author.id===u.id){null!=i.outgoingAck&&i.clearOutgoingAck();return _t({channelId:t,messageId:n.id,manual:!1})}var l=(0,I.PP)();if(!0===(null==l?void 0:l.isReady())){var c=l.getCurrentRoute();_.Z.getChatOpen(i.channelId)?o=i.channelId:"channel"===(null==c?void 0:c.name)&&(o=c.params.channelId)}else if(null==l){o=Q.Z.getChannelId();a=G.ZP.getCurrentSidebarChannelId(o)}var f=o===t||a===t;if(f&&We(i)&&!r)return i.ack({messageId:n.id});if(null!=ve&&ve.isInstanceFocused()&&f&&ve.isInstanceUILocked()&&ve.isPinned(ee.Odu.TEXT))return i.ack({messageId:n.id});(null==i.oldestUnreadMessageId||i.oldestUnreadMessageIdStale)&&(i.oldestUnreadMessageId=n.id);i.unreadCount++
;if(!(null!=n.author&&q.Z.isBlocked(n.author.id)||n.type===ee.uaV.RECIPIENT_REMOVE&&(null==s?void 0:s.type)===ee.d4z.GROUP_DM)&&(null!=u&&(0,y.Hl)({rawMessage:n,userId:u.id,suppressEveryone:J.Z.isSuppressEveryoneEnabled(i.guildId),suppressRoles:J.Z.isSuppressRolesEnabled(i.guildId)})||Ge(H.Z.getChannel(t)))){i.mentionCount++;if((0,S.bY)()&&null!=u){Ke.get(u.id,ie.W.NOTIFICATION_CENTER).lastMessageId=n.id;A.Z.tabFocused&&Et(u.id,ie.W.NOTIFICATION_CENTER,void 0,!1)}}},MESSAGE_DELETE:ot,MESSAGE_DELETE_BULK:ot,MESSAGE_ACK:_t,CHANNEL_ACK:function(e){var t=e.channelId,n=e.messageId,r=void 0===n?void 0:n,i=e.immediate,o=void 0!==i&&i,a=e.force,u=void 0!==a&&a,s=e.context,l=e.location,c=Ke.get(t),f=c.ack({messageId:r,local:s!==ee.e3s,immediate:o,force:u,isExplicitUserAction:!0,location:l});if(null!=r){c.rebuildChannelState();return!0}return f},CHANNEL_LOCAL_ACK:function(e){var t=e.channelId;return Ke.get(t).ack({messageId:void 0,local:!0,immediate:void 0,force:void 0,isExplicitUserAction:!0})
},CHANNEL_PINS_ACK:function(e){var t=e.channelId,n=e.timestamp;return Ke.get(t).ackPins(n)},CHANNEL_PINS_UPDATE:function(e){var t=e.channelId,n=e.lastPinTimestamp,r=Ke.get(t),i=Fe(n);if(r.lastPinTimestamp===i)return!1;r.lastPinTimestamp=i;return!0},CHANNEL_SELECT:function(e){var t=e.channelId,n=G.ZP.getCurrentSidebarChannelId(t),r=H.Z.getChannel(t);if(null!=r){var i,o=Ke.get(r.id);o.ackMessageIdAtChannelSelect=null!==(i=o.ackMessageId)&&void 0!==i?i:F.Z.fromTimestamp(o.getAckTimestamp());o.recordLastViewedTime()}ct(ye);ct(Ae);var a=!1;if(ye!==t){a=ft(ye)||a;a=ft(Ae)||a}(ye===t||null!=(null==r?void 0:r.type)&&ee.TPd.GUILD_THREADS_ONLY.has(r.type))&&(a=tt(t)||a);ye===t&&(a=tt(n)||a);ye=t;Ae=n;return a},VOICE_CHANNEL_SELECT:function(e){var t=e.channelId;if(null!=t){var n=Ke.get(t);if(!n.hasMentions()){n.oldestUnreadMessageId=null;return n.ack({})}}},CHANNEL_CREATE:function(e){var t=e.channel;if(!(0,D.Em)(t.type))return!1;var n=Ke.get(t.id);n.lastMessageId=t.lastMessageId
;n.lastPinTimestamp=Fe(t.lastPinTimestamp)},THREAD_CREATE:function(e){var t=e.channel;!function(e){if(!D.AW.has(e.type))return!1;var t=Ke.get(e.id);t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Fe(e.lastPinTimestamp);t.syncThreadSettings();e.ownerId===Y.default.getId()&&(t.loadedMessages=!0)}(t);!function(e){var t=e.parent_id;Ke.get(t).lastMessageId=e.id;var n=X.default.getCurrentUser();if(e.ownerId===(null==n?void 0:n.id)){Ke.get(e.id)._persisted=!0;_t({channelId:t,messageId:e.id,manual:!1})}}(t)},THREAD_UPDATE:function(e){var t=e.channel;return!!D.AW.has(t.type)&&Ke.get(t.id).syncThreadSettings()},THREAD_LIST_SYNC:function(e){e.threads.forEach((function(e){if(D.AW.has(e.type)){var t=Ke.get(e.id);t.lastMessageId=e.lastMessageId;t.lastPinTimestamp=Fe(e.lastPinTimestamp);t._isThread=!0;t._isActiveThread=!0;t._isJoinedThread=b.Z.hasJoined(e.id);if(e.isForumPost()){var n=Ke.get(e.parent_id);F.Z.compare(n.lastMessageId,e.id)<0&&(n.lastMessageId=e.id)}}}))},LOAD_THREADS_SUCCESS:at,
LOAD_ARCHIVED_THREADS_SUCCESS:at,SEARCH_FINISH:function(e){var t=e.messages,n=e.threads,r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){qe(a.value.map((function(e){return e.thread})).filter(Z.lm))}}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}qe(n)},THREAD_MEMBER_UPDATE:function(e){var t=e.id;return Ke.get(t).syncThreadSettings()},THREAD_MEMBERS_UPDATE:function(e){return(0,R.s)(e)&&Ke.get(e.id).syncThreadSettings()},CHANNEL_DELETE:st,THREAD_DELETE:st,WINDOW_FOCUS:function(e){var t=!1,n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(Re)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=_e(o.value,2),s=u[0];u[1]===e.windowId&&(t=dt(s,e.focused)||t)}}catch(e){r=!0;i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},UPDATE_CHANNEL_DIMENSIONS:function(e){return tt(e.channelId)},CURRENT_USER_UPDATE:function(){Ne=null},DRAWER_OPEN:function(){if(null!=ye){var e=Ke.get(ye)
;e.hasUnread()||(e.oldestUnreadMessageIdStale=!0)}return!1},DRAWER_CLOSE:function(){return tt(ye)},BULK_ACK:function(e){var t=e.channels,n=e.context;!function(e,t){var n;e.forEach((function(e){var t=e.channelId,n=e.messageId,r=e.readStateType;Ke.get(t,r).ack({messageId:n,local:!0,immediate:void 0,force:void 0,isExplicitUserAction:!0})}));if(t===ee.e3s){(n=Ce).push.apply(n,he(e.map((function(e){return{channel_id:e.channelId,message_id:e.messageId,read_state_type:e.readStateType}}))));Me||He()}}(t.filter((function(e){return null!=e.messageId&&gt.hasUnread(e.channelId,e.readStateType)})),n)},ENABLE_AUTOMATIC_ACK:function(e){var t=e.channelId,n=e.windowId;0;if(Re[t]===n)return!1;i()(void 0===Re[t],"handleEnableAutomaticAck: channel already visible in another window");Re[t]=n;return tt(t)},DISABLE_AUTOMATIC_ACK:function(e){var t=e.channelId;0;Re[t]=void 0;return!1},GUILD_FEATURE_ACK:ht,GUILD_SCHEDULED_EVENT_CREATE:function(e){
var t=e.guildScheduledEvent,n=t.guild_id,r=Ke.get(t.guild_id,ie.W.GUILD_EVENT);r.lastMessageId=t.id;ut(t)?ht({type:"GUILD_FEATURE_ACK",id:n,ackType:ie.W.GUILD_EVENT,ackedId:t.id,local:!1}):J.Z.isMuteScheduledEventsEnabled(n)||r.mentionCount++},GUILD_SCHEDULED_EVENT_UPDATE:function(e){var t=e.guildScheduledEvent,n=t.guild_id;if(ut(t))return!1;if(![ne.p1.CANCELED,ne.p1.COMPLETED].includes(t.status))return!1;Ke.get(n,ie.W.GUILD_EVENT).handleGuildEventRemoval(n,t.id)},GUILD_SCHEDULED_EVENT_DELETE:function(e){var t=e.guildScheduledEvent,n=t.guild_id;if(ut(t))return!1;Ke.get(t.guild_id,ie.W.GUILD_EVENT).handleGuildEventRemoval(n,t.id)},GUILD_DELETE:function(e){var t=e.guild;return Ke.clear(t.id,ie.W.GUILD_EVENT)},GUILD_UPDATE:function(e){var t=e.guild,n=t.latest_onboarding_question_id;if(null!=n){var r=Ke.get(t.id,ie.W.GUILD_ONBOARDING_QUESTION);r._guildId=t.id;r.lastMessageId=n}},RESORT_THREADS:function(e){return tt(e.channelId)},CHANNEL_RTC_UPDATE_CHAT_OPEN:function(e){e.channelId,
e.chatOpen;0},DECAY_READ_STATES:je,NOTIFICATION_CENTER_ITEM_CREATE:function(e){var t,n=e.item;if(!(0,N.$N)())return!1;var r=null===(t=X.default.getCurrentUser())||void 0===t?void 0:t.id;if(null==r)return!1;var i=Ke.get(r,ie.W.NOTIFICATION_CENTER);i.lastMessageId=n.id;var o=(0,S.bY)();!o&&A.Z.active||o&&A.Z.tabFocused?Et(r,ie.W.NOTIFICATION_CENTER,n.id,!1):i.mentionCount++},RELATIONSHIP_ADD:function(e){var t=X.default.getCurrentUser();if(!(0,N.$N)())return!1;if(null==t)return!1;if(null==e.relationship.since)return!1;if(e.relationship.type!==ee.OGo.PENDING_INCOMING&&e.relationship.type!==ee.OGo.FRIEND)return!1;var n=Ke.get(t.id,ie.W.NOTIFICATION_CENTER),r=e.relationship.type===ee.OGo.FRIEND,i=r?new Date(Date.now()).getTime():new Date(e.relationship.since).getTime(),o=null!=n.ackMessageId?F.Z.extractTimestamp(n.ackMessageId):0,a=(0,S.bY)();if(o<i){n.lastMessageId=F.Z.fromTimestamp(i)
;!a&&A.Z.active||a&&A.Z.tabFocused?Et(t.id,ie.W.NOTIFICATION_CENTER,void 0,!1):r?n.mentionCount--:n.mentionCount++}},RELATIONSHIP_REMOVE:function(e){var t=X.default.getCurrentUser();if(!(0,N.$N)())return!1;if(null==t)return!1;if(null==e.relationship.since)return!1;if(e.relationship.type!==ee.OGo.PENDING_INCOMING)return!1;var n=Ke.get(t.id,ie.W.NOTIFICATION_CENTER),r=new Date(e.relationship.since).getTime();(null!=n.ackMessageId?F.Z.extractTimestamp(n.ackMessageId):0)<=r&&(n.mentionCount=Math.max(0,n.mentionCount-1))},NOTIFICATION_CENTER_ITEMS_ACK:function(e){var t,n=e.ids;if(e.optimistic||!(0,N.$N)()||A.Z.active)return!1;var r=null===(t=X.default.getCurrentUser())||void 0===t?void 0:t.id;if(null==r)return!1;var i=Ke.get(r,ie.W.NOTIFICATION_CENTER);n.forEach((function(e){F.Z.compare(i.ackMessageId,e)<0&&(i.mentionCount=Math.max(i.mentionCount-1,0))}))},USER_NON_CHANNEL_ACK:function(e){var t,n=e.ackType,r=e.ackedId,i=e.local,o=null===(t=X.default.getCurrentUser())||void 0===t?void 0:t.id
;return null!=o&&Et(o,n,r,i)},PASSIVE_UPDATE_V1:function(e){var t,n=!1,r=!0,i=!1,o=void 0;try{for(var a,u=(null!==(t=e.channels)&&void 0!==t?t:[])[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=Ke.get(s.id),c=Fe(s.lastPinTimestamp);if(l.lastMessageId!==s.lastMessageId||l.lastPinTimestamp!==c){n=!0;l.lastMessageId=s.lastMessageId;l.lastPinTimestamp=c}}}catch(e){i=!0;o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n},CLEAR_OLDEST_UNREAD_MESSAGE:function(e){return ft(e.channelId)}});const vt=gt},733300:(e,t,n)=>{n.d(t,{Z:()=>j});var r=n(496486),i=n.n(r),o=n(202351),a=n(630631),u=n(744564),s=n(817673),l=n(281110),c=n(296602),f=n(2590);var d=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.isCanceled=!1;this.searchId=t;this.searchType=n;this.query=r}var t=e.prototype;t.fetch=function(e,t,n){var r=this;if(!this.isCanceled){var i=null;switch(this.searchType){
case f.aib.DMS:i=f.ANM.SEARCH_DMS;break;case f.aib.GUILD:if(null==this.searchId||""===this.searchId)return;i=f.ANM.SEARCH_GUILD(this.searchId);break;case f.aib.CHANNEL:if(null==this.searchId||""===this.searchId)return;i=f.ANM.SEARCH_CHANNEL(this.searchId);break;default:return}l.Z.get({url:i,query:s.stringify(this.query),oldFormErrors:!0}).then((function(i){if(!r.isCanceled)if(200===i.status)e(i);else if(202===i.status){var o;r.query.attempts=(null!==(o=r.query.attempts)&&void 0!==o?o:0)+1;var a=1e3*i.body.retry_after;r.retryDelay=isNaN(a)||0===a?5e3:a;r.retryLater(e,t,n);t(i)}})).catch((function(e){new c.Z("SearchFetcher").error(e);n(e)}))}};t.cancel=function(){this.isCanceled=!0;null!=this.indexingPollId&&clearTimeout(this.indexingPollId)};t.retryLater=function(e,t,n){null!=this.indexingPollId&&clearTimeout(this.indexingPollId);this.indexingPollId=setTimeout(this.fetch.bind(this,e,t,n),this.retryDelay)};return e}(),_=n(492628),h=n(61209),E=n(567403),p=n(715107);function g(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments)
;return I(this,n)}}var y={},A=!1;function N(e){null==y[e]&&(y[e]={searchId:e,searchType:S(e),isIndexing:!1,isHistoricalIndexing:!1,isSearching:!1,analyticsId:null,editorState:null,offset:0,query:null,hasError:!1,searchFetcher:null,rawResults:null,totalResults:0,documentsIndexed:0,resultsBlocked:0,showBlockedResults:!1,showNoResultsAlt:!1});return y[e]}function S(e){return e===f.aib.DMS?f.aib.DMS:null!=E.Z.getGuild(e)?f.aib.GUILD:null!=h.Z.getChannel(e)?f.aib.CHANNEL:null}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e)return n;var r=y[e];return null==r?n:t(r)}var M="SearchStore",b="tokenized",R=!1,U={},D=null;function P(e){var t=e.searchId,n=e.query;if("string"==typeof n&&""!==(n=n.trim())){var r,i=U[t]=null!==(r=U[t])&&void 0!==r?r:[],o=i.indexOf(n);if(-1!==o){i.splice(o,1);i.unshift(n)}else null!=i[0]&&""!==i[0]&&n.startsWith(i[0])?i[0]=n:o<0&&i.unshift(n);i.length>5&&i.splice(5,i.length);a.Z.set(M,{history:U})}}function L(e){
var t=e.searchId,n=y[t];if(null==n)return!1;null!=n.searchFetcher&&n.searchFetcher.cancel();delete y[t]}function w(e){if(e===D)return!1;null!=e&&null==y[e]&&N(e);D=e}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=T(n);function n(){g(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(E.Z,h.Z);var e=a.Z.get(M);null!=(null==e?void 0:e.history)&&(U=function(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=e[t].filter((function(e){return"string"==typeof e&&e.trim()})));Array.isArray(e[t])&&0!==e[t].length||delete e[t]}));return e}(e.history));R=!!a.Z.get(b)||!1};r.isOpen=function(){return A};r.getCurrentSearchId=function(){return D};r.isActive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D
;return null!=e&&(this.isIndexing(e)||this.isSearching(e)||this.hasResults(e))};r.isTokenized=function(){return R};r.getSearchType=function(e){return C(null!=e?e:D,(function(e){return e.searchType}))};r.getRawResults=function(e){return C(e,(function(e){return e.rawResults}))};r.hasResults=function(e){return null!=C(e,(function(e){return e.rawResults}))};r.isIndexing=function(e){return C(e,(function(e){return e.isIndexing}))||!1};r.isHistoricalIndexing=function(e){return C(e,(function(e){return e.isHistoricalIndexing}))||!1};r.isSearching=function(e){return C(e,(function(e){return e.isSearching}))||!1};r.getAnalyticsId=function(e){return C(e,(function(e){return e.analyticsId}))};r.getResultsBlocked=function(e){return C(e,(function(e){return e.resultsBlocked}))};r.getDocumentsIndexedCount=function(e){return C(e,(function(e){return e.documentsIndexed}))};r.getSearchFetcher=function(e){return C(e,(function(e){return e.searchFetcher}))};r.getTotalResults=function(e){var t
;return null!==(t=C(e,(function(e){return e.totalResults})))&&void 0!==t?t:0};r.getEditorState=function(e){return C(e,(function(e){return e.editorState}))};r.getHistory=function(e){return U[e]};r.getOffset=function(e){var t;return null!==(t=C(e,(function(e){return e.offset})))&&void 0!==t?t:0};r.getQuery=function(e){return C(e,(function(e){return e.query}))};r.hasError=function(e){var t;return null!==(t=C(e,(function(e){return e.hasError})))&&void 0!==t&&t};r.shouldShowBlockedResults=function(e){var t;return null!==(t=C(e,(function(e){return e.showBlockedResults}),!1))&&void 0!==t&&t};r.shouldShowNoResultsAlt=function(e){var t;return null!==(t=C(e,(function(e){return e.showNoResultsAlt}),!1))&&void 0!==t&&t};r.getResultsState=function(e){return{isSearching:this.isSearching(e),isIndexing:this.isIndexing(e),isHistoricalIndexing:this.isHistoricalIndexing(e),documentsIndexed:this.getDocumentsIndexedCount(e),offset:this.getOffset(e),totalResults:this.getTotalResults(e),
hasError:this.hasError(e),showBlockedResults:this.shouldShowBlockedResults(e),showNoResultsAlt:this.shouldShowNoResultsAlt(e)}};r.__getLocalVars=function(){return{NO_RESULTS_ALT_PERCENT:.05,searchStates:y,searchModalOpen:A,STORAGE_KEY:M,TOKENIZED_KEY:b,isTokenized:R,searchHistory:U,selectedSearchId:D}};return n}(o.ZP.Store);Z.displayName="SearchStore";const j=new Z(u.Z,{SEARCH_START:function(e){var t,n=e.queryString,r=e.searchId,o=e.query,a=N(r);if(null!=a.searchFetcher){a.searchFetcher.cancel();a.searchFetcher=null}var s=r,l=a.searchType;if(r===f.I_8){var c;s=null!==(c=p.Z.getChannelId())&&void 0!==c?c:r;l=f.aib.CHANNEL}var E,g=new d(s,l,o);a.searchFetcher=g;a.isSearching=!0;a.rawResults=null;a.analyticsId=null;a.query=i().omit(o,"type");a.offset=null!==(E=o.offset)&&void 0!==E?E:0;a.showBlockedResults=!1;P({type:"SEARCH_ADD_HISTORY",searchId:r,query:n});var v=r===f.I_8?null===(t=h.Z.getChannel(s))||void 0===t?void 0:t.guild_id:l===f.aib.GUILD?r:null;g.fetch((function(e){var t,n
;u.Z.dispatch({type:"SEARCH_FINISH",searchId:r,guildId:v,analyticsId:e.body.analytics_id,totalResults:e.body.total_results,messages:e.body.messages,threads:null!==(t=e.body.threads)&&void 0!==t?t:[],members:(null!==(n=e.body.members)&&void 0!==n?n:[]).map((function(e){return(0,_.Z)(e)})),hasError:!1,doingHistoricalIndex:e.body.doing_deep_historical_index,documentsIndexed:e.body.documents_indexed})}),(function(){u.Z.dispatch({type:"SEARCH_INDEXING",searchId:r})}),(function(){u.Z.dispatch({type:"SEARCH_FINISH",searchId:r,guildId:v,messages:[],threads:[],members:[],totalResults:0,analyticsId:null,hasError:!0,doingHistoricalIndex:!1,documentsIndexed:0})}))},SEARCH_INDEXING:function(e){var t=N(e.searchId);t.isIndexing=!0;t.isHistoricalIndexing=!0;t.isSearching=!1},SEARCH_FINISH:function(e){var t=N(e.searchId);t.isSearching=!1;t.isIndexing=!1;t.isHistoricalIndexing=e.doingHistoricalIndex||!1;t.searchFetcher=null;t.totalResults=e.totalResults;t.hasError=e.hasError;t.analyticsId=e.analyticsId
;t.documentsIndexed=null!=e.documentsIndexed?e.documentsIndexed:0;t.showNoResultsAlt=Math.random()<.05;t.rawResults=e.messages;null==t.query&&(t.hasError=!0)},SEARCH_EDITOR_STATE_CLEAR:L,SEARCH_ENSURE_SEARCH_STATE:function(e){var t=e.searchId;null!=t&&N(t)},SEARCH_EDITOR_STATE_CHANGE:function(e){var t=e.searchId,n=e.editorState;N(t).editorState=n},SEARCH_SET_SHOW_BLOCKED_RESULTS:function(e){var t=e.searchId,n=e.showBlocked;N(t).showBlockedResults=n},SEARCH_SCREEN_OPEN:function(e){w(e.searchId)},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId;w(null!=t?t:n)},CHANNEL_TOGGLE_MEMBERS_SECTION:function(){return null!=D&&L({searchId:D})},SEARCH_CLEAR_HISTORY:function(e){var t=e.searchId;if(null==t){a.Z.remove(M);U={}}else{delete U[t];a.Z.set(M,{history:U})}},SEARCH_REMOVE_HISTORY:function(e){var t=e.searchId,n=e.query;if(null!=U[t]){U[t]=U[t].filter((function(e){return e!==n}));a.Z.set(M,{history:U})}},SEARCH_ADD_HISTORY:P,LOGOUT:function(){a.Z.remove(M);U={}},
CONNECTION_OPEN:function(){Object.keys(y).forEach((function(e){null!=y[e]&&(y[e].searchType=S(e))}))},SEARCH_MODAL_OPEN:function(e){var t=e.searchId;null!=t&&(D=t);A=!0},SEARCH_MODAL_CLOSE:function(){A=!1}})},377128:(e,t,n)=>{n.d(t,{Z:()=>R});var r=n(202351),i=n(744564),o=n(563135),a=n(61209),u=n(604945),s=n(69085),l=n(715107),c=n(2590),f=n(36256);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return h(e)}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}function g(e,t){return function(e){
if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}var O=new Map,m=null,T=null,y=null;function A(e,t){var n=O.get(e);if(null==n)return!1;var r=n.delete(t);0===n.size&&O.delete(e);return r}function N(e,t,n){var r,i,o;return((null!==(o=null===(i=null===(r=O.get(e))||void 0===r?void 0:r.get(t))||void 0===i?void 0:i.flags)&&void 0!==o?o:f.Dg.NONE)&n)===n}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=O.get(e);if(null==r)return!1;var i=!0,o=!1,a=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=g(u.value,2),c=l[0],f=l[1].flags;if((!n||c!==m)&&(f&t)===t)return!0}}catch(e){o=!0;a=e}finally{try{
i||null==s.return||s.return()}finally{if(o)throw a}}return!1}function C(e,t,n){var r,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT,t=O.get(e);if(null==t){t=new Map;O.set(e,t)}return t}(e),o=i.get(t),a=null!==(r=null==o?void 0:o.flags)&&void 0!==r?r:0;if(0===a&&0===n)return!1;if(0===n){i.delete(t);0===i.size&&O.delete(e)}else{var u,s=null!==(u=null==o?void 0:o.since)&&void 0!==u?u:null,l=(a&f.Dg.VOICE)===f.Dg.VOICE,c=(n&f.Dg.VOICE)===f.Dg.VOICE;l!==c&&(s=c?Date.now():null);i.set(t,{flags:n,since:s})}return!0}function M(e){var t=e.user,n=e.sessionId;m=t.id;T=n;y=null}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&p(e,t)}(n,e);var t=I(n);function n(){_(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){
this.mustEmitChanges((function(e){return"CONNECTION_OPEN"!==e.type&&"VOICE_STATE_UPDATES"!==e.type}));this.waitFor(s.Z)};r.getSpeakingDuration=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.Yn.DEFAULT,o=null===(r=null===(n=O.get(i))||void 0===n?void 0:n.get(e))||void 0===r?void 0:r.since;return null!=o?t-o:0};r.getSpeakers=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT;return Array.from(null!==(t=null===(e=O.get(n))||void 0===e?void 0:e.keys())&&void 0!==t?t:[]).filter((function(e){return N(n,e,f.Dg.VOICE)}))};r.isSpeaking=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Yn.DEFAULT;return N(t,e,f.Dg.VOICE)};r.isPrioritySpeaker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Yn.DEFAULT;return N(t,e,f.Dg.PRIORITY)};r.isSoundSharing=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Yn.DEFAULT;return N(t,e,f.Dg.SOUNDSHARE)}
;r.isAnyoneElseSpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT;return S(e,f.Dg.VOICE,!0)};r.isCurrentUserSpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT;return null!=m&&this.isSpeaking(m,e)};r.isAnyonePrioritySpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT;return S(e,f.Dg.VOICE|f.Dg.PRIORITY)};r.isCurrentUserPrioritySpeaking=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.Yn.DEFAULT;return null!=m&&this.isPrioritySpeaker(m,e)&&this.isSpeaking(m,e)};r.__getLocalVars=function(){return{speakersByContext:O,currentUserId:m,currentSessionId:T,currentChannelId:y}};return n}(r.ZP.Store);b.displayName="SpeakingStore";const R=new b(i.Z,{CONNECTION_OPEN:M,OVERLAY_INITIALIZE:M,SPEAKING:function(e){var t=e.context,n=e.userId,r=e.speakingFlags;if((r&f.Dg.PRIORITY)===f.Dg.PRIORITY){var i=a.Z.getChannel(l.Z.getVoiceChannelId())
;if(null!=i&&o.ZP.can({permission:c.Plq.PRIORITY_SPEAKER,user:n,context:i}))u.Z.setCanHavePriority(n,!0);else{u.Z.setCanHavePriority(n,!1);r&=~f.Dg.PRIORITY}}return C(t,n,r)},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.channelId,i=t.sessionId,o=!1,a=y;n===m&&i===T&&(y=null!=r?r:null);a!==y&&(o=O.delete(f.Yn.DEFAULT)||o);null==r?o=n===m&&i===T?O.delete(f.Yn.DEFAULT)||o:A(f.Yn.DEFAULT,n)||o:n===m&&i!==T?o=O.delete(f.Yn.DEFAULT)||o:n!==m&&r!==s.Z.getChannelId()&&(o=A(f.Yn.DEFAULT,n)||o);return o||e}),!1)},LOBBY_VOICE_STATE_UPDATE:function(e){}})},256727:(e,t,n)=>{n.d(t,{Z:()=>O});var r=n(202351),i=n(744564),o=n(36256);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function s(e){s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return s(e)}function l(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}var h=null,E=null,p={};function g(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null!==(t=p[e])&&void 0!==t?t:{},i=!0,a=!1,u=void 0;try{for(var s,l=Object.values(o.Yn)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;n!==c&&null!=n||delete r[c]}}catch(e){a=!0;u=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw u}}p[e]=r}function v(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:{};p[e]=l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){
return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){u(e,t,n[t])}))}return e}({},i),u({},n,{streamId:t}))}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(n,e);var t=_(n);function n(){a(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getStreamId=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Yn.DEFAULT;return null===(t=p[e])||void 0===t||null===(n=t[r])||void 0===n?void 0:n.streamId};r.getUserStreamData=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Yn.DEFAULT;return null===(t=p[e])||void 0===t?void 0:t[n]};r.__getLocalVars=function(){return{currentUserId:h,currentSessionId:E,userStreams:p}};return n}(r.ZP.Store);I.displayName="VideoStreamStore";const O=new I(i.Z,{
CONNECTION_OPEN:function(e){var t=e.user,n=e.sessionId;h=t.id;E=n},OVERLAY_INITIALIZE:function(e){var t=e.user,n=e.sessionId;h=t.id;E=n},RTC_CONNECTION_VIDEO:function(e){var t=e.userId,n=e.streamId,r=e.context;null!=n?v(t,n,r):g(t,r)},VOICE_STATE_UPDATES:function(e){return e.voiceStates.reduce((function(e,t){var n=t.userId,r=t.sessionId,i=t.channelId;if(null==i&&n===h){if(r!==E)return e;p={}}else{if(null!=i||null==p[n])return e;g(n)}return!0}),!1)}})},674482:(e,t,n)=>{n.d(t,{Z:()=>Q});var r=n(202351),i=n(630631),o=n(744564),a=n(771068),u=n(458960),s=n(609182),l=n(382060),c=n(736818),f=n(61209),d=n(5544),_=n(117112),h=n(464187),E=n(120415),p=n(310126),g=n(226810),v=n(901654),I=n(2590),O=n(122253);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(e,r.key,r)}}function y(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function A(e){A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return A(e)}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){y(e,t,n[t])}))}return e}function S(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){
Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function C(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function M(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}var D={selectedGuildId:null,selectedChannelId:null,displayUserMode:I.OYC.ALWAYS,displayNameMode:I.wC$.ALWAYS,avatarSizeMode:I.ipw.LARGE,notificationPositionMode:I._vf.TOP_LEFT,textChatNotifications:I.Ypu.ENABLED,disableExternalLinkAlert:!1,disablePinTutorial:!1,textWidgetOpacity:O.w.LOWER},P=null,L={},w=null,Z=new Set,j=!1,F=null,Y=!1,G=!1,H=new Set,k=!1;function B(e){var t=L[e];null==t&&(t=L[e]=N({},D));return t}var V=N({},D);function x(e){"OVERLAY_INITIALIZE"===e.type&&function(e){if(null==e.version&&1===g.Tq)return!0;if(e.version===g.Tq)return!0;o.Z.dispatch({type:"OVERLAY_INCOMPATIBLE_APP"});(0,u.zP)();return!1}(e)&&(G=!0);if(G)switch(e.type){case"CHANNEL_CREATE":case"THREAD_CREATE":case"THREAD_UPDATE":case"CHANNEL_DELETE":
case"THREAD_DELETE":var t=(0,l.kt)(e.channel);if(!l.AW.has(t.type))break;o.Z.dispatch({type:e.type,channel:t});break;case"CHANNEL_UPDATES":o.Z.dispatch({type:e.type,channels:e.channels.map((function(e){return(0,l.kt)(e)}))});break;case"CONNECTION_OPEN_SUPPLEMENTAL":var n;e.lazyPrivateChannels=(null!==(n=e.lazyPrivateChannels)&&void 0!==n?n:[]).map((function(e){return(0,l.kt)(e)}));o.Z.dispatch(e);break;case"THREAD_LIST_SYNC":o.Z.dispatch(S(N({},e),{threads:e.threads.map((function(e){return(0,l.kt)(e)}))}));break;case"GUILD_CREATE":var r,i,a,c=function(e){return(0,l.kt)(e)},f=e.guild;f.channels=null!==(a=null===(r=f.channels)||void 0===r?void 0:r.map(c))&&void 0!==a?a:null;f.threads=null===(i=f.threads)||void 0===i?void 0:i.map(c);if(null!=f.channelUpdates){var d;f.channelUpdates.writes=null===(d=f.channelUpdates.writes)||void 0===d?void 0:d.map(c)}o.Z.dispatch({type:"GUILD_CREATE",guild:f});break;case"USER_SETTINGS_PROTO_UPDATE":o.Z.dispatch(S(N({},e),{settings:{proto:(0,
s.kI)(e.settings.type,e.settings.proto),type:e.settings.type}}));break;default:o.Z.dispatch(e)}}function W(){if(!__OVERLAY__)return!1;var e=P===(0,g.QF)(),t=Z.has((0,g.QF)())||H.size>0;e&&t?(0,a.T_)(window,!0):(0,a.T_)(window,!1)}function K(){if(P!==(0,g.QF)())return!1;H.clear()}function z(e){var t=(0,g.QF)();if(null==e.pid||e.pid===t)switch(e.type){case I.BmY.STORAGE_SYNC:r.ZP.PersistedStore.initializeAll(e.states);break;case I.BmY.DISPATCH:if(null!=e.payloads){Y=!0;e.payloads.forEach((function(e){return x(e)}));Y=!1}}}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&b(e,t)}(n,e);var t=U(n);function n(){m(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(e){this.waitFor(c.default);this.syncWith([c.default],(function(){var e=c.default.getId();V=null!=e?B(e):N({},D)}))
;if(__OVERLAY__){E.FB&&(F=p.default.requireModule("discord_overlay2"));Z.delete((0,g.QF)())}if(null!=e){L=e;var t=c.default.getId();if(null!=t){null==(V=B(t)).textChatNotifications&&(V.textChatNotifications=D.textChatNotifications);null==V.textWidgetOpacity&&(V.textWidgetOpacity=D.textWidgetOpacity)}}};r.getState=function(){return L};r.isUILocked=function(e){return!Z.has(e)};r.isInstanceUILocked=function(){if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceUILocked()");return!Z.has((0,g.QF)())};r.isInstanceFocused=function(){if(!__OVERLAY__)throw new Error("OverlayStore: App instance should never call .isInstanceFocused()");return P===(0,g.QF)()};r.isFocused=function(e){return P===e};r.isPinned=function(e){var t=_.Z.getLayout(g.qU);if(null!=t){return null!=t.widgets.find((function(t){var n=_.Z.getWidget(t);return!(null==n||n.type!==e||!n.pinned)}))}return!1};r.getSelectedGuildId=function(){return V.selectedGuildId}
;r.getSelectedChannelId=function(){return V.selectedChannelId};r.getSelectedCallId=function(){return w};r.getDisplayUserMode=function(){return V.displayUserMode};r.getDisplayNameMode=function(){return V.displayNameMode};r.getAvatarSizeMode=function(){return V.avatarSizeMode};r.getNotificationPositionMode=function(){return V.notificationPositionMode};r.getTextChatNotificationMode=function(){return V.notificationPositionMode===I._vf.DISABLED?I.Ypu.DISABLED:V.textChatNotifications};r.getDisableExternalLinkAlert=function(){return V.disableExternalLinkAlert};r.getFocusedPID=function(){return P};r.getActiveRegions=function(){return H};r.getTextWidgetOpacity=function(){return V.textWidgetOpacity};r.isPreviewingInGame=function(){return k};r.__getLocalVars=function(){return{defaultSettings:D,focusedPID:P,settings:L,selectedCallId:w,unlockedOverlayPIDs:Z,incompatibleApp:j,overlay:F,isDispatching:Y,hasReceivedInitialPayload:G,activeRegions:H,isPreviewingInGame:k,currentUserSettings:V}}
;!function(e,t,n){t&&T(e.prototype,t);n&&T(e,n)}(n,[{key:"initialized",get:function(){return G}},{key:"incompatibleApp",get:function(){return j}}]);return n}(r.ZP.PersistedStore);q.displayName="OverlayStore";q.persistKey="OverlayStoreV2";q.migrations=[function(){var e=N({},i.Z.get("OverlayStore")),t=(e.pinnedWidgets,e.positions,e.sizes,e.v),n=C(e,["pinnedWidgets","positions","sizes","v"]);return N({},D,5===t?n:null)},function(e){var t=c.default.getId();return null==e||null==t?{}:y({},t,N({},e))}];const Q=new q(o.Z,{LOGOUT:function(e){e.isSwitchingAccount||(L={})},MULTI_ACCOUNT_REMOVE_ACCOUNT:function(e){e.userId in L&&delete L[e.userId]},CONNECTION_CLOSED:function(){Z.clear()},OVERLAY_START_SESSION:function(){
e=new Set(["CHANNEL_SELECT","VOICE_CHANNEL_SELECT","CHANNEL_COLLAPSE","CATEGORY_COLLAPSE","CATEGORY_EXPAND","AUDIO_TOGGLE_SELF_MUTE","AUDIO_TOGGLE_SELF_DEAF","AUDIO_TOGGLE_LOCAL_MUTE","AUDIO_SET_LOCAL_VIDEO_DISABLED","AUDIO_SET_LOCAL_VOLUME","AUDIO_SET_INPUT_DEVICE","AUDIO_SET_INPUT_VOLUME","AUDIO_SET_OUTPUT_VOLUME","AUDIO_SET_OUTPUT_DEVICE","AUDIO_SET_MODE","OVERLAY_SELECT_CALL","OVERLAY_SET_NOTIFICATION_POSITION_MODE","OVERLAY_SET_UI_LOCKED","OVERLAY_SET_INPUT_LOCKED","OVERLAY_SET_TEXT_WIDGET_OPACITY","OVERLAY_SET_NOT_IDLE","OVERLAY_CALL_PRIVATE_CHANNEL","OVERLAY_SET_DISPLAY_NAME_MODE","OVERLAY_SET_DISPLAY_USER_MODE","OVERLAY_SET_AVATAR_SIZE_MODE","OVERLAY_SET_NOTIFICATION_POSITION_MODE","OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE","OVERLAY_JOIN_GAME","LAYOUT_UPDATE_WIDGET","LAYOUT_SET_TOP_WIDGET","LAYOUT_SET_PINNED","LAYOUT_CREATE","CHANNEL_PRELOAD","CALL_DELETE","CHANNEL_ACK","SKU_PURCHASE_MODAL_OPEN","SKU_PURCHASE_MODAL_CLOSE","SKU_PURCHASE_PREVIEW_FETCH_SUCCESS","SKU_PURCHASE_START","SKU_PURCHASE_SUCCESS","SKU_PURCHASE_FAIL","SKU_PURCHASE_SHOW_CONFIRMATION_STEP","SKU_PURCHASE_CLEAR_ERROR","PURCHASE_CONFIRMATION_MODAL_OPEN","PURCHASE_CONFIRMATION_MODAL_CLOSE","ACTIVITY_INVITE_MODAL_CLOSE","LOAD_MESSAGES_SUCCESS","LOAD_MESSAGES_FAILURE","LOAD_MESSAGES","OVERLAY_ACTIVATE_REGION","OVERLAY_DEACTIVATE_ALL_REGIONS","INVITE_MODAL_CLOSE","LAYOUT_DELETE_WIDGET","LAYOUT_DELETE_ALL_WIDGETS","LAYOUT_CREATE_WIDGETS","GIFT_CODE_REDEEM","GIFT_CODE_REDEEM_SUCCESS","GIFT_CODE_REDEEM_FAILURE","PREMIUM_REQUIRED_MODAL_OPEN","PREMIUM_REQUIRED_MODAL_CLOSE","PREMIUM_PAYMENT_MODAL_OPEN","PREMIUM_PAYMENT_MODAL_CLOSE","PREMIUM_PAYMENT_SUBSCRIBE_FAIL","PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS","PREMIUM_PAYMENT_ERROR_CLEAR","PREMIUM_PAYMENT_UPDATE_FAIL","PREMIUM_PAYMENT_UPDATE_SUCCESS","BILLING_SUBSCRIPTION_UPDATE_SUCCESS","MEDIA_ENGINE_SET_DESKTOP_SOURCE","STREAM_START","STREAM_STOP","STREAM_CLOSE","HOTSPOT_HIDE","AUDIO_SET_NOISE_CANCELLATION","AUDIO_SET_NOISE_SUPPRESSION","OVERLAY_SOUNDBOARD_SOUNDS_FETCH_REQUEST","GUILD_SOUNDBOARD_SOUND_PLAY_LOCALLY"]),
o.Z.addInterceptor((function(t){if(Y)return!1;var n=e.has(t.type);if(n)switch(t.type){case"CHANNEL_SELECT":var r=t.guildId,i=t.channelId;n=!1;if(null==i)break;(0,u.lW)({type:I.BmY.DISPATCH,pid:(0,g.QF)(),token:(0,g.Ht)(),payloads:[{type:"CHANNEL_PRELOAD",guildId:r===I.ME?null:r,channelId:i,context:I.e3s},{type:"OVERLAY_SELECT_CHANNEL",guildId:r,channelId:i}]});break;case"OVERLAY_SET_DISPLAY_NAME_MODE":case"OVERLAY_SET_DISPLAY_USER_MODE":case"OVERLAY_SET_AVATAR_SIZE_MODE":case"OVERLAY_SET_NOTIFICATION_POSITION_MODE":case"OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE":case"OVERLAY_SET_UI_LOCKED":case"OVERLAY_SET_INPUT_LOCKED":case"OVERLAY_SET_TEXT_WIDGET_OPACITY":case"LAYOUT_UPDATE_WIDGET":case"LAYOUT_SET_PINNED":case"LAYOUT_SET_TOP_WIDGET":case"LAYOUT_CREATE":case"CATEGORY_EXPAND":case"CATEGORY_COLLAPSE":case"VOICE_CHANNEL_SELECT":case"CHANNEL_ACK":case"AUDIO_TOGGLE_SELF_MUTE":case"AUDIO_TOGGLE_SELF_DEAF":case"AUDIO_TOGGLE_LOCAL_MUTE":case"AUDIO_SET_LOCAL_VIDEO_DISABLED":
case"AUDIO_SET_LOCAL_VOLUME":case"AUDIO_SET_INPUT_DEVICE":case"AUDIO_SET_INPUT_VOLUME":case"AUDIO_SET_OUTPUT_VOLUME":case"AUDIO_SET_OUTPUT_DEVICE":case"AUDIO_SET_MODE":case"LOAD_MESSAGES_SUCCESS":case"LOAD_MESSAGES_FAILURE":case"LOAD_MESSAGES":case"CHANNEL_PRELOAD":case"SKU_PURCHASE_MODAL_OPEN":case"SKU_PURCHASE_MODAL_CLOSE":case"SKU_PURCHASE_PREVIEW_FETCH_SUCCESS":case"SKU_PURCHASE_START":case"SKU_PURCHASE_SUCCESS":case"SKU_PURCHASE_FAIL":case"SKU_PURCHASE_SHOW_CONFIRMATION_STEP":case"SKU_PURCHASE_CLEAR_ERROR":case"PURCHASE_CONFIRMATION_MODAL_OPEN":case"PURCHASE_CONFIRMATION_MODAL_CLOSE":case"OVERLAY_ACTIVATE_REGION":case"OVERLAY_DEACTIVATE_ALL_REGIONS":case"INVITE_MODAL_CLOSE":case"LAYOUT_DELETE_WIDGET":case"LAYOUT_DELETE_ALL_WIDGETS":case"LAYOUT_CREATE_WIDGETS":case"GIFT_CODE_REDEEM":case"GIFT_CODE_REDEEM_SUCCESS":case"GIFT_CODE_REDEEM_FAILURE":case"PREMIUM_REQUIRED_MODAL_OPEN":case"PREMIUM_REQUIRED_MODAL_CLOSE":case"PREMIUM_PAYMENT_MODAL_OPEN":case"PREMIUM_PAYMENT_MODAL_CLOSE":
case"PREMIUM_PAYMENT_SUBSCRIBE_FAIL":case"PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS":case"PREMIUM_PAYMENT_SUBSCRIBE_START":case"PREMIUM_PAYMENT_ERROR_CLEAR":case"PREMIUM_PAYMENT_SELECT_PLAN":case"PREMIUM_PAYMENT_UPDATE_FAIL":case"PREMIUM_PAYMENT_UPDATE_SUCCESS":case"BILLING_SUBSCRIPTION_UPDATE_SUCCESS":case"STREAM_START":case"STREAM_CLOSE":case"MEDIA_ENGINE_SET_DESKTOP_SOURCE":case"HOTSPOT_HIDE":case"AUDIO_SET_NOISE_CANCELLATION":case"AUDIO_SET_NOISE_SUPPRESSION":n=!1;default:(0,u.lW)({type:I.BmY.DISPATCH,pid:(0,g.QF)(),token:(0,g.Ht)(),payloads:[t]})}return n}));var e;(0,u.Ty)(z,(0,g.Ht)());(0,u.$j)();(0,u.lW)({type:I.BmY.CONNECT,pid:(0,g.QF)(),token:(0,g.Ht)()})},OVERLAY_INITIALIZE:function(e){var t=e.focusedPID;P=t},OVERLAY_READY:function(){var e=V.selectedGuildId,t=V.selectedChannelId;if(null!=e&&(!d.ZP.hasChannels(e)||null!=t&&!d.ZP.hasSelectableChannel(e,t))){e=null;t=null}if(null!=t&&null==f.Z.getChannel(t)){e=null;t=null}null==e&&null==t&&(e=h.Z.getGuildId());if(null!=e&&null==t){
var n=d.ZP.getDefaultChannel(e);null!=n&&(t=n.id)}V.selectedGuildId=e;V.selectedChannelId=t},OVERLAY_FOCUSED:function(e){var t=e.pid;P=t;W()},OVERLAY_SELECT_CHANNEL:function(e){var t=e.guildId,n=e.channelId;V.selectedGuildId=t;V.selectedChannelId=n},OVERLAY_SELECT_CALL:function(e){var t=e.callId;w=t},CALL_DELETE:function(){w=null},LAYOUT_CREATE:function(){},OVERLAY_SET_DISPLAY_NAME_MODE:function(e){var t=e.mode;V.displayNameMode=t},OVERLAY_SET_DISPLAY_USER_MODE:function(e){var t=e.mode;V.displayUserMode=t},OVERLAY_SET_AVATAR_SIZE_MODE:function(e){var t=e.mode;V.avatarSizeMode=t},OVERLAY_SET_NOTIFICATION_POSITION_MODE:function(e){var t=e.mode;V.notificationPositionMode=t},OVERLAY_SET_TEXT_CHAT_NOTIFICATION_MODE:function(e){var t=e.mode;V.textChatNotifications=t},OVERLAY_SET_TEXT_WIDGET_OPACITY:function(e){var t=e.opacity,n=V.textWidgetOpacity!==t;V.textWidgetOpacity=t;return n},OVERLAY_DISABLE_EXTERNAL_LINK_ALERT:function(){V.disableExternalLinkAlert=!0},
OVERLAY_INCOMPATIBLE_APP:function(){j=!0},OVERLAY_SET_UI_LOCKED:function(e){var t=e.locked,n=e.pid;t?Z.delete(n):Z.add(n);K();W();k=!1},OVERLAY_ACTIVATE_REGION:function(e){var t=e.region;if(P!==(0,g.QF)())return!1;if(H.has(t))return!1;H.add(t)},OVERLAY_DEACTIVATE_ALL_REGIONS:K,OVERLAY_SET_PREVIEW_IN_GAME_MODE:function(e){k=e.isPreviewingInGame},WINDOW_RESIZED:function(){if(__OVERLAY__){var e=v.Z.windowSize();(0,g.Te)(e)||(k=!1)}}})},53452:(e,t,n)=>{n.d(t,{Z:()=>r});const r={Millis:Object.freeze({SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,WEEK:6048e5,DAYS_30:2592e6})}},473291:(e,t,n)=>{n.d(t,{kC:()=>g,o3:()=>v,dY:()=>I,cS:()=>O});var r=n(496486),i=n.n(r),o=n(730381),a=n.n(o),u=n(547308),s=n(102921),l=n(2590),c=n(142520),f=/sketchfab/i,d=/^https:\/\/sketchfab\.com/i,_=/youtube|steam|imgur|vimeo|sketchfab|soundcloud|streamable|twitch|vid\.me|twitter/i,h=new Set([l.hBH.AUTO_MODERATION_MESSAGE,l.hBH.AUTO_MODERATION_NOTIFICATION,l.hBH.RICH]);function E(e){var t=e.width,n=e.height
;return t>0&&n>0}function p(e){return{url:e.url,proxyURL:e.proxy_url,width:e.width,height:e.height}}function g(e,t,n){var r={id:i().uniqueId("embed_"),url:n.url,type:n.type,rawTitle:n.title,rawDescription:n.description,referenceId:n.reference_id};null!=n.footer&&(r.footer={text:n.footer.text,iconURL:n.footer.icon_url,iconProxyURL:n.footer.proxy_icon_url});null!=n.author&&null!=n.author.name&&(r.author={name:n.author.name,url:n.author.url,iconURL:n.author.icon_url,iconProxyURL:n.author.proxy_icon_url});null!=n.provider&&null!=n.provider.name&&(r.provider={name:n.provider.name,url:n.provider.url});null!=n.timestamp&&(r.timestamp=a()(new Date(n.timestamp)));null!=n.color&&(r.color=(0,u.ho)(n.color,!0));if(null!=n.thumbnail&&E(n.thumbnail))switch(r.type){case l.hBH.ARTICLE:case l.hBH.IMAGE:r.image=p(n.thumbnail);break;default:r.thumbnail=p(n.thumbnail)}null!=n.image&&E(n.image)&&(r.image=p(n.image));if(null!=n.video){null==r.thumbnail&&null!=n.video.proxy_url&&E(n.video)&&(r.thumbnail={
width:n.video.width,height:n.video.height,url:"".concat(n.video.proxy_url,"?format=jpeg")});null!=r.thumbnail&&E(n.video)&&function(e,t,n){if(null!=t&&f.test(t.name)||d.test(n.url))return!1;var r=null!=n.proxy_url||/^https:/i.test(n.url);s.Z.extractTimestamp(e)<1492472454139&&(r=r&&null!=t&&_.test(t.name));return r}(t,n.provider,n.video)&&(r.video=p(n.video))}if(h.has(r.type)){var o,c=null!==(o=n.fields)&&void 0!==o?o:[];r.fields=c.map((function(e){return{rawName:e.name,rawValue:e.value,inline:e.inline}}))}else r.fields=[];return r}function v(e){var t=new Map,n=[];e.forEach((function(e){if(null!=e.url){var r=t.get(e.url);if(null!=r){if(null!=e.image){if(null==r.images){r.images=[];null!=r.image&&r.images.push(r.image)}r.images.push(e.image)}}else{n.push(e);t.set(e.url,e)}}else n.push(e)}));return n}function I(e){var t=e.image,n=e.video,r=e.type,i=e.author,o=e.rawTitle;return(null!=t||null!=n)&&(r===l.hBH.GIFV||r!==l.hBH.RICH&&null==i&&null==o)}function O(e){
if(!e.author.isClyde()||0===e.embeds.length)return!1;var t=e.embeds[0],n=null!=t.fields&&3===t.fields.length&&"Thought"===t.fields[0].rawName&&"Tool"===t.fields[1].rawName&&"Result"===t.fields[2].rawName;return t.type===l.hBH.RICH&&(t.rawTitle===c.x.THOUGHT_EMBED_TITLE||n)}},644144:(e,t,n)=>{n.d(t,{Bg:()=>U,Z0:()=>D,Q_:()=>L,Nz:()=>w,bT:()=>Z,dM:()=>F,TO:()=>Y,dQ:()=>G,L2:()=>H,iM:()=>k,e$:()=>B,z2:()=>V,JT:()=>x});var r=n(973889),i=n(94340),o=n(473903),a=n(652591),u=n(72580),s=n(850841),l=n(968696),c=n(534681),f=n(2590),d=n(203600),_=n(473708);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){n(e);return}u.done?t(s):Promise.resolve(s).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){E(o,r,i,a,u,"next",e)}function u(e){E(o,r,i,a,u,"throw",e)}a(void 0)}))}}function g(e,t,n){
t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){u=!0;i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}var m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:a.label++
;return{value:o[1],done:!1};case 5:a.label++;r=o[1];o=[0];continue;case 7:o=a.ops.pop();a.trys.pop();continue;default:if(!(i=a.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1];i=o;break}if(i&&a.label<i[2]){a.label=i[2];a.ops.push(o);break}i[2]&&a.ops.pop();a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},T=l.Z.escape(window.GLOBAL_ENV.GIFT_CODE_HOST),y=["discordapp.com/gifts","discord.com/gifts"].map((function(e){return l.Z.escape(e)})),A=[T].concat(I(y)).join("|"),N=new RegExp("(?: |^|https?://)(?:".concat(A,")/([a-z0-9-]+)"),"gi"),S=I(["discord.com/billing/promotions","promos.discord.gg"].map((function(e){return l.Z.escape(e)}))).join("|"),C=new RegExp("(?: |^|https?://)(?:".concat(S,")/([a-z0-9-]+)"),"gi"),M=function(e,t){return Array(t).fill(void 0).map((function(){
return"[".concat("abcdefghjkmnpqrstuvwxyzABCDEFGHJKMNPQRSTUVWXYZ23456789","]{").concat(e,"}")})).join("-?")},b=[M(4,4),M(4,6),M(5,3),"[a-zA-Z]{4}-?[0-9a-zA-Z]{4}-?[a-zA-Z]{4}"].join("|"),R=new RegExp("^(".concat("WUMP-?",")?(").concat(b,")$"));function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return"".concat(e,":").concat(null!=t?t:"",":").concat(null!=n?n:"")}function D(e){var t=v(e.split(":"),3),n=t[0],r=t[1],i=t[2];return{skuId:n,subscriptionPlanId:""===r?null:r,giftStyle:""!==i&&null!=i?Number.parseInt(i):void 0}}function P(e){return e.replace(/[^A-Za-z0-9]/g,"")}function L(e){if(null==e)return[];for(var t,n=new Set;null!=(t=N.exec(e))&&n.size<3;)n.add(P(t[1]));for(;null!=(t=C.exec(e))&&n.size<3;)n.add(P(t[1]));return Array.from(n)}function w(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=window.GLOBAL_ENV.GIFT_CODE_HOST;if(null!=n)e="/".concat(t);else{n=location.host;e="/gifts/".concat(t)
}return"".concat(location.protocol,"//").concat(n).concat(e)}function Z(e){return j.apply(this,arguments)}function j(){j=p((function(e){var t,n,i,o,u,s=arguments;return m(this,(function(l){switch(l.label){case 0:t=s.length>1&&void 0!==s[1]&&s[1],n=s.length>2&&void 0!==s[2]&&s[2];l.label=1;case 1:l.trys.push([1,3,,4]);return[4,(0,c.Kb)({url:f.ANM.GIFT_CODE_RESOLVE(e),query:{with_application:t,with_subscription_plan:n},oldFormErrors:!0})];case 2:i=l.sent();o=i.body;a.default.track(f.rMx.GIFT_CODE_RESOLVED,{resolved:!0,gift_code:o.code,gift_code_max_uses:o.max_uses,sku_id:o.store_listing.sku.id,sku_type:o.store_listing.sku.type,application_id:o.store_listing.sku.application_id,store_title:o.store_listing.sku.name},{flush:!0});return[2,o];case 3:u=l.sent();a.default.track(f.rMx.GIFT_CODE_RESOLVED,{resolved:!1,gift_code:e});throw new r.Z(u);case 4:return[2]}}))}));return j.apply(this,arguments)}function F(e,t){a.default.track(f.rMx.GIFT_CODE_COPIED,function(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){g(e,t,n[t])}))}return e}({},(0,i.Z)(t,!1,!1),e.analyticsData))}function Y(e,t,n,r,i){return null!=n||!r&&!i&&null!=e?f.wZ8.ERROR:r&&(t.isSubscription||null!=e)?f.wZ8.SUCCESS:f.wZ8.CONFIRM}function G(e,t,n){switch(e){case f.wZ8.ERROR:return _.Z.Messages.GIFT_CONFIRMATION_HEADER_FAIL;case f.wZ8.SUCCESS:return t.isSubscription?_.Z.Messages.GIFT_CONFIRMATION_HEADER_SUCCESS_NITRO.format({skuName:n.name}):_.Z.Messages.GIFT_CONFIRMATION_HEADER_SUCCESS;case f.wZ8.CONFIRM:default:return t.isSubscription?_.Z.Messages.GIFT_CONFIRMATION_HEADER_CONFIRM_NITRO.format({skuName:n.name}):_.Z.Messages.GIFT_CONFIRMATION_HEADER_CONFIRM}}function H(e,t){switch(e){case f.wZ8.ERROR:
return _.Z.Messages.GIFT_CONFIRMATION_BUTTON_FAIL;case f.wZ8.SUCCESS:return __OVERLAY__?_.Z.Messages.GIFT_CONFIRMATION_BUTTON_NOICE:t.isSubscription?_.Z.Messages.GIFT_CONFIRMATION_BUTTON_SUBSCRIPTION_SUCCESS:_.Z.Messages.GIFT_CONFIRMATION_BUTTON_GO_TO_LIBRARY;case f.wZ8.CONFIRM:default:return null!=t.giftStyle?t.isClaimed?_.Z.Messages.GIFT_CONFIRMATION_BUTTON_CONFIRM:_.Z.Messages.GIFT_CONFIRMATION_BUTTON_CONFIRM_MOBILE:t.isSubscription?_.Z.Messages.GIFT_CONFIRMATION_BUTTON_CONFIRM_SUBSCRIPTION:_.Z.Messages.GIFT_CONFIRMATION_BUTTON_CONFIRM}}function k(e){var t=e.step,n=e.sku,r=e.libraryApplication,i=e.error,o=e.accepted,a=e.accepting,u=e.onGoToLibrary,s=e.subscriptionPlan,l=void 0===s?null:s;switch(t){case f.wZ8.ERROR:return B(r,i,o,a,u);case f.wZ8.SUCCESS:if(null!=l){if(null!=l.premiumSubscriptionType){if(l.premiumSubscriptionType===d.p9.TIER_2){
return(l.interval===d.rV.MONTH?_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_PREMIUM_TIER_2_MONTHLY:_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_PREMIUM_TIER_2_YEARLY).format({intervalCount:l.intervalCount})}return(l.interval===d.rV.MONTH?_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_PREMIUM_TIER_1_MONTHLY:_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_PREMIUM_TIER_1_YEARLY).format({intervalCount:l.intervalCount})}return(l.interval===d.rV.MONTH?_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_GENERIC_SUBSCRIPTION_MONTHLY:_.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS_GENERIC_SUBSCRIPTION_YEARLY).format({skuName:n.name,intervalCount:l.intervalCount})}return _.Z.Messages.GIFT_CONFIRMATION_BODY_SUCCESS.format({skuName:n.name});case f.wZ8.CONFIRM:default:if(null!=l){return(l.interval===d.rV.MONTH?_.Z.Messages.GIFT_CONFIRMATION_BODY_SUBSCRIPTION_MONTHLY_CONFIRM:_.Z.Messages.GIFT_CONFIRMATION_BODY_SUBSCRIPTION_YEARLY_CONFIRM).format({skuName:n.name,intervalCount:l.intervalCount})}
return _.Z.Messages.GIFT_CONFIRMATION_BODY_CONFIRM.format({skuName:n.name})}}function B(e,t,n,r,i){var a=n||r?void 0:e,u=_.Z.Messages.GIFT_CONFIRMATION_BODY_OWNED.format({onGoToLibrary:i});if(null!=a)return u;if(null==t)return null;switch(t.code){case f.evJ.INVALID_GIFT_SELF_REDEMPTION:return _.Z.Messages.GIFT_CONFIRMATION_BODY_SELF_GIFT_NO_PAYMENT;case f.evJ.INVALID_GIFT_REDEMPTION_EXHAUSTED:return _.Z.Messages.GIFT_CONFIRMATION_BODY_CLAIMED;case f.evJ.INVALID_GIFT_REDEMPTION_OWNED:return u;case f.evJ.UNKNOWN_GIFT_CODE:return _.Z.Messages.GIFT_CONFIRMATION_BODY_INVALID;case f.evJ.INVALID_GIFT_REDEMPTION_SUBSCRIPTION_INCOMPATIBLE:var l=o.default.getCurrentUser();return _.Z.Messages.GIFT_EMBED_BODY_SUBSCRIPTION_MISMATCH.format({planName:(0,s.M5)(l,d.p9.TIER_2)?_.Z.Messages.PREMIUM_TIER_2:_.Z.Messages.PREMIUM_TIER_1});case f.evJ.INVALID_GIFT_REDEMPTION_SUBSCRIPTION_MANAGED:return _.Z.Messages.GIFT_CONFIRMATION_BODY_ERROR_SUBSCRIPTION_MANAGED
;case f.evJ.INVALID_GIFT_REDEMPTION_INVOICE_OPEN:return _.Z.Messages.GIFT_CONFIRMATION_BODY_ERROR_INVOICE_OPEN;case f.evJ.INVALID_GIFT_REDEMPTION_FRAUD_REJECTED:return _.Z.Messages.GIFT_CODE_SMITE_REJECT_HELP_TEXT;case f.evJ.BILLING_NON_REFUNDABLE_PAYMENT_SOURCE:return _.Z.Messages.GIFT_CODE_PAYMENT_SOURCE_INVALID;default:return _.Z.Messages.GIFT_CONFIRMATION_BODY_UNKNOWN_ERROR}}function V(e,t,n){var r=t.applicationId,i=null!=e.entitlementBranches&&e.entitlementBranches.length>0?e.entitlementBranches:[r],o=i.map((function(e){return n.getLibraryApplication(r,e,!0)})).filter(u.lm);return o.length===i.length?o[0]:null}function x(e){var t=e.trim().split("/").pop().match(R);if(null==t)return null;var n=v(t,3),r=(n[0],n[1],n[2]);return null==r?null:r.replace(new RegExp("-","g"),"")}},66121:(e,t,n)=>{n.d(t,{KR:()=>i,w_:()=>o,jL:()=>a,Ox:()=>u,PY:()=>s,R:()=>l,ou:()=>c,vS:()=>f,o4:()=>d,uq:()=>_});function r(e){return Math.max(Math.min(e,1),0)}function i(e,t){
var n=e.top,i=e.bottom,o=e.left,a=e.right;return{top:null!=n?Math.floor(r(n)*t.height):null,left:null!=o?Math.floor(r(o)*t.width):null,bottom:null!=i?Math.floor(r(i)*t.height):null,right:null!=a?Math.floor(r(a)*t.width):null}}function o(e,t){var n=e.width,i=e.height;return{width:"auto"===n?n:Math.floor(r(n)*t.width),height:"auto"===i?i:Math.floor(r(i)*t.height)}}function a(e,t){var n=e.top,i=e.bottom,o=e.left,a=e.right;return{top:null!=n?r(n/t.height):null,left:null!=o?r(o/t.width):null,bottom:null!=i?r(i/t.height):null,right:null!=a?r(a/t.width):null}}function u(e,t){var n=e.width,r=e.height;return{width:"auto"===n?n:n/t.width,height:"auto"===r?r:r/t.height}}function s(e,t,n,r,i){var o=e.top,a=e.bottom,u=e.left,s=e.right;if(null==o&&null==a){o=0;a=n-i}else null==o&&null!=a?o=n-(a+i):null!=o&&(a=n-(o+i));if(null==u&&null==s){u=0;s=t-r}else null==u&&null!=s?u=t-(s+r):null==s&&null!=u&&(s=t-(u+r))
;if(null==o||null==a||null==u||null==s)throw new Error("Logically this can never happen based on our if/else statements");return{top:o,left:u,bottom:a,right:s}}function l(e){var t=e.top,n=e.left,r=e.bottom,i=e.right;0===t||t<=r?r=null:t=null;0===n||n<=i?i=null:n=null;return{top:t,left:n,bottom:r,right:i}}function c(e){var t=e.top,n=e.left,r=e.bottom,i=e.right;if(r<0){t+=r;r=0}if(t<0){r+=t;t=0}if(i<0){n+=i;i=0}if(n<0){i+=n;n=0}return{top:t,left:n,bottom:r,right:i}}function f(e,t,n){e=i(e,n);var r=o(t,n),a=r.width,u=r.height;a="string"==typeof a?0:a;u="string"==typeof u?0:u;return s(e,n.width,n.height,a,u)}function d(e,t,n){var r=e.top,i=e.left,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0},f=o.x,d=o.y,_=t.width,h=t.height,E=l(c(s({top:r+d,left:i+f,bottom:null,right:null},n.width,n.height,"number"==typeof _?_:0,"number"==typeof h?h:0)));return[a(E,n),u(t,n)]}function _(e,t,n){var r=e.top,i=e.right,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0
},f=o.x,d=o.y,_=t.width,h=t.height,E=l(c(s({top:r+d,left:null,bottom:null,right:i-f},n.width,n.height,"number"==typeof _?_:0,"number"==typeof h?h:0)));return[a(E,n),u(t,n)]}},773148:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(202351),i=n(61209),o=n(21372),a=n(840922),u=n(749565),s=n(473708);function l(e,t,n){if(null==n)return null;if(null!=e)return o.ZP.getNick(e,n.id);if(null!=t){var r=i.Z.getChannel(t);if(null==r?void 0:r.isPrivate())return a.Z.getNickname(n.id)}return null}function c(e,t,n){return null==n?s.Z.Messages.UNKNOWN_USER:null!==(r=l(e,t,n))&&void 0!==r?r:u.ZP.getName(n);var r}const f={getNickname:l,getName:c,useName:function(e,t,n){return(0,r.e7)([o.ZP,i.Z,a.Z],(function(){return c(e,t,n)}))}}},506474:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(667237),i=n.n(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0)
;Object.defineProperty(e,r.key,r)}}var u=new(n(296602).Z)("Queue"),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;o(this,e);this.logger=t;this.defaultRetryAfter=n;this.queue=new(i());this.timeout=null;this.draining=!1}var t=e.prototype;t.enqueue=function(e,t){this.queue.push({message:e,success:t});this._drainIfNecessary()};t._drainIfNecessary=function(){var e=this;if(null===this.timeout&&0!==this.queue.length&&!0!==this.draining){this.draining=!0;var t=this.queue.shift(),n=t.message,r=t.success;this.drain(n,(function(n,i){e.draining=!1;if(null==n){setImmediate((function(){return e._drainIfNecessary()}));try{r(i)}catch(t){e.logger.error("",t)}}else{var o,a=null!==(o=n.retryAfter)&&void 0!==o?o:e.defaultRetryAfter;e.logger.info("Rate limited. Delaying draining of queue for ".concat(a," ms."));e.timeout=setTimeout((function(){e.queue.unshift(t);e.timeout=null;e._drainIfNecessary()}),a)}
}))}};!function(e,t,n){t&&a(e.prototype,t);n&&a(e,n)}(e,[{key:"length",get:function(){return this.queue.length}}]);return e}()},226810:(e,t,n)=>{n.d(t,{Tq:()=>o,Gr:()=>a,FW:()=>u,qU:()=>s,Js:()=>l,QF:()=>c,Ht:()=>f,Te:()=>d});n(458960);var r,i=n(120415),o=(n(2590),2),a={width:3840,height:2160},u={width:768,height:432},s="overlay_default",l=-2;function c(){if(void 0!==r)return r;var e,t=null!==(e=new URLSearchParams(window.location.search).get("pid"))&&void 0!==e?e:"",n=parseInt(t,10);isNaN(n)&&(n=-1);return r=n}function f(){return new URLSearchParams(window.location.search).get("rpc_auth_token")}function d(e){return!i.FB||e.width>=u.width&&e.height>=u.height}}}]);
//# sourceMappingURL=383404ced37018453be8.js.map