"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[40448],{491681:(n,e,t)=>{t.d(e,{Z:()=>l});t(925334);var r=t(173436);function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function o(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],l=!0,u=!1;try{for(t=t.call(n);!(l=(r=t.next()).done);l=!0){o.push(r.value);if(e&&o.length===e)break}}catch(n){u=!0;i=n}finally{try{l||null==t.return||t.return()}finally{if(u)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return i(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(n,e)}(n,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);this.initializedCount=0;this.actions={};this.stores=new Map}var e=n.prototype;e.initialize=function(){this.initializedCount++;if(!(this.initializedCount>1)){this._initialize();Object.entries(this.actions).forEach((function(n){var e=o(n,2),t=e[0],i=e[1];r.Z.subscribe(t,"function"==typeof i?i:i.callback)}));this.stores.forEach((function(n,e){e.addChangeListener(n);n()}))}};e.terminate=function(n){if(!(this.initializedCount<=0)){n?this.initializedCount=0:this.initializedCount--;if(0===this.initializedCount){this._terminate();Object.entries(this.actions).forEach((function(n){var e=o(n,2),t=e[0],i=e[1];r.Z.subscribe(t,"function"==typeof i?i:i.callback)}))}}};e._initialize=function(){}
;e._terminate=function(){};return n}()},485923:(n,e,t)=>{t.d(e,{Z:()=>u});var r=t(368365),i=t(53551),o=t(890889),l=t(375650);function u(n){if(null==n)return!1;var e=n.type;if(null==n.guild_id||!i.zS.has(e))return!1;if(n.isGuildVocal()&&!o.ZP.canEveryoneRole(l.Pl.CONNECT,n))return!0;var t=n.permissionOverwrites[n.guild_id];return null!=t&&r.Z.has(t.deny,l.Pl.VIEW_CHANNEL)}},403348:(n,e,t)=>{t.d(e,{e:()=>a});var r=t(675860),i=t(173436),o=t(913416),l=t(33055),u=t(461061);function a(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!l.Z.isFullServerPreview(n)){i.Z.dispatch({type:"GUILD_MEMBER_UPDATE_LOCAL",guildId:n,roles:e.roles,flags:e.flags});return r.Z.patch({url:u.ANM.SET_GUILD_MEMBER(n),body:e,oldFormErrors:!!t||void 0})}(0,o.aq)(n,{memberOptions:e})}},229620:(n,e,t)=>{t.d(e,{s:()=>u});t(363010);var r=t(537204),i=t(356004),o=t(890889),l=t(461061);function u(n,e){return r.Z.isChannelGated(n,e)||o.ZP.canEveryoneRole(l.Plq.VIEW_CHANNEL,i.Z.getChannel(e))}},
656284:(n,e,t)=>{t.d(e,{Z:()=>L});var r=t(496486),i=t.n(r),o=t(675860),l=t(173436),u=t(23816),a=t(403348),s=t(204424),c=t(913416),d=t(33055),f=t(290495),p=t(356004),_=t(212218),g=t(859023),v=t(932847),b=t(418674),h=t(90816),O=t(937026),y=t(836670),m=t(17611),E=t(328050),S=t(461061);function P(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function I(n,e,t,r,i,o,l){try{var u=n[o](l),a=u.value}catch(n){t(n);return}u.done?e(a):Promise.resolve(a).then(r,i)}function N(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function D(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t
}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function w(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],l=!0,u=!1;try{for(t=t.call(n);!(l=(r=t.next()).done);l=!0){o.push(r.value);if(e&&o.length===e)break}}catch(n){u=!0;i=n}finally{try{l||null==t.return||t.return()}finally{if(u)throw i}}return o}}(n,e)||C(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(n){return function(n){if(Array.isArray(n))return P(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||C(n)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(n,e){if(n){if("string"==typeof n)return P(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(n,e):void 0}}var T=function(n,e){var t,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:l.label++
;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(n,l)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Z(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!d.Z.isFullServerPreview(n)){var t=y.Z.getOnboardingPrompts(n),r=y.Z.getOnboardingResponses(n),i=t.map((function(n){return n.options.filter((function(n){return r.includes(n.id)}))})).flat(),u={},a={};t.forEach((function(n){u[n.id]=Date.now();n.options.forEach((function(n){return a[n.id]=Date.now()}))}));return e?o.Z.post({url:S.ANM.GUILD_ONBOARDING_RESPONSES(n),body:{
onboarding_responses:i.map((function(n){return n.id})),onboarding_prompts_seen:u,onboarding_responses_seen:a,update_roles_and_channels:!0}}).then((function(e){return l.Z.dispatch({type:"GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS",guildId:n,options:e.body.onboarding_responses})})).catch((function(n){return O.Z.captureException(n)})):o.Z.put({url:S.ANM.GUILD_ONBOARDING_RESPONSES(n),body:{onboarding_responses:i.map((function(n){return n.id})),onboarding_prompts_seen:u,onboarding_responses_seen:a,update_roles_and_channels:!0}}).then((function(e){return l.Z.dispatch({type:"GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS",guildId:n,options:e.body.onboarding_responses})})).catch((function(n){return O.Z.captureException(n)}))}}const L={selectOption:function(n,e,t,r){var o=y.Z.getOnboardingPrompt(e);if(null!=o){var u=o.singleSelect?i().without(i().map(o.options,"id"),t):[];l.Z.dispatch({type:"GUILD_ONBOARDING_SELECT_OPTION",guildId:n,promptId:e,optionId:t,selected:r,removedOptionIds:u})}},
updateOnboardingResponses:i().debounce(Z,1e3),updateRolesLocal:function(n,e,t){var r,o,u=null!==(o=null===(r=_.ZP.getSelfMember(n))||void 0===r?void 0:r.roles)&&void 0!==o?o:[];(e.length>0||t.length>0)&&l.Z.dispatch({type:"GUILD_MEMBER_UPDATE_LOCAL",guildId:n,roles:i().difference(i().union(u,e),t),addedRoleIds:e,removedRoleIds:t})},completeOnboarding:function(n,e){var t=e.length>0?e[e.length-1]:null,r=y.Z.getSelectedOptions(n),i=(0,m.L6)(r),o=(0,m.dX)(r),l=y.Z.getEnabled(n)?y.Z.getDefaultChannelIds(n):[],a=w((0,m.Ee)(n,e,l),2),f=a[0],O=a[1],P=A(o).concat(A(l)),I=P.map((function(n){return p.Z.getChannel(n)})).filter(h.lm),C=(0,E.v)(n,new Set(P),I,!0).length,T=null==t?[]:t.options.map((function(n){return n.id}));v.default.track(S.rMx.GUILD_ONBOARDING_STEP_COMPLETED,D(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){
return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){N(n,e,t[e])}))}return n}({},(0,u.hH)(n)),{step:e.length-1,options_selected:null==t?0:r.filter((function(n){return T.includes(n.id)})).length,skipped:T.length>0,back:!1,in_onboarding:!0,is_final_step:!0,roles_granted:i.size,channels_granted:C,guild_onboarding_covered_channel_ids:f.map((function(n){return n.id})),guild_onboarding_uncovered_channel_ids:O.map((function(n){return n.id}))}));Z(n,!0);if(d.Z.isFullServerPreview(n)){(0,c.zS)(n,P,[]);(0,c.aq)(n,{optInEnabled:!0});(0,c.og)(n,Array.from(i));var L=g.default.getCurrentUser();if(null!=L){var G,j,R=null!==(j=null===(G=_.ZP.getMember(n,L.id))||void 0===G?void 0:G.flags)&&void 0!==j?j:0;(0,c.aq)(n,{memberOptions:{flags:(0,b.mB)(R,s.qQ.COMPLETED_ONBOARDING,!0)}})}}},onboardExistingMember:function(n,e){var t=new Set(e);(y.Z.getEnabled(n)?y.Z.getDefaultChannelIds(n):[]).forEach((function(n){return t.add(n)}));t.size>0&&(0,f.Mo)(n,Array.from(t),!0,{
page:S.ZY5.GUILD_ONBOARDING});var r=g.default.getCurrentUser();if(null!=r){var i,o,l=null!==(o=null===(i=_.ZP.getMember(n,r.id))||void 0===i?void 0:i.flags)&&void 0!==o?o:0;(0,a.e)(n,{flags:(0,b.mB)(l,s.qQ.COMPLETED_ONBOARDING,!0)})}},finishOnboarding:function(n){l.Z.dispatch({type:"GUILD_ONBOARDING_COMPLETE",guildId:n})},setUserOnboardingStep:function(n,e){l.Z.dispatch({type:"GUILD_ONBOARDING_SET_STEP",guildId:n,step:e})},resetOnboarding:function(n){return(e=function(){var e,t,r,i;return T(this,(function(o){switch(o.label){case 0:if(null==(e=g.default.getCurrentUser()))return[3,2];i=null!==(r=null===(t=_.ZP.getMember(n,e.id))||void 0===t?void 0:t.flags)&&void 0!==r?r:0;return[4,(0,a.e)(n,{flags:(0,b.mB)(i,s.qQ.COMPLETED_ONBOARDING,!1)})];case 1:o.sent();o.label=2;case 2:return[2]}}))},function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function l(n){I(o,r,i,l,u,"next",n)}function u(n){I(o,r,i,l,u,"throw",n)}l(void 0)}))})();var e}}},182434:(n,e,t)=>{
t.d(e,{rj:()=>b,eM:()=>h,rK:()=>O,I1:()=>y});var r=t(675860),i=t(173436),o=t(23816),l=t(204424),u=t(631134),a=t(212218),s=t(653772),c=t(932847),d=t(418674),f=t(353637),p=t(461061);function _(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function g(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){_(n,e,t[e])}))}return n}function v(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t
}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function b(n){c.default.track(p.rMx.GUILD_ONBOARDING_LOADED,v(g({},(0,o.hH)(n)),{has_new_prompts:!1,number_of_prompts:0}))}function h(n){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_START",guildId:n});return r.Z.get({url:p.ANM.GUILD_ONBOARDING(n)}).then((function(e){var t=e.body,r=(0,f.cf)(t);return i.Z.dispatch(g({type:"GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS",guildId:n},r)).then((function(){return r.prompts}))}),(function(e){i.Z.dispatch({type:"GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE",guildId:n});return e}))}function O(n){var e,t,r=u.default.getId();if((0,d.yE)(null!==(t=null===(e=a.ZP.getMember(n,r))||void 0===e?void 0:e.flags)&&void 0!==t?t:0,l.qQ.COMPLETED_ONBOARDING))return Promise.resolve();var i=s.Z.getGuild(n);if(null==i||!i.hasFeature(p.oNc.GUILD_ONBOARDING))return Promise.resolve();y(n);return h(n)}function y(n){i.Z.dispatch({type:"GUILD_ONBOARDING_START",
guildId:n})}},353637:(n,e,t)=>{t.d(e,{iU:()=>s,NE:()=>c,NO:()=>d,YW:()=>f,M$:()=>p,qm:()=>_,b3:()=>g,md:()=>v,ht:()=>b,X:()=>h,fY:()=>O,l7:()=>u,FN:()=>a,RF:()=>y,ae:()=>m,yZ:()=>E,dr:()=>S,cf:()=>I});var r=t(110251),i=t.n(r),o=t(959797);function l(n,e){if(null==n)return{};var t,r,i=function(n,e){if(null==n)return{};var t,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++){t=o[r];e.indexOf(t)>=0||(i[t]=n[t])}return i}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++){t=o[r];e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}}return i}var u,a,s=100,c=50,d=100,f=15,p=12,_=50,g=4,v=7,b=12,h=5,O=12;!function(n){n[n.CUSTOMIZE=0]="CUSTOMIZE";n[n.BROWSE=1]="BROWSE"}(u||(u={}));!function(n){n[n.MULTIPLE_CHOICE=0]="MULTIPLE_CHOICE";n[n.DROPDOWN=1]="DROPDOWN"}(a||(a={}));function y(n){if(n.options.length>0)return!1;var e=m(),t=(e.id,l(e,["id"])),r=(n.id,l(n,["id"]));return i()(t,r)}function m(){return{id:String(Date.now()),
title:o.Z.Messages.ONBOARDING_PROMPT_DEFAULT_TITLE,options:[],singleSelect:!1,required:!1,inOnboarding:!0,type:a.MULTIPLE_CHOICE}}function E(n){return{id:String(Date.now()),title:"",options:[],singleSelect:!1,required:!1,inOnboarding:n,type:a.MULTIPLE_CHOICE}}function S(n){return{id:n.id,options:n.options.map((function(n){var e,t,r;return{id:n.id,channel_ids:n.channelIds,role_ids:n.roleIds,emoji:n.emoji,emoji_id:null===(e=n.emoji)||void 0===e?void 0:e.id,emoji_name:null===(t=n.emoji)||void 0===t?void 0:t.name,emoji_animated:null===(r=n.emoji)||void 0===r?void 0:r.animated,title:n.title,description:n.description}})),title:n.title,single_select:n.singleSelect,disabled:n.disabled,required:n.required,in_onboarding:n.inOnboarding,type:n.type}}function P(n){var e;return{id:n.id,options:n.options.map((function(n){return{id:n.id,channelIds:n.channel_ids,roleIds:n.role_ids,emoji:n.emoji,title:n.title,description:null!==(e=n.description)&&void 0!==e?e:""}})),title:n.title,
singleSelect:n.single_select,disabled:n.disabled,required:n.required,inOnboarding:n.in_onboarding,type:n.type}}function I(n){var e,t,r;return{prompts:n.prompts.map(P),defaultChannelIds:n.default_channel_ids,responses:null!==(e=n.responses)&&void 0!==e?e:[],enabled:n.enabled||n.enable_onboarding_prompts&&n.enable_default_channels,onboardingPromptsSeen:null!==(t=n.onboarding_prompts_seen)&&void 0!==t?t:{},onboardingResponsesSeen:null!==(r=n.onboarding_responses_seen)&&void 0!==r?r:{}}}},836670:(n,e,t)=>{t.d(e,{Z:()=>Z});var r=t(496486),i=t.n(r),o=t(363010),l=t(173436),u=t(33055),a=t(884061),s=t(346529),c=t(229620),d=t(853524);function f(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function p(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function _(n){_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return _(n)}function g(n){
for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){p(n,e,t[e])}))}return n}function v(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function b(n,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function h(n,e){
h=Object.setPrototypeOf||function(n,e){n.__proto__=e;return n};return h(n,e)}var O=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function y(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(n){return!1}}();return function(){var t,r=_(n);if(e){var i=_(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return b(this,t)}}var m={},E={},S={},P=!1;function I(n,e,t){return n.map((function(n){return function(n,e,t){for(var r=!1,i=[],o=0;o<n.options.length;o++){var l=n.options[o],u=null==t[l.id];u&&(r=!0);i.push(v(g({},l),{isUnseen:u}))}return v(g({},n),{options:i,hasNewAnswers:r,isNew:null==e[n.id]})}(n,e,t)}))}function N(n){
var e,t,r,i,o,l,u,a,s,c=n.guildId,d=n.updates,f=null!==(o=null!==(i=d.onboardingPromptsSeen)&&void 0!==i?i:null===(e=m[c])||void 0===e?void 0:e.onboardingPromptsSeen)&&void 0!==o?o:{},p=null!==(u=null!==(l=d.onboardingResponsesSeen)&&void 0!==l?l:null===(t=m[c])||void 0===t?void 0:t.onboardingResponsesSeen)&&void 0!==u?u:{},_=I(null!==(s=null!==(a=d.prompts)&&void 0!==a?a:null===(r=m[c])||void 0===r?void 0:r.prompts)&&void 0!==s?s:[],f,p);m[c]=v(g({},m[c],d),{prompts:_})}function D(n,e){if(null!=E[n]){var t={};Object.keys(E[n]).forEach((function(r){!e.includes(r)&&E[n][r]?t[r]=!0:e.includes(r)&&!1===E[n][r]&&(t[r]=!1)}));E[n]=t;var r=e.filter((function(n){return null==t[n]||!0===t[n]}));Object.keys(t).forEach((function(n){!0!==t[n]||e.includes(n)||r.push(n)}));m[n]=v(g({},m[n]),{responses:r})}}var w=[],A=[],C=[],T=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}});e&&h(n,e)}(t,n);var e=y(t);function t(){f(this,t);return e.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(d.ZP,u.Z)};r.getOnboardingPromptsForOnboarding=function(n){var e,t;return null!==(t=null===(e=m[n])||void 0===e?void 0:e.onboardingPrompts)&&void 0!==t?t:w};r.getOnboardingPrompts=function(n){var e,t;return null!==(t=null===(e=m[n])||void 0===e?void 0:e.prompts)&&void 0!==t?t:w};r.getOnboardingResponses=function(n){var e,t;if(u.Z.isFullServerPreview(n)){var r;return Array.from(null!==(r=u.Z.getOnboardingResponses(n))&&void 0!==r?r:A)}return null!==(t=null===(e=m[n])||void 0===e?void 0:e.responses)&&void 0!==t?t:A};r.getSelectedOptions=function(n){var e=this.getOnboardingResponses(n);return this.getOnboardingPrompts(n).map((function(n){return n.options})).flat().filter((function(n){return e.includes(n.id)}))};r.getOnboardingResponsesForPrompt=function(n,e){
var t=m[n];if(null==t)return A;var r=t.prompts.find((function(n){return n.id===e}));return null==r?A:i().intersection(r.options.map((function(n){return n.id})),this.getOnboardingResponses(n))};r.getEnabledOnboardingPrompts=function(n){var e,t=m[n];if(u.Z.isFullServerPreview(n)){var r;return null!==(r=null==t?void 0:t.prompts)&&void 0!==r?r:w}return null!=t&&t.enabled&&null!==(e=t.prompts)&&void 0!==e?e:w};r.getDefaultChannelIds=function(n){var e,t;return null!==(t=null===(e=m[n])||void 0===e?void 0:e.defaultChannelIds)&&void 0!==t?t:C};r.getEnabled=function(n){var e,t;return u.Z.isFullServerPreview(n)?null!=m[n]:null!==(t=null===(e=m[n])||void 0===e?void 0:e.enabled)&&void 0!==t&&t};r.getOnboardingPrompt=function(n){return Object.values(m).map((function(n){return n.prompts})).flat().find((function(e){return e.id===n}))};r.isLoading=function(){return P};r.shouldFetchPrompts=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Z.Millis.HOUR;if(P)return!1;var t=S[n]
;return null==t||Date.now()-t>e};r.getPendingResponseOptions=function(n){return E[n]};r.ackIdForGuild=function(n){var e=this.getEnabledOnboardingPrompts(n),t="0";e.forEach((function(n){n.options.forEach((function(n){s.Z.compare(n.id,t)>0&&(t=n.id)}));s.Z.compare(n.id,t)>0&&(t=n.id)}));return t};r.lastFetchedAt=function(n){return S[n]};r.__getLocalVars=function(){return{onboardingByGuildId:m,pendingOptionChanges:E,lastFetchedAtByGuildId:S,loading:P,EMPTY_PROMPTS:w,EMPTY_RESPONSES:A,EMPTY_DEFAULT_CHANNEL_IDS:C}};return t}(o.ZP.Store);T.displayName="GuildOnboardingPromptsStore";const Z=new T(l.Z,{CONNECTION_OPEN:function(){P=!1;m={}},GUILD_ONBOARDING_PROMPTS_FETCH_START:function(){P=!0},GUILD_ONBOARDING_PROMPTS_FETCH_SUCCESS:function(n){var e=n.guildId,t=n.prompts,r=n.defaultChannelIds,i=n.enabled,o=n.responses,l=n.onboardingPromptsSeen,u=n.onboardingResponsesSeen;P=!1;var a=d.ZP.getOnboardingStatus(e)===d.uX.READY,s=I(t,l,u);m[e]={enabled:i,prompts:s,
onboardingPrompts:s.filter((function(n){return n.inOnboarding})),defaultChannelIds:r.filter((function(n){return(0,c.s)(e,n)})),responses:a?[]:o,onboardingPromptsSeen:l,onboardingResponsesSeen:u};a||D(e,o);S[e]=Date.now()},GUILD_ONBOARDING_PROMPTS_FETCH_FAILURE:function(){P=!1},GUILD_ONBOARDING_SELECT_OPTION:function(n){var e=n.guildId,t=n.optionId,r=n.selected,o=n.removedOptionIds;if(u.Z.isFullServerPreview(e))return!0;if(null==m[e])return!1;null!=o&&o.length>0&&i().pullAll(m[e].responses,o);r?m[e].responses.push(t):i().pull(m[e].responses,t);null==E[e]&&(E[e]={});E[e][t]=r;null!=o&&o.forEach((function(n){return E[e][n]=!1}));E[e]=g({},E[e]);return!0},GUILD_ONBOARDING_UPDATE_RESPONSES_SUCCESS:function(n){D(n.guildId,n.options)},GUILD_ONBOARDING_PROMPTS_LOCAL_UPDATE:N,GUILD_SETTINGS_ONBOARDING_PROMPTS_SAVE_SUCCESS:N,GUILD_SETTINGS_DEFAULT_CHANNELS_SAVE_SUCCESS:function(n){var e=n.guildId,t=n.channelIds;m[e]=v(g({},m[e]),{defaultChannelIds:t})}})},17611:(n,e,t)=>{t.d(e,{wC:()=>p,
Ee:()=>g,dF:()=>v,od:()=>h,Vj:()=>O,VF:()=>y,L6:()=>m,dX:()=>E});var r=t(363010),i=t(485923),o=t(513073),l=t(1812),u=t(653772),a=t(940712),s=t(90816),c=t(890889),d=t(836670),f=t(461061);function p(n){var e=u.Z.getGuild(n),t=!!(null==e?void 0:e.hasFeature(f.oNc.COMMUNITY)),r=(0,o.Do)(n),i=a.Z.can(f.Plq.MANAGE_GUILD,e),l=a.Z.can(f.Plq.MANAGE_ROLES,e);return t&&r&&i&&l}function _(n,e,t){var r=new Set;n.forEach((function(n){n.options.forEach((function(n){var e;null==n||null===(e=n.channelIds)||void 0===e||e.forEach((function(n){r.add(n)}))}))}));e.forEach((function(n){return r.add(n)}));var o=t.filter((function(n){return!n.isCategory()&&!n.isThread()&&!(0,i.Z)(n)}));return[o.filter((function(n){return r.has(n.id)||null!=n.parent_id&&r.has(n.parent_id)})),o.filter((function(n){return!(r.has(n.id)||null!=n.parent_id&&r.has(n.parent_id))}))]}function g(n,e,t){return _(e,t,l.ZP.getChannels(n)[l.sH].map((function(n){return n.channel})))}function v(n,e,t){return _(e,t,(0,
r.e7)([l.ZP],(function(){return l.ZP.getChannels(n)}))[l.sH].map((function(n){return n.channel})))}function b(n,e){return n.filter((function(n){var t=e.find((function(e){return e.channel.id===n}));return null!=t&&(t.channel.isForumChannel()?c.ZP.canEveryoneRole(f.Plq.SEND_MESSAGES_IN_THREADS,t.channel):c.ZP.canEveryoneRole(f.Plq.SEND_MESSAGES,t.channel))}))}function h(n,e){return b(e,l.ZP.getChannels(n)[l.sH])}function O(n,e){return b(e,(0,r.e7)([l.ZP],(function(){return l.ZP.getChannels(n)}))[l.sH])}function y(n){var e=(0,r.e7)([d.Z],(function(){return d.Z.getDefaultChannelIds(n)}));return[O(n,e),e]}function m(n){return new Set(n.map((function(n){return n.roleIds})).flat().filter(s.lm))}function E(n){return new Set(n.map((function(n){return n.channelIds})).flat().filter(s.lm))}},604677:(n,e,t)=>{t.r(e);t.d(e,{default:()=>E,discardOnboardingPromise:()=>m,isOnboardingActiveForGuild:()=>I,openAndWaitForOnboarding:()=>P})
;var r=t(441143),i=t.n(r),o=t(655695),l=t(897576),u=t(656284),a=t(182434),s=t(853524),c=t(204424),d=t(212218),f=t(653772),p=t(418674);function _(n){return new Promise((function(e){f.Z.addConditionalChangeListener((function(){var t=f.Z.getGuild(n);null!=t&&e(t);return null==t}))}))}var g=t(461061),v=t(35236);function b(n,e,t,r,i,o,l){try{var u=n[o](l),a=u.value}catch(n){t(n);return}u.done?e(a):Promise.resolve(a).then(r,i)}function h(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function l(n){b(o,r,i,l,u,"next",n)}function u(n){b(o,r,i,l,u,"throw",n)}l(void 0)}))}}var O=function(n,e){var t,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,
r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(n,l)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},y={};function m(n){y[n]=null}function E(n){return S.apply(this,arguments)}function S(){return(S=h((function(n){var e,t,r,u,c;return O(this,(function(d){switch(d.label){case 0:e=n.guildId,t=n.returnChannelId,r=n.isPreview,u=void 0!==r&&r;(0,l.pT)()
;i()(null==y[e],"should not double-join guilds");return[4,_(e)];case 1:c=d.sent();if(!u)return[3,2];(0,a.I1)(e);return[3,4];case 2:return c.hasFeature(g.oNc.GUILD_ONBOARDING)?[4,(0,a.rK)(e)]:[2];case 3:d.sent();d.label=4;case 4:return s.ZP.shouldShowOnboarding(e)?[4,P(e)]:[3,6];case 5:d.sent();null!=t&&(0,o.uL)(g.Z5c.CHANNEL(e,t));d.label=6;case 6:return[2]}}))}))).apply(this,arguments)}function P(n){return new Promise((function(e){y[n]=e;(function(n){return new Promise((function(e){d.ZP.addConditionalChangeListener((function(){var t,r=d.ZP.getSelfMember(n);if((0,p.yE)(null!==(t=null==r?void 0:r.flags)&&void 0!==t?t:0,c.qQ.COMPLETED_ONBOARDING)){u.Z.finishOnboarding(n);e();return!1}return!0}))}))})(n).then((function(){!function(n){var e;null===(e=y[n])||void 0===e||e.call(y);y[n]=null}(n);u.Z.finishOnboarding(n)}));(0,o.uL)(g.Z5c.CHANNEL(n,v.oC.GUILD_ONBOARDING))}))}function I(n){return null!=y[n]}},328050:(n,e,t)=>{t.d(e,{v:()=>c,b:()=>d})
;var r=t(496486),i=t.n(r),o=t(363010),l=t(356004),u=t(90816);function a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function s(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return a(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(n,e,t){
var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i()(l.Z.getMutableGuildChannelsForGuild(n)).values().groupBy("parent_id").value(),a=i()(t).map((function(n){return n.isCategory()?n.id:n.parent_id})).filter(u.lm).uniq().map((function(n){return l.Z.getChannel(n)})).filter(u.lm).sortBy("position").value(),c=new Set(a.map((function(n){return n.id}))),d=t.filter((function(n){return!(n.isCategory()||null!=n.parent_id&&c.has(n.parent_id))}));d=i().sortBy(d,(function(n){return n.isGuildVocal()?n.position+1e4:n.position}));var f=!0,p=!1,_=void 0;try{for(var g,v=function(){var n,l=g.value;r||d.push(l);var u=e.has(l.id)?o[l.id]:t.filter((function(n){return n.parent_id===l.id}));u=i().sortBy(null!=u?u:[],(function(n){return n.isGuildVocal()?n.position+1e4:n.position}));(n=d).push.apply(n,s(u))},b=a[Symbol.iterator]();!(f=(g=b.next()).done);f=!0)v()}catch(n){p=!0;_=n}finally{try{f||null==b.return||b.return()}finally{if(p)throw _}}return d}function d(n,e){return(0,
o.Wu)([l.Z],(function(){var t=Array.from(e).map((function(n){return l.Z.getChannel(n)})).filter(u.lm);return c(n,e,t)}))}},290495:(n,e,t)=>{t.d(e,{XQ:()=>I,k$:()=>N,C1:()=>w,Mo:()=>A,QG:()=>C,dM:()=>T,Kt:()=>Z,_U:()=>L});var r=t(496486),i=t(820028),o=t(173436),l=t(688417),u=t(23816),a=t(913416),s=t(33055),c=t(183279),d=t(180918),f=t(356004),p=t(390504),_=t(932847),g=t(418674),v=t(203271),b=t(461061),h=t(228031);function O(n,e,t,r,i,o,l){try{var u=n[o](l),a=u.value}catch(n){t(n);return}u.done?e(a):Promise.resolve(a).then(r,i)}function y(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function l(n){O(o,r,i,l,u,"next",n)}function u(n){O(o,r,i,l,u,"throw",n)}l(void 0)}))}}function m(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function E(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){m(n,e,t[e])}))}return n}function S(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}var P=function(n,e){var t,r,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){
if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:l.label++;return{value:o[1],done:!1};case 5:l.label++;r=o[1];o=[0];continue;case 7:o=l.ops.pop();l.trys.pop();continue;default:if(!(i=l.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1];i=o;break}if(i&&l.label<i[2]){l.label=i[2];l.ops.push(o);break}i[2]&&l.ops.pop();l.trys.pop();continue}o=e.call(n,l)}catch(n){o=[6,n];r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function I(n,e,t,r,i){if(null!=n)if(s.Z.isFullServerPreview(n)){(0,a.zS)(n,t?[e]:[],t?[]:[e]);i&&(0,a.aq)(n,{optInEnabled:!0})}else{var l=p.Z.getGuildChannelFlags(n,e);t||(l=(0,g.mB)(l,h.ic.FAVORITED,!1))
;var d=(0,v.I)(n,e),O={flags:(0,g.mB)(l,h.ic.OPT_IN_ENABLED,t)},y={channel_overrides:m({},e,O)};if(i&&!p.Z.isOptInEnabled(n)){var P=(0,g.mB)(p.Z.getGuildFlags(n),h.vc.OPT_IN_CHANNELS_ON,!0);y.flags=P}c.Z.saveUserGuildSettingsBulk(m({},n,y));o.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:n,channelId:e,settings:O});(0,v.jz)(n,e,O,d,r);Z(n);_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n),(0,u.v_)(f.Z.getChannel(e))),{action_type:t?"add":"remove",location:r}))}}function N(n,e,t,r){if(null!=n)if(s.Z.isFullServerPreview(n)){(0,a.zS)(n,t?[e]:[],t?[]:[e]);(0,a.aq)(n,{optInEnabled:!0})}else{var i=p.Z.getGuildChannelFlags(n,e);t||(i=(0,g.mB)(i,h.ic.FAVORITED,!1));var l=(0,v.I)(n,e),d={flags:(0,g.mB)(i,h.ic.OPT_IN_ENABLED,t)};if(!p.Z.isOptInEnabled(n)){var O=(0,g.mB)(p.Z.getGuildFlags(n),h.vc.OPT_IN_CHANNELS_ON,!0);c.Z.saveUserGuildSettingsBulk(m({},n,{channel_overrides:m({},e,d),flags:O}))}o.Z.dispatch({type:"USER_GUILD_SETTINGS_CHANNEL_UPDATE",guildId:n,
channelId:e,settings:d});(0,v.jz)(n,e,d,l,r);Z(n);_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n),(0,u.v_)(f.Z.getChannel(e))),{action_type:t?"add":"remove",location:r}))}}function D(){return(D=y((function(n,e){var t;return P(this,(function(r){switch(r.label){case 0:if(null==n)return[2];if(s.Z.isFullServerPreview(n))return[2];t={channel_overrides:e};return[4,c.Z.saveUserGuildSettingsBulk(m({},n,t))];case 1:r.sent();o.Z.dispatch({type:"USER_GUILD_SETTINGS_REMOVE_PENDING_CHANNEL_UPDATES",guildId:n,updates:e});return[2]}}))}))).apply(this,arguments)}var w=(0,r.debounce)((function(n,e){return function(n,e){return D.apply(this,arguments)}(n,e)}),1e3);function A(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(null!=n)if(s.Z.isFullServerPreview(n)){(0,a.zS)(n,e,[]);t&&(0,a.aq)(n,{optInEnabled:!0})}else{var i={};e.forEach((function(e){var t=p.Z.getGuildChannelFlags(n,e);i[e]={flags:(0,g.mB)(t,h.ic.OPT_IN_ENABLED,!0)}
}));if(t){var o=(0,g.mB)(p.Z.getGuildFlags(n),h.vc.OPT_IN_CHANNELS_ON,!0);l.Z.updateGuildAndChannelNotificationSettings(n,{flags:o,channel_overrides:i});_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n)),{action_type:"add_many_and_enable_guild",location:r}))}else{l.Z.updateChannelOverrideSettingsBulk(n,i);_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n)),{action_type:"add_many",location:r}))}}}function C(n,e,t){if(s.Z.isFullServerPreview(n))(0,a.aq)(n,{optInEnabled:e});else{var r=p.Z.getGuildFlags(n);l.Z.updateGuildNotificationSettings(n,{flags:(0,g.mB)(r,h.vc.OPT_IN_CHANNELS_ON,e)});_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n)),{action_type:e?"guild_enabled":"guild_disabled",location:t}))}}function T(n,e,t,r){if(null!=n&&!s.Z.isFullServerPreview(n)){var i=p.Z.getGuildChannelFlags(n,e);!(0,g.yE)(i,h.ic.OPT_IN_ENABLED)&&t&&(i=(0,g.mB)(i,h.ic.OPT_IN_ENABLED,!0));l.Z.updateChannelOverrideSettings(n,e,{flags:(0,g.mB)(i,h.ic.FAVORITED,t)})
;_.default.track(b.rMx.CHANNEL_LIST_UPDATED,S(E({},(0,u.hH)(n)),{action_type:t?"favorited":"unfavorited",location:r}))}}function Z(n){(0,d.PS)(n,(function(n){if((0,g.yE)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_CLEARED)&&!(0,g.yE)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_SHOWN))return!1;n.guildOnboardingProgress=(0,g.pj)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_CLEARED);n.guildOnboardingProgress=(0,g.mB)(n.guildOnboardingProgress,i.nI.GUILD_NOTICE_SHOWN,!1);return!0}),d.fy.INFREQUENT_USER_ACTION)}function L(n,e){o.Z.dispatch({type:"DISMISS_FAVORITE_SUGGESTION",guildId:n,channelId:e})}},203271:(n,e,t)=>{t.d(e,{$R:()=>p,Wq:()=>_,sK:()=>v,jz:()=>b,GA:()=>h,rU:()=>O,I:()=>y,wK:()=>m});var r,i=t(23816),o=t(356004),l=t(390504),u=t(418674),a=t(461061),s=t(228031);function c(n,e,t){e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t;return n}function d(n){for(var e=1;e<arguments.length;e++){
var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))));r.forEach((function(e){c(n,e,t[e])}))}return n}function f(n,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):function(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})));t.push.apply(t,r)}return t}(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}var p=Object.freeze((c(r={},a.bL.ALL_MESSAGES,"All"),c(r,a.bL.ONLY_MENTIONS,"Mentions"),c(r,a.bL.NO_MESSAGES,"Nothing"),c(r,a.bL.NULL,null),r));function _(n,e,t,r){var o,l,c=function(n){
var e,t,r,i,o,l,u,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=null!=a.mute_config&&null!=a.mute_config.end_time?new Date(a.mute_config.end_time).getTime():n.guild_muted_until,c=null!=a.message_notifications?p[a.message_notifications]:n.guild_message_notification_settings;return{guild_muted_until:s,guild_flags:null!==(e=a.flags)&&void 0!==e?e:n.guild_flags,guild_is_muted:null!==(t=a.muted)&&void 0!==t?t:n.guild_is_muted,guild_message_notification_settings:c,guild_suppress_roles:null!==(r=a.suppress_roles)&&void 0!==r?r:n.guild_suppress_roles,guild_receive_mobile_push:null!==(i=a.mobile_push)&&void 0!==i?i:n.guild_receive_mobile_push,guild_notify_highlights:null!==(o=a.notify_highlights)&&void 0!==o?o:n.guild_notify_highlights,guild_suppress_everyone:null!==(l=a.suppress_everyone)&&void 0!==l?l:n.guild_suppress_everyone,guild_scheduled_events_muted:null!==(u=a.mute_scheduled_events)&&void 0!==u?u:n.guild_scheduled_events_muted}
},_=c(t),v=c(h(n),e),b=g(_,v,"RETURN_PREVIOUS_WHEN_CHANGED"),O=null!==(o=b("guild_flags"))&&void 0!==o?o:0,y=(null!==(l=v.guild_flags)&&void 0!==l?l:0)^O,m=0===(0,u.M1)(y,s.vc.OPT_IN_CHANNELS_OFF,s.vc.OPT_IN_CHANNELS_ON);i.ZP.trackWithMetadata(a.rMx.NOTIFICATION_SETTINGS_UPDATED,f(d({},v),{location:r,guild_id:n,update_type:a.IbT.GUILD,guild_flags_old:b("guild_flags"),guild_is_muted_old:b("guild_is_muted"),guild_suppress_roles_old:b("guild_suppress_roles"),guild_notify_highlights_old:b("guild_notify_highlights"),guild_suppress_everyone_old:b("guild_suppress_everyone"),guild_receive_mobile_push_old:b("guild_receive_mobile_push"),guild_scheduled_events_muted_old:b("guild_scheduled_events_muted"),guild_message_notification_settings_old:b("guild_message_notification_settings"),is_opt_in_only_change:m}))}function g(n,e,t){return function(r){if("RETURN_PREVIOUS_WHEN_CHANGED"===t)return n[r]!==e[r]?n[r]:void 0}}function v(n){return null!=n&&null!=n.end_time?new Date(n.end_time).getTime():null}
function b(n,e,t,r,l){var c,_,b=function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(t=i.muted)&&void 0!==t?t:null==e?void 0:e.channel_is_muted,l=null!=i.message_notifications?p[i.message_notifications]:null==e?void 0:e.channel_message_notification_settings,u=null==n?null:!0===o||null!=l;return{channel_is_muted:o,channel_is_overridden:u,channel_flags:null!==(r=i.flags)&&void 0!==r?r:null==e?void 0:e.channel_flags,channel_message_notification_settings:l,channel_muted_until:v(i.mute_config)}},h=b(r),O=b(y(n,e),t),m=g(h,O,"RETURN_PREVIOUS_WHEN_CHANGED"),E=o.Z.getChannel(e),S=null!==(c=m("channel_flags"))&&void 0!==c?c:0,P=(null!==(_=O.channel_flags)&&void 0!==_?_:0)^S,I=0===(0,u.M1)(P,s.ic.FAVORITED,s.ic.OPT_IN_ENABLED);i.ZP.trackWithMetadata(a.rMx.NOTIFICATION_SETTINGS_UPDATED,f(d({},O),{location:l,guild_id:n,channel_id:e,update_type:a.IbT.CHANNEL,parent_id:null!=E?E.parent_id:null,channel_flags_old:m("channel_flags"),
channel_is_muted_old:m("channel_is_muted"),channel_muted_until_old:m("channel_muted_until"),channel_is_overridden_old:m("channel_is_overridden"),channel_message_notification_settings_old:m("channel_message_notification_settings"),is_opt_in_only_change:I}))}function h(n){var e=l.Z.isMuted(n),t=l.Z.getMuteConfig(n);return{guild_suppress_everyone:l.Z.isSuppressEveryoneEnabled(n),guild_suppress_roles:l.Z.isSuppressRolesEnabled(n),guild_scheduled_events_muted:l.Z.isMuteScheduledEventsEnabled(n),guild_is_muted:e,guild_muted_until:null!=t&&null!=t.end_time?new Date(t.end_time).getTime():null,guild_receive_mobile_push:l.Z.isMobilePushEnabled(n),guild_message_notification_settings:p[l.Z.getMessageNotifications(n)],guild_notify_highlights:l.Z.getNotifyHighlights(n),guild_flags:l.Z.getGuildFlags(n)}}function O(n){var e=new Map;n.forEach((function(n){return e.set(n,h(n))}));return e}function y(n,e){var t=l.Z.isChannelMuted(n,e),r=l.Z.getChannelMuteConfig(n,e);return{channel_is_muted:t,
channel_muted_until:null!=r&&null!=r.end_time?new Date(r.end_time).getTime():null,channel_message_notification_settings:p[l.Z.getChannelMessageNotifications(n,e)],channel_flags:l.Z.getGuildChannelFlags(n,e)}}function m(n,e){var t=new Map;e.forEach((function(e){return t.set(e,y(n,e))}));return t}}}]);
//# sourceMappingURL=49d8d83de33b3e8d3ed7.js.map