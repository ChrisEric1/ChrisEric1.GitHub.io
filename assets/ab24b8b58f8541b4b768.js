"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[66845],{264720:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.popAllLayers=function(){r.default.dirtyDispatch({type:i.ActionTypes.LAYER_POP_ALL})};t.popLayer=function(){r.default.dirtyDispatch({type:i.ActionTypes.LAYER_POP})};t.pushLayer=function(e){r.default.dirtyDispatch({type:i.ActionTypes.LAYER_PUSH,component:e})};var o,r=(o=n(636602))&&o.__esModule?o:{default:o},i=n(770348)},226800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var o=S(n(118915)),r=S(n(972247)),i=S(n(636602)),u=S(n(516818)),a=S(n(308920)),l=n(692711),s=S(n(40856)),c=n(864489),p=n(264720),d=n(770348),f=S(n(247001));function S(e){return e&&e.__esModule?e:{default:e}}function _(){_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return _.apply(this,arguments)}function T(e,t,n){
void 0===t&&(t=null);i.default.dispatch(_({type:d.ActionTypes.USER_SETTINGS_MODAL_INIT,section:e,subsection:t},n))}var E={open:function(e,t,n){void 0===e&&(e=null);void 0===t&&(t=null);void 0===n&&(n={openWithoutBackstack:!1});T(e,t,n);(0,p.pushLayer)(d.Layers.USER_SETTINGS)},init:T,close:function(){var e=u.default.onClose;i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_CLOSE});null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null);i.default.dirtyDispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION,section:e,subsection:t})},clearSubsection:function(){i.default.dirtyDispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_CLEAR_SUBSECTION})},updateAccount:function(e){i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT,settings:e})},submitComplete:function(){i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE})},reset:function(){i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_RESET})},
saveAccountChanges:function(e,t){var n=this;i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_SUBMIT});var u=e.username,p=e.email,S=e.emailToken,T=e.password,E=e.avatar,y=e.newPassword,A=e.discriminator,O=t.close;return(0,s.default)({title:f.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(e){var t=_({username:u,email:p,email_token:S,password:T,avatar:E,new_password:y},e,{discriminator:null!=A&&""!==A?A:void 0}),n=r.default.get(d.DEVICE_TOKEN),i=(0,c.getDevicePushProvider)();if(null!=i&&null!=n){t.push_provider=i;t.push_token=n}var a=r.default.get(d.DEVICE_VOIP_TOKEN);if(null!=d.DEVICE_PUSH_VOIP_PROVIDER&&null!=a){t.push_voip_provider=d.DEVICE_PUSH_VOIP_PROVIDER;t.push_voip_token=a}return o.default.patch({url:d.Endpoints.ME,body:t,oldFormErrors:!0})}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body,o=t.token
;a.default.track(d.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,l.isAnimatedIconHash)(t.avatar)});delete t.token;i.default.dispatch({type:d.ActionTypes.UPDATE_TOKEN,token:o,userId:t.id});i.default.dispatch({type:d.ActionTypes.CURRENT_USER_UPDATE,user:t});null!=y&&i.default.dispatch({type:d.ActionTypes.USER_PASSWORD_UPDATE,user:t,newPassword:y});null!=T&&null!=y&&i.default.dispatch({type:d.ActionTypes.PASSWORD_UPDATED,userId:t.id});O?n.close():n.submitComplete();return e}),(function(e){i.default.dispatch({type:d.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:e.body});return e}))}};t.default=E},516818:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var o,r=s(n(496486)),i=s(n(536211)),u=s(n(636602)),a=s(n(728429)),l=n(770348);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(e,o.key,o)}}
function p(e,t){p=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return p(e,t)}function d(){d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return d.apply(this,arguments)}var f=l.FormStates.CLOSED,S=null,_={},T={},E=null,y=null,A=!1,O=!1,v=null,h=null,U=null,I=null;function C(e){var t,n,o,r,i,u=a.default.getCurrentUser();if(null==u)return N();S=null!==(t=e.section)&&void 0!==t?t:S;I=null!==(n=e.section)&&void 0!==n?n:S;null!=e.subsection&&null!=S&&(_[S]=e.subsection);O=!!e.openWithoutBackstack;f=l.FormStates.OPEN;T={};E=((o={})[l.UserSettingsSections.ACCOUNT]={userId:u.id,username:u.username,discriminator:u.discriminator,email:u.email,avatar:u.avatar,password:"",newPassword:null,claimed:u.isClaimed()},o);y=d({},E);h=null!==(r=e.onClose)&&void 0!==r?r:null;U=null!==(i=e.analyticsLocation)&&void 0!==i?i:null}function N(){f=l.FormStates.CLOSED;A=!1;E=null
;I=null;y=null;S=null;_={};h=null;U=null}function b(){f=l.FormStates.OPEN;T={}}var m=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;p(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.initialize=function(){this.waitFor(a.default)};n.hasChanges=function(){return null!=y&&null!=E&&(!(!this.isOpen()&&v!==l.DrawerTabTypes.USER_SETTINGS)&&!r.default.isEqual(y,E))};n.isOpen=function(){return A};n.getSection=function(){return S};n.getSubsection=function(){return null!=S?_[S]:null};n.shouldOpenWithoutBackstack=function(){return O};n.getProps=function(){return{submitting:f===l.FormStates.SUBMITTING,section:S,subsection:null!=_&&null!=S?_[S]:null,settings:y,errors:T,hasChanges:this.hasChanges(),openWithoutBackstack:O,analyticsLocation:U,initialSection:I}};!function(e,t,n){t&&c(e.prototype,t);n&&c(e,n);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"onClose",get:function(){return h}}]);return t
}(i.default.Store);m.displayName="UserSettingsModalStore";var D=new m(u.default,((o={})[l.ActionTypes.USER_SETTINGS_MODAL_OPEN]=function(e){A=!0;C(e)},o[l.ActionTypes.USER_SETTINGS_MODAL_INIT]=C,o[l.ActionTypes.USER_SETTINGS_MODAL_CLOSE]=N,o[l.ActionTypes.LOGOUT]=N,o[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT]=function(){f=l.FormStates.SUBMITTING},o[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE]=function(e){var t;if(f!==l.FormStates.SUBMITTING)return!1;f=l.FormStates.OPEN;S=l.UserSettingsSections.ACCOUNT;T=null!==(t=e.errors)&&void 0!==t?t:{}},o[l.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION]=function(e){S=e.section;null!=e.subsection&&(_[S]=e.subsection)},o[l.ActionTypes.USER_SETTINGS_MODAL_CLEAR_SUBSECTION]=function(){null!=S&&delete _[S]},o[l.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT]=function(e){var t=e.settings;null==y&&(y={});var n=y[l.UserSettingsSections.ACCOUNT];y[l.UserSettingsSections.ACCOUNT]=d({},n,{},t)},o[l.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE]=b,
o[l.ActionTypes.USER_SETTINGS_MODAL_RESET]=function(){var e=a.default.getCurrentUser();b();if(null!=e){var t;E=((t={})[l.UserSettingsSections.ACCOUNT]={userId:e.id,username:e.username,discriminator:e.discriminator,email:e.email,avatar:e.avatar,password:"",newPassword:null,claimed:e.isClaimed()},t);y=d({},E)}},o[l.ActionTypes.DRAWER_SELECT_TAB]=function(e){v=e.tab;return null==S&&v===l.DrawerTabTypes.USER_SETTINGS&&C({type:l.ActionTypes.USER_SETTINGS_MODAL_INIT,section:null,subsection:null,openWithoutBackstack:!1})},o));t.default=D},417184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=p;var o,r,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=r?Object.getOwnPropertyDescriptor(e,i):null
;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}o.default=e;n&&n.set(e,o);return o}(n(667294)),u=(o=n(468205))&&o.__esModule?o:{default:o},a=["width","height","color","foreground"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};return s.apply(this,arguments)}function c(e,t,n,o){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,u=arguments.length-3;if(t||0===u||(t={children:void 0}),1===u)t.children=o;else if(u>1){for(var a=new Array(u),l=0;l<u;l++)a[l]=arguments[l+3];t.children=a}if(t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e){
var t=e.width,n=void 0===t?20:t,o=e.height,r=void 0===o?20:o,l=e.color,p=void 0===l?"currentColor":l,d=e.foreground,f=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++){n=i[o];t.indexOf(n)>=0||(r[n]=e[n])}return r}(e,a);return i.createElement("svg",s({},(0,u.default)(f),{width:n,height:r,viewBox:"0 0 20 20"}),c("path",{d:"M10 0C4.486 0 0 4.486 0 10C0 15.515 4.486 20 10 20C15.514 20 20 15.515 20 10C20 4.486 15.514 0 10 0ZM9 4H11V11H9V4ZM10 15.25C9.31 15.25 8.75 14.691 8.75 14C8.75 13.31 9.31 12.75 10 12.75C10.69 12.75 11.25 13.31 11.25 14C11.25 14.691 10.69 15.25 10 15.25Z",fillRule:"evenodd",clipRule:"evenodd",className:d,fill:p}))}p.displayName="WarningCircle"}}]);
//# sourceMappingURL=ab24b8b58f8541b4b768.js.map