"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[63727],{963727:(e,t,n)=>{n.r(t);n.d(t,{default:()=>S});var r=n(785893),o=n(667294),i=n(294184),a=n.n(i),l=n(441143),s=n.n(l),u=n(202351),c=n(945460),d=n(327499),f=n(567403),h=n(107364),b=n(190186),y=n(483902),m=n(734394),p=n(678019),g=n(127624),C=n(473708),v=n(303172),I=n.n(v);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(t&&i.length===t)break}}catch(e){l=!0;o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){
if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){var t=e.editPermissions,n=e.guildId,i=e.hasMemberSearch,l=e.headerText,v=e.onClose,M=e.overwrittenKeys,S=e.search,k=e.searchPlaceholderText,O=e.selectedPermissionCount,A=e.transitionState,N=(0,u.e7)([f.Z],(function(){return f.Z.getGuild(n)}),[n]);s()(null!=N,"");var E=x(o.useState(null),2),w=E[0],T=E[1],P=S(n),Z=P.query,R=P.results,_=P.setQuery,D=x(o.useState({}),2),L=D[0],B=D[1],q=o.useMemo((function(){return Object.keys(L).length}),[L]),H=q+O>=g._n,G=o.useMemo((function(){return R.filter((function(e){var t=(0,
m.rE)(e.id,e.type);return!M.includes(t)}))}),[M,R]),z=o.useCallback((function(e,t){B((function(n){var r=(0,m.rE)(e,t),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){j(e,t,n[t])}))}return e}({},n);r in n?delete o[r]:H||(o[r]={id:e,permission:!0,type:t});return o}))}),[H,B]),F=o.useCallback((function(){t(L,[]);v()}),[t,v,L]);o.useEffect((function(){return function(){return clearTimeout(w)}}),[w]);var K=o.useCallback((function(e){_(e);i&&T((function(t){clearTimeout(t);return 0===e.length?null:setTimeout((function(){d.Z.requestMembers(n,e,200,!1)}),500)}))}),[n,i,_,T]),U=o.useCallback((function(e){var t=G[e],n=(0,m.rE)(t.id,t.type),o=n in L,i=H&&!o;return(0,r.jsx)("div",{className:I().item,children:(0,r.jsx)(c.Checkbox,{
type:c.Checkbox.Types.INVERTED,className:a()(j({},I().checkboxItemDisabled,i)),disabled:i,value:o,onChange:function(){return z(t.id,t.type)},children:(0,r.jsx)(p.Z,{guild:N,id:t.id,type:t.type,isLocked:!1})})},n)}),[G,N,H,z,L]);o.useEffect((function(){d.Z.requestMembers(n,void 0,200,!1)}),[n]);return(0,r.jsxs)(c.ModalRoot,{"aria-label":C.Z.Messages.INTEGRATIONS_APPLICATION_COMMAND_PERMISSIONS_MODIFY,transitionState:A,children:[(0,r.jsxs)(c.ModalHeader,{separator:!1,direction:h.Z.Direction.VERTICAL,children:[(0,r.jsx)(c.Heading,{variant:"heading-xl/semibold",className:I().header,children:l}),H?(0,r.jsx)(c.Heading,{variant:"heading-sm/medium",color:"text-danger",children:C.Z.Messages.INTEGRATIONS_APPLICATION_PERMISSIONS_MAX}):null]}),(0,r.jsxs)(c.ModalContent,{className:I().modalContent,children:[(0,r.jsx)(b.Z,{className:I().searchBar,query:Z,placeholder:k,"aria-label":k,onChange:K,onClear:function(){return _("")},size:b.Z.Sizes.MEDIUM}),(0,r.jsx)(y.Z,{role:"listbox",renderRow:U,
rowCount:G.length,rowCountBySection:[G.length],rowHeight:36,className:I().list})]}),(0,r.jsxs)(c.ModalFooter,{children:[(0,r.jsx)(c.Button,{type:"submit",onClick:F,disabled:0===q,children:C.Z.Messages.ADD}),(0,r.jsx)(c.Button,{onClick:v,look:c.Button.Looks.LINK,color:c.Button.Colors.PRIMARY,children:C.Z.Messages.CANCEL})]})]})}}}]);
//# sourceMappingURL=3d179e38e4f82d663bb4.js.map