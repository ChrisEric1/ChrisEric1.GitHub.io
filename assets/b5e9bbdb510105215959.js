"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[71670],{266738:(e,t,n)=>{n.d(t,{iq:()=>i,Cl:()=>o,$D:()=>E,Pq:()=>s,Jh:()=>a,gq:()=>c});function r(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}var s,a,u,i="guild_feed_feedback_last_seen",o=6048e5,E=450;!function(e){e.TERRIBLE="terrible";e.BAD="bad";e.OKAY="okay";e.GOOD="good";e.EXCELLENT="excellent"}(s||(s={}));!function(e){e[e.ALREADY_SAW=0]="ALREADY_SAW";e[e.IRRELEVANT=1]="IRRELEVANT";e[e.TOO_OLD=2]="TOO_OLD";e[e.CONFUSING_OR_RANDOM=3]="CONFUSING_OR_RANDOM";e[e.INAPPROPRIATE=4]="INAPPROPRIATE";e[e.UNINTERESTING=5]="UNINTERESTING";e[e.ENTERTAINING=6]="ENTERTAINING";e[e.INFORMATIVE=7]="INFORMATIVE";e[e.USEFUL=8]="USEFUL";e[e.OTHER=9]="OTHER";e[e.FUNNY=10]="FUNNY"}(a||(a={}));var c=(r(u={},s.TERRIBLE,[a.ALREADY_SAW,a.IRRELEVANT,a.TOO_OLD,a.CONFUSING_OR_RANDOM,a.INAPPROPRIATE,a.OTHER]),
r(u,s.BAD,[a.ALREADY_SAW,a.IRRELEVANT,a.TOO_OLD,a.CONFUSING_OR_RANDOM,a.INAPPROPRIATE,a.OTHER]),r(u,s.OKAY,[a.IRRELEVANT,a.TOO_OLD,a.UNINTERESTING,a.ALREADY_SAW,a.OTHER]),r(u,s.GOOD,[a.FUNNY,a.ENTERTAINING,a.INFORMATIVE,a.USEFUL,a.OTHER]),r(u,s.EXCELLENT,[a.FUNNY,a.ENTERTAINING,a.INFORMATIVE,a.USEFUL,a.OTHER]),u)},725608:(e,t,n)=>{n.d(t,{Cd:()=>R,vL:()=>A,i1:()=>T,IT:()=>f});var r=n(667294),s=n(363010),a=n(444450),u=n(730189),i=n(897193),o=n(202552),E=n(932847),c=n(449024),l=n(407723),d=n(266738),_=n(461061),I=n(959797);function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){i=!0;s=e}finally{try{u||null==n.return||n.return()}finally{
if(i)throw s}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(){a.Z.set(d.iq,null)}function A(){var e=r.useMemo((function(){return o.Z.getExperimentBucket(c.Xp.definition.id)}),[]),t=O(r.useState(!1),2),n=t[0],s=t[1],u=r.useMemo((function(){return a.Z.get(d.iq)}),[n]);return{showFeedback:r.useMemo((function(){return 100*Math.random()<e&&(null==u||Date.now()-u>d.Cl)}),[e,u]),setOnDismissedFeedback:s}}function T(e){switch(e){case d.Jh.ALREADY_SAW:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_ALREADY_SAW;case d.Jh.IRRELEVANT:
return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_IRRELEVANT;case d.Jh.TOO_OLD:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_TOO_OLD;case d.Jh.CONFUSING_OR_RANDOM:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_CONFUSING;case d.Jh.INAPPROPRIATE:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_INAPPROPRIATE;case d.Jh.UNINTERESTING:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_UNINTERESTING;case d.Jh.ENTERTAINING:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_ENTERTAINING;case d.Jh.INFORMATIVE:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_INFORMATIVE;case d.Jh.USEFUL:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_USEFUL;case d.Jh.OTHER:return I.Z.Messages.GUILD_FEED_FEEDBACK_OTHER_REASON;case d.Jh.FUNNY:return I.Z.Messages.GUILD_FEED_FEEDBACK_OPTION_FUNNY;default:return null}}function f(e){
var t=e.guildId,n=e.guildFeedItem,o=e.setOnDismissFeedback,c=O(r.useState(),2),I=c[0],N=c[1],R=O(r.useState(new Set),2),A=R[0],f=R[1],D=O(r.useState(),2),F=D[0],S=D[1],L=O(r.useState(!1),2),U=L[0],b=L[1],g=O(r.useState(!1),2),m=g[0],h=g[1],C=O(r.useState(!1),2),M=C[0],P=C[1],k=r.useCallback((function(e){N(e);P(!0);b(!1);setTimeout((function(){P(!1)}),d.$D+150)}),[N,b,P]),v=r.useCallback((function(e){e===d.Jh.OTHER&&A.has(d.Jh.OTHER)&&S(null);var t=new Set(A);t.has(e)?t.delete(e):t.add(e);f(t)}),[A,S,f]),G=r.useCallback((function(){b(!0);f(new Set)}),[b,f]),Z=r.useCallback((function(e){!function(e){var t,n=e.guildId,r=e.guildFeedItem,s=e.dismissed,a=e.selectedRating,u=void 0===a?null:a,o=e.selectedReasons,c=void 0===o?null:o,d=e.userFeedback,I=void 0===d?null:d,N=Array.from(null!=c?c:[]);E.default.track(_.rMx.HOME_FEEDBACK_SUBMITTED,{guild_id:n,home_session_id:l.Z.getHomeSessionId(n),feed_item_id:r.id,feed_item_position:0,dismissed:s,report_name:"feed_item_feedback",
load_id:i.ZP.getLoadId(n),rating:u,reason_codes:N,reason_descriptions:N.map((function(e){return null!==(t=T(e))&&void 0!==t?t:""})),user_feedback:I})}({guildId:t,guildFeedItem:n,dismissed:e,selectedRating:I,selectedReasons:A,userFeedback:F})}),[t,n,I,A,F]),p=r.useCallback((function(){a.Z.set(d.iq,Date.now());null==o||o(!0);m||Z(!0)}),[Z,o,m]),y=r.useCallback((function(){Z(!1);h(!0);a.Z.set(d.iq,Date.now())}),[Z]),B=r.useMemo((function(){return A.size>0&&(!A.has(d.Jh.OTHER)||null!=F&&""!==F)}),[A,F]),w=(0,s.e7)([u.Z],(function(){return u.Z.useReducedMotion})),H=r.useRef(!1);r.useEffect((function(){return function(){H.current=!0}}),[]);r.useEffect((function(){return function(){H.current&&null!=I&&p()}}),[I,p]);return{selectedRating:I,setSelectedRating:k,selectedReasons:A,setSelectedReasons:v,setUserFeedback:S,backPressed:U,onBackPressed:G,onSubmitPressed:y,onClosePressed:p,showSubmitted:m,isAnimating:M,canSubmit:B,useReducedMotion:w}}},471670:(e,t,n)=>{n.r(t);n.d(t,{default:()=>R})
;var r=n(785893),s=n(667294),a=n(281081),u=n(239396),i=n(769672),o=n(363010),E=n(631134),c=n(859023),l=n(895917),d=n(725608),_=n(653772);var I=n(959797);function N(e){var t,n=(0,o.e7)([c.default],(function(){var e;return null!==(t=null===(e=c.default.getCurrentUser())||void 0===e?void 0:e.isStaff())&&void 0!==t&&t})),a=s.useCallback((function(){return(0,d.Cd)()}),[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.sN,{id:"home-feedback",label:I.Z.Messages.GUILD_HOME_FEEDBACK_MENU_ITEM_LABEL,action:function(){var t=function(e,t){var n=_.Z.getGuild(t),r=null!=n?encodeURIComponent(n.name):"unknown";return"https://survey.alchemer.com/s3/6852193/Home-Beta-Test-Feature-Feedback?user_id=".concat(e,"&guild_id=").concat(t,"&guild_name=").concat(r)}(E.default.getId(),e);window.open(t,"_blank")},icon:l.Z}),n?(0,r.jsx)(i.sN,{id:"staff-home-feedback-reset-cooldown",label:"[STAFF] Reset cooldown for feedback",action:a}):null]})}var O=n(461061);function R(e){
var t=e.guildId,n=e.analyticsContext,s=e.onSelect,o=N(t);return(0,r.jsx)(u.Z,{context:n,object:O.qAy.CONTEXT_MENU,children:(0,r.jsx)(i.ZP,{navId:"user-context",onClose:a.Zy,"aria-label":I.Z.Messages.HOME_ACTIONS_MENU_LABEL,onSelect:s,children:(0,r.jsx)(i.kS,{children:o})})})}}}]);
//# sourceMappingURL=b5e9bbdb510105215959.js.map