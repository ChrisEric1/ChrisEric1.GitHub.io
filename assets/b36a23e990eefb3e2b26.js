"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[70232],{161071:(e,t,n)=>{n.d(t,{q:()=>u});var r=n(281110),a=n(744564),s=n(430091),i=n(2590);function o(e,t,n,r,a,s,i){try{var o=e[s](i),l=o.value}catch(e){n(e);return}o.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){o(s,r,a,i,l,"next",e)}function l(e){o(s,r,a,i,l,"throw",e)}i(void 0)}))}}var c=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;(r=0,a)&&(s=[2&s[0],a.value]);switch(s[0]){
case 0:case 1:a=s;break;case 4:i.label++;return{value:s[1],done:!1};case 5:i.label++;r=s[1];s=[0];continue;case 7:s=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1];a=s;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(s);break}a[2]&&i.ops.pop();i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e];r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};function u(e,t,n,r){return h.apply(this,arguments)}function h(){return(h=l((function(e,t,n,o){var l;return c(this,(function(c){switch(c.label){case 0:if(!s.Z.needsToFetchBuildSize(n))return[2];a.Z.dispatch({type:"APPLICATION_BUILD_SIZE_FETCH_START",buildId:n});c.label=1;case 1:c.trys.push([1,3,,4]);return[4,r.Z.post({url:i.ANM.APPLICATION_BUILD_SIZE(e,t,n),body:{manifest_ids:o},oldFormErrors:!0})];case 2:l=c.sent();a.Z.dispatch({
type:"APPLICATION_BUILD_SIZE_FETCH_SUCCESS",buildId:n,sizeKB:l.body.size_kb});return[3,4];case 3:c.sent();a.Z.dispatch({type:"APPLICATION_BUILD_SIZE_FETCH_FAIL",buildId:n});return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},695166:(e,t,n)=>{n.d(t,{Bv:()=>a,DC:()=>s});var r=n(744564);function a(){r.Z.dispatch({type:"APPLICATION_STORE_ACCEPT_STORE_TERMS"})}function s(e){r.Z.dispatch({type:"APPLICATION_STORE_ACCEPT_EULA",eulaId:e})}},980151:(e,t,n)=>{n.d(t,{RY:()=>s,iD:()=>i,Tb:()=>o,ec:()=>l});var r=n(744564),a=n(457493);function s(e){a.Z.queryDirectory(e,(function(t,n){null==t&&null!=n&&r.Z.dispatch({type:"INSTALLATION_LOCATION_ADD",path:e,metadata:n})}))}function i(e){r.Z.dispatch({type:"INSTALLATION_LOCATION_REMOVE",path:e})}function o(e,t){var n=t.label,a=t.isDefault;r.Z.dispatch({type:"INSTALLATION_LOCATION_UPDATE",path:e,label:n,isDefault:a})}function l(e){var t={},n=0,s=!0,i=!1,o=void 0;try{for(var l,c=function(){var s=l.value
;if(null==s||"string"!=typeof s)return"continue";a.Z.queryDirectory(s,(function(a,i){++n;null==a&&null!=i&&(t[s]=i);n===e.length&&r.Z.dispatch({type:"INSTALLATION_LOCATION_FETCH_METADATA",metadataPayload:t})}))},u=e[Symbol.iterator]();!(s=(l=u.next()).done);s=!0)c()}catch(e){i=!0;o=e}finally{try{s||null==u.return||u.return()}finally{if(i)throw o}}}},26529:(e,t,n)=>{n.d(t,{Z:()=>M});var r=n(785893),a=n(667294),s=n(294184),i=n.n(s),o=n(441143),l=n.n(o),c=n(202351),u=n(945460);const h=(0,n(260561).B)({id:"2023-05_checkout_terms_of_service",label:"Checkout Terms of Service",kind:"user",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var d=n(16703),p=n(64318),f=n(348592),I=n(850841),A=n(2590),_=n(203600),P=n(473708),T=n(205074),v=n.n(T);function m(e,t,n,r,a,s,i){try{var o=e[s](i),l=o.value}catch(e){n(e);return}o.done?t(l):Promise.resolve(l).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){
var s=e.apply(t,n);function i(e){m(s,r,a,i,o,"next",e)}function o(e){m(s,r,a,i,o,"throw",e)}i(void 0)}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return O(e)}function y(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e,t){L=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return L(e,t)}var C=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}var g=function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;(r=0,a)&&(s=[2&s[0],a.value]);switch(s[0]){case 0:case 1:a=s;break;case 4:i.label++;return{value:s[1],done:!1};case 5:i.label++;r=s[1];s=[0];continue;case 7:s=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}
if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1];a=s;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(s);break}a[2]&&i.ops.pop();i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e];r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&L(e,t)}(a,e);var t=S(a);function a(){b(this,a);var e;(e=t.apply(this,arguments)).state={hasAcceptedTerms:!e.props.forceShow&&e.props.hasPreviouslyAcceptedTerms,hasAcceptedEULA:!e.props.forceShow&&e.props.hasPreviouslyAcceptedEULA,hasAcceptedWithdrawalWaiver:!1};e.handleToggleTermsAcceptance=function(t,n){e.setState({hasAcceptedTerms:n})};e.handleToggleEUWithdralWaiverAcceptance=function(t,n){e.setState({hasAcceptedWithdrawalWaiver:n})}
;e.handleToggleEULAAcceptance=function(t,n){e.setState({hasAcceptedEULA:n})};return e}var s=a.prototype;s.componentDidMount=function(){this.props.onChange(this.hasAcceptedNeccessaryTerms(this.props,this.state));this.eligibleForNewExperience()&&h.trackExposure({})};s.componentDidUpdate=function(e,t){var n=this.hasAcceptedNeccessaryTerms(e,t),r=this.hasAcceptedNeccessaryTerms(this.props,this.state);r!==n&&this.props.onChange(r)};s.hasAcceptedNeccessaryTerms=function(e,t){return(e.isTrial||this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()||t.hasAcceptedTerms)&&(null==e.eulaId||t.hasAcceptedEULA)&&(!e.showWithdrawalWaiver||t.hasAcceptedWithdrawalWaiver)};s.eligibleForNewExperience=function(){var e=this.props,t=e.forceShow,n=e.hasPreviouslyAcceptedTerms,r=e.isTrial,a=e.isGift;return!(!t&&n||r||!a)};s.isInCheckoutTOSExperiment=function(){return h.getCurrentConfig({},{autoTrackExposure:!0}).enabled};s.renderLegalTerms=function(){
var e=this.props,t=e.hasPreviouslyAcceptedTerms,n=e.forceShow,a=e.isTrial,s=e.checkboxLabel,o=e.checkboxClassname,l=e.checkboxLabelClassname,c=e.disabled,h=this.state.hasAcceptedTerms;if(this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()){var d=P.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL_V2.format({primaryText:P.Z.Messages.PAYMENT_MODAL_BUTTON_PREMIUM_GIFT,paidURL:A.EYA.PAID_TERMS});return(0,r.jsx)("div",{className:i()(v().checkboxLabel,l),children:d})}return!n&&t||a?null:(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:h,onChange:this.handleToggleTermsAcceptance,disabled:c,className:i()(v().checkbox,o),children:(0,r.jsx)("div",{className:i()(v().checkboxLabel,l),children:null!=s?s:P.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL.format({termsURL:A.EYA.TERMS,paidURL:A.EYA.PAID_TERMS})})})};s.formatInterval=function(e){if(e===_.rV.YEAR)return P.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_YEAR
;if(e===_.rV.MONTH)return P.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_MONTH;throw new Error("Invalid interval type: ".concat(e))};s.render=function(){var e=this.props,t=e.eulaId,a=e.applicationName,s=e.hasPreviouslyAcceptedTerms,o=e.hasPreviouslyAcceptedEULA,c=e.forceShow,h=e.disabled,p=e.className,_=e.checkboxClassname,T=e.checkboxLabelClassname,m=e.finePrint,b=e.showPricingLink,O=e.showWithdrawalWaiver,y=e.isTrial,L=e.subscriptionPlan,C=this.state,S=C.hasAcceptedEULA,R=C.hasAcceptedWithdrawalWaiver;l()(!y||null!=L,"subscriptionPlan cannot be null if shouldShowUpdatedPaymentModal is true");return c||!s||null!=t&&!o||O?(0,r.jsxs)("div",{className:p,children:[y?(0,r.jsx)(d.KU,{}):(0,r.jsx)(u.FormTitle,{className:v().formTitle,children:O?P.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER:P.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO}),this.renderLegalTerms(),null==t||!c&&o?null:(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:S,onChange:this.handleToggleEULAAcceptance,disabled:h,
className:v().checkbox,children:(0,r.jsx)("div",{className:v().checkboxLabel,children:P.Z.Messages.BILLING_THIRD_PARTY_EULA_LABEL.format({applicationName:a,onClick:function(e){(0,u.openModalLazy)(N((function(){var e,a;return g(this,(function(s){switch(s.label){case 0:return[4,Promise.all([n.e(40532),n.e(81757),n.e(6287),n.e(55121),n.e(25978),n.e(19798)]).then(n.bind(n,54415))];case 1:e=s.sent(),a=e.default;return[2,function(e){return(0,r.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){E(e,t,n[t])}))}return e}({eulaId:t},e))}]}}))})));e.preventDefault()}})})}),null==m?null:(0,r.jsx)("div",{className:v().finePrint,children:m}),O?(0,r.jsxs)("div",{className:p,children:[(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:R,
onChange:this.handleToggleEUWithdralWaiverAcceptance,disabled:h,className:i()(v().checkbox,_),children:(0,r.jsx)("div",{className:i()(v().checkboxLabel,T),children:P.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_CHECKBOX})}),(0,r.jsx)("div",{className:v().finePrint,children:P.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_DISCLAIMER})]}):null,(0,r.jsx)("div",{className:v().finePrint,children:b&&(0,r.jsxs)(r.Fragment,{children:["*",P.Z.Messages.BILLING_HOW_PRICING_WORKS.format({documentationLink:f.Z.getArticleURL(A.BhN.LOCALIZED_PRICING)})]})}),y&&null!=L&&(0,r.jsx)(u.Text,{variant:"text-xs/medium",color:"interactive-normal",children:P.Z.Messages.BILLING_TRIAL_LEGAL_COPY_V2.format({buttonText:(0,I.W_)(null,L),interval:this.formatInterval(null==L?void 0:L.interval),cancelSubscriptionArticle:f.Z.getArticleURL(A.BhN.PREMIUM_DETAILS_CANCEL_SUB),paidServiceTermsArticle:f.Z.getArticleURL(A.BhN.PAID_TERMS)})})]}):null};return a}(a.Component);const M=c.ZP.connectStores([p.Z],(function(e){var t=e.eulaId
;return{hasPreviouslyAcceptedTerms:p.Z.hasAcceptedStoreTerms,hasPreviouslyAcceptedEULA:null!=t&&p.Z.hasAcceptedEULA(t)}}))(R)},446483:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(785893),a=(n(667294),n(294184)),s=n.n(a),i=n(801593),o=n.n(i);function l(e){var t=e.application,n=e.splashSize,a=e.className,i=e.overrideSplash,l=null!=i?i:t.getSplashURL(n),c=null!=l?"url(".concat(l,")"):void 0;return(0,r.jsx)("div",{className:s()(o().splashBackground,a),style:{backgroundImage:c}})}},717902:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(785893),a=n(667294),s=n(202351),i=n(945460),o=n(980151),l=n(840974),c=n(452723),u=n(310126),h=n(473708),d=n(734703),p=n.n(d);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e){I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return I(e)}function A(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){
if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){_=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return _(e,t)}var P=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var a=I(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return A(this,n)}}var v="select",m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&_(e,t)}(n,e);var t=T(n)
;function n(){f(this,n);var e;(e=t.apply(this,arguments)).state={newInstallationPath:null};e.fetchedMetadataPaths=new Set;e.handleChange=function(t){t===v?u.default.showOpenDialog(["openDirectory"]).then((function(t){if(null!=t&&t.length>0){var n=t[0];e.setState({newInstallationPath:null!=e.props.installationPaths.find((function(e){return e.path===n}))?null:n});e.sendChange(n)}})):e.sendChange(t)};return e}var a=n.prototype;a.fetchAllDirectoryMetadata=function(){var e=this,t=this.props.installationPaths.map((function(e){return e.path})),n=this.state.newInstallationPath;null!=n&&t.push(n);t=t.filter((function(t){return!e.fetchedMetadataPaths.has(t)}));(0,o.ec)(t);var r=!0,a=!1,s=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;this.fetchedMetadataPaths.add(c)}}catch(e){a=!0;s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}};a.componentDidMount=function(){this.fetchAllDirectoryMetadata()};a.componentDidUpdate=function(e){
this.fetchAllDirectoryMetadata();this.props.requiredDiskKB===e.requiredDiskKB&&this.props.installationPathsMetadata===e.installationPathsMetadata||this.sendChange(this.props.value)};a.getOptions=function(){var e=this,t=this.props.installationPaths,n=this.state.newInstallationPath,r=t.map((function(t){var n=t.path,r=t.label;return{value:n,label:e.renderLabel(n,r)}}));null!=n&&r.push({value:n,label:this.renderLabel(n)});r.push({value:v,label:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_SELECT_DIRECTORY});return r};a.hasEnoughDiskSpace=function(e){var t=this.props,n=t.requiredDiskKB,r=t.installationPathsMetadata,a=null!=r[e]?r[e].availableKB:null;return null==n||null==a||n<a};a.sendChange=function(e){var t=this.props,n=t.installationPathsMetadata;(0,t.onChange)(e,null!=n[e]&&!1===n[e].hasPermission||!this.hasEnoughDiskSpace(e))};a.renderError=function(){var e=this.props,t=e.value,n=e.installationPathsMetadata;return null!=n[t]&&!1===n[t].hasPermission?(0,r.jsx)("div",{className:p().error,
children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_NO_PERMISSION}):this.hasEnoughDiskSpace(t)?null:(0,r.jsx)("div",{className:p().error,children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_NOT_ENOUGH_SPACE})};a.renderLabel=function(e,t){var n=this.props.installationPathsMetadata,r=null!=t?t:e;return null!=n[e]&&null!=n[e].availableKB?h.Z.Messages.APPLICATION_INSTALLATION_MODAL_DIRECTORY_WITH_SPACE.format({path:r,size:(0,c.BU)(n[e].availableKB,{useKibibytes:!0})}):r};a.render=function(){var e=this.props,t=e.value,n=e.className,a=e.autoFocus;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsx)(i.FormTitle,{tag:"h5",children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_LOCATION}),(0,r.jsx)(i.SingleSelect,{autoFocus:a,options:this.getOptions(),value:t,onChange:this.handleChange}),this.renderError()]})};return n}(a.PureComponent);const N=s.ZP.connectStores([l.Z],(function(){return{installationPaths:l.Z.installationPaths,installationPathsMetadata:l.Z.installationPathsMetadata}}))(m)},
910740:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(785893),a=n(667294),s=n(202351),i=n(945460),o=n(744564),l=n(114126),c=n(161071),u=n(695166),h=n(951442),d=n(734691),p=n(26529),f=n(717902),I=n(784426),A=n(761814),_=n(430091),P=n(64318),T=n(840974),v=n(107364),m=n(641277),N=n(709189),b=n(557931),E=n(534681),O=n(2590),y=n(473708),L=n(867943),C=n.n(L);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return g(e)}function R(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t){M=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return M(e,t)}var x=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R(this,n)}}var Z=function(){return[y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_1,y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_2,y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_3,y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_TITLE_4]},U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&M(e,t)}(n,e);var t=B(n);function n(){S(this,n);var e;(e=t.apply(this,arguments)).state={
confirmHeaderIndex:Math.floor(Math.random()*Z().length),installPath:e.props.defaultInstallationPath,hasInstallPathError:!1,hasAcceptedNeccessaryTerms:!1};e.handleInstallPathChange=function(t,n){e.setState({installPath:t,hasInstallPathError:n})};e.handleInventoryClick=function(){d.Z.open(O.oAB.INVENTORY);e.props.onClose()};e.handleGoToLibrary=function(){(0,I.uL)(O.Z5c.APPLICATION_LIBRARY);e.props.onClose()};e.handleInstall=function(){var t=e.props,n=t.application,r=t.branchId,a=t.buildId,s=t.hasPreviouslyAcceptedStoreTerms,i=t.manifestIds,o=t.onClose,l=e.state,c=l.installPath,d=l.hasInstallPathError;s||(0,u.Bv)();null!=n.eulaId&&(0,u.DC)(n.eulaId);if(!d&&null!=a&&null!=i){h.LO({application:n,branchId:r,buildId:a,manifestIds:i,installationPath:c,analyticsLocation:O.Sbl.APPLICATION_STORE_PAYMENT_MODAL});o();(0,I.uL)(O.Z5c.APPLICATION_LIBRARY)}};e.handlePurchaseTermsChange=function(t){e.setState({hasAcceptedNeccessaryTerms:t})};return e}var s=n.prototype;s.fetchInstallSize=function(){
var e=this.props,t=e.application,n=e.branchId,r=e.buildId,a=e.manifestIds,s=e.buildSizeKB;null!=r&&null!=a&&null==s&&o.Z.wait((function(){(0,c.q)(t.id,n,r,a)}))};s.componentDidMount=function(){var e=this.props,t=e.application,n=e.branchId,r=e.buildId,a=e.manifestIds,s=e.sku;!e.isIAP&&(0,b._f)(s)&&(null==r||null==a?o.Z.wait((function(){return(0,l.l)(t.id,n)})):this.fetchInstallSize())};s.componentDidUpdate=function(e){this.props.buildId===e.buildId&&this.props.manifestIds===e.manifestIds||this.fetchInstallSize()};s.getHeaderBlurb=function(){var e=this.props,t=e.sku,n=e.application,r=e.isIAP;if(t.isPreorder()&&null!=t.preorderReleaseAt)return y.Z.Messages.APPLICATION_STORE_PREORDER_PURCHASE_CONFIRMATION_BLURB.format({applicationName:n.name,date:t.preorderReleaseAt.format("MMMM DD")});if(r||[O.epS.DURABLE,O.epS.CONSUMABLE].includes(t.type))return y.Z.Messages.APPLICATION_ADDON_PURCHASE_CONFIRMATION_BLURB.format({applicationName:n.name,itemName:t.name})
;if(t.type===O.epS.BUNDLE)return y.Z.Messages.APPLICATION_STORE_BUNDLE_PURCHASE_CONFIRMATION_BLURB.format({name:t.name});var a=t.supportedOperatingSystems[0];return y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_UNSUPPORTED_OS.format({name:n.name,operatingSystem:(0,E.XK)(a)})};s.renderInstallationHeader=function(){var e=this.props.application;return(0,r.jsx)("div",{className:C().blurb,children:y.Z.Messages.APPLICATION_STORE_PURCHASE_CONFIRMATION_BLURB.format({name:e.name})})};s.renderInstallationBody=function(){var e=this.props,t=e.isFetchingBuild,n=e.buildId,s=e.buildSizeKB,o=e.application,l=this.state,c=l.installPath,u=l.hasInstallPathError,h=l.hasAcceptedNeccessaryTerms;return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(f.Z,{className:C().installSelector,value:c,requiredDiskKB:s,onChange:this.handleInstallPathChange}),(0,r.jsx)(p.Z,{eulaId:o.eulaId,applicationName:o.name,onChange:this.handlePurchaseTermsChange,className:C().storeTerms}),(0,r.jsx)(N.C,{
className:C().confirmButton,disabled:u||null==n||!h,onClick:this.handleInstall,submitting:t,color:i.Button.Colors.GREEN,children:y.Z.Messages.APPLICATION_STORE_PURCHASE_INSTALL_GAME})]})};s.renderGenericHeader=function(){return(0,r.jsx)("div",{className:C().blurb,children:this.getHeaderBlurb()})};s.renderBlurbBody=function(){var e,t=this.props,n=t.isIAP,s=t.sku,o=t.onClose;if(s.isPreorder()){e=y.Z.Messages.APPLICATION_PREORDER_PURCHASE_CONFIRMATION_BUTTON;o=this.handleGoToLibrary}else e=n?y.Z.Messages.APPLICATION_IAP_PURCHASE_RETURN_TO_GAME:y.Z.Messages.OKAY;return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(i.Button,{className:C().confirmButton,onClick:o,children:e})})};s.renderBlurb=function(){var e=this.props,t=e.sku;return e.isIAP||!(0,b._f)(t)||t.isPreorder()?this.renderGenericHeader():this.renderInstallationHeader()};s.renderBody=function(){var e=this.props,t=e.sku;return e.isIAP||!(0,b._f)(t)||t.isPreorder()?this.renderBlurbBody():this.renderInstallationBody()};s.render=function(){
var e=this.props.application,t=this.state.confirmHeaderIndex;return(0,r.jsxs)(v.Z,{direction:v.Z.Direction.VERTICAL,align:v.Z.Align.CENTER,children:[(0,r.jsx)(m.Z,{game:e,className:C().icon,size:m.Z.Sizes.LARGE}),(0,r.jsx)("div",{className:C().header,children:Z()[t]}),this.renderBlurb(),(0,r.jsx)("div",{className:C().divider}),this.renderBody()]})};return n}(a.Component);const w=s.ZP.connectStores([T.Z,_.Z,A.Z,P.Z],(function(e){var t,n=e.application,r=A.Z.getActiveLibraryApplication(n.id);t=null!=r?r.id:n.id;var a=_.Z.getTargetBuildId(n.id,t);return{defaultInstallationPath:T.Z.defaultInstallationPath,branchId:t,isFetchingBuild:_.Z.isFetching(n.id,t),buildId:a,manifestIds:_.Z.getTargetManifests(n.id,t),buildSizeKB:null!=a?_.Z.getBuildSize(a):null,hasPreviouslyAcceptedStoreTerms:P.Z.hasAcceptedStoreTerms}}))(U)},320641:(e,t,n)=>{n.d(t,{Y:()=>s});var r=n(2590),a=n(473708);function s(e,t){if(e)return a.Z.Messages.APPLICATION_STORE_PURCHASE_IAP;switch(t){case r.epS.DURABLE_PRIMARY:
return a.Z.Messages.APPLICATION_STORE_PURCHASE_APPLICATION;case r.epS.DURABLE:return a.Z.Messages.APPLICATION_STORE_PURCHASE_DLC;case r.epS.CONSUMABLE:return a.Z.Messages.APPLICATION_STORE_PURCHASE_CONSUMABLE;case r.epS.BUNDLE:return a.Z.Messages.APPLICATION_STORE_PURCHASE_BUNDLE}}},16703:(e,t,n)=>{n.d(t,{PO:()=>d,q9:()=>p,R$:()=>f,i$:()=>I,KU:()=>A,Ji:()=>_,HE:()=>P});var r=n(785893),a=(n(667294),n(294184)),s=n.n(a),i=n(73904),o=n(249052),l=n(473708),c=n(884092),u=n.n(c);function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){var t=e.children,n=e.className;return(0,r.jsx)("div",{className:s()(u().table,n),children:t})}function p(e){var t=e.children;return(0,r.jsx)("div",{className:u().header,children:t})}function f(e){var t=e.label,n=e.value,a=e.className;return(0,r.jsxs)("div",{className:s()(u().row,a),children:[(0,r.jsx)("div",{className:u().rowLabel,children:t}),(0,r.jsx)("div",{className:u().rowAmount,
children:n})]})}function I(e){var t=e.label,n=e.value,a=e.discounts,s=e.originalAmount,c=e.interval,h=e.currency,d=e.className,p=e.intervalCount,I=function(e){return null!=a?a.find((function(t){return t.type===e})):null},A=I(i.eW.SUBSCRIPTION_PLAN),_=I(i.eW.ENTITLEMENT),P=null!=A?Math.floor(A.amount/s*100):null,T=(0,o.T4)(s,h);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{label:t,value:(0,r.jsxs)(r.Fragment,{children:[n,null!=P?(0,r.jsxs)("div",{className:u().rowPercentDiscount,children:["-",P,"%"]}):null]}),className:d}),null!=P?(0,r.jsxs)("div",{className:u().rowDiscountOriginalPrice,children:["(",null!=c&&null!=p?(0,o.og)(T,c,p):T,")"]}):null,null!=_?(0,r.jsx)("div",{className:u().entitlementDiscountRow,children:l.Z.Messages.BILLING_INVOICE_SUBSCRIPTION_CREDIT_APPLIED}):null]})}function A(e){var t,n=e.extended,a=void 0!==n&&n,i=e.negativeMarginTop,o=void 0!==i&&i;return(0,r.jsx)("div",{className:s()(u().divider,(t={},h(t,u().dividerExtended,a),h(t,u().negativeMarginTop,o),t))
})}function _(e){var t=e.label,n=e.value,a=e.className;return(0,r.jsxs)("div",{className:s()(u().totalRow,a),children:[(0,r.jsx)("div",{className:u().totalLabel,children:t}),(0,r.jsx)("div",{className:u().totalAmount,children:n})]})}function P(e){var t=e.children,n=e.className;return(0,r.jsx)("div",{className:s()(u().finePrint,n),children:t})}}}]);
//# sourceMappingURL=b36a23e990eefb3e2b26.js.map