"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[31947],{246380:(e,n,r)=>{r.d(n,{Z:()=>l});var t=r(667294),i=r(22176);function a(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){a(e,n,r[n])}))}return e}function s(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){
Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}const l=function(e,n,r,a,l){var c=(0,t.useRef)(!1);(0,t.useEffect)((function(){if(n&&!c.current){c.current=!0;var t=setTimeout((function(){var n=new Error("".concat(e," is taking too long to load."));i.Z.setExtra({loadingState:a,loadingTimeSeconds:r});i.Z.captureException(n,s(o({},l),{tags:o({},null==l?void 0:l.tags)}))}),1e3*r);return function(){clearTimeout(t)}}}),[n,r])}},186451:(e,n,r)=>{r.d(n,{Z:()=>a});var t=r(667294),i=r(744564);function a(e){var n=(0,t.useRef)(e);(0,t.useEffect)((function(){n.current=e}),[e]);(0,t.useEffect)((function(){if(__OVERLAY__){var e=function(e){e.locked&&n.current()};i.Z.subscribe("OVERLAY_SET_INPUT_LOCKED",e);return function(){i.Z.unsubscribe("OVERLAY_SET_INPUT_LOCKED",e)}}}),[])}},586611:(e,n,r)=>{r.r(n);r.d(n,{PaymentModal:()=>W,PaymentPredicateStep:()=>Y})
;var t=r(785893),i=r(667294),a=r(294184),o=r.n(a),s=r(685269),l=r(318715),c=r(945460),u=r(595138),p=r(246380),d=r(123435),f=r(186451),m=r(785531),y=r(83471),h=r(909365);var S=r(111090),P=r(551778),v=r(151367),b=r(652591),I=r(850841),E=r(782786),g=r(632826),_=r(441143),O=r.n(_),T=r(621270),j=r(717035),A=r(301162),x=r(770050),C=r(203600),M=r(452726),w=r.n(M);var N=r(28648),R=r(149096),L=r(2590),Z=r(786958),k=r.n(Z);function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function F(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function U(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){F(e,n,r[n])}))}return e}function G(e,n){
n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){s=!0;i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return D(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e){var n=e.analyticsLocations,r=e.analyticsLocation,a=e.analyticsObject,l=e.analyticsSourceLocation,u=e.analyticsSubscriptionType,p=void 0===u?L.NYc.PREMIUM:u,d=e.onComplete,v=e.transitionState,_=e.initialPlanId,M=e.giftMessage,N=e.subscriptionTier,Z=e.onClose,D=e.trialId,W=e.isGift,Y=void 0!==W&&W,B=e.trialFooterMessageOverride,K=e.reviewWarningMessage,V=e.planGroup,Q=void 0===V?C.Y1:V,$=e.openInvoiceId,q=e.onSubscriptionConfirmation,X=e.renderPurchaseConfirmation,z=e.postSuccessGuild,J=e.followupSKUInfo,ee=e.renderHeader,ne=e.applicationId,re=e.guildId,te=e.referralTrialOfferId,ie=e.skuId,ae=e.shakeWhilePurchasing,oe=void 0!==ae&&ae,se=(0,
E.usePaymentContext)(),le=se.purchaseState,ce=se.setPurchaseState,ue=se.selectedSkuId,pe=se.setSelectedSkuId,de=se.selectedPlan,fe=se.setSelectedPlanId,me=se.setStep,ye=se.setPurchaseError,he=se.paymentAuthenticationState,Se=se.step,Pe=se.contextMetadata,ve=se.purchaseTokenAuthState,be=se.activeSubscription,Ie=se.priceOptions,Ee=se.hasPaymentSources,ge=H(i.useState({load_id:Pe.loadId,payment_type:"subscription",location:null!=r?r:a,source:l,subscription_type:p,subscription_plan_id:null==de?void 0:de.id,is_gift:Y,eligible_for_trial:null!=D,location_stack:n,sku_id:ie,application_id:ne,guild_id:re,payment_modal_version:"v1"}),2),_e=ge[0],Oe=ge[1];i.useEffect((function(){Oe((function(e){var n=null!=de?(0,I.aS)(de.id,!1,Y,Ie):void 0;return G(U({},e),{subscription_plan_id:null==de?void 0:de.id,price:null==n?void 0:n.amount,regular_price:null==de?void 0:de.price,currency:Ie.currency,sku_id:ue})}))}),[de,ue,Y,Ie]);i.useEffect((function(){b.default.track(L.rMx.PAYMENT_FLOW_STARTED,G(U({},_e),{
has_saved_payment_source:Ee}))}),[]);i.useEffect((function(){fe(_);if(null!=ie)pe(ie);else if(null!=_){var e;pe(null===(e=P.Z.get(_))||void 0===e?void 0:e.skuId)}}),[fe,pe,_,ie]);var Te=(0,s.Z)((function(){return Date.now()}),[Se]),je=i.useCallback((function(e,n,r){e===y.h8.CONFIRM&&(null==d||d());me(e);ye(null);var t=null!=n?n:Se,i=Date.now();null!==t?b.default.track(L.rMx.PAYMENT_FLOW_STEP,G(U({},_e,r),{from_step:t,to_step:e===y.h8.ADD_PAYMENT_STEPS?y.h8.PAYMENT_TYPE:e,step_duration_ms:i-Te,flow_duration_ms:i-Pe.startTime})):b.default.track(L.rMx.PAYMENT_FLOW_LOADED,G(U({},_e),{initial_step:e,has_saved_payment_source:Ee}))}),[_e,Pe.startTime,d,ye,me,Se,Te,Ee]),Ae=i.useMemo((function(){return function(){return null==Z?void 0:Z(le===g.A.COMPLETED)}}),[Z,le]);(0,m.bp)(Se,he,je);(0,y.dZ)(Se,le,ce);!function(e,n,r){i.useEffect((function(){
null!=e&&e!==y.h8.AWAITING_PURCHASE_TOKEN_AUTH&&n===h.I.PENDING?r(y.h8.AWAITING_PURCHASE_TOKEN_AUTH):e===y.h8.AWAITING_PURCHASE_TOKEN_AUTH&&n===h.I.SUCCESS&&r(y.h8.REVIEW)}),[e,n,r])}(Se,ve,je);(0,f.Z)(Ae);(0,S.w)(be,(function(){return Z(!1)}),Y);var xe={initialPlanId:_,giftMessage:M,subscriptionTier:N,handleStepChange:je,handleClose:Ae,analyticsData:_e,setAnalyticsData:Oe,trialId:D,trialFooterMessageOverride:B,reviewWarningMessage:K,planGroup:Q,openInvoiceId:$,analyticsLocation:r,onSubscriptionConfirmation:q,renderPurchaseConfirmation:X,postSuccessGuild:z,followupSKUInfo:J,referralTrialOfferId:te},Ce=function(e){var n=e.isGift,r=e.renderHeader,a=e.referralTrialOfferId,o=e.handleClose,s=(0,E.usePaymentContext)(),l=s.selectedSkuId,c=s.step,u=s.selectedPlan,p=s.purchaseState,d=s.selectedGiftStyle,f=T.ZP.useExperiment({},{autoTrackExposure:!1}).enabled,m=(0,T.rK)();i.useEffect((function(){m&&n&&T.ZP.trackExposure({})}),[m,n])
;var h=f&&m&&n&&l===C.Si.TIER_2,S=h&&c===y.h8.CONFIRM&&null!=d,P=null!=r&&null!=u&&null!=c,v=c!==y.h8.SKU_SELECT&&null!=l,b=(0,j.N)(a),I=!n&&null!=b&&null!=l&&C.nG[b.trial_id].skus.includes(l);return i.useMemo((function(){if(null!=c){var e=null;if(S)e=(0,t.jsx)(x.Z,{giftStyle:d,className:w().seasonalGiftBoxHeaderIcon});else if(P)e=r(u,o,c);else if(v){O()(l in C.y7,"invalid sku id: ".concat(l));e=(0,t.jsx)(A.Z,{currentStep:null!=c?c:void 0,purchaseState:p,premiumType:C.y7[l],onClose:o,useWinterTheme:h,showTrialBadge:I})}return e}}),[h,d,o,p,r,u,l,c,I,S,v,P])}({isGift:Y,renderHeader:ee,referralTrialOfferId:te,handleClose:Ae});return(0,t.jsx)(c.Shaker,{className:k().shaker,isShaking:oe&&le===g.A.PURCHASING,intensity:2,children:(0,t.jsx)(c.ModalRoot,{className:o()(k().root,F({},k().withHeader,null!=Ce)),transitionState:v,children:(0,t.jsx)(R.ZP,U({header:Ce},xe))})})}function Y(e){var n=e.subscriptionTier,r=e.initialPlanId,a=e.handleStepChange,o=(0,
E.usePaymentContext)(),s=o.blockedPayments,c=o.hasFetchedSubscriptions,f=o.hasFetchedSubscriptionPlans,m=o.currencyLoading,h=H(i.useState(!0),2),S=h[0],P=h[1],b=(0,l.ZP)([v.Z],(function(){return v.Z.applicationIdsFetched.has(C.RQ)}));i.useEffect((function(){P(!c||!f||m)}),[m,f,c]);(0,p.Z)("Payment Modal",S,5,{hasFetchedSubscriptions:c,hasFetchedSubscriptionPlans:f,currencyLoading:m},{tags:{app_context:"billing"}});i.useEffect((function(){b||(0,u.yD)(C.RQ);S||s||a(null!=r?y.h8.REVIEW:null!=n?y.h8.PLAN_SELECT:y.h8.SKU_SELECT)}),[s,b,r,S,a,n]);return S?(0,t.jsx)(N.Z,{}):s?(0,t.jsx)(d.Vq,{}):null}},499488:(e,n,r)=>{r.d(n,{l:()=>X})
;var t=r(785893),i=r(667294),a=r(441143),o=r.n(a),s=r(898302),l=r(471450),c=r(717035),u=r(16097),p=r(619244),d=r(197597),f=r(202351),m=r(945460),y=r(415324),h=r(152042),S=r(700812),P=r(26529),v=r(632826),b=r(793461),I=r(615796),E=r(551778),g=r(850841),_=r(530562),O=r(100749),T=r(16703),j=r(524450),A=r(900547),x=r(646875),C=r(2590),M=r(473708),w=r(771788),N=r.n(w),R=r(121466),L=r.n(R);function Z(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){s=!0;i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Z(e,n);var r=Object.prototype.toString.call(e).slice(8,-1)
;"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){var n,r=e.premiumSubscription,i=e.paymentSources,a=e.priceOptions,s=e.onPaymentSourceChange,l=e.onPaymentSourceAdd,c=e.planId,u=e.setHasAcceptedTerms,p=e.legalTermsNodeRef,O=e.hasLegalTermsFlash,T=e.onInvoiceError,j=e.planGroup,x=e.currencies,w=e.onCurrencyChange,N=e.hasOpenInvoice,R=e.purchaseState,Z=a.paymentSourceId,k=(0,f.e7)([E.Z],(function(){return E.Z.get(c)}));o()(null!=k,"Missing newPlan");var D,H=(0,f.e7)([b.Z],(function(){return b.Z.hidePersonalInformation}));D=N?M.Z.Messages.BILLING_PURCHASE_DETAILS_HEADER:(0,g.PV)(c)?(0,g.W_)(r,k):M.Z.Messages.BILLING_SELECT_PLAN_GUILD_SUBSCRIPTION.format({
planName:k.name});var W=d.M.EEA_COUNTRIES.has(I.Z.ipCountryCodeWithFallback),Y=R===v.A.PURCHASING||R===v.A.COMPLETED;return(0,t.jsxs)("div",{className:L().stepBody,children:[(0,t.jsx)(m.FormTitle,{tag:m.FormTitleTags.H5,children:D}),null!=r?N?(0,t.jsx)(F,{premiumSubscription:r,onInvoiceError:T,priceOptions:a,preventFetch:!1}):(0,_.R4)(r,c,j)?(0,t.jsx)(U,{premiumSubscription:r,newPlan:k,onInvoiceError:T,planGroup:j,priceOptions:a,preventFetch:Y}):(0,t.jsx)(G,{premiumSubscription:r,newPlan:k,planGroup:j,priceOptions:a,preventFetch:Y}):null,(0,t.jsxs)("div",{className:L().paymentSourceWrapper,children:[(0,t.jsx)(m.FormTitle,{tag:m.FormTitleTags.H5,children:M.Z.Messages.PAYMENT_SOURCE_PAYMENT_REQUEST_INFO_TITLE}),(0,t.jsx)(S.Z,{paymentSources:Object.values(i),selectedPaymentSourceId:Z,onChange:s,onPaymentSourceAdd:l,hidePersonalInformation:H,disabled:Y})]}),(0,t.jsxs)(y.b,{currencies:x,className:L().currencyWrapper,children:[(0,t.jsx)(m.FormTitle,{tag:m.FormTitleTags.H5,
children:M.Z.Messages.PAYMENT_CURRENCY}),(0,t.jsx)(y.Z,{selectedCurrency:a.currency,currencies:x,onChange:w,disabled:Y})]}),(0,t.jsx)(A.Z,{isActive:O,ref:p,children:(0,t.jsx)(P.Z,{onChange:u,finePrint:(0,t.jsx)(h.Z,{subscriptionPlan:k,paymentSourceType:null===(n=i[null!=Z?Z:""])||void 0===n?void 0:n.type}),forceShow:!0,showPricingLink:k.currency!==C.pKx.USD,showWithdrawalWaiver:W,disabled:Y})})]})}function F(e){var n=e.premiumSubscription,r=e.onInvoiceError,a=e.priceOptions,o=e.preventFetch,s=k((0,O.Ox)({subscriptionId:n.id,preventFetch:o}),2),l=s[0],c=s[1];i.useEffect((function(){r(c)}),[r,c]);var u=(0,g.Ap)(a.paymentSourceId);return null!=l?(0,t.jsxs)(T.PO,{className:N().invoice,children:[(0,t.jsx)(x.By,{invoice:l,isPrepaidPaymentSource:u}),(0,t.jsx)(x.nd,{premiumSubscription:n,renewalInvoice:l,isUpdate:!0,isPrepaidPaymentSource:u})]}):(0,t.jsx)(m.Spinner,{})}function U(e){var n=e.premiumSubscription,r=e.newPlan,a=e.onInvoiceError,o=e.planGroup,s=e.priceOptions,l=e.preventFetch,c=(0,
g.al)(n,r.id,1,new Set(o)),u=k((0,O.ED)({subscriptionId:n.id,items:c,renewal:!1,applyEntitlements:!0,paymentSourceId:s.paymentSourceId,currency:s.currency,preventFetch:l}),2),p=u[0],d=u[1],f=k((0,O.ED)({subscriptionId:n.id,items:c,renewal:!0,paymentSourceId:s.paymentSourceId,currency:s.currency,preventFetch:l}),2),y=f[0],h=f[1],S=null!=d?d:h;i.useEffect((function(){a(S)}),[a,S]);if(null!=S)return(0,t.jsx)(m.FormErrorBlock,{children:S.message});if(null==p||null==y)return(0,t.jsx)(m.Spinner,{className:L().spinner});var P=(0,g.Ap)(s.paymentSourceId);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.hG,{proratedInvoice:p,renewalInvoice:y}),(0,t.jsxs)(T.PO,{className:L().invoice,children:[(0,t.jsx)(T.q9,{children:M.Z.Messages.BILLING_SWITCH_PLAN_PURCHASE_DETAILS}),(0,t.jsx)(x.Lu,{invoice:p,newPlan:r,isPrepaidPaymentSource:P}),(0,t.jsx)(x.nd,{premiumSubscription:n,proratedInvoice:p,renewalInvoice:y,isUpdate:!0,isPrepaidPaymentSource:P})]})]})}function G(e){
var n,r=e.premiumSubscription,i=e.newPlan,a=e.planGroup,o=e.priceOptions,s=e.preventFetch,l=k((0,O.ED)({subscriptionId:r.id,items:(0,g.al)(r,i.id,1,new Set(a)),renewal:!0,applyEntitlements:!1,paymentSourceId:o.paymentSourceId,currency:o.currency,preventFetch:s}),2),c=l[0],u=l[1];if(null!=u)return(0,t.jsx)(m.FormErrorBlock,{children:u.message});if(null==c)return(0,t.jsx)("div",{children:(0,t.jsx)(m.Spinner,{})});n=r.type===C.NYc.PREMIUM?(0,g.Gf)(i.id):i.name;var p=(0,g.Ap)(o.paymentSourceId);return(0,t.jsxs)("div",{className:L().bodyText,children:[(0,t.jsx)("div",{className:N().renewalInvoiceDate,children:M.Z.Messages.BILLING_SWITCH_PLAN_CHANGE_DATE.format({renewalDate:c.subscriptionPeriodStart})}),(0,t.jsxs)(T.PO,{className:L().invoice,children:[(0,t.jsx)(T.q9,{children:M.Z.Messages.PREMIUM_SUBSCRIPTION_UPDATES}),(0,t.jsx)(T.R$,{label:n,value:(0,g.PK)(i,o,!0)}),(0,t.jsx)(j.Z,{invoice:c}),(0,t.jsx)(T.KU,{}),(0,t.jsx)(x.nd,{premiumSubscription:r,renewalInvoice:c,isUpdate:!0,
isPrepaidPaymentSource:p})]})]})}var H=r(782786),W=r(83471),Y=r(881712),B=r(328535),K=r(128059),V=r(149096),Q=r(203600);function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(t=r.next()).done);o=!0){a.push(t.value);if(n&&a.length===n)break}}catch(e){s=!0;i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return $(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e){var n=e.handleStepChange,r=e.trialId,a=e.trialFooterMessageOverride,d=e.reviewWarningMessage,f=e.planGroup,m=e.openInvoiceId,y=e.analyticsData,h=e.analyticsLocation,S=e.giftMessage,P=e.referralTrialOfferId,v=(0,H.usePaymentContext)(),b=v.activeSubscription,I=v.setUpdatedSubscription,E=v.contextMetadata,g=v.currencies,_=v.isGift,O=v.paymentSourceId,T=v.paymentSources,j=v.priceOptions,A=v.purchaseError,x=v.purchaseTokenAuthState,C=v.selectedPlan,w=v.selectedSkuId,N=v.setCurrency,R=v.setPaymentSourceId,L=v.setPurchaseState,Z=v.setPurchaseError,k=v.step,F=v.purchaseState,U=v.isPremium,G=v.selectedGiftStyle,$=v.setHasAcceptedTerms;o()(null!=C,"Expected plan to be selected");o()(null!=k,"Step should be set");var X,z=i.useRef(null),J=q((0,
s.Z)(!1,500),2),ee=J[0],ne=J[1],re=null!==(X=null!=r?r:P)&&void 0!==X?X:null,te=null==re||U&&!Q.nG[re].skus.includes(w)?null:re,ie=(0,c.N)(P),ae={user_trial_offer_id:null==ie?void 0:ie.id};i.useEffect((function(){null!=A&&null!=z.current&&z.current.scrollIntoView({behavior:"smooth"})}),[A]);var oe=i.useCallback((function(e){I(e);n(W.h8.CONFIRM)}),[n,I]),se=null!=O?T[O]:null,le=null!=C&&Q.o4.has(C.id)&&null!=se&&!(0,l.aQ)(se)?new Error(M.Z.Messages.BILLING_ERROR_INVALID_PLAN_FOR_PAYMENT_SOURCE):null,ce=i.useRef(null),ue=q(i.useState(null),2),pe=ue[0],de=ue[1],fe=!_&&null!=ie&&null!=w&&Q.nG[ie.trial_id].skus.includes(w);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.P,{giftMessage:S}),(0,t.jsx)(K.Z,{isEligibleForTrial:fe}),(0,t.jsxs)(V.C3,{children:[(0,t.jsx)(B.Z,{}),null==b||_?(0,t.jsx)(u.Z,{selectedPlanId:C.id,isGift:_,paymentSources:T,onPaymentSourceChange:function(e){return R(null!=e?e.id:null)},priceOptions:j,currencies:g,onCurrencyChange:function(e){return N(e)},
handlePaymentSourceAdd:function(){return n(W.h8.ADD_PAYMENT_STEPS)},setHasAcceptedTerms:$,legalTermsNodeRef:ce,hasLegalTermsFlash:ee,trialId:te,trialFooterMessageOverride:a,reviewWarningMessage:d,purchaseState:F,referralTrialOfferId:P,isTrial:fe}):(0,t.jsx)(D,{premiumSubscription:b,paymentSources:T,priceOptions:j,onPaymentSourceChange:function(e){R(null!=e?e.id:null)},onPaymentSourceAdd:function(){n(W.h8.ADD_PAYMENT_STEPS);R(null)},planId:C.id,setHasAcceptedTerms:$,legalTermsNodeRef:ce,hasLegalTermsFlash:ee,onInvoiceError:function(e){return de(e)},planGroup:f,currencies:g,onCurrencyChange:function(e){return N(e)},hasOpenInvoice:null!=m,purchaseState:F})]}),(0,t.jsx)(V.O3,{children:(0,t.jsx)(p.Z,{premiumSubscription:null!=b?b:null,setPurchaseState:L,onBack:function(){return n(W.h8.PLAN_SELECT)},onNext:oe,onPurchaseError:function(e){return Z(e)},legalTermsNodeRef:ce,flashLegalTerms:function(){return ne(!0)},invoiceError:pe,planError:le,analyticsLocation:h,baseAnalyticsData:y,
flowStartTime:E.startTime,isGift:_,giftStyle:G,trialId:te,planGroup:f,purchaseTokenAuthState:x,openInvoiceId:m,backButtonEligible:U,metadata:ae,isTrial:fe})})]})}},881712:(e,n,r)=>{r.d(n,{P:()=>u});var t=r(785893),i=(r(667294),r(19120)),a=r(799043),o=r(782786),s=r(473708),l=r(919509),c=r.n(l);function u(e){var n=e.giftMessage,r=void 0===n?s.Z.Messages.PREMIUM_PAYMENT_IS_GIFT:n;return!1===(0,o.usePaymentContext)().isGift?null:(0,t.jsx)(i.Z,{className:c().paymentNote,iconSize:i.Z.Sizes.SMALL,icon:a.Z,color:null==r?i.Z.Colors.PRIMARY:i.Z.Colors.SECONDARY,children:r})}},471450:(e,n,r)=>{r.d(n,{ZP:()=>o,aQ:()=>l});var t=r(197597),i=r(260561),a=r(203600);const o=(0,i.B)({kind:"user",id:"2022-02_multi_month_plans",label:"Multi Month Plans",defaultConfig:{newPlans:[]},treatments:[{id:1,label:"3 and 6 Month Plans",config:{newPlans:[a.Xh.PREMIUM_6_MONTH_TIER_2,a.Xh.PREMIUM_3_MONTH_TIER_2]}},{id:2,label:"3 Month Plan Only",config:{newPlans:[a.Xh.PREMIUM_3_MONTH_TIER_2]}}]})
;var s=new Set([t.S.US,t.S.CA]);function l(e){return null==e||s.has(e.country)}}}]);
//# sourceMappingURL=6fe2ba274f1a2ea45f2e.js.map