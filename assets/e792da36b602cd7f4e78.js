"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[78833],{378833:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.PaymentContext=void 0;t.PaymentContextProvider=U;t.usePaymentContext=t.useForwardedPaymentContext=void 0;var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(886664),a=r(143544),i=m(r(468811)),l=r(536211),c=r(444272),f=m(r(160660)),s=r(354479),p=m(r(666071)),y=m(r(695603)),d=m(r(764716)),S=m(r(866441)),v=m(r(163078)),A=m(r(994010)),P=m(r(117235)),b=m(r(858409)),_=m(r(754351)),h=m(r(677971)),E=r(881424),O=r(770348)
;function m(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function I(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),l=0;l<a;l++)i[l]=arguments[l+3];t.children=i}if(t&&u)for(var c in u)void 0===t[c]&&(t[c]=u[c]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function M(){M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return M.apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return
;var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var N=g((0,p.default)(),3),C=N[0],R=N[1],j=N[2];t.useForwardedPaymentContext=j;t.usePaymentContext=R;t.PaymentContext=C;function U(e){
var t=e.activeSubscription,r=e.stepConfigs,n=e.breadcrumbs,p=void 0===n?[]:n,m=e.skuIDs,T=e.isGift,w=void 0!==T&&T,N=e.children,R=(0,h.default)(),j=(0,s.useUID)(),U=(0,c.useBlockedPaymentsConfig)(),k=(0,d.default)(),D=(0,S.default)({isGift:w,activeSubscription:t}),W=D.paymentSources,L=D.hasPaymentSources,F=D.paymentSourceId,Y=D.setPaymentSourceId,B=(0,y.default)({activeSubscription:t,skuIDs:m,paymentSourceId:F,isGift:w}),G=B.hasFetchedSubscriptionPlans,x=B.priceOptions,H=B.setCurrency,K=B.currencyLoading,$=B.currencies,V=(0,b.default)(F),Q=(0,_.default)({stepConfigs:r,breadcrumbs:p}),Z=Q.step,q=Q.setStep,z=Q.steps,J=Q.breadcrumbsData,X=g((0,P.default)(Z),2),ee=X[0],te=X[1],re=(0,v.default)(),ne=re.paymentError,oe=re.paymentAuthenticationState,ue=(0,A.default)(),ae=ue.purchaseError,ie=ue.purchaseErrorBlockRef,le=ue.setPurchaseError,ce=(0,a.useLazyValue)((function(){return{loadId:i.default.v4(),startTime:Date.now()}})),fe=(0,
E.useSubscriptionSelection)(),se=fe.selectedSkuId,pe=fe.selectedPlan,ye=fe.setSelectedSkuId,de=fe.setSelectedPlanId,Se=g((0,l.useStateFromStoresArray)([f.default],(function(){return[f.default.purchaseTokenAuthState,f.default.purchaseTokenHash]})),2),ve=Se[0],Ae=Se[1],Pe=g(o.useState(null),2),be=Pe[0],_e=Pe[1],he=g(o.useState(null),2),Ee=he[0],Oe=he[1];return I(C.Provider,{value:M({stripe:R,headerId:j,contextMetadata:ce,blockedPayments:U,isGift:w,activeSubscription:t,hasFetchedSubscriptions:k,hasFetchedSubscriptionPlans:G,paymentSources:W,hasPaymentSources:L,paymentSourceId:F,setPaymentSourceId:Y,priceOptions:x,setCurrency:H,currencyLoading:K,currencies:$},V,{step:Z,setStep:q,steps:z,stepConfigs:r,breadcrumbs:J,purchaseState:ee,setPurchaseState:te,paymentAuthenticationState:oe,paymentError:ne,purchaseError:ae,setPurchaseError:le,purchaseErrorBlockRef:ie,purchaseTokenAuthState:ve,purchaseTokenHash:Ae,bodyNode:be,setBodyNode:_e,footerNode:Ee,setFooterNode:Oe,selectedSkuId:se,
selectedPlan:pe,setSelectedSkuId:ye,setSelectedPlanId:de})},void 0,I(u.Elements,{options:O.StripeElementsOptions,stripe:R},void 0,N))}U.displayName="PaymentContextProvider"},695603:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,r,n=e.activeSubscription,f=e.skuIDs,s=e.paymentSourceId,p=e.isGift;f=f.filter((function(e){return e!==i.PremiumSubscriptionSKUs.NONE&&e!==i.PremiumSubscriptionSKUs.LEGACY}));var y=(0,o.useStateFromStores)([u.default],(function(){var e=u.default.getPlanIdsForSkus(f).filter((function(e){return!p||i.PREMIUM_PLANS.has(e)}));return e.length>0?u.default.get(e[0]):null})),d=null==y?[]:(0,a.getCurrencies)(y.id,s,p),S=null!==(t=null!==(r=d.find((function(e){return e===(null==n?void 0:n.currency)})))&&void 0!==r?r:d[0])&&void 0!==t?t:l.CurrencyCodes.USD;return c({},(0,a.useCurrencyWithPaymentSourceChange)(S,null==y?void 0:y.id,s,p,f),{currencies:d})};var n,o=r(536211),u=(n=r(909584))&&n.__esModule?n:{default:n
},a=r(298104),i=r(770348),l=r(478036);function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return c.apply(this,arguments)}},764716:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,u.useStateFromStores)([i.default],(function(){return i.default.hasFetchedSubscriptions()}));o.useEffect((function(){e||(0,a.fetchSubscriptions)()}),[e]);return e};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n
}(r(667294)),u=r(536211),a=r(832635),i=(n=r(146771))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}},866441:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.isGift,r=e.activeSubscription,n=(0,u.useStateFromStoresObject)([i.default],(function(){return{defaultPaymentSourceId:i.default.defaultPaymentSourceId,paymentSources:i.default.paymentSources,hasFetchedPaymentSources:i.default.hasFetchedPaymentSources}})),l=n.defaultPaymentSourceId,f=n.paymentSources,s=n.hasFetchedPaymentSources,p=(S=o.useState((function(){return t||null==(null==r?void 0:r.paymentSourceId)?l:r.paymentSourceId})),v=2,function(e){if(Array.isArray(e))return e}(S)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value)
;if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(S,v)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(S,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=p[0],d=p[1];var S,v;o.useEffect((function(){s||(0,a.fetchPaymentSources)()}),[s]);return{paymentSources:f,hasPaymentSources:Object.keys(f).length>0,paymentSourceId:y,setPaymentSourceId:d}};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e)
;var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(536211),a=r(832635),i=(n=r(748826))&&n.__esModule?n:{default:n};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},163078:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(0,n.useStateFromStores)([u.default],(function(){return u.default.error})),t=(c=(0,n.useStateFromStoresArray)([a.default],(function(){return[a.default.error,a.default.isAwaitingAuthentication]})),f=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){
var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(c,f)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(c,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1];var c,f;return{paymentError:null!=r?r:e,paymentAuthenticationState:i?o.PaymentAuthenticationState.PENDING:null!=r?o.PaymentAuthenticationState.ERROR:o.PaymentAuthenticationState.NONE}}
;var n=r(536211),o=r(271014),u=i(r(180887)),a=i(r(86758));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},994010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(a=n.useState(null),i=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(a,i)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}
}(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=e[0],r=e[1],o=n.useRef(null);var a,i;n.useEffect((function(){null!=t&&null!=o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[t]);return{purchaseError:t,setPurchaseError:r,purchaseErrorBlockRef:o}};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}(r(667294));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){
(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},117235:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=(l=n.useState(u.PurchaseState.WAITING),c=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(l,c)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(l,c)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],a=t[1];var l,c;n.useEffect((function(){null!=e&&e!==o.Step.REVIEW&&r!==u.PurchaseState.WAITING&&r!==u.PurchaseState.COMPLETED&&a(u.PurchaseState.WAITING)}),[e,r,a]);return[r,a]};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),o=r(361673),u=r(534564);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function i(e,t){
(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},858409:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=f(o.useState(!1),2),r=t[0],n=t[1],c=f(o.useState(!1),2),s=c[0],p=c[1],y=(0,l.isPrepaidPaymentSource)(e),d=(0,a.useStateFromStores)([i.default],(function(){return u.CountryCodesSets.EEA_COUNTRIES.has(i.default.ipCountryCodeWithFallback)}))&&y;return{hasViewedPurchaseTerms:r,setHasViewedPurchaseTerms:n,showWithdrawalWaiver:d,hasAcceptedWithdrawalWaiver:!d||s,setHasAcceptedWithdrawalWaiver:p}};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}
n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(793786),a=r(536211),i=(n=r(697952))&&n.__esModule?n:{default:n},l=r(838583);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},754351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,r=e.stepConfigs,o=e.breadcrumbs,a=(s=n.useState(null===(t=r[0])||void 0===t?void 0:t.key),p=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(s,p)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name)
;return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(s,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=r.map((function(e){return e.key})).filter((function(e){return null!=e})),f=r.filter((function(e){var t;return null!=e.key&&null!=(null==e||null===(t=e.options)||void 0===t?void 0:t.breadcrumb)})).map((function(e){return{id:e.key,label:e.options.breadcrumb()}})).sort((function(e,t){return null!=o?o.indexOf(e.id)-o.indexOf(t.id):0}));var s,p;return{steps:c,step:i,setStep:l,breadcrumbsData:f}};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor
;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}(r(667294));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},677971:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=(u=n.useState(null),i=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}}(u,i)||function(e,t){if(e){
if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(u,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=e[0],r=e[1];var u,i;n.useEffect((function(){(0,o.getStripe)().then((function(e){return r(e)}))}),[]);return t};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n)
;return n}(r(667294)),o=r(858627);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},881424:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.useSubscriptionSelection=function(){var e=l(o.useState(void 0),2),t=e[0],r=e[1],n=l(o.useState(void 0),2),i=n[0],c=n[1],f=(0,u.useStateFromStores)([a.default],(function(){return null!=i?a.default.get(i):null}));return{selectedSkuId:t,selectedPlan:f,setSelectedSkuId:r,setSelectedPlanId:c}};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null
;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(536211),a=(n=r(909584))&&n.__esModule?n:{default:n};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,u=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){u.push(n.value);if(t&&u.length===t)break}}catch(e){i=!0;o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return u}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},271014:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.PaymentAuthenticationState=void 0;t.usePaymentAuthenticationPoller=function(e){var t=(0,u.useStateFromStores)([f.default],(function(){return f.default.awaitingPaymentId})),r=(0,u.useStateFromStores)([c.default],(function(){return c.default.isConnected()})),l=o.useRef(new a.Interval);o.useEffect((function(){r||null==t||e!==n.PENDING?l.current.stop():l.current.start(5e3,(function(){return(0,i.fetchPayment)(t)}))}),[t,e,r])};t.usePaymentStepForAuthentication=function(e,t,r,u,a){void 0===u&&(u=!1);o.useEffect((function(){
null!=e&&(t===n.PENDING&&e!==l.Step.AWAITING_AUTHENTICATION?r(l.Step.AWAITING_AUTHENTICATION):e===l.Step.AWAITING_AUTHENTICATION&&(t===n.ERROR?r(l.Step.REVIEW):t===n.NONE&&(u?null!=a?a():r(l.Step.REVIEW):r(l.Step.CONFIRM))))}),[e,t,r,u,a])};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(667294)),u=r(536211),a=r(91817),i=r(832635),l=r(361673),c=s(r(23535)),f=s(r(86758));function s(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}t.PaymentAuthenticationState=n
;!function(e){e[e.PENDING=1]="PENDING";e[e.ERROR=2]="ERROR";e[e.NONE=3]="NONE"}(n||(t.PaymentAuthenticationState=n={}))},180887:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;var n,o=c(r(536211)),u=c(r(636602)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e;r&&r.set(e,n);return n}(r(858627)),i=r(770348);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0
;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}var p="",y=null,d=null,S=!1,v="",A="",P="",b="",_="",h="",E="",O="",m=!1,T=null,I=null,M=null,g=null;function w(){d=null;p="";y=null;S=!1;v="US";A="";P="";b="";_="";h="";E="";O="";m=!1;T=null;I=null;M=null;g=null}function N(e){A=e.name;v=e.country;b=e.line1;_=e.line2;h=e.city;E=e.postalCode;O=e.state;P=e.email}function C(){T=null}function R(e){var t=e.error;T=t}var j=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;r.getCreditCardInfo=function(){return{name:A}};r.getBillingAddressInfo=function(){return{name:A,email:P,country:v,line1:b,line2:_,city:h,postalCode:E,state:O}};!function(e,t,r){t&&f(e.prototype,t);r&&f(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"stripePaymentMethod",
get:function(){return d}},{key:"popupCallbackCalled",get:function(){return M}},{key:"braintreeEmail",get:function(){return p}},{key:"braintreeNonce",get:function(){return y}},{key:"redirectedPaymentId",get:function(){return I}},{key:"redirectedPaymentSourceId",get:function(){return g}},{key:"isCardInfoValid",get:function(){return S}},{key:"isBillingAddressInfoValid",get:function(){return m}},{key:"error",get:function(){return T}}]);return t}(o.default.Store);j.displayName="NewPaymentSourceStore";var U=new j(u.default,((n={})[i.ActionTypes.NEW_PAYMENT_SOURCE_STRIPE_PAYMENT_REQUEST_UPDATE]=function(e){var t=e.stripePaymentMethod;if(null!=t){d=t;N(a.parseStripePaymentMethod(d).billingAddressInfo)}else w()},n[i.ActionTypes.NEW_PAYMENT_SOURCE_CARD_INFO_UPDATE]=function(e){var t=e.info,r=e.isValid;A=t.name;S=r},n[i.ActionTypes.NEW_PAYMENT_SOURCE_ADDRESS_INFO_UPDATE]=function(e){var t=e.info,r=e.isValid;null!=t.name&&""!==t.name&&(A=t.name);v=t.country;A=t.name;b=t.line1;_=t.line2;h=t.city
;E=t.postalCode;O=t.state;P=t.email;m=r},n[i.ActionTypes.BRAINTREE_TOKENIZE_PAYPAL_START]=function(){p="";y=null},n[i.ActionTypes.BRAINTREE_TOKENIZE_PAYPAL_SUCCESS]=function(e){var t=e.email,r=e.nonce,n=e.billingAddress;p=t;y=r;N(n);m=v.length>0},n[i.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_START]=C,n[i.ActionTypes.MODAL_POP]=C,n[i.ActionTypes.NEW_PAYMENT_SOURCE_CLEAR_ERROR]=C,n[i.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_FAIL]=R,n[i.ActionTypes.STRIPE_TOKEN_FAILURE]=R,n[i.ActionTypes.BILLING_PAYMENT_SOURCE_CREATE_SUCCESS]=w,n[i.ActionTypes.LOGOUT]=w,n[i.ActionTypes.BILLING_POPUP_BRIDGE_CALLBACK]=function(e){var t=e.query;if(null!=(null==t?void 0:t.payment_id)){M=!0;I=t.payment_id}else if(null!=(null==t?void 0:t.payment_source_id)){M=!0;g=t.payment_source_id}},n[i.ActionTypes.RESET_PAYMENT_ID]=function(){M=!1;I=null},n));t.default=U},86758:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0
;var n,o=y(r(536211)),u=y(r(636602)),a=r(304836),i=r(723420),l=y(r(400922)),c=y(r(60022)),f=r(858627),s=r(770348),p=y(r(247001));function y(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return S(e,t)}function v(e,t,r,n,o,u,a){try{var i=e[u](a),l=i.value}catch(e){r(e);return}i.done?t(l):Promise.resolve(l).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function a(e){v(u,n,o,a,i,"next",e)}function i(e){v(u,n,o,a,i,"throw",e)}a(void 0)}))}}var P=!1,b=null,_=null;function h(){P=!1;_=null}function E(e){var t=e.error,r=t.code,n=t.paymentId;if(r!==l.default.ErrorCodes.AUTHENTICATION_REQUIRED){P=!1;return!1}P=!0;b=n;!function(e){O.apply(this,arguments)}(n)}function O(){
return(O=A(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:e.next=4;return(0,f.authenticatePaymentIntentForPaymentId)(t);case 4:r=e.sent;if(null!=(n=r.error)){u.default.dispatch({type:s.ActionTypes.PAYMENT_AUTHENTICATION_ERROR,error:new l.default(p.default.Messages.PAYMENT_METHOD_CONFIRMATION_ERROR)});o=new Error(n);c.default.captureException(o,{extra:{authenticationError:n}})}case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var t=e.payment;if(!P||t.id!==b||![s.PaymentStatusTypes.COMPLETED,s.PaymentStatusTypes.CANCELED].includes(t.status))return!1;P=!1;_=null;b=null;u.default.wait(a.clearError);u.default.wait(i.clearPurchaseError)}var T=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;S(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}!function(e,t,r){
t&&d(e.prototype,t);r&&d(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"isAwaitingAuthentication",get:function(){return P}},{key:"error",get:function(){return _}},{key:"awaitingPaymentId",get:function(){return b}}]);return t}(o.default.Store);T.displayName="PaymentAuthenticationStore";var I=new T(u.default,((n={})[s.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_START]=h,n[s.ActionTypes.PAYMENT_AUTHENTICATION_CLEAR_ERROR]=h,n[s.ActionTypes.PREMIUM_PAYMENT_ERROR_CLEAR]=h,n[s.ActionTypes.PREMIUM_PAYMENT_MODAL_CLOSE]=h,n[s.ActionTypes.PREMIUM_PAYMENT_MODAL_OPEN]=h,n[s.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_START]=h,n[s.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS]=h,n[s.ActionTypes.PREMIUM_PAYMENT_UPDATE_SUCCESS]=h,n[s.ActionTypes.SKU_PURCHASE_MODAL_CLOSE]=h,n[s.ActionTypes.SKU_PURCHASE_MODAL_OPEN]=h,n[s.ActionTypes.SKU_PURCHASE_START]=h,n[s.ActionTypes.SKU_PURCHASE_SUCCESS]=h,n[s.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_FAIL]=E,
n[s.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_FAIL]=E,n[s.ActionTypes.PREMIUM_PAYMENT_UPDATE_FAIL]=E,n[s.ActionTypes.SKU_PURCHASE_FAIL]=E,n[s.ActionTypes.GIFT_CODE_REDEEM_FAILURE]=E,n[s.ActionTypes.PAYMENT_AUTHENTICATION_ERROR]=function(e){var t=e.error;_=t;P=!1},n[s.ActionTypes.PAYMENT_UPDATE]=m,n[s.ActionTypes.BILLING_PAYMENT_FETCH_SUCCESS]=m,n));t.default=I},160660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=t.PurchaseTokenAuthState=void 0;var n,o,u=c(r(536211)),a=c(r(636602)),i=c(r(400922)),l=r(770348);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(e,n.key,n)}}function s(e,t){s=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return s(e,t)}t.PurchaseTokenAuthState=o;!function(e){e[e.UNKNOWN=0]="UNKNOWN";e[e.PENDING=1]="PENDING";e[e.SUCCESS=2]="SUCCESS";e[e.ERROR=3]="ERROR"
}(o||(t.PurchaseTokenAuthState=o={}));var p=o.UNKNOWN,y=null,d=null;function S(){p=o.UNKNOWN;y=null;d=null}var v=function(e){!function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;s(e,t)}(t,e);function t(){return e.apply(this,arguments)||this}!function(e,t,r){t&&f(e.prototype,t);r&&f(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"purchaseTokenAuthState",get:function(){return p}},{key:"purchaseTokenHash",get:function(){return y}},{key:"expiresAt",get:function(){return d}}]);return t}(u.default.Store);v.displayName="PurchaseTokenAuthStore";var A=new v(a.default,((n={})[l.ActionTypes.SKU_PURCHASE_FAIL]=function(e){e.error.code===i.default.ErrorCodes.PURCHASE_TOKEN_AUTHORIZATION_REQUIRED&&(p=o.PENDING)},n[l.ActionTypes.USER_PAYMENT_CLIENT_ADD]=function(e){p=o.SUCCESS;y=e.purchaseTokenHash;d=e.expiresAt},n[l.ActionTypes.BILLING_PURCHASE_TOKEN_AUTH_CLEAR_STATE]=S,n[l.ActionTypes.BILLING_SUBSCRIPTION_UPDATE_START]=S,
n[l.ActionTypes.PAYMENT_AUTHENTICATION_CLEAR_ERROR]=S,n[l.ActionTypes.PREMIUM_PAYMENT_ERROR_CLEAR]=S,n[l.ActionTypes.PREMIUM_PAYMENT_MODAL_CLOSE]=S,n[l.ActionTypes.PREMIUM_PAYMENT_MODAL_OPEN]=S,n[l.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_START]=S,n[l.ActionTypes.PREMIUM_PAYMENT_SUBSCRIBE_SUCCESS]=S,n[l.ActionTypes.PREMIUM_PAYMENT_UPDATE_SUCCESS]=S,n[l.ActionTypes.SKU_PURCHASE_MODAL_CLOSE]=S,n[l.ActionTypes.SKU_PURCHASE_MODAL_OPEN]=S,n[l.ActionTypes.SKU_PURCHASE_START]=S,n[l.ActionTypes.SKU_PURCHASE_SUCCESS]=S,n));t.default=A},666071:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=o.createContext(void 0);function t(){var t=o.useContext(e);if(null==t)throw new Error("Context was used outside of defined provider.");return t}return[e,t,function(){var r=t();return function(t){var n=t.children;return a(e.Provider,{value:r},void 0,n)}}]};var n,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{
default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e;r&&r.set(e,n);return n}(r(667294));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function a(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var u=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var i=new Array(a),l=0;l<a;l++)i[l]=arguments[l+3];t.children=i}if(t&&u)for(var c in u)void 0===t[c]&&(t[c]=u[c]);else t||(t=u||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}}}]);
//# sourceMappingURL=e792da36b602cd7f4e78.js.map