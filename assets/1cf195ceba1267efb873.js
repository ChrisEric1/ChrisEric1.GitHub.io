"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[13586],{598143:(t,e,n)=>{n.d(e,{m:()=>w,n:()=>N});var r=n(496486),o=n.n(r),i=n(575494),a=n(281110),u=n(296602),c=n(988135),l=n(95508),f=n(22176),s=n(124453),d=n(474717),p=n(257695),h=n(2590);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){n(t);return}u.done?e(c):Promise.resolve(c).then(r,o)}function E(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){y(i,r,o,a,u,"next",t)}function u(t){y(i,r,o,a,u,"throw",t)}a(void 0)}))}}function T(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function m(t,e,n){m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t
}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}};return m(t,e,n||t)}function g(t){g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return g(t)}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){T(t,e,n[e])}))}return t}function _(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t,e){A=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return A(t,e)}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){
var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(e&&i.length===e)break}}catch(t){u=!0;o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}var C=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:
if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};0;var w,R=new u.Z("CloudUpload.tsx"),P=n(392445).Z;!function(t){t.NOT_STARTED="NOT_STARTED";t.STARTED="STARTED";t.UPLOADING="UPLOADING";t.ERROR="ERROR";t.COMPLETED="COMPLETED";t.CANCELED="CANCELED"}(w||(w={}));var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&A(t,e)}(n,t);var e=I(n);function n(t,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)
;var a,u,c,l,f;(a=e.call(this,t,o)).status=w.NOT_STARTED;a.loaded=0;a.reactNativeFilePrepped=!1;a._aborted=!1;a.channelId=r;a.preCompressionSize=null!==(l=null===(u=t.file)||void 0===u?void 0:u.size)&&void 0!==l?l:0;a.currentSize=null!==(f=null===(c=t.file)||void 0===c?void 0:c.size)&&void 0!==f?f:0;a.reactNativeFileIndex=i;a._abortController=new AbortController;return a}var r=n.prototype;r.retryOpts=function(){return this.item.platform===d.ow.REACT_NATIVE?{timeout:36e5,backoff:new i.Z(500,2048e3),retries:12}:{timeout:36e5,retries:12,backoff:new i.Z}};r.uploadFileToCloud=function(){var t,e=this;if(null==this.responseUrl)throw new Error("_uploadFileToCloud - responseUrl is not set");R.log("Uploading ".concat(this.id));t=this.item.platform===d.ow.REACT_NATIVE?{type:this.item.mimeType,uri:this.item.uri,name:this.item.filename}:this.item.file;var n,r=o().throttle((function(t){e.emit("progress",t.loaded,t.total,t.loaded-e.loaded);e.loaded=t.loaded}),50),i={
"Content-Type":null!==(n=t.type)&&void 0!==n?n:"application/octet-stream"};return a.Z.put(b({url:this.responseUrl,body:t,headers:i,signal:this._abortController.signal,onRequestProgress:r},this.retryOpts()))};r.getSize=function(){var t=this;return E((function(){var e,n;return C(this,(function(r){switch(r.label){case 0:return[3,2];case 1:return[2,null!==(e=r.sent())&&void 0!==e?e:0];case 2:return[2,null!==(n=t.currentSize)&&void 0!==n?n:0];case 3:return[2]}}))}))()};r.upload=function(){var t=this;return E((function(){var e,n,r,o,i,u,l,s,d,v;return C(this,(function(y){switch(y.label){case 0:if(t.status===w.COMPLETED)return[2];t.setStatus(w.STARTED);return[3,2];case 1:y.sent();y.label=2;case 2:if(t.status===w.CANCELED){t.handleComplete(t.id);return[2]}return[4,P.getUploadPayload(t)];case 3:e=y.sent();n=(0,p.F)(t.item.target);if(null==e.filename||""===e.filename||0===t.currentSize){R.error("File does not have a filename or size is 0.",JSON.stringify(e))
;t.handleError(h.evJ.INVALID_FILE_ASSET);return[2]}if((null!==(r=t.currentSize)&&void 0!==r?r:0)>n.getMaxFileSize(t.channelId)){t.handleError(h.evJ.ENTITY_TOO_LARGE);return[2]}if(c.ZP.get("upload_fail_50")&&Math.random()<.5){setTimeout((function(){t.handleError(500)}),1e3);return[2]}y.label=4;case 4:y.trys.push([4,6,,7]);R.log("Requesting upload url for ".concat(t.id));return[4,a.Z.post(b({url:n.getCreateAttachmentURL(t.channelId),body:{files:[e]}},t.retryOpts()))];case 5:o=y.sent();t.setResponseUrl(o.body.attachments[0].upload_url);t.setUploadedFilename(o.body.attachments[0].upload_filename);return[3,7];case 6:i=y.sent();if((s=null!==(l=null==i||null===(u=i.body)||void 0===u?void 0:u.code)&&void 0!==l?l:"".concat(i.status,": ").concat(JSON.stringify(i.body)))!==h.evJ.ENTITY_TOO_LARGE){R.error("Requesting upload url failed with code ".concat(s," for ").concat(t.id));f.Z.captureException(i)}t.handleError(s);return[2];case 7:y.trys.push([7,9,,10]);return[4,t.uploadFileToCloud()];case 8:
d=y.sent();t.handleComplete(d);return[3,10];case 9:v=y.sent();if(t.status===w.CANCELED)t.handleComplete(v);else{R.info("Error: status ".concat(v.status," for ").concat(t.id));t.handleError(v)}return[3,10];case 10:return[2]}}))}))()};r.reactNativeCompressAndExtractData=function(){var t=this;return E((function(){var e,n,r,o,i,a,u,c,f;return C(this,(function(d){switch(d.label){case 0:if(!(0,p.F)(t.item.target).shouldReactNativeCompressUploads){R.log("reactNativeCompressAndExtractData() disabled by upload target");return[2]}if(!0===t.reactNativeFilePrepped){R.log("reactNativeCompressAndExtractData() file already prepped - ".concat(t.id));return[2]}R.log("Starting compression/conversion for ".concat(t.id));return[4,(0,l.J)(t,null!==(e=t.reactNativeFileIndex)&&void 0!==e?e:0)];case 1:if(null==(n=d.sent())||null==n.file)return[2];r=n.uri;o=n.file.name;i=n.file.type;t.filename=o;if(null==o||null==r||null==i){R.error("Insufficient file data: ".concat({filename:o,uri:r,mimeType:i
}," for ").concat(t.id));throw new Error("Insufficient file data: ".concat({filename:o,uri:r,mimeType:i}))}if(null===(a=n.fileSize)||void 0===a)return[3,2];c=a;return[3,4];case 2:return[4,(0,s.Lc)(r)];case 3:c=d.sent().size;d.label=4;case 4:u=c;t.postCompressionSize=u;t.currentSize=u;if(null==u){R.error("Size missing from file data for ".concat(t.id));throw new Error("Size missing from file data")}R.log("Completed compression and conversion. Output size=".concat(u," bytes; filename=").concat(o," for ").concat(t.id));f={uri:r,filename:o,mimeType:i};t.item=b({},t.item,f);t.reactNativeFilePrepped=!0;return[2]}}))}))()};r.handleError=function(t){this.setStatus(w.ERROR);this.error=t;try{this.emit("error",t)}catch(t){}this.removeAllListeners()};r.handleComplete=function(t){this.setStatus(w.COMPLETED);R.log("Upload complete for ".concat(this.id));this.emit("complete",t);this.removeAllListeners()};r.cancel=function(){R.log("Cancelled called for ".concat(this.id));this._abortController.abort()
;this.status===w.COMPLETED&&this.delete();this.setStatus(w.CANCELED);this.emit("complete");this.removeAllListeners()};r.resetState=function(){this.status=w.NOT_STARTED;this.uploadedFilename=void 0;this.responseUrl=void 0;this.error=void 0;this._abortController=new AbortController;return m(g(n.prototype),"resetState",this).call(this)};r.delete=function(){var t=this;return E((function(){var e;return C(this,(function(n){switch(n.label){case 0:if(null==t.uploadedFilename)return[2];e=(0,p.F)(t.item.target).getDeleteUploadURL(t.uploadedFilename);n.label=1;case 1:n.trys.push([1,3,,4]);return[4,a.Z.delete(e)];case 2:n.sent();return[3,4];case 3:n.sent();return[3,4];case 4:return[2]}}))}))()};r.setResponseUrl=function(t){this.responseUrl=t};r.setStatus=function(t){this.status=t};r.setFilename=function(t){this.filename=t};r.setUploadedFilename=function(t){this.uploadedFilename=t};n.fromJson=function(t){var e=new n(t.item,t.channelId,t.showLargeMessageDialog,t.reactNativeFileIndex)
;e.status!==w.COMPLETED&&(e.status=w.NOT_STARTED);Object.entries(t).forEach((function(t){var n=S(t,2),r=n[0],o=n[1];r.startsWith("_")||(e[r]=o)}));return e};return n}(d.ZP)},474717:(t,e,n)=>{n.d(e,{ow:()=>h,ZP:()=>T});var r=n(717187),o=n.n(r),i=n(496486),a=n.n(i),u=n(468811),c=n.n(u),l=n(149258),f=n(124453);function s(t){s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return s(t)}function d(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e){p=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return p(t,e)}var h,v,y=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}!function(t){t[t.REACT_NATIVE=0]="REACT_NATIVE";t[t.WEB=1]="WEB"}(h||(h={}));!function(t){t[t.FILE_ATTACHMENT=0]="FILE_ATTACHMENT";t[t.IMAGE_PICKER=1]="IMAGE_PICKER"}(v||(v={}));var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&p(t,e)}(n,t);var e=E(n);function n(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var o;(o=e.call(this)).item=t;if(t.platform===h.REACT_NATIVE){var i;o.id=null!==(i=t.id)&&void 0!==i?i:t.uri;var u=(0,f.hn)({uri:t.uri,overrideFilename:t.filename,overrideType:t.mimeType
});o.filename=u.filename;o.isImage=u.isImage;o.isVideo=u.isVideo;o.mimeType=u.type;o.origin=t.origin;o.durationSecs=t.durationSecs;o.waveform=t.waveform;o.isRemix=t.isRemix}else{var s;o.id=null!==(s=t.id)&&void 0!==s?s:a().uniqueId("upload");o.classification=l.f3(t.file);o.isImage="image"===o.classification;o.isVideo="video"===o.classification;o.filename=t.file.name;o.mimeType=t.file.type;o.isThumbnail=t.isThumbnail}o.uniqueId=c().v4();o.showLargeMessageDialog=r;o.spoiler=!1;o.sensitive=!1;o.description=null;return o}var r=n.prototype;r.cancel=function(){};r.resetState=function(){return this};return n}(o())},257695:(t,e,n)=>{n.d(e,{e:()=>l,F:()=>s});var r=n(108034),o=n(61209),i=n(149258),a=n(124453),u=n(2590);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}var l,f=function(){function t(){!function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;e.getCreateAttachmentURL=function(t){return u.ANM.MESSAGE_CREATE_ATTACHMENT_UPLOAD(t)};e.getDeleteUploadURL=function(t){return u.ANM.MESSAGE_DELETE_UPLOAD(t)};e.getMaxFileSize=function(t){var e=o.Z.getBasicChannel(t);return i.dg(null==e?void 0:e.guild_id)};e.getMaxAttachmentsCount=function(){return u.dN1};e.getMaxTotalAttachmentSize=function(){return a.zz};!function(t,e,n){e&&c(t.prototype,e);n&&c(t,n)}(t,[{key:"shouldReactNativeCompressUploads",get:function(){return!0}}]);return t}();!function(t){t[t.MESSAGE_ATTACHMENT=0]="MESSAGE_ATTACHMENT";t[t.GUILD_PRODUCT_ATTACHMENT=1]="GUILD_PRODUCT_ATTACHMENT"}(l||(l={}));function s(t){switch(t){case l.GUILD_PRODUCT_ATTACHMENT:return new r.Z;default:case l.MESSAGE_ATTACHMENT:return new f}}},595882:(t,e,n)=>{n.d(e,{T:()=>o,S:()=>i});var r=n(474717);function o(t,e){if(e.id===t.uri||null!=e.id&&e.id===t.id)return!0
;if(e.item.platform===r.ow.REACT_NATIVE){var n=e.item,o=t.filename;if(n.originalUri===t.uri)return!0;if(null!=o){var i;if(null===(i=n.originalUri)||void 0===i?void 0:i.includes(o))return!0}return!1}return!1}function i(t,e){return 0===e?0:Math.min(Math.floor(t/e*100),100)}},392445:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(441143),o=n.n(r),i=n(496486),a=n.n(i);const u={getUploadPayload:function(t){var e,n=null===(e=t.item)||void 0===e?void 0:e.file;o()(null!=n,"file data must not be empty");return{filename:null==n?void 0:n.name,file_size:null==n?void 0:n.size,id:a().uniqueId()}}}},988135:(t,e,n)=>{n.d(e,{zU:()=>s,ZP:()=>E});var r=n(202351),o=n(744564);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return u(t)}function c(t,e){
return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e){l=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return l(t,e)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(e&&i.length===e)break}}catch(t){u=!0;o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s,d=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}!function(t){t[t.MESSAGING=0]="MESSAGING"}(s||(s={}));var h={upload_fail_50:{label:"Uploads: Fail 50% of uploads with 500 status after a 1 second delay",category:s.MESSAGING},send_fail_100:{label:"Send: Fail with 500 status",category:s.MESSAGING}},v={};var y=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&l(t,e)}(n,t);var e=p(n);function n(){a(this,n);return e.apply(this,arguments)}var r=n.prototype;r.getUserAgnosticState=function(){return{toggleStates:v}};r.initialize=function(t){for(var e in h){var n,r,o=null!==(r=null==t||null===(n=t.toggleStates)||void 0===n?void 0:n[e])&&void 0!==r&&r;v[e]=o}};r.get=function(t){var e;return null!==(e=v[t])&&void 0!==e&&e};r.set=function(t,e){v[t]=e;return e};r.all=function(){return v};r.allByCategory=function(t){return Object.entries(h).filter((function(e){var n=f(e,2);n[0];return n[1].category===t})).map((function(t){var e=f(t,2),n=e[0],r=e[1];return[n,v[n],r]}))};r.__getLocalVars=function(){return{toggleStates:v}};return n}(r.ZP.DeviceSettingsStore);y.displayName="DevToolsDevSettingsStore";y.persistKey="DevToolsDevSettingsStore"
;const E=new y(o.Z,{DEV_TOOLS_DEV_SETTING_SET:function(t){v[t.toggle]=t.value}})},770960:(t,e,n)=>{n.d(e,{qm:()=>i,t7:()=>a,gf:()=>u,xv:()=>c,J7:()=>l});var r,o=n(2590),i=4,a=5,u=350,c=1e3*o.UF9.MINUTE,l=1e3*o.UF9.MINUTE*2;!function(t){t[t.STICKER=0]="STICKER"}(r||(r={}))},179936:(t,e,n)=>{n.d(e,{kT:()=>f,wN:()=>s,Tk:()=>d});var r=n(823493),o=n.n(r),i=n(652591),a=n(770960),u=n(2590),c=/(!|\.|;|,|-|—|–|\?|"|')/g,l=/(\n|\t|\s)/g,f=function(t){return t.replace(c,"").replace(l," ")},s=function(t){return null==t?[]:f(t).trim().split(" ")},d=o()((function(t){i.default.track(u.rMx.AUTO_SUGGEST_DISPLAYED,{suggestion_trigger:t})}),a.xv,{leading:!0,trailing:!1})},108034:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(2590);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")
}(this,t)}var e=t.prototype;e.getCreateAttachmentURL=function(t){return r.ANM.GUILD_PRODUCT_CREATE_ATTACHMENT_UPLOAD(t)};e.getDeleteUploadURL=function(t){return r.ANM.MESSAGE_DELETE_UPLOAD(t)};e.getMaxFileSize=function(t){return 524288e3};e.getMaxAttachmentsCount=function(){return 3};e.getMaxTotalAttachmentSize=function(){return 524288e3};!function(t,e,n){e&&o(t.prototype,e);n&&o(t,n)}(t,[{key:"shouldReactNativeCompressUploads",get:function(){return!1}}]);return t}()},852077:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(413675),o=n(744564),i=n(284610);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t){u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return u(t)}function c(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e){
l=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return l(t,e)}var f=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}var d={},p={};var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&l(t,e)}(n,t);var e=s(n);function n(){a(this,n);return e.apply(this,arguments)}var r=n.prototype;r.getStickerPreview=function(t,e){
return(e===i.d.FirstThreadMessage?p:d)[t]};r.__getLocalVars=function(){return{previews:d,threadCreationPreviews:p,stickerMessagePreviewStore:v}};return n}(r.Z.Store);h.displayName="StickerMessagePreviewStore";var v=new h(o.Z,{ADD_STICKER_PREVIEW:function(t){var e=t.channelId,n=t.sticker;(t.draftType===i.d.FirstThreadMessage?p:d)[e]=[n]},CLEAR_STICKER_PREVIEW:function(t){var e=t.channelId,n=t.draftType===i.d.FirstThreadMessage?p:d;null!=n[e]&&delete n[e]},LOGOUT:function(){d={};p={}}});const y=v},514351:(t,e,n)=>{n.d(e,{u3:()=>r,n0:()=>o,og:()=>i,aQ:()=>f,z:()=>s,al:()=>a,Ih:()=>u,MO:()=>c,V0:()=>l});var r,o,i;!function(t){t[t.PNG=1]="PNG";t[t.APNG=2]="APNG";t[t.LOTTIE=3]="LOTTIE";t[t.GIF=4]="GIF"}(r||(r={}));!function(t){t[t.STANDARD=1]="STANDARD";t[t.GUILD=2]="GUILD"}(o||(o={}));!function(t){t.PNG="png";t.APNG="png";t.LOTTIE="json";t.WEBP="webp";t.GIF="gif"}(i||(i={}));var a,u,c,l,f=function(t){return t!==r.PNG},s=function(t){return t!==o.STANDARD};!function(t){
t[t.STICKER=0]="STICKER";t[t.CREATE_STICKER=1]="CREATE_STICKER"}(a||(a={}));!function(t){t.PACK="PACK";t.FAVORITE="FAVORITE";t.RECENT="RECENT";t.SEARCH_RESULTS="SEARCH_RESULTS";t.SEARCH_SUGGESTIONS="SEARCH_SUGGESTIONS";t.GUILD="GUILD";t.EMPTY_GUILD_UPSELL="EMPTY_GUILD_UPSELL";t.CREATE_STICKER="CREATE_STICKER"}(u||(u={}));!function(t){t[t.STICKER_NAME=0]="STICKER_NAME";t[t.TAG=1]="TAG";t[t.CORRELATED_EMOJI=2]="CORRELATED_EMOJI";t[t.GUILD_NAME=3]="GUILD_NAME";t[t.PACK_NAME=4]="PACK_NAME"}(c||(c={}));!function(t){t[t.STICKER_PICKER=0]="STICKER_PICKER";t[t.EXPRESSION_SUGGESTIONS=1]="EXPRESSION_SUGGESTIONS";t[t.AUTOCOMPLETE=2]="AUTOCOMPLETE"}(l||(l={}))},513586:(t,e,n)=>{n.d(e,{Zt:()=>A,Zv:()=>O,_V:()=>I,Q6:()=>C,sM:()=>w,B0:()=>R,X_:()=>P,z:()=>N,WD:()=>D,Hc:()=>M,J8:()=>L,jl:()=>U,cv:()=>G,V9:()=>j})
;var r=n(179936),o=n(874049),i=n(567403),a=n(255592),u=n(775173),c=n(120415),l=n(852077),f=n(514351),s=n(719833),d=n(2590),p=window.GLOBAL_ENV,h=p.API_ENDPOINT,v=p.MEDIA_PROXY_ENDPOINT,y=p.PROJECT_ENV,E=p.ASSET_ENDPOINT,T=p.CDN_HOST,m=Object.values(f.og),g=decodeURIComponent(d.ANM.STICKER_ASSET("[\\d]+","(".concat(m.join("|"),")"))),b=new RegExp("(".concat(location.protocol).concat(E,"|").concat(location.protocol).concat(v,")(").concat(g,")"),"ig"),_=new RegExp("".concat(location.protocol).concat(h,"(").concat(g,")"),"ig"),A=function(t){if(null!=t.cover_sticker_id){var e=t.stickers.find((function(e){return e.id===t.cover_sticker_id}));if(null!=e)return e}return t.stickers[0]},S=function(t){switch(t){case f.u3.PNG:return u.$k?f.og.WEBP:f.og.PNG;case f.u3.APNG:return f.og.APNG;case f.u3.LOTTIE:return f.og.LOTTIE;case f.u3.GIF:return f.og.GIF;default:throw new Error("Unexpected format type: ".concat(t))}},O=function(t){switch(t){case"application/json":return f.u3.LOTTIE;case"image/apng":
return f.u3.APNG;case"image/png":case"image/webp":return f.u3.PNG;case"image/gif":return f.u3.GIF;default:throw new Error("Unexpected file type: ".concat(t))}},I=function(t){return null==t?null:"".concat(t.name,".").concat(S(t.format_type))},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isPreview,r=void 0!==n&&n,i=e.size,a=void 0===i?s.lE:i;if(null==t.format_type)return null;var u=d.ANM.STICKER_ASSET(t.id,S(t.format_type));if("development"!==y){if(t.format_type===f.u3.LOTTIE)return"".concat(location.protocol).concat(E).concat(u);var l=t.format_type===f.u3.APNG&&r&&!(0,c.Dt)()?"&passthrough=false":"",p=Math.min(2,(0,o.x_)());return"".concat(location.protocol).concat(v).concat(u,"?size=").concat((0,o.oO)(a*p)).concat(l)}return"".concat(location.protocol).concat(h).concat(u)},w=function(t,e){var n,r=t.banner_asset_id;if(null==r)return null;var i=u.$k?"webp":"png"
;n=null!=T?"".concat(location.protocol,"//").concat(T,"/app-assets/").concat(s.Ks,"/store/").concat(r,".").concat(i):"".concat(location.protocol).concat(h).concat(d.ANM.STORE_ASSET(s.Ks,r,i));null!=e&&(n+="?size=".concat((0,o.oO)(e)));return n},R=function(t){return t.match("development"!==y?b:_)},P=function(t){return t.stickers.some((function(t){var e=t.format_type;return e===f.u3.APNG||e===f.u3.LOTTIE||e===f.u3.GIF}))},N=function(t){return{type:f.Ih.PACK,id:t.id,name:t.name,stickers:t.stickers,previewSticker:A(t)}},D=function(t,e){return t===s.yr.ANIMATE_ON_INTERACTION?e:t!==s.yr.NEVER_ANIMATE},M=function(t,e,n,o){if(a.Z.getUploadCount(n,o)>0)return!0;var i=l.Z.getStickerPreview(n,o);if(null!=i&&i.length>0)return!0;switch(t){case f.V0.STICKER_PICKER:return""!==e.trim();case f.V0.AUTOCOMPLETE:case f.V0.EXPRESSION_SUGGESTIONS:return(0,r.wN)(e).length>1;default:return!1}},L=function(t){return t.type===f.n0.GUILD},U=function(t){return t.type===f.n0.STANDARD},G=function(t){
return t.stickerItems.length>0?t.stickerItems:t.stickers.length>0?t.stickers:[]},j=function(t){if(null===t)return!1;var e=t.guild_id;return void 0!==i.Z.getGuild(e)}},284610:(t,e,n)=>{n.d(e,{d:()=>_,Z:()=>N});var r=n(496486),o=n.n(r),i=n(202351),a=n(744564),u=n(72580),c=n(736818),l=n(61209),f=n(837067),s=n(2590);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function v(t){v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return v(t)}function y(t,e){e=null!=e?e:{};Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t)
;e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function E(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t,e){T=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return T(t,e)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0){i.push(r.value);if(e&&i.length===e)break}}catch(t){u=!0;o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e)
;var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}var _,A=function(){return s.en1+500};!function(t){
t[t.ChannelMessage=0]="ChannelMessage";t[t.ThreadSettings=1]="ThreadSettings";t[t.FirstThreadMessage=2]="FirstThreadMessage"}(_||(_={}));var S={};function O(t){var e=S[t];null==e&&(e=S[t]={});return e}function I(t){var e=t.type,n=t.channelId,r=t.draft,o=t.draftType,i=l.Z.getChannel(n);r===(null==i?void 0:i.template)&&(r="");var a=c.default.getId();if(null!=a&&null!=r&&""!==r){var u,f=O(a),s=f[n];null==s&&(s=f[n]={});if((r=function(t){var e=A();t.length>e&&(t=t.substr(0,e));return t}(r))===(null===(u=s[o])||void 0===u?void 0:u.draft))return!1;s[o]={timestamp:Date.now(),draft:r}}else C(n,o);return"DRAFT_SAVE"===e}function C(t,e){var n=c.default.getId();if(null==n)return!1;var r=O(n),i=r[t];if(null==i)return!1;delete i[e];o().isEmpty(i)&&delete r[t]}function w(){var t=c.default.getId();if(!(null==t||f.Z.totalUnavailableGuilds>0)){var e=O(t);for(var n in e)null==l.Z.getChannel(n)&&delete e[n]}}function R(t){var e=t.channel.id,n=c.default.getId();if(null==n)return!1;delete O(n)[e];return!1}
var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&T(t,e)}(n,t);var e=b(n);function n(){p(this,n);return e.apply(this,arguments)}var r=n.prototype;r.initialize=function(t){S=null!=t?t:{};this.waitFor(c.default,l.Z,f.Z)};r.getState=function(){return S};r.getThreadDraftWithParentMessageId=function(t){var e=this,n=c.default.getId();if(null!=n){var r=O(n),o=Object.keys(r).find((function(n){var r=e.getThreadSettings(n);return(null==r?void 0:r.parentMessageId)===t}));return null!=o?this.getThreadSettings(o):void 0}};r.getRecentlyEditedDrafts=function(t){var e=c.default.getId();if(null==e)return[];var n=O(e);return o()(n).mapValues((function(e){return null==e?void 0:e[t]})).pickBy(u.lm).toPairs().map((function(t){var e=m(t,2),n=e[0],r=e[1];return{channelId:n,timestamp:r.timestamp,draft:r.draft}
})).sortBy((function(t){return-t.timestamp})).value()};r.getDraft=function(t,e){var n=c.default.getId();if(null==n)return"";var r=O(n)[t];if(null!=r){var o=r[e];if(null!=o)return o.draft}return""};r.getThreadSettings=function(t){var e=c.default.getId();if(null==e)return null;var n=O(e)[t];return null==n?null:n[_.ThreadSettings]};r.__getLocalVars=function(){return{getMaxDraftSize:A,drafts:S}};return n}(i.ZP.PersistedStore);P.displayName="DraftStore";P.persistKey="DraftStore";P.migrations=[function(t){if(null==t)return{};for(var e in t)"timestamp"in t[e]&&(t[e]=h({},_.ChannelMessage,t[e]));return t},function(t){var e=c.default.getId();if(null==t||null==e)return{};var n={},r=n[e]={};for(var o in t)r[o]=t[o];return n}];const N=new P(a.Z,{CONNECTION_OPEN:function(){var t=c.default.getId();t in S||(S[t]={});w();return!1},LOGOUT:function(t){t.isSwitchingAccount||(S={})},MULTI_ACCOUNT_REMOVE_ACCOUNT:function(t){t.userId in S&&delete S[t.userId]},GUILD_DELETE:function(){w();return!1},
CHANNEL_DELETE:R,THREAD_DELETE:R,THREAD_CREATE:function(t){var e=t.channel,n=c.default.getId();if(null==n||e.ownerId===n)return!1;var r=O(n),o=r[e.parent_id];if(null==o)return!1;var i=o[_.ThreadSettings];if(null==i)return!1;if(i.parentMessageId!==e.id)return!1;var a,u,l=r[e.parent_id];if(null==l)return!1;var f=null!==(u=null===(a=l[_.FirstThreadMessage])||void 0===a?void 0:a.draft)&&void 0!==u?u:"";""!==f&&(r[e.id]=h({},_.ChannelMessage,{timestamp:Date.now(),draft:f}));C(e.parent_id,_.ThreadSettings);C(e.parent_id,_.FirstThreadMessage)},DRAFT_SAVE:I,DRAFT_CHANGE:I,DRAFT_CLEAR:function(t){return C(t.channelId,t.draftType)},THREAD_SETTINGS_DRAFT_CHANGE:function(t){var e=t.channelId,n=t.draft,r=c.default.getId();if(null!=r){var o=O(r),i=o[e];null==i&&(i=o[e]={});i[_.ThreadSettings]=y(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));r.forEach((function(e){h(t,e,n[e])}))}return t}({timestamp:Date.now()},i[_.ThreadSettings],n),{parentChannelId:e})}}})},255592:(t,e,n)=>{n.d(e,{Z:()=>R});var r=n(496486),o=n.n(r),i=n(202351),a=n(744564),u=n(105783);const c=(0,n(260561).B)({kind:"user",id:"2022-10_context_menu_and_new_media_picker",label:"Context Menu and New Media Picker",defaultConfig:{enabled:!1,persistentGiftButton:!0},treatments:[{id:1,label:"New media picker is enabled. Gift button is visible alongside Create Chread",config:{enabled:!0,persistentGiftButton:!0}},{id:2,label:"New media picker is enabled. Gift button is NOT visible alongside Create Chread",config:{enabled:!0,persistentGiftButton:!1}}]});var l=n(598143),f=n(595882),s=n(284610),d=n(2590),p=n(473708);function h(t,e){(null==e||e>t.length)&&(e=t.length)
;for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t){y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return y(t)}function E(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t,e){T=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return T(t,e)}function m(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}var _=new Map,A=[];function S(t,e){var n,r;return null!==(r=null===(n=O(t))||void 0===n?void 0:n.get(e))&&void 0!==r?r:A}function O(t){var e;return null!==(e=_.get(t))&&void 0!==e?e:new Map}function I(t,e,n){var r=O(t)
;r.set(e,n);_.set(t,r)}var C=function(t){var e,n=t.files,r=t.channelId,i=t.showLargeMessageDialog,a=t.draftType,f=m(S(r,a));if(!0===(null===(e=c.getCurrentConfig({},{autoTrackExposure:!1}))||void 0===e?void 0:e.enabled)&&f.length+n.length>d.dN1)u.Z.show({title:p.Z.Messages.ATTACHMENT_TOO_MANY_ERROR_TITLE,body:p.Z.Messages.ATTACHMENT_TOO_MANY_ERROR_MESSAGE.format({limit:d.dN1})});else{o().forEach(n,(function(t){var e=new l.n(t,r,i,f.length);e.upload();f.push(e)}));I(r,a,f)}};var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&T(t,e)}(n,t);var e=b(n);function n(){v(this,n);return e.apply(this,arguments)}var r=n.prototype;r.getFirstUpload=function(t,e){var n=S(t,e);return n.length>0?n[0]:null};r.hasAdditionalUploads=function(t,e){var n;return(null!==(n=S(t,e).length)&&void 0!==n?n:0)>1}
;r.getUploads=function(t,e){return S(t,e)};r.getUploadCount=function(t,e){var n;return null!==(n=S(t,e).length)&&void 0!==n?n:0};r.getUpload=function(t,e,n){return S(t,n).find((function(t){return t.id===e}))};r.findUpload=function(t,e,n){return S(t,e).find(n)};r.__getLocalVars=function(){return{_uploads:_,EMPTY:A,handleAddFiles:C}};return n}(i.ZP.Store);w.displayName="UploadAttachmentStore";const R=new w(a.Z,{UPLOAD_ATTACHMENT_POP_FILE:function(t){var e=t.channelId,n=m(S(e,s.d.ChannelMessage));n.shift();I(e,s.d.ChannelMessage,n)},UPLOAD_ATTACHMENT_ADD_FILES:C,UPLOAD_ATTACHMENT_UPDATE_FILE:function(t){var e=t.channelId,n=t.id,r=t.filename,o=t.description,i=t.spoiler,a=t.draftType;I(e,a,m(S(e,a)).map((function(t){if(t.id===n){void 0!==r&&(t.filename=r);void 0!==i&&(t.spoiler=i);void 0!==o&&(t.description=o);return t}return t})))},UPLOAD_ATTACHMENT_REMOVE_FILE:function(t){var e,n,r=t.channelId,o=t.id,i=t.draftType,a=!0===(null===(e=c.getCurrentConfig({},{autoTrackExposure:!1
}))||void 0===e?void 0:e.enabled),u=m(S(r,i));n=a?u.findIndex((function(t){return(0,f.T)({uri:o,filename:o},t)})):u.findIndex((function(t){return o===t.id}));if(n>-1){u.splice(n,1)[0].cancel();I(r,i,u)}},UPLOAD_ATTACHMENT_REMOVE_FILES:function(t){var e=t.channelId,n=t.attachmentIds,r=t.draftType,o=m(S(e,r));n.forEach((function(t){var e=o.findIndex((function(e){return t===e.id}));if(e>-1){o.splice(e,1)[0].cancel()}}));I(e,r,o)},UPLOAD_ATTACHMENT_CLEAR_ALL_FILES:function(t){I(t.channelId,t.draftType,[])},UPLOAD_ATTACHMENT_SET_UPLOADS:function(t){var e=t.channelId,n=t.uploads;I(e,t.draftType,n)},UPLOAD_ATTACHMENT_SET_FILE:function(t){var e=t.channelId,n=t.id,r=t.file,o=t.draftType,i=m(S(e,o)).filter((function(t){return t.id!==n})),a=new l.n(r,e);a.upload();i.push(a);I(e,o,i)},SIDEBAR_CLOSE:function(t){I(t.baseChannelId,s.d.FirstThreadMessage,[])}})},95508:(t,e,n)=>{n.d(e,{J:()=>f,V:()=>s});var r=n(441143),o=n.n(r),i=n(474717),a=n(124453);function u(t,e,n,r,o,i,a){try{
var u=t[i](a),c=u.value}catch(t){n(t);return}u.done?e(c):Promise.resolve(c).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,c,"next",t)}function c(t){u(i,r,o,a,c,"throw",t)}a(void 0)}))}}var l=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;(r=0,o)&&(i=[2&i[0],o.value]);switch(i[0]){case 0:case 1:o=i;break;case 4:a.label++;return{value:i[1],done:!1};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,
o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1];o=i;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(i);break}o[2]&&a.ops.pop();a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t];r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function f(t,e){o()(t.item.platform===i.ow.WEB,"Upload must be in the Web format");var n,r=(0,a.B)(t,e);return Promise.resolve({file:t.item.file,name:null!==(n=r.filename)&&void 0!==n?n:""})}function s(t){return d.apply(this,arguments)}function d(){return(d=c((function(t){return l(this,(function(t){return[2]}))}))).apply(this,arguments)}}}]);
//# sourceMappingURL=1cf195ceba1267efb873.js.map