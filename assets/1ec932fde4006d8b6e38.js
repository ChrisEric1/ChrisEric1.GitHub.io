(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[6321],{934501:(e,s,r)=>{e.exports=r.p+"abf97721127e0ddf8f8c4e3c3c417a6f.svg"},406321:(e,s,r)=>{"use strict";r.r(s);r.d(s,{default:()=>Y});var n,t=r(785893),i=r(667294),a=r(368365),o=r(820028),l=r(331535),c=r(832010),u=r(7046),E=r(914242),I=r(758100),d=r(757987),N=r(908570),S=r(153532),m=r(449953),_=r(436035),T=r(67416),O=r(766936),M=r(917870),A=r(890889),f=r(939532),x=r(461061),v=r(610804),p=r(54814),D=r(959797),L=r(570653),h=r.n(L);function g(e,s){(null==s||s>e.length)&&(s=e.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=e[r];return n}function b(e,s,r){s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r;return e}function U(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){
return Object.getOwnPropertyDescriptor(r,e).enumerable}))));n.forEach((function(s){b(e,s,r[s])}))}return e}function j(e,s){s=null!=s?s:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):function(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})));r.push.apply(r,n)}return r}(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}));return e}function P(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,t,i=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done);a=!0){i.push(n.value);if(s&&i.length===s)break}}catch(e){o=!0;t=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw t}}return i}}(e,s)||function(e,s){if(!e)return
;if("string"==typeof e)return g(e,s);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,s)}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.DEFAULT=0]="DEFAULT";e[e.SUBMITTING=1]="SUBMITTING";e[e.SUBMITTED=2]="SUBMITTED"}(n||(n={}));function C(e){var s=e.guild,i=e.headerText,a=e.headerSubtext,o=e.step,u=M.ZP.getGuildIconURL({id:s.id,icon:s.icon,size:120});return(0,t.jsxs)(T.xB,{className:h().header,children:[(0,t.jsxs)("div",{className:h().headerIconContainer,children:[null!=u?(0,t.jsx)(O.ZP,{src:u,"aria-label":s.name,size:O.ZP.Sizes.SIZE_120,className:h().guildIcon}):(0,t.jsx)("div",{className:h().acronym,children:s.acronym}),o===n.SUBMITTED?(0,t.jsx)(m.Z,{
className:h().greenPing,color:(0,c.Lq)(x.Ilk.GREEN_360),backgroundColor:(0,c.Lq)(x.Ilk.WHITE_100)}):(0,t.jsx)(N.Ee,{src:r(934501),className:h().redPing})]}),(0,t.jsxs)("div",{className:h().headerText,children:[(0,t.jsx)(l.X6,{variant:"heading-lg/extrabold",color:"header-primary",children:i}),(0,t.jsx)(l.xv,{variant:"text-md/normal",color:"header-primary",children:a})]})]})}function y(e){var s=e.guild,r=s.getRole(s.id);if(null==r)return null;var n=r.name,i=r.color;return(0,t.jsxs)("span",{className:h().roleRow,children:[(0,t.jsx)(S.Z,{className:h().roleDot,color:i.toString(),background:!1,tooltip:!1}),(0,t.jsx)(l.xv,{className:h().roleName,variant:"text-sm/medium",color:"interactive-active",children:n})]})}var R=function(e){return e.toString()===x.Plq.MENTION_EVERYONE.toString()?D.Z.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_MENTION_EVERYONE:(0,I.wt)(e)};function F(e){var s=e.permissions,r=e.step;return r===n.SUBMITTED?null:(0,t.jsxs)("div",{className:h().tableContainer,
children:[(0,t.jsx)(l.xv,{className:h().tableHeader,variant:"text-xs/semibold",color:"text-muted",children:r===n.DEFAULT?D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_ENABLED_PERMISSIONS:D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLING_PERMISSIONS}),(0,t.jsx)("div",{className:h().permissionsTable,children:s.map((function(e,s){return(0,t.jsxs)("div",{className:h().permissionRow,children:[(0,t.jsx)("div",{className:r===n.DEFAULT?h().bulletPositive:h().bulletWarning}),(0,t.jsx)(l.xv,{variant:"text-sm/normal",color:"text-normal",children:R(e)})]},s)}))})]})}function B(e){var s=e.permissions,r=e.step;if(0===s.length&&r!==n.SUBMITTED)return null;r===n.SUBMITTED&&(s=p.$X);return(0,t.jsxs)("div",{className:h().tableContainer,children:[(0,t.jsx)(l.xv,{className:h().tableHeader,variant:"text-xs/semibold",color:"text-muted",children:r===n.SUBMITTED?D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLED:D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_DISABLED_PERMISSIONS}),(0,
t.jsx)("div",{className:h().permissionsTable,children:s.map((function(e,s){return(0,t.jsxs)("div",{className:h().permissionRow,children:[(0,t.jsx)("div",{className:h().bullet}),(0,t.jsx)(l.xv,{variant:"text-sm/normal",color:"text-muted",children:R(e)})]},s)}))})]})}function Z(e){var s=e.permissions,r=e.step,i=s.enabledPermissions,a=s.disabledPermissions;return 0===i.length&&r!==n.SUBMITTED?null:(0,t.jsxs)("div",{className:h().table,children:[r!==n.SUBMITTED?(0,t.jsx)(F,{permissions:i,step:r}):null,(0,t.jsx)(B,{permissions:a,step:r})]})}function k(e){var s=e.guild,r=e.permissions,n=e.step,i=e.canEveryoneModerate,a=e.isDefaultNotificationsAllMessages;return(0,t.jsx)(T.hz,{children:(0,t.jsxs)("div",{className:h().updatedForm,children:[a?(0,t.jsxs)("div",{className:h().checklistRow,children:[(0,t.jsx)(m.Z,{className:h().checklistIcon,color:(0,c.Lq)(x.Ilk.GREEN_360),backgroundColor:(0,c.Lq)(x.Ilk.WHITE_100)}),(0,t.jsx)(l.xv,{variant:"text-md/normal",
children:D.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_LABEL.format({infoHook:function(){return(0,t.jsx)(d.ZP,{text:D.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP,"aria-label":D.Z.Messages.ENABLE_COMMUNITY_MODAL_DEFAULT_NOTIFICATIONS_TOOLTIP,children:function(e){return(0,t.jsx)(_.Z,U({className:h().icon},e))}})}})})]}):null,i?(0,t.jsxs)("div",{className:h().checklistRow,children:[(0,t.jsx)(m.Z,{className:h().checklistIcon,color:(0,c.Lq)(x.Ilk.GREEN_360),backgroundColor:(0,c.Lq)(x.Ilk.WHITE_100)}),(0,t.jsx)(l.xv,{variant:"text-md/normal",children:D.Z.Messages.ENABLE_COMMUNITY_MODAL_EVERYONE_ROLE_PERMISSION_LABEL_UPDATED}),(0,t.jsx)(y,{guild:s})]}):null,(0,t.jsx)(Z,{permissions:r,step:n})]})})}function w(e){var s=e.onConfirm,r=e.onDismiss,i=e.canEveryoneModerate,a=e.step;return(0,t.jsxs)(T.mz,{className:h().footer,children:[(0,t.jsx)(l.zx,{onClick:s,submitting:a===n.SUBMITTING,
children:a===n.DEFAULT?i?D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_CONFIRMATION:D.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_CONFIRMATION:D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_CONFIRMATION_DONE}),a===n.DEFAULT?(0,t.jsx)(l.zx,{look:l.zx.Looks.LINK,onClick:r,color:l.zx.Colors.PRIMARY,children:(0,t.jsx)(l.xv,{variant:"text-sm/semibold",color:"header-primary",children:D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_DISMISS})}):null]})}function Y(e){var s=e.guild,r=e.canEveryoneModerate,l=e.isDefaultNotificationsAllMessages,c=e.transitionState,I=e.onClose,d=P(i.useState(n.DEFAULT),2),N=d[0],S=d[1],m=i.useMemo((function(){var e=[],r=[];p.$X.map((function(n){A.ZP.canEveryone(n,s)?e.push(n):r.push(n)}));return{enabledPermissions:e,disabledPermissions:r}}),[s]);if(null==s)return null;var _=r,O=function(){r&&function(){var e=null==s?void 0:s.getRole(s.id);if(null!=e){var r=a.Z.remove(e.permissions,p.mu);(0,E.Gf)(s.id,[j(U({},e),{permissions:r})])}}()
;l&&function(){u.Z.updateGuild({defaultMessageNotifications:x.bL.ONLY_MENTIONS});u.Z.saveGuild(s.id,{defaultMessageNotifications:x.bL.ONLY_MENTIONS})}()};return(0,t.jsxs)(T.Y0,{transitionState:c,size:T.Cg.SMALL,className:h().modal,children:[(0,t.jsx)(C,{guild:s,headerText:_?D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_HEADER:D.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_HEADER,headerSubtext:_?D.Z.Messages.DISABLE_UNSAFE_DEFAULT_PERMISSIONS_NOTICE_SUBHEADER:D.Z.Messages.UPDATE_COMMUNICATION_NOTIFICATIONS_SUBHEADER,step:N}),(0,t.jsx)(k,{guild:s,permissions:m,step:N,canEveryoneModerate:r,isDefaultNotificationsAllMessages:l}),(0,t.jsx)(w,{onConfirm:function(){if(!r){O();I();var e;(0,f.Q)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,null!==(e=null==s?void 0:s.id)&&void 0!==e?e:"",!0,v.L.PRIMARY)}if(N===n.DEFAULT){S(n.SUBMITTING);setTimeout((function(){return S(n.SUBMITTED)}),3e3)}else if(N===n.SUBMITTED){O();I();var t;(0,
f.Q)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,null!==(t=null==s?void 0:s.id)&&void 0!==t?t:"",!0,v.L.PRIMARY)}},onDismiss:function(){I();(0,f.Q)(o.CW.DISABLE_UNSAFE_COMMUNITY_PERMISSIONS_NOTICE,s.id,!0,v.L.DISMISS)},step:N,canEveryoneModerate:r})]})}}}]);
//# sourceMappingURL=1ec932fde4006d8b6e38.js.map