(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[54765],{457890:(e,n,t)=>{e.exports=t.p+"cf3e2e7f108d20c8d804a13c9067f5a6.svg"},247381:(e,n,t)=>{e.exports=t.p+"f5516e43505f5461a4cb3081bf663f1a.png"},372956:(e,n,t)=>{"use strict";t.d(n,{x:()=>o,C:()=>a});var r=t(744564),i=t(758635);function o(e){var n=e.omitUserIds,t=e.guild,o=e.channel,a=e.applicationId,l=e.inviteTargetType;return(0,i.W)().then((function(){r.Z.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=n?n:new Set,guild:t,channel:o,applicationId:a,inviteTargetType:l})}))}function a(e){r.Z.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})}},654765:(e,n,t)=>{"use strict";t.r(n);t.d(n,{InviteCopyInputConnected:()=>Rn,InviteRow:()=>On,default:()=>jn})
;var r=t(785893),i=t(667294),o=t(294184),a=t.n(o),l=t(441143),s=t.n(l),u=t(496486),c=t.n(u),d=t(999357),f=t(816810),h=t(202351),g=t(513328),v=t(336194),p=t(575945),I=t(945460),m=t(419156),E=t(372956),_=t(634698),N=t(761953),T=t(336334),S=t(296602),y=t(61209),x=t(506474);function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return C(e)}function M(e,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function A(e,n){A=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return A(e,n)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Z(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=C(e);if(n){var i=C(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return M(this,t)}}var b;!function(e){e[e.GROUP_DM=0]="GROUP_DM";e[e.USER=1]="USER";e[e.CHANNEL=2]="CHANNEL"}(b||(b={}));var R=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&A(e,n)}(t,e);var n=Z(t);function t(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);return n.call(this,new S.Z("InviteQueue"),1010)}var r=t.prototype;r._sendInvite=function(e,n,t,r,i){T.Z.sendInvite(e.id,n,t,r).then((function(){return i(null,!0)}),(function(){return i(null,!1)}))};r.drain=function(e,n){var t=this,r=e.location,i=e.suggested
;switch(e.type){case b.GROUP_DM:case b.CHANNEL:this._sendInvite(e.channel,e.inviteKey,r,i,n);break;case b.USER:N.Z.ensurePrivateChannel(e.user.id).then((function(o){var a=y.Z.getChannel(o);null!=a&&t._sendInvite(a,e.inviteKey,r,i,n)}),(function(){return n(null,!1)}))}};return t}(x.Z);const L=new R;var j=t(153686),w=t(19585),U=t(28661),D=t(621647),V=t(296916),P=t(773011),G=t(239813),B=t(318715),F=t(567403),k=t(786502),H=t(260561),K=(0,H.B)({kind:"guild",id:"2023-04_community_endless_invites",label:"Community Endless Invites",defaultConfig:{defaultInvitesToNeverExpire:!1},treatments:[{id:1,label:"Causes invites to never expire (by default) in the Guild",config:{defaultInvitesToNeverExpire:!0}}]}),Y=t(2590);function W(e){var n=e.guildId,t=K.useExperiment({guildId:null!=n?n:""}),r=(0,B.ZP)([F.Z],(function(){return F.Z.getGuild(n)}));return null!=n&&function(e){var n,t=e.guild,r=e.experimentConfig,i=(null!=r?r:K.getCurrentConfig({guildId:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:""
})).defaultInvitesToNeverExpire;return!0===(null==t?void 0:t.hasFeature(Y.oNc.HUB))||!0===(null==t?void 0:t.hasFeature(Y.oNc.COMMUNITY))&&i?k.ZP.INVITE_OPTIONS_FOREVER.value:void 0}({guild:r,experimentConfig:t})}var q=t(179678),z=t(149660),X=(0,H.B)({kind:"guild",id:"2023-02_guest_voice_invites",label:"Guest Voice Invites",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Allow creation of guest voice invites",config:{enabled:!0}}]}),$=t(703790),Q=t(641453),J=t(855350);const ee=(0,H.B)({kind:"guild",id:"2022-05_vanity_url_target",label:"Vanity URL Targeting",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var ne=t(625751),te=t(682776),re=t(473903),ie=(0,H.B)({kind:"guild",id:"2023-04_growing_friend_guild_community_upsell",label:"Growing Friend Guild Community Upsell",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable Community Upsell to Growing Friend Guilds",config:{enabled:!0}}]}),oe=function(e){
var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=ie.useExperiment({guildId:e},{autoTrackExposure:n}).enabled;return t};function ae(e,n){var t,r=(0,B.ZP)([re.default],(function(){var e;return null!==(t=null===(e=re.default.getCurrentUser())||void 0===e?void 0:e.id)&&void 0!==t?t:""})),i=oe(null!=e?e:""),o=(0,B.ZP)([F.Z],(function(){return F.Z.getGuild(e)}),[e]),a=null==o?void 0:o.hasFeature(Y.oNc.COMMUNITY),l=(0,B.ZP)([te.Z],(function(){return te.Z.can(Y.Plq.ADMINISTRATOR,o)}),[o]),s=(null==o?void 0:o.isOwner(r))||l;return!!i&&(!a&&(!!s&&!!n))}var le=t(658728),se=t(349491),ue=t(473708),ce=t(996035),de=t.n(ce);function fe(e){var n=e.text,t=e.isLocked,i=e.shouldSparkle;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:a()(de().container),children:[i?(0,r.jsx)(le.Z,{className:de().sparkles}):null,(0,r.jsx)(I.Text,{variant:"text-md/medium",color:"text-normal",children:n}),t?(0,r.jsxs)("div",{className:de().pill,children:[(0,r.jsx)(se.Z,{height:14,width:14,
className:de().icon}),(0,r.jsx)(I.Text,{variant:"text-xs/medium",color:"header-primary",className:de().pillText,children:ue.Z.Messages.COMMUNITIES})]}):null]})})}function he(e,n,t){return(0,r.jsx)(fe,{text:e.label,isLocked:n,shouldSparkle:t})}var ge=t(396043),ve=t(674748),pe=t(58387),Ie=t(666591),me=t.n(Ie),Ee=t(247381),_e=t.n(Ee);function Ne(e){var n=e.permanentInviteSelected,t=e.guildId,i=e.onClick,o=ae(null!=t?t:"",n);(0,ve.Z)({type:d.nv.MODAL,name:d.zs.GUILD_PERMANENT_LINKS_UPSELL});if(!o)return null;return(0,r.jsxs)("div",{className:me().container,children:[(0,r.jsx)("div",{className:me().imageContainer,children:(0,r.jsx)("img",{src:_e(),className:me().image,alt:ue.Z.Messages.GROWING_FRIEND_GUILD_PERMANENT_INVITE_LINKS_ALT_TEXT})}),(0,r.jsxs)("div",{className:me().textContainer,children:[(0,r.jsx)(I.Heading,{variant:"heading-lg/semibold",className:me().header,children:ue.Z.Messages.GROWING_FRIEND_GUILD_PERMANENT_INVITE_LINKS_UPSELL_HEADER}),(0,r.jsx)(I.Text,{
variant:"text-sm/medium",className:me().description,children:ue.Z.Messages.GROWING_FRIEND_GUILD_PERMANENT_INVITE_LINKS_UPSELL_DESCRIPTION}),(0,r.jsx)(I.Button,{size:I.ButtonSizes.SMALL,color:I.Button.Colors.BRAND,className:me().button,onClick:function(){ge.ZP.trackWithMetadata(Y.rMx.PERMANENT_INVITE_COMMUNITY_UPSELL_CLICKED,{});$.Z.init(null!=t?t:"");pe.Z.open();i()},children:ue.Z.Messages.GET_STARTED})]})]})}var Te=t(469100),Se=t.n(Te),ye=t(518280),xe=t.n(ye);function Ce(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Me(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done);a=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return
;if("string"==typeof e)return Ce(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ce(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=k.ZP.getMaxAgeOptions;function Oe(e){var n=e.temporary,t=e.shouldHide,i=e.onToggleTemporary;return t?(0,r.jsx)("div",{className:xe().marginTop20}):(0,r.jsx)(I.FormItem,{className:a()(xe().marginTop20,Se().switch),children:(0,r.jsx)(I.FormSwitch,{value:n,onChange:function(e){return i(e)},note:ue.Z.Messages.TEMPORARY_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:(0,r.jsx)(I.Text,{variant:"text-sm/normal",children:ue.Z.Messages.GRANT_TEMPORARY_MEMBERSHIP})})})}var Ze=k.ZP.getMaxUsesOptions;function be(e){
var n,t=e.guildId,o=e.isGuestInviteCreationEnabled,l=e.maxAge,s=e.maxUses,u=e.temporary,c=e.onGenerateNewLink,d=e.onToggleTemporary,f=e.onSelectMaxAge,h=e.onSelectMaxUses,g=ae(t,0===l),v=ae(t,!0),p=function(e){var n=(0,B.ZP)([F.Z],(function(){return F.Z.getGuild(e)}),[e]),t=oe(e),r=k.ZP.getMaxAgeOptions;return t&&!(null==n?void 0:n.hasFeature(Y.oNc.COMMUNITY))?r:r.filter((function(e){return(null==e?void 0:e.value)!==k.ZP.INVITE_OPTIONS_30_DAYS.value}))}(t),m=p.find((function(e){return e.value===l})),E=Ze.find((function(e){return e.value===s})),_=Me(i.useState(!1),2),N=_[0],T=_[1],S=function(e,n){var t=oe(null!=e?e:""),r=(0,B.ZP)([F.Z],(function(){return F.Z.getGuild(e)}),[e]),i=null==r?void 0:r.hasFeature(Y.oNc.COMMUNITY);return!!t&&!!i&&!!n}(t,N);return(0,r.jsx)("div",{className:Se().settingsContent,children:(0,r.jsxs)("form",{onSubmit:c,children:[(0,r.jsx)(I.FormItem,{title:ue.Z.Messages.EXPIRE_AFTER,className:xe().marginTop20,children:(0,r.jsx)(I.SingleSelect,{
value:null!==(n=null==m?void 0:m.value)&&void 0!==n?n:Ae[0].value,options:p,renderOptionLabel:function(e){var n=0===e.value;return he(e,n&&v,n&&S)},renderOptionValue:function(e){var n=Me(e,1)[0],t=0===n.value;return he(n,t&&v,t&&S)},onChange:f,optionClassName:Se().option,className:Se().option,maxVisibleItems:8})}),g?(0,r.jsx)(Ne,{guildId:t,permanentInviteSelected:0===l,onClick:function(){return T(!0)}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.FormItem,{title:ue.Z.Messages.MAX_NUMBER_OF_USES,className:a()(xe().marginTop20,xe().marginBottom4),children:(0,r.jsx)(I.SingleSelect,{value:null==E?void 0:E.value,options:Ze,onChange:h})}),(0,r.jsx)(Oe,{temporary:u,shouldHide:g||o,onToggleTemporary:d})]})]})})}function Re(e){var n=e.guildId,t=e.maxAge,o=e.onConfirm,a=e.onDismiss,l=e.theme,s=ae(n,0===t);return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(I.Button,{onClick:o,disabled:s,children:ue.Z.Messages.GENERATE_A_NEW_LINK}),(0,r.jsx)(I.Button,{look:I.Button.Looks.LINK,color:(0,
p.ap)(l)?I.Button.Colors.PRIMARY:I.Button.Colors.WHITE,onClick:a,children:ue.Z.Messages.CANCEL})]})}var Le=t(766496),je=t(64234),we=t(177570),Ue=t(381186),De=t(5544),Ve=t(869160),Pe=t(537335),Ge=t(491260),Be=t(840922),Fe=t(715107),ke=t(464187),He=t(793461),Ke=t(602397),Ye=t(327860),We=t(107364),qe=t(190186),ze=t(466317),Xe=t(265367),$e=t(652591),Qe=t(775173),Je=t(691797),en=t(661123),nn=t(421281),tn=t(749565),rn=t(897196),on=t(718634),an=t(487521),ln=t.n(an),sn=t(103468),un=t.n(sn),cn=t(913957),dn=t.n(cn),fn=t(381357),hn=t.n(fn),gn=t(457890),vn=t.n(gn);function pn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function In(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function mn(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function En(e){En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)
};return En(e)}function _n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&Tn(e,n)}function Nn(e,n){return!n||"object"!==yn(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Tn(e,n){Tn=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return Tn(e,n)}function Sn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done);a=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;i=e}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return pn(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var yn=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function xn(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=En(e);if(n){var i=En(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Nn(this,t)}}
var Cn=k.ZP.INVITE_OPTIONS_FOREVER,Mn=k.ZP.INVITE_OPTIONS_7_DAYS,An=k.ZP.INVITE_OPTIONS_UNLIMITED,On=function(e){_n(t,e);var n=xn(t);function t(){In(this,t);var e;(e=n.apply(this,arguments)).state={sending:!1,invited:!1,hovered:!1};e.handleMouseEnter=function(){e.setState({hovered:!0})};e.handleMouseLeave=function(){e.setState({hovered:!1})};e.getSuggestedProps=function(){var n,t=e.props.row;return null!==(n=null!=t?Pe.Z.getSelectedInviteMetadata(t):null)&&void 0!==n?n:null};e.handleClickInvite=function(){var n=e.props,t=n.user,r=n.channel,i=n.inviteKey,o=n.location;if(null!=i)if(null!=r){e.setState({sending:!0});L.enqueue({type:b.GROUP_DM,channel:r,inviteKey:i,location:o,suggested:e.getSuggestedProps()},(function(n){e.setState({sending:!1,invited:n})}))}else if(null!=t){e.setState({sending:!0});L.enqueue({type:b.USER,user:t,inviteKey:i,location:o,suggested:e.getSuggestedProps()},(function(n){e.setState({sending:!1,invited:n})}))}};return e}var i=t.prototype
;i.shouldComponentUpdate=function(e,n){return this.state.sending!==n.sending||this.state.invited!==n.invited||this.state.hovered!==n.hovered||this.props.user!==e.user||this.props.channel!==e.channel};i.renderUserOrChannel=function(){var e,n,t,i=this.props,o=i.user,a=i.channel;if(null!=o){n=o.getAvatarURL(null==a?void 0:a.guild_id,32);t=tn.ZP.getName(o)}else if(null!=a){n=(0,D.x)(a);t=(0,P.F6)(a,re.default,Be.Z);if(null==n&&null!=a.guild_id){var l=F.Z.getGuild(a.guild_id);null!=l&&(null!=l.icon?n=Qe.ZP.getGuildIconURL({id:a.guild_id,icon:l.icon,size:32}):e=(0,nn.Zg)(l.name))}}return null==n||null==t?null!=e?(0,r.jsx)("div",{className:ln().acronym,"aria-hidden":!0,children:e}):null:(0,r.jsx)(I.Avatar,{src:n,"aria-label":t,size:I.AvatarSizes.SIZE_32,className:ln().inviteRowAvatar})};i.render=function(){var e,n=this.props,t=n.user,i=n.channel,o=this.state,a=o.sending,l=o.invited,s=o.hovered;e=l?(0,r.jsx)(I.Button,{look:I.Button.Looks.LINK,size:I.Button.Sizes.SMALL,disabled:!0,color:(0,
p.wj)(je.Z.theme)?I.Button.Colors.WHITE:I.Button.Colors.BLACK,children:ue.Z.Messages.INVITE_FRIEND_MODAL_SENT}):(0,r.jsx)(I.Button,{color:I.Button.Colors.GREEN,look:s?I.Button.Looks.FILLED:I.Button.Looks.OUTLINED,className:ln().inviteRowButton,size:I.Button.Sizes.SMALL,submitting:a,onClick:this.handleClickInvite,children:ue.Z.Messages.INVITE_FRIEND_MODAL_INVITE});return(0,r.jsxs)("div",{className:ln().inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,r.jsxs)("div",{className:ln().inviteRowInfo,children:[this.renderUserOrChannel(),(0,r.jsxs)("div",{className:ln().inviteRowName,children:[tn.ZP.getName(t),null!=i?(0,P.F6)(i,re.default,Be.Z,!0):null]})]}),e]})};return t}(i.Component),Zn=function(e){_n(t,e);var n=xn(t);function t(){In(this,t);var e;(e=n.apply(this,arguments)).state={focused:!1,copied:!1};e._unsetCopiedState=new g.sW(1e3,(function(){return e.setState({copied:!1})}));e.handleCopy=function(){var n=e.props,t=n.value,r=n.onCopy
;e.setState({copied:!0});e._unsetCopiedState.delay();r(t)};return e}var i=t.prototype;i.componentWillUnmount=function(){this._unsetCopiedState.cancel()};i.render=function(){var e,n=this,t=this.props,i=t.value,o=t.autoFocus,l=t.hideValue,s=this.state,u=s.focused,c=s.copied;return(0,r.jsxs)("div",{className:a()(un().input,dn().flexJustifyBetween,dn().flexCenter,(e={},mn(e,un().success,c),mn(e,un().focused,u),e)),children:[(0,r.jsx)(I.TextInput,{className:ln().copyInput,name:"invite",value:l?ue.Z.Messages.INSTANT_INVITE_HIDDEN:i,editable:!1,inputClassName:ln().noBorder,autoFocus:o,onFocus:function(){return o?n.setState({focused:!0}):null},onBlur:function(){return o?n.setState({focused:!1}):null},spellCheck:"false",onClick:function(e){return e.currentTarget.select()},"aria-label":ue.Z.Messages.FORM_LABEL_INVITE_LINK}),Je.wS?(0,r.jsx)(I.Button,{size:I.Button.Sizes.SMALL,color:c?I.Button.Colors.GREEN:I.Button.Colors.BRAND,className:ln().copyButton,onClick:this.handleCopy,
children:c?ue.Z.Messages.INVITE_COPIED:ue.Z.Messages.COPY}):null]})};return t}(i.PureComponent);function bn(e){var n=e.guild,t=e.error,o=e.onClose,a=n.id,l=i.useCallback((function(){o();$.Z.open(a,Y.pNK.INSTANT_INVITES)}),[a,o]),s=i.useCallback((function(e){return(0,r.jsx)(I.Clickable,{className:ln().errorLink,onClick:l,children:(0,r.jsx)(I.Text,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})})}),[l]),u=i.useCallback((function(e){return(0,r.jsx)(I.Anchor,{href:Y.EYA.INVITES_HELP,target:"_blank",children:(0,r.jsx)(I.Text,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})})}),[]);return t.code===Y.evJ.TOO_MANY_INVITES?te.Z.can(Y.Plq.MANAGE_GUILD,n)?(0,r.jsx)(I.Text,{className:ln().errorMessage,variant:"text-xs/normal",color:"text-danger",children:ue.Z.Messages.TOO_MANY_INVITES_ERROR.format({inviteListHook:s,inviteHelpHook:u})}):(0,r.jsx)(I.Text,{className:ln().errorMessage,variant:"text-xs/normal",color:"text-danger",
children:ue.Z.Messages.TOO_MANY_INVITES_ERROR_MEMBER}):(0,r.jsx)(I.Text,{className:ln().errorMessage,variant:"text-xs/normal",color:"text-danger",children:t.getAnyErrorMessage()})}var Rn=h.ZP.connectStores([He.Z],(function(){return{hideValue:He.Z.hideInstantInvites}}))(Zn),Ln=function(e){_n(t,e);var n=xn(t);function t(){In(this,t);var e;(e=n.apply(this,arguments))._scroller=null;e._headerId=c().uniqueId();e.handleCopy=function(n){var t=e.props,r=t.inviteChannel,i=t.source,o=t.code,a=t.guildScheduledEvent;(0,Je.JG)(n);$e.default.track(Y.rMx.COPY_INSTANT_INVITE,{server:ke.Z.getGuildId(),channel:null==r?void 0:r.id,channel_type:null==r?void 0:r.type,location:i,code:o,guild_scheduled_event_id:null==a?void 0:a.id})};e.openSettings=function(){(0,e.props.setModalState)({settingsOpen:!0})};e.handleSelectMaxAge=function(n){var t=e.props,r=t.modalState;(0,t.setModalState)({maxAge:n,savedMaxAge:r.maxAge})};e.handleSelectMaxUses=function(n){(0,e.props.setModalState)({maxUses:n})}
;e.handleToggleTemporary=function(n){(0,e.props.setModalState)({temporary:n})};e.handleToggleGuest=function(n){var t=e.props,r=t.inviteFlags;(0,t.setInviteFlags)((0,en.mB)(r,f.$.IS_GUEST_INVITE,n))};e.handleQueryChange=function(n){var t,r=e.props.setModalState;null===(t=e._scroller)||void 0===t||t.scrollTo({to:0});(0,E.C)(n);r({query:n})};e.handleClearSearch=function(){e.handleQueryChange("")};e.handleToggleMaxAge=function(){var n=e.props,t=n.modalState,r=n.setModalState,i=t.maxAge;r({maxAge:t.savedMaxAge,savedMaxAge:i})};e.handleDone=function(){var n=e.props,t=n.onDone,r=n.onClose,i=n.modalState,o=n.setModalState;i.settingsOpen?o({settingsOpen:!1}):r();null==t||t()};e.getRowHeight=function(n,t){if(n>0)return 0;switch(e.props.rows[t].type){case k.bm.CHANNEL:case k.bm.GROUP_DM:case k.bm.DM:case k.bm.FRIEND:return 44;default:return 0}};e.renderRow=function(n){var t=n.section,i=n.row;if(t>0)return null
;var o=e.props.analyticsLocation,a=e.getInviteKey(),l=e.props.rows[i],s="".concat(l.type,"-").concat(l.item.id);switch(l.type){case k.bm.GROUP_DM:case k.bm.CHANNEL:return(0,r.jsx)(On,{row:l,channel:l.item,inviteKey:a,location:o},s);case k.bm.DM:case k.bm.FRIEND:return(0,r.jsx)(On,{row:l,user:l.item,inviteKey:a,location:o},s);default:return null}};return e}var o=t.prototype;o.componentDidMount=function(){var e=this.props,n=e.inviteChannel,t=e.code,r=e.guild,i=e.source,o=e.canCreateInvites,a=e.analyticsLocation,l=e.streamUserId,s=e.targetType,u=e.targetUserId,c=e.application,d=e.initialCounts,f=e.rows,h=e.showFriends,g=e.modalState,v=e.setModalState,p=g.maxAge,I=g.maxUses,E=g.temporary;if(o){var _=null==n?void 0:n.id;if(null==_)return;v({networkError:void 0});m.Z.createInvite(_,{validate:null!=t?t:null,max_age:p,max_uses:I,target_user_id:u,target_type:s,target_application_id:null==c?void 0:c.id,temporary:E},i).catch((function(e){return v({networkError:e})}))}
h&&$e.default.track(Y.rMx.INVITE_SUGGESTION_OPENED,{location:i,num_suggestions:f.length,num_friends:d.numFriends,num_dms:d.numDms,num_group_dms:d.numGroupDms,guild_id:r.id});ee.trackExposure({guildId:null==r?void 0:r.id});if(null!=l){var N=we.Z.getStreamForUser(l,r.id),T=(0,q.L2)(N,Ge.Z);$e.default.track(Y.rMx.OPEN_MODAL,{type:"Send Stream Invite",source:i,location:a,other_user_id:l,application_id:null!=T?T.id:null,application_name:null!=T?T.name:null,game_id:null!=T?T.id:null})}else null!=(null==c?void 0:c.id)||$e.default.track(Y.rMx.OPEN_MODAL,{type:"Instant Invite Modal",source:i,location:a})};o.componentWillUnmount=function(){var e=this.props,n=e.inviteChannel,t=e.inviteFlags,r=e.setInviteFlags;if((0,en.yE)(t,f.$.IS_GUEST_INVITE)&&null!=n){r((0,en.Ge)(t,f.$.IS_GUEST_INVITE));m.Z.clearInviteFromStore(n.id)}};o.getInviteKey=function(){var e=this.props,n=e.code,t=e.vanityURLCode,r=e.guildScheduledEvent,i=e.modalState.showVanityURL?t:null!=n?n:t;return null==i?i:(0,Q.tV)({baseCode:i,
guildScheduledEventId:null==r?void 0:r.id})};o.renderChannelWarning=function(){var e=this.props.inviteChannel;return(0,V.Z)(e)?(0,r.jsxs)("div",{className:ln().warningContainer,children:[(0,r.jsx)(Xe.Z,{className:ln().warningIcon,color:v.Z.unsafe_rawColors.YELLOW_300.css,width:12}),(0,r.jsx)(I.Text,{variant:"text-xs/normal",color:"header-secondary",children:ue.Z.Messages.INVITE_PRIVATE_CHANNEL_WARNING})]}):null};o.renderGuestMembershipToggle=function(){var e=this.props,n=e.isGuestInviteCreationEnabled,t=e.inviteFlags,i=e.showGuestInviteToggleForCurrentVoiceChannel;return n?(0,r.jsx)("div",{className:ln().temporaryMembershipContainerBackground,children:(0,r.jsx)(I.FormSwitch,{className:ln().temporaryMembershipContainer,value:(0,en.yE)(t,f.$.IS_GUEST_INVITE),onChange:this.handleToggleGuest,note:ue.Z.Messages.GUEST_MEMBERSHIP_EXPLANATION,hideBorder:!0,children:i?ue.Z.Messages.GRANT_GUEST_MEMBERSHIP_VOICE_ONLY:ue.Z.Messages.GRANT_GUEST_MEMBERSHIP})}):null};o.renderCopyInput=function(){
var e,n=this.props,t=n.guild,o=n.noInvitesAvailable,l=n.showFriends,s=n.onClose,u=n.modalState,c=u.maxAge,d=u.maxUses,f=u.networkError,h=u.showVanityURL,g=(0,ne.Z)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(Rn,{value:g,autoFocus:l,onCopy:this.handleCopy}),this.renderGuestMembershipToggle(),o||h?null:(0,r.jsxs)(I.Text,{variant:"text-xs/normal",className:a()(xe().marginTop8,ln().footerText),children:[(0,k.Vg)(c,d)," ",l?(0,r.jsx)(I.Anchor,{onClick:this.openSettings,children:ue.Z.Messages.INVITE_EDIT_LINK}):null]}),!o&&l&&h?(0,r.jsxs)(I.Text,{variant:"text-xs/normal",className:a()(xe().marginTop8,ln().footerText),children:[ue.Z.Messages.INVITE_VANITY_USED," ",(0,r.jsx)(I.Anchor,{onClick:this.openSettings,children:ue.Z.Messages.INVITE_EDIT_LINK})]}):null,null!=f?(0,r.jsx)(bn,{guild:t,error:f,onClose:s}):null]})};o.renderHeader=function(){
var e,n=this.props,t=n.guild,i=n.showFriends,o=n.guildScheduledEvent,l=n.streamUserId,s=n.application,u=n.welcomeToServer,c=n.inviteChannel,d=n.modalState,f=d.query,h=d.settingsOpen,g=null,v=null;e=u?null:null!=l?ue.Z.Messages.INVITE_STREAM_HEADER:null!=s?ue.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_FRIENDS_TO_ACTIVITY_NAME.format({applicationName:s.name}):null!=o?ue.Z.Messages.GUILD_EVENT_INVITE_MODAL_TITLE:(null==c?void 0:c.isGuildStageVoice())?ue.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_HEADER:ue.Z.Messages.INVITE_TO_SERVER_NAME.format({name:t.toString()});if(null!=c){var p=(0,G.KS)(c,t);null!=p&&(v=(0,r.jsxs)("div",{className:ln().headerChannelContainer,children:[(0,r.jsx)(p,{className:ln().channelIcon}),(0,r.jsx)(I.Text,{color:"interactive-normal",variant:"text-md/normal",children:c.name})]}))}g=h?(0,r.jsx)(I.FormTitle,{id:this._headerId,tag:"h2",className:a()(xe().marginReset,ln().headerCloseButtonSpacing,ln().headerText),children:ue.Z.Messages.INVITE_SETTINGS_TITLE
}):t.hasFeature(Y.oNc.HUB)?(0,r.jsxs)("div",{className:ln().hubHeader,children:[(0,r.jsx)(I.Heading,{className:a()(ln().hubInviteTitle,ln().headerCloseButtonSpacing),id:this._headerId,variant:"heading-xl/semibold",color:"header-primary",children:ue.Z.Messages.HUB_INVITE_HEADER}),(0,r.jsx)(I.Text,{color:"header-secondary",variant:"text-md/normal",children:ue.Z.Messages.HUB_INVITE_SUBHEADER}),i&&(0,r.jsx)(qe.Z,{query:f,className:ln().hubFriendSearch,onChange:this.handleQueryChange,placeholder:ue.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,"aria-label":ue.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,onClear:this.handleClearSearch})]}):i?(0,r.jsxs)("div",{className:ln().header,children:[(0,r.jsx)(I.FormTitle,{id:this._headerId,tag:"h2",className:a()(xe().marginBottom4,ln().headerCloseButtonSpacing,ln().headerText),children:e}),v,(0,r.jsx)(qe.Z,{query:f,className:ln().searchBar,onChange:this.handleQueryChange,placeholder:ue.Z.Messages.INVITE_SEARCH_FOR_FRIENDS,autoFocus:!0,
onClear:this.handleClearSearch}),(0,r.jsx)("div",{className:xe().marginTop8,children:this.renderChannelWarning()})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.FormTitle,{id:this._headerId,tag:"h2",className:a()(xe().marginReset,ln().headerCloseButtonSpacing,ln().headerText),children:e}),v,this.renderChannelWarning()]});return(0,r.jsxs)(I.ModalHeader,{separator:i&&!h,children:[(0,r.jsx)(I.ModalCloseButton,{className:ln().closeButton,onClick:this.handleDone}),(0,r.jsxs)("div",{className:ln().headerContainer,children:[u&&!h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:ln().welcomeImage,src:vn(),alt:""}),(0,r.jsx)(I.H,{className:ln().welcomeHeading,children:ue.Z.Messages.INVITE_WELCOME_HEADING}),(0,r.jsx)("p",{className:ln().welcomeSubheading,children:ue.Z.Messages.INVITE_WELCOME_SUBHEADING})]}),null!=l?(0,r.jsx)(z.Z,{}):null,g]})]})};o.renderFriendsBody=function(){var e=this.props.rows,n=this.getInviteKey();return 0===e.length?(0,r.jsx)(I.ModalContent,{
className:a()(ln().inviteRowEmptyState),children:(0,r.jsx)(Ye.OZ,{children:ue.Z.Messages.INVITE_FRIEND_MODAL_NO_RESULTS})}):null==n?(0,r.jsx)(I.ModalContent,{className:a()(ln().inviteRowEmptyState),children:(0,r.jsx)(Ye.OZ,{children:ue.Z.Messages.INVITE_FRIEND_MODAL_LOADING})}):(0,r.jsx)(I.ModalListContent,{className:ln().scroller,sections:[e.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})};o.renderSection=function(){return null};o.renderBody=function(){var e=this.props,n=e.guild,t=e.showFriends,i=e.streamUserId,o=e.application,a=e.isGuestInviteCreationEnabled,l=e.modalState,u=e.handleGenerateNewLink,c=l.settingsOpen,d=l.maxAge,f=l.maxUses,h=l.temporary;if(c)return(0,r.jsx)(be,{guildId:n.id,isGuestInviteCreationEnabled:a,maxAge:d,maxUses:f,temporary:h,onToggleTemporary:this.handleToggleTemporary,onSelectMaxAge:this.handleSelectMaxAge,onSelectMaxUses:this.handleSelectMaxUses,onGenerateNewLink:u})
;if(t)return this.renderFriendsBody();var g=re.default.getCurrentUser();s()(null!=g,"InstantInviteModal: user cannot be undefined");var v=n.isOwner(g)?ue.Z.Messages.INVITE_SHARE_LINK_OWN_SERVER:ue.Z.Messages.SHARE_INVITE_LINK_FOR_ACCESS;null!=i?v=ue.Z.Messages.INVITE_SHARE_LINK_TO_STREAM:null!=o&&(v=ue.Z.Messages.EMBEDDED_ACTIVITIES_SHARE_LINK_TO_ACTIVITY);return(0,r.jsx)(I.ModalContent,{className:ln().noScroll,children:(0,r.jsxs)(We.Z,{direction:We.Z.Direction.VERTICAL,className:xe().marginBottom20,children:[(0,r.jsx)(I.Text,{className:ln().subText,variant:"text-sm/normal",children:v}),this.renderCopyInput()]})})};o.renderFooter=function(){var e,n=this,t=this.props,i=t.noInvitesAvailable,o=t.showFriends,l=t.guildScheduledEvent,s=t.streamUserId,u=t.application,c=t.inviteChannel,d=t.guild,f=t.modalState,h=t.handleGenerateNewLink,g=f.settingsOpen,p=f.maxAge,m=je.Z.theme,E=null;if(g)E=(0,r.jsx)(Re,{guildId:null==d?void 0:d.id,maxAge:p,theme:m,onConfirm:h,onDismiss:this.handleDone
});else if(o){var _=ue.Z.Messages.INVITE_FOOTER_LINK_HEADER;null!=s?_=ue.Z.Messages.INVITE_STREAM_FOOTER_LINK_HEADER:null!=u?_=ue.Z.Messages.EMBEDDED_ACTIVITIES_INVITE_ACTIVITY_FOOTER_LINK_HEADER:null!=l?_=ue.Z.Messages.GUILD_EVENT_INVITE_MODAL_FOOTER:(null==c?void 0:c.isGuildStageVoice())&&(_=ue.Z.Messages.STAGE_CHANNEL_INVITE_TO_STAGE_MODAL_FOOTER);E=(0,r.jsxs)(We.Z,{direction:We.Z.Direction.VERTICAL,className:ln().content,children:[(0,r.jsx)(I.FormTitle,{tag:"h5",className:xe().marginBottom8,children:_}),this.renderCopyInput()]})}else i||(E=(0,r.jsxs)(We.Z,{justify:We.Z.Justify.BETWEEN,className:xe().marginTop20,children:[(0,r.jsx)(I.Checkbox,{size:18,type:I.Checkbox.Types.INVERTED,value:p===Cn.value,onChange:this.handleToggleMaxAge,children:(0,r.jsx)(I.Text,{className:ln().checkBoxLabel,variant:"text-sm/normal",children:ue.Z.Messages.SET_INVITE_LINK_NEVER_EXPIRE})}),(0,r.jsx)(I.Tooltip,{text:ue.Z.Messages.LINK_SETTINGS,children:function(e){var t=e.onMouseEnter,i=e.onMouseLeave
;return(0,r.jsx)(I.Clickable,{onClick:n.openSettings,onMouseEnter:t,onMouseLeave:i,className:hn().cursorPointer,children:(0,r.jsx)(ze.Z,{width:18,height:18,color:v.Z.unsafe_rawColors.PRIMARY_400.css})})}})]}));return null!=E?(0,r.jsx)(I.ModalFooter,{className:g?ln().settingsFooter:a()((e={},mn(e,ln().noPadding,!o),mn(e,ln().footer,o),e)),children:E}):null};o.render=function(){var e=this.props,n=e.transitionState,t=e.inviteChannel,i=e.guild;return(0,r.jsx)("div",{className:this.props.showFriends?ln().wrapper:void 0,children:(0,r.jsxs)(I.ModalRoot,{impressionName:d.zs.GUILD_INVITE,impressionProperties:{invite_channel_id:null==t?void 0:t.id,invite_guild_id:i.id},"aria-labelledby":this._headerId,transitionState:n,className:ln().modal,children:[this.renderHeader(),this.renderBody(),this.renderFooter()]})})};return t}(i.PureComponent);Ln.defaultProps={analyticsLocation:Y.Sbl.GUILD_CREATE_INVITE_SUGGESTION,defaultMaxAge:Mn.value};const jn=i.forwardRef((function(e,n){
var t=e.channel,o=e.guild,a=e.source,l=e.guildScheduledEvent,s=e.streamUserId,u=e.applicationId,c=e.transitionState,d=e.onClose,g=e.welcomeToServer,v=e.forceSettings,p=e.analyticsLocation,I=Sn(i.useState(0),2),N=I[0],T=I[1],S=(0,w.Z)(j.Z.INSTANT_INVITE_MODAL),x=S.AnalyticsLocationProvider,C=S.analyticsLocations,M=(0,h.e7)([y.Z,Fe.Z],(function(){var e=Fe.Z.getVoiceChannelId();if(null==e)return null;var n=y.Z.getChannel(e);return(null==n?void 0:n.guild_id)===o.id?n:null})),A=null!=M&&!(0,V.Z)(M)&&[Y.t4x.GUILD_CONTEXT_MENU,Y.t4x.GUILD_HEADER].includes(a),O=(0,h.e7)([Fe.Z,y.Z,De.ZP],(function(){if(A&&(0,en.yE)(N,f.$.IS_GUEST_INVITE))return M;if(null!=t)return t;var e=Fe.Z.getChannelId(),n=null==e||(0,rn.AB)(e)?void 0:y.Z.getChannel(e);(null==n?void 0:n.isThread())&&(n=y.Z.getChannel(n.parent_id));return null!=n?n:De.ZP.getDefaultChannel(o.id)}),[t,A,N,o.id,M]),Z=null;null!=s?Z=on.Iq.STREAM:null!=u&&(Z=on.Iq.EMBEDDED_APPLICATION);var b=s,R=u,L=null!=t?t.getGuildId():null!=o?o.id:null,D=(0,
h.e7)([Ve.Z],(function(){var e=null!=O?O.id:null;return null==e?null:Ve.Z.getInvite(e,{targetType:Z,targetUserId:b,targetApplicationId:R})}),[O,Z,b,R]),P=Sn((0,h.Wu)([Pe.Z,Ke.ZP,Ue.ZP],(function(){var e=null!=O?O.id:null;return[Pe.Z.getInviteSuggestionRows(),Pe.Z.getTotalSuggestionsCount()>=1,Pe.Z.getInitialCounts(),null!=t&&null!=O?Ke.ZP.getVoiceStatesForChannel(O):null,null!=L?Ue.ZP.getProps(L,e):null]}),[O,Z,b,L]),5),G=P[0],B=P[1],F=P[2],k=P[3],H=P[4],K=(0,h.e7)([te.Z],(function(){return null!=O&&te.Z.can(Y.Plq.CREATE_INSTANT_INVITE,O)}),[O]),q=null===D||!K,z=Sn(i.useState((function(){var e=new Set;null!=s&&null!=k?k.forEach((function(n){var t=n.user;e.add(t.id)})):null!=L&&null!=H&&Z!==on.Iq.EMBEDDED_APPLICATION&&H.rows.forEach((function(n){n.type===Ue.so.MEMBER&&e.add(n.userId)}));return e})),1),$=z[0],Q=null==t?void 0:t.id,ee=(0,h.e7)([Le.Z],(function(){return Le.Z.getStageInstanceByChannel(Q)}),[Q]);i.useEffect((function(){(0,E.x)({omitUserIds:$,guild:o,channel:t,
applicationId:R,inviteTargetType:Z}).catch(Y.VqG)}),[$,t,o,R,Z]);var ne,re,ie,oe,ae=Sn((0,U.Z)(null!=R?[R]:[]),1)[0],le=W({guildId:L}),se=null!=D?D.code:void 0,ue=null==D?void 0:D.maxAge,ce=null==D?void 0:D.maxUses,de=null==D?void 0:D.temporary,fe=o.vanityURLCode,he=null!=fe&&fe.length>0,ge=J.Z.useExperiment({guildId:null!==(ie=null!==(re=null!==(ne=o.id)&&void 0!==ne?ne:null==D?void 0:D.guild.id)&&void 0!==re?re:L)&&void 0!==ie?ie:""},{autoTrackExposure:he}).enabled&&!(null==O?void 0:O.isGuildVocal())&&he,ve=(null==O?void 0:O.type)===Y.d4z.GUILD_VOICE,pe=(0,V.Z)(O);K||null==(null==ee?void 0:ee.invite_code)||(se=ee.invite_code);var Ie=Sn(i.useState({query:"",settingsOpen:!0===v,maxAge:null!==(oe=null!=ue?ue:le)&&void 0!==oe?oe:Mn.value,savedMaxAge:ue===Cn.value?null!=le?le:Mn.value:Cn.value,maxUses:null!=ce&&0!==ce?ce:An.value,temporary:null!=de&&de,networkError:void 0,showVanityURL:ge}),2),me=Ie[0],Ee=Ie[1],_e=i.useCallback((function(e){Ee((function(n){return function(e){
for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){mn(e,n,t[n])}))}return e}({},n,e)}))}),[]),Ne=(ve||A)&&!ge&&!q&&!pe,Te=X.useExperiment({guildId:null==o?void 0:o.id},{autoTrackExposure:Ne}).enabled,Se=me.maxAge,ye=me.maxUses,xe=me.temporary,Ce=me.savedMaxAge,Me=i.useCallback((function(){var e=null==O?void 0:O.id;if(0===ye&&0===Se&&!xe&&ge)_e({networkError:void 0,showVanityURL:!0});else if(null!=e){_e({networkError:void 0,showVanityURL:!1});m.Z.createInvite(e,{max_age:Se,max_uses:ye,target_type:Z,target_user_id:b,target_application_id:null==ae?void 0:ae.id,temporary:xe,flags:N},a).catch((function(e){return _e({networkError:e,showVanityURL:ge})}))}Se===Cn.value||Ce===Cn.value?_e({settingsOpen:!1}):_e({settingsOpen:!1,savedMaxAge:Cn.value})
}),[ge,O,a,null==ae?void 0:ae.id,Z,b,Se,ye,xe,N,_e,Ce]),Ae=(0,_.Z)(O),Oe=(0,_.Z)(N),Ze=Ae!==O,be=Oe!==N;i.useEffect((function(){(Ze||be)&&Me()}),[Me,Ze,be]);return(0,r.jsx)(x,{children:(0,r.jsx)(Ln,{ref:n,canCreateInvites:K,noInvitesAvailable:q,inviteChannel:O,guild:o,guildScheduledEvent:l,streamUserId:s,vanityURLCode:fe,targetType:Z,targetUserId:b,application:ae,rows:G,showFriends:B,initialCounts:F,code:se,source:a,welcomeToServer:g,analyticsLocations:C,analyticsLocation:p,transitionState:c,onClose:d,canShowVanityURL:ge,isGuestInviteCreationEnabled:Te&&Ne,modalState:me,setModalState:_e,handleGenerateNewLink:Me,inviteFlags:N,setInviteFlags:T,showGuestInviteToggleForCurrentVoiceChannel:A})})}))},149660:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l});var r=t(667294),i=t(792800),o=t(120415),a=t(473708);function l(){r.useEffect((function(){o.FB||(0,i.EM)({messages:[a.Z.Messages.GO_LIVE_HEY,a.Z.Messages.GO_LIVE_LOOK,a.Z.Messages.GO_LIVE_LISTEN],interval:600,count:20,onlyWhenBlurred:!0})}),[])
;return null}},855350:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});const r=(0,t(260561).B)({kind:"guild",id:"2022-11_default_to_server_vanity_v2",label:"Default To Server Vanity v2",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]})},537335:(e,n,t)=>{"use strict";t.d(n,{Z:()=>j});var r=t(202351),i=t(744564),o=t(980604),a=t(72580),l=t(786502),s=t(61209),u=t(840922),c=t(239734),d=t(2590),f=t(718634);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function p(e,n){return!n||"object"!==E(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function I(e,n){
I=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return I(e,n)}function m(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0
;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var i=v(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return p(this,t)}}var N,T,S,y,x,C,M,A=new Set,O=[],Z=new Map;function b(e){var n=new Set,t=null==y||M===f.Iq.EMBEDDED_APPLICATION?void 0:y.id,r=(0,l.rh)(A,t);null==r||u.Z.isBlocked(r.id)||n.add(r.id);var i=!0,h=!1,g=void 0;try{for(var v,p=c.Z.getUserAffinitiesUserIds()[Symbol.iterator]();!(i=(v=p.next()).done);i=!0){var I=v.value;n.add(I)}}catch(e){h=!0;g=e}finally{try{i||null==p.return||p.return()}finally{if(h)throw g}}var m=new Set;if(M===f.Iq.EMBEDDED_APPLICATION){o.Z.getChannelHistory().map((function(e){return s.Z.getChannel(e)})).filter(a.lm).filter((function(e){return e.type===d.d4z.GUILD_TEXT})).slice(0,3).forEach((function(e){return m.add(e.id)}))}return(0,l.an)({query:e,omitUserIds:A,suggestedUserIds:n,maxRowsWithoutQuery:100,
omitGuildId:t,suggestedChannelIds:m,inviteTargetType:M})}function R(e){O=e;Z=new Map;e.forEach((function(e,n){Z.set(e,{index:n})}))}var L=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}});n&&I(e,n)}(t,e);var n=_(t);function t(){g(this,t);return n.apply(this,arguments)}var r=t.prototype;r.initialize=function(){this.waitFor(u.Z,c.Z)};r.getInviteSuggestionRows=function(){return O};r.getTotalSuggestionsCount=function(){return T};r.getInitialCounts=function(){return N};r.getSelectedInviteMetadata=function(e){var n=Z.get(e),t=c.Z.getUserAffinitiesUserIds();return null!=n?{rowNum:n.index,isAffinitySuggestion:e.isSuggested,numTotal:O.length,numAffinityConnections:t.size,isFiltered:S}:null};r.__getLocalVars=function(){return{MAX_INVITE_SUGGESTION_COUNT:100,userIdsToOmit:A,inviteSuggestions:O,inviteSuggestionsMap:Z,
initialCounts:N,totalCount:T,isFiltered:S,currentGuild:y,currentChannel:x,currentApplicationId:C,currentInviteTargetType:M}};return t}(r.ZP.Store);L.displayName="InviteSuggestionsStore";const j=new L(i.Z,{LOAD_INVITE_SUGGESTIONS:function(e){var n=e.omitUserIds,t=e.guild,r=e.channel,i=e.applicationId,o=e.inviteTargetType;y=null!=r?t:null;x=r;C=i;M=o;var a=u.Z.getRelationships(),s=Object.keys(a).filter((function(e){return a[e]===d.OGo.BLOCKED})),c=(0,l.Sz)({channel:x,applicationId:C,inviteTargetType:o});A=new Set(m(n).concat(m(s),m(c)));S=!1;var f=b(""),h=f.rows,g=f.counts;R(h);N=g;T=O.length},INVITE_SUGGESTIONS_SEARCH:function(e){var n=e.query;S=""!==n;R(b(n).rows)}})}}]);
//# sourceMappingURL=8c815f0b2d66d219780a.js.map