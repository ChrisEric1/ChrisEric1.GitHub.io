"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[21723],{621723:(e,t,n)=>{n.r(t);n.d(t,{default:()=>L});var o=n(785893),r=n(667294),i=n(496486),s=n.n(i),a=n(202351),u=n(945460),l=n(656645),c=n(164045),d=n(186451),h=n(604945),f=n(107364),m=n(443812),p=n(615457),g=n(2590),T=n(36256),_=n(473708),v=n(709577),x=n.n(v),M=n(518280),O=n.n(M);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e){I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return I(e)}function Z(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e,t){j=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return j(e,t)}var V=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function C(e){
var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,o=I(e);if(t){var r=I(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Z(this,n)}}var b=(0,m.hQ)(),S=(0,m.hQ)(),y=(0,m.hQ)(),A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&j(e,t)}(n,e);var t=C(n);function n(){E(this,n);var e;(e=t.apply(this,arguments)).handleAutoThresholdChange=function(t){var n=e.props,o=n.onThresholdChange,r=n.threshold;null==o||o(r,t)};e.handleSensitivityChange=function(t){var n=e.props,o=n.onThresholdChange,r=n.autoThreshold;null==o||o(-1*(100-t),r)};return e}
var r=n.prototype;r.handleValueRender=function(e){return"".concat((-1*(100-e)).toFixed(0),"dB")};r.renderAutomaticVADToggle=function(){var e=this,t=this.props.autoThreshold;return(0,o.jsx)(m.FG,{children:function(n){return(0,o.jsxs)(f.Z,{className:O().marginBottom4,children:[(0,o.jsx)(u.FormTitle,{tag:u.FormTitleTags.H3,children:(0,o.jsx)("label",{htmlFor:n,children:_.Z.Messages.FORM_LABEL_AUTOMATIC_VAD})}),(0,o.jsx)(u.Switch,{id:n,checked:t,onChange:e.handleAutoThresholdChange})]})}})};r.renderSlider=function(){var e=this.props,t=e.autoThreshold,n=e.threshold;if(!t)return(0,o.jsx)(u.Slider,{initialValue:n+100,onValueRender:this.handleValueRender,onValueChange:this.handleSensitivityChange,"aria-label":_.Z.Messages.FORM_LABEL_INPUT_SENSITIVTY})};r.render=function(){return(0,o.jsxs)(u.FormItem,{title:_.Z.Messages.FORM_LABEL_INPUT_SENSITIVTY,className:O().marginBottom8,children:[this.renderAutomaticVADToggle(),this.renderSlider()]})};return n
}(r.PureComponent),F=a.ZP.connectStores([h.Z],(function(e){var t=e.mediaEngineContext;return{inputVolume:h.Z.getInputVolume(),outputVolume:h.Z.getOutputVolume(),inputDeviceId:h.Z.getInputDeviceId(),inputDevices:h.Z.getInputDevices(),outputDevices:h.Z.getOutputDevices(),outputDeviceId:h.Z.getOutputDeviceId(),inputMode:h.Z.getMode(t),shortcut:h.Z.getModeOptions(t).shortcut,vadThreshold:h.Z.getModeOptions(t).threshold,vadAutoThreshold:h.Z.getModeOptions(t).autoThreshold,delay:h.Z.getModeOptions(t).delay}}))((function(e){var t,n=e.mediaEngineContext,i=e.inputMode,a=e.shortcut,d=e.delay,h=e.vadThreshold,f=e.vadAutoThreshold,m=e.inputDevices,T=e.inputDeviceId,v=e.inputVolume,x=e.outputDeviceId,M=e.outputDevices,E=e.outputVolume,I=e.speaking,Z=void 0!==I&&I,j=s().first(m),V=null!=j&&j.disabled,C=s().first(M),F=null!=C&&C.disabled,L=[{value:g.pM4.VOICE_ACTIVITY,name:_.Z.Messages.INPUT_MODE_VAD},{value:g.pM4.PUSH_TO_TALK,name:_.Z.Messages.INPUT_MODE_PTT}];t=i===g.pM4.PUSH_TO_TALK?(0,
o.jsxs)(r.Fragment,{children:[(0,o.jsx)(u.FormItem,{title:_.Z.Messages.FORM_LABEL_SHORTCUT,className:O().marginBottom20,children:(0,o.jsx)(c.Z,{defaultValue:a,onChange:function(e){return l.Z.setMode(i,{shortcut:e},n)}})}),(0,o.jsxs)(u.FormItem,{className:O().marginBottom8,children:[(0,o.jsx)(u.FormTitle,{id:b,children:_.Z.Messages.INPUT_MODE_PTT_RELEASE_DELAY}),(0,o.jsx)(u.Slider,{initialValue:d,onValueChange:function(e){return l.Z.setMode(i,{delay:e},n)},onValueRender:function(e){return e>=1e3?"".concat((e/=1e3).toFixed(2),"s"):"".concat(e.toFixed(0),"ms")},maxValue:g.qhL,"aria-labelledby":b})]})]}):(0,o.jsx)(A,{speaking:Z,inputMode:i,threshold:h,autoThreshold:f,onThresholdChange:function(e,t){return l.Z.setMode(i,{threshold:e,autoThreshold:t},n)}});return(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(u.FormItem,{title:_.Z.Messages.FORM_LABEL_INPUT_DEVICE,className:O().marginBottom20,children:(0,o.jsx)(u.SingleSelect,{value:T,onChange:function(e){
return l.Z.setInputDevice(e,"Voice Settings")},options:s().map(m,(function(e){return{value:e.id,label:e.name}})),isDisabled:V})}),(0,o.jsxs)(u.FormItem,{className:O().marginBottom20,children:[(0,o.jsx)(u.FormTitle,{id:S,children:_.Z.Messages.FORM_LABEL_INPUT_VOLUME}),(0,o.jsx)(u.Slider,{initialValue:(0,p.P)(v),asValueChanges:function(e){return l.Z.setInputVolume((0,p.A)(e))},"aria-labelledby":S})]}),(0,o.jsx)(u.FormItem,{title:_.Z.Messages.FORM_LABEL_OUTPUT_DEVICE,className:O().marginBottom20,children:(0,o.jsx)(u.SingleSelect,{value:x,onChange:function(e){return l.Z.setOutputDevice(e,"Voice Settings")},options:s().map(M,(function(e){return{value:e.id,label:e.name}})),isDisabled:F})}),(0,o.jsxs)(u.FormItem,{className:O().marginBottom20,children:[(0,o.jsx)(u.FormTitle,{id:y,children:_.Z.Messages.FORM_LABEL_OUTPUT_VOLUME}),(0,o.jsx)(u.Slider,{initialValue:(0,p.P)(E),maxValue:200,asValueChanges:function(e){return l.Z.setOutputVolume((0,p.A)(e))},"aria-labelledby":y})]}),(0,
o.jsx)(u.FormItem,{title:_.Z.Messages.FORM_LABEL_INPUT_MODE,className:O().marginBottom20,children:(0,o.jsx)(u.RadioGroup,{onChange:function(e){var t=e.value;return l.Z.setMode(t,{},n)},options:L,value:i})}),t]})}));function L(e){(0,d.Z)((function(){null!=g.e3s&&e.onClose()}));var t;return(0,o.jsxs)(u.ModalRoot,{transitionState:e.transitionState,"aria-label":_.Z.Messages.VOICE_SETTINGS,children:[(0,o.jsxs)(u.ModalHeader,{children:[(0,o.jsxs)(f.Z.Child,{children:[(0,o.jsx)(u.FormTitle,{tag:"h1",className:O().marginReset,children:_.Z.Messages.VOICE_SETTINGS}),(0,o.jsx)(u.Text,{variant:"text-xs/normal",className:x().title,children:e.title})]}),(0,o.jsx)(f.Z.Child,{grow:0,children:(0,o.jsx)(u.ModalCloseButton,{onClick:e.onClose})})]}),(0,o.jsx)(u.ModalContent,{children:(0,o.jsx)(F,{mediaEngineContext:null!==(t=e.mediaEngineContext)&&void 0!==t?t:T.Yn.DEFAULT})})]})}},186451:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(667294),r=n(744564);function i(e){var t=(0,o.useRef)(e);(0,
o.useEffect)((function(){t.current=e}),[e]);(0,o.useEffect)((function(){if(__OVERLAY__){var e=function(e){e.locked&&t.current()};r.Z.subscribe("OVERLAY_SET_INPUT_LOCKED",e);return function(){r.Z.unsubscribe("OVERLAY_SET_INPUT_LOCKED",e)}}}),[])}}}]);
//# sourceMappingURL=a07498ced1c80d8d30e2.js.map