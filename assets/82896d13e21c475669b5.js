"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[46738],{504698:(e,t,n)=>{n.d(t,{pl:()=>B,QF:()=>N,ZR:()=>H,NO:()=>k,pb:()=>L,v:()=>C,AT:()=>j,Ps:()=>R,Jm:()=>Q,wA:()=>X,Pe:()=>V,L0:()=>z});var r,i=n(496486),o=n.n(i),u=n(349289),a=n(708313);!function(e){e[e.HIDDEN=1]="HIDDEN";e[e.DEMOTED=2]="DEMOTED"}(r||(r={}));new Set([1,2]);var s=n(281110),l=n(744564),c=n(539381),d=n(614244),f=n(840922),p=n(129586),h=n(858519),E=n(652591),I=n(72580),_=n(151154),m=n(123398),y=n(170892),b=n(194685),v=n(764334),S=n(222752),g=n(2590);function D(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){D(o,r,i,u,a,"next",e)}function a(e){D(o,r,i,u,a,"throw",e)}u(void 0)}))}}function F(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}
function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){F(e,t,n[t])}))}return e}function O(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var M=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){
return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function A(e,t){return t.map((function(t){return m.ZP.getItem(e,t)})).filter((function(e){var t=null==e?null:(0,y.ZP)(e)
;return null!=t&&!f.Z.isBlocked(t.author.id)})).filter(I.lm).map((function(e){return(0,v.ZP)(e)}))}function P(e){var t=e.guildId,n=e.loadTime,r=e.startHomeSessionId,i=e.page,o=e.newUnreadFeedItemIds,u=e.newReadFeedItemIds,a=e.newFeaturedItemIds;E.default.track(g.rMx.FEED_LOADED,{guild_id:t,load_id:m.ZP.getLoadId(t),unread_feed_item_ids:A(t,o),read_feed_item_ids:A(t,u),load_time_millis:n,home_session_id:d.Z.getHomeSessionId(t),start_home_session_id:r,featured_item_ids:A(t,a),page:i})}function R(e){E.default.track(g.rMx.FEED_SHOWN,{guild_id:e,load_id:m.ZP.getLoadId(e),home_session_id:d.Z.getHomeSessionId(e)})}function U(e,t){var n=t.results.items.filter((function(e){return e.type===u.w.FORUM_POST}));n.length>0&&l.Z.dispatch({type:"LOAD_THREADS_SUCCESS",threads:n.map((function(e){return e.thread})),firstMessages:n.map((function(e){return e.message})),guildId:e})}function N(e){return Z.apply(this,arguments)}function Z(){Z=T((function(e){var t,n,r,i,u,a,f,p,h,E,I,_,y,b,v,D,T,F,O,A,R
;return M(this,(function(M){switch(M.label){case 0:t=e.guildId,n=e.refresh,r=e.flushSeenItems,i=e.highlightedItemData,u=e.limit;a=Date.now();f=n?0:m.ZP.getPaginationStatus(t).offset;p=null==f||0===f;l.Z.dispatch({type:p?"GUILD_FEED_FETCH_FRESH_START":"GUILD_FEED_FETCH_PAGE_START",guildId:t});h=d.Z.getHomeSessionId(t);M.label=1;case 1:M.trys.push([1,5,,6]);return[4,null==r?void 0:r()];case 2:M.sent();E=w({limit:null!=u?u:m.qL,offset:p?0:f,load_id:p?null:m.ZP.getLoadId(t)},null!=i&&p&&{highlight_channel_id:i.channelId,highlight_message_id:i.messageId});return[4,s.Z.get({url:g.ANM.GUILD_FEED(t),query:E})];case 3:I=M.sent();_=I.body;y=m.ZP.getFeedItemSection(t,S.Ji.READ).map((function(e){return e.id}));b=m.ZP.getFeedItemSection(t,S.Ji.UNREAD).map((function(e){return e.id}));v=m.ZP.getFeedItemsForGuild(t).filter((function(e){return e.featured})).map((function(e){return e.id}));return[4,l.Z.dispatch({type:"GUILD_FEED_FETCH_SUCCESS",guildId:t,data:_,fresh:p})];case 4:M.sent()
;D=m.ZP.getFeedItemSection(t,S.Ji.READ).map((function(e){return e.id}));T=m.ZP.getFeedItemSection(t,S.Ji.UNREAD).map((function(e){return e.id}));F=m.ZP.getFeedItemsForGuild(t).filter((function(e){return e.featured})).map((function(e){return e.id}));O=Date.now()-a;A=(null!=f?f:0)/m.qL;P({guildId:t,loadTime:O,startHomeSessionId:h,page:A,newReadFeedItemIds:o().difference(D,y),newUnreadFeedItemIds:o().difference(T,b),newFeaturedItemIds:o().difference(F,v)});U(t,_);return[3,6];case 5:R=M.sent();l.Z.dispatch({type:"GUILD_FEED_FETCH_FAILURE",guildId:t,error:new c.Z(R)});throw R;case 6:return[2]}}))}));return Z.apply(this,arguments)}function L(e,t,n){(0,p.a8)((0,_.j)(e),t,n)}function C(e,t,n){(0,p.FL)((0,_.j)(e),t,n)}function j(e){return x.apply(this,arguments)}function x(){return(x=T((function(e){var t,n;return M(this,(function(r){switch(r.label){case 0:t=(0,y.ZP)(e);return[4,s.Z.post({url:g.ANM.GUILD_FEED_MESSAGE_REMOVE(t.channel_id,t.id)})];case 1:n=r.sent();l.Z.dispatch({
type:"GUILD_FEED_ITEM_REMOVE",item:e});return[2,n]}}))}))).apply(this,arguments)}function k(e,t){return G.apply(this,arguments)}function G(){return(G=T((function(e,t){var n,i;return M(this,(function(o){switch(o.label){case 0:n=(0,y.ZP)(e);return[4,s.Z.put({url:g.ANM.GUILD_FEED_MESSAGE_SET_PREFERENCE(t),body:{channel_id:n.channel_id,message_id:n.id,load_id:m.ZP.getLoadId(t),preference:r.HIDDEN,entity_type:a.C.MESSAGE}})];case 1:i=o.sent();l.Z.dispatch({type:"GUILD_FEED_ITEM_HIDE",item:e});return[2,i]}}))}))).apply(this,arguments)}function H(e){return W.apply(this,arguments)}function W(){return(W=T((function(e){var t,n,r;return M(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,s.Z.get({url:g.ANM.GUILD_FEED_FEATURE_ITEM(e)})];case 1:t=i.sent();n=t.body;l.Z.dispatch({type:"GUILD_FEED_FEATURED_ITEMS_FETCH_SUCCESS",guildId:e,data:n});return[3,3];case 2:r=i.sent();l.Z.dispatch({type:"GUILD_FEED_FEATURED_ITEMS_FETCH_FAILURE",guildId:e,error:new c.Z(r)});throw r;case 3:
return[2]}}))}))).apply(this,arguments)}function B(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=T((function(e,t,n){var r,i,o,u,a,c;return M(this,(function(d){switch(d.label){case 0:r=(0,b.Z)(e),i=r.entityId,o=r.details,u=r.guildId,a=r.entityType;d.label=1;case 1:d.trys.push([1,3,,4]);return[4,s.Z.put({url:g.ANM.GUILD_FEED_FEATURE_ITEM(u),body:{entity_id:i,entity_type:a,expires_at:t,details:o}})];case 2:c=d.sent();l.Z.dispatch({type:"GUILD_FEED_FEATURE_ITEM",featureableItem:e,options:n});return[2,c];case 3:throw d.sent();case 4:return[2]}}))}))).apply(this,arguments)}function V(e){return K.apply(this,arguments)}function K(){return(K=T((function(e){var t,n,r,i,o;return M(this,(function(u){switch(u.label){case 0:t=(0,b.Z)(e),n=t.entityId,r=t.guildId,i=t.entityType;u.label=1;case 1:u.trys.push([1,3,,4]);return[4,s.Z.delete({url:g.ANM.GUILD_FEED_FEATURE_ITEM(r),body:{entity_id:n,entity_type:i}})];case 2:o=u.sent();l.Z.dispatch({type:"GUILD_FEED_UNFEATURE_ITEM",
featureableItem:e});return[2,o];case 3:throw u.sent();case 4:return[2]}}))}))).apply(this,arguments)}function z(e,t){return J.apply(this,arguments)}function J(){return(J=T((function(e,t){var n,r;return M(this,(function(i){switch(i.label){case 0:n=(0,y.ZP)(e);return[4,s.Z.delete({url:g.ANM.GUILD_FEED_MESSAGE_SET_PREFERENCE(t),body:{channel_id:n.channel_id,message_id:n.id,load_id:m.ZP.getLoadId(t),entity_type:a.C.MESSAGE}})];case 1:r=i.sent();l.Z.dispatch({type:"GUILD_FEED_ITEM_UNHIDE",item:e});return[2,r]}}))}))).apply(this,arguments)}function Q(e,t){return q.apply(this,arguments)}function q(){return(q=T((function(e,t){return M(this,(function(n){switch(n.label){case 0:return[4,s.Z.put({url:g.ANM.GUILD_FEED_MESSAGE_SET_PREFERENCE(e),body:O(w({},t),{load_id:m.ZP.getLoadId(e),preference:r.DEMOTED})})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function X(e){var t=e.guild_id;null!=t&&function(e){
var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.cs.IMMEDIATE_WITH_COOLDOWN;(0,p.rS)((0,_.j)(e),t)}(t);E.default.track(g.rMx.FEED_ITEM_INTERACTED,e)}},151154:(e,t,n)=>{n.d(t,{Z:()=>U,j:()=>R});var r=n(281110),i=n(744564),o=n(671293),u=n(717091),a=n(858519),s=n(652591),l=n(72580),c=n(102921),d=n(202351);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function h(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){E=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return E(e,t)}var I=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}var m={};var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&E(e,t)}(n,e);var t=_(n);function n(){f(this,n);return t.apply(this,arguments)}var r=n.prototype;r.isItemSeen=function(e,t){var n=m[e];return null!=n&&n.has(t)};r.__getLocalVars=function(){return{seenItemIds:m}};return n}(d.ZP.Store);y.displayName="GuildFeedSeenStore";const b=new y(i.Z,{GUILD_FEED_ITEM_READ_ACK:function(e){var t=e.guildId,n=e.itemId
;null==m[t]&&(m[t]=new Set);m[t].add(n)}});var v=n(123398),S=n(170892),g=n(2590);function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,i)}function F(e){F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return F(e)}function w(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?D(e):t}function O(e,t){O=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return O(e,t)}var M=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}()
;return function(){var n,r=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}var P=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o
;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function R(e){return"".concat(a.AT.GUILD_HOME,"_").concat(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&O(e,t)}(n,e);var t=A(n);function n(e){var a,d=e.loadId,f=e.homeSessionId,p=e.guildId,h=e.windowId,E=e.isPaused;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);(a=t.call(this,{windowId:h,isPaused:E,id:R(p)})).onInitialize=function(){i.Z.subscribe("GUILD_FEED_ITEM_READ_ACK",a.handleReadAck)};a.onTerminate=function(){i.Z.unsubscribe("GUILD_FEED_ITEM_READ_ACK",a.handleReadAck)};a.onFeedItemSeen=function(e,t){if(t){
a.pendingReadAcks[e]=setTimeout((function(){a.ackItemAsRead(e)}),3e3);a.feedItemSnapshots[e]=v.ZP.getItem(a.guildId,e)}};a.onFeedItemUnseen=function(e,t){if(e in a.pendingReadAcks){var n=a.pendingReadAcks[e];clearTimeout(n);delete a.pendingReadAcks[e]}};a.createFlushSeenItemsFunction=function(e){var t=a.guildId,n=a.loadId,i=a.trackedFeedItems,o=a.homeSessionId,u=a.feedItemSnapshots;if(null!=n&&null!=o){var c={guildId:t,loadId:n,trackedFeedItems:i,feedItemSnapshots:u,isForcedFlush:null!=e,homeSessionId:o};return function(){return function(e){var t=e.guildId,n=e.loadId,i=e.homeSessionId,o=e.trackedFeedItems,u=e.feedItemSnapshots,a=e.isForcedFlush,c={},d=!0,f=!1,p=void 0;try{for(var h,E=Object.keys(o)[Symbol.iterator]();!(d=(h=E.next()).done);d=!0){var I=h.value,_=o[I].computeSeenTimeDestructive(a);_>0&&(c[I]={additionalSeenTimeMillis:_})}}catch(e){f=!0;p=e}finally{try{d||null==E.return||E.return()}finally{if(f)throw p}}if(0===Object.keys(c).length)return Promise.resolve()
;var m=[],y=[],b=[],v=!0,D=!1,T=void 0;try{for(var F,w=Object.keys(c)[Symbol.iterator]();!(v=(F=w.next()).done);v=!0){var O=F.value;m.push(O);y.push(c[O].additionalSeenTimeMillis);c[O].additionalSeenTimeMillis>=1e3&&b.push(O)}}catch(e){D=!0;T=e}finally{try{v||null==w.return||w.return()}finally{if(D)throw T}}s.default.track(g.rMx.FEED_ITEM_SEEN_BATCH,{guild_id:t,load_id:n,feed_item_ids:m,additional_seen_time_millis:y,home_session_id:i});var M=b.map((function(e){return u[e]})).filter(l.lm).map(S.ZP).map((function(e){return e.id}));return 0===M.length?Promise.resolve():r.Z.post({url:g.ANM.GUILD_FEED_MARK_SEEN(t),body:{item_ids:M}})}(c)}}};a.ackItemAsRead=function(e){delete a.pendingReadAcks[e];b.isItemSeen(a.guildId,e)||i.Z.dispatch({type:"GUILD_FEED_ITEM_READ_ACK",guildId:a.guildId,itemId:e})};var I,_,m=D(a);a.handleReadAck=(_=(I=function(e){var t,n,i,a,s,l,d,f,p,h,E,I,_,y;return P(this,(function(b){switch(b.label){case 0:t=e.guildId,n=e.itemId;if(m.guildId!==t)return[2]
;if(null==(i=v.ZP.getItem(t,n)))return[2];if(!i.unreadMention||i.seen)return[2];a=(0,S.ZP)(i);s=a.channel_id;return[4,o.Z.unarchiveThreadIfNecessary(s)];case 1:b.sent();l=u.ZP.getMentionCount(s);if(null==(d=u.ZP.ackMessageId(s)))return[2];f=0;p=!0,h=!1,E=void 0;try{for(I=(0,S.pR)(i)[Symbol.iterator]();!(p=(_=I.next()).done);p=!0)(y=_.value).mentioned&&c.Z.compare(y.id,d)>0&&(f+=1)}catch(e){h=!0;E=e}finally{try{p||null==I.return||I.return()}finally{if(h)throw E}}if(0===f)return[2];r.Z.post({url:g.ANM.MESSAGE_ACK(s,d),body:{manual:!0,mention_count:l-f}});return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(n,r){var i=I.apply(e,t);function o(e){T(i,n,r,o,u,"next",e)}function u(e){T(i,n,r,o,u,"throw",e)}o(void 0)}))}),function(e){return _.apply(this,arguments)});a.guildId=p;a.loadId=d;a.homeSessionId=f;a.pendingReadAcks={};a.feedItemSnapshots={};a.lastFlushTimeMillis=Date.now();return a}return n}(a.zQ)},846738:(e,t,n)=>{n.r(t);n.d(t,{
UnfeatureItemConfirmationModal:()=>D,FeatureItemConfirmationModal:()=>T,FeatureMessageConfirmationModal:()=>F,FeatureForumPostConfirmationModal:()=>w});var r=n(785893),i=n(667294),o=n(730381),u=n.n(o),a=n(349289),s=n(945460),l=n(539381),c=n(487868),d=n(504698),f=n(473708),p=n(47949),h=n.n(p);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){I(o,r,i,u,a,"next",e)}function a(e){I(o,r,i,u,a,"throw",e)}u(void 0)}))}}function m(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){m(e,t,n[t])}))}return e}function b(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++){n=o[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){n=o[r]
;t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done);u=!0){o.push(r.value);if(t&&o.length===t)break}}catch(e){a=!0;i=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(e,t){var n,r,i,o,u={
label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0}if(5&o[0])throw o[1];return{
value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function D(e){var t=e.featureableItem,n=e.header,o=e.body,u=v(e,["featureableItem","header","body"]),a=S(i.useState(null),2),c=a[0],p=a[1],h=S(i.useState(!1),2),E=h[0],I=h[1];return(0,r.jsxs)(s.ConfirmModal,b(y({header:n,confirmText:f.Z.Messages.GUILD_FEED_UNFEATURE_BUTTON_TEXT,confirmButtonColor:s.Button.Colors.RED,cancelText:f.Z.Messages.CANCEL,loading:E,onConfirm:_((function(){var e;return g(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);I(!0);return[4,(0,d.Pe)(t)];case 1:n.sent();I(!1);return[3,3];case 2:e=n.sent();p(new l.Z(e));I(!1);throw e;case 3:return[2]}}))}))},u),{children:[(0,r.jsx)(s.Text,{variant:"text-md/normal",children:o}),null!=c&&(0,r.jsx)(s.Text,{color:"text-danger",variant:"text-xs/normal",children:c.message})]}))}function T(e){
var t=e.featureableItem,n=e.expiresSeconds,o=e.header,a=e.children,c=e.options,p=v(e,["featureableItem","expiresSeconds","header","children","options"]),E=S(i.useState(null),2),I=E[0],m=E[1],D=S(i.useState(!1),2),T=D[0],F=D[1];return(0,r.jsxs)(s.ConfirmModal,b(y({header:o,confirmText:f.Z.Messages.GUILD_FEED_FEATURE_BUTTON_TEXT,cancelText:f.Z.Messages.CANCEL,confirmButtonColor:s.Button.Colors.BRAND,loading:T,onConfirm:_((function(){var e,r;return g(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);e=u()().add(n,"second").toDate();F(!0);return[4,(0,d.pl)(t,e,c)];case 1:i.sent();return[3,4];case 2:r=i.sent();m(new l.Z(r));throw r;case 3:F(!1);return[7];case 4:return[2]}}))}))},p),{children:[null!=I&&(0,r.jsx)(s.Text,{className:h().featureModalError,color:"text-danger",variant:"text-xs/normal",children:I.message}),a]}))}function F(e){
var t=e.message,n=e.guildId,i=e.channel,o=e.expiresSeconds,u=e.timePeriod,l=e.options,d=v(e,["message","guildId","channel","expiresSeconds","timePeriod","options"]);return(0,r.jsxs)(T,b(y({},d),{featureableItem:{guildId:n,entity:t,entityType:a.w.MESSAGE},header:f.Z.Messages.GUILD_FEED_FEATURED_MESSAGE_MODAL_HEADER,expiresSeconds:o,options:l,children:[(0,r.jsx)(s.Text,{className:h().featureModalText,variant:"text-md/normal",children:f.Z.Messages.GUILD_FEED_FEATURE_MESSAGE_MODAL_BODY.format({timePeriod:u})}),(0,r.jsx)("div",{className:h().featureModalMessage,children:(0,r.jsx)(c.Z,{channel:i,message:t,disableInteraction:!0})})]}))}function w(e){var t=e.thread,n=e.guildId,i=e.expiresSeconds,o=e.timePeriod,u=e.options,l=v(e,["thread","guildId","expiresSeconds","timePeriod","options"]);return(0,r.jsx)(T,b(y({},l),{featureableItem:{guildId:n,entity:t,entityType:a.w.FORUM_POST},header:f.Z.Messages.GUILD_FEED_FEATURED_FORUM_POST_MODAL_HEADER,expiresSeconds:i,options:u,children:(0,
r.jsx)(s.Text,{className:h().featureModalText,variant:"text-md/normal",children:f.Z.Messages.GUILD_FEED_FEATURE_FORUM_POST_MODAL_BODY.format({threadName:t.name,timePeriod:o})})}))}},614244:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(468811),i=n.n(r),o=n(202351),u=n(744564),a=n(897196),s=n(222752);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function d(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){f=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return f(e,t)}var p=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}var E,I,_,m,y={};function b(e){return{guildId:e,sessionId:i().v4()}}function v(e){if(null!=_&&_.guildId===e){I=_;_=void 0}else I=b(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&f(e,t)}(n,e);var t=h(n);function n(){l(this,n);return t.apply(this,arguments)}var r=n.prototype;r.getSavedScrollPosition=function(e){return y[e]};r.getHomeSessionId=function(e){return null!=I&&I.guildId===e?I.sessionId:null!=_&&_.guildId===e?_.sessionId:void 0}
;r.getHomeSessionSource=function(e){return null!=m&&m.guildId===e?m.source:s.SB.ORGANIC};r.__getLocalVars=function(){return{scrollPosition:y,lastSelectedHomeChannelId:E,sessionData:I,preloadData:_,sourceData:m}};return n}(o.ZP.Store);S.displayName="GuildHomeStore";const g=new S(u.Z,{CONNECTION_OPEN:function(){y={}},GUILD_FEED_FETCH_FRESH_START:function(e){var t=e.guildId;delete y[t]},GUILD_HOME_SET_SCROLL_POSITION:function(e){var t=e.guildId,n=e.scrollPosition;y[t]=n},CHANNEL_SELECT:function(e){var t=e.guildId,n=e.channelId;if(null!=t&&null!=n&&(0,a.AB)(n)&&(0,a.ME)(n)){var r=(0,a.Qk)(n,t);if(E===r)return!1;if(null!=I&&I.guildId===t)return!1;v(t);E=r;null!=m&&m.guildId!==t&&(m=void 0)}else{E=void 0;I=void 0;_=void 0;m=void 0}},CHANNEL_PRELOAD:function(e){var t=e.guildId,n=e.channelId;if(null!=t&&null!=n&&(0,a.AB)(n)&&(0,a.ME)(n)){if(null!=_&&_.guildId===t)return!1;_=b(t)}else _=void 0},GUILD_HOME_SET_SOURCE:function(e){var t=e.source,n=e.guildId;m={guildId:n,source:t}},
GUILD_HOME_ENSURE_HOME_SESSION:function(e){var t=e.guildId;if(null!=I&&I.guildId===t)return!1;v(t)},LOGOUT:function(){I=void 0;_=void 0;m=void 0}})},129586:(e,t,n)=>{n.d(t,{a8:()=>i,FL:()=>o,rS:()=>u});var r=n(744564);function i(e,t,n){r.Z.dispatch({type:"ANALYTICS_FEED_ITEM_SEEN",id:e,feedItemId:t,timestampMillis:n})}function o(e,t,n){r.Z.dispatch({type:"ANALYTICS_FEED_ITEM_UNSEEN",id:e,feedItemId:t,timestampMillis:n})}function u(e,t){r.Z.dispatch({type:"ANALYTICS_FEED_FLUSH",id:e,force:t})}},858519:(e,t,n)=>{n.d(t,{AT:()=>l,cs:()=>c,zQ:()=>p});var r=n(441143),i=n.n(r),o=n(744564);function u(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){n(e);return}a.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
var l,c,d=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;(r=0,i)&&(o=[2&o[0],i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:u.label++;return{value:o[1],done:!1};case 5:u.label++;r=o[1];o=[0];continue;case 7:o=u.ops.pop();u.trys.pop();continue;default:if(!(i=u.trys,i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1];i=o;break}if(i&&u.label<i[2]){u.label=i[2];u.ops.push(o);break}i[2]&&u.ops.pop();u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e];r=0}finally{n=i=0
}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};!function(e){e.GUILD_HOME="guild_home";e.FORUM_CHANNEL="forum_channel"}(l||(l={}));!function(e){e[e.IMMEDIATE=0]="IMMEDIATE";e[e.IMMEDIATE_WITH_COOLDOWN=1]="IMMEDIATE_WITH_COOLDOWN";e[e.IMMEDIATE_WITH_DELAY=2]="IMMEDIATE_WITH_DELAY"}(c||(c={}));var f=function(){function e(){s(this,e);this.seenIntervals=[]}var t=e.prototype;t.maybeMarkSeen=function(e){var t=this.seenIntervals[this.seenIntervals.length-1];if(null!=t&&null==t.endTimeMillis)return!1;this.seenIntervals.push({startTimeMillis:e});return!0};t.maybeMarkUnseen=function(e){var t=this.seenIntervals[this.seenIntervals.length-1];if(null==t||null!=t.endTimeMillis)return!1;t.endTimeMillis=e;return!0};t.isVisible=function(){var e=this.seenIntervals[this.seenIntervals.length-1];return null!=(null==e?void 0:e.startTimeMillis)&&null==(null==e?void 0:e.endTimeMillis)};t.computeSeenTimeDestructive=function(e){var t=0,n=[],r=!0,o=!1,u=void 0;try{
for(var a,s=this.seenIntervals[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(null==l.endTimeMillis)if(e){var c=Date.now();t+=c-l.startTimeMillis;n.push({startTimeMillis:c})}else n.push(l);else t+=l.endTimeMillis-l.startTimeMillis}}catch(e){o=!0;u=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw u}}i()(n.length<2,"there should only be a single left over data");this.seenIntervals=n;return Math.round(t)};return e}(),p=function(){function e(t){var n=t.id,r=t.windowId,i=t.isPaused,u=this;s(this,e);this.initialize=function(){var e,t;o.Z.subscribe("ANALYTICS_FEED_ITEM_SEEN",u.handleFeedItemSeen);o.Z.subscribe("ANALYTICS_FEED_ITEM_UNSEEN",u.handleFeedItemUnseen);o.Z.subscribe("ANALYTICS_FEED_FLUSH",u.handleFeedItemFlush);o.Z.subscribe("APP_STATE_UPDATE",u.handleAppStateUpdate);o.Z.subscribe("DRAWER_OPEN",u.handleDrawerOpen);o.Z.subscribe("DRAWER_CLOSE",u.handleDrawerClose);o.Z.subscribe("WINDOW_FOCUS",u.handleWindowFocus)
;null===(t=(e=u).onInitialize)||void 0===t||t.call(e)};this.terminate=function(){var e,t;o.Z.unsubscribe("ANALYTICS_FEED_ITEM_SEEN",u.handleFeedItemSeen);o.Z.unsubscribe("ANALYTICS_FEED_ITEM_UNSEEN",u.handleFeedItemUnseen);o.Z.unsubscribe("ANALYTICS_FEED_FLUSH",u.handleFeedItemFlush);o.Z.unsubscribe("APP_STATE_UPDATE",u.handleAppStateUpdate);o.Z.unsubscribe("DRAWER_OPEN",u.handleDrawerOpen);o.Z.unsubscribe("DRAWER_CLOSE",u.handleDrawerClose);o.Z.unsubscribe("WINDOW_FOCUS",u.handleWindowFocus);null===(t=(e=u).onTerminate)||void 0===t||t.call(e);u.maybeFlushSeenItems(c.IMMEDIATE)};this.handleFeedItemFlush=function(e){var t=e.id,n=e.force;u._id===t&&u.maybeFlushSeenItems(n)};this.handleFeedItemSeen=function(e){var t,n,r=e.id,i=e.timestampMillis,o=e.feedItemId;if(r===u._id)if(u._paused)u._pausedFeedItemIds.add(o);else{var a=u.getTrackedFeedItem(o).maybeMarkSeen(i);null===(n=(t=u).onFeedItemSeen)||void 0===n||n.call(t,o,a)}};this.handleFeedItemUnseen=function(e){
var t,n,r=e.id,i=e.timestampMillis,o=e.feedItemId;if(r===u._id){u._paused&&u._pausedFeedItemIds.delete(o);var a=u.getTrackedFeedItem(o).maybeMarkUnseen(i);null===(n=(t=u).onFeedItemUnseen)||void 0===n||n.call(t,o,a);u.maybeFlushSeenItems()}};this.getTrackedFeedItem=function(e){null==u.trackedFeedItems[e]&&(u.trackedFeedItems[e]=new f);return u.trackedFeedItems[e]};this.getVisibleFeedItemIds=function(){var e=Object.keys(u.trackedFeedItems);return new Set(e.filter((function(e){var t;return null===(t=u.trackedFeedItems[e])||void 0===t?void 0:t.isVisible()})))};this.handleDrawerClose=function(){u._isReactNavigationFocused&&u.resume()};this.handleDrawerOpen=function(){u._isReactNavigationFocused&&u.pause()};this.handleAppStateUpdate=function(e){var t=e.state;"active"===t&&u._isReactNavigationFocused&&u.resume();if("background"===t){u._isReactNavigationFocused&&u.pause();u.maybeFlushSeenItems(c.IMMEDIATE)}};this.clearPausedFeedItemIds=function(){u._pausedFeedItemIds=new Set;u._paused=!1}
;this.pause=function(){if(!u._paused){var e=u.getVisibleFeedItemIds();e.forEach((function(e){u.handleFeedItemUnseen({id:u._id,feedItemId:e,timestampMillis:Date.now(),type:"ANALYTICS_FEED_ITEM_UNSEEN"})}));u._paused=!0;u._pausedFeedItemIds=e}};this.resume=function(){if(u._paused){u._paused=!1;u._pausedFeedItemIds.forEach((function(e){u.handleFeedItemSeen({id:u._id,feedItemId:e,timestampMillis:Date.now(),type:"ANALYTICS_FEED_ITEM_SEEN"})}));u.clearPausedFeedItemIds()}};this.handleReactNavigationFocus=function(e,t){u._isReactNavigationFocused=e;u._isReactNavigationFocused&&!t?u.resume():u.pause()};this.handleWindowFocus=function(e){u._windowId===e.windowId&&(e.focused?u.resume():u.pause())};this.trackedFeedItems={};this._id=n;this._windowId=r;this._pausedFeedItemIds=new Set;this._paused=null!=i&&i;this._isReactNavigationFocused=!0;this._lastFlushTimeMillis=Date.now()}e.prototype.maybeFlushSeenItems=function(e){if(null==e&&Date.now()-this._lastFlushTimeMillis<6e4)return Promise.resolve()
;if(e===c.IMMEDIATE_WITH_COOLDOWN&&Date.now()-this._lastFlushTimeMillis<3e3)return Promise.resolve();var t,n=this.createFlushSeenItemsFunction(e);if(null==n)return Promise.resolve();this._lastFlushTimeMillis=Date.now();return e===c.IMMEDIATE||e===c.IMMEDIATE_WITH_COOLDOWN?new Promise((t=a((function(e){return d(this,(function(t){switch(t.label){case 0:return[4,n()];case 1:t.sent();e();return[2]}}))})),function(e){return t.apply(this,arguments)})):new Promise((function(e){setTimeout(a((function(){return d(this,(function(t){switch(t.label){case 0:return[4,n()];case 1:t.sent();e();return[2]}}))})),100)}))};return e}()},708313:(e,t,n)=>{n.d(t,{C:()=>r});var r;!function(e){e.MESSAGE="message";e.CHANNEL="channel";e.USER="user"}(r||(r={}));new Set(["channel","message","user"])}}]);
//# sourceMappingURL=82896d13e21c475669b5.js.map