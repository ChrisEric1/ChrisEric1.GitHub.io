"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[11780],{707233:(e,n,t)=>{t.d(n,{Z:()=>f});var r=t(785893),a=t(667294),o=t(294184),i=t.n(o),l=t(945460),u=t(557617),s=t(656016),c=t.n(s);function f(e){var n=e.filename,t=e.className,o=e.filters,s=e.buttonText,f=e.placeholder,d=e.onFileSelect,h=a.useRef(null);return(0,r.jsxs)("div",{className:i()(t,c().fileUpload),children:[(0,r.jsx)("input",{className:c().fileUploadInput,tabIndex:-1,readOnly:!0,placeholder:f,type:"text",value:n}),(0,r.jsxs)(l.Button,{size:l.Button.Sizes.MIN,className:c().fileUploadButton,children:[s,(0,r.jsx)(u.Z,{ref:h,tabIndex:-1,onChange:function(e){var n,t=null===(n=e.currentTarget.files)||void 0===n?void 0:n[0];d(t)},multiple:!1,filters:o})]})]})}},711780:(e,n,t)=>{t.r(n);t.d(n,{default:()=>Dn});var r=t(785893),a=t(667294),o=t(294184),i=t.n(o),l=t(945460),u=t(539381),s=t(707233),c=t(652591),f=t(336177),d=t(701190),h=t(633878);function m(e,n,t){n in e?Object.defineProperty(e,n,{
value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function p(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function v(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||(a[t]=e[t])}return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++){t=o[r];n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}}return a}function y(e){
var n=e.width,t=void 0===n?16:n,a=e.height,o=void 0===a?16:a,i=e.color,l=void 0===i?"currentColor":i,u=e.foreground,s=v(e,["width","height","color","foreground"]);return(0,r.jsx)("svg",p(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){m(e,n,t[n])}))}return e}({},(0,h.Z)(s)),{width:t,height:o,viewBox:"0 0 16 16",children:(0,r.jsx)("path",{className:u,fill:l,d:"M12.6667 2.00195H3.33333C2.6 2.00195 2 2.60195 2 3.33529V12.6686C2 13.402 2.6 14.002 3.33333 14.002H12.6667C13.4 14.002 14 13.402 14 12.6686V3.33529C14 2.60195 13.4 2.00195 12.6667 2.00195Z"})}))}var b=t(815378),g=t(38736),O=t(503528),w={waveformBlockWidth:2,waveformBarWidth:.5,fineTuningDelay:500,fineTuningScale:10,loudnessThreshold:.3
},j=new Set(["audio/mpeg","audio/mp3","audio/wav","audio/ogg"]),D=t(473708);function S(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){t(e);return}l.done?n(u):Promise.resolve(u).then(r,a)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){S(o,r,a,i,l,"next",e)}function l(e){S(o,r,a,i,l,"throw",e)}i(void 0)}))}}var x=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0]
;continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},N=function(e,n,t){return-1===e?0:e-n*e/t};function E(e){return e/1e3}var P=function(e,n,t){return-1===e?t:e+n*(t-e)/t},I=function(e,n,t,r){var a=0;if(n>=0&&t>0){a=100*(e-(n-t*n/r))/t}else a=100*e/r;return a.toFixed(4)},M=function(e,n,t,r){var a=0;if(n>=0&&t>0){a=100*(e-(n+t*(r-n)/r))*-1/t}else a=100*e*-1/r+100;return a.toFixed(4)};function C(e){return new Promise((function(n){var t=function(){n();e.removeEventListener("canplaythrough",t)};e.addEventListener("canplaythrough",t);e.load()}))}function _(e){
return L.apply(this,arguments)}function L(){return(L=A((function(e){var n,t;return x(this,(function(r){switch(r.label){case 0:if(!e.type.startsWith("audio")||!j.has(e.type))throw new Error(D.Z.Messages.SOUNDBOARD_ERROR_INVALID_FILE_TYPE.format({fileType:e.type}));n=URL.createObjectURL(e);return[4,C(t=new Audio(n))];case 1:r.sent();return[2,t]}}))}))).apply(this,arguments)}function U(){return(U=A((function(e,n){var t;return x(this,(function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return[4,r.sent().blob()];case 2:t=r.sent();return[2,new File([t],n,{type:"audio/mp3"})]}}))}))).apply(this,arguments)}function k(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){t(e);return}l.done?n(u):Promise.resolve(u).then(r,a)}var T=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){
return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},R=(0,g.Z)((function(e){return{audio:null,file:null,loading:!1,loadAudioFromFile:(t=(n=function(n){var t;return T(this,(function(r){switch(r.label){case 0:e({file:n,audio:null,loading:null!=n})
;return null==n?[2]:[4,_(n)];case 1:if(null==(t=r.sent()))return[2];e({audio:t,loading:!1});return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){k(o,r,a,i,l,"next",e)}function l(e){k(o,r,a,i,l,"throw",e)}i(void 0)}))}),function(e){return t.apply(this,arguments)}),maxVolume:1,setMaxVolume:function(n){e({maxVolume:n})}};var n,t}));function B(){return R((function(e){return{audio:e.audio,file:e.file,loading:e.loading,loadAudioFromFile:e.loadAudioFromFile,maxVolume:e.maxVolume,setMaxVolume:e.setMaxVolume}}),O.Z)}var Z=t(718831),F=t(496486),H=t(575945),G=t(74535),V=t(795470),Y=t(468811),z=t.n(Y);function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function $(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){t(e);return}l.done?n(u):Promise.resolve(u).then(r,a)}function q(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t)
;function i(e){$(o,r,a,i,l,"next",e)}function l(e){$(o,r,a,i,l,"throw",e)}i(void 0)}))}}function J(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function K(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X,Q=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){
i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};t.e(40116).then(t.t.bind(t,340116,23)).then((function(e){var n=e.default;X=new n}));var ee=new AudioContext;function ne(){return(ne=q((function(e){var n;return Q(this,(function(t){switch(t.label){case 0:return[4,e.arrayBuffer()];case 1:n=t.sent();return[4,ee.decodeAudioData(n)];case 2:return[2,t.sent().getChannelData(0)]}}))}))).apply(this,arguments)}function te(e){var n=K(a.useState(null),2),t=n[0],r=n[1],o=K(a.useState(null),2),i=o[0],l=o[1];a.useEffect((function(){if(null!=e){var n=function(e){return"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified)}(e);if(n!==i){l(n);r(null);(function(e){return ne.apply(this,arguments)})(e).then(r)}}}),[i,e]);return t}var re=function(e){for(var n=1;n<arguments.length;n++){
var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){J(e,n,t[n])}))}return e}({},w);function ae(e,n,t){var r=K(a.useState(null),2),o=r[0],i=r[1],l=K(a.useState(null),2),u=l[0],s=l[1],c=K(a.useState(1),2),f=c[0],d=c[1],h=B().setMaxVolume,m=a.useCallback((function(e,n){s(null);(function(e,n,t,r,a){return new Promise((function(o){var i=z().v4(),l=function(e){var n=e.data,t=n.waveform,r=n.id,u=n.normalizedVolumeMultipler;if(i===r){o(t);a(u)}null==X||X.removeEventListener("message",l)};null==X||X.addEventListener("message",l);null==X||X.postMessage({id:i,options:t,config:r,width:n,rawBufferData:e})}))})(e,n.offsetWidth,t,re,d).then(s)}),[t]);a.useEffect((function(){if(null!=e&&null!=n){var r=function(e,n){var t="".concat(e[0],"-").concat(e[e.length-1],"-").concat(e.byteLength)
;return"".concat(t,"-").concat(JSON.stringify(n))}(e,t);if(o!==r){i(r);m(e,n)}}}),[e,m,n,t,o]);a.useEffect((function(){h(f)}),[f,h]);return u}var oe=t(520453),ie=t(630374),le=t.n(ie);function ue(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function se(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ue(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name)
;if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ue(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const fe=a.memo((function(e){var n=e.file,t=e.audio,o=e.className,u=e.waveformSettings,s=ce(a.useState({width:0,height:0}),2),c=s[0],f=s[1],d=a.useRef(null),h=a.useMemo((function(){var e,n=null!==(e=null==t?void 0:t.duration)&&void 0!==e?e:1;return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){se(e,n,t[n])}))}return e}({fineTuning:-1,fineTuningResolution:n/w.fineTuningScale,duration:n},null!=u?u:{})
}),[t,u]),m=te(n),p=ae(m,d.current,h),v=(0,G.ZP)(),y=(0,V.Sl)((0,H.wj)(v)?oe.Il.PRIMARY_300:oe.Il.PRIMARY_700),b=null==m||null==p,g=(0===c.width||0===c.height||b)&&null!=n,O=a.useCallback((function(){null!=d.current&&f({width:d.current.offsetWidth,height:d.current.offsetHeight})}),[]);a.useEffect((function(){if(null!=d.current){var e=new ResizeObserver((0,F.debounce)(O,50));e.observe(d.current);return function(){e.disconnect()}}}),[O]);a.useEffect((function(){if(null!=d.current){var e=d.current,n=e.getContext("2d");if(null!=n){var t=e.width,r=e.height;if(0!==c.width&&0!==c.height&&null!=p&&p.length>0){var a=t/p.length,o=a*-(w.waveformBarWidth-1);n.clearRect(0,0,t,r);n.fillStyle=y.hex;for(var i=0;i<p.length;i++){var l=p[i]*r,u=i*a+o,s=r/2-l/2;n.fillRect(u,s,a-o,l)}}}}}),[y,c,v,p]);return(0,r.jsxs)("div",{className:i()(le().container,o),children:[(0,r.jsx)("canvas",{className:le().waveformCanvas,ref:d,width:4*c.width,height:4*c.height}),g&&(0,r.jsx)("div",{className:le().loading,
children:(0,r.jsx)(l.Spinner,{type:l.SpinnerTypes.SPINNING_CIRCLE})})]})})),de=a.memo((function(e){var n=e.fineTuning,t=e.fineTuningResolution,a=e.duration,o=B(),i=o.file,l=o.audio;return(0,r.jsx)(fe,{file:i,audio:l,waveformSettings:{fineTuning:n,fineTuningResolution:t,duration:a}})}));var he=t(530156),me=t.n(he);function pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function ye(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return pe(e,n)
;var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var be;!function(e){e[e.START=0]="START";e[e.PLAYHEAD=1]="PLAYHEAD";e[e.END=2]="END"}(be||(be={}));const ge=a.memo((function(e){var n=e.playing,t=e.onPausePlayback,o=e.onPlaybackChange,l=e.onChangePosition,u=e.disabled,s=void 0!==u&&u,c=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){ve(e,n,t[n])}))}return e
}({},w),f=B().audio,d=null!=f,h=a.useRef(null),m=a.useRef(null),p=a.useRef(null),v=ye(a.useState(0),2),y=v[0],b=v[1],g=ye(a.useState(0),2),O=g[0],j=g[1],D=ye(a.useState(0),2),S=D[0],A=D[1],x=ye(a.useState(!1),2),C=x[0],_=x[1],L=ye(a.useState(!1),2),U=L[0],k=L[1],T=ye(a.useState(!1),2),R=T[0],F=T[1],H=ye(a.useState(0),2),G=H[0],V=H[1],Y=ye(a.useState(-1),2),z=Y[0],W=Y[1],$=a.useMemo((function(){return G/c.fineTuningScale}),[c.fineTuningScale,G]);a.useEffect((function(){if(null!=f){var e=1e3*f.duration;b(0);j(0);A(e);V(e)}}),[f]);var q,J=a.useCallback((function(e,n){t();if(0===e.button)switch(n){case be.START:_(!0);break;case be.PLAYHEAD:k(!0);break;case be.END:F(!0)}}),[t]),K=a.useCallback((function(e){switch(e){case be.START:_(!1);break;case be.PLAYHEAD:k(!1);break;case be.END:F(!1)}W(-1)}),[]),X=a.useCallback((function(e){if(null!=f&&C){var n=parseInt(e.target.value),t=n>S?S:n;o(E(t));b(t);j(t)}}),[f,o,S,C]),Q=a.useCallback((function(e){if(null!=f&&U){var n=parseInt(e.target.value)
;if(n<y){o(E(y));j(y)}else if(n>S){o(E(S));j(S)}else{o(E(n));j(n)}}}),[f,o,S,U,y]),ee=a.useCallback((function(e){if(null!=f&&R){var n=parseInt(e.target.value),t=n>y?n:y;o(E(y));j(y);A(t)}}),[f,o,R,y]);a.useEffect((function(){null!=l&&d&&l({startPositionMs:y,endPositionMs:S,playheadPositionMs:O})}),[y,S,l,d,O]);a.useEffect((function(){if(null!=f){var e;n&&(e=setInterval((function(){if(f.currentTime<E(S))f.currentTime>=E(O)&&j(1e3*f.currentTime);else{t(E(y));j(y)}}),16));return function(){clearInterval(e)}}}),[f,S,t,O,n,y]);a.useEffect((function(){if(!(c.fineTuningDelay<=0)){var e=y,n=S,t=O,r=setTimeout((function(){C&&e===y&&-1===z?W(y):R&&n===S&&-1===z?W(S):U&&t===O&&-1===z&&W(O)}),c.fineTuningDelay);return function(){clearTimeout(r)}}}),[c.fineTuningDelay,R,S,z,U,O,C,y]);return(0,r.jsxs)("div",{className:i()(me().timeline,ve({},me().initialized,d)),children:[(0,r.jsxs)("div",{className:me().rangeHandleContainer,children:[(0,r.jsxs)("div",{className:me().rangeHandleFrame,children:[(0,
r.jsx)("input",{ref:h,className:i()(me().rangeHandle,me().rangeHandleStart),type:"range",min:N(z,$,G),max:P(z,$,G),value:y,onChange:X,onMouseDown:function(e){return J(e,be.START)},onMouseUp:function(){return K(be.START)},disabled:!d||s}),(0,r.jsx)("input",{ref:p,className:i()(me().rangeHandle,me().rangeHandleEnd),type:"range",min:N(z,$,G),max:P(z,$,G),value:S,onChange:ee,onMouseDown:function(e){return J(e,be.END)},onMouseUp:function(){return K(be.END)},disabled:!d||s})]}),(0,r.jsx)("div",{className:me().handlePlayheadTrack,children:(0,r.jsx)("input",{ref:m,className:i()(me().rangeHandle,me().rangeHandlePlayhead),type:"range",min:N(z,$,G),max:P(z,$,G),value:O,onChange:Q,onMouseDown:function(e){return J(e,be.PLAYHEAD)},onMouseUp:function(){return K(be.PLAYHEAD)},disabled:!d||s})})]}),(0,r.jsxs)("div",{className:me().handleContainer,children:[(0,r.jsxs)("div",{className:i()(me().handleFrame,(q={},ve(q,me().startDragging,C),ve(q,me().endDragging,R),q)),style:{
left:"".concat(I(y,z,$,G),"%"),right:"".concat(M(S,z,$,G),"%")},children:[(0,r.jsx)("div",{className:i()(me().handleIconFrame,me().handleIconFrameStart),children:(0,r.jsx)("div",{className:i()(me().handleIconContainer,me().start),children:(0,r.jsx)(Z.Z,{direction:Z.Z.Directions.RIGHT,className:me().handleIcon,width:16,height:16})})}),(0,r.jsx)("div",{className:i()(me().handleIconFrame,me().handleIconFrameEnd),children:(0,r.jsx)("div",{className:i()(me().handleIconContainer,me().end),children:(0,r.jsx)(Z.Z,{direction:Z.Z.Directions.LEFT,className:me().handleIcon,width:16,height:16})})})]}),(0,r.jsx)("div",{className:me().playheadTrack,children:(0,r.jsx)("div",{className:i()(me().playhead,ve({},me().dragging,U||C||R||n)),style:{left:"".concat(I(O,z,$,G),"%")}})})]}),(0,r.jsx)("div",{className:me().waveformContainer,children:(0,r.jsx)(de,{fineTuning:z,fineTuningResolution:$,duration:G})})]})}));var Oe=t(460214),we=t(206954),je=t.n(we);function De(e,n){(null==n||n>e.length)&&(n=e.length)
;for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Se(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function Ae(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return De(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return De(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xe={startPositionMs:0,endPositionMs:2e4,playheadPositionMs:0};const Ne=a.memo((function(e){var n=e.className,t=e.volume,o=e.disabled,u=void 0!==o&&o,s=e.onChange,c=B().audio,f=Ae(a.useState(!1),2),h=f[0],m=f[1],p=Ae(a.useState(xe),2),v=p[0],g=p[1],O=v.playheadPositionMs,w=v.endPositionMs,j=v.startPositionMs,D=null!=c,S=w-j,A=S>1e3*Oe.YW;a.useEffect((function(){null!=c&&g({playheadPositionMs:0,endPositionMs:1e3*c.duration,startPositionMs:0})}),[c]);var x,N,P=a.useCallback((function(e){if(null!=c){c.pause();null!=e&&(c.currentTime=e);m(!1)}}),[c]),I=a.useCallback((function(){if(null!=c)if(h)P();else{c.currentTime=E(O>=w?j:O);c.volume=(0,b.Rp)(t);c.play();m(!0)}}),[c,w,P,O,h,j,t]),M=a.useCallback((function(e){g(e);null==s||s({startMs:e.startPositionMs,endMs:e.endPositionMs})}),[s]),C=a.useCallback((function(e){
null!=c&&(c.currentTime=e)}),[c]);return(0,r.jsxs)("div",{className:i()(je().container,(x={},Se(x,je().initialized,D),Se(x,je().disabled,!D||u),x),n),children:[(0,r.jsxs)("div",{className:je().playButtonContainer,children:[(0,r.jsx)(l.Clickable,{className:je().playButton,onClick:D?I:void 0,children:h?(0,r.jsx)(y,{className:je().playButtonIcon}):(0,r.jsx)(d.Z,{className:je().playButtonIcon})}),(0,r.jsx)("div",{className:je().durationContainer,children:(0,r.jsx)(l.Text,{className:je().duration,variant:"text-xs/normal",color:A?"text-warning":"text-positive",children:(N=S,"".concat(E(N).toFixed(2),"s"))})})]}),(0,r.jsx)(ge,{playing:h,onPlaybackChange:C,onPausePlayback:P,onChangePosition:M,disabled:u})]})}));var Ee=t(897699),Pe=t(922947),Ie=t.n(Pe);function Me(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ce(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){
var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return Me(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Me(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const _e=a.memo((function(e){var n=e.sound,t=e.volume,o=e.disabled,i=Ce(a.useState(!1),2),u=i[0],s=i[1],c=a.useRef(null),f=B(),h=f.file,m=f.audio,p=f.loadAudioFromFile,v=a.useMemo((function(){return(0,
Ee.Z)(n.soundId)}),[n]);a.useEffect((function(){null==c.current&&(c.current=function(e,n){return U.apply(this,arguments)}(v,n.name).then(p))}),[v,p,n.name]);return(0,r.jsxs)("div",{className:Ie().previewContainer,children:[(0,r.jsx)(l.Clickable,{onClick:o?void 0:function(){if(null!=m)if(m.paused){m.volume=(0,b.Rp)(t);m.currentTime=0;m.play();s(!0);m.addEventListener("ended",(function(){return s(!1)}),{once:!0})}else{m.pause();s(!1)}},className:Ie().playButton,"aria-label":u?D.Z.Messages.STOP:D.Z.Messages.PLAY,children:u?(0,r.jsx)(y,{className:Ie().playIcon}):(0,r.jsx)(d.Z,{className:Ie().playIcon})}),(0,r.jsx)("div",{className:Ie().waveformContainer,children:(0,r.jsx)(fe,{className:Ie().waveform,file:h,audio:m})})]})}));var Le=t(570090),Ue=t.n(Le);const ke=a.memo((function(e){var n=e.sound,t=e.volume,a=e.disabled,o=void 0!==a&&a,i=e.onChange,u=B().file;return(0,r.jsx)(l.FormSection,{className:Ue().section,title:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_PREVIEW,children:(0,
r.jsxs)("div",{className:Ue().fakeInput,children:[null!=n&&(0,r.jsx)(_e,{sound:n,volume:t,disabled:o}),null==n&&null!=u&&(0,r.jsx)(Ne,{className:Ue().audioTrimmer,volume:t,disabled:o,onChange:i})]})})}));function Te(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){t(e);return}l.done?n(u):Promise.resolve(u).then(r,a)}function Re(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Te(o,r,a,i,l,"next",e)}function l(e){Te(o,r,a,i,l,"throw",e)}i(void 0)}))}}var Be,Ze=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,
a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Fe=new AudioContext;t.e(18665).then(t.t.bind(t,818665,23)).then((function(e){var n=e.default;Be=new n}));function He(e){return new Promise((function(n,t){var r=new FileReader,a=function(){r.removeEventListener("load",a);r.removeEventListener("error",t);n(r.result)};r.addEventListener("load",a);r.addEventListener("error",t);e(r)}))}function Ge(e){return Ve.apply(this,arguments)}function Ve(){
return(Ve=Re((function(e){var n;return Ze(this,(function(t){switch(t.label){case 0:return[4,He((function(n){n.readAsArrayBuffer(e)}))];case 1:n=t.sent();if(!(n instanceof ArrayBuffer))throw new Error("Unexpected file type");return[2,Fe.decodeAudioData(n)]}}))}))).apply(this,arguments)}function Ye(){return(Ye=Re((function(e){var n;return Ze(this,(function(t){switch(t.label){case 0:return[4,He((function(n){n.readAsDataURL(e)}))];case 1:n=t.sent();if(!("string"==typeof n))throw new Error("Unexpected file type");return[2,n]}}))}))).apply(this,arguments)}function ze(e,n){for(var t=n.startMs,r=n.endMs,a=e.sampleRate,o=e.numberOfChannels,i=1e3*e.duration,l=Math.floor(t/i*e.length),u=Math.floor(r/i*e.length),s=u-l+1,c=Fe.createBuffer(o,s,a),f=0;f<o;f++)for(var d=c.getChannelData(f),h=e.getChannelData(f),m=0,p=l;p<=u;p++){d[m]=h[p];m++}return c}function We(e){for(var n=e.numberOfChannels,t=[],r=0;r<n;r++)t.push(e.getChannelData(r));return t}function $e(e){return new Promise((function(n,t){
var r=z().v4(),a=function(e){var o=e.data,i=o.mp3Blob,l=o.error,u=o.id;null==Be||Be.removeEventListener("message",a);r===u&&(null!=l?t(l):null!=i?n(i):t(new Error("Unexpected worker response")))};null==Be||Be.addEventListener("message",a);var o={id:r,sourceChannels:We(e),sampleRate:e.sampleRate};null==Be||Be.postMessage(o)}))}function qe(e){return Je.apply(this,arguments)}function Je(){return(Je=Re((function(e){var n,t,r,a,o,i,l;return Ze(this,(function(u){switch(u.label){case 0:n=e.readPromise,t=e.guildId,r=e.name,a=e.volume,o=e.emojiId,i=e.emojiName;l={guildId:t,name:r};return[4,n];case 1:return[2,f.Dx.apply(void 0,[(l.sound=u.sent(),l.volume=a,l.emojiId=o,l.emojiName=i,l)])]}}))}))).apply(this,arguments)}function Ke(e,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=Re((function(e,n){var t,r;return Ze(this,(function(a){switch(a.label){case 0:return[4,Ge(e)];case 1:t=a.sent();return[4,$e(ze(t,n))];case 2:r=a.sent();return[2,new File([r],e.name,{type:"audio/mp3"})]}}))
}))).apply(this,arguments)}var Qe=t(202351),en=t(77413),nn=t(441394),tn=t(662478),rn=t(748308),an=t(489617),on=t(135855);var ln=t(5544),un=t(847197),sn=t(2590),cn=t(168098),fn=t.n(cn);function dn(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t;return e}function hn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))));r.forEach((function(n){dn(e,n,t[n])}))}return e}function mn(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));t.push.apply(t,r)}return t
}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function pn(e){var n=e.guildId,t=e.error,o=e.emojiId,i=e.emojiName,u=e.setEmojiId,s=e.setEmojiName,c=function(e){var n=e.emojiId,t=e.emojiName,r=(0,Qe.e7)([an.Z],(function(){return null!=n?an.Z.getCustomEmojiById(n):null}));if(null!=r||null!=t)return null!=t?on.ZP.convertSurrogateToName(t,!1):null==r?void 0:r.name}({emojiId:o,emojiName:i}),f=(0,Qe.e7)([ln.ZP],(function(){return null!=n?ln.ZP.getDefaultChannel(n):null})),d=a.createRef(),h=(0,tn.Z)(d),m=function(e){return function(n,t){s(null==(null==n?void 0:n.id)?null==n?void 0:n.optionallyDiverseSequence:void 0);u(null==n?void 0:n.id);t&&e()}},p=function(e){e.stopPropagation();s(void 0);u(void 0)};return(0,r.jsx)(l.FormItem,{title:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_EMOJI,className:fn().section,error:t,children:(0,r.jsx)(l.Popout,{animation:l.Popout.Animation.NONE,position:"top",renderPopout:function(e){
var t=e.closePopout;return(0,r.jsx)(rn.Z,{closePopout:t,pickerIntention:sn.HzX.SOUNDBOARD,onNavigateAway:t,onSelectEmoji:m(t),guildId:n,channel:f})},children:function(e,n){var t=n.isShown;return(0,r.jsxs)("div",mn(hn({},e),{className:fn().emojiInput,ref:d,children:[(0,r.jsx)(un.Z,{className:fn().emojiButton,active:t,tabIndex:0,renderButtonContents:null!=o||null!=i?function(){return(0,r.jsx)(en.Z,{emojiName:i,emojiId:o})}:null}),(0,r.jsx)(l.TextInput,{inputClassName:fn().emojiText,placeholder:D.Z.Messages.GUILD_STICKER_UPLOAD_RELATED_EMOJI_PLACEHOLDER,value:null!=c?":".concat(c,":"):"",readOnly:!0}),h&&null!=c&&(0,r.jsx)(nn.Z,mn(hn({},e),{onClick:p,className:fn().removeButton}))]}))}})})}function vn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function yn(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){t(e);return}l.done?n(u):Promise.resolve(u).then(r,a)}function bn(e){return function(){var n=this,t=arguments
;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){yn(o,r,a,i,l,"next",e)}function l(e){yn(o,r,a,i,l,"throw",e)}i(void 0)}))}}function gn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){o.push(r.value);if(n&&o.length===n)break}}catch(e){l=!0;a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return vn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vn(e,n)}(e,n)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var On,wn=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;(r=0,a)&&(o=[2&o[0],a.value]);switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:!1};case 5:i.label++;r=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}
if(6===o[0]&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}a[2]&&i.ops.pop();i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e];r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};!function(e){e.READY="ready";e.ENCODING_FAILED="encoding-failed";e.ENCODING="encoding";e.UPLOADING="uploading"}(On||(On={}));var jn=[{name:"audio",extensions:["mp3","wav","ogg"]}];function Dn(e){var n,t,o=e.guildId,d=e.existingSound,h=e.onClose,m=e.transitionState,p=function(e){if(e instanceof u.Z)Z(e);else if(e instanceof Error){var n={status:500,body:{message:e.message}};Z(new u.Z(n))}else Z(new u.Z(e))
},v=gn(a.useState(null!==(n=null==d?void 0:d.name)&&void 0!==n?n:""),2),y=v[0],b=v[1],g=gn(a.useState(null!==(t=null==d?void 0:d.volume)&&void 0!==t?t:1),2),O=g[0],w=g[1],j=gn(a.useState(null==d?void 0:d.emojiId),2),S=j[0],A=j[1],x=gn(a.useState(null==d?void 0:d.emojiName),2),N=x[0],E=x[1],P=B(),I=P.file,M=P.loadAudioFromFile,C=P.maxVolume,_=P.setMaxVolume,L=gn(a.useState(!1),2),U=L[0],k=L[1],T=gn(a.useState(null),2),R=T[0],Z=T[1],F=gn(a.useState(null),2),H=F[0],G=F[1],V=gn(a.useState(On.READY),2),Y=V[0],z=V[1];function W(){W=bn((function(e){var n;return wn(this,(function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,M(null!=e?e:null)];case 1:t.sent();z(On.READY);Z(null);return[3,3];case 2:n=t.sent();p(n);return[3,3];case 3:return[2]}}))}));return W.apply(this,arguments)}var $,q=function(e){switch(e){case On.ENCODING:return D.Z.Messages.SOUNDBOARD_MODAL_AUDIO_STATE_ENCODING;case On.ENCODING_FAILED:return D.Z.Messages.SOUNDBOARD_MODAL_AUDIO_STATE_ENCODING_FAILED
;case On.UPLOADING:return D.Z.Messages.SOUNDBOARD_MODAL_AUDIO_STATE_UPLOADING}return null}(Y),J=Y===On.UPLOADING||Y===On.ENCODING,K=null!=d,X=y.length>=2&&(K||null!=I),Q=a.useCallback(($=bn((function(e,n){var t,r;return wn(this,(function(a){switch(a.label){case 0:z(On.ENCODING);a.label=1;case 1:a.trys.push([1,3,,4]);return[4,Ke(e,n)];case 2:t=a.sent();z(On.READY);return[2,t];case 3:r=a.sent();z(On.ENCODING_FAILED);throw r;case 4:return[2]}}))})),function(e,n){return $.apply(this,arguments)}),[]),ee=a.useCallback(bn((function(){var e,n,t,r;return wn(this,(function(a){switch(a.label){case 0:if(null==I)return[2];e=I;return null==H?[3,2]:[4,Q(I,H)];case 1:if(null==(n=a.sent()))return[2];e=n;a.label=2;case 2:t=function(e){return Ye.apply(this,arguments)}(e);z(On.UPLOADING);a.label=3;case 3:a.trys.push([3,5,,6]);return[4,qe({readPromise:t,guildId:o,name:y,volume:O,emojiId:S,emojiName:N})];case 4:a.sent();z(On.READY);return[3,6];case 5:r=a.sent();throw new u.Z(r);case 6:return[2]}}))
})),[I,o,y,Q,H,O,S,N]),ne=a.useCallback(bn((function(){var e;return wn(this,(function(n){switch(n.label){case 0:k(!0);Z(null);n.label=1;case 1:n.trys.push([1,6,7,8]);return K?[4,(0,f.$d)({guildId:o,soundId:d.soundId,name:y,volume:O,emojiId:S,emojiName:N})]:[3,3];case 2:n.sent();return[3,5];case 3:return[4,ee()];case 4:n.sent();n.label=5;case 5:h();return[3,8];case 6:e=n.sent();p(e);return[3,8];case 7:z(On.READY);k(!1);w(1);_(1);return[7];case 8:return[2]}}))})),[K,h,o,d,y,O,S,N,ee,_]);a.useEffect((function(){M(null);c.default.track(sn.rMx.OPEN_MODAL,{type:"Soundboard Upload Sound",guild_id:o})}),[]);a.useEffect((function(){w(Math.min(O,C))}),[O,w,C]);var te,re=(0,r.jsx)(pn,{guildId:o,emojiId:S,emojiName:N,setEmojiId:A,setEmojiName:E,error:null==R?void 0:R.getFirstFieldErrorMessage("emoji")});return(0,r.jsxs)(l.ModalRoot,{transitionState:m,children:[(0,r.jsx)(l.ModalCloseButton,{onClick:h,className:fn().modalClose}),(0,r.jsxs)(l.ModalHeader,{className:fn().headerContainer,separator:!1,
children:[(0,r.jsx)(l.Heading,{className:fn().header,variant:"heading-xl/extrabold",children:K?D.Z.Messages.SOUNDBOARD_SOUND_UPDATE_MODAL_HEADER:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_HEADER}),!K&&(0,r.jsx)(l.Text,{variant:"text-sm/normal",children:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_SUBHEADER.format({maxDuration:Oe.YW,maxFileSize:Oe.mc})})]}),(0,r.jsxs)(l.ModalContent,{className:fn().content,children:[null!=R&&!R.hasFieldErrors()&&(0,r.jsx)(l.FormErrorBlock,{className:fn().section,children:R.message}),(K||null!=I)&&(0,r.jsx)(ke,{sound:d,volume:O,disabled:J,onChange:G}),!K&&(0,r.jsx)(l.FormItem,{required:!0,error:null==R?void 0:R.getFirstFieldErrorMessage("sound"),className:fn().section,title:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_FILE,children:(0,r.jsx)(s.Z,{filename:null!==(te=null==I?void 0:I.name)&&void 0!==te?te:"",buttonText:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_BROWSE,placeholder:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_INPUT_PLACEHOLDER,
onFileSelect:function(e){return W.apply(this,arguments)},filters:jn})}),(0,r.jsxs)("div",{className:fn().multiInput,children:[(0,r.jsx)(l.FormItem,{required:!0,error:null==R?void 0:R.getFirstFieldErrorMessage("name"),className:i()(fn().section,fn().halfInput),title:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_SOUND_NAME,children:(0,r.jsx)(l.TextInput,{placeholder:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_SOUND_NAME,value:y,onChange:b,maxLength:Oe.Ek})}),re]}),(0,r.jsx)(l.FormItem,{error:null==R?void 0:R.getFirstFieldErrorMessage("volume"),className:fn().section,title:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_SOUND_VOLUME,children:(0,r.jsx)(l.Slider,{initialValue:O,onValueChange:function(e){return w(e)},minValue:0,maxValue:C})})]}),(0,r.jsxs)(l.ModalFooter,{children:[(0,r.jsx)(l.Button,{disabled:!X,submitting:U,size:l.Button.Sizes.SMALL,onClick:ne,children:K?D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_SAVE:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_UPLOAD}),(0,r.jsx)(l.Button,{
disabled:U,onClick:h,size:l.Button.Sizes.SMALL,look:l.Button.Looks.LINK,color:l.Button.Colors.PRIMARY,children:D.Z.Messages.SOUNDBOARD_SOUND_UPLOAD_MODAL_CANCEL}),null!=q&&(0,r.jsx)("div",{className:fn().soundStateHint,children:(0,r.jsx)(l.Text,{variant:"text-xs/normal",color:"text-muted",children:q})})]})]})}}}]);
//# sourceMappingURL=ca24a1fff599af71bf57.js.map