"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[35521],{372956:(e,t,n)=>{n.d(t,{x:()=>a,C:()=>o});var r=n(744564),i=n(758635);function a(e){var t=e.omitUserIds,n=e.guild,a=e.channel,o=e.applicationId,c=e.inviteTargetType;return(0,i.W)().then((function(){r.Z.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=t?t:new Set,guild:n,channel:a,applicationId:o,inviteTargetType:c})}))}function o(e){r.Z.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})}},135521:(e,t,n)=>{n.r(t);n.d(t,{default:()=>F});var r=n(785893),i=n(667294),a=n(999357),o=n(202351),c=n(945460),l=n(761953),s=n(372956),u=n(336334),f=n(153686),d=n(19585),p=n(674748),m=n(621647),y=n(773011),v=n(567403),h=n(537335),b=n(840922),g=n(473903),I=n(282898),S=n(83623),O=n(963881),w=n(652591),T=n(775173),j=n(691797),x=n(786502),A=n(421281),C=n(749565),E=n(92585),_=n(2590),N=n(718634),Z=n(473708),k=n(180202),D=n.n(k);function P(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t,n,r,i,a,o){try{var c=e[a](o),l=c.value}catch(e){n(e);return}c.done?t(l):Promise.resolve(l).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){M(a,r,i,o,c,"next",e)}function c(e){M(a,r,i,o,c,"throw",e)}o(void 0)}))}}function U(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function L(e,t){t=null!=t?t:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function G(e,t){if(null==e)return{}
;var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++){n=a[r];t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}}return i}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done);o=!0){a.push(r.value);if(t&&a.length===t)break}}catch(e){c=!0;i=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}var z=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),
0):r.next)&&!(i=i.call(r,a[1])).done)return i;(r=0,i)&&(a=[2&a[0],i.value]);switch(a[0]){case 0:case 1:i=a;break;case 4:o.label++;return{value:a[1],done:!1};case 5:o.label++;r=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(i=o.trys,i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1];i=a;break}if(i&&o.label<i[2]){o.label=i[2];o.ops.push(a);break}i[2]&&o.ops.pop();o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e];r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};function F(e){var t=e.activityItem,n=e.analyticsLocations,m=G(e,["activityItem","analyticsLocations"]),y=(0,o.e7)([g.default],(function(){return g.default.getCurrentUser()})),v=(0,d.Z)(n).analyticsLocations;(0,p.Z)({type:a.nv.MODAL,name:a.zs.ACTIVITY_BOOKMARK_SHARE_MODAL,properties:{application_id:t.application.id,location_stack:v}})
;var b=B(i.useState(""),2),S=b[0],O=b[1],T=B(i.useState([]),2),j=T[0],A=T[1],C=(0,E.Z)({applicationId:t.application.id,size:256}),k="".concat(window.location.origin).concat(_.Z5c.ACTIVITY_DETAILS(t.application.id)),P=(0,o.Wu)([h.Z],(function(){return h.Z.getInviteSuggestionRows()}));i.useEffect((function(){(0,s.x)({omitUserIds:new Set,applicationId:t.application.id,inviteTargetType:N.Iq.EMBEDDED_APPLICATION})}),[t.application.id]);i.useEffect((function(){return(0,s.C)(S)}),[S]);var M=i.useCallback(R((function(){var e,n,r,i;return z(this,(function(a){switch(a.label){case 0:e=function(e,t){switch(e.type){case x.bm.DM:case x.bm.FRIEND:n++;break;case x.bm.GROUP_DM:r++;break;case x.bm.CHANNEL:i++}return e.type===x.bm.GROUP_DM||e.type===x.bm.CHANNEL?u.Z.sendActivityBookmark(e.item.id,t,f.Z.ACTIVITY_DETAIL_PAGE,null):e.type===x.bm.DM||e.type===x.bm.FRIEND?l.Z.ensurePrivateChannel(e.item.id).then((function(e){return u.Z.sendActivityBookmark(e,k,f.Z.ACTIVITY_DETAIL_PAGE,null)
})):Promise.resolve()};n=0;r=0;i=0;return[4,h.Z.getInviteSuggestionRows().filter((function(e){return j.includes(e.item.id)})).map((function(t){return e(t,k)}))];case 1:a.sent();w.default.track(_.rMx.ACTIVITY_BOOKMARK_SHARED,{user_id:null==y?void 0:y.id,application_id:t.application.id,n_users:n,n_gdms:r,n_channels:i});m.onClose();return[2]}}))})),[t,j,m,k,y]);return(0,r.jsxs)(c.ModalRoot,L(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){U(e,t,n[t])}))}return e}({},m),{className:D().modalRoot,children:[(0,r.jsxs)(c.ModalHeader,{className:D().header,children:[(0,r.jsx)(c.Heading,{variant:"heading-md/semibold",children:Z.Z.Messages.EMBEDDED_ACTIVITIES_SHARE_ACTIVITY_WITH.format({activityName:t.application.name})}),(0,
r.jsx)(c.ModalCloseButton,{onClick:m.onClose})]}),(0,r.jsxs)(c.ModalContent,{className:D().modalContent,children:[(0,r.jsx)(I.Z,{className:D().searchBar,placeholder:Z.Z.Messages.SEARCH,label:Z.Z.Messages.SEARCH,searchTerm:S,onChange:function(e){return O(e)},onClear:function(){return O("")}}),P.map((function(e,t){return(0,r.jsxs)(i.Fragment,{children:[0===t?null:(0,r.jsx)("div",{className:D().rowDivider}),(0,r.jsx)(K,{row:e,onClick:function(){var t=V(j);t.includes(e.item.id)?t=t.filter((function(t){return t!==e.item.id})):t.push(e.item.id);A(t)},checked:j.includes(e.item.id)})]},e.item.id)}))]}),(0,r.jsxs)(c.ModalFooter,{className:D().footer,children:[(0,r.jsx)("div",{className:D().activityInfoOuterContainer,children:(0,r.jsxs)("div",{className:D().activityInfoInnerContainer,children:[(0,r.jsx)("img",{src:C.url,className:D().activityInfoImage,alt:t.application.name}),(0,r.jsxs)("div",{className:D().activityInfoText,children:[(0,r.jsx)(c.Text,{variant:"text-md/semibold",
className:D().ellipsis,children:t.application.name}),(0,r.jsx)(c.Text,{variant:"text-sm/medium",className:D().ellipsis,children:t.application.description}),(0,r.jsx)(c.Text,{variant:"text-xs/medium",className:D().ellipsis,children:(0,r.jsx)(c.Anchor,{href:k,children:k})})]})]})}),(0,r.jsx)("div",{className:D().footerDivider}),(0,r.jsxs)("div",{className:D().copySendBar,children:[(0,r.jsx)(Y,{link:k,applicationId:t.application.id}),(0,r.jsx)(c.Button,{onClick:M,disabled:j.length<=0,children:Z.Z.Messages.SEND})]})]})]}))}function K(e){var t=e.row,n=e.onClick,i=e.checked,a=null,o=null,l=null;switch(t.type){case x.bm.DM:case x.bm.FRIEND:a=(0,r.jsx)(c.Avatar,{size:c.AvatarSizes.SIZE_40,src:t.item.getAvatarURL(null,128,!1),"aria-label":t.item.username});o=C.ZP.getName(t.item);l=C.ZP.getUserTag(t.item);break;case x.bm.GROUP_DM:var s=(0,m.x)(t.item),u=(0,y.F6)(t.item,g.default,b.Z);a=(0,r.jsx)(c.Avatar,{src:s,"aria-label":u,size:c.AvatarSizes.SIZE_40});o=(0,y.F6)(t.item,g.default,b.Z);break
;case x.bm.CHANNEL:var f=t.item,d=v.Z.getGuild(f.guild_id);if(null==d)return null;o="#".concat((0,y.F6)(f,g.default,b.Z));l=d.name;if(null!=d.icon){var p=T.ZP.getGuildIconURL({id:f.guild_id,icon:d.icon,size:40});a=(0,r.jsx)(c.Avatar,{src:p,"aria-label":o,size:c.AvatarSizes.SIZE_40})}else{var h=(0,A.Zg)(d.name);a=(0,r.jsx)("div",{className:D().acronym,"aria-hidden":!0,children:h})}}return(0,r.jsxs)(c.Clickable,{onClick:n,className:D().rowContainer,children:[(0,r.jsxs)("div",{className:D().rowLeft,children:[(0,r.jsx)("div",{className:D().rowAvatar,children:a}),(0,r.jsxs)("div",{className:D().rowNameContainer,children:[(0,r.jsx)(c.Text,{variant:"text-md/semibold",className:D().rowName,children:o}),(0,r.jsx)(c.Text,{variant:"text-xs/medium",className:D().rowSubName,children:l})]})]}),(0,r.jsx)(c.Checkbox,{value:i,type:c.Checkbox.Types.INVERTED,displayOnly:!0,className:D().rowRight})]})}function Y(e){var t=e.applicationId,n=e.link,a=(0,o.e7)([g.default],(function(){
return g.default.getCurrentUser()})),l=B(i.useState(!1),2),s=l[0],u=l[1];i.useEffect((function(){var e;s&&(e=setTimeout((function(){u(!1)}),1e3));return function(){null!=e&&clearTimeout(e)}}),[s]);return(0,r.jsxs)(c.Button,{look:c.Button.Looks.LINK,color:c.Button.Colors.LINK,onClick:function(){w.default.track(_.rMx.ACTIVITY_BOOKMARK_COPY_URL,{user_id:null==a?void 0:a.id,application_id:t});(0,j.JG)(n);u(!0)},innerClassName:D().copyButton,children:[s?(0,r.jsx)(S.Z,{}):(0,r.jsx)(O.Z,{}),s?Z.Z.Messages.COPIED:Z.Z.Messages.COPY_LINK]})}},537335:(e,t,n)=>{n.d(t,{Z:()=>D});var r=n(202351),i=n(744564),a=n(980604),o=n(72580),c=n(786502),l=n(61209),s=n(840922),u=n(239734),f=n(2590),d=n(718634);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){
return e.__proto__||Object.getPrototypeOf(e)};return y(e)}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){h=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return h(e,t)}function b(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
}()}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}var S,O,w,T,j,x,A,C=new Set,E=[],_=new Map;function N(e){var t=new Set,n=null==T||A===d.Iq.EMBEDDED_APPLICATION?void 0:T.id,r=(0,c.rh)(C,n);null==r||s.Z.isBlocked(r.id)||t.add(r.id);var i=!0,p=!1,m=void 0;try{for(var y,v=u.Z.getUserAffinitiesUserIds()[Symbol.iterator]();!(i=(y=v.next()).done);i=!0){var h=y.value;t.add(h)}}catch(e){p=!0;m=e}finally{try{i||null==v.return||v.return()}finally{if(p)throw m}}var b=new Set;if(A===d.Iq.EMBEDDED_APPLICATION){
a.Z.getChannelHistory().map((function(e){return l.Z.getChannel(e)})).filter(o.lm).filter((function(e){return e.type===f.d4z.GUILD_TEXT})).slice(0,3).forEach((function(e){return b.add(e.id)}))}return(0,c.an)({query:e,omitUserIds:C,suggestedUserIds:t,maxRowsWithoutQuery:100,omitGuildId:n,suggestedChannelIds:b,inviteTargetType:A})}function Z(e){E=e;_=new Map;e.forEach((function(e,t){_.set(e,{index:t})}))}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&h(e,t)}(n,e);var t=I(n);function n(){m(this,n);return t.apply(this,arguments)}var r=n.prototype;r.initialize=function(){this.waitFor(s.Z,u.Z)};r.getInviteSuggestionRows=function(){return E};r.getTotalSuggestionsCount=function(){return O};r.getInitialCounts=function(){return S};r.getSelectedInviteMetadata=function(e){
var t=_.get(e),n=u.Z.getUserAffinitiesUserIds();return null!=t?{rowNum:t.index,isAffinitySuggestion:e.isSuggested,numTotal:E.length,numAffinityConnections:n.size,isFiltered:w}:null};r.__getLocalVars=function(){return{MAX_INVITE_SUGGESTION_COUNT:100,userIdsToOmit:C,inviteSuggestions:E,inviteSuggestionsMap:_,initialCounts:S,totalCount:O,isFiltered:w,currentGuild:T,currentChannel:j,currentApplicationId:x,currentInviteTargetType:A}};return n}(r.ZP.Store);k.displayName="InviteSuggestionsStore";const D=new k(i.Z,{LOAD_INVITE_SUGGESTIONS:function(e){var t=e.omitUserIds,n=e.guild,r=e.channel,i=e.applicationId,a=e.inviteTargetType;T=null!=r?n:null;j=r;x=i;A=a;var o=s.Z.getRelationships(),l=Object.keys(o).filter((function(e){return o[e]===f.OGo.BLOCKED})),u=(0,c.Sz)({channel:j,applicationId:x,inviteTargetType:a});C=new Set(b(t).concat(b(l),b(u)));w=!1;var d=N(""),p=d.rows,m=d.counts;Z(p);S=m;O=E.length},INVITE_SUGGESTIONS_SEARCH:function(e){var t=e.query;w=""!==t;Z(N(t).rows)}})}}]);
//# sourceMappingURL=fd1451df9c74b0b1ad4b.js.map