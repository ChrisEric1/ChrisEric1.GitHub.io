"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[49393],{949393:(e,n,t)=>{t.r(n);t.d(n,{default:()=>k});var r=t(785893),o=t(667294),a=t(496486),i=t.n(a),u=t(202351),l=t(945460),s=t(281110),c=t(2590);function f(e,n,t,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){t(e);return}u.done?n(l):Promise.resolve(l).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)}))}}var h=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),
0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};const p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2?arguments[2]:void 0;return d((function(){return h(this,(function(r){switch(r.label){case 0:return[4,s.Z.get({url:c.ANM.GUILD_PRUNE(e),query:{days:n,include_roles:t},oldFormErrors:!0})];case 1:return[2,r.sent().body.pruned]}}))}))()
},y=function(e,n,t){return s.Z.post({url:c.ANM.GUILD_PRUNE(e),body:{days:n,compute_prune_count:!1,include_roles:t},oldFormErrors:!0})};var v=t(461884),b=t(682776),m=t(737797),g=t(473708),S=t(945197),E=t.n(S);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n,t,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){t(e);return}u.done?n(l):Promise.resolve(l).then(r,o)}function _(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function i(e){x(a,r,o,i,u,"next",e)}function u(e){x(a,r,o,i,u,"throw",e)}i(void 0)}))}}function M(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done);i=!0){a.push(r.value);if(n&&a.length===n)break}}catch(e){u=!0;o=e}finally{try{i||null==t.return||t.return()}finally{if(u)throw o}}
return a}}(e,n)||A(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,n){if(e){if("string"==typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);return"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}var N=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),
return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;(r=0,o)&&(a=[2&a[0],o.value]);switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:!1};case 5:i.label++;r=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}o[2]&&i.ops.pop();i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e];r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};const k=function(e){
var n=e.guild,t=e.transitionState,a=e.onClose,s=M(o.useState(7),2),c=s[0],f=s[1],d=M(o.useState(null),2),h=d[0],S=d[1],w=M(o.useState([]),2),x=w[0],A=w[1],k=o.useCallback(_((function(){var e;return N(this,(function(t){switch(t.label){case 0:S(null);return[4,p(n.id,c,x)];case 1:e=t.sent();S(e);return[2]}}))})),[c,n.id,x]);o.useEffect((function(){k()}),[k]);var j=(0,u.e7)([b.Z],(function(){var e=b.Z.getHighestRole(n);return i()(n.roles).sortBy((function(e){return e.position})).filter((function(e){return e.id!==n.id})).filter((function(t){return b.Z.isRoleHigher(n,e,t)})).value()})).map((function(e){var n=e.id;return{label:e.name,value:n}}));return(0,r.jsxs)(l.ModalRoot,{transitionState:t,children:[(0,r.jsx)(l.ModalHeader,{separator:!1,children:(0,r.jsxs)(l.Heading,{variant:"heading-lg/semibold",children:[g.Z.Messages.PRUNE_MEMBERS,"â€”",null!=n?n.toString():""]})}),(0,r.jsxs)("div",{className:E().content,children:[(0,r.jsx)(l.FormItem,{title:g.Z.Messages.FORM_LABEL_LAST_SEEN,children:(0,
r.jsx)(l.RadioGroup,{value:c,options:[{name:g.Z.Messages.LAST_SEEN.format({days:7}),value:7},{name:g.Z.Messages.LAST_SEEN.format({days:30}),value:30}],onChange:function(e){var n=e.value;f(n)},className:E().spacing})}),(0,r.jsx)(l.FormItem,{title:g.Z.Messages.PRUNE_WITH_ROLES,children:(0,r.jsx)(m.Z,{isMulti:!0,options:j,onChange:function(e){A(e.map((function(e){return e.value})))},value:x,multiValueRenderer:function(e){var t=e.value,o=n.getRole(t);if(null==o)return null;var a=x.indexOf(t);return(0,r.jsx)(v.U,{className:E().role,role:o,canRemove:!0,onRemove:function(){A(R(x.slice(0,a)).concat(R(x.slice(a+1))))},guildId:n.id})},maxMenuHeight:200})}),(0,r.jsx)(l.FormText,{type:l.FormText.Types.DESCRIPTION,className:E().spacing,children:x.length>0?g.Z.Messages.FORM_HELP_LAST_SEEN_WITH_ROLES_1.format({members:h,days:c}):g.Z.Messages.FORM_HELP_LAST_SEEN_1.format({members:h,days:c})})]}),(0,r.jsxs)(l.ModalFooter,{children:[(0,r.jsx)(l.Button,{onClick:function(){y(n.id,c,x);a()},
children:g.Z.Messages.PRUNE}),(0,r.jsx)(l.Button,{look:l.Button.Looks.LINK,color:l.Button.Colors.PRIMARY,onClick:a,children:g.Z.Messages.CANCEL})]})]})}}}]);
//# sourceMappingURL=3f09370e7f27f9143947.js.map