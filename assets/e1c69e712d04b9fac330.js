"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[54776],{754776:(e,n,t)=>{t.r(n);t.d(n,{default:()=>F});var a,r=t(785893),s=t(667294),i=t(999357),l=t(202351),o=t(165695),u=t(945460),c=t(957645),E=t(73904),d=t(358969),_=t(10390),I=t(974771),C=t(148318),L=t(382060),N=t(877475),A=t(567403),D=t(107364),T=t(443812),p=t(718831),h=t(436622),m=t(174144),f=t(296047),M=t(796938),G=t(516909),U=t(176758),v=t(661123),b=t(563135),O=t(801809),g=t(2590),y=t(897196),S=t(520453),x=t(473708),Z=t(610703),R=t.n(Z);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,s=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(a=t.next()).done);i=!0){s.push(a.value);if(n&&s.length===n)break}}catch(e){l=!0;r=e}finally{try{i||null==t.return||t.return()}finally{
if(l)throw r}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e[e.GUILD_TEXT=0]="GUILD_TEXT";e[e.GUILD_VOICE=1]="GUILD_VOICE";e[e.GUILD_STAGE_VOICE=2]="GUILD_STAGE_VOICE";e[e.GUILD_FORUM=3]="GUILD_FORUM";e[e.GUILD_MEDIA=4]="GUILD_MEDIA"}(a||(a={}));function F(e){var n,t,Z=e.guildId,j=e.transitionState,F=e.onSubmit,V=e.onClose,k=(0,T.Dt)(),P=(0,T.Dt)(),B=(0,T.Dt)(),z=(0,
T.Dt)(),X=H(s.useState("null"),2),w=X[0],Y=X[1],W=H(s.useState(g.d4z.GUILD_TEXT),2),q=W[0],K=W[1],J=H(s.useState(""),2),$=J[0],Q=J[1],ee=H(s.useState(),2),ne=ee[0],te=ee[1],ae=H(s.useState(!1),2),re=ae[0],se=ae[1],ie=(0,l.e7)([A.Z],(function(){return A.Z.getGuild(Z)}),[Z]),le=(0,C.m)(Z),oe=(0,d.W3)(Z),ue=(0,I.Ui)(ie),ce=s.useMemo((function(){return function(e){var n=e.canCreateStageChannel,t=e.canCreateForumChannel,s=e.canCreateMediaChannel,i=[{icon:h.Z,label:x.Z.Messages.TEXT_CHANNEL_TYPE,value:a.GUILD_TEXT,description:x.Z.Messages.CREATE_TEXT_CHANNEL_DESCRIPTION},{icon:M.Z,label:x.Z.Messages.VOICE_CHANNEL_TYPE,value:a.GUILD_VOICE,description:x.Z.Messages.CREATE_VOICE_CHANNEL_DESCRIPTION}];n&&i.push({icon:G.Z,label:x.Z.Messages.STAGE_VOICE_CHANNEL_TYPE,value:a.GUILD_STAGE_VOICE,description:x.Z.Messages.CREATE_STAGE_CHANNEL_DESCRIPTION});if(t){i.push({icon:m.Z,label:x.Z.Messages.FORUM_CHANNEL_TYPE,value:a.GUILD_FORUM,description:x.Z.Messages.FORUM_CHANNEL_DESCRIPTION});s&&i.push({
icon:f.Z,label:x.Z.Messages.MEDIA_CHANNEL_TYPE,value:a.GUILD_MEDIA,description:x.Z.Messages.CREATE_MEDIA_CHANNEL_DESCRIPTION,isBeta:!0})}return i.map((function(e){var n=e.icon,t=e.label,a=e.value,s=e.description,i=e.isBeta;return{name:(0,r.jsxs)("div",{className:R().channelOptionWrapper,children:[(0,r.jsx)(n,{className:R().icon}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(u.Text,{variant:"text-md/normal",color:"header-primary",children:[t,(0,r.jsx)(c.ChannelTypeBadge,{isBeta:i})]}),(0,r.jsx)(u.Text,{variant:"text-xs/normal",color:"header-secondary",children:s})]})]}),value:a,channelIcon:n}}))}({canCreateStageChannel:le,canCreateForumChannel:oe,canCreateMediaChannel:ue})}),[le,oe,ue]),Ee=(0,l.e7)([N.Z],(function(){return N.Z.getCategories(Z)._categories}),[Z]),de=s.useMemo((function(){return Ee.map((function(e){var n=e.channel;return{value:n.id,label:n.name}}))}),[Ee]),_e=s.useCallback((function(e){var n,t=e.value,r=g.d4z.GUILD_TEXT;switch(t){case a.GUILD_TEXT:r=g.d4z.GUILD_TEXT;break
;case a.GUILD_VOICE:r=g.d4z.GUILD_VOICE;break;case a.GUILD_STAGE_VOICE:r=g.d4z.GUILD_STAGE_VOICE;break;case a.GUILD_FORUM:r=g.d4z.GUILD_FORUM;break;case a.GUILD_MEDIA:r=g.d4z.GUILD_FORUM;n=y.zZ.IS_MEDIA_CHANNEL}K(r);te(n)}),[]),Ie=s.useMemo((function(){switch(q){case g.d4z.GUILD_TEXT:return a.GUILD_TEXT;case g.d4z.GUILD_VOICE:return a.GUILD_VOICE;case g.d4z.GUILD_STAGE_VOICE:return a.GUILD_STAGE_VOICE;case g.d4z.GUILD_FORUM:return null!=ne&&(0,v.yE)(ne,y.zZ.IS_MEDIA_CHANNEL)?a.GUILD_MEDIA:a.GUILD_FORUM;default:return a.GUILD_TEXT}}),[q,ne]),Ce=null!==(t=null===(n=ce.find((function(e){return e.value===Ie})))||void 0===n?void 0:n.channelIcon)&&void 0!==t?t:S.Vq,Le=""!==$;return(0,r.jsx)("form",{onSubmit:function(e){e.preventDefault();if(Le){se(!0);var n={type:q,name:$,parent_id:"null"!==w?w:void 0,permission_overwrites:[{id:Z,type:E.BN.ROLE,allow:b.ZP.NONE,deny:g.Plq.VIEW_CHANNEL}]};null!=ne&&(n.flags=ne);O.Z.post({url:g.ANM.GUILD_CHANNELS(Z),body:n,oldFormErrors:!0,trackedActionData:{
event:i.a9.CHANNEL_CREATE,properties:function(e){var n,t;return(0,o.iG)({is_private:!0,channel_id:null==e||null===(n=e.body)||void 0===n?void 0:n.id,channel_type:null==e||null===(t=e.body)||void 0===t?void 0:t.type})}}}).then((function(e){_.Z.checkGuildTemplateDirty(Z);F(e.body.id);V()}),(function(e){})).finally((function(){se(!1)}))}},children:(0,r.jsxs)(u.ModalRoot,{transitionState:j,"aria-labelledby":k,children:[(0,r.jsxs)(u.ModalHeader,{children:[(0,r.jsx)(u.Heading,{id:k,variant:"heading-md/semibold",children:x.Z.Messages.CREATE_CHANNEL}),(0,r.jsx)(u.ModalCloseButton,{className:R().closeButton,onClick:V})]}),(0,r.jsxs)(u.ModalContent,{className:R().modalContent,children:[(0,r.jsx)(u.FormItem,{title:x.Z.Messages.CATEGORY,titleId:P,children:(0,r.jsx)(u.SingleSelect,{placeholder:x.Z.Messages.CREATE_CHANNEL_MODAL_CATEGORY_PLACEHOLDER,value:w,options:de,onChange:function(e){return Y(e)},"aria-labelledby":P})}),(0,r.jsx)("div",{className:R().spacer}),(0,r.jsx)(u.FormItem,{
title:x.Z.Messages.CHANNEL_TYPE,titleId:B,children:(0,r.jsx)(u.RadioGroup,{options:ce,value:Ie,onChange:_e,"aria-labelledby":B})}),(0,r.jsx)("div",{className:R().spacer}),(0,r.jsx)(u.FormItem,{title:x.Z.Messages.FORM_LABEL_CHANNEL_NAME,titleId:z,children:(0,r.jsx)(u.TextInput,{value:$,onChange:function(e){(0,L.zi)(q)&&(e=(0,U.Nj)(e));Q(e)},maxLength:g.HN8,placeholder:x.Z.Messages.CHANNEL_NAME_PLACEHOLDER,className:R().inputWrapper,inputClassName:R().inputInner,prefixElement:(0,r.jsx)(Ce,{className:R().inputPrefix,"aria-hidden":!0}),"aria-labelledby":z,autoFocus:!0})})]}),(0,r.jsxs)(u.ModalFooter,{justify:D.Z.Justify.BETWEEN,children:[(0,r.jsx)(u.Button,{type:"submit",submitting:re,disabled:!Le,children:x.Z.Messages.SAVE}),(0,r.jsxs)(u.Button,{look:u.Button.Looks.LINK,color:u.Button.Colors.PRIMARY,className:R().backButton,innerClassName:R().backButtonInner,onClick:V,children:[(0,r.jsx)(p.Z,{direction:p.Z.Directions.LEFT}),x.Z.Messages.BACK]})]})]})})}}}]);
//# sourceMappingURL=e1c69e712d04b9fac330.js.map