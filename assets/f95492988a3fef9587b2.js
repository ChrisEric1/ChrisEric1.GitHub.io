"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[96043],{83797:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(2590);function r(t){return null!=t&&t.type!==i.IIU.CUSTOM_STATUS&&(null!=t.details||null!=t.assets&&(null!=t.assets.large_image||null!=t.assets.small_text)||null!=t.party||null!=t.secrets||null!=t.state)}},396043:(t,e,n)=>{n.d(e,{v_:()=>M,JS:()=>w,hH:()=>P,AB:()=>Z,ZP:()=>R,oG:()=>F,kO:()=>k,yw:()=>L});var i=n(496486),r=n.n(i),u=n(940060),l=n(382060),a=n(736818),s=n(61209),c=n(5544),o=n(27851),f=n(21372),d=n(567403),v=n(604945),p=n(682776),_=n(491260),g=n(69085),h=n(715107),y=n(464187),I=n(407561),S=n(652591),m=n(563135),E=n(671723);var b=n(2590),O=n(897196);function A(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n)
;"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))));i.forEach((function(e){A(t,e,n[e])}))}return t}function T(t){var e=0;for(var n in t)e+=1;return e}function P(t){if(null==t)return null;var e=d.Z.getGuild(t);if(null==e)return null;var n,i=a.default.getId(),r=f.ZP.getMember(t,i),u=c.ZP.getChannels(t),l=u[c.sH].length,s=u[c.Zb].length,v=I.Z.getVoiceStates(t);return{guild_id:e.id,guild_size_total:o.Z.getMemberCount(t),guild_num_channels:l+s,guild_num_text_channels:l,guild_num_voice_channels:s,guild_num_roles:T(e.roles),guild_member_num_roles:null!=r?r.roles.length:0,guild_member_perms:String(null!==(n=p.Z.getGuildPermissions(e))&&void 0!==n?n:m.ZP.NONE),guild_is_vip:e.hasFeature(b.oNc.VIP_REGIONS),is_member:null!=r,num_voice_channels_active:T(v)}}function C(t,e){return{channel_static_route:e,channel_hidden:!1}}function w(t){if(null==t)return null
;var e=s.Z.getChannel(t);return null==e?null:M(e)}function M(t){if(null==t)return null;var e,n=!1,i=t.getGuildId();if(null!=i){var r=function(t){if(null==t)return!1;var e=t.permissionOverwrites[i];return null!=e&&u.Z.has(e.deny,b.Plq.VIEW_CHANNEL)};n=l.Ec.has(t.type)&&null!=t.parent_id?r(s.Z.getChannel(t.parent_id)):r(t)}return{channel_id:t.id,channel_type:t.type,channel_size_total:t.isPrivate()?t.recipients.length:0,channel_member_perms:String(null!=i&&null!==(e=p.Z.getChannelPermissions(t))&&void 0!==e?e:m.ZP.NONE),channel_hidden:n}}function Z(t){if(null==t)return null;var e=s.Z.getChannel(t);if(null==e)return null;var n,i=v.Z.isVideoEnabled(),r=g.Z.getMediaSessionId();return N({channel_id:e.id,channel_type:e.type,guild_id:e.getGuildId(),media_session_id:r},k(e.getGuildId(),e.id,i),{game_name:null!=(n=E.ZP.getCurrentGame())?n.name:null,game_id:null!=n?n.id:null})}function U(t,e){
return null==t?null!=e?e:null:t.isPrivate()?null:null!==(i=null!==(n=t.getGuildId())&&void 0!==n?n:e)&&void 0!==i?i:null;var n,i}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!S.default.isThrottled(t)){var i=!("location"in e)||e.location!==b.Sbl.GUILD_CREATE_INVITE_SUGGESTION,r="guild_id"in e?e.guild_id:i?y.Z.getGuildId():null,u="channel_id"in e?e.channel_id:i?h.Z.getChannelId(r):null,l=s.Z.getChannel(u),a=U(l,r),c=N({},e,P(a),null!=r&&null!=u&&(0,O.AB)(u)?C(0,u):M(l));S.default.track(t,c,{flush:n})}}function k(t,e,n){var i={voice_state_count:0,video_stream_count:0,video_enabled:n};r()(I.Z.getVoiceStates(t)).filter((function(t){return t.channelId===e})).filter((function(t){return t.userId!==a.default.getId()})).forEach((function(t){i.voice_state_count++;(t.selfVideo||t.selfStream)&&i.video_stream_count++}));return i}function F(t,e){var n={custom_status_count:0}
;r()(I.Z.getVoiceStates(t)).forEach((function(t){t.channelId===e&&null!=_.Z.findActivity(t.userId,(function(t){return t.type===b.IIU.CUSTOM_STATUS}))&&n.custom_status_count++}));return n}const R={trackWithMetadata:L,getVoiceStateMetadata:k}},491260:(t,e,n)=>{n.d(e,{Z:()=>V});var i=n(110251),r=n.n(i),u=n(496486),l=n.n(u),a=n(202351),s=n(744564),c=n(83797),o=n(736818),f=n(473903),d=n(2590);function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function g(t){g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return g(t)}function h(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t,e){y=Object.setPrototypeOf||function(t,e){t.__proto__=e;return t};return y(t,e)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,u=[],l=!0,a=!1;try{for(n=n.call(t);!(l=(i=n.next()).done);l=!0){u.push(i.value);if(e&&u.length===e)break}}catch(t){a=!0;r=t}finally{try{l||null==n.return||n.return()}finally{if(a)throw r}}return u}}(t,e)||E(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function E(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);return"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,i=g(t);if(e){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}
var O=Object.freeze([]),A={},N={},T={},P={},C={};function w(t,e){var n=A[t];return null!=n?n[e]:null}var M=function(t){switch(t.type){case d.IIU.CUSTOM_STATUS:return 4;case d.IIU.COMPETING:return 3;case d.IIU.STREAMING:return 2;case d.IIU.PLAYING:return 1;default:return 0}};var Z=function(t){return(0,c.Z)(t)?1:0};function U(t,e){return function(t,e){return M(e)-M(t)}(t,e)||function(t,e){return Z(e)-Z(t)}(t,e)||function(t,e){var n,i;return(null!==(n=e.created_at)&&void 0!==n?n:0)-(null!==(i=t.created_at)&&void 0!==i?i:0)}(t,e)}function L(t){delete N[t];delete T[t];delete P[t];if(null!=A[t]){var e=I(l().sortBy(A[t],(function(t){return-t.timestamp})),1),n=e[0];if(n.status!==d.Skl.OFFLINE){N[t]=n.status;T[t]=n.activities;null!=n.clientStatus&&(P[t]=n.clientStatus)}else l().every(A[t],(function(t){return t.status===d.Skl.OFFLINE}))&&delete A[t]}}function k(t){var e=A[t];if(null!=e){var n=l().maxBy(Object.values(e),(function(t){return t.timestamp}));if(n.status!==d.Skl.OFFLINE){N[t]=n.status
;T[t]=n.activities;null!=n.clientStatus&&(P[t]=n.clientStatus)}}}function F(t){var e=t.guildId,n=t.userId,i=t.status,u=t.clientStatus,l=t.activities;if(n===o.default.getId())return!1;var a=A[n];if(null==a){if(i===d.Skl.OFFLINE)return!1;a=A[n]={}}if(i===d.Skl.OFFLINE)a[e]={status:i,clientStatus:u,activities:O,timestamp:Date.now()};else{var s=l.length>1?S(l).sort(U):l,c=a[e];l=null!=c&&r()(c.activities,s)?c.activities:s;a[e]={status:i,clientStatus:u,activities:l,timestamp:Date.now()}}delete C[n];L(n);return!0}function R(t){var e=t.guildId,n=t.userId,i=t.status,r=t.clientStatus,u=t.activities,l=t.timestamp;if(n!==o.default.getId()){var a=A[n];if(null==a){if(i===d.Skl.OFFLINE)return;a=A[n]={}}if(i===d.Skl.OFFLINE)a[e]={status:i,clientStatus:r,activities:O,timestamp:Date.now()};else{var s=u.length>1?S(u).sort(U):u;a[e]={status:i,clientStatus:r,activities:s,timestamp:l}}}}function j(t,e){if(e===o.default.getId())return!1;var n=A[e];if(null==n||null==n[t])return!1;delete n[t]
;0===Object.keys(n).length&&delete A[e];L(e)}function G(t){var e=!0,n=!1,i=void 0;try{for(var r,u=Object.keys(A)[Symbol.iterator]();!(e=(r=u.next()).done);e=!0){j(t,r.value)}}catch(t){n=!0;i=t}finally{try{e||null==u.return||u.return()}finally{if(n)throw i}}}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});e&&y(t,e)}(n,t);var e=b(n);function n(){p(this,n);return e.apply(this,arguments)}var i=n.prototype;i.initialize=function(){this.waitFor(o.default)};i.setCurrentUserOnConnectionOpen=function(t,e){N[o.default.getId()]=t;T[o.default.getId()]=e};i.getStatus=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Skl.OFFLINE,i=f.default.getUser(t);null!=i&&i.hasFlag(d.xW$.BOT_HTTP_INTERACTIONS)&&(n=d.Skl.UNKNOWN)
;if(null==i?void 0:i.isClyde())return d.Skl.ONLINE;if(null==e){var r;return null!==(r=N[t])&&void 0!==r?r:n}var u,l=w(t,e);return null!==(u=null==l?void 0:l.status)&&void 0!==u?u:n};i.getActivities=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==e){var n;return null!==(n=T[t])&&void 0!==n?n:O}var i=w(t,e);return null==i||null==i.activities?O:i.activities};i.getPrimaryActivity=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getActivities(t,e);return n[0]};i.getAllApplicationActivities=function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var u,l=Object.keys(T)[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var a=u.value,s=T[a],c=!0,o=!1,f=void 0;try{for(var d,v=s[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value;p.application_id===t&&e.push({userId:a,activity:p})}}catch(t){o=!0;f=t}finally{try{c||null==v.return||v.return()}finally{if(o)throw f}}}}catch(t){i=!0;r=t}finally{try{n||null==l.return||l.return()
}finally{if(i)throw r}}return e};i.getApplicationActivity=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.findActivity(t,(function(t){return t.application_id===e}),n)};i.findActivity=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.getActivities(t,n).find(e)};i.getActivityMetadata=function(t){return C[t]};i.getUserIds=function(){return Object.keys(T)};i.isMobileOnline=function(t){var e=P[t];return null!=e&&e[d.X5t.MOBILE]===d.Skl.ONLINE&&e[d.X5t.DESKTOP]!==d.Skl.ONLINE};i.getState=function(){return{presencesForGuilds:A,statuses:N,activities:T,activityMetadata:C,clientStatuses:P}};i.__getLocalVars=function(){return{NO_ACTIVITIES:O,presencesForGuilds:A,statuses:N,activities:T,clientStatuses:P,activityMetadata:C,typeScore:M,richnessScore:Z}};return n}(a.ZP.Store);D.displayName="PresenceStore";const V=new D(s.Z,{CONNECTION_OPEN:function(){return!0},CONNECTION_OPEN_SUPPLEMENTAL:function(t){
var e=t.guilds,n=t.presences,i=o.default.getId();A={};C={};N=_({},i,N[i]);T=_({},i,T[i]);P=_({},i,{});var r=new Set,u=Date.now();e.forEach((function(t){t.presences.forEach((function(e){var n=e.user,i=e.status,l=e.clientStatus,a=e.activities;R({guildId:t.id,userId:n.id,status:i,clientStatus:l,activities:a,timestamp:u});r.add(n.id)}))}));n.forEach((function(t){var e=t.user,n=t.status,i=t.clientStatus,l=t.activities;if(null!=e){R({guildId:d.ME,userId:e.id,status:n,clientStatus:i,activities:l,timestamp:u});r.add(e.id)}}));r.delete(i);r.forEach(k)},OVERLAY_INITIALIZE:function(t){var e=t.presences;A=e.presencesForGuilds;N=e.statuses;T=e.activities;C=e.activityMetadata},GUILD_CREATE:function(t){var e=t.guild;e.presences.forEach((function(t){var n=t.user,i=t.status,r=t.clientStatus,u=t.activities;F({guildId:e.id,userId:n.id,status:i,clientStatus:r,activities:u})}))},GUILD_DELETE:function(t){G(t.guild.id)},GUILD_MEMBER_REMOVE:function(t){return j(t.guildId,t.user.id)},
PRESENCE_UPDATES:function(t){return t.updates.map((function(t){var e=t.guildId,n=t.user,i=t.status,r=t.clientStatus,u=t.activities;return F({guildId:null!=e?e:d.ME,userId:n.id,status:i,clientStatus:r,activities:u})})).some((function(t){return t}))},PRESENCES_REPLACE:function(t){var e=t.presences;G(d.ME);e.forEach((function(t){var e=t.user,n=t.status,i=t.clientStatus,r=t.activities;null!=e&&F({guildId:d.ME,userId:e.id,status:n,clientStatus:i,activities:r})}))},ACTIVITY_METADATA_UPDATE:function(t){var e=t.userId,n=t.metadata;C[e]=n;return!1},THREAD_MEMBER_LIST_UPDATE:function(t){var e=t.guildId;t.members.forEach((function(t){null!=t.presence&&F({guildId:e,userId:t.user_id,status:t.presence.status,clientStatus:t.presence.clientStatus,activities:t.presence.activities})}))},THREAD_MEMBERS_UPDATE:function(t){var e=t.guildId,n=t.addedMembers;null==n||n.forEach((function(t){null!=t.presence&&F({guildId:e,userId:t.userId,status:t.presence.status,clientStatus:t.presence.clientStatus,
activities:t.presence.activities})}))},SELF_PRESENCE_STORE_UPDATE:function(t){var e=o.default.getId();if(N[e]===t.status&&T[e]===t.activities)return!1;N[e]=t.status;T[e]=t.activities;delete C[e]}})}}]);
//# sourceMappingURL=f95492988a3fef9587b2.js.map