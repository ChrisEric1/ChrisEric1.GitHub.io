"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[56345],{579220:(t,n,e)=>{e.d(n,{jN:()=>r,xf:()=>i,Ou:()=>u});var o=e(173436);function r(t){o.Z.dispatch({type:"LAYER_PUSH",component:t})}function i(){o.Z.dispatch({type:"LAYER_POP"})}function u(){o.Z.dispatch({type:"LAYER_POP_ALL"})}},956345:(t,n,e)=>{e.d(n,{Z:()=>T});var o=e(675860),r=e(444450),i=e(173436),u=e(381807),l=e(932847),c=e(917870),s=e(301513),a=e(742269),S=e(579220),p=e(461061),f=e(959797);function _(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function E(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))));o.forEach((function(n){_(t,n,e[n])}))}return t}function O(t,n){n=null!=n?n:{}
;Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})));e.push.apply(e,o)}return e}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}));return t}const T={open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{openWithoutBackstack:!1};i.Z.dispatch(E({type:"USER_SETTINGS_MODAL_OPEN",section:t,subsection:n},e));(0,S.jN)(p.S9g.USER_SETTINGS)},init:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2?arguments[2]:void 0;i.Z.dispatch(E({type:"USER_SETTINGS_MODAL_INIT",section:t,subsection:n},e))},close:function(){
var t=u.Z.onClose;i.Z.dispatch({type:"USER_SETTINGS_MODAL_CLOSE"});null!=t&&t()},setSection:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.Z.dispatch(E({type:"USER_SETTINGS_MODAL_SET_SECTION",section:t,subsection:n},e))},clearSubsection:function(t){i.Z.dispatch({type:"USER_SETTINGS_MODAL_CLEAR_SUBSECTION",forSection:t})},clearScrollPosition:function(t){i.Z.dispatch({type:"USER_SETTINGS_MODAL_CLEAR_SCROLL_POSITION",forSection:t})},updateAccount:function(t){i.Z.dispatch({type:"USER_SETTINGS_MODAL_UPDATE_ACCOUNT",settings:t})},submitComplete:function(){i.Z.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_COMPLETE"})},reset:function(){i.Z.dispatch({type:"USER_SETTINGS_MODAL_RESET"})},saveAccountChanges:function(t,n){var e=this;i.Z.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT"});var u=t.username,S=t.email,_=t.emailToken,T=t.password,d=t.avatar,y=t.newPassword,h=t.discriminator,b=n.close;return(0,
s.Z)((function(t){var n=O(E({username:u,email:S,email_token:_,password:T,avatar:d,new_password:y},t),{discriminator:null!=h&&""!==h?h:void 0}),e=r.Z.get(p.JkL),i=(0,a.xJ)();if(null!=i&&null!=e){n.push_provider=i;n.push_token=e}var l=r.Z.get(p.scU);if(null!=p.mvA&&null!=l){n.push_voip_provider=p.mvA;n.push_voip_token=l}return o.Z.patch({url:p.ANM.ME,body:n,oldFormErrors:!0})}),{checkEnabled:!1,modalProps:{title:f.Z.Messages.TWO_FA_CHANGE_ACCOUNT},hooks:{onEarlyClose:function(){return i.Z.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_FAILURE",errors:{}})}}}).then((function(t){var n=t.body,o=n.token;l.default.track(p.rMx.USER_AVATAR_UPDATED,{animated:(0,c.xR)(n.avatar)});delete n.token;i.Z.dispatch({type:"UPDATE_TOKEN",token:o,userId:n.id});i.Z.dispatch({type:"CURRENT_USER_UPDATE",user:n});null!=y&&i.Z.dispatch({type:"USER_PASSWORD_UPDATE",user:n,newPassword:y});null!=T&&null!=y&&i.Z.dispatch({type:"PASSWORD_UPDATED",userId:n.id});b?e.close():e.submitComplete();return t}),(function(t){
i.Z.dispatch({type:"USER_SETTINGS_MODAL_SUBMIT_FAILURE",errors:t.body});return t}))}}},381807:(t,n,e)=>{e.d(n,{Z:()=>G});var o=e(496486),r=e.n(o),i=e(363010),u=e(173436),l=e(859023),c=e(461061);function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function a(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1;o.configurable=!0;"value"in o&&(o.writable=!0);Object.defineProperty(t,o.key,o)}}function S(t,n,e){n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;return t}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))))
;o.forEach((function(n){S(t,n,e[n])}))}return t}function _(t,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function E(t,n){E=Object.setPrototypeOf||function(t,n){t.__proto__=n;return t};return E(t,n)}var O=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function T(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var e,o=p(t);if(n){var r=p(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return _(this,e)}}var d=c.QZA.CLOSED,y=null,h=null,b={},A={},v={},U=null,I=null,P=!1,N=!1,m=null,R=null,L=null,g=[],C=null,D=null;function M(t){
var n,e,o,r,i,u,s=l.default.getCurrentUser();if(null==s)return w();h=null!==(n=t.section)&&void 0!==n?n:h;C=null!==(e=t.section)&&void 0!==e?e:h;null!=t.subsection&&null!=h&&(b[h]=t.subsection);null!=t.scrollPosition&&null!=h&&(A[h]=t.scrollPosition);N=!!t.openWithoutBackstack;d=c.QZA.OPEN;v={};U=S({},c.oAB.ACCOUNT,{userId:s.id,username:s.username,discriminator:s.discriminator,email:s.email,avatar:s.avatar,password:"",newPassword:null,claimed:s.isClaimed()});I=f({},U);R=null!==(o=t.onClose)&&void 0!==o?o:null;L=null!==(r=t.analyticsLocation)&&void 0!==r?r:null;g=null!==(i=t.analyticsLocations)&&void 0!==i?i:[];D=null!==(u=t.impressionSource)&&void 0!==u?u:null}function w(){d=c.QZA.CLOSED;P=!1;U=null;C=null;I=null;y=null;h=null;b={};A={};R=null;L=null;g=[];D=null}function Z(){d=c.QZA.OPEN;v={}}var k=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{
value:t,writable:!0,configurable:!0}});n&&E(t,n)}(e,t);var n=T(e);function e(){s(this,e);return n.apply(this,arguments)}var o=e.prototype;o.initialize=function(){this.waitFor(l.default)};o.hasChanges=function(){return null!=I&&null!=U&&(!(!this.isOpen()&&m!==c.cII.USER_SETTINGS)&&!r().isEqual(I,U))};o.isOpen=function(){return P};o.getPreviousSection=function(){return y};o.getSection=function(){return h};o.getSubsection=function(){return null!=h?b[h]:null};o.getScrollPosition=function(){return null!=h?A[h]:null};o.shouldOpenWithoutBackstack=function(){return N};o.getProps=function(){return{submitting:d===c.QZA.SUBMITTING,section:h,subsection:null!=h?b[h]:null,scrollPosition:null!=h?A[h]:null,settings:I,errors:v,hasChanges:this.hasChanges(),openWithoutBackstack:N,analyticsLocation:L,analyticsLocations:g,initialSection:C,impressionSource:D}};o.__getLocalVars=function(){return{formState:d,previousSection:y,section:h,subsections:b,scrollPositions:A,errors:v,originalSettings:U,settings:I,
open:P,openWithoutBackstack:N,tab:m,onClose:R,analyticsLocation:L,analyticsLocations:g,initialSection:C,impressionSource:D}};!function(t,n,e){n&&a(t.prototype,n);e&&a(t,e)}(e,[{key:"onClose",get:function(){return R}}]);return e}(i.ZP.Store);k.displayName="UserSettingsModalStore";const G=new k(u.Z,{USER_SETTINGS_MODAL_OPEN:function(t){P=!0;M(t)},USER_SETTINGS_MODAL_INIT:M,USER_SETTINGS_MODAL_CLOSE:w,LOGOUT:w,USER_SETTINGS_MODAL_SUBMIT:function(){d=c.QZA.SUBMITTING},USER_SETTINGS_MODAL_SUBMIT_FAILURE:function(t){if(d!==c.QZA.SUBMITTING)return!1;d=c.QZA.OPEN;h=c.oAB.ACCOUNT;var n;v=null!==(n=t.errors)&&void 0!==n?n:{}},USER_SETTINGS_MODAL_SET_SECTION:function(t){y=h;h=t.section;L=null;var n;g=null!==(n=t.analyticsLocations)&&void 0!==n?n:[];null!=t.subsection&&(b[h]=t.subsection)},USER_SETTINGS_MODAL_CLEAR_SUBSECTION:function(t){var n=t.forSection;null!=n?delete b[n]:null!=h&&delete b[h]},USER_SETTINGS_MODAL_CLEAR_SCROLL_POSITION:function(t){var n=t.forSection
;null!=n?delete A[n]:null!=h&&delete A[h]},USER_SETTINGS_MODAL_UPDATE_ACCOUNT:function(t){var n=t.settings;null==I&&(I={});var e=I[c.oAB.ACCOUNT];I[c.oAB.ACCOUNT]=f({},e,n)},USER_SETTINGS_MODAL_SUBMIT_COMPLETE:Z,USER_SETTINGS_MODAL_RESET:function(){var t=l.default.getCurrentUser();Z();if(null!=t){U=S({},c.oAB.ACCOUNT,{userId:t.id,username:t.username,discriminator:t.discriminator,email:t.email,avatar:t.avatar,password:"",newPassword:null,claimed:t.isClaimed()});I=f({},U)}},DRAWER_SELECT_TAB:function(t){m=t.tab;return null==h&&m===c.cII.USER_SETTINGS&&M({type:"USER_SETTINGS_MODAL_INIT",section:null,subsection:null,scrollPosition:null,openWithoutBackstack:!1})}})}}]);
//# sourceMappingURL=bb1ee75b61af6e664604.js.map