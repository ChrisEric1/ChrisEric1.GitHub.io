"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[7679],{122139:(e,n,r)=>{r.d(n,{Z:()=>u});var t=r(785893),l=(r(667294),r(945460)),s=r(473708),a=r(897790),o=r.n(a);function u(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Text,{className:o().marker,tag:"span",variant:"text-md/semibold",color:"text-danger",children:"*"}),(0,t.jsx)(l.HiddenVisually,{children:s.Z.Messages.REQUIRED})]})}},907679:(e,n,r)=>{r.r(n);r.d(n,{default:()=>M});var t=r(785893),l=r(667294),s=r(824390),a=r.n(s),o=r(318715),u=r(945460),i=r(185161),c=r(21372),d=r(567403),f=r(473903),m=r(443812),E=r(563135),g=r(122139),O=r(2590),h=r(473708),v=r(937306),S=r.n(v);function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function _(e,n,r){n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r;return e}function b(e){for(var n=1;n<arguments.length;n++){
var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))));t.forEach((function(n){_(e,n,r[n])}))}return e}function p(e,n){n=null!=n?n:{};Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})));r.push.apply(r,t)}return r}(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}));return e}function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,l,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(t=r.next()).done);a=!0){s.push(t.value)
;if(n&&s.length===n)break}}catch(e){o=!0;l=e}finally{try{a||null==r.return||r.return()}finally{if(o)throw l}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return I(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var n,r,s,v=e.transitionState,I=e.onClose,_=e.guildId,M=e.welcomeMessage,x=e.onSave,j=(0,m.Dt)(),N=A(l.useState(b({},M)),2),y=N[0],T=N[1],L=(0,o.ZP)([d.Z],(function(){return d.Z.getGuild(_)})),R=l.useCallback((function(e){var n,r,t={},l=c.ZP.getMembers(_).filter((function(n){var r,l=f.default.getUser(n.userId);null!=l&&(t[n.userId]=l);if(null==L||null==l||!function(e,n){
return!!e.isOwner(n)||!!E.ZP.can({permission:O.Plq.ADMINISTRATOR,context:e,user:n})||E.ZP.can({permission:O.Plq.MANAGE_GUILD,context:e,user:n})&&E.ZP.can({permission:O.Plq.MANAGE_ROLES,context:e,user:n})}(L,l))return!1;var s="".concat(null!==(r=n.nick)&&void 0!==r?r:""," ").concat(null==l?void 0:l.username);return a()(e.toLowerCase(),s.toLowerCase())}));return Promise.resolve(l.map((function(e){var l;return{value:e.userId,label:null!==(r=null!==(n=e.nick)&&void 0!==n?n:null===(l=t[e.userId])||void 0===l?void 0:l.username)&&void 0!==r?r:""}})))}),[_,L]),P=l.useCallback((function(e){if(null==_||null==e)return null;var n=c.ZP.getMember(_,e.value);if(null==n)return null;var r=f.default.getUser(n.userId);if(null==r)return null;var l=r.getAvatarURL(_,20);return(0,t.jsx)(u.AnimatedAvatar,{size:u.AvatarSizes.SIZE_20,src:l,"aria-hidden":!0})}),[_]),C=l.useCallback((function(e){var n=e.value;T((function(e){return p(b({},e),{authorIds:null!=n?[n]:[]})}))}),[T]),G=l.useCallback((function(e){
T((function(n){return p(b({},n),{message:null!=e?e:""})}))}),[T]),Z=l.useCallback((function(){x(null);I()}),[x,I]),D=null!==(n=y.authorIds[0])&&void 0!==n?n:"",k=(0,o.ZP)([c.ZP],(function(){return null!=_?c.ZP.getMember(_,D):null})),w=(0,o.ZP)([f.default],(function(){return null!=k?f.default.getUser(k.userId):null})),B=null!==(s=null!==(r=null==k?void 0:k.nick)&&void 0!==r?r:null==w?void 0:w.username)&&void 0!==s?s:"",U=function(e){return null==e.message||0===e.message.length?null:null==e.authorIds||0===e.authorIds.length?e.message.length<i.ZR?h.Z.Messages.WELCOME_MESSAGE_VALIDATION_ERROR_AUTHOR_AND_MESSAGE.format({minLength:i.ZR}):h.Z.Messages.WELCOME_MESSAGE_VALIDATION_ERROR_AUTHOR:e.message.length<i.ZR?h.Z.Messages.WELCOME_MESSAGE_VALIDATION_ERROR_MESSAGE.format({minLength:i.ZR}):null}(y);return(0,t.jsxs)(u.ModalRoot,{transitionState:v,"aria-labelledby":j,children:[(0,t.jsxs)("div",{className:S().container,children:[(0,t.jsx)(u.ModalCloseButton,{className:S().closeButton,onClick:I
}),(0,t.jsxs)("div",{className:S().formGroup,children:[(0,t.jsxs)(u.Heading,{variant:"heading-md/semibold",color:"header-primary",children:[h.Z.Messages.GUILD_SETTINGS_ONBOARDING_HOME_SETTINGS_WELCOME_AUTHOR_TITLE,(0,t.jsx)(g.Z,{})]}),(0,t.jsx)(u.Text,{variant:"text-sm/normal",color:"header-secondary",children:h.Z.Messages.GUILD_SETTINGS_ONBOARDING_HOME_SETTINGS_WELCOME_AUTHOR_EXPLAINER}),(0,t.jsx)(u.SearchableSelect,{value:{value:D,label:B},renderOptionPrefix:P,options:R,onChange:C,filter:!1})]}),(0,t.jsx)("div",{className:S().separator}),(0,t.jsxs)("div",{className:S().formGroup,children:[(0,t.jsx)(u.Heading,{variant:"heading-md/semibold",color:"header-primary",children:h.Z.Messages.GUILD_SETTINGS_ONBOARDING_HOME_SETTINGS_WELCOME_MESSAGE_INPUT_HEADER}),(0,t.jsx)(u.Text,{variant:"text-sm/normal",color:"header-secondary",children:h.Z.Messages.GUILD_SETTINGS_ONBOARDING_HOME_SETTINGS_WELCOME_DESCRIPTION_TIP.format()}),(0,t.jsx)(u.TextArea,{className:S().welcomeMessageTextInput,
placeholder:h.Z.Messages.GUILD_SETTINGS_ONBOARDING_HOME_SETTINGS_WELCOME_PLACEHOLDER,value:y.message,onChange:G,maxLength:i.W4}),null!=U?(0,t.jsx)(u.Text,{variant:"text-xs/normal",color:"text-danger",children:U}):null]})]}),(0,t.jsx)(u.ModalFooter,{children:(0,t.jsxs)("div",{className:S().footerButtons,children:[(0,t.jsx)("div",{className:S().leftButtons,children:(0,t.jsx)(u.Button,{size:u.Button.Sizes.SMALL,look:u.Button.Looks.LINK,color:u.Button.Colors.RED,onClick:Z,children:h.Z.Messages.REMOVE})}),(0,t.jsxs)("div",{className:S().rightButtons,children:[(0,t.jsx)(u.Button,{onClick:I,size:u.Button.Sizes.SMALL,look:u.Button.Looks.LINK,color:u.Button.Colors.PRIMARY,children:h.Z.Messages.CANCEL}),(0,t.jsx)(u.Button,{disabled:0===y.message.length||null!=U,onClick:function(){x(y);I()},children:h.Z.Messages.SAVE})]})]})})]})}}}]);
//# sourceMappingURL=0f17e1513d87a3d4e8dc.js.map