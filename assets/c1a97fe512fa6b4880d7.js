"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([[79949],{161071:(e,t,n)=>{n.d(t,{q:()=>u});var r=n(281110),a=n(744564),i=n(430091),s=n(2590);function l(e,t,n,r,a,i,s){try{var l=e[i](s),o=l.value}catch(e){n(e);return}l.done?t(o):Promise.resolve(o).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){l(i,r,a,s,o,"next",e)}function o(e){l(i,r,a,s,o,"throw",e)}s(void 0)}))}}var c=function(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){
case 0:case 1:a=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;r=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1];a=i;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(i);break}a[2]&&s.ops.pop();s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};function u(e,t,n,r){return h.apply(this,arguments)}function h(){return(h=o((function(e,t,n,l){var o;return c(this,(function(c){switch(c.label){case 0:if(!i.Z.needsToFetchBuildSize(n))return[2];a.Z.dispatch({type:"APPLICATION_BUILD_SIZE_FETCH_START",buildId:n});c.label=1;case 1:c.trys.push([1,3,,4]);return[4,r.Z.post({url:s.ANM.APPLICATION_BUILD_SIZE(e,t,n),body:{manifest_ids:l},oldFormErrors:!0})];case 2:o=c.sent();a.Z.dispatch({
type:"APPLICATION_BUILD_SIZE_FETCH_SUCCESS",buildId:n,sizeKB:o.body.size_kb});return[3,4];case 3:c.sent();a.Z.dispatch({type:"APPLICATION_BUILD_SIZE_FETCH_FAIL",buildId:n});return[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},695166:(e,t,n)=>{n.d(t,{Bv:()=>a,DC:()=>i});var r=n(744564);function a(){r.Z.dispatch({type:"APPLICATION_STORE_ACCEPT_STORE_TERMS"})}function i(e){r.Z.dispatch({type:"APPLICATION_STORE_ACCEPT_EULA",eulaId:e})}},980151:(e,t,n)=>{n.d(t,{RY:()=>i,iD:()=>s,Tb:()=>l,ec:()=>o});var r=n(744564),a=n(457493);function i(e){a.Z.queryDirectory(e,(function(t,n){null==t&&null!=n&&r.Z.dispatch({type:"INSTALLATION_LOCATION_ADD",path:e,metadata:n})}))}function s(e){r.Z.dispatch({type:"INSTALLATION_LOCATION_REMOVE",path:e})}function l(e,t){var n=t.label,a=t.isDefault;r.Z.dispatch({type:"INSTALLATION_LOCATION_UPDATE",path:e,label:n,isDefault:a})}function o(e){var t={},n=0,i=!0,s=!1,l=void 0;try{for(var o,c=function(){var i=o.value
;if(null==i||"string"!=typeof i)return"continue";a.Z.queryDirectory(i,(function(a,s){++n;null==a&&null!=s&&(t[i]=s);n===e.length&&r.Z.dispatch({type:"INSTALLATION_LOCATION_FETCH_METADATA",metadataPayload:t})}))},u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)c()}catch(e){s=!0;l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}}},26529:(e,t,n)=>{n.d(t,{Z:()=>M});var r=n(785893),a=n(667294),i=n(294184),s=n.n(i),l=n(441143),o=n.n(l),c=n(202351),u=n(945460);const h=(0,n(260561).B)({id:"2023-05_checkout_terms_of_service",label:"Checkout Terms of Service",kind:"user",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enabled",config:{enabled:!0}}]});var d=n(16703),f=n(64318),p=n(348592),v=n(850841),I=n(2590),b=n(203600),m=n(473708),y=n(205074),A=n.n(y);function T(e,t,n,r,a,i,s){try{var l=e[i](s),o=l.value}catch(e){n(e);return}l.done?t(o):Promise.resolve(o).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){
var i=e.apply(t,n);function s(e){T(i,r,a,s,l,"next",e)}function l(e){T(i,r,a,s,l,"throw",e)}s(void 0)}))}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return P(e)}function E(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){g=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return g(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}var C=function(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:s.label++;return{value:i[1],done:!1};case 5:s.label++;r=i[1];i=[0];continue;case 7:i=s.ops.pop();s.trys.pop();continue;default:if(!(a=s.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}
if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1];a=i;break}if(a&&s.label<a[2]){s.label=a[2];s.ops.push(i);break}a[2]&&s.ops.pop();s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e];r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&g(e,t)}(a,e);var t=S(a);function a(){L(this,a);var e;(e=t.apply(this,arguments)).state={hasAcceptedTerms:!e.props.forceShow&&e.props.hasPreviouslyAcceptedTerms,hasAcceptedEULA:!e.props.forceShow&&e.props.hasPreviouslyAcceptedEULA,hasAcceptedWithdrawalWaiver:!1};e.handleToggleTermsAcceptance=function(t,n){e.setState({hasAcceptedTerms:n})};e.handleToggleEUWithdralWaiverAcceptance=function(t,n){e.setState({hasAcceptedWithdrawalWaiver:n})}
;e.handleToggleEULAAcceptance=function(t,n){e.setState({hasAcceptedEULA:n})};return e}var i=a.prototype;i.componentDidMount=function(){this.props.onChange(this.hasAcceptedNeccessaryTerms(this.props,this.state));this.eligibleForNewExperience()&&h.trackExposure({})};i.componentDidUpdate=function(e,t){var n=this.hasAcceptedNeccessaryTerms(e,t),r=this.hasAcceptedNeccessaryTerms(this.props,this.state);r!==n&&this.props.onChange(r)};i.hasAcceptedNeccessaryTerms=function(e,t){return(e.isTrial||this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()||t.hasAcceptedTerms)&&(null==e.eulaId||t.hasAcceptedEULA)&&(!e.showWithdrawalWaiver||t.hasAcceptedWithdrawalWaiver)};i.eligibleForNewExperience=function(){var e=this.props,t=e.forceShow,n=e.hasPreviouslyAcceptedTerms,r=e.isTrial,a=e.isGift;return!(!t&&n||r||!a)};i.isInCheckoutTOSExperiment=function(){return h.getCurrentConfig({},{autoTrackExposure:!0}).enabled};i.renderLegalTerms=function(){
var e=this.props,t=e.hasPreviouslyAcceptedTerms,n=e.forceShow,a=e.isTrial,i=e.checkboxLabel,l=e.checkboxClassname,o=e.checkboxLabelClassname,c=e.disabled,h=this.state.hasAcceptedTerms;if(this.eligibleForNewExperience()&&this.isInCheckoutTOSExperiment()){var d=m.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL_V2.format({primaryText:m.Z.Messages.PAYMENT_MODAL_BUTTON_PREMIUM_GIFT,paidURL:I.EYA.PAID_TERMS});return(0,r.jsx)("div",{className:s()(A().checkboxLabel,o),children:d})}return!n&&t||a?null:(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:h,onChange:this.handleToggleTermsAcceptance,disabled:c,className:s()(A().checkbox,l),children:(0,r.jsx)("div",{className:s()(A().checkboxLabel,o),children:null!=i?i:m.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO_TERMS_LABEL.format({termsURL:I.EYA.TERMS,paidURL:I.EYA.PAID_TERMS})})})};i.formatInterval=function(e){if(e===b.rV.YEAR)return m.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_YEAR
;if(e===b.rV.MONTH)return m.Z.Messages.PREMIUM_SUBSCRIPTION_INTERVAL_MONTH;throw new Error("Invalid interval type: ".concat(e))};i.render=function(){var e=this.props,t=e.eulaId,a=e.applicationName,i=e.hasPreviouslyAcceptedTerms,l=e.hasPreviouslyAcceptedEULA,c=e.forceShow,h=e.disabled,f=e.className,b=e.checkboxClassname,y=e.checkboxLabelClassname,T=e.finePrint,L=e.showPricingLink,P=e.showWithdrawalWaiver,E=e.isTrial,g=e.subscriptionPlan,O=this.state,S=O.hasAcceptedEULA,x=O.hasAcceptedWithdrawalWaiver;o()(!E||null!=g,"subscriptionPlan cannot be null if shouldShowUpdatedPaymentModal is true");return c||!i||null!=t&&!l||P?(0,r.jsxs)("div",{className:f,children:[E?(0,r.jsx)(d.KU,{}):(0,r.jsx)(u.FormTitle,{className:A().formTitle,children:P?m.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER:m.Z.Messages.BILLING_LEGAL_MUMBO_JUMBO}),this.renderLegalTerms(),null==t||!c&&l?null:(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:S,onChange:this.handleToggleEULAAcceptance,disabled:h,
className:A().checkbox,children:(0,r.jsx)("div",{className:A().checkboxLabel,children:m.Z.Messages.BILLING_THIRD_PARTY_EULA_LABEL.format({applicationName:a,onClick:function(e){(0,u.openModalLazy)(_((function(){var e,a;return C(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(40532),n.e(81757),n.e(6287),n.e(55121),n.e(25978),n.e(19798)]).then(n.bind(n,54415))];case 1:e=i.sent(),a=e.default;return[2,function(e){return(0,r.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))));r.forEach((function(t){N(e,t,n[t])}))}return e}({eulaId:t},e))}]}}))})));e.preventDefault()}})})}),null==T?null:(0,r.jsx)("div",{className:A().finePrint,children:T}),P?(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)(u.Checkbox,{type:u.Checkbox.Types.INVERTED,value:x,
onChange:this.handleToggleEUWithdralWaiverAcceptance,disabled:h,className:s()(A().checkbox,b),children:(0,r.jsx)("div",{className:s()(A().checkboxLabel,y),children:m.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_CHECKBOX})}),(0,r.jsx)("div",{className:A().finePrint,children:m.Z.Messages.BILLING_ONLINE_PURCHASE_WAIVER_DISCLAIMER})]}):null,(0,r.jsx)("div",{className:A().finePrint,children:L&&(0,r.jsxs)(r.Fragment,{children:["*",m.Z.Messages.BILLING_HOW_PRICING_WORKS.format({documentationLink:p.Z.getArticleURL(I.BhN.LOCALIZED_PRICING)})]})}),E&&null!=g&&(0,r.jsx)(u.Text,{variant:"text-xs/medium",color:"interactive-normal",children:m.Z.Messages.BILLING_TRIAL_LEGAL_COPY_V2.format({buttonText:(0,v.W_)(null,g),interval:this.formatInterval(null==g?void 0:g.interval),cancelSubscriptionArticle:p.Z.getArticleURL(I.BhN.PREMIUM_DETAILS_CANCEL_SUB),paidServiceTermsArticle:p.Z.getArticleURL(I.BhN.PAID_TERMS)})})]}):null};return a}(a.Component);const M=c.ZP.connectStores([f.Z],(function(e){var t=e.eulaId
;return{hasPreviouslyAcceptedTerms:f.Z.hasAcceptedStoreTerms,hasPreviouslyAcceptedEULA:null!=t&&f.Z.hasAcceptedEULA(t)}}))(x)},179949:(e,t,n)=>{n.r(t);n.d(t,{default:()=>w});var r=n(785893),a=n(667294),i=n(202351),s=n(945460),l=n(744564),o=n(114126),c=n(161071),u=n(695166),h=n(951442),d=n(26529),f=n(784426),p=n(959207),v=n(430091),I=n(64318),b=n(840974),m=n(107364),y=n(641277),A=n(452723),T=n(717902),_=n(2590),L=n(473708),N=n(451084),P=n.n(N);function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return g(e)}function O(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){S=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return S(e,t)}var C=function(e){
return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&S(e,t)}(n,e);var t=x(n);function n(){E(this,n);var e;(e=t.apply(this,arguments)).state={selectedInstallationPath:e.props.defaultInstallationPath,hasError:!1,isInstalling:!1,hasAcceptedNeccessaryTerms:!1};e.isUnmounted=!1;e.handleChangePath=function(t,n){
e.setState({selectedInstallationPath:t,hasError:n})};e.install=function(t,n){var r=e.props,a=r.application,i=r.branchId,s=r.analyticsLocation;if(null==a)return null;(0,h.LO)({application:a,branchId:i,buildId:t,manifestIds:n,installationPath:e.state.selectedInstallationPath,analyticsLocation:s});(0,f.uL)(_.Z5c.APPLICATION_LIBRARY);e.close()};e.handleInstall=function(){var t=e.props,n=t.application,r=t.buildId,a=t.manifestIds,i=t.hasPreviouslyAcceptedStoreTerms;if(null==r||null==a)throw new Error("Unexpected missing build info for non-premium product");i||(0,u.Bv)();null!=n&&null!=n.eulaId&&(0,u.DC)(n.eulaId);e.install(r,a)};e.handlePurchaseTermsChange=function(t){e.setState({hasAcceptedNeccessaryTerms:t})};e.close=function(){e.props.onClose()};return e}var a=n.prototype;a.fetchInstallSize=function(){var e=this.props,t=e.applicationId,n=e.branchId,r=e.buildId,a=e.manifestIds,i=e.buildSizeKB;null!=r&&null!=a&&null==i&&l.Z.wait((function(){(0,c.q)(t,n,r,a)}))}
;a.componentDidMount=function(){var e=this.props,t=e.applicationId,n=e.branchId,r=e.buildId,a=e.manifestIds;null==r||null==a?(0,o.l)(t,n):this.fetchInstallSize()};a.componentDidUpdate=function(e){this.props.buildId===e.buildId&&this.props.manifestIds===e.manifestIds||this.fetchInstallSize()};a.componentWillUnmount=function(){this.isUnmounted=!0};a.renderButton=function(){var e=this.props.buildId,t=this.state,n=t.hasError,a=t.hasAcceptedNeccessaryTerms;return(0,r.jsx)(s.Button,{disabled:n||null==e||!a,color:s.Button.Colors.GREEN,onClick:this.handleInstall,children:L.Z.Messages.GAME_ACTION_BUTTON_INSTALL})};a.render=function(){var e=this.props,t=e.application,n=e.buildSizeKB,a=e.transitionState,i=this.state,l=i.selectedInstallationPath,o=i.isInstalling,c=null!=t&&t.getSplashURL(440);return(0,r.jsxs)(s.ModalRoot,{transitionState:a,size:s.ModalSize.SMALL,"aria-label":L.Z.Messages.APPLICATION_INSTALLATION_MODAL_TITLE,children:[null!=c?(0,r.jsx)("div",{className:P().splash,style:{
backgroundImage:"url(".concat(c,")")}}):null,(0,r.jsxs)(s.ModalHeader,{justify:m.Z.Justify.BETWEEN,children:[(0,r.jsx)(m.Z.Child,{grow:1,children:(0,r.jsx)(s.Heading,{variant:"heading-lg/semibold",children:L.Z.Messages.APPLICATION_INSTALLATION_MODAL_TITLE})}),(0,r.jsx)(m.Z.Child,{grow:0,children:(0,r.jsx)(s.ModalCloseButton,{onClick:this.close})})]}),(0,r.jsxs)(s.ModalContent,{children:[(0,r.jsxs)(m.Z,{align:m.Z.Align.CENTER,children:[(0,r.jsx)(y.Z,{game:t,size:y.Z.Sizes.MEDIUM,className:P().gameIcon}),(0,r.jsx)("div",{className:P().gameName,children:null!=t&&t.name}),null!=n?(0,r.jsx)("div",{className:P().installSize,children:(0,A.BU)(n,{useKibibytes:!0})}):null]}),(0,r.jsx)("div",{className:P().divider}),(0,r.jsx)(T.Z,{autoFocus:!0,className:P().selector,value:l,requiredDiskKB:n,onChange:this.handleChangePath}),(0,r.jsx)(d.Z,{eulaId:t.eulaId,applicationName:t.name,disabled:o,onChange:this.handlePurchaseTermsChange,className:P().terms})]}),(0,r.jsx)(s.ModalFooter,{
children:this.renderButton()})]})};return n}(a.Component);const w=i.ZP.connectStores([b.Z,p.Z,v.Z,I.Z],(function(e){var t=e.applicationId,n=e.branchId,r=v.Z.getTargetBuildId(t,n);return{application:p.Z.getGame(t),defaultInstallationPath:b.Z.defaultInstallationPath,buildId:r,manifestIds:v.Z.getTargetManifests(t,n),buildSizeKB:null!=r?v.Z.getBuildSize(r):null,hasPreviouslyAcceptedStoreTerms:I.Z.hasAcceptedStoreTerms}}))(M)},717902:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(785893),a=n(667294),i=n(202351),s=n(945460),l=n(980151),o=n(840974),c=n(452723),u=n(310126),h=n(473708),d=n(734703),f=n.n(d);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return v(e)}function I(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
;return e}(e):t}function b(e,t){b=Object.setPrototypeOf||function(e,t){e.__proto__=t;return e};return b(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I(this,n)}}var A="select",T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});t&&b(e,t)}(n,e);var t=y(n);function n(){p(this,n);var e;(e=t.apply(this,arguments)).state={newInstallationPath:null}
;e.fetchedMetadataPaths=new Set;e.handleChange=function(t){t===A?u.default.showOpenDialog(["openDirectory"]).then((function(t){if(null!=t&&t.length>0){var n=t[0];e.setState({newInstallationPath:null!=e.props.installationPaths.find((function(e){return e.path===n}))?null:n});e.sendChange(n)}})):e.sendChange(t)};return e}var a=n.prototype;a.fetchAllDirectoryMetadata=function(){var e=this,t=this.props.installationPaths.map((function(e){return e.path})),n=this.state.newInstallationPath;null!=n&&t.push(n);t=t.filter((function(t){return!e.fetchedMetadataPaths.has(t)}));(0,l.ec)(t);var r=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;this.fetchedMetadataPaths.add(c)}}catch(e){a=!0;i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}};a.componentDidMount=function(){this.fetchAllDirectoryMetadata()};a.componentDidUpdate=function(e){this.fetchAllDirectoryMetadata()
;this.props.requiredDiskKB===e.requiredDiskKB&&this.props.installationPathsMetadata===e.installationPathsMetadata||this.sendChange(this.props.value)};a.getOptions=function(){var e=this,t=this.props.installationPaths,n=this.state.newInstallationPath,r=t.map((function(t){var n=t.path,r=t.label;return{value:n,label:e.renderLabel(n,r)}}));null!=n&&r.push({value:n,label:this.renderLabel(n)});r.push({value:A,label:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_SELECT_DIRECTORY});return r};a.hasEnoughDiskSpace=function(e){var t=this.props,n=t.requiredDiskKB,r=t.installationPathsMetadata,a=null!=r[e]?r[e].availableKB:null;return null==n||null==a||n<a};a.sendChange=function(e){var t=this.props,n=t.installationPathsMetadata;(0,t.onChange)(e,null!=n[e]&&!1===n[e].hasPermission||!this.hasEnoughDiskSpace(e))};a.renderError=function(){var e=this.props,t=e.value,n=e.installationPathsMetadata;return null!=n[t]&&!1===n[t].hasPermission?(0,r.jsx)("div",{className:f().error,
children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_NO_PERMISSION}):this.hasEnoughDiskSpace(t)?null:(0,r.jsx)("div",{className:f().error,children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_NOT_ENOUGH_SPACE})};a.renderLabel=function(e,t){var n=this.props.installationPathsMetadata,r=null!=t?t:e;return null!=n[e]&&null!=n[e].availableKB?h.Z.Messages.APPLICATION_INSTALLATION_MODAL_DIRECTORY_WITH_SPACE.format({path:r,size:(0,c.BU)(n[e].availableKB,{useKibibytes:!0})}):r};a.render=function(){var e=this.props,t=e.value,n=e.className,a=e.autoFocus;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsx)(s.FormTitle,{tag:"h5",children:h.Z.Messages.APPLICATION_INSTALLATION_MODAL_LOCATION}),(0,r.jsx)(s.SingleSelect,{autoFocus:a,options:this.getOptions(),value:t,onChange:this.handleChange}),this.renderError()]})};return n}(a.PureComponent);const _=i.ZP.connectStores([o.Z],(function(){return{installationPaths:o.Z.installationPaths,installationPathsMetadata:o.Z.installationPathsMetadata}}))(T)},
16703:(e,t,n)=>{n.d(t,{PO:()=>d,q9:()=>f,R$:()=>p,i$:()=>v,KU:()=>I,Ji:()=>b,HE:()=>m});var r=n(785893),a=(n(667294),n(294184)),i=n.n(a),s=n(73904),l=n(249052),o=n(473708),c=n(884092),u=n.n(c);function h(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}function d(e){var t=e.children,n=e.className;return(0,r.jsx)("div",{className:i()(u().table,n),children:t})}function f(e){var t=e.children;return(0,r.jsx)("div",{className:u().header,children:t})}function p(e){var t=e.label,n=e.value,a=e.className;return(0,r.jsxs)("div",{className:i()(u().row,a),children:[(0,r.jsx)("div",{className:u().rowLabel,children:t}),(0,r.jsx)("div",{className:u().rowAmount,children:n})]})}function v(e){var t=e.label,n=e.value,a=e.discounts,i=e.originalAmount,c=e.interval,h=e.currency,d=e.className,f=e.intervalCount,v=function(e){return null!=a?a.find((function(t){return t.type===e})):null
},I=v(s.eW.SUBSCRIPTION_PLAN),b=v(s.eW.ENTITLEMENT),m=null!=I?Math.floor(I.amount/i*100):null,y=(0,l.T4)(i,h);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{label:t,value:(0,r.jsxs)(r.Fragment,{children:[n,null!=m?(0,r.jsxs)("div",{className:u().rowPercentDiscount,children:["-",m,"%"]}):null]}),className:d}),null!=m?(0,r.jsxs)("div",{className:u().rowDiscountOriginalPrice,children:["(",null!=c&&null!=f?(0,l.og)(y,c,f):y,")"]}):null,null!=b?(0,r.jsx)("div",{className:u().entitlementDiscountRow,children:o.Z.Messages.BILLING_INVOICE_SUBSCRIPTION_CREDIT_APPLIED}):null]})}function I(e){var t,n=e.extended,a=void 0!==n&&n,s=e.negativeMarginTop,l=void 0!==s&&s;return(0,r.jsx)("div",{className:i()(u().divider,(t={},h(t,u().dividerExtended,a),h(t,u().negativeMarginTop,l),t))})}function b(e){var t=e.label,n=e.value,a=e.className;return(0,r.jsxs)("div",{className:i()(u().totalRow,a),children:[(0,r.jsx)("div",{className:u().totalLabel,children:t}),(0,r.jsx)("div",{className:u().totalAmount,
children:n})]})}function m(e){var t=e.children,n=e.className;return(0,r.jsx)("div",{className:i()(u().finePrint,n),children:t})}}}]);
//# sourceMappingURL=c1a97fe512fa6b4880d7.js.map